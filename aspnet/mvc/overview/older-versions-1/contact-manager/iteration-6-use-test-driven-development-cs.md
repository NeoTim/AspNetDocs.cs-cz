---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: '#6 iterace – použijte vývoj řízený testem (C#) | Dokumenty společnosti Microsoft'
author: rick-anderson
description: V této šesté iteraci přidáme nové funkce do naší aplikace zápisem testů částí první a psaní kódu proti testování částí. V této iteraci,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: d0e8f30a075cc79c7410ffe1b8bf02da2bd44443
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/17/2020
ms.locfileid: "81542323"
---
# <a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="5e374-104">Iterace č. 6 – použití vývoje řízeného testy (C#)</span><span class="sxs-lookup"><span data-stu-id="5e374-104">Iteration #6 – Use test-driven development (C#)</span></span>

<span data-ttu-id="5e374-105">podle [společnosti Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="5e374-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="5e374-106">Stáhnout kód</span><span class="sxs-lookup"><span data-stu-id="5e374-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="5e374-107">V této šesté iteraci přidáme nové funkce do naší aplikace zápisem testů částí první a psaní kódu proti testování částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="5e374-108">V této iteraci přidáme skupiny kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-108">In this iteration, we add contact groups.</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="5e374-109">Vytvoření aplikace pro správu kontaktů ASP.NET MVC (C#)</span><span class="sxs-lookup"><span data-stu-id="5e374-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>

<span data-ttu-id="5e374-110">V této sérii kurzů vytvoříme celou aplikaci pro správu kontaktů od začátku do konce.</span><span class="sxs-lookup"><span data-stu-id="5e374-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="5e374-111">Aplikace Contact Manager umožňuje ukládat kontaktní informace - jména, telefonní čísla a e-mailové adresy - pro seznam osob.</span><span class="sxs-lookup"><span data-stu-id="5e374-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="5e374-112">Vytvoříme aplikaci přes více iterací.</span><span class="sxs-lookup"><span data-stu-id="5e374-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="5e374-113">S každou iterací postupně vylepšujeme aplikaci.</span><span class="sxs-lookup"><span data-stu-id="5e374-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="5e374-114">Cílem tohoto přístupu více iterace je umožnit pochopit důvod pro každou změnu.</span><span class="sxs-lookup"><span data-stu-id="5e374-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="5e374-115">Iterace #1 - Vytvořte aplikaci.</span><span class="sxs-lookup"><span data-stu-id="5e374-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="5e374-116">V první iteraci vytvoříme Správce kontaktů nejjednodušším možným způsobem.</span><span class="sxs-lookup"><span data-stu-id="5e374-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="5e374-117">Přidáváme podporu pro základní databázové operace: Vytvořit, Číst, Aktualizovat a odstranit (CRUD).</span><span class="sxs-lookup"><span data-stu-id="5e374-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="5e374-118">Iterace #2 - Make aplikace vypadat hezky.</span><span class="sxs-lookup"><span data-stu-id="5e374-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="5e374-119">V této iteraci vylepšujeme vzhled aplikace úpravou výchozí ASP.NET stránku předlohy zobrazení MVC a kaskádovou šablonu stylů.</span><span class="sxs-lookup"><span data-stu-id="5e374-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="5e374-120">#3 iterace – přidejte ověření formuláře.</span><span class="sxs-lookup"><span data-stu-id="5e374-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="5e374-121">Ve třetí iteraci přidáme ověření základního formuláře.</span><span class="sxs-lookup"><span data-stu-id="5e374-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="5e374-122">Bráníme uživatelům v odesílání formuláře bez vyplnění požadovaných polí formuláře.</span><span class="sxs-lookup"><span data-stu-id="5e374-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="5e374-123">Ověřujeme také e-mailové adresy a telefonní čísla.</span><span class="sxs-lookup"><span data-stu-id="5e374-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="5e374-124">Iterace #4 - Proveďte aplikaci volně spojená.</span><span class="sxs-lookup"><span data-stu-id="5e374-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="5e374-125">V této čtvrté iteraci využíváme několik vzorů návrhu softwaru, abychom usnadnili údržbu a úpravu aplikace Správce kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="5e374-126">Například refaktorujeme naši aplikaci tak, aby používala vzor úložiště a vzor vkládání závislostí.</span><span class="sxs-lookup"><span data-stu-id="5e374-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="5e374-127">Iterace #5 - vytvořit testy částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="5e374-128">V páté iteraci usnadňujeme údržbu a úpravy naší aplikace přidáním testů částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="5e374-129">Zesměšňujeme naše třídy datových modelů a vytváříme testy částí pro naše řadiče a logiku ověřování.</span><span class="sxs-lookup"><span data-stu-id="5e374-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="5e374-130">Iterace #6 – použijte vývoj řízený testem.</span><span class="sxs-lookup"><span data-stu-id="5e374-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="5e374-131">V této šesté iteraci přidáme nové funkce do naší aplikace zápisem testů částí první a psaní kódu proti testování částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="5e374-132">V této iteraci přidáme skupiny kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="5e374-133">Iterace #7 - Přidat funkci Ajax.</span><span class="sxs-lookup"><span data-stu-id="5e374-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="5e374-134">V sedmé iteraci zlepšujeme odezvu a výkon naší aplikace přidáním podpory pro Ajax.</span><span class="sxs-lookup"><span data-stu-id="5e374-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="5e374-135">Tato iterace</span><span class="sxs-lookup"><span data-stu-id="5e374-135">This Iteration</span></span>

<span data-ttu-id="5e374-136">V předchozí iteraci aplikace Contact Manager jsme vytvořili testy částí, abychom poskytli záchrannou síť pro náš kód.</span><span class="sxs-lookup"><span data-stu-id="5e374-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="5e374-137">Motivací pro vytvoření testů částí bylo, aby byl náš kód odolnější vůči změnám.</span><span class="sxs-lookup"><span data-stu-id="5e374-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="5e374-138">S testování částí na místě, můžeme šťastně provést jakoukoli změnu našeho kódu a okamžitě vědět, zda jsme porušili stávající funkce.</span><span class="sxs-lookup"><span data-stu-id="5e374-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="5e374-139">V této iteraci používáme testy částí pro zcela jiný účel.</span><span class="sxs-lookup"><span data-stu-id="5e374-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="5e374-140">V této iteraci používáme testy částí jako součást filozofie návrhu aplikace s názvem *vývoj řízený testováním*.</span><span class="sxs-lookup"><span data-stu-id="5e374-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="5e374-141">Při procvičování vývoj řízený testy, nejprve napíšete testy a pak napíšete kód proti testům.</span><span class="sxs-lookup"><span data-stu-id="5e374-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="5e374-142">Přesněji řečeno, při procvičování vývoje řízeného testováním existují tři kroky, které dokončíte při vytváření kódu (červená / zelená / refaktor):</span><span class="sxs-lookup"><span data-stu-id="5e374-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="5e374-143">Napsat test částí, který se nezdaří (červená)</span><span class="sxs-lookup"><span data-stu-id="5e374-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="5e374-144">Napište kód, který projde testováním částí (zelená)</span><span class="sxs-lookup"><span data-stu-id="5e374-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="5e374-145">Refaktorovat kód (Refaktor)</span><span class="sxs-lookup"><span data-stu-id="5e374-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="5e374-146">Nejprve napíšete test částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-146">First, you write the unit test.</span></span> <span data-ttu-id="5e374-147">Testování částí by měl vyjádřit svůj záměr pro jak očekáváte, že váš kód chovat.</span><span class="sxs-lookup"><span data-stu-id="5e374-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="5e374-148">Při prvním vytvoření testování částí by měl test částí selhat.</span><span class="sxs-lookup"><span data-stu-id="5e374-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="5e374-149">Test by měl selhat, protože jste ještě nenapsali žádný kód aplikace, který splňuje test.</span><span class="sxs-lookup"><span data-stu-id="5e374-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="5e374-150">Dále napíšete pouze dostatek kódu, aby test částí projít.</span><span class="sxs-lookup"><span data-stu-id="5e374-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="5e374-151">Cílem je napsat kód nejlínějším, nejnedbalejším a nejrychlejším možným způsobem.</span><span class="sxs-lookup"><span data-stu-id="5e374-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="5e374-152">Neměli byste ztrácet čas přemýšlením o architektuře vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="5e374-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="5e374-153">Místo toho byste se měli zaměřit na psaní minimální množství kódu potřebné k uspokojení záměru vyjádřené testování částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="5e374-154">Nakonec poté, co jste napsali dostatek kódu, můžete krok zpět a zvážit celkovou architekturu vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="5e374-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="5e374-155">V tomto kroku přepsat (refaktorovat) kód s využitím vzorů návrhu softwaru – jako je například vzor úložiště – tak, aby váš kód je více udržovatelné.</span><span class="sxs-lookup"><span data-stu-id="5e374-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="5e374-156">V tomto kroku můžete nebojácně přepsat kód, protože váš kód je pokryt testy částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="5e374-157">Existuje mnoho výhod, které vyplývají z praxe test-řízený vývoj.</span><span class="sxs-lookup"><span data-stu-id="5e374-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="5e374-158">Za prvé, vývoj řízený testem vás vynutí zaměřit se na kód, který je ve skutečnosti třeba napsat.</span><span class="sxs-lookup"><span data-stu-id="5e374-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="5e374-159">Vzhledem k tomu, že jste neustále zaměřena na jen psaní dostatek kódu projít konkrétní test, jste zabráněno putování do plevele a psaní obrovské množství kódu, který nikdy nebudete používat.</span><span class="sxs-lookup"><span data-stu-id="5e374-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="5e374-160">Za druhé, metodika návrhu "test first" vás nutí psát kód z hlediska, jak bude váš kód použit.</span><span class="sxs-lookup"><span data-stu-id="5e374-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="5e374-161">Jinými slovy, při procvičování vývoje řízeného testy neustále píšete testy z uživatelského hlediska.</span><span class="sxs-lookup"><span data-stu-id="5e374-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="5e374-162">Proto vývoj řízený testováním může mít za následek čistší a srozumitelnější api.</span><span class="sxs-lookup"><span data-stu-id="5e374-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="5e374-163">Nakonec vývoj řízený testováním vás vynutí psát testy částí jako součást normálního procesu psaní aplikace.</span><span class="sxs-lookup"><span data-stu-id="5e374-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="5e374-164">Jako termín projektu se blíží, testování je obvykle první věc, která jde ven z okna.</span><span class="sxs-lookup"><span data-stu-id="5e374-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="5e374-165">Při procvičování vývojřízený testem, na druhé straně, je pravděpodobnější, že bude ctnostný o psaní testů částí, protože vývoj řízený testem činí testy částí ústředním bodem procesu vytváření aplikace.</span><span class="sxs-lookup"><span data-stu-id="5e374-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="5e374-166">Chcete-li se dozvědět více o test-řízený vývoj, doporučuji, abyste si přečetli Michael Feathers knihu **Efektivně pracovat s Legacy Code**.</span><span class="sxs-lookup"><span data-stu-id="5e374-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>

<span data-ttu-id="5e374-167">V této iteraci přidáme novou funkci do naší aplikace Správce kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="5e374-168">Přidáváme podporu pro skupiny kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-168">We add support for Contact Groups.</span></span> <span data-ttu-id="5e374-169">Pomocí skupin kontaktů můžete kontakty uspořádat do kategorií, jako jsou skupiny Firmy a Přátelé.</span><span class="sxs-lookup"><span data-stu-id="5e374-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="5e374-170">Tuto novou funkci přidáme do naší aplikace pomocí procesu vývoje řízeného testováním.</span><span class="sxs-lookup"><span data-stu-id="5e374-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="5e374-171">Nejprve napíšeme naše testy částí a napíšeme všechny naše kódy proti těmto testům.</span><span class="sxs-lookup"><span data-stu-id="5e374-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="5e374-172">Co dostane testovány</span><span class="sxs-lookup"><span data-stu-id="5e374-172">What Gets Tested</span></span>

<span data-ttu-id="5e374-173">Jak jsme diskutovali v předchozí iteraci, obvykle nezapisujete testy částí logiky přístupu k datům nebo logiku zobrazení.</span><span class="sxs-lookup"><span data-stu-id="5e374-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="5e374-174">Nezapisujete testy částí logiky přístupu k datům, protože přístup k databázi je relativně pomalá operace.</span><span class="sxs-lookup"><span data-stu-id="5e374-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="5e374-175">Nezapisujete testy částí pro logiku zobrazení, protože přístup k zobrazení vyžaduje střídání webového serveru, což je relativně pomalá operace.</span><span class="sxs-lookup"><span data-stu-id="5e374-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="5e374-176">Neměli byste psát test částí, pokud test může být proveden znovu a znovu velmi rychle</span><span class="sxs-lookup"><span data-stu-id="5e374-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="5e374-177">Vzhledem k tomu, že vývoj řízený testováním je řízen testy částí, zaměřujeme se zpočátku na zápis řadiče a obchodní logiky.</span><span class="sxs-lookup"><span data-stu-id="5e374-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="5e374-178">Vyhýbáme se dotyku databáze nebo zobrazení.</span><span class="sxs-lookup"><span data-stu-id="5e374-178">We avoid touching the database or views.</span></span> <span data-ttu-id="5e374-179">Nebudeme upravovat databázi nebo vytvářet naše zobrazení až do samého konce tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="5e374-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="5e374-180">Začneme s tím, co lze testovat.</span><span class="sxs-lookup"><span data-stu-id="5e374-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="5e374-181">Vytváření uživatelských scénářů</span><span class="sxs-lookup"><span data-stu-id="5e374-181">Creating User Stories</span></span>

<span data-ttu-id="5e374-182">Při procvičování vývoje řízeného testováním vždy začínáte napsáním testu.</span><span class="sxs-lookup"><span data-stu-id="5e374-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="5e374-183">To okamžitě vyvolává otázku: Jak se rozhodnete, jaký test napsat jako první?</span><span class="sxs-lookup"><span data-stu-id="5e374-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="5e374-184">Chcete-li odpovědět na tuto otázku, měli byste napsat sadu [**uživatelských scénářů**](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="5e374-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="5e374-185">Příběh uživatele je velmi stručný (obvykle jedna věta) popis požadavku na software.</span><span class="sxs-lookup"><span data-stu-id="5e374-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="5e374-186">Měl by se jedná o netechnický popis požadavku napsaného z uživatelského hlediska.</span><span class="sxs-lookup"><span data-stu-id="5e374-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="5e374-187">Zde je sada uživatelských scénářů, které popisují funkce vyžadované novou funkcí skupiny kontaktů:</span><span class="sxs-lookup"><span data-stu-id="5e374-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="5e374-188">Uživatel může zobrazit seznam skupin kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="5e374-189">Uživatel může vytvořit novou skupinu kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="5e374-190">Uživatel může odstranit existující skupinu kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="5e374-191">Uživatel může při vytváření nového kontaktu vybrat skupinu kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="5e374-192">Uživatel může při úpravách existujícího kontaktu vybrat skupinu kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="5e374-193">V zobrazení Rejstřík se zobrazí seznam skupin kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="5e374-194">Když uživatel klepne na skupinu kontaktů, zobrazí se seznam odpovídajících kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="5e374-195">Všimněte si, že tento seznam uživatelských scénářů je zcela srozumitelný pro zákazníka.</span><span class="sxs-lookup"><span data-stu-id="5e374-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="5e374-196">Neexistuje žádná zmínka o podrobnostech technické implementace.</span><span class="sxs-lookup"><span data-stu-id="5e374-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="5e374-197">Zatímco v procesu vytváření aplikace, sada uživatelských scénářů může být přesnější.</span><span class="sxs-lookup"><span data-stu-id="5e374-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="5e374-198">Příběh uživatele můžete rozdělit do více článků (požadavků).</span><span class="sxs-lookup"><span data-stu-id="5e374-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="5e374-199">Můžete se například rozhodnout, že vytvoření nové skupiny kontaktů by mělo zahrnovat ověření.</span><span class="sxs-lookup"><span data-stu-id="5e374-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="5e374-200">Odeslání skupiny kontaktů bez názvu by mělo vrátit chybu ověření.</span><span class="sxs-lookup"><span data-stu-id="5e374-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="5e374-201">Po vytvoření seznamu uživatelských scénářů, jste připraveni napsat první test částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="5e374-202">Začneme vytvořením testování částí pro zobrazení seznamu skupin kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="5e374-203">Výpis skupin kontaktů</span><span class="sxs-lookup"><span data-stu-id="5e374-203">Listing Contact Groups</span></span>

<span data-ttu-id="5e374-204">Náš první uživatelský příběh je, že uživatel by měl mít možnost zobrazit seznam skupin kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="5e374-205">Musíme ten příběh vyjádřit testem.</span><span class="sxs-lookup"><span data-stu-id="5e374-205">We need to express this story with a test.</span></span>

<span data-ttu-id="5e374-206">Vytvořte nový test částí kliknutím pravým tlačítkem myši na složku Řadiče v projektu ContactManager.Testy, výběrem **možnosti Přidat, Nový test**a výběrem šablony **Testování částí** (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="5e374-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="5e374-207">Pojmenujte nový test částí GroupControllerTest.cs a klepněte na tlačítko **OK.**</span><span class="sxs-lookup"><span data-stu-id="5e374-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>

<span data-ttu-id="5e374-208">[![Přidání testu jednotky GroupControllerTest](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span></span>

<span data-ttu-id="5e374-209">**Obrázek 01**: Přidání testu jednotky GroupControllerTest(Klepnutím[zobrazíte obrázek v plné velikosti)](iteration-6-use-test-driven-development-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>

<span data-ttu-id="5e374-210">Náš první test částí je obsažen v seznamu 1.</span><span class="sxs-lookup"><span data-stu-id="5e374-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="5e374-211">Tento test ověří, že metoda Index() řadiče skupiny vrátí sadu skupin.</span><span class="sxs-lookup"><span data-stu-id="5e374-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="5e374-212">Test ověří, zda je v datech zobrazení vrácena kolekce skupin.</span><span class="sxs-lookup"><span data-stu-id="5e374-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="5e374-213">**Výpis 1 - Řadiče\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-213">**Listing 1 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="5e374-214">Při prvním zadání kódu do seznamu 1 v sadě Visual Studio získáte spoustu červených klikatých řádků.</span><span class="sxs-lookup"><span data-stu-id="5e374-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="5e374-215">Nevytvořili jsme třídy GroupController nebo Group.</span><span class="sxs-lookup"><span data-stu-id="5e374-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="5e374-216">V tomto okamžiku můžeme ani sestavit naši aplikaci, takže můžeme t provést náš první test částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="5e374-217">To je dobře.</span><span class="sxs-lookup"><span data-stu-id="5e374-217">That s good.</span></span> <span data-ttu-id="5e374-218">To se počítá jako neúspěšný test.</span><span class="sxs-lookup"><span data-stu-id="5e374-218">That counts as a failing test.</span></span> <span data-ttu-id="5e374-219">Proto máme nyní oprávnění začít psát kód aplikace.</span><span class="sxs-lookup"><span data-stu-id="5e374-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="5e374-220">Musíme napsat dostatek kódu k provedení našeho testu.</span><span class="sxs-lookup"><span data-stu-id="5e374-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="5e374-221">Třída řadiče skupiny v výpisu 2 obsahuje minimální kód potřebný k předání testu jednotky.</span><span class="sxs-lookup"><span data-stu-id="5e374-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="5e374-222">Akce Index() vrátí staticky kódovaný seznam skupin (třída Skupiny je definována v seznamu 3).</span><span class="sxs-lookup"><span data-stu-id="5e374-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="5e374-223">**Výpis 2 - Řadiče\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-223">**Listing 2 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

<span data-ttu-id="5e374-224">**Výpis 3 - Modely\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-224">**Listing 3 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="5e374-225">Po přidání GroupController a Group třídy do našeho projektu, náš první testování částí úspěšně dokončí (viz obrázek 2).</span><span class="sxs-lookup"><span data-stu-id="5e374-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="5e374-226">Udělali jsme minimální práci potřebnou k tomu, abychom prošli testem.</span><span class="sxs-lookup"><span data-stu-id="5e374-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="5e374-227">Je čas oslavovat.</span><span class="sxs-lookup"><span data-stu-id="5e374-227">It is time to celebrate.</span></span>

<span data-ttu-id="5e374-228">[![Úspěch!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span></span>

<span data-ttu-id="5e374-229">**Obrázek 02**: Úspěch! [(Klikněte pro zobrazení full-size image)](iteration-6-use-test-driven-development-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>

## <a name="creating-contact-groups"></a><span data-ttu-id="5e374-230">Vytváření skupin kontaktů</span><span class="sxs-lookup"><span data-stu-id="5e374-230">Creating Contact Groups</span></span>

<span data-ttu-id="5e374-231">Nyní můžeme přejít na druhý příběh uživatele.</span><span class="sxs-lookup"><span data-stu-id="5e374-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="5e374-232">Musíme být schopni vytvořit nové skupiny kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="5e374-233">Musíme tento záměr vyjádřit zkouškou.</span><span class="sxs-lookup"><span data-stu-id="5e374-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="5e374-234">Test v výpisu 4 ověří, že volání Create() metoda s novou skupinou přidá skupinu do seznamu skupinvrácených metodou Index().</span><span class="sxs-lookup"><span data-stu-id="5e374-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="5e374-235">Jinými slovy, pokud vytvořím novou skupinu, měl bych být schopen získat novou skupinu zpět ze seznamu skupin vrácených metodou Index().</span><span class="sxs-lookup"><span data-stu-id="5e374-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="5e374-236">**Výpis 4 - Řadiče\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-236">**Listing 4 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="5e374-237">Test v výpisu 4 volá metodu Create() řadiče skupiny s novou skupinou kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="5e374-238">Dále test ověří, že volání metody Group controller Index() vrátí novou skupinu v zobrazení dat.</span><span class="sxs-lookup"><span data-stu-id="5e374-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="5e374-239">Upravený řadič skupiny v seznamu 5 obsahuje minimální změny potřebné k průchodu nového testu.</span><span class="sxs-lookup"><span data-stu-id="5e374-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="5e374-240">**Výpis 5 - Řadiče\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-240">**Listing 5 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="5e374-241">Řadič skupiny v seznamu 5 má novou akci Vytvořit().</span><span class="sxs-lookup"><span data-stu-id="5e374-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="5e374-242">Tato akce přidá skupinu do kolekce skupin.</span><span class="sxs-lookup"><span data-stu-id="5e374-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="5e374-243">Všimněte si, že akce Index() byla změněna tak, aby vrátila obsah kolekce skupin.</span><span class="sxs-lookup"><span data-stu-id="5e374-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="5e374-244">Opět jsme provedli minimální množství práce potřebné k provedení jednotkového testu.</span><span class="sxs-lookup"><span data-stu-id="5e374-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="5e374-245">Po provázku těchto změn v řadiči skupiny všechny naše testy částí projít.</span><span class="sxs-lookup"><span data-stu-id="5e374-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="5e374-246">Přidání ověření</span><span class="sxs-lookup"><span data-stu-id="5e374-246">Adding Validation</span></span>

<span data-ttu-id="5e374-247">Tento požadavek nebyl výslovně uveden v příběhu uživatele.</span><span class="sxs-lookup"><span data-stu-id="5e374-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="5e374-248">Je však rozumné požadovat, aby skupina měla název.</span><span class="sxs-lookup"><span data-stu-id="5e374-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="5e374-249">V opačném případě by uspořádání kontaktů do skupin nebylo příliš užitečné.</span><span class="sxs-lookup"><span data-stu-id="5e374-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="5e374-250">Výpis 6 obsahuje nový test, který vyjadřuje tento záměr.</span><span class="sxs-lookup"><span data-stu-id="5e374-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="5e374-251">Tento test ověří, že pokus o vytvoření skupiny bez zadání názvu má za následek chybovou zprávu ověření ve stavu modelu.</span><span class="sxs-lookup"><span data-stu-id="5e374-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="5e374-252">**Výpis 6 - Řadiče\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-252">**Listing 6 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="5e374-253">Aby bylo možné splnit tento test, musíme přidat Name vlastnost naší třídy Skupiny (viz Výpis 7).</span><span class="sxs-lookup"><span data-stu-id="5e374-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="5e374-254">Kromě toho musíme přidat malý kousek logiky ověření do naší akce group controller s Create() (viz výpis 8).</span><span class="sxs-lookup"><span data-stu-id="5e374-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="5e374-255">**Výpis 7 - Modely\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-255">**Listing 7 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

<span data-ttu-id="5e374-256">**Výpis 8 - Řadiče\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-256">**Listing 8 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="5e374-257">Všimněte si, že akce Create() řadiče skupiny nyní obsahuje logiku ověření i databáze.</span><span class="sxs-lookup"><span data-stu-id="5e374-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="5e374-258">V současné době databáze používá řadič skupiny se skládá z nic víc než kolekce v paměti.</span><span class="sxs-lookup"><span data-stu-id="5e374-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="5e374-259">Čas do refaktoru</span><span class="sxs-lookup"><span data-stu-id="5e374-259">Time to Refactor</span></span>

<span data-ttu-id="5e374-260">Třetím krokem v red/green/refactor je část Refactor.</span><span class="sxs-lookup"><span data-stu-id="5e374-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="5e374-261">V tomto okamžiku musíme ustoupit od našeho kódu a zvážit, jak můžeme refaktorovat naši aplikaci, abychom zlepšili její návrh.</span><span class="sxs-lookup"><span data-stu-id="5e374-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="5e374-262">Fáze Refactor je fáze, ve které pečlivě přemýšlíme o nejlepším způsobu implementace principů a vzorů návrhu softwaru.</span><span class="sxs-lookup"><span data-stu-id="5e374-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="5e374-263">Máme možnost upravit náš kód jakýmkoli způsobem, který se rozhodneme zlepšit návrh kódu.</span><span class="sxs-lookup"><span data-stu-id="5e374-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="5e374-264">Máme záchrannou síť testů částí, které nám brání v přerušení stávajících funkcí.</span><span class="sxs-lookup"><span data-stu-id="5e374-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="5e374-265">Právě teď, naše skupina řadič je nepořádek z hlediska dobrého softwarového designu.</span><span class="sxs-lookup"><span data-stu-id="5e374-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="5e374-266">Řadič skupiny obsahuje zamotaný nepořádek ověření a přístupový kód dat.</span><span class="sxs-lookup"><span data-stu-id="5e374-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="5e374-267">Abychom se vyhnuli porušování zásady jednotné odpovědnosti, musíme tyto obavy rozdělit do různých tříd.</span><span class="sxs-lookup"><span data-stu-id="5e374-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="5e374-268">Naše refaktorovaná třída řadiče skupiny je obsažena v seznamu 9.</span><span class="sxs-lookup"><span data-stu-id="5e374-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="5e374-269">Řadič byl upraven tak, aby používal vrstvu služby ContactManager.</span><span class="sxs-lookup"><span data-stu-id="5e374-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="5e374-270">Jedná se o stejnou vrstvu služby, kterou používáme s řadičem kontaktu.</span><span class="sxs-lookup"><span data-stu-id="5e374-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="5e374-271">Výpis 10 obsahuje nové metody přidané do vrstvy služby ContactManager pro podporu ověřování, výpisu a vytváření skupin.</span><span class="sxs-lookup"><span data-stu-id="5e374-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="5e374-272">Rozhraní IContactManagerService bylo aktualizováno tak, aby zahrnovalo nové metody.</span><span class="sxs-lookup"><span data-stu-id="5e374-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="5e374-273">Výpis 11 obsahuje novou třídu FakeContactManagerRepository, která implementuje rozhraní IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="5e374-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="5e374-274">Na rozdíl od entityContactManagerRepository třídy, která také implementuje rozhraní IContactManagerRepository, naše nové FakeContactManagerRepository třída nekomunikuje s databází.</span><span class="sxs-lookup"><span data-stu-id="5e374-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="5e374-275">Třída FakeContactManagerRepository používá kolekci v paměti jako proxy pro databázi.</span><span class="sxs-lookup"><span data-stu-id="5e374-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="5e374-276">Tuto třídu použijeme v našich jednotkových testech jako falešnou vrstvu úložiště.</span><span class="sxs-lookup"><span data-stu-id="5e374-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="5e374-277">**Výpis 9 - Řadiče\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-277">**Listing 9 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

<span data-ttu-id="5e374-278">**Výpis 10 - Řadiče\ContactManagerService.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-278">**Listing 10 - Controllers\ContactManagerService.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

<span data-ttu-id="5e374-279">**Výpis 11 - Controllers\FakeContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="5e374-280">Úprava rozhraní IContactManagerRepository vyžaduje použití k implementaci metod CreateGroup() a ListGroups() ve třídě EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="5e374-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="5e374-281">Nejlínější a nejrychlejší způsob, jak to udělat, je přidat metody se zakázaným inzerováním, které vypadají takto:</span><span class="sxs-lookup"><span data-stu-id="5e374-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]

<span data-ttu-id="5e374-282">A konečně, tyto změny v návrhu naší aplikace vyžadují, abychom provést některé změny v našich testů částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="5e374-283">Nyní je třeba použít FakeContactManagerRepository při provádění testů částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="5e374-284">Aktualizovaná třída GroupControllerTest je obsažena v výpisu 12.</span><span class="sxs-lookup"><span data-stu-id="5e374-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="5e374-285">**Výpis 12 - Řadiče\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-285">**Listing 12 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="5e374-286">Poté, co provedeme všechny tyto změny, znovu všechny naše testy částí projít.</span><span class="sxs-lookup"><span data-stu-id="5e374-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="5e374-287">Dokončili jsme celý cyklus Red / Green / Refactor.</span><span class="sxs-lookup"><span data-stu-id="5e374-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="5e374-288">Implementovali jsme první dva příběhy uživatelů.</span><span class="sxs-lookup"><span data-stu-id="5e374-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="5e374-289">Nyní máme podpůrné testy částí pro požadavky vyjádřené v uživatelských scénářích.</span><span class="sxs-lookup"><span data-stu-id="5e374-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="5e374-290">Implementace zbývající části scénáře uživatelů zahrnuje opakování stejného cyklu red/green/refactor.</span><span class="sxs-lookup"><span data-stu-id="5e374-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="5e374-291">Úprava naší databáze</span><span class="sxs-lookup"><span data-stu-id="5e374-291">Modifying our Database</span></span>

<span data-ttu-id="5e374-292">Bohužel, i když jsme splnili všechny požadavky vyjádřené v našich jednotkových testech, naše práce není hotová.</span><span class="sxs-lookup"><span data-stu-id="5e374-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="5e374-293">Stále potřebujeme upravit naši databázi.</span><span class="sxs-lookup"><span data-stu-id="5e374-293">We still need to modify our database.</span></span>

<span data-ttu-id="5e374-294">Musíme vytvořit novou databázovou tabulku skupiny.</span><span class="sxs-lookup"><span data-stu-id="5e374-294">We need to create a new Group database table.</span></span> <span data-ttu-id="5e374-295">Postupujte následovně:</span><span class="sxs-lookup"><span data-stu-id="5e374-295">Follow these steps:</span></span>

1. <span data-ttu-id="5e374-296">V okně Průzkumník serveru klepněte pravým tlačítkem myši na složku Tabulky a vyberte možnost nabídky **Přidat novou tabulku**.</span><span class="sxs-lookup"><span data-stu-id="5e374-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="5e374-297">Zadejte dva sloupce popsané níže v Návrháři tabulek.</span><span class="sxs-lookup"><span data-stu-id="5e374-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="5e374-298">Označte sloupec Id jako primární klíč a sloupec Identita.</span><span class="sxs-lookup"><span data-stu-id="5e374-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="5e374-299">Uložte novou tabulku s názvem Skupiny kliknutím na ikonu diskety.</span><span class="sxs-lookup"><span data-stu-id="5e374-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>

| <span data-ttu-id="5e374-300">**Název sloupce**</span><span class="sxs-lookup"><span data-stu-id="5e374-300">**Column Name**</span></span> | <span data-ttu-id="5e374-301">**Typ dat**</span><span class="sxs-lookup"><span data-stu-id="5e374-301">**Data Type**</span></span> | <span data-ttu-id="5e374-302">**Povolit hodnoty Null**</span><span class="sxs-lookup"><span data-stu-id="5e374-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="5e374-303">ID</span><span class="sxs-lookup"><span data-stu-id="5e374-303">Id</span></span> | <span data-ttu-id="5e374-304">int</span><span class="sxs-lookup"><span data-stu-id="5e374-304">int</span></span> | <span data-ttu-id="5e374-305">False</span><span class="sxs-lookup"><span data-stu-id="5e374-305">False</span></span> |
| <span data-ttu-id="5e374-306">Název</span><span class="sxs-lookup"><span data-stu-id="5e374-306">Name</span></span> | <span data-ttu-id="5e374-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="5e374-307">nvarchar(50)</span></span> | <span data-ttu-id="5e374-308">False</span><span class="sxs-lookup"><span data-stu-id="5e374-308">False</span></span> |

<span data-ttu-id="5e374-309">Dále musíme odstranit všechna data z tabulky Kontakty (jinak nebudeme moci vytvořit relaci mezi tabulkami Kontakty a Skupiny).</span><span class="sxs-lookup"><span data-stu-id="5e374-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="5e374-310">Postupujte následovně:</span><span class="sxs-lookup"><span data-stu-id="5e374-310">Follow these steps:</span></span>

1. <span data-ttu-id="5e374-311">Klepněte pravým tlačítkem myši na tabulku Kontakty a vyberte možnost nabídky **Zobrazit data tabulky**.</span><span class="sxs-lookup"><span data-stu-id="5e374-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="5e374-312">Odstraňte všechny řádky.</span><span class="sxs-lookup"><span data-stu-id="5e374-312">Delete all of the rows.</span></span>

<span data-ttu-id="5e374-313">Dále musíme definovat relaci mezi databázovou tabulkou Skupiny a existující databázovou tabulkou Kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="5e374-314">Postupujte následovně:</span><span class="sxs-lookup"><span data-stu-id="5e374-314">Follow these steps:</span></span>

1. <span data-ttu-id="5e374-315">Poklepáním na tabulku Kontakty v okně Průzkumník serveru otevřete Návrhář e-bulky.</span><span class="sxs-lookup"><span data-stu-id="5e374-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="5e374-316">Přidejte nový celý sloupec do tabulky Kontakty s názvem GroupId.</span><span class="sxs-lookup"><span data-stu-id="5e374-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="5e374-317">Klepnutím na tlačítko Vztah otevřete dialogové okno Vztahy cizího klíče (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="5e374-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="5e374-318">Klikněte na tlačítko Přidat.</span><span class="sxs-lookup"><span data-stu-id="5e374-318">Click the Add button.</span></span>
5. <span data-ttu-id="5e374-319">Klepněte na tlačítko se třemi tečkami, které se zobrazí vedle tlačítka Specifikace tabulky a sloupců.</span><span class="sxs-lookup"><span data-stu-id="5e374-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="5e374-320">V dialogovém okně Tabulky a sloupce vyberte Skupiny jako tabulku primárního klíče a ID jako sloupec primárního klíče.</span><span class="sxs-lookup"><span data-stu-id="5e374-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="5e374-321">Vyberte kontakty jako tabulku cizího klíče a GroupId jako sloupec cizího klíče (viz obrázek 4).</span><span class="sxs-lookup"><span data-stu-id="5e374-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="5e374-322">Klikněte na tlačítko OK.</span><span class="sxs-lookup"><span data-stu-id="5e374-322">Click the OK button.</span></span>
7. <span data-ttu-id="5e374-323">V části **SPECIFIKACE VLOŽENÍ a AKTUALIZACE**vyberte hodnotu **Kaskáda** pro **pravidlo odstranění**.</span><span class="sxs-lookup"><span data-stu-id="5e374-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="5e374-324">Klepnutím na tlačítko Zavřít zavřete dialogové okno Relace cizího klíče.</span><span class="sxs-lookup"><span data-stu-id="5e374-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="5e374-325">Klepnutím na tlačítko Uložit uložte změny do tabulky Kontakty.</span><span class="sxs-lookup"><span data-stu-id="5e374-325">Click the Save button to save the changes to the Contacts table.</span></span>

<span data-ttu-id="5e374-326">[![Vytvoření relace tabulky databáze](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span></span>

<span data-ttu-id="5e374-327">**Obrázek 03**: Vytvoření relace tabulky databáze[(Klepnutím zobrazíte obrázek v plné velikosti)](iteration-6-use-test-driven-development-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>

<span data-ttu-id="5e374-328">[![Určení relací tabulek](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-328">[![Specifying table relationships](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span></span>

<span data-ttu-id="5e374-329">**Obrázek 04**: Určení relací[tabulek(Kliknutím zobrazíte obrázek v plné velikosti)](iteration-6-use-test-driven-development-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>

### <a name="updating-our-data-model"></a><span data-ttu-id="5e374-330">Aktualizace našeho datového modelu</span><span class="sxs-lookup"><span data-stu-id="5e374-330">Updating our Data Model</span></span>

<span data-ttu-id="5e374-331">Dále musíme aktualizovat náš datový model, aby reprezentoval novou databázovou tabulku.</span><span class="sxs-lookup"><span data-stu-id="5e374-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="5e374-332">Postupujte následovně:</span><span class="sxs-lookup"><span data-stu-id="5e374-332">Follow these steps:</span></span>

1. <span data-ttu-id="5e374-333">Poklepáním na soubor ContactManagerModel.edmx ve složce Modely otevřete Návrhář entit.</span><span class="sxs-lookup"><span data-stu-id="5e374-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="5e374-334">Klepněte pravým tlačítkem myši na povrch návrháře a vyberte možnost nabídky **Aktualizovat model z databáze**.</span><span class="sxs-lookup"><span data-stu-id="5e374-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="5e374-335">V Průvodci aktualizací vyberte tabulku Skupiny a klepněte na tlačítko Dokončit (viz obrázek 5).</span><span class="sxs-lookup"><span data-stu-id="5e374-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="5e374-336">Klepněte pravým tlačítkem myši na entitu Skupiny a vyberte možnost nabídky **Přejmenovat**.</span><span class="sxs-lookup"><span data-stu-id="5e374-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="5e374-337">Změňte název entity *Skupiny* na *Skupiny* (singulární číslo).</span><span class="sxs-lookup"><span data-stu-id="5e374-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="5e374-338">Klikněte pravým tlačítkem myši na vlastnost Navigace skupin, která se zobrazí v dolní části entity Kontakt.</span><span class="sxs-lookup"><span data-stu-id="5e374-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="5e374-339">Změňte název vlastnosti Navigace *skupiny* na *Skupinu* (singulární číslo).</span><span class="sxs-lookup"><span data-stu-id="5e374-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>

<span data-ttu-id="5e374-340">[![Aktualizace modelu entity frameworku z databáze](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span></span>

<span data-ttu-id="5e374-341">**Obrázek 05**: Aktualizace modelu entity framework u databáze([Klepnutím zobrazíte obrázek v plné velikosti)](iteration-6-use-test-driven-development-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>

<span data-ttu-id="5e374-342">Po dokončení těchto kroků bude datový model představovat tabulky Kontakty i Skupiny.</span><span class="sxs-lookup"><span data-stu-id="5e374-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="5e374-343">Návrhář entit by měl zobrazit obě entity (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="5e374-343">The Entity Designer should show both entities (see Figure 6).</span></span>

<span data-ttu-id="5e374-344">[![Návrhář entit zobrazuje skupinu a kontakt](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span></span>

<span data-ttu-id="5e374-345">**Obrázek 06**: Návrhář entit zobrazuje skupinu a[kontakt(Kliknutím zobrazíte obrázek v plné velikosti)](iteration-6-use-test-driven-development-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>

### <a name="creating-our-repository-classes"></a><span data-ttu-id="5e374-346">Vytváření našich tříd úložiště</span><span class="sxs-lookup"><span data-stu-id="5e374-346">Creating our Repository Classes</span></span>

<span data-ttu-id="5e374-347">Dále musíme implementovat naši třídu úložiště.</span><span class="sxs-lookup"><span data-stu-id="5e374-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="5e374-348">V průběhu této iterace jsme přidali několik nových metod do rozhraní IContactManagerRepository při psaní kódu pro splnění našich testů částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="5e374-349">Konečná verze rozhraní IContactManagerRepository je obsažena v výpisu 14.</span><span class="sxs-lookup"><span data-stu-id="5e374-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="5e374-350">**Výpis 14 - Modely\IContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-350">**Listing 14 - Models\IContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="5e374-351">Ve skutečnosti jsme neimplementovali žádnou z metod souvisejících s prací se skupinami kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-351">We haven't actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="5e374-352">V současné době entityContactManagerRepository třída má metody se zakázaným inzerováním pro každou metodu skupiny kontaktů uvedené v rozhraní IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="5e374-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="5e374-353">Například listGroups() metoda aktuálně vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="5e374-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="5e374-354">Metody se zakázaným inzerováním nám umožnily zkompilovat naši aplikaci a předat testy částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="5e374-355">Nyní je však čas skutečně implementovat tyto metody.</span><span class="sxs-lookup"><span data-stu-id="5e374-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="5e374-356">Konečná verze entityContactManagerRepository třídy je obsažena v výpisu 13.</span><span class="sxs-lookup"><span data-stu-id="5e374-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="5e374-357">**Výpis 13 - Modely\EntityContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="5e374-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="5e374-358">Vytvoření zobrazení</span><span class="sxs-lookup"><span data-stu-id="5e374-358">Creating the Views</span></span>

<span data-ttu-id="5e374-359">ASP.NET mvc aplikace při použití výchozího ASP.NET zobrazení motoru.</span><span class="sxs-lookup"><span data-stu-id="5e374-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="5e374-360">Takže nevytvářejte zobrazení v reakci na konkrétní test částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="5e374-361">Však vzhledem k tomu, že aplikace by k ničemu bez zobrazení, můžeme dokončit tuto iteraci bez vytvoření a úpravy zobrazení obsažených v aplikaci Správce kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="5e374-362">Pro správu skupin kontaktů musíme vytvořit následující nová zobrazení (viz obrázek 7):</span><span class="sxs-lookup"><span data-stu-id="5e374-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="5e374-363">Zobrazení\Skupina\Index.aspx - Zobrazí seznam skupin kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="5e374-364">Zobrazení\Skupina\Delete.aspx - Zobrazí formulář potvrzení pro odstranění skupiny kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>

<span data-ttu-id="5e374-365">[![Zobrazení Index skupiny](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-365">[![The Group Index view](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span></span>

<span data-ttu-id="5e374-366">**Obrázek 07**: Zobrazení indexu skupiny(Kliknutím[zobrazíte obrázek v plné velikosti)](iteration-6-use-test-driven-development-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>

<span data-ttu-id="5e374-367">Musíme upravit následující existující zobrazení tak, aby zahrnovala skupiny kontaktů:</span><span class="sxs-lookup"><span data-stu-id="5e374-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="5e374-368">Zobrazení\Domů\Vytvořit.aspx</span><span class="sxs-lookup"><span data-stu-id="5e374-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="5e374-369">Zobrazení\Domů\Upravit.aspx</span><span class="sxs-lookup"><span data-stu-id="5e374-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="5e374-370">Zobrazení\Domů\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="5e374-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="5e374-371">Upravená zobrazení můžete zobrazit v aplikaci Visual Studio, která doprovází tento kurz.</span><span class="sxs-lookup"><span data-stu-id="5e374-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="5e374-372">Obrázek 8 například znázorňuje zobrazení Rejstřík kontaktů.</span><span class="sxs-lookup"><span data-stu-id="5e374-372">For example, Figure 8 illustrates the Contact Index view.</span></span>

<span data-ttu-id="5e374-373">[![Zobrazení Rejstřík kontaktu](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-373">[![The Contact Index view](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span></span>

<span data-ttu-id="5e374-374">**Obrázek 08**: Zobrazení indexu[kontaktu(Kliknutím zobrazíte obrázek v plné velikosti)](iteration-6-use-test-driven-development-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="5e374-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>

## <a name="summary"></a><span data-ttu-id="5e374-375">Souhrn</span><span class="sxs-lookup"><span data-stu-id="5e374-375">Summary</span></span>

<span data-ttu-id="5e374-376">V této iteraci jsme přidali nové funkce do naší aplikace Contact Manager podle metodiky návrhu vývojové aplikace řízené testováním.</span><span class="sxs-lookup"><span data-stu-id="5e374-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="5e374-377">Začali jsme vytvořením sady uživatelských scénářů.</span><span class="sxs-lookup"><span data-stu-id="5e374-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="5e374-378">Vytvořili jsme sadu testů částí, která odpovídá požadavkům vyjádřeným v uživatelských scénářích.</span><span class="sxs-lookup"><span data-stu-id="5e374-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="5e374-379">Nakonec jsme napsali jen tolik kódu, aby splňovaly požadavky vyjádřené testy částí.</span><span class="sxs-lookup"><span data-stu-id="5e374-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="5e374-380">Poté, co jsme dokončili psaní dostatek kódu ke splnění požadavků vyjádřených testy částí, jsme aktualizovali naši databázi a zobrazení.</span><span class="sxs-lookup"><span data-stu-id="5e374-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="5e374-381">Do databáze jsme přidali novou tabulku Skupiny a aktualizovali jsme náš datový model entity frameworku.</span><span class="sxs-lookup"><span data-stu-id="5e374-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="5e374-382">Také jsme vytvořili a upravili sadu zobrazení.</span><span class="sxs-lookup"><span data-stu-id="5e374-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="5e374-383">V další iteraci -- poslední iteraci -- přepíšeme naši aplikaci, abychom využili Ajax.</span><span class="sxs-lookup"><span data-stu-id="5e374-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="5e374-384">Využitím ajaxu zlepšíme odezvu a výkon aplikace Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="5e374-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5e374-385">[Předchozí](iteration-5-create-unit-tests-cs.md)
> [další](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="5e374-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>
