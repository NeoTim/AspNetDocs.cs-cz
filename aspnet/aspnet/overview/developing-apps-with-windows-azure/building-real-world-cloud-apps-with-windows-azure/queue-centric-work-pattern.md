---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
title: Pracovní vzor orientovaný na fronty (vytváření skutečných cloudových aplikací s Azure) | Microsoft Docs
author: MikeWasson
description: Vytváření reálných cloudových aplikací pomocí Azure je založené na prezentaci vyvinuté Scottem Guthrie. Vysvětluje 13 vzorů a postupů, které mohou...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: cc1ad51b-40c3-4c68-8620-9aaa0fd1f6cf
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
msc.type: authoredcontent
ms.openlocfilehash: 1177336b25479c06706227e5c8ff4d027cdaebb8
ms.sourcegitcommit: 7709c0a091b8d55b7b33bad8849f7b66b23c3d72
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 02/19/2020
ms.locfileid: "77456982"
---
# <a name="queue-centric-work-pattern-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="4c3b1-104">Pracovní vzor orientovaný na fronty (vytváření skutečných cloudových aplikací s Azure)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-104">Queue-Centric Work Pattern (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="4c3b1-105">[Jan Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="4c3b1-106">[Stažení opravy projektu IT](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) nebo [stažení elektronické knihy](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-106">[Download Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="4c3b1-107">**Vytváření reálných cloudových aplikací pomocí Azure** je založené na prezentaci vyvinuté Scottem Guthrie.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="4c3b1-108">Vysvětluje 13 vzorů a postupů, které vám pomůžou úspěšně vyvíjet webové aplikace pro Cloud.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="4c3b1-109">Informace o elektronické příručce najdete v [první kapitole](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="4c3b1-110">Dříve jsme zjistili, že používání více služeb může mít za následek "složenou" smlouvu SLA, kde efektivní smlouva SLA aplikace je *produktem* jednotlivého SLA.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-110">Earlier, we saw that using multiple services can result in a "composite" SLA, where the app's effective SLA is the *product* of the individual SLAs.</span></span> <span data-ttu-id="4c3b1-111">Například aplikace pro opravu IT používá webové servery, úložiště a SQL Database.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-111">For example, the Fix It app uses Web Sites, Storage, and SQL Database.</span></span> <span data-ttu-id="4c3b1-112">Pokud některá z těchto služeb selže, aplikace vrátí uživateli chybu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-112">If any one of these services fails, the app will return an error to the user.</span></span>

<span data-ttu-id="4c3b1-113">Ukládání do mezipaměti je dobrý způsob, jak zpracovat přechodná selhání pro obsah, který je jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-113">Caching is a good way to handle transient failures for read-only content.</span></span> <span data-ttu-id="4c3b1-114">Ale co když vaše aplikace potřebuje pracovat?</span><span class="sxs-lookup"><span data-stu-id="4c3b1-114">But what if your application needs to do work?</span></span> <span data-ttu-id="4c3b1-115">Například když uživatel odešle novou úlohu opravy IT, aplikace nemůže tuto úlohu pouze vložit do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-115">For example, when the user submits a new Fix It task, the app can't just put the task into the cache.</span></span> <span data-ttu-id="4c3b1-116">Aplikace musí zapsat úlohu opravit IT do trvalého úložiště dat, aby ji bylo možné zpracovat.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-116">The app needs to write the Fix It task into a persistent data store, so it can be processed.</span></span>

<span data-ttu-id="4c3b1-117">To je místo, ve kterém se model práce orientované na fronty nachází v.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-117">That's where the queue-centric work pattern comes in.</span></span> <span data-ttu-id="4c3b1-118">Tento model umožňuje volné spojení mezi webovou vrstvou a back-end službou.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-118">This pattern enables loose coupling between a web tier and a backend service.</span></span>

<span data-ttu-id="4c3b1-119">Tady je postup, jak tento model funguje.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-119">Here's how the pattern works.</span></span> <span data-ttu-id="4c3b1-120">Když aplikace získá požadavek, přesune pracovní položku do fronty a okamžitě vrátí odpověď.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-120">When the application gets a request, it puts a work item onto a queue and immediately returns the response.</span></span> <span data-ttu-id="4c3b1-121">Pak samostatný back-end proces vyžádá pracovní položky z fronty a provede práci.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-121">Then a separate backend process pulls work items from the queue and does the work.</span></span>

<span data-ttu-id="4c3b1-122">Pracovní vzor orientovaný na fronty je užitečný pro:</span><span class="sxs-lookup"><span data-stu-id="4c3b1-122">The queue-centric work pattern is useful for:</span></span>

- <span data-ttu-id="4c3b1-123">Práce, která je časově náročná (vysoká latence).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-123">Work that is time consuming (high latency).</span></span>
- <span data-ttu-id="4c3b1-124">Práce, která vyžaduje externí službu, která nemusí být vždy k dispozici.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-124">Work that requires an external service that might not always be available.</span></span>
- <span data-ttu-id="4c3b1-125">Práce, která je náročná na prostředky (vysoký procesor).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-125">Work that is resource-intensive (high CPU).</span></span>
- <span data-ttu-id="4c3b1-126">Práce, která by mohla těžit z vyrovnání sazeb (podléhající náhlému nárůstu zatížení).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-126">Work that would benefit from rate leveling (subject to sudden load bursts).</span></span>

## <a name="reduced-latency"></a><span data-ttu-id="4c3b1-127">Omezená latence</span><span class="sxs-lookup"><span data-stu-id="4c3b1-127">Reduced Latency</span></span>

<span data-ttu-id="4c3b1-128">Fronty jsou užitečné kdykoli, když provádíte časově náročnou práci.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-128">Queues are useful any time you are doing time-consuming work.</span></span> <span data-ttu-id="4c3b1-129">Pokud úloha trvá několik sekund nebo i déle, místo blokování koncového uživatele umístěte pracovní položku do fronty.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-129">If a task takes a few seconds or longer, instead of blocking the end user, put the work item into a queue.</span></span> <span data-ttu-id="4c3b1-130">Sdělte uživateli, že na něm pracujeme, a pak pomocí naslouchacího procesu fronty úlohu zpracujte na pozadí.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-130">Tell the user "We're working on it," and then use a queue listener to process the task in the background.</span></span>

<span data-ttu-id="4c3b1-131">Například při nákupu nějakého programu v online prodejně potvrdí web okamžitě vaši objednávku.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-131">For example, when you purchase something at an online retailer, the web site confirms your order immediately.</span></span> <span data-ttu-id="4c3b1-132">Ale to neznamená, že vaše věci jsou už součástí doručování.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-132">But that doesn't mean your stuff is already in a truck being delivered.</span></span> <span data-ttu-id="4c3b1-133">Umístí úkol do fronty a na pozadí, kde provádí kontrolu kreditu, přípravu položek k expedici a tak dále.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-133">They put a task in a queue, and in the background they are doing the credit check, preparing your items for shipping, and so forth.</span></span>

<span data-ttu-id="4c3b1-134">U scénářů s krátkou latencí může celková koncová doba delší dobu trvat, než se úloha provede synchronně.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-134">For scenarios with short latency, the total end-to-end time might be longer using a queue, compared with doing the task synchronously.</span></span> <span data-ttu-id="4c3b1-135">Ale dokonce i ostatní výhody mohou tuto nevýhodu převážit.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-135">But even then, the other benefits can outweigh that disadvantage.</span></span>

## <a name="increased-reliability"></a><span data-ttu-id="4c3b1-136">Zvýšená spolehlivost</span><span class="sxs-lookup"><span data-stu-id="4c3b1-136">Increased Reliability</span></span>

<span data-ttu-id="4c3b1-137">Ve verzi opravy, kterou jsme prohledali zatím, je webový front-end úzce spojený s SQL Database back-endu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-137">In the version of Fix It that we've been looking at so far, the web front-end is tightly coupled with the SQL Database back-end.</span></span> <span data-ttu-id="4c3b1-138">Pokud není služba SQL Database k dispozici, uživatel dostane chybu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-138">If the SQL database service is unavailable, the user gets an error.</span></span> <span data-ttu-id="4c3b1-139">Pokud se opakované pokusy nefungují (to znamená, že selhání je více než přechodný), může se zobrazit chyba a požádat uživatele, aby se pokusil o akci později.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-139">If retries don't work (that is, the failure is more than transient), the only thing you can do is show an error and ask the user to try again later.</span></span>

![Diagram znázorňující selhání webového front-endu v případě selhání SQL Database back-endu](queue-centric-work-pattern/_static/image1.png)

<span data-ttu-id="4c3b1-141">Když uživatel odešle úlohu opravy IT pomocí front, zapíše do fronty zprávu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-141">Using queues, when a user submits a Fix It task, the app writes a message to the queue.</span></span> <span data-ttu-id="4c3b1-142">Datová část zprávy je reprezentace úlohy ve formátu [JSON](http://json.org/) .</span><span class="sxs-lookup"><span data-stu-id="4c3b1-142">The message payload is a [JSON](http://json.org/) representation of the task.</span></span> <span data-ttu-id="4c3b1-143">Jakmile se zpráva do fronty zapíše, aplikace se vrátí a okamžitě zobrazí uživateli zprávu o úspěchu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-143">As soon as the message is written to the queue, the app returns and immediately shows a success message to the user.</span></span>

<span data-ttu-id="4c3b1-144">Pokud se kterákoli ze služeb back-end, jako je například databáze SQL nebo naslouchací proces front--přejít do režimu offline, mohou uživatelé i nadále odesílat nové úlohy pro opravu IT.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-144">If any of the backend services – such as the SQL database or the queue listener -- go offline, users can still submit new Fix It tasks.</span></span> <span data-ttu-id="4c3b1-145">Zprávy se zařadí do fronty, dokud nebudou služby back-end k dispozici.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-145">The messages will just queue up until the backend services are available again.</span></span> <span data-ttu-id="4c3b1-146">V tomto okamžiku se back-end služby zachytí na nevyřízené položky.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-146">At that point, the backend services will catch up on the backlog.</span></span>

![Diagram znázorňující, že webový front-end bude dál fungovat, když dojde k chybě SQL Database](queue-centric-work-pattern/_static/image2.png)

<span data-ttu-id="4c3b1-148">Navíc teď můžete přidat další back-end logiku, aniž byste se museli starat o odolnost front-endu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-148">Moreover, now you can add more backend logic without worrying about the resiliency of the front end.</span></span> <span data-ttu-id="4c3b1-149">Můžete například chtít poslat vlastníkovi e-mail nebo zprávu SMS při každém přiřazení nové opravy.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-149">For example, you might want to send an email or SMS message to the owner whenever a new Fix It is assigned.</span></span> <span data-ttu-id="4c3b1-150">Pokud nebude e-mail nebo služba SMS k dispozici, můžete zpracovat všechno ostatní a potom do samostatné fronty vložit zprávu pro odesílání zpráv e-mailu nebo zprávy SMS.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-150">If the email or SMS service becomes unavailable, you can process everything else, and then put a message into a separate queue for sending email/SMS messages.</span></span>

<span data-ttu-id="4c3b1-151">Dřív byla naše platná smlouva SLA Web Apps &times; úložiště &times; SQL Database = 99,7%.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-151">Previously, our effective SLA was Web Apps &times; Storage &times; SQL Database = 99.7%.</span></span> <span data-ttu-id="4c3b1-152">(Viz [Návrh a zachována selhání](design-to-survive-failures.md).)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-152">(See [Design to Survive Failures](design-to-survive-failures.md).)</span></span>

<span data-ttu-id="4c3b1-153">Když aplikaci změníme tak, aby používala frontu, webový front-end závisí jenom na Web Apps a úložišti, a to u složené smlouvy SLA 99,8%.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-153">When we change the app to use a queue, the web front end depends only on Web Apps and Storage, for a composite SLA of 99.8%.</span></span> <span data-ttu-id="4c3b1-154">(Všimněte si, že fronty jsou součástí služby Azure Storage, takže jsou zahrnuté ve stejné smlouvě SLA jako úložiště objektů BLOB.)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-154">(Note that queues are part of the Azure storage service, so they are included in the same SLA as blob storage.)</span></span>

<span data-ttu-id="4c3b1-155">Pokud potřebujete ještě lepší než 99,8%, můžete vytvořit dvě fronty ve dvou různých oblastech.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-155">If you need even better than 99.8%, you can create two queues in two different regions.</span></span> <span data-ttu-id="4c3b1-156">Určete jako primární a druhý jako sekundární.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-156">Designate one as the primary, and the other as the secondary.</span></span> <span data-ttu-id="4c3b1-157">Pokud není primární fronta k dispozici, v aplikaci převezme služby při selhání sekundární frontou.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-157">In your app, fail over to the secondary queue if the primary queue is not available.</span></span> <span data-ttu-id="4c3b1-158">Pravděpodobnost, že obě nejsou k dispozici ve stejnou chvíli, je velmi malá.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-158">The chance of both being unavailable at the same time is very small.</span></span>

## <a name="rate-leveling-and-independent-scaling"></a><span data-ttu-id="4c3b1-159">Vyrovnávání kapacity a nezávislé škálování</span><span class="sxs-lookup"><span data-stu-id="4c3b1-159">Rate Leveling and Independent Scaling</span></span>

<span data-ttu-id="4c3b1-160">Fronty jsou užitečné také pro něco nazývaného *vyrovnání sazeb* nebo *Vyrovnávání zatížení*.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-160">Queues are also useful for something called *rate leveling* or *load leveling*.</span></span>

<span data-ttu-id="4c3b1-161">Webové aplikace jsou často náchylné k náhlým nárůstům provozu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-161">Web apps are often susceptible to sudden bursts in traffic.</span></span> <span data-ttu-id="4c3b1-162">I když můžete pomocí automatického škálování automaticky přidávat webové servery ke zpracování zvýšeného webového provozu, automatické škálování nemusí být schopné rychle reagovat, aby se mohlo zvládnout prudké špičky.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-162">While you can use autoscaling to automatically add web servers to handle increased web traffic, autoscaling might not be able to react quickly enough to handle abrupt spikes in load.</span></span> <span data-ttu-id="4c3b1-163">Pokud webové servery můžou přesměrovat část práce, kterou musí provést, zapsáním zprávy do fronty, můžou zpracovávat víc provozu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-163">If the web servers can offload some of the work they have to do by writing a message to a queue, they can handle more traffic.</span></span> <span data-ttu-id="4c3b1-164">Back-end služba pak může číst zprávy z fronty a zpracovávat je.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-164">A backend service can then read messages from the queue and process them.</span></span> <span data-ttu-id="4c3b1-165">Velikost fronty se bude zvětšovat nebo zmenšovat, protože se liší příchozí zatížení.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-165">The depth of the queue will grow or shrink as the incoming load varies.</span></span>

<span data-ttu-id="4c3b1-166">Díky spoustě časově náročné práce na back-end službu může webová vrstva snadněji reagovat na náhlé špičky v provozu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-166">With much of its time-consuming work off-loaded to a backend service, the web tier can more easily respond to sudden spikes in traffic.</span></span> <span data-ttu-id="4c3b1-167">A ušetříte peníze, protože určité množství přenosů může být zpracováno méně webovými servery.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-167">And you save money because any given amount of traffic can be handled by fewer web servers.</span></span>

<span data-ttu-id="4c3b1-168">Webovou vrstvu a back-end službu můžete škálovat nezávisle.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-168">You can scale the web tier and backend service independently.</span></span> <span data-ttu-id="4c3b1-169">Například můžete potřebovat tři webové servery, ale pouze jeden server zpracovávající zprávy ve frontě.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-169">For example, you might need three web servers but only one server processing queue messages.</span></span> <span data-ttu-id="4c3b1-170">Nebo pokud spouštíte úlohu náročné na výpočetní výkon na pozadí, možná budete potřebovat další servery back-end.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-170">Or if you're running a compute-intensive task in the background, you might need more backend servers.</span></span>

![](queue-centric-work-pattern/_static/image3.png)

<span data-ttu-id="4c3b1-171">Automatické škálování funguje s back-end službami a s webovou vrstvou.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-171">Autoscaling works with backend services as well as with the web tier.</span></span> <span data-ttu-id="4c3b1-172">Počet virtuálních počítačů, které zpracovávají úlohy ve frontě, můžete škálovat nahoru nebo dolů na základě využití CPU back-end virtuálních počítačů.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-172">You can scale up or scale down the number of VMs that are processing the tasks in the queue, based on the CPU usage of the backend VMs.</span></span> <span data-ttu-id="4c3b1-173">Nebo můžete automatické škálování podle toho, kolik položek je ve frontě.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-173">Or, you can autoscale based on how many items are in a queue.</span></span> <span data-ttu-id="4c3b1-174">Můžete například určit automatické škálování, které se pokusí ve frontě zachovat více než 10 položek.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-174">For example, you can tell autoscale to try to keep no more than 10 items in the queue.</span></span> <span data-ttu-id="4c3b1-175">Pokud má fronta více než 10 položek, bude automatické škálování přidávat virtuální počítače.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-175">If the queue has more than 10 items, autoscale will add VMs.</span></span> <span data-ttu-id="4c3b1-176">Při zachycení se automatické škálování odeberou další virtuální počítače.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-176">When they catch up, autoscale will tear down the extra VMs.</span></span>

## <a name="adding-queues-to-the-fix-it-application"></a><span data-ttu-id="4c3b1-177">Přidání front do aplikace pro opravu IT</span><span class="sxs-lookup"><span data-stu-id="4c3b1-177">Adding Queues to the Fix It Application</span></span>

<span data-ttu-id="4c3b1-178">Abychom mohli model fronty implementovat, musíme udělat dvě změny v aplikaci opravit IT.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-178">To implement the queue pattern, we need to make two changes to the Fix It app.</span></span>

- <span data-ttu-id="4c3b1-179">Když uživatel odešle novou úlohu opravit úkol, umístí ji do fronty místo jejího zápisu do databáze.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-179">When a user submits a new Fix It task, put the task in the queue, instead of writing it to the database.</span></span>
- <span data-ttu-id="4c3b1-180">Vytvořte back-end službu, která zpracovává zprávy ve frontě.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-180">Create a back-end service that processes messages in the queue.</span></span>

<span data-ttu-id="4c3b1-181">Pro tuto frontu používáme [službu Azure Queue Storage](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-181">For the queue, we'll use the [Azure Queue Storage Service](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span></span> <span data-ttu-id="4c3b1-182">Další možností je použít [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-182">Another option is to use [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span></span>

<span data-ttu-id="4c3b1-183">Pokud chcete rozhodnout, kterou službu Queue Service použít, zvažte, jak vaše aplikace potřebuje odesílat a přijímat zprávy ve frontě:</span><span class="sxs-lookup"><span data-stu-id="4c3b1-183">To decide which queue service to use, consider how your app needs to send and receive the messages in the queue:</span></span>

- <span data-ttu-id="4c3b1-184">Pokud máte spolupracující výrobce a konkurenční zákazníky, zvažte použití služby Azure Queue Storage.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-184">If you have cooperating producers and competing consumers, consider using Azure Queue Storage Service.</span></span> <span data-ttu-id="4c3b1-185">Spolupracující výrobci znamená, že více procesů přidává zprávy do fronty.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-185">"Cooperating producers" means multiple processes are adding messages to a queue.</span></span> <span data-ttu-id="4c3b1-186">Konkurenční spotřebitelé znamená, že více procesů zpracovává zprávy z fronty za účelem jejich zpracování, ale kterákoli z nich může zpracovat pouze jeden uživatel.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-186">"Competing consumers" means multiple processes are pulling messages off the queue to process them, but any given message can only be processed by one "consumer."</span></span> <span data-ttu-id="4c3b1-187">Pokud potřebujete větší propustnost, než můžete získat s jedinou frontou, použijte další fronty a/nebo další účty úložiště.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-187">If you need more throughput than you can get with a single queue, use additional queues and/or additional storage accounts.</span></span>
- <span data-ttu-id="4c3b1-188">Pokud potřebujete [model publikování/odběrů](http://en.wikipedia.org/wiki/Publish/subscribe), zvažte použití Azure Service Bus fronty.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-188">If you need a [publish/subscribe model](http://en.wikipedia.org/wiki/Publish/subscribe), consider using Azure Service Bus Queues.</span></span>

<span data-ttu-id="4c3b1-189">Oprava IT aplikace vyhovuje spolupracujím výrobcům a konkurenčním modelům zákazníků.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-189">The Fix It app fits the cooperating producers and competing consumers model.</span></span>

<span data-ttu-id="4c3b1-190">Dalším aspektem je dostupnost aplikace.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-190">Another consideration is application availability.</span></span> <span data-ttu-id="4c3b1-191">Služba Queue Storage je součástí stejné služby, kterou používáme pro úložiště objektů blob, takže její použití nemá žádný vliv na naši smlouvu SLA.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-191">The Queue Storage Service is part of the same service that we're using for blob storage, so using it has no effect on our SLA.</span></span> <span data-ttu-id="4c3b1-192">Azure Service Bus je samostatná služba s vlastní smlouvou SLA.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-192">Azure Service Bus is a separate service with its own SLA.</span></span> <span data-ttu-id="4c3b1-193">Pokud jsme používali Service Busch front, museli bychom zvážit dodatečné procento smlouvy SLA a naše složená smlouva SLA by byla nižší.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-193">If we used Service Bus Queues, we would have to factor in an additional SLA percentage, and our composite SLA would be lower.</span></span> <span data-ttu-id="4c3b1-194">Když zvolíte službu front, ujistěte se, že rozumíte dopadu vaší volby na dostupnost aplikace.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-194">When you're choosing a queue service, make sure you understand the impact of your choice on application availability.</span></span> <span data-ttu-id="4c3b1-195">Další informace najdete v části [Resources](#resources) .</span><span class="sxs-lookup"><span data-stu-id="4c3b1-195">For more information, see the [Resources](#resources) section.</span></span>

## <a name="creating-queue-messages"></a><span data-ttu-id="4c3b1-196">Vytváření zpráv fronty</span><span class="sxs-lookup"><span data-stu-id="4c3b1-196">Creating Queue Messages</span></span>

<span data-ttu-id="4c3b1-197">Chcete-li vložit úlohu opravy IT do fronty, webový front-end provede následující kroky:</span><span class="sxs-lookup"><span data-stu-id="4c3b1-197">To put a Fix It task on the queue, the web front end performs the following steps:</span></span>

1. <span data-ttu-id="4c3b1-198">Vytvořte instanci [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) .</span><span class="sxs-lookup"><span data-stu-id="4c3b1-198">Create a [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) instance.</span></span> <span data-ttu-id="4c3b1-199">Instance `CloudQueueClient` se používá ke spouštění požadavků na službu front.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-199">The `CloudQueueClient` instance is used to execute requests against the Queue Service.</span></span>
2. <span data-ttu-id="4c3b1-200">Vytvořte frontu, pokud ještě neexistuje.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-200">Create the queue, if it doesn't exist yet.</span></span>
3. <span data-ttu-id="4c3b1-201">Serializovat úlohu opravy IT.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-201">Serialize the Fix It task.</span></span>
4. <span data-ttu-id="4c3b1-202">Chcete-li vložit zprávu do fronty, zavolejte [CloudQueue. AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) .</span><span class="sxs-lookup"><span data-stu-id="4c3b1-202">Call [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) to put the message onto the queue.</span></span>

<span data-ttu-id="4c3b1-203">Tuto práci provedeme v konstruktoru a metodě `SendMessageAsync` nové třídy `FixItQueueManager`.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-203">We'll do this work in the constructor and `SendMessageAsync` method of a new `FixItQueueManager` class.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample1.cs?highlight=11-12,16,18-25)]

<span data-ttu-id="4c3b1-204">Tady používáme knihovnu [JSON.NET](https://github.com/JamesNK/Newtonsoft.Json) k serializaci fixit ve formátu JSON.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-204">Here we are using the [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) library to serialize the fixit to JSON format.</span></span> <span data-ttu-id="4c3b1-205">Můžete použít libovolný přístup k serializaci, který dáváte přednost.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-205">You can use whatever serialization approach you prefer.</span></span> <span data-ttu-id="4c3b1-206">JSON je výhodou pro lidské čtení, zatímco je méně podrobný než XML.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-206">JSON has the advantage of being human-readable, while being less verbose than XML.</span></span>

<span data-ttu-id="4c3b1-207">Kód v produkčním prostředí by měl přidat logiku zpracování chyb, pozastavit, jestli se databáze nestala k dispozici, zpracovávat obnovení efektivněji, vytvořit frontu při spuštění aplikace a spravovat "[poškozené" zprávy](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-207">Production-quality code would add error handling logic, pause if the database became unavailable, handle recovery more cleanly, create the queue on application start-up, and manage "[poison" messages](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span></span> <span data-ttu-id="4c3b1-208">(Nezpracovatelná zpráva je zpráva, kterou nelze z nějakého důvodu zpracovat.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-208">(A poison message is a message that cannot be processed for some reason.</span></span> <span data-ttu-id="4c3b1-209">Nechcete, aby se v této frontě zařadily nefunkční zprávy, kde se role pracovního procesu neustále pokusí o jejich zpracování, selhání, opakování, selhání atd.)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-209">You don't want poison messages to sit in the queue, where the worker role will continually try to process them, fail, try again, fail, and so on.)</span></span>

<span data-ttu-id="4c3b1-210">V front-endové aplikaci MVC potřebujeme aktualizovat kód, který vytvoří nový úkol.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-210">In the front-end MVC application, we need to update the code that creates a new task.</span></span> <span data-ttu-id="4c3b1-211">Místo vložení úkolu do úložiště zavolejte výše uvedenou metodu `SendMessageAsync`.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-211">Instead of putting the task into the repository, call the `SendMessageAsync` method shown above.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample2.cs?highlight=10)]

## <a name="processing-queue-messages"></a><span data-ttu-id="4c3b1-212">Zpracování zpráv fronty</span><span class="sxs-lookup"><span data-stu-id="4c3b1-212">Processing Queue Messages</span></span>

<span data-ttu-id="4c3b1-213">Pokud chcete zpracovat zprávy ve frontě, vytvoříme back-end službu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-213">To process messages in the queue, we'll create a backend service.</span></span> <span data-ttu-id="4c3b1-214">Back-end služba spustí nekonečnou smyčku, která provede následující kroky:</span><span class="sxs-lookup"><span data-stu-id="4c3b1-214">The backend service will run an infinite loop that performs the following steps:</span></span>

1. <span data-ttu-id="4c3b1-215">Získá další zprávu z fronty.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-215">Get the next message from the queue.</span></span>
2. <span data-ttu-id="4c3b1-216">Deserializovat zprávu na úlohu opravy IT.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-216">Deserialize the message to a Fix It task.</span></span>
3. <span data-ttu-id="4c3b1-217">Zapište úlohu opravit IT do databáze.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-217">Write the Fix It task to the database.</span></span>

<span data-ttu-id="4c3b1-218">Pro hostování back-end služby vytvoříme cloudovou službu Azure, která obsahuje *roli pracovního procesu*.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-218">To host the backend service, we'll create an Azure Cloud Service that contains a *worker role*.</span></span> <span data-ttu-id="4c3b1-219">Role pracovního procesu se skládá z jednoho nebo více virtuálních počítačů, které mohou provádět zpracování back-endu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-219">A worker role consists of one or more VMs that can do backend processing.</span></span> <span data-ttu-id="4c3b1-220">Kód, který běží na těchto virtuálních počítačích, načte zprávy z fronty, jakmile budou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-220">The code that runs in these VMs will pull messages from the queue as they become available.</span></span> <span data-ttu-id="4c3b1-221">U každé zprávy budeme deserializovat datovou část JSON a zapsat instanci entity úlohy opravit IT do databáze pomocí stejného úložiště, které jsme použili dříve ve webové vrstvě.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-221">For each message, we'll deserialize the JSON payload and write an instance of the Fix It Task entity to the database, using the same repository that we used earlier in the web tier.</span></span>

<span data-ttu-id="4c3b1-222">Následující postup ukazuje, jak přidat projekt role pracovního procesu do řešení, které má standardní webový projekt.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-222">The following steps show how to add a worker role project to a solution that has a standard web project.</span></span> <span data-ttu-id="4c3b1-223">Tyto kroky už byly provedeny v projektu opravit IT, který si můžete stáhnout.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-223">These steps have already been done in the Fix It project that you can download.</span></span>

<span data-ttu-id="4c3b1-224">Nejdřív přidejte projekt cloudové služby do řešení sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-224">First add a Cloud Service project to the Visual Studio solution.</span></span> <span data-ttu-id="4c3b1-225">Klikněte pravým tlačítkem na řešení a vyberte **Přidat**, **Nový projekt**.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-225">Right-click the solution and select **Add**, then **New Project**.</span></span> <span data-ttu-id="4c3b1-226">V levém podokně rozbalte **vizuál C#**  a vyberte **Cloud**.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-226">In the left pane, expand **Visual C#** and select **Cloud**.</span></span>

[![](queue-centric-work-pattern/_static/image5.png)](queue-centric-work-pattern/_static/image4.png)

<span data-ttu-id="4c3b1-227">V dialogovém okně **Nová cloudová služba Azure** rozbalte uzel **vizuál C#**  v levém podokně.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-227">In the **New Azure Cloud Service** dialog, expand the **Visual C#** node on the left pane.</span></span> <span data-ttu-id="4c3b1-228">Vyberte **role pracovního procesu** a klikněte na ikonu se šipkou vpravo.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-228">Select **Worker Role** and click the right-arrow icon.</span></span>

![](queue-centric-work-pattern/_static/image6.png)

<span data-ttu-id="4c3b1-229">(Všimněte si, že můžete také přidat *webovou roli*.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-229">(Notice that you can also add a *web role*.</span></span> <span data-ttu-id="4c3b1-230">Místo jejího spuštění na webu Azure můžeme opravit front-end ve stejné cloudové službě.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-230">We could run the Fix It front-end in the same Cloud Service instead of running it in an Azure Web Site.</span></span> <span data-ttu-id="4c3b1-231">To má několik výhod, jak snadno koordinovat spojení mezi front-end a back-end.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-231">That has some advantages in making connections between front-end and back-end easier to coordinate.</span></span> <span data-ttu-id="4c3b1-232">Pokud ale chcete tuto ukázku uchovávat snadno, udržujeme front-end ve Azure App Service webové aplikaci a v cloudové službě běželi jenom back-end.)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-232">However, to keep this demo simple, we're keeping the front-end in an Azure App Service Web App and only running the back-end in a Cloud Service.)</span></span>

<span data-ttu-id="4c3b1-233">Role pracovního procesu se přiřadí výchozímu názvu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-233">A default name is assigned to the worker role.</span></span> <span data-ttu-id="4c3b1-234">Chcete-li změnit název, najeďte myší na roli pracovního procesu v pravém podokně a pak klikněte na ikonu tužky.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-234">To change the name, hover the mouse over the worker role in the right pane, then click the pencil icon.</span></span>

![](queue-centric-work-pattern/_static/image7.png)

<span data-ttu-id="4c3b1-235">Kliknutím na tlačítko **OK** dokončete dialog.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-235">Click **OK** to complete the dialog.</span></span> <span data-ttu-id="4c3b1-236">Tím se do řešení sady Visual Studio přidá dva projekty.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-236">This adds two projects to the Visual Studio solution.</span></span>

- <span data-ttu-id="4c3b1-237">projekt Azure, který definuje cloudovou službu, včetně informací o konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-237">an Azure project that defines the cloud service, including configuration information.</span></span>
- <span data-ttu-id="4c3b1-238">Projekt role pracovního procesu, který definuje roli pracovního procesu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-238">A worker role project that defines the worker role.</span></span>

![](queue-centric-work-pattern/_static/image8.png)

<span data-ttu-id="4c3b1-239">Další informace najdete v tématu [Vytvoření projektu Azure pomocí sady Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-239">For more information, see [Creating an Azure Project with Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span></span>

<span data-ttu-id="4c3b1-240">V roli pracovního procesu se dotazuje na zprávy voláním metody `ProcessMessageAsync` třídy `FixItQueueManager`, kterou jsme dříve viděli.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-240">Inside the worker role, we poll for messages by calling the `ProcessMessageAsync` method of the `FixItQueueManager` class that we saw earlier.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample3.cs?highlight=25)]

<span data-ttu-id="4c3b1-241">Metoda `ProcessMessagesAsync` kontroluje, zda se čeká na zprávu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-241">The `ProcessMessagesAsync` method checks if there's a message waiting.</span></span> <span data-ttu-id="4c3b1-242">Pokud existuje, deserializace zprávu do `FixItTask` entity a uloží entitu v databázi.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-242">If there is one, it deserializes the message into a `FixItTask` entity and saves the entity in the database.</span></span> <span data-ttu-id="4c3b1-243">Tato smyčka se zacykluje, dokud není fronta prázdná.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-243">It loops until the queue is empty.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample4.cs)]

<span data-ttu-id="4c3b1-244">Cyklické dotazování na zprávy ve frontě vznikají za malý poplatek za transakce, takže když nebude žádná zpráva čekat na zpracování, `RunAsync` metoda role pracovního procesu před dalším dotazem počká, než se znovu dotazuje, a to voláním `Task.Delay(1000)`.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-244">Polling for queue messages incurs a small transaction charge, so when there's no message waiting to be processed, the worker role's `RunAsync` method waits a second before polling again by calling `Task.Delay(1000)`.</span></span>

<span data-ttu-id="4c3b1-245">Ve webovém projektu může přidání asynchronního kódu automaticky zvýšit výkon, protože služba IIS spravuje omezený fond vláken.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-245">In a web project, adding asynchronous code can automatically improve performance because IIS manages a limited thread pool.</span></span> <span data-ttu-id="4c3b1-246">Nejedná se o případ v projektu role pracovního procesu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-246">That is not the case in a worker role project.</span></span> <span data-ttu-id="4c3b1-247">Pro zlepšení škálovatelnosti role pracovního procesu můžete napsat vícevláknový kód nebo použít asynchronní kód k implementaci [paralelního programování](https://msdn.microsoft.com/library/ff963553.aspx).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-247">To improve scalability of the worker role, you can write multi-threaded code or use asynchronous code to implement [parallel programming](https://msdn.microsoft.com/library/ff963553.aspx).</span></span> <span data-ttu-id="4c3b1-248">Ukázka neimplementuje paralelní programování, ale ukazuje, jak vytvořit asynchronní kód, abyste mohli implementovat paralelní programování.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-248">The sample doesn't implement parallel programming but shows how to make the code asynchronous so you can implement parallel programming.</span></span>

## <a name="summary"></a><span data-ttu-id="4c3b1-249">Souhrn</span><span class="sxs-lookup"><span data-stu-id="4c3b1-249">Summary</span></span>

<span data-ttu-id="4c3b1-250">V této kapitole jste viděli, jak zlepšit odezvu aplikací, spolehlivost a škálovatelnost implementací modelu práce orientovaného na fronty.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-250">In this chapter you've seen how to improve application responsiveness, reliability, and scalability by implementing the queue-centric work pattern.</span></span>

<span data-ttu-id="4c3b1-251">Toto je poslední z 13 vzorů popsaných v této elektronické knize, ale samozřejmě existuje mnoho dalších vzorů a postupů, které vám pomůžou při sestavování úspěšných cloudových aplikací.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-251">This is the last of the 13 patterns covered in this e-book, but there are of course many other patterns and practices that can help you build successful cloud apps.</span></span> <span data-ttu-id="4c3b1-252">[Poslední kapitola](more-patterns-and-guidance.md) obsahuje odkazy na zdroje informací o tématech, která se nezabývá těmito 13 vzorci.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-252">The [final chapter](more-patterns-and-guidance.md) provides links to resources for topics that haven't been covered in these 13 patterns.</span></span>

<a id="resources"></a>
## <a name="resources"></a><span data-ttu-id="4c3b1-253">Prostředky</span><span class="sxs-lookup"><span data-stu-id="4c3b1-253">Resources</span></span>

<span data-ttu-id="4c3b1-254">Další informace o frontách najdete v následujících zdrojích informací.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-254">For more information about queues, see the following resources.</span></span>

<span data-ttu-id="4c3b1-255">Nápovědě</span><span class="sxs-lookup"><span data-stu-id="4c3b1-255">Documentation:</span></span>

- <span data-ttu-id="4c3b1-256">[Microsoft Azure Storage fronty část 1: Začínáme](https://www.red-gate.com/simple-talk/cloud/platform-as-a-service/microsoft-azure-storage-queues-part-1-getting-started/).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-256">[Microsoft Azure Storage Queues Part 1: Getting Started](https://www.red-gate.com/simple-talk/cloud/platform-as-a-service/microsoft-azure-storage-queues-part-1-getting-started/).</span></span> <span data-ttu-id="4c3b1-257">Článek podle latinkové Schacherl</span><span class="sxs-lookup"><span data-stu-id="4c3b1-257">Article by Roman Schacherl.</span></span>
- <span data-ttu-id="4c3b1-258">[Provádění úloh na pozadí](https://msdn.microsoft.com/library/ff803365.aspx), kapitola 5 z [přesunu aplikací do cloudu, třetí edice](https://msdn.microsoft.com/library/ff728592.aspx) od Microsoft Patterns and Practices.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-258">[Executing Background Tasks](https://msdn.microsoft.com/library/ff803365.aspx), chapter 5 of [Moving Applications to the Cloud, 3rd Edition](https://msdn.microsoft.com/library/ff728592.aspx) from Microsoft Patterns and Practices.</span></span> <span data-ttu-id="4c3b1-259">(Konkrétně část ["použití Azure Storage fronty"](https://msdn.microsoft.com/library/ff803365.aspx#sec7).)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-259">(In particular, the section ["Using Azure Storage Queues"](https://msdn.microsoft.com/library/ff803365.aspx#sec7).)</span></span>
- <span data-ttu-id="4c3b1-260">[Osvědčené postupy pro maximalizaci škálovatelnosti a nákladové efektivity řešení zasílání zpráv na základě fronty v Azure](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-260">[Best Practices for Maximizing Scalability and Cost Effectiveness of Queue-Based Messaging Solutions on Azure](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span></span> <span data-ttu-id="4c3b1-261">Dokument white paper o Valery Mizonov.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-261">White paper by Valery Mizonov.</span></span>
- <span data-ttu-id="4c3b1-262">[Porovnání front Azure a front Service Bus](https://msdn.microsoft.com/magazine/jj159884.aspx).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-262">[Comparing Azure Queues and Service Bus Queues](https://msdn.microsoft.com/magazine/jj159884.aspx).</span></span> <span data-ttu-id="4c3b1-263">Článek na webu MSDN Magazine, kde najdete další informace, které vám pomůžou zvolit službu fronty, která se má použít.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-263">MSDN Magazine article, provides additional information that can help you choose which queue service to use.</span></span> <span data-ttu-id="4c3b1-264">Článek uvádí, že Service Bus je závislý na službě ACS pro ověřování, což znamená, že vaše fronty SB nebudou k dispozici, pokud služba ACS není dostupná.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-264">The article mentions that Service Bus is dependent on ACS for authentication, which means your SB queues would be unavailable when ACS is unavailable.</span></span> <span data-ttu-id="4c3b1-265">Vzhledem k tomu, že byl článek vytvořen, SB byl změněn, aby bylo možné používat [tokeny SAS](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) jako alternativu ke službě ACS.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-265">However, since the article was written, SB was changed to enable you to use [SAS tokens](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) as an alternative to ACS.</span></span>
- <span data-ttu-id="4c3b1-266">[Vzory a postupy Microsoftu – doprovodné materiály pro Azure](https://msdn.microsoft.com/library/dn568099.aspx)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-266">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="4c3b1-267">Přečtěte si téma Úvod do asynchronního zasílání zpráv, model kanálů a filtrů, vzorec kompenzační transakce, model konkurenčních spotřebitelů, CQRS vzor.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-267">See Asynchronous Messaging primer, Pipes and Filters pattern, Compensating Transaction pattern, Competing Consumers pattern, CQRS pattern.</span></span>
- <span data-ttu-id="4c3b1-268">[CQRS cesta](https://msdn.microsoft.com/library/jj554200).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-268">[CQRS Journey](https://msdn.microsoft.com/library/jj554200).</span></span> <span data-ttu-id="4c3b1-269">Elektronická kniha o CQRS podle vzorů a postupů Microsoftu.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-269">E-book about CQRS by Microsoft Patterns and Practices.</span></span>

<span data-ttu-id="4c3b1-270">Video:</span><span class="sxs-lookup"><span data-stu-id="4c3b1-270">Video:</span></span>

- <span data-ttu-id="4c3b1-271">[Failsafe: vytváření škálovatelných, odolných Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="4c3b1-271">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="4c3b1-272">Devět datových řad podle Ulrich Homann, matolin Mercuri a Simms.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-272">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="4c3b1-273">Prezentuje základní koncepty a principy architektury v rámci velmi přístupného a zajímavého způsobu, který vychází ze zkušeností zákazníků Microsoftu pro poradenské zákazníky (CAT) se skutečnými zákazníky.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-273">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="4c3b1-274">Úvod ke službě Azure Storage a frontách najdete v části epizody 5 od 35:13.</span><span class="sxs-lookup"><span data-stu-id="4c3b1-274">For an introduction to the Azure Storage service and queues, see episode 5 starting at 35:13.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4c3b1-275">[Předchozí](distributed-caching.md)
> [Další](more-patterns-and-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="4c3b1-275">[Previous](distributed-caching.md)
[Next](more-patterns-and-guidance.md)</span></span>
