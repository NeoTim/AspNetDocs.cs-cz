---
uid: web-api/overview/getting-started-with-aspnet-web-api/build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs
title: 'Praktická cvičení: vytvoření jednostránkové aplikace (SPA) pomocí webového rozhraní API ASP.NET a úhlů. js – ASP.NET 4. x'
author: rick-anderson
description: 'Krok za krokem: sestavení jednostránkové aplikace (SPA) pomocí webového rozhraní API ASP.NET a úhlů. js pro ASP.NET 4. x.'
ms.author: riande
ms.date: 09/30/2015
ms.custom: seoapril2019
ms.assetid: 719727b7-bef3-45ad-bfe9-ba5bcdb2305f
msc.legacyurl: /web-api/overview/getting-started-with-aspnet-web-api/build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs
msc.type: authoredcontent
ms.openlocfilehash: 86833a890da759e489dd11dc9afb128a9b7a75e3
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78557041"
---
# <a name="hands-on-lab-build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs"></a><span data-ttu-id="01f68-103">Praktické cvičení: Sestavení jednostránkové aplikace (SPA) pomocí webového rozhraní API ASP.NET a Angular.js</span><span class="sxs-lookup"><span data-stu-id="01f68-103">Hands On Lab: Build a Single Page Application (SPA) with ASP.NET Web API and Angular.js</span></span>

<span data-ttu-id="01f68-104">podle [týmu webového Campy](https://twitter.com/webcamps)</span><span class="sxs-lookup"><span data-stu-id="01f68-104">by [Web Camps Team](https://twitter.com/webcamps)</span></span>

[<span data-ttu-id="01f68-105">Stáhnout web Campy Training Kit</span><span class="sxs-lookup"><span data-stu-id="01f68-105">Download Web Camps Training Kit</span></span>](https://aka.ms/webcamps-training-kit)

<span data-ttu-id="01f68-106">Tato praktická cvičení vám ukáže, jak vytvořit jednostránkové aplikace (SPA) s webovým rozhraním API ASP.NET a úhlů. js pro ASP.NET 4. x.</span><span class="sxs-lookup"><span data-stu-id="01f68-106">This hands on lab shows you how to build a Single Page Application (SPA) with ASP.NET Web API and Angular.js for ASP.NET 4.x.</span></span>

<span data-ttu-id="01f68-107">V tomto předem dostupném testovacím prostředí využijete tyto technologie k implementaci informatik kvízu, minihry webu založeného na principu SPA.</span><span class="sxs-lookup"><span data-stu-id="01f68-107">In this hand-on lab, you will take advantage of those technologies to implement Geek Quiz, a trivia website based on the SPA concept.</span></span> <span data-ttu-id="01f68-108">Nejdříve implementujete vrstvu služby s webovým rozhraním API ASP.NET k vystavení požadovaných koncových bodů pro získání otázek kvízu a uložení odpovědí.</span><span class="sxs-lookup"><span data-stu-id="01f68-108">You will first implement the service layer with ASP.NET Web API to expose the required endpoints to retrieve the quiz questions and store the answers.</span></span> <span data-ttu-id="01f68-109">Pak vytvoříte uživatelské rozhraní s bohatou a reagují pomocí transformačních efektů AngularJS a CSS3.</span><span class="sxs-lookup"><span data-stu-id="01f68-109">Then, you will build a rich and responsive UI using AngularJS and CSS3 transformation effects.</span></span>

<span data-ttu-id="01f68-110">V tradičních webových aplikacích klient (prohlížeč) iniciuje komunikaci se serverem tím, že požaduje stránku.</span><span class="sxs-lookup"><span data-stu-id="01f68-110">In traditional web applications, the client (browser) initiates the communication with the server by requesting a page.</span></span> <span data-ttu-id="01f68-111">Server potom zpracuje požadavek a pošle kód HTML stránky klientovi.</span><span class="sxs-lookup"><span data-stu-id="01f68-111">The server then processes the request and sends the HTML of the page to the client.</span></span> <span data-ttu-id="01f68-112">V následných interakcích se stránkou, třeba uživatel přejde na odkaz nebo odešle formulář s daty – nový požadavek se pošle na server a tok se znovu spustí: Server žádost zpracuje a pošle nové stránce do prohlížeče v reakci na novou žádost o akci. Ed klientem.</span><span class="sxs-lookup"><span data-stu-id="01f68-112">In subsequent interactions with the page –e.g. the user navigates to a link or submits a form with data– a new request is sent to the server, and the flow starts again: the server processes the request and sends a new page to the browser in response to the new action requested by the client.</span></span>
> 
> <span data-ttu-id="01f68-113">V aplikacích s jednou stránkou (jednostránkové) je celá stránka načtena do prohlížeče po počátečním požadavku, ale následné interakce probíhají prostřednictvím požadavků AJAX.</span><span class="sxs-lookup"><span data-stu-id="01f68-113">In Single-Page Applications (SPAs) the entire page is loaded in the browser after the initial request, but subsequent interactions take place through Ajax requests.</span></span> <span data-ttu-id="01f68-114">To znamená, že prohlížeč musí aktualizovat pouze část stránky, která se změnila. není nutné znovu načítat celou stránku.</span><span class="sxs-lookup"><span data-stu-id="01f68-114">This means that the browser has to update only the portion of the page that has changed; there is no need to reload the entire page.</span></span> <span data-ttu-id="01f68-115">Přístup přes zabezpečené ověřování pomocí hesla zkracuje dobu, kterou aplikace reaguje na akce uživatelů, což vede k většímu množství zážitku z více kapalin.</span><span class="sxs-lookup"><span data-stu-id="01f68-115">The SPA approach reduces the time taken by the application to respond to user actions, resulting in a more fluid experience.</span></span>
> 
> <span data-ttu-id="01f68-116">Architektura zabezpečeného hesla zahrnuje některé výzvy, které nejsou přítomné v tradičních webových aplikacích.</span><span class="sxs-lookup"><span data-stu-id="01f68-116">The architecture of a SPA involves certain challenges that are not present in traditional web applications.</span></span> <span data-ttu-id="01f68-117">Ale vznikající technologie, jako jsou webové rozhraní API ASP.NET, rozhraní JavaScript, jako je AngularJS a nové funkce stylů poskytované CSS3, usnadňují návrh a sestavování jednostránkové.</span><span class="sxs-lookup"><span data-stu-id="01f68-117">However, emerging technologies like ASP.NET Web API, JavaScript frameworks like AngularJS and new styling features provided by CSS3 make it really easy to design and build SPAs.</span></span>
> 
> 
> <span data-ttu-id="01f68-118">Veškerý ukázkový kód a fragmenty kódu jsou součástí sady web Campy Traination Kit, která je k dispozici na adrese [https://aka.ms/webcamps-training-kit](https://aka.ms/webcamps-training-kit).</span><span class="sxs-lookup"><span data-stu-id="01f68-118">All sample code and snippets are included in the Web Camps Training Kit, available at [https://aka.ms/webcamps-training-kit](https://aka.ms/webcamps-training-kit).</span></span>

## <a name="overview"></a><span data-ttu-id="01f68-119">Přehled</span><span class="sxs-lookup"><span data-stu-id="01f68-119">Overview</span></span>

<a id="Objectives"></a>
### <a name="objectives"></a><span data-ttu-id="01f68-120">Cíle</span><span class="sxs-lookup"><span data-stu-id="01f68-120">Objectives</span></span>

<span data-ttu-id="01f68-121">V této praktické laboratorní laboratoři se dozvíte, jak:</span><span class="sxs-lookup"><span data-stu-id="01f68-121">In this hands-on lab, you will learn how to:</span></span>

- <span data-ttu-id="01f68-122">Vytvoření služby webového rozhraní API ASP.NET pro odesílání a příjem dat JSON</span><span class="sxs-lookup"><span data-stu-id="01f68-122">Create an ASP.NET Web API service to send and receive JSON data</span></span>
- <span data-ttu-id="01f68-123">Vytvoření uživatelského rozhraní s odezvou pomocí AngularJS</span><span class="sxs-lookup"><span data-stu-id="01f68-123">Create a responsive UI using AngularJS</span></span>
- <span data-ttu-id="01f68-124">Vylepšení uživatelského prostředí pomocí transformací CSS3</span><span class="sxs-lookup"><span data-stu-id="01f68-124">Enhance the UI experience with CSS3 transformations</span></span>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a><span data-ttu-id="01f68-125">Předpoklady</span><span class="sxs-lookup"><span data-stu-id="01f68-125">Prerequisites</span></span>

<span data-ttu-id="01f68-126">Následující postup je nutný k dokončení tohoto praktického laboratorního prostředí:</span><span class="sxs-lookup"><span data-stu-id="01f68-126">The following is required to complete this hands-on lab:</span></span>

- <span data-ttu-id="01f68-127">[Visual Studio Express 2013 pro web](https://www.microsoft.com/visualstudio/) nebo více</span><span class="sxs-lookup"><span data-stu-id="01f68-127">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) or greater</span></span>

<a id="Setup"></a>
### <a name="setup"></a><span data-ttu-id="01f68-128">Nastavení</span><span class="sxs-lookup"><span data-stu-id="01f68-128">Setup</span></span>

<span data-ttu-id="01f68-129">Aby bylo možné spustit cvičení v této praktické laboratorní laboratoři, budete muset nejprve nastavit prostředí.</span><span class="sxs-lookup"><span data-stu-id="01f68-129">In order to run the exercises in this hands-on lab, you will need to set up your environment first.</span></span>

1. <span data-ttu-id="01f68-130">Otevřete Průzkumníka Windows a přejděte do **zdrojové** složky testovacího prostředí.</span><span class="sxs-lookup"><span data-stu-id="01f68-130">Open Windows Explorer and browse to the lab's **Source** folder.</span></span>
2. <span data-ttu-id="01f68-131">Klikněte pravým tlačítkem na **Setup. cmd** a vyberte **Spustit jako správce** a spusťte proces instalace, který bude konfigurovat vaše prostředí a nainstaluje fragmenty kódu sady Visual Studio pro toto testovací prostředí.</span><span class="sxs-lookup"><span data-stu-id="01f68-131">Right-click on **Setup.cmd** and select **Run as administrator** to launch the setup process that will configure your environment and install the Visual Studio code snippets for this lab.</span></span>
3. <span data-ttu-id="01f68-132">Pokud se zobrazí dialogové okno Řízení uživatelských účtů, potvrďte akci, abyste mohli pokračovat.</span><span class="sxs-lookup"><span data-stu-id="01f68-132">If the User Account Control dialog box is shown, confirm the action to proceed.</span></span>

> [!NOTE]
> <span data-ttu-id="01f68-133">Před spuštěním instalačního programu se ujistěte, že jste kontrolovali všechny závislosti pro toto testovací prostředí.</span><span class="sxs-lookup"><span data-stu-id="01f68-133">Make sure you have checked all the dependencies for this lab before running the setup.</span></span>

<a id="CodeSnippets"></a>
### <a name="using-the-code-snippets"></a><span data-ttu-id="01f68-134">Používání fragmentů kódu</span><span class="sxs-lookup"><span data-stu-id="01f68-134">Using the Code Snippets</span></span>

<span data-ttu-id="01f68-135">V celém dokumentu testovacího prostředí budete vyzváni k vložení bloků kódu.</span><span class="sxs-lookup"><span data-stu-id="01f68-135">Throughout the lab document, you will be instructed to insert code blocks.</span></span> <span data-ttu-id="01f68-136">Pro usnadnění práce je většina tohoto kódu k dispozici jako fragmenty Visual Studio Code, ke kterým můžete přistupovat z Visual Studio 2013, abyste se vyhnuli nutnosti ho přidat ručně.</span><span class="sxs-lookup"><span data-stu-id="01f68-136">For your convenience, most of this code is provided as Visual Studio Code Snippets, which you can access from within Visual Studio 2013 to avoid having to add it manually.</span></span>

> [!NOTE]
> <span data-ttu-id="01f68-137">Každé cvičení se doprovází od počátečního řešení ve složce **Begin** cvičení, které vám umožní sledovat jednotlivá cvičení nezávisle na ostatních.</span><span class="sxs-lookup"><span data-stu-id="01f68-137">Each exercise is accompanied by a starting solution located in the **Begin** folder of the exercise that allows you to follow each exercise independently of the others.</span></span> <span data-ttu-id="01f68-138">Všimněte si, že fragmenty kódu, které jsou přidány během cvičení, v těchto počátečních řešeních chybí a nemusí fungovat, dokud nedokončíte cvičení.</span><span class="sxs-lookup"><span data-stu-id="01f68-138">Please be aware that the code snippets that are added during an exercise are missing from these starting solutions and may not work until you have completed the exercise.</span></span> <span data-ttu-id="01f68-139">Ve zdrojovém kódu cvičení také najdete **koncovou** složku obsahující řešení sady Visual Studio s kódem, který je výsledkem dokončení kroků v příslušném cvičení.</span><span class="sxs-lookup"><span data-stu-id="01f68-139">Inside the source code for an exercise, you will also find an **End** folder containing a Visual Studio solution with the code that results from completing the steps in the corresponding exercise.</span></span> <span data-ttu-id="01f68-140">Tato řešení můžete použít jako návod, pokud potřebujete další pomoc při práci s tímto praktickým cvičením.</span><span class="sxs-lookup"><span data-stu-id="01f68-140">You can use these solutions as guidance if you need additional help as you work through this hands-on lab.</span></span>

---

<a id="Exercises"></a>
## <a name="exercises"></a><span data-ttu-id="01f68-141">Cvičení</span><span class="sxs-lookup"><span data-stu-id="01f68-141">Exercises</span></span>

<span data-ttu-id="01f68-142">Tato praktická cvičení zahrnují následující cvičení:</span><span class="sxs-lookup"><span data-stu-id="01f68-142">This hands-on lab includes the following exercises:</span></span>

1. [<span data-ttu-id="01f68-143">Vytvoření webového rozhraní API</span><span class="sxs-lookup"><span data-stu-id="01f68-143">Creating a Web API</span></span>](#Exercise1)
2. [<span data-ttu-id="01f68-144">Vytvoření rozhraní SPA</span><span class="sxs-lookup"><span data-stu-id="01f68-144">Creating a SPA Interface</span></span>](#Exercise2)

<span data-ttu-id="01f68-145">Odhadovaný čas dokončení tohoto testovacího prostředí: **60 minut**</span><span class="sxs-lookup"><span data-stu-id="01f68-145">Estimated time to complete this lab: **60 minutes**</span></span>

> [!NOTE]
> <span data-ttu-id="01f68-146">Při prvním spuštění sady Visual Studio je nutné vybrat jednu z předdefinovaných kolekcí nastavení.</span><span class="sxs-lookup"><span data-stu-id="01f68-146">When you first start Visual Studio, you must select one of the predefined settings collections.</span></span> <span data-ttu-id="01f68-147">Každá předdefinovaná kolekce je navržena tak, aby odpovídala konkrétnímu stylu vývoje a určuje rozložení oken, chování editoru, fragmenty kódu technologie IntelliSense a možnosti dialogového okna.</span><span class="sxs-lookup"><span data-stu-id="01f68-147">Each predefined collection is designed to match a particular development style and determines window layouts, editor behavior, IntelliSense code snippets, and dialog box options.</span></span> <span data-ttu-id="01f68-148">Postupy v tomto testovacím prostředí popisují akce, které jsou nezbytné k provedení daného úkolu v sadě Visual Studio při použití kolekce **Obecné vývojové nastavení** .</span><span class="sxs-lookup"><span data-stu-id="01f68-148">The procedures in this lab describe the actions necessary to accomplish a given task in Visual Studio when using the **General Development Settings** collection.</span></span> <span data-ttu-id="01f68-149">Pokud zvolíte pro vývojové prostředí jinou kolekci nastavení, mohou být v krocích, které byste měli vzít v úvahu, rozdíly.</span><span class="sxs-lookup"><span data-stu-id="01f68-149">If you choose a different settings collection for your development environment, there may be differences in the steps that you should take into account.</span></span>

<a id="Exercise1"></a>
### <a name="exercise-1-creating-a-web-api"></a><span data-ttu-id="01f68-150">Cvičení 1: Vytvoření webového rozhraní API</span><span class="sxs-lookup"><span data-stu-id="01f68-150">Exercise 1: Creating a Web API</span></span>

<span data-ttu-id="01f68-151">Jednou z klíčových částí zabezpečeného hesla je vrstva služby.</span><span class="sxs-lookup"><span data-stu-id="01f68-151">One of the key parts of a SPA is the service layer.</span></span> <span data-ttu-id="01f68-152">Zodpovídá za zpracování volání AJAX odeslaných uživatelským rozhraním a vrací data jako odpověď na dané volání.</span><span class="sxs-lookup"><span data-stu-id="01f68-152">It is responsible for processing the Ajax calls sent by the UI and returning data in response to that call.</span></span> <span data-ttu-id="01f68-153">Načtená data by měla být prezentována v strojově čitelném formátu, aby je bylo možné analyzovat a spotřebovat klientem.</span><span class="sxs-lookup"><span data-stu-id="01f68-153">The data retrieved should be presented in a machine-readable format in order to be parsed and consumed by the client.</span></span>

<span data-ttu-id="01f68-154">Rozhraní Web API je součástí sady ASP.NET stack a je navržena tak, aby usnadnila implementaci služeb HTTP, což obvykle odesílá a přijímá data ve formátu JSON nebo XML prostřednictvím rozhraní RESTful API.</span><span class="sxs-lookup"><span data-stu-id="01f68-154">The Web API framework is part of the ASP.NET Stack and is designed to make it easy to implement HTTP services, generally sending and receiving JSON- or XML-formatted data through a RESTful API.</span></span> <span data-ttu-id="01f68-155">V tomto cvičení vytvoříte web pro hostování aplikace informatik kvíz a pak implementujete back-end službu, která bude zveřejňovat a uchovávat data kvízu pomocí webového rozhraní API ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="01f68-155">In this exercise you will create the Web site to host the Geek Quiz application and then implement the back-end service to expose and persist the quiz data using ASP.NET Web API.</span></span>

<a id="Ex1Task1"></a>
#### <a name="task-1--creating-the-initial-project-for-geek-quiz"></a><span data-ttu-id="01f68-156">Úloha 1 – vytvoření počátečního projektu pro informatik kvíz</span><span class="sxs-lookup"><span data-stu-id="01f68-156">Task 1 – Creating the Initial Project for Geek Quiz</span></span>

<span data-ttu-id="01f68-157">V této úloze začnete vytvářet nový projekt ASP.NET MVC s podporou ASP.NET webového rozhraní API založenou na jednom typu projektu **ASP.NET** , který je součástí sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="01f68-157">In this task you will start creating a new ASP.NET MVC project with support for ASP.NET Web API based on the **One ASP.NET** project type that comes with Visual Studio.</span></span> <span data-ttu-id="01f68-158">**Jedna ASP.neta** sjednocuje všechny technologie ASP.NET a dává vám možnost je podle potřeby kombinovat a odpovídat.</span><span class="sxs-lookup"><span data-stu-id="01f68-158">**One ASP.NET** unifies all ASP.NET technologies and gives you the option to mix and match them as desired.</span></span> <span data-ttu-id="01f68-159">Pak přidáte třídy modelů Entity Framework a inicializátor databáze pro vložení otázek kvízu.</span><span class="sxs-lookup"><span data-stu-id="01f68-159">You will then add the Entity Framework's model classes and the database initializer to insert the quiz questions.</span></span>

1. <span data-ttu-id="01f68-160">Otevřete **Visual Studio Express 2013 pro web** a vyberte **soubor | Nový projekt...** pro spuštění nového řešení.</span><span class="sxs-lookup"><span data-stu-id="01f68-160">Open **Visual Studio Express 2013 for Web** and select **File | New Project...** to start a new solution.</span></span>

    <span data-ttu-id="01f68-161">![Vytvoření nového projektu](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image1.png "Vytvoření nového projektu")</span><span class="sxs-lookup"><span data-stu-id="01f68-161">![Creating a New Project](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image1.png "Creating a New Project")</span></span>

    <span data-ttu-id="01f68-162">*Vytvoření nového projektu*</span><span class="sxs-lookup"><span data-stu-id="01f68-162">*Creating a New Project*</span></span>
2. <span data-ttu-id="01f68-163">V dialogovém okně **Nový projekt** vyberte v části vizuál  **C# možnost Webová aplikace v ASP.NET | Karta web** . Ujistěte se, že je vybraná možnost **.NET Framework 4,5** , pojmenujte ji *GeekQuiz*, vyberte **umístění** a klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="01f68-163">In the **New Project** dialog box, select **ASP.NET Web Application** under the **Visual C# | Web** tab. Make sure **.NET Framework 4.5** is selected, name it *GeekQuiz*, choose a **Location** and click **OK**.</span></span>

    <span data-ttu-id="01f68-164">![Vytvoření nového projektu webové aplikace v ASP.NET](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image2.png "Vytvoření nového projektu webové aplikace v ASP.NET")</span><span class="sxs-lookup"><span data-stu-id="01f68-164">![Creating a new ASP.NET Web Application project](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image2.png "Creating a new ASP.NET Web Application project")</span></span>

    <span data-ttu-id="01f68-165">*Vytvoření nového projektu webové aplikace v ASP.NET*</span><span class="sxs-lookup"><span data-stu-id="01f68-165">*Creating a new ASP.NET Web Application project*</span></span>
3. <span data-ttu-id="01f68-166">V dialogovém okně **Nový projekt ASP.NET** vyberte šablonu **MVC** a vyberte možnost **webové rozhraní API** .</span><span class="sxs-lookup"><span data-stu-id="01f68-166">In the **New ASP.NET Project** dialog box, select the **MVC** template and select the **Web API** option.</span></span> <span data-ttu-id="01f68-167">Také se ujistěte, že je možnost **ověřování** nastavena na **jednotlivé uživatelské účty**.</span><span class="sxs-lookup"><span data-stu-id="01f68-167">Also, make sure that the **Authentication** option is set to **Individual User Accounts**.</span></span> <span data-ttu-id="01f68-168">Pokračujte kliknutím na tlačítko **OK** .</span><span class="sxs-lookup"><span data-stu-id="01f68-168">Click **OK** to continue.</span></span>

    ![Vytvoření nového projektu pomocí šablony MVC, včetně komponent webového rozhraní API](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image3.png)

    <span data-ttu-id="01f68-170">*Vytvoření nového projektu pomocí šablony MVC, včetně komponent webového rozhraní API*</span><span class="sxs-lookup"><span data-stu-id="01f68-170">*Creating a new project with the MVC template, including Web API components*</span></span>
4. <span data-ttu-id="01f68-171">V **Průzkumník řešení**klikněte pravým tlačítkem na složku **modely** projektu **GeekQuiz** a vyberte **Přidat | Existující položka...** .</span><span class="sxs-lookup"><span data-stu-id="01f68-171">In **Solution Explorer**, right-click the **Models** folder of the **GeekQuiz** project and select **Add | Existing Item...**.</span></span>

    <span data-ttu-id="01f68-172">![Přidání existující položky](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image4.png "Přidání existující položky")</span><span class="sxs-lookup"><span data-stu-id="01f68-172">![Adding an existing item](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image4.png "Adding an existing item")</span></span>

    <span data-ttu-id="01f68-173">*Přidání existující položky*</span><span class="sxs-lookup"><span data-stu-id="01f68-173">*Adding an existing item*</span></span>
5. <span data-ttu-id="01f68-174">V dialogovém okně **Přidat existující položku** přejděte do složky **source/assets/modely** a vyberte všechny soubory.</span><span class="sxs-lookup"><span data-stu-id="01f68-174">In the **Add Existing Item** dialog box, navigate to the **Source/Assets/Models** folder and select all the files.</span></span> <span data-ttu-id="01f68-175">Klikněte na **Přidat**.</span><span class="sxs-lookup"><span data-stu-id="01f68-175">Click **Add**.</span></span>

    <span data-ttu-id="01f68-176">![Přidání prostředků modelu](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image5.png "Přidání prostředků modelu")</span><span class="sxs-lookup"><span data-stu-id="01f68-176">![Adding the model assets](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image5.png "Adding the model assets")</span></span>

    <span data-ttu-id="01f68-177">*Přidání prostředků modelu*</span><span class="sxs-lookup"><span data-stu-id="01f68-177">*Adding the model assets*</span></span>

    > [!NOTE]
    > <span data-ttu-id="01f68-178">Přidáním těchto souborů přidáte datový model, kontext databáze Entity Framework a inicializátor databáze pro aplikaci kvíz pro informatik.</span><span class="sxs-lookup"><span data-stu-id="01f68-178">By adding these files, you are adding the data model, the Entity Framework's database context and the database initializer for the Geek Quiz application.</span></span>
    > 
    > <span data-ttu-id="01f68-179">**Entity Framework (EF)** je objektově-relační MAPOVAČ (ORM), který umožňuje vytvářet aplikace pro přístup k datům pomocí programování s modelem konceptuální aplikace namísto programování přímo pomocí schématu relačního úložiště.</span><span class="sxs-lookup"><span data-stu-id="01f68-179">**Entity Framework (EF)** is an object-relational mapper (ORM) that enables you to create data access applications by programming with a conceptual application model instead of programming directly using a relational storage schema.</span></span> <span data-ttu-id="01f68-180">Další informace o Entity Framework najdete [tady](../../../entity-framework.md).</span><span class="sxs-lookup"><span data-stu-id="01f68-180">You can learn more about Entity Framework [here](../../../entity-framework.md).</span></span>
    > 
    > <span data-ttu-id="01f68-181">Následuje popis tříd, které jste právě přidali:</span><span class="sxs-lookup"><span data-stu-id="01f68-181">The following is a description of the classes you just added:</span></span>
    > 
    > - <span data-ttu-id="01f68-182">**TriviaOption:** představuje jednu možnost přidruženou k otázce kvízu.</span><span class="sxs-lookup"><span data-stu-id="01f68-182">**TriviaOption:** represents a single option associated with a quiz question</span></span>
    > - <span data-ttu-id="01f68-183">**TriviaQuestion:** představuje otázku kvízu a zpřístupňuje přidružené možnosti prostřednictvím vlastnosti **Options** .</span><span class="sxs-lookup"><span data-stu-id="01f68-183">**TriviaQuestion:** represents a quiz question and exposes the associated options through the **Options** property</span></span>
    > - <span data-ttu-id="01f68-184">**TriviaAnswer:** představuje možnost vybranou uživatelem v reakci na dotaz kvízu.</span><span class="sxs-lookup"><span data-stu-id="01f68-184">**TriviaAnswer:** represents the option selected by the user in response to a quiz question</span></span>
    > - <span data-ttu-id="01f68-185">**TriviaContext:** představuje kontext databáze Entity Framework aplikace kvízu informatik.</span><span class="sxs-lookup"><span data-stu-id="01f68-185">**TriviaContext:** represents the Entity Framework's database context of the Geek Quiz application.</span></span> <span data-ttu-id="01f68-186">Tato třída je odvozena z **DContext** a zpřístupňuje vlastnosti **negenerickými** , které reprezentují kolekce výše popsaných entit.</span><span class="sxs-lookup"><span data-stu-id="01f68-186">This class derives from **DContext** and exposes **DbSet** properties that represent collections of the entities described above.</span></span>
    > - <span data-ttu-id="01f68-187">**TriviaDatabaseInitializer:** implementace inicializátoru Entity Framework pro třídu **TriviaContext** , která dědí z **metodu createdatabaseifnotexists**.</span><span class="sxs-lookup"><span data-stu-id="01f68-187">**TriviaDatabaseInitializer:** the implementation of the Entity Framework initializer for the **TriviaContext** class which inherits from **CreateDatabaseIfNotExists**.</span></span> <span data-ttu-id="01f68-188">Výchozím chováním této třídy je vytvoření databáze pouze v případě, že neexistuje, vložením entit uvedených v metodě **osazení** .</span><span class="sxs-lookup"><span data-stu-id="01f68-188">The default behavior of this class is to create the database only if it does not exist, inserting the entities specified in the **Seed** method.</span></span>
6. <span data-ttu-id="01f68-189">Otevřete soubor **Global.asax.cs** a přidejte následující příkaz using.</span><span class="sxs-lookup"><span data-stu-id="01f68-189">Open the **Global.asax.cs** file and add the following using statement.</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample1.cs)]
7. <span data-ttu-id="01f68-190">Přidejte následující kód na začátek **aplikace\_metodu Start** , chcete-li nastavit **TriviaDatabaseInitializer** jako inicializátor databáze.</span><span class="sxs-lookup"><span data-stu-id="01f68-190">Add the following code at the beginning of the **Application\_Start** method to set the **TriviaDatabaseInitializer** as the database initializer.</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample2.cs)]
8. <span data-ttu-id="01f68-191">Upravte **Domovský** kontroler tak, aby omezil přístup k ověřeným uživatelům.</span><span class="sxs-lookup"><span data-stu-id="01f68-191">Modify the **Home** controller to restrict access to authenticated users.</span></span> <span data-ttu-id="01f68-192">Provedete to tak, že otevřete soubor **HomeController.cs** ve složce **Controllers** a přidáte atribut **autorizovat** do definice třídy **HomeController** .</span><span class="sxs-lookup"><span data-stu-id="01f68-192">To do this, open the **HomeController.cs** file inside the **Controllers** folder and add the **Authorize** attribute to the **HomeController** class definition.</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample3.cs)]

    > [!NOTE]
    > <span data-ttu-id="01f68-193">Filtr **autorizace** ověří, jestli je uživatel ověřený.</span><span class="sxs-lookup"><span data-stu-id="01f68-193">The **Authorize** filter checks to see if the user is authenticated.</span></span> <span data-ttu-id="01f68-194">Pokud uživatel není ověřený, vrátí stavový kód HTTP 401 (Neautorizováno) bez vyvolání akce.</span><span class="sxs-lookup"><span data-stu-id="01f68-194">If the user is not authenticated, it returns HTTP status code 401 (Unauthorized) without invoking the action.</span></span> <span data-ttu-id="01f68-195">Filtr můžete použít globálně, na úrovni řadiče nebo na úrovni jednotlivých akcí.</span><span class="sxs-lookup"><span data-stu-id="01f68-195">You can apply the filter globally, at the controller level, or at the level of individual actions.</span></span>
9. <span data-ttu-id="01f68-196">Nyní budete přizpůsobovat rozložení webových stránek a značky.</span><span class="sxs-lookup"><span data-stu-id="01f68-196">You will now customize the layout of the web pages and the branding.</span></span> <span data-ttu-id="01f68-197">Provedete to tak, že otevřete soubor **\_layout. cshtml** v **zobrazeních | Sdílená** složka a aktualizace obsahu **&lt;název&gt;** elementu nahrazením *aplikace ASP.NET* pomocí *kvízu informatik*.</span><span class="sxs-lookup"><span data-stu-id="01f68-197">To do this, open the **\_Layout.cshtml** file inside the **Views | Shared** folder and update the content of the **&lt;title&gt;** element by replacing *My ASP.NET Application* with *Geek Quiz*.</span></span>

    [!code-cshtml[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample4.cshtml)]
10. <span data-ttu-id="01f68-198">Ve stejném souboru aktualizujte navigační panel tak, že odeberete odkazy *About* a *Contact* a přejmenujete odkaz *Domů* na *Přehrát*.</span><span class="sxs-lookup"><span data-stu-id="01f68-198">In the same file, update the navigation bar by removing the *About* and *Contact* links and renaming the *Home* link to *Play*.</span></span> <span data-ttu-id="01f68-199">Dále přejmenujte odkaz *název aplikace* na *informatik kvíz*.</span><span class="sxs-lookup"><span data-stu-id="01f68-199">Additionally, rename the *Application name* link to *Geek Quiz*.</span></span> <span data-ttu-id="01f68-200">HTML pro navigační panel by měl vypadat podobně jako následující kód.</span><span class="sxs-lookup"><span data-stu-id="01f68-200">The HTML for the navigation bar should look like the following code.</span></span>

    [!code-cshtml[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample5.cshtml)]
11. <span data-ttu-id="01f68-201">Aktualizujte zápatí stránky rozložení tak, že nahradíte *moji aplikaci ASP.NET* pomocí *informatik kvízu*.</span><span class="sxs-lookup"><span data-stu-id="01f68-201">Update the footer of the layout page by replacing *My ASP.NET Application* with *Geek Quiz*.</span></span> <span data-ttu-id="01f68-202">Chcete-li to provést, nahraďte obsah **&gt;elementu&lt;zápatí** následujícím zvýrazněným kódem.</span><span class="sxs-lookup"><span data-stu-id="01f68-202">To do this, replace the content of the **&lt;footer&gt;** element with the following highlighted code.</span></span>

    [!code-html[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample6.html)]

<a id="Ex1Task2"></a>
#### <a name="task-2--creating-the-triviacontroller-web-api"></a><span data-ttu-id="01f68-203">Úloha 2 – Vytvoření webového rozhraní API TriviaController</span><span class="sxs-lookup"><span data-stu-id="01f68-203">Task 2 – Creating the TriviaController Web API</span></span>

<span data-ttu-id="01f68-204">V předchozí úloze jste vytvořili počáteční strukturu webové aplikace informatik kvíz.</span><span class="sxs-lookup"><span data-stu-id="01f68-204">In the previous task, you created the initial structure of the Geek Quiz web application.</span></span> <span data-ttu-id="01f68-205">Nyní vytvoříte jednoduchou službu webového rozhraní API, která spolupracuje s datovým modelem kvízu a zpřístupňuje tyto akce:</span><span class="sxs-lookup"><span data-stu-id="01f68-205">You will now build a simple Web API service that interacts with the quiz data model and exposes the following actions:</span></span>

- <span data-ttu-id="01f68-206">**Get/API/Trivia**: načte další otázku ze seznamu kvízu, na kterou má ověřený uživatel odpověď.</span><span class="sxs-lookup"><span data-stu-id="01f68-206">**GET /api/trivia**: Retrieves the next question from the quiz list to be answered by the authenticated user.</span></span>
- <span data-ttu-id="01f68-207">**Post/API/Trivia**: ukládá odpověď kvízu určenou ověřeným uživatelem.</span><span class="sxs-lookup"><span data-stu-id="01f68-207">**POST /api/trivia**: Stores the quiz answer specified by the authenticated user.</span></span>

<span data-ttu-id="01f68-208">K vytvoření směrného plánu pro třídu kontroleru webového rozhraní API použijete nástroje pro generování uživatelského rozhraní ASP.NET, které nabízí Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="01f68-208">You will use the ASP.NET Scaffolding tools provided by Visual Studio to create the baseline for the Web API controller class.</span></span>

1. <span data-ttu-id="01f68-209">Otevřete soubor **WebApiConfig.cs** ve složce **App\_Start** .</span><span class="sxs-lookup"><span data-stu-id="01f68-209">Open the **WebApiConfig.cs** file inside the **App\_Start** folder.</span></span> <span data-ttu-id="01f68-210">Tento soubor definuje konfiguraci služby webového rozhraní API, například jak jsou trasy namapované na akce kontroleru webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="01f68-210">This file defines the configuration of the Web API service, like how routes are mapped to Web API controller actions.</span></span>
2. <span data-ttu-id="01f68-211">Na začátek souboru přidejte následující příkaz using.</span><span class="sxs-lookup"><span data-stu-id="01f68-211">Add the following using statement at the beginning of the file.</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample7.cs)]
3. <span data-ttu-id="01f68-212">Přidejte následující zvýrazněný kód do metody **Register** pro globální konfiguraci formátovacího modulu pro data JSON načtené metodami akce webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="01f68-212">Add the following highlighted code to the **Register** method to globally configure the formatter for the JSON data retrieved by the Web API action methods.</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample8.cs)]

    > [!NOTE]
    > <span data-ttu-id="01f68-213">**CamelCasePropertyNamesContractResolver** automaticky převede názvy vlastností na velikost písmen *ve stylu CamelCase* , což je obecná konvence pro názvy vlastností v JavaScriptu.</span><span class="sxs-lookup"><span data-stu-id="01f68-213">The **CamelCasePropertyNamesContractResolver** automatically converts property names to *camel* case, which is the general convention for property names in JavaScript.</span></span>
4. <span data-ttu-id="01f68-214">V **Průzkumník řešení**klikněte pravým tlačítkem myši na složku **řadiče** projektu **GeekQuiz** a vyberte **Přidat | Nová vygenerovaná položka...**</span><span class="sxs-lookup"><span data-stu-id="01f68-214">In **Solution Explorer**, right-click the **Controllers** folder of the **GeekQuiz** project and select **Add | New Scaffolded Item...**.</span></span>

    <span data-ttu-id="01f68-215">![Vytvoření nové vygenerované položky](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image6.png "Vytvoření nové vygenerované položky")</span><span class="sxs-lookup"><span data-stu-id="01f68-215">![Creating a new scaffolded item](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image6.png "Creating a new scaffolded item")</span></span>

    <span data-ttu-id="01f68-216">*Vytvoření nové vygenerované položky*</span><span class="sxs-lookup"><span data-stu-id="01f68-216">*Creating a new scaffolded item*</span></span>
5. <span data-ttu-id="01f68-217">V dialogovém okně **Přidat generování uživatelského rozhraní** se ujistěte, že je v levém podokně vybrán **běžný** uzel.</span><span class="sxs-lookup"><span data-stu-id="01f68-217">In the **Add Scaffold** dialog box, make sure that the **Common** node is selected in the left pane.</span></span> <span data-ttu-id="01f68-218">Pak v prostředním podokně vyberte položku **řadič Web API 2 – prázdná** šablona a klikněte na **Přidat**.</span><span class="sxs-lookup"><span data-stu-id="01f68-218">Then, select the **Web API 2 Controller - Empty** template in the center pane and click **Add**.</span></span>

    <span data-ttu-id="01f68-219">![Výběr prázdné šablony ovladače webového rozhraní API 2](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image7.png "Výběr prázdné šablony ovladače webového rozhraní API 2")</span><span class="sxs-lookup"><span data-stu-id="01f68-219">![Selecting the Web API 2 Controller Empty template](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image7.png "Selecting the Web API 2 Controller Empty template")</span></span>

    <span data-ttu-id="01f68-220">*Výběr prázdné šablony ovladače webového rozhraní API 2*</span><span class="sxs-lookup"><span data-stu-id="01f68-220">*Selecting the Web API 2 Controller Empty template*</span></span>

    > [!NOTE]
    > <span data-ttu-id="01f68-221">**Generování uživatelského rozhraní ASP.NET** je rozhraní pro generování kódu pro webové aplikace v ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="01f68-221">**ASP.NET Scaffolding** is a code generation framework for ASP.NET Web applications.</span></span> <span data-ttu-id="01f68-222">Visual Studio 2013 obsahuje předem instalované generátory kódu pro MVC a projekty webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="01f68-222">Visual Studio 2013 includes pre-installed code generators for MVC and Web API projects.</span></span> <span data-ttu-id="01f68-223">V projektu byste měli použít generování uživatelského rozhraní, pokud chcete rychle přidat kód, který komunikuje s datovými modely, aby se snížila doba potřebná k vývoji standardních datových operací.</span><span class="sxs-lookup"><span data-stu-id="01f68-223">You should use scaffolding in your project when you want to quickly add code that interacts with data models in order to reduce the amount of time required to develop standard data operations.</span></span>
    > 
    > <span data-ttu-id="01f68-224">Proces generování uživatelského rozhraní také zajišťuje, že všechny požadované závislosti jsou nainstalovány v projektu.</span><span class="sxs-lookup"><span data-stu-id="01f68-224">The scaffolding process also ensures that all the required dependencies are installed in the project.</span></span> <span data-ttu-id="01f68-225">Například pokud začnete s prázdným projektem ASP.NET a potom použijete generování uživatelského rozhraní pro přidání kontroleru webového rozhraní API, do projektu se automaticky přidají požadované balíčky a odkazy na webové rozhraní API NuGet.</span><span class="sxs-lookup"><span data-stu-id="01f68-225">For example, if you start with an empty ASP.NET project and then use scaffolding to add a Web API controller, the required Web API NuGet packages and references are added to your project automatically.</span></span>
6. <span data-ttu-id="01f68-226">V dialogovém **okně Přidat řadič** zadejte do textového pole **název kontroleru** *TriviaController* a klikněte na **Přidat**.</span><span class="sxs-lookup"><span data-stu-id="01f68-226">In the **Add Controller** dialog box, type *TriviaController* in the **Controller name** text box and click **Add**.</span></span>

    <span data-ttu-id="01f68-227">![Přidání kontroleru minihry](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image8.png "Přidání kontroleru minihry")</span><span class="sxs-lookup"><span data-stu-id="01f68-227">![Adding the Trivia Controller](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image8.png "Adding the Trivia Controller")</span></span>

    <span data-ttu-id="01f68-228">*Přidání kontroleru minihry*</span><span class="sxs-lookup"><span data-stu-id="01f68-228">*Adding the Trivia Controller*</span></span>
7. <span data-ttu-id="01f68-229">Soubor **TriviaController.cs** se pak přidá do složky **Controllers** projektu **GeekQuiz** , který obsahuje prázdnou třídu **TriviaController** .</span><span class="sxs-lookup"><span data-stu-id="01f68-229">The **TriviaController.cs** file is then added to the **Controllers** folder of the **GeekQuiz** project, containing an empty **TriviaController** class.</span></span> <span data-ttu-id="01f68-230">Na začátek souboru přidejte následující příkazy using.</span><span class="sxs-lookup"><span data-stu-id="01f68-230">Add the following using statements at the beginning of the file.</span></span>

    <span data-ttu-id="01f68-231">(Fragment kódu – *AspNetWebApiSpa-EX1-TriviaControllerUsings*)</span><span class="sxs-lookup"><span data-stu-id="01f68-231">(Code Snippet - *AspNetWebApiSpa - Ex1 - TriviaControllerUsings*)</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample9.cs)]
8. <span data-ttu-id="01f68-232">Přidejte následující kód na začátek třídy **TriviaController** k definování, inicializaci a uvolnění instance **TriviaContext** v řadiči.</span><span class="sxs-lookup"><span data-stu-id="01f68-232">Add the following code at the beginning of the **TriviaController** class to define, initialize and dispose the **TriviaContext** instance in the controller.</span></span>

    <span data-ttu-id="01f68-233">(Fragment kódu – *AspNetWebApiSpa-EX1-TriviaControllerContext*)</span><span class="sxs-lookup"><span data-stu-id="01f68-233">(Code Snippet - *AspNetWebApiSpa - Ex1 - TriviaControllerContext*)</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample10.cs)]

    > [!NOTE]
    > <span data-ttu-id="01f68-234">Metoda **Dispose** **TriviaController** vyvolá metodu **Dispose** instance **TriviaContext** , která zajistí, že všechny prostředky používané kontextovým objektem jsou uvolněny, když je instance **TriviaContext** vyřazena nebo uvolňována paměti.</span><span class="sxs-lookup"><span data-stu-id="01f68-234">The **Dispose** method of **TriviaController** invokes the **Dispose** method of the **TriviaContext** instance, which ensures that all the resources used by the context object are released when the **TriviaContext** instance is disposed or garbage-collected.</span></span> <span data-ttu-id="01f68-235">To zahrnuje uzavírání všech databázových připojení, která jsou otevřená Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="01f68-235">This includes closing all database connections opened by Entity Framework.</span></span>
9. <span data-ttu-id="01f68-236">Na konec třídy **TriviaController** přidejte následující pomocnou metodu.</span><span class="sxs-lookup"><span data-stu-id="01f68-236">Add the following helper method at the end of the **TriviaController** class.</span></span> <span data-ttu-id="01f68-237">Tato metoda načte následující kvíz z databáze, na kterou bude odpovědět zadaný uživatel.</span><span class="sxs-lookup"><span data-stu-id="01f68-237">This method retrieves the following quiz question from the database to be answered by the specified user.</span></span>

    <span data-ttu-id="01f68-238">(Fragment kódu – *AspNetWebApiSpa-EX1-TriviaControllerNextQuestion*)</span><span class="sxs-lookup"><span data-stu-id="01f68-238">(Code Snippet - *AspNetWebApiSpa - Ex1 - TriviaControllerNextQuestion*)</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample11.cs)]
10. <span data-ttu-id="01f68-239">Do třídy **TriviaController** přidejte následující metodu **Get** Action.</span><span class="sxs-lookup"><span data-stu-id="01f68-239">Add the following **Get** action method to the **TriviaController** class.</span></span> <span data-ttu-id="01f68-240">Tato metoda akce volá pomocnou metodu **NextQuestionAsync** definovanou v předchozím kroku k načtení další otázky pro ověřeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="01f68-240">This action method calls the **NextQuestionAsync** helper method defined in the previous step to retrieve the next question for the authenticated user.</span></span>

    <span data-ttu-id="01f68-241">(Fragment kódu – *AspNetWebApiSpa-EX1-TriviaControllerGetAction*)</span><span class="sxs-lookup"><span data-stu-id="01f68-241">(Code Snippet - *AspNetWebApiSpa - Ex1 - TriviaControllerGetAction*)</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample12.cs)]
11. <span data-ttu-id="01f68-242">Na konec třídy **TriviaController** přidejte následující pomocnou metodu.</span><span class="sxs-lookup"><span data-stu-id="01f68-242">Add the following helper method at the end of the **TriviaController** class.</span></span> <span data-ttu-id="01f68-243">Tato metoda uloží zadanou odpověď v databázi a vrátí hodnotu typu Boolean, která označuje, zda je odpověď správná.</span><span class="sxs-lookup"><span data-stu-id="01f68-243">This method stores the specified answer in the database and returns a Boolean value indicating whether or not the answer is correct.</span></span>

    <span data-ttu-id="01f68-244">(Fragment kódu – *AspNetWebApiSpa-EX1-TriviaControllerStoreAsync*)</span><span class="sxs-lookup"><span data-stu-id="01f68-244">(Code Snippet - *AspNetWebApiSpa - Ex1 - TriviaControllerStoreAsync*)</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample13.cs)]
12. <span data-ttu-id="01f68-245">Přidejte následující metodu **post** Action do třídy **TriviaController** .</span><span class="sxs-lookup"><span data-stu-id="01f68-245">Add the following **Post** action method to the **TriviaController** class.</span></span> <span data-ttu-id="01f68-246">Tato metoda akce přidružuje odpověď k ověřenému uživateli a zavolá pomocnou metodu **StoreAsync** .</span><span class="sxs-lookup"><span data-stu-id="01f68-246">This action method associates the answer to the authenticated user and calls the **StoreAsync** helper method.</span></span> <span data-ttu-id="01f68-247">Pak pošle odpověď s logickou hodnotou vrácenou pomocnou metodou.</span><span class="sxs-lookup"><span data-stu-id="01f68-247">Then, it sends a response with the Boolean value returned by the helper method.</span></span>

    <span data-ttu-id="01f68-248">(Fragment kódu – *AspNetWebApiSpa-EX1-TriviaControllerPostAction*)</span><span class="sxs-lookup"><span data-stu-id="01f68-248">(Code Snippet - *AspNetWebApiSpa - Ex1 - TriviaControllerPostAction*)</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample14.cs)]
13. <span data-ttu-id="01f68-249">Upravte kontroler webového rozhraní API tak, aby omezil přístup k ověřeným uživatelům přidáním atributu **autorizace** do definice třídy **TriviaController** .</span><span class="sxs-lookup"><span data-stu-id="01f68-249">Modify the Web API controller to restrict access to authenticated users by adding the **Authorize** attribute to the **TriviaController** class definition.</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample15.cs)]

<a id="Ex1Task3"></a>
#### <a name="task-3--running-the-solution"></a><span data-ttu-id="01f68-250">Úloha 3 – spuštění řešení</span><span class="sxs-lookup"><span data-stu-id="01f68-250">Task 3 – Running the Solution</span></span>

<span data-ttu-id="01f68-251">V této úloze ověříte, že služba webového rozhraní API, kterou jste vytvořili v předchozím úkolu, funguje podle očekávání.</span><span class="sxs-lookup"><span data-stu-id="01f68-251">In this task you will verify that the Web API service you built in the previous task is working as expected.</span></span> <span data-ttu-id="01f68-252">K zaznamenání síťového provozu a kontrole úplné odezvy ze služby webového rozhraní API použijete Vývojářské nástroje Internet Explorer **F12** .</span><span class="sxs-lookup"><span data-stu-id="01f68-252">You will use the Internet Explorer **F12 Developer Tools** to capture the network traffic and inspect the full response from the Web API service.</span></span>

> [!NOTE]
> <span data-ttu-id="01f68-253">Ujistěte se, že je vybrána možnost **Internet Explorer** v nabídce **Start** , která je umístěna na panelu nástrojů sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="01f68-253">Make sure that **Internet Explorer** is selected in the **Start** button located on the Visual Studio toolbar.</span></span>
> 
> ![Možnost aplikace Internet Explorer](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image9.png)

1. <span data-ttu-id="01f68-255">Stisknutím klávesy **F5** spusťte řešení.</span><span class="sxs-lookup"><span data-stu-id="01f68-255">Press **F5** to run the solution.</span></span> <span data-ttu-id="01f68-256">**Přihlašovací** stránka by se měla zobrazit v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="01f68-256">The **Log in** page should appear in the browser.</span></span>

    > [!NOTE]
    > <span data-ttu-id="01f68-257">Po spuštění aplikace se aktivuje výchozí trasa MVC, která je ve výchozím nastavení namapována na akci **indexu** třídy **HomeController** .</span><span class="sxs-lookup"><span data-stu-id="01f68-257">When the application starts, the default MVC route is triggered, which by default is mapped to the **Index** action of the **HomeController** class.</span></span> <span data-ttu-id="01f68-258">Vzhledem k tomu, že **HomeController** je omezen na ověřené uživatele (Nezapomeňte, že jste tuto třídu upravovali pomocí atributu **autorizovat** v cvičení 1) a zatím není ověřeno žádného uživatele, aplikace přesměruje původní požadavek na přihlašovací stránku.</span><span class="sxs-lookup"><span data-stu-id="01f68-258">Since **HomeController** is restricted to authenticated users (remember that you decorated that class with the **Authorize** attribute in Exercise 1) and there is no user authenticated yet, the application redirects the original request to the log in page.</span></span>

    <span data-ttu-id="01f68-259">![Spuštění řešení](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image10.png "Spuštění řešení")</span><span class="sxs-lookup"><span data-stu-id="01f68-259">![Running the solution](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image10.png "Running the solution")</span></span>

    <span data-ttu-id="01f68-260">*Spuštění řešení*</span><span class="sxs-lookup"><span data-stu-id="01f68-260">*Running the solution*</span></span>
2. <span data-ttu-id="01f68-261">Kliknutím na **zaregistrovat** vytvořte nového uživatele.</span><span class="sxs-lookup"><span data-stu-id="01f68-261">Click **Register** to create a new user.</span></span>

    <span data-ttu-id="01f68-262">![Registrace nového uživatele](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image11.png "Registrace nového uživatele")</span><span class="sxs-lookup"><span data-stu-id="01f68-262">![Registering a new user](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image11.png "Registering a new user")</span></span>

    <span data-ttu-id="01f68-263">*Registrace nového uživatele*</span><span class="sxs-lookup"><span data-stu-id="01f68-263">*Registering a new user*</span></span>
3. <span data-ttu-id="01f68-264">Na stránce **zaregistrovat** zadejte **uživatelské jméno** a **heslo**a potom klikněte na **zaregistrovat**.</span><span class="sxs-lookup"><span data-stu-id="01f68-264">In the **Register** page, enter a **User name** and **Password**, and then click **Register**.</span></span>

    <span data-ttu-id="01f68-265">![Registrovat stránku](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image12.png "Registrovat stránku")</span><span class="sxs-lookup"><span data-stu-id="01f68-265">![Register page](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image12.png "Register page")</span></span>

    <span data-ttu-id="01f68-266">*Registrovat stránku*</span><span class="sxs-lookup"><span data-stu-id="01f68-266">*Register page*</span></span>
4. <span data-ttu-id="01f68-267">Aplikace registruje nový účet a uživatel je ověřený a přesměrován zpět na domovskou stránku.</span><span class="sxs-lookup"><span data-stu-id="01f68-267">The application registers the new account and the user is authenticated and redirected back to the home page.</span></span>

    <span data-ttu-id="01f68-268">![Uživatel je ověřený.](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image13.png "Ověřeno uživatelem")</span><span class="sxs-lookup"><span data-stu-id="01f68-268">![User is authenticated](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image13.png "User authenticated")</span></span>

    <span data-ttu-id="01f68-269">*Uživatel je ověřený.*</span><span class="sxs-lookup"><span data-stu-id="01f68-269">*User is authenticated*</span></span>
5. <span data-ttu-id="01f68-270">Stisknutím klávesy **F12** v prohlížeči otevřete panel **vývojářské nástroje** .</span><span class="sxs-lookup"><span data-stu-id="01f68-270">In the browser, press **F12** to open the **Developer Tools** panel.</span></span> <span data-ttu-id="01f68-271">Stiskněte **kombinaci kláves CTRL + 4** nebo klikněte na ikonu **sítě** a potom kliknutím na zelenou šipku začněte zachytávání síťového provozu.</span><span class="sxs-lookup"><span data-stu-id="01f68-271">Press **CTRL + 4** or click the **Network** icon, and then click the green arrow button to begin capturing network traffic.</span></span>

    <span data-ttu-id="01f68-272">![Inicializace zachycení sítě webového rozhraní API](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image14.png "Inicializace zachycení sítě webového rozhraní API")</span><span class="sxs-lookup"><span data-stu-id="01f68-272">![Initiating Web API network capture](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image14.png "Initiating Web API network capture")</span></span>

    <span data-ttu-id="01f68-273">*Inicializace zachycení sítě webového rozhraní API*</span><span class="sxs-lookup"><span data-stu-id="01f68-273">*Initiating Web API network capture*</span></span>
6. <span data-ttu-id="01f68-274">**Rozhraní API nebo minihry** přidejte k adrese URL v adresním řádku prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="01f68-274">Append **api/trivia** to the URL in the browser's address bar.</span></span> <span data-ttu-id="01f68-275">Nyní si můžete prohlédnout podrobnosti odpovědi z metody **Get** Action v **TriviaController**.</span><span class="sxs-lookup"><span data-stu-id="01f68-275">You will now inspect the details of the response from the **Get** action method in **TriviaController**.</span></span>

    <span data-ttu-id="01f68-276">![Načítání dat dalších otázek prostřednictvím webového rozhraní API](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image15.png "Načítání dat dalších otázek prostřednictvím webového rozhraní API")</span><span class="sxs-lookup"><span data-stu-id="01f68-276">![Retrieving the next question data through Web API](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image15.png "Retrieving the next question data through Web API")</span></span>

    <span data-ttu-id="01f68-277">*Načítání dat dalších otázek prostřednictvím webového rozhraní API*</span><span class="sxs-lookup"><span data-stu-id="01f68-277">*Retrieving the next question data through Web API*</span></span>

    > [!NOTE]
    > <span data-ttu-id="01f68-278">Po dokončení stahování se zobrazí výzva k provedení akce se staženým souborem.</span><span class="sxs-lookup"><span data-stu-id="01f68-278">Once the download finishes, you will be prompted to make an action with the downloaded file.</span></span> <span data-ttu-id="01f68-279">Nechejte dialogové okno otevřené, aby bylo možné sledovat obsah odpovědi prostřednictvím okna nástrojů pro vývojáře.</span><span class="sxs-lookup"><span data-stu-id="01f68-279">Leave the dialog box open in order to be able to watch the response content through the Developers Tool window.</span></span>
7. <span data-ttu-id="01f68-280">Nyní budete kontrolovat text odpovědi.</span><span class="sxs-lookup"><span data-stu-id="01f68-280">Now you will inspect the body of the response.</span></span> <span data-ttu-id="01f68-281">Chcete-li to provést, klikněte na kartu **Podrobnosti** a pak klikněte na **text odpovědi**.</span><span class="sxs-lookup"><span data-stu-id="01f68-281">To do this, click the **Details** tab and then click **Response body**.</span></span> <span data-ttu-id="01f68-282">Můžete kontrolovat, zda jsou stažená data objekt s **možnostmi** vlastností (což je seznam objektů **TriviaOption** ), **ID** a **název** odpovídající třídě **TriviaQuestion** .</span><span class="sxs-lookup"><span data-stu-id="01f68-282">You can check that the downloaded data is an object with the properties **options** (which is a list of **TriviaOption** objects), **id** and **title** that correspond to the **TriviaQuestion** class.</span></span>

    <span data-ttu-id="01f68-283">![Zobrazení textu odpovědi webového rozhraní API](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image16.png "Zobrazení textu odpovědi webového rozhraní API")</span><span class="sxs-lookup"><span data-stu-id="01f68-283">![Viewing the Web API Response Body](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image16.png "Viewing the Web API Response Body")</span></span>

    <span data-ttu-id="01f68-284">*Zobrazení textu odpovědi webového rozhraní API*</span><span class="sxs-lookup"><span data-stu-id="01f68-284">*Viewing Web API Response Body*</span></span>
8. <span data-ttu-id="01f68-285">Vraťte se do sady Visual Studio a stisknutím klávesy **SHIFT + F5** Zastavte ladění.</span><span class="sxs-lookup"><span data-stu-id="01f68-285">Go back to Visual Studio and press **SHIFT + F5** to stop debugging.</span></span>

<a id="Exercise2"></a>
### <a name="exercise-2-creating-the-spa-interface"></a><span data-ttu-id="01f68-286">Cvičení 2: vytvoření rozhraní SPA</span><span class="sxs-lookup"><span data-stu-id="01f68-286">Exercise 2: Creating the SPA Interface</span></span>

<span data-ttu-id="01f68-287">V tomto cvičení budete nejdřív sestavovat webovou front-end část informatik kvízu, která se zaměřuje na interakci jednostránkové aplikace pomocí **AngularJS**.</span><span class="sxs-lookup"><span data-stu-id="01f68-287">In this exercise you will first build the web front-end portion of Geek Quiz, focusing on the Single-Page Application interaction using **AngularJS**.</span></span> <span data-ttu-id="01f68-288">Pak budete moct zlepšit uživatelské prostředí pomocí CSS3 a zajistit tak bohatou animaci a nabídnout vizuální efekt přepínání kontextu při přechodu z jedné otázky na další.</span><span class="sxs-lookup"><span data-stu-id="01f68-288">You will then enhance the user experience with CSS3 to perform rich animations and provide a visual effect of context switching when transitioning from one question to the next.</span></span>

<a id="Ex2Task1"></a>
#### <a name="task-1--creating-the-spa-interface-using-angularjs"></a><span data-ttu-id="01f68-289">Úloha 1 – Vytvoření rozhraní zabezpečeného hesla pomocí AngularJS</span><span class="sxs-lookup"><span data-stu-id="01f68-289">Task 1 – Creating the SPA Interface Using AngularJS</span></span>

<span data-ttu-id="01f68-290">V této úloze použijete **AngularJS** k implementaci klientské strany aplikace informatik kvízu.</span><span class="sxs-lookup"><span data-stu-id="01f68-290">In this task you will use **AngularJS** to implement the client side of the Geek Quiz application.</span></span> <span data-ttu-id="01f68-291">**AngularJS** je open source rozhraní JavaScript, které rozšiřuje aplikace založené na prohlížeči pomocí funkce MVC ( *Model-View-Controller* ) a usnadňuje vývoj a testování.</span><span class="sxs-lookup"><span data-stu-id="01f68-291">**AngularJS** is an open-source JavaScript framework that augments browser-based applications with *Model-View-Controller* (MVC) capability, facilitating both development and testing.</span></span>

<span data-ttu-id="01f68-292">Začnete tím, že nainstalujete AngularJS z konzoly Správce balíčků sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="01f68-292">You will start by installing AngularJS from Visual Studio's Package Manager Console.</span></span> <span data-ttu-id="01f68-293">Pak vytvoříte kontroler, který bude poskytovat chování aplikace informatik kvíz, a zobrazení a vykreslit otázky kvízu a odpovědi pomocí modulu šablony AngularJS.</span><span class="sxs-lookup"><span data-stu-id="01f68-293">Then, you will create the controller to provide the behavior of the Geek Quiz app and the view to render the quiz questions and answers using the AngularJS template engine.</span></span>

> [!NOTE]
> <span data-ttu-id="01f68-294">Další informace o AngularJS najdete v tématu [[http://angularjs.org/](http://angularjs.org/)](http://angularjs.org/).</span><span class="sxs-lookup"><span data-stu-id="01f68-294">For more information about AngularJS, refer to [[http://angularjs.org/](http://angularjs.org/)](http://angularjs.org/).</span></span>

1. <span data-ttu-id="01f68-295">Otevřete **Visual Studio Express 2013 pro web** a otevřete řešení **GeekQuiz. sln** nacházející se ve složce **source/EX2-CreatingASPAInterface/Begin** .</span><span class="sxs-lookup"><span data-stu-id="01f68-295">Open **Visual Studio Express 2013 for Web** and open the **GeekQuiz.sln** solution located in the **Source/Ex2-CreatingASPAInterface/Begin** folder.</span></span> <span data-ttu-id="01f68-296">Případně můžete pokračovat v řešení, které jste získali v předchozím cvičení.</span><span class="sxs-lookup"><span data-stu-id="01f68-296">Alternatively, you can continue with the solution that you obtained in the previous exercise.</span></span>
2. <span data-ttu-id="01f68-297">Otevřete **konzolu Správce balíčků** z **nástrojů** > **Správce balíčků NuGet**.</span><span class="sxs-lookup"><span data-stu-id="01f68-297">Open the **Package Manager Console** from **Tools** > **NuGet Package Manager**.</span></span> <span data-ttu-id="01f68-298">Zadáním následujícího příkazu nainstalujte balíček NuGet **AngularJS. Core** .</span><span class="sxs-lookup"><span data-stu-id="01f68-298">Type the following command to install the **AngularJS.Core** NuGet package.</span></span>

    [!code-powershell[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample16.ps1)]
3. <span data-ttu-id="01f68-299">V **Průzkumník řešení**klikněte pravým tlačítkem myši na složku **skripty** projektu **GeekQuiz** a vyberte **Přidat | Nová složka**.</span><span class="sxs-lookup"><span data-stu-id="01f68-299">In **Solution Explorer**, right-click the **Scripts** folder of the **GeekQuiz** project and select **Add | New Folder**.</span></span> <span data-ttu-id="01f68-300">Pojmenujte **aplikaci** složky a stiskněte klávesu **ENTER**.</span><span class="sxs-lookup"><span data-stu-id="01f68-300">Name the folder **app** and press **Enter**.</span></span>
4. <span data-ttu-id="01f68-301">Klikněte pravým tlačítkem na složku **aplikace** , kterou jste právě vytvořili, a vyberte **Přidat | JavaScriptový soubor**.</span><span class="sxs-lookup"><span data-stu-id="01f68-301">Right-click the **app** folder you just created and select **Add | JavaScript File**.</span></span>

    ![Vytvoření nového souboru JavaScriptu](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image17.png)

    <span data-ttu-id="01f68-303">*Vytvoření nového souboru JavaScriptu*</span><span class="sxs-lookup"><span data-stu-id="01f68-303">*Creating a new JavaScript file*</span></span>
5. <span data-ttu-id="01f68-304">V dialogovém okně **Zadejte název pro položku** zadejte do textového pole **název položky** *Test Controller* a klikněte na **OK**.</span><span class="sxs-lookup"><span data-stu-id="01f68-304">In the **Specify Name for Item** dialog box, type *quiz-controller* in the **Item name** text box and click **OK**.</span></span>

    ![Pojmenování nového souboru JavaScriptu](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image18.png)

    <span data-ttu-id="01f68-306">*Pojmenování nového souboru JavaScriptu*</span><span class="sxs-lookup"><span data-stu-id="01f68-306">*Naming the new JavaScript file*</span></span>
6. <span data-ttu-id="01f68-307">V souboru **Quiz-Controller. js** přidejte následující kód, který deklaruje a inicializuje kontroler **QuizCtrl** AngularJS.</span><span class="sxs-lookup"><span data-stu-id="01f68-307">In the **quiz-controller.js** file, add the following code to declare and initialize the AngularJS **QuizCtrl** controller.</span></span>

    <span data-ttu-id="01f68-308">(Fragment kódu – *AspNetWebApiSpa-EX2-AngularQuizController*)</span><span class="sxs-lookup"><span data-stu-id="01f68-308">(Code Snippet - *AspNetWebApiSpa - Ex2 - AngularQuizController*)</span></span>

    [!code-javascript[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample17.js)]

    > [!NOTE]
    > <span data-ttu-id="01f68-309">Funkce konstruktoru kontroleru **QuizCtrl** očekává, že je k **dis$Scope**parametr s názvem.</span><span class="sxs-lookup"><span data-stu-id="01f68-309">The constructor function of the **QuizCtrl** controller expects an injectable parameter named **$scope**.</span></span> <span data-ttu-id="01f68-310">Počáteční stav oboru by měl být nastaven ve funkci konstruktoru připojením vlastností k objektu **$Scope** .</span><span class="sxs-lookup"><span data-stu-id="01f68-310">The initial state of the scope should be set up in the constructor function by attaching properties to the **$scope** object.</span></span> <span data-ttu-id="01f68-311">Vlastnosti obsahují **model zobrazení**a budou k dispozici pro šablonu při registraci kontroleru.</span><span class="sxs-lookup"><span data-stu-id="01f68-311">The properties contain the **view model**, and will be accessible to the template when the controller is registered.</span></span>
    > 
    > <span data-ttu-id="01f68-312">Kontroler **QuizCtrl** je definovaný v modulu s názvem **QuizApp**.</span><span class="sxs-lookup"><span data-stu-id="01f68-312">The **QuizCtrl** controller is defined inside a module named **QuizApp**.</span></span> <span data-ttu-id="01f68-313">Moduly jsou jednotky práce, které umožňují rozdělit aplikaci na samostatné součásti.</span><span class="sxs-lookup"><span data-stu-id="01f68-313">Modules are units of work that let you break your application into separate components.</span></span> <span data-ttu-id="01f68-314">Hlavní výhodou použití modulů je, že kód je snazší pochopit a usnadňuje testování částí, jejich použitelnost a udržovatelnost.</span><span class="sxs-lookup"><span data-stu-id="01f68-314">The main advantages of using modules is that the code is easier to understand and facilitates unit testing, reusability and maintainability.</span></span>
7. <span data-ttu-id="01f68-315">Nyní přidáte chování do oboru, aby bylo možné reagovat na události aktivované v zobrazení.</span><span class="sxs-lookup"><span data-stu-id="01f68-315">You will now add behavior to the scope in order to react to events triggered from the view.</span></span> <span data-ttu-id="01f68-316">Přidejte následující kód na konec kontroleru **QuizCtrl** k definování funkce **nextQuestion** v objektu **$Scope** .</span><span class="sxs-lookup"><span data-stu-id="01f68-316">Add the following code at the end of the **QuizCtrl** controller to define the **nextQuestion** function in the **$scope** object.</span></span>

    <span data-ttu-id="01f68-317">(Fragment kódu – *AspNetWebApiSpa-EX2-AngularQuizControllerNextQuestion*)</span><span class="sxs-lookup"><span data-stu-id="01f68-317">(Code Snippet - *AspNetWebApiSpa - Ex2 - AngularQuizControllerNextQuestion*)</span></span>

    [!code-javascript[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample18.js)]

    > [!NOTE]
    > <span data-ttu-id="01f68-318">Tato funkce načte další otázku z webového rozhraní API **minihry** vytvořené v předchozím cvičení a připojí data otázky k objektu **$Scope** .</span><span class="sxs-lookup"><span data-stu-id="01f68-318">This function retrieves the next question from the **Trivia** Web API created in the previous exercise and attaches the question data to the **$scope** object.</span></span>
8. <span data-ttu-id="01f68-319">Vložte následující kód na konec kontroleru **QuizCtrl** k definování funkce **sendAnswer** v objektu **$Scope** .</span><span class="sxs-lookup"><span data-stu-id="01f68-319">Insert the following code at the end of the **QuizCtrl** controller to define the **sendAnswer** function in the **$scope** object.</span></span>

    <span data-ttu-id="01f68-320">(Fragment kódu – *AspNetWebApiSpa-EX2-AngularQuizControllerSendAnswer*)</span><span class="sxs-lookup"><span data-stu-id="01f68-320">(Code Snippet - *AspNetWebApiSpa - Ex2 - AngularQuizControllerSendAnswer*)</span></span>

    [!code-javascript[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample19.js)]

    > [!NOTE]
    > <span data-ttu-id="01f68-321">Tato funkce pošle odpověď vybranou uživatelem k webovému rozhraní API **minihry** a uloží výsledek – to znamená, že pokud odpověď je správná nebo ne – v objektu **$Scope** .</span><span class="sxs-lookup"><span data-stu-id="01f68-321">This function sends the answer selected by the user to the **Trivia** Web API and stores the result –i.e. if the answer is correct or not– in the **$scope** object.</span></span>
    > 
    > <span data-ttu-id="01f68-322">Funkce **nextQuestion** a **sendAnswer** shora výše používají objekt AngularJS **$http** k abstrakci komunikace s webovým rozhraním API prostřednictvím objektu XMLHttpRequest JavaScript z prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="01f68-322">The **nextQuestion** and **sendAnswer** functions from above use the AngularJS **$http** object to abstract the communication with the Web API via the XMLHttpRequest JavaScript object from the browser.</span></span> <span data-ttu-id="01f68-323">AngularJS podporuje další službu, která přináší vyšší úroveň abstrakce k provádění operací CRUD na prostředku prostřednictvím rozhraní RESTful API.</span><span class="sxs-lookup"><span data-stu-id="01f68-323">AngularJS supports another service that brings a higher level of abstraction to perform CRUD operations against a resource through RESTful APIs.</span></span> <span data-ttu-id="01f68-324">Objekt AngularJS **$Resource** obsahuje metody akcí, které poskytují chování vysoké úrovně, aniž by bylo nutné pracovat s objektem **$http** .</span><span class="sxs-lookup"><span data-stu-id="01f68-324">The AngularJS **$resource** object has action methods which provide high-level behaviors without the need to interact with the **$http** object.</span></span> <span data-ttu-id="01f68-325">Zvažte použití objektu **$Resource** ve scénářích, které vyžadují model CRUD (informace o popředí naleznete v [dokumentaci k $Resource](https://docs.angularjs.org/api/ngResource/service/$resource)).</span><span class="sxs-lookup"><span data-stu-id="01f68-325">Consider using the **$resource** object in scenarios that requires the CRUD model (fore information, see the [$resource documentation](https://docs.angularjs.org/api/ngResource/service/$resource)).</span></span>
9. <span data-ttu-id="01f68-326">Dalším krokem je vytvoření šablony AngularJS definující zobrazení kvízu.</span><span class="sxs-lookup"><span data-stu-id="01f68-326">The next step is to create the AngularJS template that defines the view for the quiz.</span></span> <span data-ttu-id="01f68-327">Provedete to tak, že otevřete soubor **index. cshtml** v **zobrazeních | Domovskou** složku a nahraďte obsah následujícím kódem.</span><span class="sxs-lookup"><span data-stu-id="01f68-327">To do this, open the **Index.cshtml** file inside the **Views | Home** folder and replace the content with the following code.</span></span>

    <span data-ttu-id="01f68-328">(Fragment kódu – *AspNetWebApiSpa-EX2-GeekQuizView*)</span><span class="sxs-lookup"><span data-stu-id="01f68-328">(Code Snippet - *AspNetWebApiSpa - Ex2 - GeekQuizView*)</span></span>

    [!code-cshtml[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample20.cshtml)]

    > [!NOTE]
    > <span data-ttu-id="01f68-329">Šablona AngularJS je deklarativní specifikace, která používá informace z modelu a řadiče pro transformaci statických značek do dynamického zobrazení, které uživatel vidí v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="01f68-329">The AngularJS template is a declarative specification that uses information from the model and the controller to transform static markup into the dynamic view that the user sees in the browser.</span></span> <span data-ttu-id="01f68-330">Níže jsou uvedeny příklady elementů AngularJS a atributů elementů, které lze použít v šabloně:</span><span class="sxs-lookup"><span data-stu-id="01f68-330">The following are examples of AngularJS elements and element attributes that can be used in a template:</span></span>
    > 
    > - <span data-ttu-id="01f68-331">Direktiva **NG-App** oznamuje elementu modelu DOM, který představuje kořenový prvek aplikace.</span><span class="sxs-lookup"><span data-stu-id="01f68-331">The **ng-app** directive tells AngularJS the DOM element that represents the root element of the application.</span></span>
    > - <span data-ttu-id="01f68-332">Direktiva **NG-Controller** připojí řadič k modelu DOM v místě, kde je direktiva deklarována.</span><span class="sxs-lookup"><span data-stu-id="01f68-332">The **ng-controller** directive attaches a controller to the DOM at the point where the directive is declared.</span></span>
    > - <span data-ttu-id="01f68-333">Notace složené závorky **{{}}** označuje vazby na vlastnosti oboru definované v kontroleru.</span><span class="sxs-lookup"><span data-stu-id="01f68-333">The curly brace notation **{{ }}** denotes bindings to the scope properties defined in the controller.</span></span>
    > - <span data-ttu-id="01f68-334">Direktiva **kliknutí na NG** se používá k vyvolání funkcí definovaných v oboru v reakci na kliknutí uživatele.</span><span class="sxs-lookup"><span data-stu-id="01f68-334">The **ng-click** directive is used to invoke the functions defined in the scope in response to user clicks.</span></span>
10. <span data-ttu-id="01f68-335">Otevřete soubor **Web. CSS** ve složce **obsahu** a přidejte na konec souboru následující zvýrazněné styly, aby se zobrazil vzhled a chování kvízu.</span><span class="sxs-lookup"><span data-stu-id="01f68-335">Open the **Site.css** file inside the **Content** folder and add the following highlighted styles at the end of the file to provide a look and feel for the quiz view.</span></span>

    <span data-ttu-id="01f68-336">(Fragment kódu – *AspNetWebApiSpa-EX2-GeekQuizStyles*)</span><span class="sxs-lookup"><span data-stu-id="01f68-336">(Code Snippet - *AspNetWebApiSpa - Ex2 - GeekQuizStyles*)</span></span>

    [!code-css[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample21.css)]

<a id="Ex2Task2"></a>
#### <a name="task-2--running-the-solution"></a><span data-ttu-id="01f68-337">Úloha 2 – spuštění řešení</span><span class="sxs-lookup"><span data-stu-id="01f68-337">Task 2 – Running the Solution</span></span>

<span data-ttu-id="01f68-338">V této úloze spustíte řešení pomocí nového uživatelského rozhraní, které jste vytvořili ve službě AngularJS, abyste odpověděli na některé otázky kvízu.</span><span class="sxs-lookup"><span data-stu-id="01f68-338">In this task you will execute the solution using the new user interface you built with AngularJS to answer some of the quiz questions.</span></span>

1. <span data-ttu-id="01f68-339">Stisknutím klávesy **F5** spusťte řešení.</span><span class="sxs-lookup"><span data-stu-id="01f68-339">Press **F5** to run the solution.</span></span>
2. <span data-ttu-id="01f68-340">Zaregistrujte nový uživatelský účet.</span><span class="sxs-lookup"><span data-stu-id="01f68-340">Register a new user account.</span></span> <span data-ttu-id="01f68-341">K tomu použijte postup registrace popsaný v tématu cvičení 1, úloha 3.</span><span class="sxs-lookup"><span data-stu-id="01f68-341">To do this, follow the registration steps described in Exercise 1, Task 3.</span></span>

    > [!NOTE]
    > <span data-ttu-id="01f68-342">Pokud používáte řešení z předchozího cvičení, můžete se přihlásit pomocí uživatelského účtu, který jste vytvořili dříve.</span><span class="sxs-lookup"><span data-stu-id="01f68-342">If you are using the solution from the previous exercise, you can log in with the user account you created before.</span></span>
3. <span data-ttu-id="01f68-343">Zobrazí se **Domovská** stránka, která zobrazuje první otázku kvízu.</span><span class="sxs-lookup"><span data-stu-id="01f68-343">The **Home** page should appear, showing the first question of the quiz.</span></span> <span data-ttu-id="01f68-344">Odpovězte na otázku kliknutím na jednu z možností.</span><span class="sxs-lookup"><span data-stu-id="01f68-344">Answer the question by clicking one of the options.</span></span> <span data-ttu-id="01f68-345">Tím se aktivuje dříve definovaná funkce **sendAnswer** , která pošle vybranou možnost webovému rozhraní API **minihry** .</span><span class="sxs-lookup"><span data-stu-id="01f68-345">This will trigger the **sendAnswer** function defined earlier, which sends the selected option to the **Trivia** Web API.</span></span>

    <span data-ttu-id="01f68-346">![Zodpovězení otázky](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image19.png "Zodpovězení otázky")</span><span class="sxs-lookup"><span data-stu-id="01f68-346">![Answering a question](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image19.png "Answering a question")</span></span>

    <span data-ttu-id="01f68-347">*Zodpovězení otázky*</span><span class="sxs-lookup"><span data-stu-id="01f68-347">*Answering a question*</span></span>
4. <span data-ttu-id="01f68-348">Po kliknutí na jedno z tlačítek by se měla zobrazit odpověď.</span><span class="sxs-lookup"><span data-stu-id="01f68-348">After clicking one of the buttons, the answer should appear.</span></span> <span data-ttu-id="01f68-349">Kliknutím na **Další dotaz** zobrazíte následující otázku.</span><span class="sxs-lookup"><span data-stu-id="01f68-349">Click **Next Question** to show the following question.</span></span> <span data-ttu-id="01f68-350">Tím se aktivuje funkce **nextQuestion** definovaná v kontroleru.</span><span class="sxs-lookup"><span data-stu-id="01f68-350">This will trigger the **nextQuestion** function defined in the controller.</span></span>

    <span data-ttu-id="01f68-351">![Požadavek na další otázku](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image20.png "Požadavek na další otázku")</span><span class="sxs-lookup"><span data-stu-id="01f68-351">![Requesting the next question](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image20.png "Requesting the next question")</span></span>

    <span data-ttu-id="01f68-352">*Požadavek na další otázku*</span><span class="sxs-lookup"><span data-stu-id="01f68-352">*Requesting the next question*</span></span>
5. <span data-ttu-id="01f68-353">Objeví se další otázka.</span><span class="sxs-lookup"><span data-stu-id="01f68-353">The next question should appear.</span></span> <span data-ttu-id="01f68-354">Pokračujte v zodpovězení otázek tolikrát, kolikrát chcete.</span><span class="sxs-lookup"><span data-stu-id="01f68-354">Continue answering questions as many times as you want.</span></span> <span data-ttu-id="01f68-355">Po dokončení všech otázek, které byste měli vracet k první otázce.</span><span class="sxs-lookup"><span data-stu-id="01f68-355">After completing all the questions you should return to the first question.</span></span>

    <span data-ttu-id="01f68-356">![Další otázka](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image21.png "Další otázka")</span><span class="sxs-lookup"><span data-stu-id="01f68-356">![Another question](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image21.png "Another question")</span></span>

    <span data-ttu-id="01f68-357">*Další otázka*</span><span class="sxs-lookup"><span data-stu-id="01f68-357">*Next question*</span></span>
6. <span data-ttu-id="01f68-358">Vraťte se do sady Visual Studio a stisknutím klávesy **SHIFT + F5** Zastavte ladění.</span><span class="sxs-lookup"><span data-stu-id="01f68-358">Go back to Visual Studio and press **SHIFT + F5** to stop debugging.</span></span>

<a id="Ex2Task3"></a>
#### <a name="task-3--creating-a-flip-animation-using-css3"></a><span data-ttu-id="01f68-359">Úloha 3 – vytvoření překlápění animace pomocí CSS3</span><span class="sxs-lookup"><span data-stu-id="01f68-359">Task 3 – Creating a Flip Animation Using CSS3</span></span>

<span data-ttu-id="01f68-360">V této úloze použijete vlastnosti CSS3 k provádění bohatých animací přidáním efektu překlopení, když je otázka zodpovězená a když se načte další otázka.</span><span class="sxs-lookup"><span data-stu-id="01f68-360">In this task you will use CSS3 properties to perform rich animations by adding a flip effect when a question is answered and when the next question is retrieved.</span></span>

1. <span data-ttu-id="01f68-361">V **Průzkumník řešení**klikněte pravým tlačítkem myši na složku **obsahu** projektu **GeekQuiz** a vyberte **Přidat | Existující položka...** .</span><span class="sxs-lookup"><span data-stu-id="01f68-361">In **Solution Explorer**, right-click the **Content** folder of the **GeekQuiz** project and select **Add | Existing Item...**.</span></span>

    <span data-ttu-id="01f68-362">![Přidání existující položky do složky obsahu](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image22.png "Přidání existující položky do složky obsahu")</span><span class="sxs-lookup"><span data-stu-id="01f68-362">![Adding an existing item to the Content folder](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image22.png "Adding an existing item to the Content folder")</span></span>

    <span data-ttu-id="01f68-363">*Přidání existující položky do složky obsahu*</span><span class="sxs-lookup"><span data-stu-id="01f68-363">*Adding an existing item to the Content folder*</span></span>
2. <span data-ttu-id="01f68-364">V dialogovém okně **Přidat existující položku** přejděte do složky **source/assets** a vyberte **převrátit. CSS**.</span><span class="sxs-lookup"><span data-stu-id="01f68-364">In the **Add Existing Item** dialog box, navigate to the **Source/Assets** folder and select **Flip.css**.</span></span> <span data-ttu-id="01f68-365">Klikněte na **Přidat**.</span><span class="sxs-lookup"><span data-stu-id="01f68-365">Click **Add**.</span></span>

    <span data-ttu-id="01f68-366">![Přidání souboru překlopení. CSS z assetů](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image23.png "Přidání souboru překlopení. CSS z assetů")</span><span class="sxs-lookup"><span data-stu-id="01f68-366">![Adding the Flip.css file from Assets](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image23.png "Adding the Flip.css file from Assets")</span></span>

    <span data-ttu-id="01f68-367">*Přidání souboru překlopení. CSS z assetů*</span><span class="sxs-lookup"><span data-stu-id="01f68-367">*Adding the Flip.css file from Assets*</span></span>
3. <span data-ttu-id="01f68-368">Otevřete soubor **překlopení. CSS** , který jste právě přidali, a prozkoumejte jeho obsah.</span><span class="sxs-lookup"><span data-stu-id="01f68-368">Open the **Flip.css** file you just added and inspect its content.</span></span>
4. <span data-ttu-id="01f68-369">Vyhledejte komentář k **převrácení transformace** .</span><span class="sxs-lookup"><span data-stu-id="01f68-369">Locate the **flip transformation** comment.</span></span> <span data-ttu-id="01f68-370">Styly pod tímto komentářem používají **perspektivu** stylů CSS a **otočí** transformace k vygenerování &quot;překlopení&quot;ho efektu na kartu.</span><span class="sxs-lookup"><span data-stu-id="01f68-370">The styles below that comment use the CSS **perspective** and **rotateY** transformations to generate a &quot;card flip&quot; effect.</span></span>

    [!code-css[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample22.css)]
5. <span data-ttu-id="01f68-371">**Při překlápění komentáře Najděte podokno skrýt zpátky** .</span><span class="sxs-lookup"><span data-stu-id="01f68-371">Locate the **hide back of pane during flip** comment.</span></span> <span data-ttu-id="01f68-372">Styl, který je pod tímto komentářem, skryje zadní stranu objektů, pokud se z prohlížeče neodkazují, nastavením vlastnosti CSS pro **viditelnost** pozadí na hodnotu *skrytý*.</span><span class="sxs-lookup"><span data-stu-id="01f68-372">The style below that comment hides the back-side of the faces when they are facing away from the viewer by setting the **backface-visibility** CSS property to *hidden*.</span></span>

    [!code-css[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample23.css)]
6. <span data-ttu-id="01f68-373">Otevřete soubor **BundleConfig.cs** ve složce **App\_Start** a přidejte odkaz na soubor **překlopení. CSS** v sadě **&quot;~/Content/CSS&quot;** Style.</span><span class="sxs-lookup"><span data-stu-id="01f68-373">Open the **BundleConfig.cs** file inside the **App\_Start** folder and add the reference to the **Flip.css** file in the **&quot;~/Content/css&quot;** style bundle</span></span>

    [!code-csharp[Main](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/samples/sample24.cs)]
7. <span data-ttu-id="01f68-374">Stisknutím klávesy **F5** spusťte řešení a přihlaste se pomocí svých přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="01f68-374">Press **F5** to run the solution and log in with your credentials.</span></span>
8. <span data-ttu-id="01f68-375">Odpovězte na otázku tak, že kliknete na jednu z možností.</span><span class="sxs-lookup"><span data-stu-id="01f68-375">Answer a question by clicking one of the options.</span></span> <span data-ttu-id="01f68-376">Všimněte si, že při přechodu mezi zobrazeními se projeví překlopení.</span><span class="sxs-lookup"><span data-stu-id="01f68-376">Notice the flip effect when transitioning between views.</span></span>

    <span data-ttu-id="01f68-377">![Zodpovězení otázky pomocí překlápění efektu](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image24.png "Zodpovězení otázky pomocí překlápění efektu")</span><span class="sxs-lookup"><span data-stu-id="01f68-377">![Answering a question with the flip effect](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image24.png "Answering a question with the flip effect")</span></span>

    <span data-ttu-id="01f68-378">*Zodpovězení otázky pomocí překlápění efektu*</span><span class="sxs-lookup"><span data-stu-id="01f68-378">*Answering a question with the flip effect*</span></span>
9. <span data-ttu-id="01f68-379">Kliknutím na **Další dotaz** načtěte následující otázku.</span><span class="sxs-lookup"><span data-stu-id="01f68-379">Click **Next Question** to retrieve the following question.</span></span> <span data-ttu-id="01f68-380">Efekt překlápění by se měl objevit znovu.</span><span class="sxs-lookup"><span data-stu-id="01f68-380">The flip effect should appear again.</span></span>

    <span data-ttu-id="01f68-381">![Načítání následující otázky s efektem překlápění](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image25.png "Načítání následující otázky s efektem překlápění")</span><span class="sxs-lookup"><span data-stu-id="01f68-381">![Retrieving the following question with the flip effect](build-a-single-page-application-spa-with-aspnet-web-api-and-angularjs/_static/image25.png "Retrieving the following question with the flip effect")</span></span>

    <span data-ttu-id="01f68-382">*Načítání následující otázky s efektem překlápění*</span><span class="sxs-lookup"><span data-stu-id="01f68-382">*Retrieving the following question with the flip effect*</span></span>

---

<a id="Summary"></a>
## <a name="summary"></a><span data-ttu-id="01f68-383">Souhrn</span><span class="sxs-lookup"><span data-stu-id="01f68-383">Summary</span></span>

<span data-ttu-id="01f68-384">Vyplněním tohoto praktického cvičení jste se dozvěděli, jak:</span><span class="sxs-lookup"><span data-stu-id="01f68-384">By completing this hands-on lab you have learned how to:</span></span>

- <span data-ttu-id="01f68-385">Vytvoření kontroleru webového rozhraní API ASP.NET pomocí generování uživatelského rozhraní ASP.NET</span><span class="sxs-lookup"><span data-stu-id="01f68-385">Create an ASP.NET Web API controller using ASP.NET Scaffolding</span></span>
- <span data-ttu-id="01f68-386">Implementací akce webového rozhraní API načíst další otázku kvízu</span><span class="sxs-lookup"><span data-stu-id="01f68-386">Implement a Web API Get action to retrieve the next quiz question</span></span>
- <span data-ttu-id="01f68-387">Implementace akce post webového rozhraní API pro uložení odpovědí kvízu</span><span class="sxs-lookup"><span data-stu-id="01f68-387">Implement a Web API Post action to store the quiz answers</span></span>
- <span data-ttu-id="01f68-388">Instalace AngularJS z konzoly Správce balíčků sady Visual Studio</span><span class="sxs-lookup"><span data-stu-id="01f68-388">Install AngularJS from the Visual Studio Package Manager Console</span></span>
- <span data-ttu-id="01f68-389">Implementace šablon a řadičů AngularJS</span><span class="sxs-lookup"><span data-stu-id="01f68-389">Implement AngularJS templates and controllers</span></span>
- <span data-ttu-id="01f68-390">Použití přechodů CSS3 k provádění animačních efektů</span><span class="sxs-lookup"><span data-stu-id="01f68-390">Use CSS3 transitions to perform animation effects</span></span>
