---
uid: whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application
title: 'Postupy: Přidání mobilních stránek do webových formulářů ASP.NET/aplikace MVC | Microsoft Docs'
author: rick-anderson
description: Tento postup popisuje různé způsoby, jak vydávat stránky optimalizované pro mobilní zařízení z webových formulářů ASP.NET/aplikace MVC a navrhuje architekturu a...
ms.author: riande
ms.date: 01/20/2011
ms.assetid: 3124f28e-cc32-418a-afe3-519fa56f4c36
msc.legacyurl: /whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application
msc.type: content
ms.openlocfilehash: 63c555358d06a9506bb5c8c993800c3307108192
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78572735"
---
# <a name="how-to-add-mobile-pages-to-your-aspnet-web-forms--mvc-application"></a><span data-ttu-id="a4f2a-103">Postup: Přidání mobilních stránek do webových formulářů ASP.NET/aplikace MVC</span><span class="sxs-lookup"><span data-stu-id="a4f2a-103">How To: Add Mobile Pages to Your ASP.NET Web Forms / MVC Application</span></span>

> <span data-ttu-id="a4f2a-104">**Platí pro**</span><span class="sxs-lookup"><span data-stu-id="a4f2a-104">**Applies To**</span></span>
> 
> - <span data-ttu-id="a4f2a-105">Webové formuláře ASP.NET verze 4,0</span><span class="sxs-lookup"><span data-stu-id="a4f2a-105">ASP.NET Web Forms version 4.0</span></span>
> - <span data-ttu-id="a4f2a-106">ASP.NET MVC verze 3,0</span><span class="sxs-lookup"><span data-stu-id="a4f2a-106">ASP.NET MVC version 3.0</span></span>
> 
> <span data-ttu-id="a4f2a-107">**Souhrn**</span><span class="sxs-lookup"><span data-stu-id="a4f2a-107">**Summary**</span></span>
> 
> <span data-ttu-id="a4f2a-108">Tento postup popisuje různé způsoby, jak vydávat stránky optimalizované pro mobilní zařízení z webových formulářů ASP.NET/aplikace MVC, a navrhuje problémy architektury a návrhu, které je potřeba vzít v úvahu při zaměření na širokou škálu zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-108">This How To describes various ways to serve pages optimized for mobile devices from your ASP.NET Web Forms / MVC application, and suggests architectural and design issues to consider when targeting a broad range of devices.</span></span> <span data-ttu-id="a4f2a-109">Tento dokument také vysvětluje, proč jsou ASP.NET mobilní ovládací prvky z ASP.NET 2,0 až 3,5 a popisuje některé moderní alternativy.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-109">This document also explains why the ASP.NET Mobile Controls from ASP.NET 2.0 to 3.5 are now obsolete, and discusses some modern alternatives.</span></span>

## <a name="contents"></a><span data-ttu-id="a4f2a-110">Obsah</span><span class="sxs-lookup"><span data-stu-id="a4f2a-110">Contents</span></span>

- <span data-ttu-id="a4f2a-111">Přehled</span><span class="sxs-lookup"><span data-stu-id="a4f2a-111">Overview</span></span>
- <span data-ttu-id="a4f2a-112">Možnosti architektury</span><span class="sxs-lookup"><span data-stu-id="a4f2a-112">Architectural options</span></span>
- <span data-ttu-id="a4f2a-113">Detekce prohlížečů a zařízení</span><span class="sxs-lookup"><span data-stu-id="a4f2a-113">Browser and device detection</span></span>
- <span data-ttu-id="a4f2a-114">Jak mohou aplikace webových formulářů ASP.NET prezentovat stránky pro mobilní zařízení</span><span class="sxs-lookup"><span data-stu-id="a4f2a-114">How ASP.NET Web Forms applications can present mobile-specific pages</span></span>
- <span data-ttu-id="a4f2a-115">Jak aplikace ASP.NET MVC můžou prezentovat stránky pro mobilní zařízení</span><span class="sxs-lookup"><span data-stu-id="a4f2a-115">How ASP.NET MVC applications can present mobile-specific pages</span></span>
- <span data-ttu-id="a4f2a-116">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="a4f2a-116">Additional resources</span></span>

<span data-ttu-id="a4f2a-117">Ukázky kódu ke stažení, které demonstrují tyto techniky White paper pro ASP.NET webové formuláře i MVC, najdete v tématu [Mobile Apps & weby pomocí ASP.NET](https://docs.microsoft.com/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-117">For downloadable code samples demonstrating this white paper's techniques for both ASP.NET Web Forms and MVC, see [Mobile Apps & Sites with ASP.NET](https://docs.microsoft.com/aspnet/mobile/overview).</span></span>

## <a name="overview"></a><span data-ttu-id="a4f2a-118">Přehled</span><span class="sxs-lookup"><span data-stu-id="a4f2a-118">Overview</span></span>

<span data-ttu-id="a4f2a-119">Mobilní zařízení – smartphony, telefony s funkcemi a tablety – pro přístup k webu můžete dál rozrůstat v oblíbenosti.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-119">Mobile devices – smartphones, feature phones, and tablets – continue to grow in popularity as a means to access the Web.</span></span> <span data-ttu-id="a4f2a-120">Pro mnoho webových vývojářů a web orientovaných společností to znamená, že je stále důležitější zajistit pro návštěvníky používání těchto zařízení skvělý zážitek z procházení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-120">For many web developers and web-oriented businesses, this means it's increasingly important to provide a great browsing experience for visitors using those devices.</span></span>

### <a name="how-earlier-versions-of-aspnet-supported-mobile-browsers"></a><span data-ttu-id="a4f2a-121">Jak dřívější verze ASP.NET podporují mobilní prohlížeče</span><span class="sxs-lookup"><span data-stu-id="a4f2a-121">How earlier versions of ASP.NET supported mobile browsers</span></span>

<span data-ttu-id="a4f2a-122">ASP.NET verze 2,0 až 3,5 zahrnovaly *ASP.NET mobilní ovládací prvky*: sadu serverových ovládacích prvků pro mobilní zařízení v sestavení *System. Web. Mobile. dll* a v oboru názvů *System. Web. UI. MobileControls* .</span><span class="sxs-lookup"><span data-stu-id="a4f2a-122">ASP.NET versions 2.0 to 3.5 included *ASP.NET Mobile Controls*: a set of server controls for mobile devices in the *System.Web.Mobile.dll* assembly and the *System.Web.UI.MobileControls* namespace.</span></span> <span data-ttu-id="a4f2a-123">Sestavení je stále součástí ASP.NET 4, ale je zastaralé.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-123">The assembly is still included in ASP.NET 4, but it is deprecated.</span></span> <span data-ttu-id="a4f2a-124">Vývojářům se doporučuje migrovat na více moderních přístupů, jako jsou ty popsané v tomto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-124">Developers are advised to migrate to more modern approaches, such as those described in this paper.</span></span>

<span data-ttu-id="a4f2a-125">Důvodem, proč jsou ASP.NET mobilní ovládací prvky označeny jako zastaralé, je, že jejich návrh se orientuje na mobilní telefony, které byly běžné přibližně 2005 a starší.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-125">The reason why ASP.NET Mobile Controls have been marked as obsolete is that their design is oriented around the mobile phones that were common around 2005 and earlier.</span></span> <span data-ttu-id="a4f2a-126">Ovládací prvky jsou hlavně navržené pro vykreslení WML nebo cHTML značek (místo obyčejného HTML) pro prohlížeče WAP tohoto období.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-126">The controls are mainly designed to render WML or cHTML markup (instead of regular HTML) for the WAP browsers of that era.</span></span> <span data-ttu-id="a4f2a-127">Ale WAP, WML a cHTML už nejsou relevantní pro většinu projektů, protože HTML se teď stal jazykem všudypřítomný Markup Language pro mobilní a desktopové prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-127">But WAP, WML, and cHTML are no longer relevant for most projects, because HTML has now become the ubiquitous markup language for mobile and desktop browsers alike.</span></span>

### <a name="the-challenges-of-supporting-mobile-devices-today"></a><span data-ttu-id="a4f2a-128">Výzvy k podpoře mobilních zařízení ještě dnes</span><span class="sxs-lookup"><span data-stu-id="a4f2a-128">The challenges of supporting mobile devices today</span></span>

<span data-ttu-id="a4f2a-129">I když v mobilních prohlížečích teď skoro podporuje HTML, pořád se při vytváření skvělého prostředí pro procházení mobilních zařízení projeví i mnoho výzev:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-129">Even though mobile browsers now almost universally support HTML, you will still face many challenges when aiming to create great mobile browsing experiences:</span></span>

- <span data-ttu-id="a4f2a-130">***Velikost obrazovky*** – mobilní zařízení se výrazně liší ve formě a jejich obrazovky jsou často mnohem menší než stolní monitory.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-130">***Screen size*** - Mobile devices vary dramatically in form, and their screens are often much smaller than desktop monitors.</span></span> <span data-ttu-id="a4f2a-131">Proto možná budete muset pro ně navrhovat zcela různá rozložení stránek.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-131">So, you may need to design completely different page layouts for them.</span></span>
- <span data-ttu-id="a4f2a-132">***Metody zadávání*** – některá zařízení mají klávesnice, některé mají tablety, jiné používají dotykové ovládání.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-132">***Input methods*** – Some devices have keypads, some have styluses, others use touch.</span></span> <span data-ttu-id="a4f2a-133">Možná budete muset zvážit několik navigačních mechanismů a metod zadávání dat.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-133">You may need to consider multiple navigation mechanisms and data input methods.</span></span>
- <span data-ttu-id="a4f2a-134">***Dodržování standardů*** – mnoho mobilních prohlížečů nepodporuje nejnovější standardy HTML, CSS a JavaScript.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-134">***Standards compliance*** – Many mobile browsers do not support the latest HTML, CSS, or JavaScript standards.</span></span>
- <span data-ttu-id="a4f2a-135">***Šířka pásma*** – mobilní data v síti se liší v neobvyklém provozu a někteří koncoví uživatelé jsou tarify, které účtují až megabajtů.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-135">***Bandwidth*** – Cellular data network performance varies wildly, and some end users are on tariffs that charge by the megabyte.</span></span>

<span data-ttu-id="a4f2a-136">Není k dispozici žádné řešení s jedním velikostí. vaše aplikace bude muset vypadat a chovat se odlišně v závislosti na zařízení, které k němu přistupuje.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-136">There's no one-size-fits-all solution; your application will have to look and behave differently according to the device accessing it.</span></span> <span data-ttu-id="a4f2a-137">V závislosti na tom, jakou úroveň mobilní podpory požadujete, může to být větší výzva pro webové vývojáře, než je plocha "konflikty prohlížeče".</span><span class="sxs-lookup"><span data-stu-id="a4f2a-137">Depending on what level of mobile support you want, this can be a bigger challenge for web developers than the desktop "browser wars" ever was.</span></span>

<span data-ttu-id="a4f2a-138">Vývojáři, kteří se přistupují k podpoře mobilních prohlížečů poprvé, často považují za důležité, aby podporovali nejnovější a nejpropracovanější smartphony (např. Windows Phone 7, iPhone nebo Android), třeba kvůli tomu, že vývojáři často vlastní takové signalizac.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-138">Developers approaching mobile browser support for the first time often initially think it's only important to support the latest and most sophisticated smartphones (e.g., Windows Phone 7, iPhone, or Android), perhaps because developers often personally own such devices.</span></span> <span data-ttu-id="a4f2a-139">Avšak levnější telefony jsou stále extrémně populární a jejich vlastníci je používají k procházení webu – zejména v zemích, ve kterých je snazší mobilní telefony získat, než širokopásmové připojení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-139">However, cheaper phones are still extremely popular, and their owners do use them to browse the web – especially in countries where mobile phones are easier to get than a broadband connection.</span></span> <span data-ttu-id="a4f2a-140">Vaše firma bude muset rozhodnout, jaké množství zařízení bude podporovat, a to zvážením jeho pravděpodobných zákazníků.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-140">Your business will need to decide what range of devices to support by considering its likely customers.</span></span> <span data-ttu-id="a4f2a-141">Pokud vytváříte online brožuru pro luxus Health Spa, můžete učinit obchodní rozhodnutí jenom pro účely cílení na pokročilé smartphony, zatímco Pokud vytváříte systém rezervace lístků pro kino, pravděpodobně budete potřebovat účet pro návštěvníky s méně výkonnými funkcemi. telefonu.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-141">If you're building an online brochure for a luxury health spa, you might make a business decision only to target advanced smartphones, whereas if you're creating a ticket booking system for a cinema, you probably need to account for visitors with less powerful feature phones.</span></span>

## <a name="architectural-options"></a><span data-ttu-id="a4f2a-142">Možnosti architektury</span><span class="sxs-lookup"><span data-stu-id="a4f2a-142">Architectural options</span></span>

<span data-ttu-id="a4f2a-143">Než se dostanete ke konkrétním technickým podrobnostem o webových formulářích ASP.NET nebo MVC, pamatujte, že vývojáři webu mají všeobecně tři hlavní možné možnosti pro podporu mobilních prohlížečů:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-143">Before we get to the specific technical details of ASP.NET Web Forms or MVC, note that web developers in general have three main possible options for supporting mobile browsers:</span></span>

1. <span data-ttu-id="a4f2a-144">***Nedělat nic –*** Můžete jednoduše vytvořit standardní webovou aplikaci orientovanou na plochu, která se spoléhá na mobilní prohlížeče a vykreslit je přijatelné.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-144">***Do nothing –*** You can simply create a standard, desktop-oriented web application, and rely on mobile browsers to render it acceptably.</span></span> 

    - <span data-ttu-id="a4f2a-145">**Advantage**: Jedná se o možnost nejlevnější k implementaci a údržbě – žádná další práce</span><span class="sxs-lookup"><span data-stu-id="a4f2a-145">**Advantage**: It's the cheapest option to implement and maintain – no extra work</span></span>
    - <span data-ttu-id="a4f2a-146">**Nevýhody**: poskytuje nejhorší prostředí pro koncové uživatele:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-146">**Disadvantage**: Gives the worst end-user experience:</span></span> 

        - <span data-ttu-id="a4f2a-147">Nejnovější smartphony můžou váš kód HTML vykreslovat stejně jako desktopový prohlížeč, ale uživatelé budou pořád nuceně přiblížit a posouvat vodorovně a svisle a využívat obsah na malé obrazovce.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-147">The latest smartphones may render your HTML just as well as a desktop browser, but users will still be forced to zoom and scroll horizontally and vertically to consume your content on a small screen.</span></span> <span data-ttu-id="a4f2a-148">To je mnohem z optimálního.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-148">This is far from optimal.</span></span>
        - <span data-ttu-id="a4f2a-149">Starší zařízení a telefony funkcí se nemusí podařit vykreslit vaše značky uspokojivým způsobem.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-149">Older devices and feature phones may fail to render your markup in a satisfactory way.</span></span>
        - <span data-ttu-id="a4f2a-150">I na nejnovějších zařízeních tabletu (jejichž obrazovky můžou být stejně velká jako obrazovky přenosné počítače), platí různá pravidla interakce.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-150">Even on the latest tablet devices (whose screens can be as big as laptop screens), different interaction rules apply.</span></span> <span data-ttu-id="a4f2a-151">Dotykové ovládání funguje nejlépe s většími tlačítky a vazbami, které jsou dále roztaženy, a neexistuje žádný způsob, jak ukazatel myši nakládat na rozevírací nabídku.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-151">Touch-based input works best with larger buttons and links spread further apart, and there's no way to hover a mouse cursor over a fly-out menu.</span></span>
2. <span data-ttu-id="a4f2a-152">***Řešení problému na klientovi* –** pečlivé používání šablon stylů CSS a [progresivního vylepšení](http://en.wikipedia.org/wiki/Progressive_enhancement) vám umožní vytvořit značky, styly a skripty, které se přizpůsobí libovolnému prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-152">***Solve the problem on the client* –** With careful use of CSS and [progressive enhancement](http://en.wikipedia.org/wiki/Progressive_enhancement) you can create markup, styles, and scripts that adapt to whatever browser is running them.</span></span> <span data-ttu-id="a4f2a-153">Například pomocí [multimediálních dotazů šablon stylů CSS 3](http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/)můžete vytvořit rozložení s více sloupci, které změní na jedno rozložení sloupce na zařízeních, jejichž obrazovky jsou užší než zvolená prahová hodnota.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-153">For example, with [CSS 3 media queries](http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/), you could create a multi-column layout that turns into a single column layout on devices whose screens are narrower than a chosen threshold.</span></span> 

    - <span data-ttu-id="a4f2a-154">**Advantage**: optimalizuje vykreslování pro konkrétní zařízení, které se používá, a to i pro neznámá budoucí zařízení podle toho, jaké charakteristiky obrazovky a vstupu mají.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-154">**Advantage**: Optimizes rendering for the specific device in use, even for unknown future devices according to whatever screen and input characteristics they have</span></span>
    - <span data-ttu-id="a4f2a-155">**Výhoda**: snadno můžete sdílet logiku na straně serveru napříč všemi typy zařízení – minimální duplicita kódu nebo úsilí.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-155">**Advantage**: Easily lets you share server-side logic across all device types – minimal duplication of code or effort</span></span>
    - <span data-ttu-id="a4f2a-156">**Nevýhody**: mobilní zařízení se liší od stolních zařízení, ve kterých můžete chtít, aby se vaše mobilní stránky zcela lišily od stránek na ploše, které zobrazují různé informace.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-156">**Disadvantage**: Mobile devices are so different from desktop devices that you may really want your mobile pages to be completely different from your desktop pages, showing different information.</span></span> <span data-ttu-id="a4f2a-157">Tyto variace můžou být neefektivní nebo neumožňují dosáhnout robustních pouze prostřednictvím šablon stylů CSS, zejména s ohledem na to, jak nekonzistentně starší zařízení interpretují pravidla stylů CSS.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-157">Such variations can be inefficient or impossible to achieve robustly through CSS alone, especially considering how inconsistently older devices interpret CSS rules.</span></span> <span data-ttu-id="a4f2a-158">To platí zejména pro atributy CSS 3.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-158">This is particularly true of CSS 3 attributes.</span></span>
    - <span data-ttu-id="a4f2a-159">**Nevýhody**: poskytuje žádnou podporu pro různé logiky na straně serveru a pracovní postupy pro různá zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-159">**Disadvantage**: Provides no support for varying server-side logic and workflows for different devices.</span></span> <span data-ttu-id="a4f2a-160">Nemůžete například implementovat zjednodušený pracovní postup rezervace nákupního košíku pro mobilní uživatele prostřednictvím šablon stylů CSS samostatně.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-160">You can't, for example, implement a simplified shopping cart checkout workflow for mobile users by means of CSS alone.</span></span>
    - <span data-ttu-id="a4f2a-161">**Nevýhody**: neefektivní využití šířky pásma.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-161">**Disadvantage**: Inefficient bandwidth use.</span></span> <span data-ttu-id="a4f2a-162">Je možné, že budete muset přenést značky a styly, které se vztahují na všechna možná zařízení, a to i v případě, že cílové zařízení použije jenom podmnožinu těchto informací.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-162">You server may have to transmit the markup and styles that apply to all possible devices, even though the target device will only use a subset of that information.</span></span>
3. <span data-ttu-id="a4f2a-163">***Řešení problému na serveru* –** Pokud váš server ví, k čemu má zařízení přístup, nebo alespoň jeho vlastnosti, jako je například velikost obrazovky a vstupní metoda a zda se jedná o mobilní zařízení – může spustit jinou logiku a výstup jiné kódování HTML.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-163">***Solve the problem on the server* –** If your server knows what device is accessing it – or at least the characteristics of that device, such as its screen size and input method, and whether it's a mobile device – it can run different logic and output different HTML markup.</span></span> 

    - <span data-ttu-id="a4f2a-164">**Výhody:** Maximální flexibilita.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-164">**Advantage:** Maximum flexibility.</span></span> <span data-ttu-id="a4f2a-165">Neexistuje žádné omezení na to, kolik je možné měnit logiku na straně serveru pro mobilní zařízení, nebo optimalizovat vaše značky pro požadované rozložení pro konkrétní zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-165">There's no limit to how much you can vary your server-side logic for mobiles or optimize your markup for the desired, device-specific layout.</span></span>
    - <span data-ttu-id="a4f2a-166">**Výhody:** Efektivní využití šířky pásma.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-166">**Advantage:** Efficient bandwidth use.</span></span> <span data-ttu-id="a4f2a-167">Je nutné přenést pouze informace o značkách a stylech, které budou cílové zařízení používat.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-167">You only need to transmit the markup and styling information that the target device is going to use.</span></span>
    - <span data-ttu-id="a4f2a-168">**Nevýhody:** Někdy vynutí opakování úsilí nebo kódu (např. vytváření podobných a mírně odlišných kopií webových formulářů nebo zobrazení MVC).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-168">**Disadvantage:** Sometimes forces repetition of effort or code (e.g., making you create similar but slightly different copies of your Web Forms pages or MVC views).</span></span> <span data-ttu-id="a4f2a-169">Pokud je to možné, provedete si běžnou logiku na podkladovou vrstvu nebo službu, ale stále i některé části kódu uživatelského rozhraní nebo značky mohou být duplikovány a poté udržovány paralelně.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-169">Where possible you will factor out common logic into an underlying layer or service, but still, some parts of your UI code or markup may have to be duplicated and then maintained in parallel.</span></span>
    - <span data-ttu-id="a4f2a-170">**Nevýhody:** Detekce zařízení není triviální.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-170">**Disadvantage:** Device detection is not trivial.</span></span> <span data-ttu-id="a4f2a-171">Vyžaduje seznam nebo databázi známých typů zařízení a jejich charakteristiky (které nemusí vždy být zcela v aktuálním stavu) a nemají zaručené přesné párování všech příchozích požadavků.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-171">It requires a list or database of known device types and their characteristics (which may not always be perfectly up-to-date) and isn't guaranteed to accurately match every incoming request.</span></span> <span data-ttu-id="a4f2a-172">Tento dokument popisuje některé možnosti a jejich nástrah později.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-172">This document describes some options and their pitfalls later.</span></span>

<span data-ttu-id="a4f2a-173">Pro dosažení nejlepších výsledků většina vývojářů potřebuje kombinovat možnosti (2) a (3).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-173">To get the best results, most developers find they need to combine options (2) and (3).</span></span> <span data-ttu-id="a4f2a-174">Drobné stylistické rozdíly jsou na straně klienta nejlépe přizpůsobené pomocí šablon stylů CSS nebo dokonce i JavaScriptu, zatímco hlavní rozdíly v datech, pracovních postupech nebo značkách jsou v kódu na straně serveru nejefektivnější.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-174">Minor stylistic differences are best accommodated on the client using CSS or even JavaScript, whereas major differences in data, workflow, or markup are most effectively implemented in server-side code.</span></span>

### <a name="this-paper-focuses-on-server-side-techniques"></a><span data-ttu-id="a4f2a-175">Tento dokument se zaměřuje na techniky na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-175">This paper focuses on server-side techniques</span></span>

<span data-ttu-id="a4f2a-176">Vzhledem k tomu, že webové formuláře ASP.NET a MVC jsou hlavně technologiemi na straně serveru, tento dokument White Paper se soustředí na techniky na straně serveru, které vám umožní vydávat různé značky a logiku pro mobilní prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-176">Since ASP.NET Web Forms and MVC are both primarily server-side technologies, this white paper will focus on server-side techniques that let you produce different markup and logic for mobile browsers.</span></span> <span data-ttu-id="a4f2a-177">Samozřejmě to můžete také kombinovat s jakoukoli technikou na straně klienta (například dotazy na média CSS 3, progresivní navýšení JavaScript), ale to je více věcí pro návrh webu než ASP.NET vývoj.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-177">Of course, you can also combine this with any client-side technique (e.g., CSS 3 media queries, progressive-enhancement JavaScript), but that's more a matter of web design than ASP.NET development.</span></span>

## <a name="browser-and-device-detection"></a><span data-ttu-id="a4f2a-178">Detekce prohlížečů a zařízení</span><span class="sxs-lookup"><span data-stu-id="a4f2a-178">Browser and device detection</span></span>

<span data-ttu-id="a4f2a-179">Klíčové předpoklady pro všechny techniky na straně serveru pro podporu mobilních zařízení spočívá v tom, jaké zařízení vaše návštěvník používá.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-179">The key prerequisite for all server-side techniques for supporting mobile devices is to know what device your visitor is using.</span></span> <span data-ttu-id="a4f2a-180">Ve skutečnosti je ještě lepší, než když znáte výrobce a model číslo tohoto zařízení, aby znal *charakteristiky* zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-180">In fact, even better than knowing the manufacturer and model number of that device is knowing the *characteristics* of the device.</span></span> <span data-ttu-id="a4f2a-181">Mezi vlastnosti může patřit:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-181">Characteristics may include:</span></span>

- <span data-ttu-id="a4f2a-182">Je mobilní zařízení?</span><span class="sxs-lookup"><span data-stu-id="a4f2a-182">Is it a mobile device?</span></span>
- <span data-ttu-id="a4f2a-183">Input – metoda (myš/klávesnice, dotykové ovládání, klávesnice, pákový ovladač,...)</span><span class="sxs-lookup"><span data-stu-id="a4f2a-183">Input method (mouse/keyboard, touch, keypad, joystick, …)</span></span>
- <span data-ttu-id="a4f2a-184">Velikost obrazovky (fyzicky a v pixelech)</span><span class="sxs-lookup"><span data-stu-id="a4f2a-184">Screen size (physically and in pixels)</span></span>
- <span data-ttu-id="a4f2a-185">Podporovaná média a formáty dat</span><span class="sxs-lookup"><span data-stu-id="a4f2a-185">Supported media and data formats</span></span>
- <span data-ttu-id="a4f2a-186">Atd.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-186">Etc.</span></span>

<span data-ttu-id="a4f2a-187">Je lepší učinit rozhodnutí na základě charakteristik, než je číslo modelu, protože pak budete lépe vybaveni pro zpracování budoucích zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-187">It's better to make decisions based on characteristics than model number, because then you'll be better equipped to handle future devices.</span></span>

### <a name="using-aspnets-built-in-browser-detection-support"></a><span data-ttu-id="a4f2a-188">Pomocí ASP. Podpora detekce integrovaného prohlížeče sítě</span><span class="sxs-lookup"><span data-stu-id="a4f2a-188">Using ASP.NET's built-in browser detection support</span></span>

<span data-ttu-id="a4f2a-189">Webové formuláře ASP.NET a vývojáři MVC můžou okamžitě zjistit důležité charakteristiky v navštíveném prohlížeči, a to zkontrolováním vlastností objektu *Request. browser* .</span><span class="sxs-lookup"><span data-stu-id="a4f2a-189">ASP.NET Web Forms and MVC developers can immediately discover important characteristics of a visiting browser by inspecting properties of the *Request.Browser* object.</span></span> <span data-ttu-id="a4f2a-190">Podívejte se například na</span><span class="sxs-lookup"><span data-stu-id="a4f2a-190">For example, see</span></span>

- <span data-ttu-id="a4f2a-191">Request.Browser.IsMobileDevice</span><span class="sxs-lookup"><span data-stu-id="a4f2a-191">Request.Browser.IsMobileDevice</span></span>
- <span data-ttu-id="a4f2a-192">Request.Browser.MobileDeviceManufacturer, Request.Browser.MobileDeviceModel</span><span class="sxs-lookup"><span data-stu-id="a4f2a-192">Request.Browser.MobileDeviceManufacturer, Request.Browser.MobileDeviceModel</span></span>
- <span data-ttu-id="a4f2a-193">Request. browser. ScreenPixelsWidth</span><span class="sxs-lookup"><span data-stu-id="a4f2a-193">Request.Browser.ScreenPixelsWidth</span></span>
- <span data-ttu-id="a4f2a-194">Request.Browser.SupportsXmlHttp</span><span class="sxs-lookup"><span data-stu-id="a4f2a-194">Request.Browser.SupportsXmlHttp</span></span>
- <span data-ttu-id="a4f2a-195">...a mnoho dalších</span><span class="sxs-lookup"><span data-stu-id="a4f2a-195">…and many others</span></span>

<span data-ttu-id="a4f2a-196">Platforma ASP.NET se na pozadí shoduje s hlavičkou příchozích *uživatelských agentů* (UA) http proti regulárním výrazům v sadě souborů XML s definicí prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-196">Behind the scenes, the ASP.NET platform matches the incoming *User-Agent* (UA) HTTP header against regular expressions in a set of Browser Definition XML files.</span></span> <span data-ttu-id="a4f2a-197">Ve výchozím nastavení platforma obsahuje definice pro řadu běžných mobilních zařízení a můžete přidat vlastní soubory definice prohlížeče pro jiné, které chcete rozpoznat.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-197">By default the platform includes definitions for many common mobile devices, and you can add custom Browser Definition files for others you wish to recognize.</span></span> <span data-ttu-id="a4f2a-198">Další podrobnosti najdete v tématu [ovládací prvky webového serveru MSDN page ASP.NET a možnosti prohlížeče](https://msdn.microsoft.com/library/x3k2ssx2.aspx).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-198">For more details, see the MSDN page [ASP.NET Web Server Controls and Browser Capabilities](https://msdn.microsoft.com/library/x3k2ssx2.aspx).</span></span>

### <a name="using-the-wurfl-device-database-via-51degreesmobi-foundation"></a><span data-ttu-id="a4f2a-199">Používání databáze zařízení WURFL prostřednictvím 51Degrees.mobi Foundation</span><span class="sxs-lookup"><span data-stu-id="a4f2a-199">Using the WURFL device database via 51Degrees.mobi Foundation</span></span>

<span data-ttu-id="a4f2a-200">ASP. Podpora vyhledávání v integrovaném prohlížeči sítě pro spoustu aplikací bude stačit, existují dva hlavní případy, kdy nemusí být k dispozici:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-200">While ASP.NET's built-in browser detection support will be sufficient for many applications, there are two main cases when it might not be enough:</span></span>

- <span data-ttu-id="a4f2a-201">***Chcete rozpoznat nejnovější zařízení***(bez ručního vytváření definičních souborů prohlížeče).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-201">***You want to recognize the latest devices***(without manually creating Browser Definition files for them).</span></span> <span data-ttu-id="a4f2a-202">Upozorňujeme, že soubory definic prohlížeče .NET 4 nejsou dostatečně nedávné pro rozpoznávání Windows Phone 7, telefonů s Androidem, Operau mobilní prohlížeče nebo Apple iPady.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-202">Note that .NET 4's Browser Definition files are not recent enough to recognize Windows Phone 7, Android phones, Opera Mobile browsers, or Apple iPads.</span></span>
- <span data-ttu-id="a4f2a-203">***Potřebujete podrobnější informace o možnostech zařízení***.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-203">***You need more detailed information about device capabilities***.</span></span> <span data-ttu-id="a4f2a-204">Možná budete potřebovat vědět o metodě vstupu zařízení (např. dotykové ovládání) nebo o tom, jaké formáty zvuku prohlížeč podporuje.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-204">You may need to know about a device's input method (e.g., touch vs keypad), or what audio formats the browser supports.</span></span> <span data-ttu-id="a4f2a-205">Tyto informace nejsou k dispozici v standardních definičních souborech prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-205">This information isn't available in the standard Browser Definition files.</span></span>

<span data-ttu-id="a4f2a-206">[Projekt WURFL ( *Wireless Universal Resource File* )](http://wurfl.sourceforge.net/) udržuje mnohem aktuálnější a podrobné informace o mobilních zařízeních, která se v současnosti používají.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-206">The [*Wireless Universal Resource File* (WURFL) project](http://wurfl.sourceforge.net/) maintains much more up-to-date and detailed information about mobile devices in use today.</span></span>

<span data-ttu-id="a4f2a-207">Skvělé novinky pro vývojáře na platformě .NET jsou v prostředí ASP. Funkce detekce prohlížeče sítě je rozšiřitelná, takže je možné ji rozšířit, aby se tyto problémy vyřešily.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-207">The great news for .NET developers is that ASP.NET's browser detection feature is extensible, so it's possible to enhance it to overcome these problems.</span></span> <span data-ttu-id="a4f2a-208">Do projektu můžete například přidat Open Source knihovnu [*51Degrees.mobi Foundation*](https://github.com/51Degrees/dotNET-Device-Detection) .</span><span class="sxs-lookup"><span data-stu-id="a4f2a-208">For example, you can add the open source [*51Degrees.mobi Foundation*](https://github.com/51Degrees/dotNET-Device-Detection) library to your project.</span></span> <span data-ttu-id="a4f2a-209">Je to ASP.NET IHttpModule nebo poskytovatel schopností prohlížeče (použitelné pro webové formuláře i aplikace MVC), které přímo čtou WURFL data a zavěsí je do ASP. Mechanizmus detekce vestavěného prohlížeče sítě.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-209">It's an ASP.NET IHttpModule or Browser Capabilities Provider (usable on both Web Forms and MVC applications), that directly reads WURFL data and hooks it into ASP.NET's built-in browser detection mechanism.</span></span> <span data-ttu-id="a4f2a-210">Po instalaci modulu *Request. browser* bude náhle obsahovat přesnější a podrobné informace: správně rozpozná mnoho dříve zmíněných zařízení a zobrazí seznam jejich schopností (včetně dalších funkcí, jako je například metoda Input).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-210">Once you've installed the module, *Request.Browser* will suddenly contain a lot more accurate and detailed information: it will correctly recognize many of the devices previously mentioned and list their capabilities (including additional capabilities such as input method).</span></span> <span data-ttu-id="a4f2a-211">Další podrobnosti najdete v dokumentaci k projektu.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-211">See the project's documentation for more details.</span></span>

## <a name="how-web-forms-applications-can-present-mobile-specific-pages"></a><span data-ttu-id="a4f2a-212">Jak můžou aplikace webových formulářů prezentovat stránky pro mobilní zařízení</span><span class="sxs-lookup"><span data-stu-id="a4f2a-212">How Web Forms applications can present mobile-specific pages</span></span>

<span data-ttu-id="a4f2a-213">Ve výchozím nastavení tady vidíte, jak se na běžných mobilních zařízeních zobrazují nové aplikace webových formulářů:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-213">By default, here's how a brand new Web Forms application displays on common mobile devices:</span></span>

![](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/_static/image1.png)

<span data-ttu-id="a4f2a-214">Zřejmé, že rozložení vypadá velmi jako mobilní – Tato stránka byla navržena pro velké a orientované monitorování, nikoli pro obrazovku orientovaný na výšku.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-214">Clearly, neither layout looks very mobile-friendly – this page was designed for a large, landscape-oriented monitor, not for a small portrait-oriented screen.</span></span> <span data-ttu-id="a4f2a-215">Co k tomu můžete?</span><span class="sxs-lookup"><span data-stu-id="a4f2a-215">So what can you do about it?</span></span>

<span data-ttu-id="a4f2a-216">Jak je popsáno výše v tomto dokumentu, existuje mnoho způsobů, jak přizpůsobit stránky pro mobilní zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-216">As discussed earlier in this paper, there are many ways to tailor your pages for mobile devices.</span></span> <span data-ttu-id="a4f2a-217">Některé techniky jsou založené na serveru, jiné spouštějí v klientovi.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-217">Some techniques are server-based, others run on the client.</span></span>

### <a name="creating-a-mobile-specific-master-page"></a><span data-ttu-id="a4f2a-218">Vytvoření hlavní stránky specifické pro mobilní zařízení</span><span class="sxs-lookup"><span data-stu-id="a4f2a-218">Creating a mobile-specific master page</span></span>

<span data-ttu-id="a4f2a-219">V závislosti na vašich požadavcích může být možné použít stejné webové formuláře pro všechny návštěvníky, ale mají dvě samostatné stránky předlohy: jeden pro návštěvníky stolních počítačů, druhý pro mobilní návštěvníky.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-219">Depending on your requirements, you may be able to use the same Web Forms for all visitors, but have two separate master pages: one for desktop visitors, another for mobile visitors.</span></span> <span data-ttu-id="a4f2a-220">Tím získáte flexibilitu při změně šablony stylů CSS nebo značek HTML nejvyšší úrovně na možnost mobilní zařízení, aniž byste museli duplikovat libovolnou logiku stránky.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-220">This gives you the flexibility of changing the CSS stylesheet or your top-level HTML markup to suit mobile devices, without forcing you to duplicate any page logic.</span></span>

<span data-ttu-id="a4f2a-221">To je snadné.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-221">This is easy to do.</span></span> <span data-ttu-id="a4f2a-222">Například můžete přidat obslužnou rutinu před inicializací, jako je například následující, do webového formuláře:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-222">For example, you can add a PreInit handler such as the following to a Web Form:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample1.cs)]

<span data-ttu-id="a4f2a-223">Nyní vytvořte hlavní stránku s názvem Mobile. Master ve složce nejvyšší úrovně aplikace a použije se při zjištění mobilního zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-223">Now, create a master page called Mobile.Master in the top-level folder of your application, and it will be used when a mobile device is detected.</span></span> <span data-ttu-id="a4f2a-224">Vaše mobilní Předloha může v případě potřeby odkazovat na šablonu stylů CSS specifickou pro mobilní zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-224">Your mobile master page can reference a mobile-specific CSS stylesheet if necessary.</span></span> <span data-ttu-id="a4f2a-225">Pro návštěvníky plochy se pořád zobrazuje vaše výchozí stránka předlohy, ne mobilní zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-225">Desktop visitors will still see your default master page, not the mobile one.</span></span>

### <a name="creating-independent-mobile-specific-web-forms"></a><span data-ttu-id="a4f2a-226">Vytváření nezávislých webových formulářů specifických pro mobilní zařízení</span><span class="sxs-lookup"><span data-stu-id="a4f2a-226">Creating independent mobile-specific Web Forms</span></span>

<span data-ttu-id="a4f2a-227">Pro zajištění maximální flexibility můžete jít mnohem víc, než jenom samostatné stránky předloh pro různé typy zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-227">For maximum flexibility, you can go much further than just having separate master pages for different device types.</span></span> <span data-ttu-id="a4f2a-228">Můžete implementovat dvě *zcela oddělené sady webových formulářů* – jednu sadu pro desktopové prohlížeče, jinou sadu pro mobilní zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-228">You can implement two *totally separate sets of Web Forms pages* – one set for desktop browsers, another set for mobiles.</span></span> <span data-ttu-id="a4f2a-229">To funguje nejlépe, pokud chcete pro mobilní návštěvníky prezentovat velmi jiné informace nebo pracovní postupy.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-229">This works best if you want to present very different information or workflows to mobile visitors.</span></span> <span data-ttu-id="a4f2a-230">Zbývající část této části popisuje tento přístup podrobněji.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-230">The rest of this section describes this approach in detail.</span></span>

<span data-ttu-id="a4f2a-231">Za předpokladu, že už máte aplikaci webových formulářů navrženou pro stolní počítače, nejjednodušší způsob, jak pokračovat, je vytvořit podsložku s názvem "mobilní" v rámci projektu a vytvořit mobilní stránky tam.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-231">Assuming you already have a Web Forms application designed for desktop browsers, the easiest way to proceed is to create a subfolder called "Mobile" within your project, and build your mobile pages there.</span></span> <span data-ttu-id="a4f2a-232">Můžete sestavit celou podřízenou lokalitu s vlastními stránkami předlohy, šablonami stylů a stránkami, a to pomocí všech stejných technik, které byste použili pro jakoukoli jinou aplikaci webového formuláře.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-232">You can construct an entire sub-site, with its own master pages, style sheets, and pages, using all the same techniques that you'd use for any other Web Forms application.</span></span> <span data-ttu-id="a4f2a-233">Nemusíte nutně vytvořit mobilní ekvivalent pro *každou* stránku na desktopové stránce. Můžete si vybrat, jakou podmnožinu funkcí dává mobilní Návštěvníci smysl.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-233">You don't necessarily need to produce a mobile equivalent for *every* page in your desktop site; you can choose what subset of functionality makes sense for mobile visitors.</span></span>

<span data-ttu-id="a4f2a-234">Vaše mobilní stránky mohou sdílet běžné statické prostředky (například obrázky, JavaScript nebo soubory CSS) s běžnými stránkami, pokud chcete.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-234">Your mobile pages can share common static resources (such as images, JavaScript, or CSS files) with your regular pages if you wish.</span></span> <span data-ttu-id="a4f2a-235">Vzhledem k tomu, že vaše "mobilní" složka nebude označena jako samostatná aplikace, *Pokud je* hostována ve službě IIS (pouze jednoduché Podsložky webových formulářů), bude také sdílet stejnou konfiguraci, data relace a další infrastrukturu jako stránky plochy.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-235">Since your "Mobile" folder will *not* be marked as a separate application when hosted in IIS (it's just a simple subfolder of Web Forms pages), it will also share all the same configuration, Session data, and other infrastructure as your desktop pages.</span></span>

> [!NOTE]
> <span data-ttu-id="a4f2a-236">Vzhledem k tomu, že tento přístup obvykle zahrnuje některé duplicity kódu (mobilní stránky budou nejspíš sdílet některé podobnosti se stránkami na ploše), je důležité vyhodnotit všechny běžné obchodní logiky nebo datové kódy pro přístup do sdílené základní vrstvy nebo služby.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-236">Since this approach usually involves some duplication of code (mobile pages are likely to share some similarities with desktop pages), it's important to factor out any common business logic or data access code into a shared underlying layer or service.</span></span> <span data-ttu-id="a4f2a-237">Jinak budete muset při vytváření a údržbě aplikace zdvojnásobit úsilí.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-237">Otherwise, you'll double the effort of creating and maintaining your application.</span></span>

#### <a name="redirecting-mobile-visitors-to-your-mobile-pages"></a><span data-ttu-id="a4f2a-238">Přesměrování mobilních návštěvníků na mobilní stránky</span><span class="sxs-lookup"><span data-stu-id="a4f2a-238">Redirecting mobile visitors to your mobile pages</span></span>

<span data-ttu-id="a4f2a-239">Je často vhodné přesměrovat mobilní návštěvníky na mobilní stránky jenom na *první* žádost ve své relaci procházení (a ne na každý požadavek ve své relaci), protože:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-239">It's often convenient to redirect mobile visitors to the mobile pages only on the *first* request in their browsing session (and not on every request in their session), because:</span></span>

- <span data-ttu-id="a4f2a-240">Mobilním návštěvníkům pak můžete snadno umožnit přístup k vašim stránkám plochy, pokud si chtějí – Stačí umístit odkaz na stránku předlohy, která se odkazuje na desktopovou verzi.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-240">You can then easily allow mobile visitors to access your desktop pages if they wish – just put a link on your master page that goes to "Desktop version".</span></span> <span data-ttu-id="a4f2a-241">Návštěvník nebude přesměrován zpět na mobilní stránku, protože již není prvním požadavkem ve své relaci.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-241">The visitor won't be redirected back to a mobile page, because it's no longer the first request in their session.</span></span>
- <span data-ttu-id="a4f2a-242">Zabraňuje riziku v narušování požadavků na všechny dynamické prostředky sdílené mezi desktopovou a mobilní částí vaší lokality (například pokud máte společný webový formulář, který se zobrazuje na ploše a mobilní části vaší lokality v prvku IFRAME nebo v určitých obslužných rutinách AJAX).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-242">It avoids the risk of interfering with requests for any dynamic resources shared between desktop and mobile parts of your site (e.g., if you have a common Web Form that both desktop and mobile parts of your site display in an IFRAME, or certain Ajax handlers)</span></span>

<span data-ttu-id="a4f2a-243">K tomu můžete svou logiku přesměrování umístit v **relaci\_spustit** metodu.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-243">To do this, you can place your redirection logic in a **Session\_Start** method.</span></span> <span data-ttu-id="a4f2a-244">Do souboru Global.asax.cs přidejte například následující metodu:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-244">For example, add the following method to your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample2.cs)]

#### <a name="configuring-forms-authentication-to-respect-your-mobile-pages"></a><span data-ttu-id="a4f2a-245">Konfigurace ověřování formulářů pro respektování mobilních stránek</span><span class="sxs-lookup"><span data-stu-id="a4f2a-245">Configuring Forms Authentication to respect your mobile pages</span></span>

<span data-ttu-id="a4f2a-246">Všimněte si, že ověřování prostřednictvím formulářů provádí určité předpoklady, kde může přesměrovat návštěvníky během a po procesu ověřování:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-246">Note that Forms Authentication makes certain assumptions about where it can redirect visitors during and after the authentication process:</span></span>

- <span data-ttu-id="a4f2a-247">Pokud uživatel potřebuje být ověřený, ověřování pomocí formulářů je přesměruje na stránku pro přihlášení k ploše bez ohledu na to, jestli se jedná o stolní nebo mobilní uživatele (protože má jenom koncept *jedné* přihlašovací adresy URL).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-247">When a user needs to be authenticated, Forms Authentication will redirect them to your desktop login page, regardless of whether they're a desktop or mobile user (because it only has a concept of *one* login URL).</span></span> <span data-ttu-id="a4f2a-248">Za předpokladu, že chcete nastavit styl mobilní přihlašovací stránky odlišně, je potřeba vylepšit přihlašovací stránku plochy, aby přesměrovala mobilní uživatele na samostatnou mobilní přihlašovací stránku.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-248">Assuming you want to style your mobile login page differently, you need to enhance your desktop login page so that it redirects mobile users to a separate mobile login page.</span></span> <span data-ttu-id="a4f2a-249">Do kódu přihlašovací stránky na **ploše** můžete například přidat následující kód na pozadí:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-249">For example, add the following code to your **desktop** login page code-behind:</span></span> 

    [!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample3.cs)]
- <span data-ttu-id="a4f2a-250">Až se uživatel úspěšně přihlásí, ověřování pomocí formulářů je ve výchozím nastavení přesměruje na domovskou stránku plochy (protože má jenom koncept *jedné* výchozí stránky).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-250">After a user successfully logs in, Forms Authentication will by default redirect them to your desktop home page (because it only has a concept of *one* default page).</span></span> <span data-ttu-id="a4f2a-251">Musíte vylepšit mobilní přihlašovací stránku tak, aby se přesměrovala na mobilní domovskou stránku po úspěšném přihlášení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-251">You need to enhance your mobile login page so that it redirects to the mobile home page after a successful log-in.</span></span> <span data-ttu-id="a4f2a-252">Přidejte například následující kód na **mobilní** přihlašovací stránku kód na pozadí:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-252">For example, add the following code to your **mobile** login page code-behind:</span></span> 

    [!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample4.cs)]
  
  <span data-ttu-id="a4f2a-253">Tento kód předpokládá, že vaše stránka obsahuje ovládací prvek přihlašovacího serveru s názvem LoginUser, jako v výchozí šabloně projektu.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-253">This code assumes your page has a Login server control called LoginUser, as in the default project template.</span></span>

### <a name="working-with-output-caching"></a><span data-ttu-id="a4f2a-254">Práce s ukládáním výstupu do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="a4f2a-254">Working with Output Caching</span></span>

<span data-ttu-id="a4f2a-255">Pokud používáte ukládání výstupu do mezipaměti, mějte na paměti, že ve výchozím nastavení je možné, aby uživatel klasické pracovní plochy navštívil určitou adresu URL (což způsobilo uložení výstupu do mezipaměti) a potom mobilní uživatel, který obdrží výstup na ploše uložený v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-255">If you're using output caching, beware that by default it's possible for a desktop user to visit a certain URL (causing its output to be cached), followed by a mobile user who then receives the cached desktop output.</span></span> <span data-ttu-id="a4f2a-256">Toto upozornění se týká toho, zda právě měníte hlavní stránku podle typu zařízení nebo když implementujete úplně samostatné webové formuláře na typ zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-256">This warning applies whether you're just varying your master page by device type, or implementing totally separate Web Forms per device type.</span></span>

<span data-ttu-id="a4f2a-257">Chcete-li se tomuto problému vyhnout, můžete ASP.NET změnit položku mezipaměti podle toho, zda návštěvník používá mobilní zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-257">To avoid the problem, you can instruct ASP.NET to vary the cache entry according to whether the visitor is using a mobile device.</span></span> <span data-ttu-id="a4f2a-258">Přidejte parametr hodnota VaryByCustom do deklarace OutputCache vaší stránky následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-258">Add a VaryByCustom parameter to your page's OutputCache declaration as follows:</span></span>

[!code-aspx[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample5.aspx)]

<span data-ttu-id="a4f2a-259">Dále definujte *isMobileDevice* jako parametr vlastní mezipaměti přidáním následujícího přepsání metody do souboru Global.asax.cs:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-259">Next, define *isMobileDevice* as a custom cache parameter by adding the following method override to your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample6.cs)]

<span data-ttu-id="a4f2a-260">Tím zajistíte, aby mobilní Návštěvníci na stránce nedostali výstup, který jste předtím umístili do mezipaměti návštěvníkem plochy.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-260">This will ensure that mobile visitors to the page don't receive output previously put into the cache by a desktop visitor.</span></span>

### <a name="a-working-example"></a><span data-ttu-id="a4f2a-261">Pracovní příklad</span><span class="sxs-lookup"><span data-stu-id="a4f2a-261">A working example</span></span>

<span data-ttu-id="a4f2a-262">Chcete-li zobrazit tyto techniky v akci, Stáhněte si [Tento dokument White Paper Samples Code](https://docs.microsoft.com/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-262">To see these techniques in action, download [this white paper's code samples](https://docs.microsoft.com/aspnet/mobile/overview).</span></span> <span data-ttu-id="a4f2a-263">Ukázková aplikace webových formulářů automaticky přesměruje mobilní uživatele na skupinu stránek specifických pro mobilní zařízení v podsložce s názvem mobilní.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-263">The Web Forms sample application automatically redirects mobile users to a set of mobile-specific pages in a subfolder called Mobile.</span></span> <span data-ttu-id="a4f2a-264">Značky a styly těchto stránek jsou lépe optimalizované pro mobilní prohlížeče, jak vidíte na následujících snímcích obrazovky:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-264">The markup and styling of those pages is better optimized for mobile browsers, as you can see from the following screenshots:</span></span>

![](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/_static/image2.png)

<span data-ttu-id="a4f2a-265">Další tipy k optimalizaci značek a šablon stylů CSS pro mobilní prohlížeče najdete v části "styly mobilních stránek pro mobilní prohlížeče" dále v tomto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-265">For more tips about optimizing your markup and CSS for mobile browsers, see the section "Styling mobile pages for mobile browsers" later in this document.</span></span>

## <a name="how-aspnet-mvc-applications-can-present-mobile-specific-pages"></a><span data-ttu-id="a4f2a-266">Jak aplikace ASP.NET MVC můžou prezentovat stránky pro mobilní zařízení</span><span class="sxs-lookup"><span data-stu-id="a4f2a-266">How ASP.NET MVC applications can present mobile-specific pages</span></span>

<span data-ttu-id="a4f2a-267">Vzhledem k tomu, že vzorek Model-View-Controller odděluje aplikační logiku (v řadičích) z prezentační logiky (v zobrazeních), můžete vybrat některý z následujících přístupů ke zpracování mobilní podpory v kódu na straně serveru:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-267">Since the Model-View-Controller pattern decouples application logic (in controllers) from presentation logic (in views), you can choose from any of the following approaches to handling mobile support in server-side code:</span></span>

1. <span data-ttu-id="a4f2a-268">\***používat stejné řadiče a zobrazení pro stolní i mobilní prohlížeče, ale v závislosti na typu zařízení vykreslí zobrazení v různých rozloženích Razor.**</span><span class="sxs-lookup"><span data-stu-id="a4f2a-268">\***Use the same controllers and views for both desktop and mobile browsers, but render the views with different Razor layouts depending on the device type\*.**</span></span> <span data-ttu-id="a4f2a-269">Tato možnost funguje nejlépe, pokud zobrazujete stejná data na všech zařízeních, ale jednoduše chcete dodat jiné šablony stylů CSS nebo změnit několik prvků HTML na nejvyšší úrovni pro mobilní zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-269">This option works best if you're displaying identical data on all devices, but simply want to supply different CSS stylesheets or change a few top-level HTML elements for mobiles.</span></span>
2. <span data-ttu-id="a4f2a-270">***Používejte stejné řadiče pro stolní i mobilní prohlížeče, ale vykreslete různá zobrazení v závislosti na typu zařízení***.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-270">***Use the same controllers for both desktop and mobile browsers, but render different views depending on the device type***.</span></span> <span data-ttu-id="a4f2a-271">Tato možnost funguje nejlépe, pokud zobrazujete zhruba stejná data a zadáváte stejné pracovní postupy pro koncové uživatele, ale chcete vykreslit velmi různé značky HTML tak, aby vyhovovaly používanému zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-271">This option works best if you're displaying roughly the same data and providing the same workflows for end users, but want to render very different HTML markup to suit the device being used.</span></span>
3. <span data-ttu-id="a4f2a-272">\*\**vytvářet samostatné oblasti pro stolní a mobilní prohlížeče, které implementují nezávislé řadiče a zobrazení pro každou *.**</span><span class="sxs-lookup"><span data-stu-id="a4f2a-272">\***Create separate areas for desktop and mobile browsers, implementing independent controllers and views for each\*.**</span></span> <span data-ttu-id="a4f2a-273">Tato možnost funguje nejlépe, pokud zobrazujete velmi různé obrazovky, které obsahují různé informace a vedoucí uživatele k různým pracovním postupům optimalizovaným pro jejich typ zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-273">This option works best if you're displaying very different screens, containing different information and leading the user through different workflows optimized for their device type.</span></span> <span data-ttu-id="a4f2a-274">Může to znamenat, že došlo k nějakému opakování kódu, ale můžete ho minimalizovat tak, že se běžně vyřadí do příslušné vrstvy nebo služby.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-274">It may mean some repetition of code, but you can minimize that by factoring out common logic into an underlying layer or service.</span></span>

<span data-ttu-id="a4f2a-275">Pokud chcete vzít **první** možnost a měnit pouze rozložení Razor na typ zařízení, je velmi snadné.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-275">If you want to take the **first** option and vary only the Razor layout per device type, it's very easy.</span></span> <span data-ttu-id="a4f2a-276">Pouze upravte soubor \_ViewStart. cshtml následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-276">Just modify your \_ViewStart.cshtml file as follows:</span></span>

[!code-cshtml[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample7.cshtml)]

<span data-ttu-id="a4f2a-277">Nyní můžete vytvořit rozložení specifické pro mobilní zařízení s názvem \_LayoutMobile. cshtml s strukturou stránky a pravidly CSS optimalizovanými pro mobilní zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-277">Now you can create a mobile-specific layout called \_LayoutMobile.cshtml with a page structure and CSS rules optimized for mobile devices.</span></span>

<span data-ttu-id="a4f2a-278">Pokud chcete využít **druhou** možnost, vykreslit v závislosti na typu zařízení návštěvníka úplně různá zobrazení, přečtěte si [Blogový příspěvek Scott Hanselman](http://www.hanselman.com/blog/ABetterASPNETMVCMobileDeviceCapabilitiesViewEngine.aspx).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-278">If you want to take the **second** option render totally different views according to the visitor's device type, see [Scott Hanselman's blog post](http://www.hanselman.com/blog/ABetterASPNETMVCMobileDeviceCapabilitiesViewEngine.aspx).</span></span>

<span data-ttu-id="a4f2a-279">Zbytek tohoto dokumentu se zaměřuje na **třetí** možnost – vytváří samostatné řadiče *a* zobrazení pro mobilní zařízení – takže můžete přesně řídit, jakou sadu funkcí jsou pro mobilní návštěvníky nabízené.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-279">The rest of this paper focuses on the **third** option – creating separate controllers *and* views for mobile devices – so you can control exactly what subset of functionality is offered for mobile visitors.</span></span>

### <a name="setting-up-a-mobile-area-within-your-aspnet-mvc-application"></a><span data-ttu-id="a4f2a-280">Nastavení mobilní oblasti v rámci aplikace ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="a4f2a-280">Setting up a Mobile area within your ASP.NET MVC application</span></span>

<span data-ttu-id="a4f2a-281">Do existující aplikace ASP.NET MVC můžete v normálním způsobu přidat oblast s názvem "mobilní", a to normálním způsobem: klikněte pravým tlačítkem myši na název projektu v Průzkumník řešení a pak zvolte Přidat oblast.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-281">You can add an area called "Mobile" to an existing ASP.NET MVC application in the normal way: right-click on your project name in Solution Explorer, then choose Add à Area.</span></span> <span data-ttu-id="a4f2a-282">Pak můžete přidat řadiče a zobrazení jako v libovolné jiné oblasti aplikace ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-282">You can then add controllers and views as you would for any other area within an ASP.NET MVC application.</span></span> <span data-ttu-id="a4f2a-283">Například přidejte do mobilní oblasti nový kontroler s názvem HomeController, který bude fungovat jako Domovská stránka pro mobilní návštěvníky.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-283">For example, add to your Mobile area a new controller called HomeController to act as a homepage for mobile visitors.</span></span>

### <a name="ensuring-the-url-mobile-reaches-the-mobile-homepage"></a><span data-ttu-id="a4f2a-284">Zajištění, aby adresa URL/Mobilea dosáhla domovské stránky mobilní</span><span class="sxs-lookup"><span data-stu-id="a4f2a-284">Ensuring the URL /Mobile reaches the mobile homepage</span></span>

<span data-ttu-id="a4f2a-285">Pokud chcete, aby se adresa URL/Mobilea k akci indexu v HomeController uvnitř mobilní oblasti, budete muset v konfiguraci směrování udělat dvě malé změny.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-285">If you want the URL /Mobile to reach the Index action on HomeController inside your Mobile area, you will need to make two small changes to your routing configuration.</span></span> <span data-ttu-id="a4f2a-286">Nejprve aktualizujte třídu MobileAreaRegistration tak, aby HomeController je výchozím řadičem v mobilní oblasti, jak je znázorněno v následujícím kódu:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-286">First, update your MobileAreaRegistration class so that HomeController is the default controller in your Mobile area, as shown in the following code:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample8.cs)]

<span data-ttu-id="a4f2a-287">To znamená, že mobilní Domovská stránka se teď bude nacházet na/Mobile místo/Mobile/Home, protože "Home" je teď implicitně výchozím názvem kontroleru pro mobilní stránky.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-287">This means the mobile homepage will now be located at /Mobile, rather than /Mobile/Home, because "Home" is now the implicitly default controller name for mobile pages.</span></span>

<span data-ttu-id="a4f2a-288">Dále si všimněte, že přidání druhého HomeController do aplikace (tj. mobilní zařízení, kromě stávající plochy), budete mít na hlavní domovské stránce přerušenou svou normální plochu.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-288">Next, note that by adding a second HomeController to your application (i.e., the mobile one, in addition to the existing desktop one), you'll have broken your regular desktop homepage.</span></span> <span data-ttu-id="a4f2a-289">Dojde k selhání s chybou "bylo*nalezeno více typů, které odpovídají řadiči s názvem" Home "* ".</span><span class="sxs-lookup"><span data-stu-id="a4f2a-289">It will fail with the error "*Multiple types were found that match the controller named 'Home'*".</span></span> <span data-ttu-id="a4f2a-290">Pokud chcete tento problém vyřešit, aktualizujte konfiguraci směrování na nejvyšší úrovni (v Global.asax.cs), abyste určili, že by měl mít vaše desktopová HomeController přednost při nejednoznačnosti:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-290">To resolve this, update your top-level routing configuration (in Global.asax.cs) to specify that your desktop HomeController should take priority when there's ambiguity:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample9.cs)]

<span data-ttu-id="a4f2a-291">Teď dojde k chybě a adresa URL http:\/\/*yoursite*/se dostane na domovskou stránku na ploše a http:\/\/*yoursite*/Mobile/se dostanete k mobilní domovské stránce.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-291">Now the error will go away, and the URL http:\/\/*yoursite*/ will reach the desktop homepage, and http:\/\/*yoursite*/mobile/ will reach the mobile homepage.</span></span>

### <a name="redirecting-mobile-visitors-to-your-mobile-area"></a><span data-ttu-id="a4f2a-292">Přesměrování mobilních návštěvníků do mobilní oblasti</span><span class="sxs-lookup"><span data-stu-id="a4f2a-292">Redirecting mobile visitors to your mobile area</span></span>

<span data-ttu-id="a4f2a-293">ASP.NET MVC obsahuje mnoho různých bodů rozšiřitelnosti, takže je možné vložit logiku přesměrování mnoha různými způsoby.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-293">There are many different extensibility points in ASP.NET MVC, so there are many possible ways to inject redirection logic.</span></span> <span data-ttu-id="a4f2a-294">Jednou z možností je vytvořit atribut filtru [RedirectMobileDevicesToMobileArea], který provede přesměrování v případě splnění následujících podmínek:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-294">One neat option is to create a filter attribute, [RedirectMobileDevicesToMobileArea], that performs a redirection if the following conditions are met:</span></span>

1. <span data-ttu-id="a4f2a-295">Je to první požadavek v relaci uživatele (tj. Session. IsNewSession Equals true).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-295">It's the first request in the user's session (i.e., Session.IsNewSession equals true)</span></span>
2. <span data-ttu-id="a4f2a-296">Požadavek přichází z mobilního prohlížeče (tj. Request. browser. IsMobileDevice se rovná true).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-296">The request comes from a mobile browser (i.e., Request.Browser.IsMobileDevice equals true)</span></span>
3. <span data-ttu-id="a4f2a-297">Uživatel již nepožaduje prostředek v mobilní oblasti (tj. část *cesty* adresy URL nezačíná na/Mobile).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-297">The user is not already requesting a resource in the mobile area (i.e., the *path* part of the URL does not begin with /Mobile)</span></span>

<span data-ttu-id="a4f2a-298">Ukázka ke stažení, která je součástí tohoto dokumentu White Paper, zahrnuje implementaci této logiky.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-298">The downloadable sample included with this white paper includes an implementation of this logic.</span></span> <span data-ttu-id="a4f2a-299">Implementuje se jako autorizační filtr, který je odvozený od AuthorizeAttribute, což znamená, že může správně fungovat i v případě, že používáte ukládání výstupu do mezipaměti (jinak, pokud návštěvník pro stolní počítače poprvé přistupuje k určité adrese URL, výstup na ploše může být uložený v mezipaměti a pak bude obsluhován Další mobilní Návštěvníci).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-299">It's implemented as an authorization filter, derived from AuthorizeAttribute, which means it can work correctly even if you are using output caching (otherwise, if a desktop visitor first accesses a certain URL, the desktop output might be cached and then served to subsequent mobile visitors).</span></span>

<span data-ttu-id="a4f2a-300">Vzhledem k tomu, že se jedná o filtr, můžete zvolit, že se má použít pro konkrétní řadiče a akce, např.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-300">As it's a filter, you can choose either to apply it to specific controllers and actions, e.g.,</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample10.cs)]

<span data-ttu-id="a4f2a-301">…</span><span class="sxs-lookup"><span data-stu-id="a4f2a-301">…</span></span> <span data-ttu-id="a4f2a-302">nebo ho můžete použít pro všechny řadiče a akce jako *globální filtr* MVC 3 v souboru Global.asax.cs:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-302">or you can apply it to all controllers and actions as an MVC 3 *global filter* in your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample11.cs)]

<span data-ttu-id="a4f2a-303">Ukázka ke stažení také ukazuje, jak lze vytvořit podtřídy tohoto atributu, který přesměruje na konkrétní umístění v mobilní oblasti.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-303">The downloadable sample also demonstrates how you can create subclasses of this attribute that redirect to specific locations within your mobile area.</span></span> <span data-ttu-id="a4f2a-304">To znamená, že můžete například:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-304">This means, for example, you can:</span></span>

- <span data-ttu-id="a4f2a-305">Zaregistrujte globální filtr, jak vidíte výše, který ve výchozím nastavení odesílá mobilním návštěvníkům mobilním stránkám mobilní aplikace.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-305">Register a global filter as shown above that sends mobile visitors to the mobile homepage by default.</span></span>
- <span data-ttu-id="a4f2a-306">Použijte také speciální filtr [RedirectMobileDevicesToMobileProductPage] pro akci "Zobrazit produkt", která přijímají mobilní návštěvníky k mobilní verzi jakékoli stránky produktu, kterou požadoval.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-306">Also apply a special [RedirectMobileDevicesToMobileProductPage] filter to a "view product" action that takes mobile visitors to the mobile version of whatever product page they had requested.</span></span>
- <span data-ttu-id="a4f2a-307">Použít také další speciální podtřídy filtru na konkrétní akce, přesměrování mobilních návštěvníků na ekvivalentní mobilní stránku</span><span class="sxs-lookup"><span data-stu-id="a4f2a-307">Also apply other special subclasses of the filter to specific actions, redirecting mobile visitors to the equivalent mobile page</span></span>

### <a name="configuring-forms-authentication-to-respect-your-mobile-pages"></a><span data-ttu-id="a4f2a-308">Konfigurace ověřování formulářů pro respektování mobilních stránek</span><span class="sxs-lookup"><span data-stu-id="a4f2a-308">Configuring Forms Authentication to respect your mobile pages</span></span>

<span data-ttu-id="a4f2a-309">Pokud používáte ověřování pomocí formulářů, měli byste si uvědomit, že když se uživatel musí přihlásit, automaticky přesměruje uživatele na jednu konkrétní adresu URL pro přihlášení, která je ve výchozím nastavení **/account/LogOn**.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-309">If you're using Forms Authentication, you should note that when a user needs to log in, it automatically redirects the user to a single specific "log on" URL, which by default is **/Account/LogOn**.</span></span> <span data-ttu-id="a4f2a-310">To znamená, že mobilní uživatelé mohou být přesměrováni na akci přihlášení na plochu.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-310">This means that mobile users may be redirected to your desktop "log on" action.</span></span>

<span data-ttu-id="a4f2a-311">Pokud se chcete tomuto problému vyhnout, přidejte do své pracovní plochy logiku pro "přihlášení", aby se mobilní uživatelé znovu přesměroval na mobilní akci "přihlášení".</span><span class="sxs-lookup"><span data-stu-id="a4f2a-311">To avoid this problem, add logic to your desktop "log on" action so that it redirects mobile users again to a mobile "log on" action.</span></span> <span data-ttu-id="a4f2a-312">Pokud používáte výchozí šablonu aplikace ASP.NET MVC, aktualizujte akci přihlášení AccountController následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-312">If you're using the default ASP.NET MVC application template, update AccountController's LogOn action as follows:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample12.cs)]

<span data-ttu-id="a4f2a-313">…</span><span class="sxs-lookup"><span data-stu-id="a4f2a-313">…</span></span> <span data-ttu-id="a4f2a-314">a potom implementujte vhodný mobilní akci "přihlášení" na řadiči s názvem AccountController v mobilní oblasti.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-314">and then implement a suitable mobile-specific "log on" action on a controller called AccountController in your Mobile area.</span></span>

### <a name="working-with-output-caching"></a><span data-ttu-id="a4f2a-315">Práce s ukládáním výstupu do mezipaměti</span><span class="sxs-lookup"><span data-stu-id="a4f2a-315">Working with Output Caching</span></span>

<span data-ttu-id="a4f2a-316">Pokud používáte filtr [OutputCache], musíte vynutit, aby se položka mezipaměti lišila podle typu zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-316">If you're using the [OutputCache] filter, you must force the cache entry to vary by device type.</span></span> <span data-ttu-id="a4f2a-317">Napište například:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-317">For example, write:</span></span>

[!code-javascript[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample13.js)]

<span data-ttu-id="a4f2a-318">Pak do souboru Global.asax.cs přidejte následující metodu:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-318">Then, add the following method to your Global.asax.cs file:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample14.cs)]

<span data-ttu-id="a4f2a-319">Tím zajistíte, aby mobilní Návštěvníci na stránce nedostali výstup, který jste předtím umístili do mezipaměti návštěvníkem plochy.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-319">This will ensure that mobile visitors to the page don't receive output previously put into the cache by a desktop visitor.</span></span>

### <a name="a-working-example"></a><span data-ttu-id="a4f2a-320">Pracovní příklad</span><span class="sxs-lookup"><span data-stu-id="a4f2a-320">A working example</span></span>

<span data-ttu-id="a4f2a-321">Chcete-li zobrazit tyto techniky v akci, Stáhněte si [Tento dokument s ukázkami, které jsou k disknize](https://docs.microsoft.com/aspnet/mobile/overview).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-321">To see these techniques in action, download [this white paper's code associated samples](https://docs.microsoft.com/aspnet/mobile/overview).</span></span> <span data-ttu-id="a4f2a-322">Ukázka zahrnuje aplikaci ASP.NET MVC 3 (Release Candidate) rozšířenou na podporu mobilních zařízení pomocí výše popsaných metod.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-322">The sample includes an ASP.NET MVC 3 (Release Candidate) application enhanced to support mobile devices using the methods described above.</span></span>

## <a name="further-guidance-and-suggestions"></a><span data-ttu-id="a4f2a-323">Další doprovodné materiály a návrhy</span><span class="sxs-lookup"><span data-stu-id="a4f2a-323">Further guidance and suggestions</span></span>

<span data-ttu-id="a4f2a-324">Následující diskuze platí pro webové formuláře i vývojáře MVC, kteří používají techniky popsané v tomto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-324">The following discussion applies both to Web Forms and MVC developers who are using the techniques covered in this document.</span></span>

### <a name="enhancing-your-redirection-logic-using-51degreesmobi-foundation"></a><span data-ttu-id="a4f2a-325">Vylepšení logiky přesměrování pomocí 51Degrees.mobi Foundation</span><span class="sxs-lookup"><span data-stu-id="a4f2a-325">Enhancing your redirection logic using 51Degrees.mobi Foundation</span></span>

<span data-ttu-id="a4f2a-326">Logika přesměrování zobrazená v tomto dokumentu může být pro vaši aplikaci dokonale dostačující, ale nebude fungovat, pokud potřebujete zakázat relace nebo mobilní prohlížeče, které soubory cookie odmítnou (nemůžou mít relace), protože nedokáže zjistit, jestli je daný požadavek první z nich od tohoto návštěvníka.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-326">The redirection logic shown in this document may be perfectly sufficient for your application, but it won't work if you need to disable sessions, or with mobile browsers that reject cookies (these can't have sessions), because it won't know whether a given request is the first one from that visitor.</span></span>

<span data-ttu-id="a4f2a-327">Už jste zjistili, jak může Open Source 51Degrees.mobi Foundation zlepšit přesnost ASP. Detekce prohlížeče sítě.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-327">You already learned how the open source 51Degrees.mobi Foundation can improve the accuracy of ASP.NET's browser detection.</span></span> <span data-ttu-id="a4f2a-328">Má také integrovanou možnost přesměrovat mobilní návštěvníky na konkrétní umístění konfigurovaná v souboru Web. config. Je možné pracovat bez závislosti na ASP.NETch relacích (a tedy souborů cookie) tím, že ukládá dočasný protokol hashů hlaviček protokolu HTTP návštěvníků a IP adres, takže ví, zda je nebo není každý požadavek prvním z daného Vistor.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-328">It also has a built-in ability to redirect mobile visitors to specific locations configured in Web.config. It's able to work without depending on ASP.NET Sessions (and hence cookies) by storing a temporary log of hashes of visitors' HTTP headers and IP addresses, so it knows whether or not each request is the first one from a given vistor.</span></span>

<span data-ttu-id="a4f2a-329">Následující prvek přidaný do oddílu fiftyOne v souboru Web. config přesměruje první požadavek ze zjištěného mobilního zařízení na stránku ~/Mobile/Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-329">The following element added to the fiftyOne section of the web.config file will redirect the first request from a detected mobile device to the page ~/Mobile/Default.aspx.</span></span> <span data-ttu-id="a4f2a-330">Všechny požadavky na stránky v mobilní *složce nebudou* přesměrovány bez ohledu na typ zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-330">Any requests to pages under the Mobile folder will *not* be redirected, regardless of device type.</span></span> <span data-ttu-id="a4f2a-331">Pokud je mobilní zařízení neaktivní po dobu 20 minut nebo více zařízení, bude zapomenuté a následné požadavky budou pro účely přesměrování považovány za nové.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-331">If the mobile device has been inactive for a period of 20 minutes or more the device will be forgotten and subsequent requests will be treated as new ones for the purposes of redirection.</span></span>

[!code-xml[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample15.xml)]

<span data-ttu-id="a4f2a-332">Další podrobnosti najdete v [dokumentaci k 51Degrees.mobi Foundation](https://github.com/51Degrees/dotNET-Device-Detection).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-332">For more details, see [51degrees.mobi Foundation documentation](https://github.com/51Degrees/dotNET-Device-Detection).</span></span>

> [!NOTE]
> <span data-ttu-id="a4f2a-333">Funkci přesměrování 51Degrees.mobi Foundation *můžete* použít pro aplikace ASP.NET MVC, ale budete muset definovat konfiguraci přesměrování z adres URL s běžnými adresami URL, nikoli z podmínek směrování nebo vložením filtrů MVC na akce.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-333">You *can* use 51Degrees.mobi Foundation's redirection feature on ASP.NET MVC applications, but you will need to define your redirection configuration in terms of plain URLs, not in terms of routing parameters or by putting MVC filters on actions.</span></span> <span data-ttu-id="a4f2a-334">Důvodem je to, že (v době psaní) 51Degrees.mobi Foundation nerozpoznává filtry nebo směrování.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-334">This is because (at the time of writing) 51Degrees.mobi Foundation does not recognize filters or routing.</span></span>

### <a name="disabling-transcoders-and-proxy-servers"></a><span data-ttu-id="a4f2a-335">Zakázání TriCaster a proxy serverů</span><span class="sxs-lookup"><span data-stu-id="a4f2a-335">Disabling Transcoders and Proxy Servers</span></span>

<span data-ttu-id="a4f2a-336">Operátoři mobilní sítě mají v přístupu k mobilnímu Internetu dva široké cíle:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-336">Mobile network operators have two broad objectives in their approach to the mobile internet:</span></span>

1. <span data-ttu-id="a4f2a-337">Poskytněte co nejvíce relevantní obsah</span><span class="sxs-lookup"><span data-stu-id="a4f2a-337">Provide as much relevant content as possible</span></span>
2. <span data-ttu-id="a4f2a-338">Maximalizujte počet zákazníků, kteří můžou sdílet omezené síťové šířky sítě.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-338">Maximize the number of customers who can share the limited radio network bandwidth</span></span>

<span data-ttu-id="a4f2a-339">Vzhledem k tomu, že většina webových stránek byla navržena pro velké obrazovky velikosti stolních počítačů a rychlé širokopásmové připojení s pevnou čárou, mnoho operátorů používá *TriCaster* nebo *proxy servery* , které dynamicky mění webový obsah.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-339">Since most web pages were designed for large desktop-sized screens and fast fixed-line broadband connections, many operators use *transcoders* or *proxy servers* that dynamically alter web content.</span></span> <span data-ttu-id="a4f2a-340">Mohou upravit kód HTML nebo šablonu stylů CSS tak, aby odpovídaly menším obrazovkám (zejména u "telefonů s funkcemi", které neobsahovaly výpočetní výkon pro zpracování složitých rozložení), a mohou znovu komprimovat vaše image (významně snížit jejich kvalitu), aby se zvýšila rychlost doručování stránek.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-340">They may modify your HTML markup or CSS to suit smaller screens (especially for "feature phones" that lack the processing power to handle complex layouts), and they may recompress your images (significantly reducing their quality) to improve page delivery speeds.</span></span>

<span data-ttu-id="a4f2a-341">Ale pokud jste se naučili vytvořit mobilní optimalizovanou verzi vašeho webu, nebudete pravděpodobně chtít, aby operátor sítě s ním jakkoli narušil.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-341">But if you've taken the effort to produce a mobile-optimized version of your site, you probably don't want the network operator to interfere with it any further.</span></span> <span data-ttu-id="a4f2a-342">Následující řádek můžete přidat na stránku\_načíst událost do libovolného webového formuláře ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-342">You can add the following line to the Page\_Load event in any ASP.NET Web Form:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample16.cs)]

<span data-ttu-id="a4f2a-343">Nebo pro řadič MVC ASP.NET můžete přidat následující přepsání metody tak, aby platilo pro všechny akce na tomto kontroleru:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-343">Or, for an ASP.NET MVC controller, you could add the following method override so that it applies to all actions on that controller:</span></span>

[!code-csharp[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample17.cs)]

<span data-ttu-id="a4f2a-344">Výsledná zpráva HTTP informuje TriCaster a proxy s podporou standardu W3C, aby neměnily obsah.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-344">The resulting HTTP message informs W3C compliant transcoders and proxies not to alter content.</span></span> <span data-ttu-id="a4f2a-345">Samozřejmě není nijak zaručeno, že budou operátoři mobilní sítě respektovat tuto zprávu.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-345">Of course, there is no guarantee that mobile network operators will respect this message.</span></span>

### <a name="styling-mobile-pages-for-mobile-browsers"></a><span data-ttu-id="a4f2a-346">Stylování mobilních stránek pro mobilní prohlížeče</span><span class="sxs-lookup"><span data-stu-id="a4f2a-346">Styling mobile pages for mobile browsers</span></span>

<span data-ttu-id="a4f2a-347">Je nad rámec tohoto dokumentu, který popisuje skvělé informace o tom, jaké druhy kódu HTML fungují správně nebo které techniky návrhu webu maximalizují použitelnost na konkrétních zařízeních.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-347">It's beyond the scope of this document to describe in great detail what kinds of HTML markup work correctly or which web design techniques maximize usability on particular devices.</span></span> <span data-ttu-id="a4f2a-348">K nalezení dostatečně jednoduchého rozložení optimalizovaného pro obrazovku na mobilní úrovni nepoužívejte nespolehlivé triky umístění HTML nebo CSS.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-348">It's up to you to find a sufficiently simple layout, optimized for a mobile-sized screen, without using unreliable HTML or CSS positioning tricks.</span></span> <span data-ttu-id="a4f2a-349">Jedinou důležitou technikou je, že je však *zobrazení značky meta*.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-349">One important technique worth mentioning, however, is the *viewport meta tag*.</span></span>

<span data-ttu-id="a4f2a-350">Některé moderní mobilní prohlížeče, ve snaze zobrazit webové stránky, které jsou určené pro stolní monitory, vykreslí stránku na virtuálním plátně, která se také označuje jako "zobrazení" (například virtuální zobrazení je 980 pixelů na iPhonu a 850 pixelů v systému Opera Mobile ve výchozím nastavení) a potom umožňuje škálovat výsledek dolů tak, aby se vešel na fyzické pixely obrazovky.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-350">Certain modern mobile browsers, in an effort display web pages meant for desktop monitors, render the page on a virtual canvas, also called "viewport" (e.g., the virtual viewport is 980 pixels wide on iPhone, and 850 pixels wide on Opera Mobile by default) and then scale the result down to fit onto the screen's physical pixels.</span></span> <span data-ttu-id="a4f2a-351">Uživatel si pak může toto zobrazení zvětšit a posunout.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-351">The user can then zoom in and pan around that viewport.</span></span> <span data-ttu-id="a4f2a-352">Tato výhoda má tu výhodu, že umožňuje prohlížeči zobrazit stránku v jejím zamýšleném rozložení, ale má také nevýhodu, že vynucuje přiblížení a posouvání, což pro uživatele nevyhovuje.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-352">This has the advantage that it lets the browser display the page in its intended layout, but it's also has the disadvantage that it forces zooming and panning, which is inconvenient for the user.</span></span> <span data-ttu-id="a4f2a-353">Pokud navrhujete mobilní zařízení, je lepší navrhovat pro užší obrazovku, takže není potřeba žádné přiblížení ani horizontální posouvání.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-353">If you're designing for mobile, it's better to design for a narrow screen so that no zooming or horizontal scrolling is necessary.</span></span>

<span data-ttu-id="a4f2a-354">Způsob, jak sdělit mobilnímu prohlížeči, jak velký má být zobrazení prostřednictvím nestandardního *zobrazení* značky meta.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-354">A way to tell the mobile browser how wide the viewport should be is through the nonstandard *viewport* meta tag.</span></span> <span data-ttu-id="a4f2a-355">Pokud například do sekce HEAD stránky přidáte následující:,</span><span class="sxs-lookup"><span data-stu-id="a4f2a-355">For example, if you add the following to your page's HEAD section,</span></span>

[!code-html[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample18.html)]

<span data-ttu-id="a4f2a-356">…</span><span class="sxs-lookup"><span data-stu-id="a4f2a-356">…</span></span> <span data-ttu-id="a4f2a-357">pak se podpora prohlížečů smartphone rozloží na stránku na virtuálním plátně na šířku 480 pixelů.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-357">then supporting smartphone browsers will lay out the page on a 480-pixel wide virtual canvas.</span></span> <span data-ttu-id="a4f2a-358">To znamená, že pokud vaše prvky HTML definují své šířky v procentech, budou se tyto procentní hodnoty interpretovat s ohledem na tuto šířku 480 pixelů, nikoli na výchozí šířku zobrazení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-358">This means that if your HTML elements define their widths in percentage terms, the percentages will be interpreted with respect to this 480-pixel width, not the default viewport width.</span></span> <span data-ttu-id="a4f2a-359">V důsledku toho je pravděpodobnost, že se uživatel bude muset přiblížit do horizontálního měřítka a výrazně zlepšit možnosti procházení mobilních zařízení.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-359">As a result, the user is less likely to have to zoom and pan horizontally – considerably improving the mobile browsing experience.</span></span>

<span data-ttu-id="a4f2a-360">Pokud chcete, aby se šířka zobrazení shodovala s fyzickými obrazovými body zařízení, můžete zadat následující:</span><span class="sxs-lookup"><span data-stu-id="a4f2a-360">If you want the viewport width to match the device's physical pixels, you can specify the following:</span></span>

[!code-html[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample19.html)]

<span data-ttu-id="a4f2a-361">Aby to fungovalo správně, je nutné explicitně vynutit, aby prvky převyšuje tuto šířku (např. pomocí atributu *Width* nebo vlastnosti CSS), jinak bude mít prohlížeč nuceně používat větší zobrazení bez ohledu na to, co je potřeba.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-361">For this to work correctly, you must not explicitly force elements to exceed that width (e.g., using a *width* attribute or CSS property), otherwise the browser will be forced to use a larger viewport regardless.</span></span> <span data-ttu-id="a4f2a-362">Viz také: [Další podrobnosti o nestandardním tagu zobrazení](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-362">See also: [more details about the nonstandard viewport tag](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html).</span></span>

<span data-ttu-id="a4f2a-363">Většina moderních telefonů Smartphone podporuje *duální orientaci*: můžou se uchovávat v režimu na výšku nebo na šířku.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-363">Most modern smartphones support *dual orientation*: they can be held in either portrait or landscape mode.</span></span> <span data-ttu-id="a4f2a-364">Proto je důležité nevytvářet předpoklady o šířce obrazovky v pixelech.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-364">So, it's important not to make assumptions about the screen width in pixels.</span></span> <span data-ttu-id="a4f2a-365">Ani Nepředpokládáme, že je šířka obrazovky pevná, protože uživatel může změnit orientaci zařízení, když jsou na vaší stránce.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-365">Don't even assume that the screen width is fixed, because the user can re-orient their device while they are on your page.</span></span>

<span data-ttu-id="a4f2a-366">Starší zařízení se systémem Windows Mobile a BlackBerry mohou také v záhlaví stránky přijmout následující značky meta, aby byly informace o tom, že jsou optimalizovány pro mobilní zařízení, a proto by neměly být transformovány.</span><span class="sxs-lookup"><span data-stu-id="a4f2a-366">Older Windows Mobile and Blackberry devices may also accept the following meta tags in the page header to inform them content has been optimized for mobile and therefore should not be transformed.</span></span>

[!code-html[Main](add-mobile-pages-to-your-aspnet-web-forms-mvc-application/samples/sample20.html)]

## <a name="additional-resources"></a><span data-ttu-id="a4f2a-367">Další prostředky</span><span class="sxs-lookup"><span data-stu-id="a4f2a-367">Additional Resources</span></span>

<span data-ttu-id="a4f2a-368">Seznam emulátorů a simulátorů mobilních zařízení, které můžete použít k otestování webové aplikace Mobile ASP.NET, najdete na stránce [simulace oblíbených mobilních zařízení pro účely testování](../mobile/device-simulators.md).</span><span class="sxs-lookup"><span data-stu-id="a4f2a-368">For a list of mobile device emulators and simulators you can use to test your mobile ASP.NET web application, see the page [Simulate popular mobile devices for testing](../mobile/device-simulators.md).</span></span>

## <a name="credits"></a><span data-ttu-id="a4f2a-369">Kredity</span><span class="sxs-lookup"><span data-stu-id="a4f2a-369">Credits</span></span>

- <span data-ttu-id="a4f2a-370">Primární autor: Steven Sanderson</span><span class="sxs-lookup"><span data-stu-id="a4f2a-370">Primary author: Steven Sanderson</span></span>
- <span data-ttu-id="a4f2a-371">Revidující/další zapisovače obsahu: James Rosewell, Mikael Söderström, Scott Hanselman, Scott Hunterem</span><span class="sxs-lookup"><span data-stu-id="a4f2a-371">Reviewers / additional content writers: James Rosewell, Mikael Söderström, Scott Hanselman, Scott Hunter</span></span>
