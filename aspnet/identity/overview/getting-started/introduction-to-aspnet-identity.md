---
uid: identity/overview/getting-started/introduction-to-aspnet-identity
title: Úvod do ASP.NET Identity-ASP.NET 4. x
author: jongalloway
description: Systém členství v ASP.NET byl představený s ASP.NET 2,0 zpátky v 2005 a od té doby existovala mnoho změn v různých způsobech, proč se webové aplikace typický...
ms.author: riande
ms.date: 01/22/2019
ms.assetid: 38717fc1-5989-43cf-952d-4007cc1dd923
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/getting-started/introduction-to-aspnet-identity
msc.type: authoredcontent
ms.openlocfilehash: 0268dfc16cd2cfb1e79ee14997a4c5eb247af950
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78583844"
---
# <a name="introduction-to-aspnet-identity"></a><span data-ttu-id="d722a-103">Úvod do ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="d722a-103">Introduction to ASP.NET Identity</span></span>

> <span data-ttu-id="d722a-104">Systém členství v ASP.NET byl představený s ASP.NET 2,0 zpátky v 2005 a od té doby existovala mnoho změn v tom, jak webové aplikace obvykle zpracovávají ověřování a autorizaci.</span><span class="sxs-lookup"><span data-stu-id="d722a-104">The ASP.NET membership system was introduced with ASP.NET 2.0 back in 2005, and since then there have been many changes in the ways web applications typically handle authentication and authorization.</span></span> <span data-ttu-id="d722a-105">ASP.NET Identity je nový pohled na to, jaký systém členství by měl být při vytváření moderních aplikací pro web, telefon nebo tablet.</span><span class="sxs-lookup"><span data-stu-id="d722a-105">ASP.NET Identity is a fresh look at what the membership system should be when you are building modern applications for the web, phone, or tablet.</span></span>

## <a name="background-membership-in-aspnet"></a><span data-ttu-id="d722a-106">Pozadí: členství v ASP.NET</span><span class="sxs-lookup"><span data-stu-id="d722a-106">Background: Membership in ASP.NET</span></span>

### <a name="aspnet-membership"></a><span data-ttu-id="d722a-107">Členství v ASP.NET</span><span class="sxs-lookup"><span data-stu-id="d722a-107">ASP.NET Membership</span></span>

<span data-ttu-id="d722a-108">[Členství v ASP.NET](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) bylo navrženo pro řešení požadavků na členství v lokalitě, které byly běžné v 2005, které zahrnovaly ověřování pomocí formulářů, a SQL Server databáze pro uživatelská jména, hesla a data profilu.</span><span class="sxs-lookup"><span data-stu-id="d722a-108">[ASP.NET Membership](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) was designed to solve site membership requirements that were common in 2005, which involved Forms Authentication, and a SQL Server database for user names, passwords, and profile data.</span></span> <span data-ttu-id="d722a-109">Dnes existuje mnohem širší škála možností úložiště dat pro webové aplikace a většina vývojářů chce povolit svým webům používat poskytovatele sociálních identit k ověřování a autorizaci funkcí.</span><span class="sxs-lookup"><span data-stu-id="d722a-109">Today there is a much broader array of data storage options for web applications, and most developers want to enable their sites to use social identity providers for authentication and authorization functionality.</span></span> <span data-ttu-id="d722a-110">Omezení návrhu členství v ASP.NET je obtížné převést:</span><span class="sxs-lookup"><span data-stu-id="d722a-110">The limitations of ASP.NET Membership's design make this transition difficult:</span></span>

- <span data-ttu-id="d722a-111">Schéma databáze bylo navrženo pro SQL Server a nelze je změnit.</span><span class="sxs-lookup"><span data-stu-id="d722a-111">The database schema was designed for SQL Server and you can't change it.</span></span> <span data-ttu-id="d722a-112">Můžete přidat informace o profilu, ale další data se zabalí do jiné tabulky, což ztěžuje přístup jakýmkoli prostředkem s výjimkou rozhraní API pro poskytovatele profilu.</span><span class="sxs-lookup"><span data-stu-id="d722a-112">You can add profile information, but the additional data is packed into a different table, which makes it difficult to access by any means except through the Profile Provider API.</span></span>
- <span data-ttu-id="d722a-113">Systém poskytovatele vám umožňuje změnit úložiště zálohovaných dat, ale systém je navržený na základě předpokladů, které jsou vhodné pro relační databázi.</span><span class="sxs-lookup"><span data-stu-id="d722a-113">The provider system enables you to change the backing data store, but the system is designed around assumptions appropriate for a relational database.</span></span> <span data-ttu-id="d722a-114">Můžete napsat poskytovatele pro ukládání informací o členství v nerelačním mechanismu úložiště, jako je například Azure Storage tabulky, ale je nutné obejít relační návrh tak, že napíšete mnohem kód a spoustu `System.NotImplementedException` výjimek pro metody, které neplatí pro databáze NoSQL.</span><span class="sxs-lookup"><span data-stu-id="d722a-114">You can write a provider to store membership information in a non-relational storage mechanism, such as Azure Storage Tables, but then you have to work around the relational design by writing much code and a lot of `System.NotImplementedException` exceptions for methods that don't apply to NoSQL databases.</span></span>
- <span data-ttu-id="d722a-115">Vzhledem k tomu, že funkce přihlášení a přihlášení jsou založené na ověřování pomocí formulářů, nemůže systém členství používat [Owin](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span><span class="sxs-lookup"><span data-stu-id="d722a-115">Since the log-in/log-out functionality is based on Forms Authentication, the membership system can't use [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span></span> <span data-ttu-id="d722a-116">OWIN zahrnuje komponenty middlewaru pro ověřování, včetně podpory pro protokoly pomocí externích zprostředkovatelů identity (jako jsou účty Microsoft, Facebook, Google, Twitter) a přihlášení pomocí účtů organizace z místní služby Active Directory nebo Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d722a-116">OWIN includes middleware components for authentication, including support for log-ins using external identity providers (like Microsoft Accounts, Facebook, Google, Twitter), and log-ins using organizational accounts from on-premises Active Directory or Azure Active Directory.</span></span> <span data-ttu-id="d722a-117">OWIN také zahrnuje podporu OAuth 2,0, JWT a CORS.</span><span class="sxs-lookup"><span data-stu-id="d722a-117">OWIN also includes support for OAuth 2.0, JWT and CORS.</span></span>

### <a name="aspnet-simple-membership"></a><span data-ttu-id="d722a-118">ASP.NET jednoduché členství</span><span class="sxs-lookup"><span data-stu-id="d722a-118">ASP.NET Simple Membership</span></span>

<span data-ttu-id="d722a-119">[ASP.NET jednoduché členství](../../../web-pages/overview/security/16-adding-security-and-membership.md) bylo vyvinuto jako systém členství pro webové stránky ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d722a-119">[ASP.NET simple membership](../../../web-pages/overview/security/16-adding-security-and-membership.md) was developed as a membership system for ASP.NET Web Pages.</span></span> <span data-ttu-id="d722a-120">Byl vydaný pomocí WebMatrixu a sady Visual Studio 2010 SP1.</span><span class="sxs-lookup"><span data-stu-id="d722a-120">It was released with WebMatrix and Visual Studio 2010 SP1.</span></span> <span data-ttu-id="d722a-121">Cílem jednoduchého členství bylo usnadnit přidávání funkcí členství do aplikace webové stránky.</span><span class="sxs-lookup"><span data-stu-id="d722a-121">The goal of Simple Membership was to make it easy to add membership functionality to a Web Pages application.</span></span>

<span data-ttu-id="d722a-122">Jednoduché členství usnadňuje přizpůsobení informací o profilu uživatele, ale stále sdílí ostatní problémy se členstvím v ASP.NET a má určitá omezení:</span><span class="sxs-lookup"><span data-stu-id="d722a-122">Simple Membership did make it easier to customize user profile information, but it still shares the other problems with ASP.NET Membership, and it has some limitations:</span></span>

- <span data-ttu-id="d722a-123">Je těžké zachovat systémová data v nerelačním úložišti.</span><span class="sxs-lookup"><span data-stu-id="d722a-123">It was hard to persist membership system data in a non-relational store.</span></span>
- <span data-ttu-id="d722a-124">Nemůžete ho použít s OWIN.</span><span class="sxs-lookup"><span data-stu-id="d722a-124">You can't use it with OWIN.</span></span>
- <span data-ttu-id="d722a-125">Nefunguje dobře se stávajícími poskytovateli členství ASP.NET a není rozšiřitelný.</span><span class="sxs-lookup"><span data-stu-id="d722a-125">It doesn't work well with existing ASP.NET Membership providers, and it's not extensible.</span></span>

### <a name="aspnet-universal-providers"></a><span data-ttu-id="d722a-126">ASP.NET Universal Providers</span><span class="sxs-lookup"><span data-stu-id="d722a-126">ASP.NET Universal Providers</span></span>

<span data-ttu-id="d722a-127">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) byly vyvinuty tak, aby bylo možné uchovávat informace o členství v Microsoft Azure SQL Database a také pracují s SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="d722a-127">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) were developed to make it possible to persist membership information in Microsoft Azure SQL Database, and they also work with SQL Server Compact.</span></span> <span data-ttu-id="d722a-128">Univerzální poskytovatelé byli postaveni na Entity Framework Code First, což znamená, že univerzální poskytovatelé lze použít k uchovávání dat v jakémkoli úložišti podporovaném EF.</span><span class="sxs-lookup"><span data-stu-id="d722a-128">The Universal Providers were built on Entity Framework Code First, which means that the Universal Providers can be used to persist data in any store supported by EF.</span></span> <span data-ttu-id="d722a-129">U univerzálních zprostředkovatelů se schéma databáze vyčistilo i hodně.</span><span class="sxs-lookup"><span data-stu-id="d722a-129">With the Universal Providers, the database schema was cleaned up quite a lot as well.</span></span>

<span data-ttu-id="d722a-130">Univerzální poskytovatelé jsou postaveni na infrastruktuře členství v ASP.NET, takže stále mají stejná omezení jako poskytovatel SqlMembership.</span><span class="sxs-lookup"><span data-stu-id="d722a-130">The Universal Providers are built on the ASP.NET Membership infrastructure, so they still carry the same limitations as the SqlMembership Provider.</span></span> <span data-ttu-id="d722a-131">To znamená, že byly navržené pro relační databáze a je obtížné přizpůsobit profil a informace o uživateli.</span><span class="sxs-lookup"><span data-stu-id="d722a-131">That is, they were designed for relational databases and it's hard to customize profile and user information.</span></span> <span data-ttu-id="d722a-132">Tito zprostředkovatelé také stále používají ověřování pomocí formulářů pro funkce přihlášení a odhlášení.</span><span class="sxs-lookup"><span data-stu-id="d722a-132">These providers also still use Forms Authentication for sign-in and sign-out functionality.</span></span>

## <a name="aspnet-identity"></a><span data-ttu-id="d722a-133">ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="d722a-133">ASP.NET Identity</span></span>

<span data-ttu-id="d722a-134">Vzhledem k tom, že příběh členů v ASP.NET se vyvinulo v průběhu let, tým ASP.NET od zákazníků dozvěděl spoustu názoru.</span><span class="sxs-lookup"><span data-stu-id="d722a-134">As the membership story in ASP.NET has evolved over the years, the ASP.NET team has learned a lot from feedback from customers.</span></span>

<span data-ttu-id="d722a-135">Předpokladem, že se uživatelé přihlásí zadáním uživatelského jména a hesla, které zaregistrovali ve vaší vlastní aplikaci, již nejsou platné.</span><span class="sxs-lookup"><span data-stu-id="d722a-135">The assumption that users will sign in by entering a user name and password that they have registered in your own application is no longer valid.</span></span> <span data-ttu-id="d722a-136">Web se stalější sociální.</span><span class="sxs-lookup"><span data-stu-id="d722a-136">The web has become more social.</span></span> <span data-ttu-id="d722a-137">Uživatelé vzájemně vzájemně pracují v reálném čase prostřednictvím sociálních kanálů, jako jsou Facebook, Twitter a další sociální weby.</span><span class="sxs-lookup"><span data-stu-id="d722a-137">Users are interacting with each other in real time through social channels such as Facebook, Twitter, and other social web sites.</span></span> <span data-ttu-id="d722a-138">Vývojáři chtějí, aby se uživatelé mohli přihlašovat pomocí svých sociálních identit, aby mohli mít na svých webech bohatou činnost.</span><span class="sxs-lookup"><span data-stu-id="d722a-138">Developers want users to be able to sign in with their social identities so that they can have a rich experience on their web sites.</span></span> <span data-ttu-id="d722a-139">Moderní systém členství musí umožňovat přihlašování na základě přesměrování na zprostředkovatele ověřování, jako je Facebook, Twitter a další.</span><span class="sxs-lookup"><span data-stu-id="d722a-139">A modern membership system must enable redirection-based log-ins to authentication providers such as Facebook, Twitter, and others.</span></span>

<span data-ttu-id="d722a-140">Vývoj webů byl vyvinutý, takže jsme měli vzory vývoje webů.</span><span class="sxs-lookup"><span data-stu-id="d722a-140">As web development evolved, so did the patterns of web development.</span></span> <span data-ttu-id="d722a-141">Testování částí kódu aplikace se stalo základním problémem pro vývojáře aplikací.</span><span class="sxs-lookup"><span data-stu-id="d722a-141">Unit testing of application code became a core concern for application developers.</span></span> <span data-ttu-id="d722a-142">V 2008 ASP.NET bylo přidáno nové rozhraní založené na vzoru MVC (Model-View-Controller), v rámci kterého mohou vývojáři pomáhat vývojářům při sestavování aplikací ASP.NET jednotek testovatelné.</span><span class="sxs-lookup"><span data-stu-id="d722a-142">In 2008 ASP.NET added a new framework based on the Model-View-Controller (MVC) pattern, in part to help developers build unit testable ASP.NET applications.</span></span> <span data-ttu-id="d722a-143">Vývojáři, kteří chtěli testovat svou logiku aplikace, také chtěli být schopni to udělat se systémem členství.</span><span class="sxs-lookup"><span data-stu-id="d722a-143">Developers who wanted to unit test their application logic also wanted to be able to do that with the membership system.</span></span>

<span data-ttu-id="d722a-144">S ohledem na tyto změny vývoje webových aplikací bylo ASP.NET Identity vyvinuto s následujícími cíli:</span><span class="sxs-lookup"><span data-stu-id="d722a-144">Considering these changes in web application development, ASP.NET Identity was developed with the following goals:</span></span>

- <span data-ttu-id="d722a-145">**Jeden ASP.NET Identity systém**</span><span class="sxs-lookup"><span data-stu-id="d722a-145">**One ASP.NET Identity system**</span></span>

    - <span data-ttu-id="d722a-146">ASP.NET Identity lze použít se všemi ASP.NET architekturami, jako jsou ASP.NET MVC, webové formuláře, webové stránky, webové rozhraní API a Signal.</span><span class="sxs-lookup"><span data-stu-id="d722a-146">ASP.NET Identity can be used with all of the ASP.NET frameworks, such as ASP.NET MVC, Web Forms, Web Pages, Web API, and SignalR.</span></span>
    - <span data-ttu-id="d722a-147">ASP.NET Identity lze použít při vytváření webů, telefonů, obchodů nebo hybridních aplikací.</span><span class="sxs-lookup"><span data-stu-id="d722a-147">ASP.NET Identity can be used when you are building web, phone, store, or hybrid applications.</span></span>
- <span data-ttu-id="d722a-148">**Snadné zapojení do profilových dat o uživateli**</span><span class="sxs-lookup"><span data-stu-id="d722a-148">**Ease of plugging in profile data about the user**</span></span>

    - <span data-ttu-id="d722a-149">Máte kontrolu nad schématem informací o uživatelích a profilech.</span><span class="sxs-lookup"><span data-stu-id="d722a-149">You have control over the schema of user and profile information.</span></span> <span data-ttu-id="d722a-150">Můžete například snadno povolit, aby systém ukládal data narození zadaná uživateli při registraci účtu ve vaší aplikaci.</span><span class="sxs-lookup"><span data-stu-id="d722a-150">For example, you can easily enable the system to store birth dates entered by users when they register an account in your application.</span></span>

- <span data-ttu-id="d722a-151">**Ovládací prvek trvalosti**</span><span class="sxs-lookup"><span data-stu-id="d722a-151">**Persistence control**</span></span>

    - <span data-ttu-id="d722a-152">Ve výchozím nastavení ukládá ASP.NET Identity systém do databáze všechny informace o uživateli.</span><span class="sxs-lookup"><span data-stu-id="d722a-152">By default, the ASP.NET Identity system stores all the user information in a database.</span></span> <span data-ttu-id="d722a-153">ASP.NET Identity používá Entity Framework Code First k implementaci veškerého mechanismu trvalosti.</span><span class="sxs-lookup"><span data-stu-id="d722a-153">ASP.NET Identity uses Entity Framework Code First to implement all of its persistence mechanism.</span></span>
    - <span data-ttu-id="d722a-154">Vzhledem k tomu, že byste měli řídit schéma databáze, je jednoduché provádět běžné úlohy, jako je například změna názvů tabulek nebo změna datového typu primárních klíčů.</span><span class="sxs-lookup"><span data-stu-id="d722a-154">Since you control the database schema, common tasks such as changing table names or changing the data type of primary keys is simple to do.</span></span>
    - <span data-ttu-id="d722a-155">Je snadné připojit se k různým mechanismům úložiště, jako je SharePoint, Azure Storage Table Service, NoSQL databáze atd., aniž by bylo nutné vyvolávat výjimky `System.NotImplementedExceptions`.</span><span class="sxs-lookup"><span data-stu-id="d722a-155">It's easy to plug in different storage mechanisms such as SharePoint, Azure Storage Table Service, NoSQL databases, etc., without having to throw `System.NotImplementedExceptions` exceptions.</span></span>
- <span data-ttu-id="d722a-156">**Testování částí**</span><span class="sxs-lookup"><span data-stu-id="d722a-156">**Unit testability**</span></span>

    - <span data-ttu-id="d722a-157">ASP.NET Identity zpřístupňuje testovatelné webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="d722a-157">ASP.NET Identity makes the web application more unit testable.</span></span> <span data-ttu-id="d722a-158">Můžete napsat testy jednotek pro části aplikace, které používají ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="d722a-158">You can write unit tests for the parts of your application that use ASP.NET Identity.</span></span>
- <span data-ttu-id="d722a-159">**Zprostředkovatel rolí**</span><span class="sxs-lookup"><span data-stu-id="d722a-159">**Role provider**</span></span>

    - <span data-ttu-id="d722a-160">Existuje zprostředkovatel rolí, který umožňuje omezit přístup k částem aplikace podle rolí.</span><span class="sxs-lookup"><span data-stu-id="d722a-160">There is a role provider which lets you restrict access to parts of your application by roles.</span></span> <span data-ttu-id="d722a-161">Můžete snadno vytvořit role, jako je například admin a přidat uživatele k rolím.</span><span class="sxs-lookup"><span data-stu-id="d722a-161">You can easily create roles such as "Admin" and add users to roles.</span></span>
- <span data-ttu-id="d722a-162">**Založené na deklaracích**</span><span class="sxs-lookup"><span data-stu-id="d722a-162">**Claims Based**</span></span>

    - <span data-ttu-id="d722a-163">ASP.NET Identity podporuje ověřování založené na deklaracích, kde je identita uživatele reprezentována jako sada deklarací.</span><span class="sxs-lookup"><span data-stu-id="d722a-163">ASP.NET Identity supports claims-based authentication, where the user's identity is represented as a set of claims.</span></span> <span data-ttu-id="d722a-164">Deklarace identity umožňují vývojářům mnohem pružnější v popisu identity uživatele, než povoluje role.</span><span class="sxs-lookup"><span data-stu-id="d722a-164">Claims allow developers to be a lot more expressive in describing a user's identity than roles allow.</span></span> <span data-ttu-id="d722a-165">Vzhledem k tomu, že členství role je jenom logická hodnota (člen nebo nečlen), může deklarace identity zahrnovat rozšířené informace o identitě a členství uživatele.</span><span class="sxs-lookup"><span data-stu-id="d722a-165">Whereas role membership is just a boolean (member or non-member), a claim can include rich information about the user's identity and membership.</span></span>
- <span data-ttu-id="d722a-166">**Poskytovatelé sociálních přihlášení**</span><span class="sxs-lookup"><span data-stu-id="d722a-166">**Social Login Providers**</span></span>

    - <span data-ttu-id="d722a-167">Do své aplikace můžete snadno přidat protokoly pro sociální sítě, jako je například účet Microsoft, Facebook, Twitter, Google a další, a data specifická pro uživatele v aplikaci ukládat.</span><span class="sxs-lookup"><span data-stu-id="d722a-167">You can easily add social log-ins such as Microsoft Account, Facebook, Twitter, Google, and others to your application, and store the user-specific data in your application.</span></span>

- <span data-ttu-id="d722a-168">**Integrace OWIN**</span><span class="sxs-lookup"><span data-stu-id="d722a-168">**OWIN Integration**</span></span>

    - <span data-ttu-id="d722a-169">Ověřování ASP.NET je teď založené na middlewaru OWIN, který se dá použít na jakémkoli hostiteli založeném na OWIN.</span><span class="sxs-lookup"><span data-stu-id="d722a-169">ASP.NET authentication is now based on OWIN middleware that can be used on any OWIN-based host.</span></span> <span data-ttu-id="d722a-170">ASP.NET Identity nemá žádnou závislost na System. Web.</span><span class="sxs-lookup"><span data-stu-id="d722a-170">ASP.NET Identity does not have any dependency on System.Web.</span></span> <span data-ttu-id="d722a-171">Jedná se o plně kompatibilní OWIN architekturu a dá se použít v libovolné aplikaci hostované v OWIN.</span><span class="sxs-lookup"><span data-stu-id="d722a-171">It is a fully compliant OWIN framework and can be used in any OWIN hosted application.</span></span>
    - <span data-ttu-id="d722a-172">ASP.NET Identity používá ověřování OWIN pro přihlášení nebo odhlášení uživatelů na webu.</span><span class="sxs-lookup"><span data-stu-id="d722a-172">ASP.NET Identity uses OWIN Authentication for log-in/log-out of users in the web site.</span></span> <span data-ttu-id="d722a-173">To znamená, že místo použití FormsAuthentication k vygenerování souboru cookie použije aplikace OWIN CookieAuthentication.</span><span class="sxs-lookup"><span data-stu-id="d722a-173">This means that instead of using FormsAuthentication to generate the cookie, the application uses OWIN CookieAuthentication to do that.</span></span>
- <span data-ttu-id="d722a-174">**Balíček NuGet**</span><span class="sxs-lookup"><span data-stu-id="d722a-174">**NuGet package**</span></span>

    - <span data-ttu-id="d722a-175">ASP.NET Identity se znovu distribuuje jako balíček NuGet, který je nainstalovaný v šablonách ASP.NET MVC, Web Forms a Web API, které se dodávají se sadou Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="d722a-175">ASP.NET Identity is redistributed as a NuGet package which is installed in the ASP.NET MVC, Web Forms and Web API templates that ship with Visual Studio 2017.</span></span> <span data-ttu-id="d722a-176">Tento balíček NuGet si můžete stáhnout z galerie NuGet.</span><span class="sxs-lookup"><span data-stu-id="d722a-176">You can download this NuGet package from the NuGet gallery.</span></span>
    - <span data-ttu-id="d722a-177">Uvolnění ASP.NET Identity jako balíčku NuGet usnadňuje týmu ASP.NET iterace na nových funkcích a opravách chyb a jejich doručování vývojářům agilním způsobem.</span><span class="sxs-lookup"><span data-stu-id="d722a-177">Releasing ASP.NET Identity as a NuGet package makes it easier for the ASP.NET team to iterate on new features and bug fixes, and deliver these to developers in an agile manner.</span></span>

## <a name="get-started-with-aspnet-identity"></a><span data-ttu-id="d722a-178">Začínáme s ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="d722a-178">Get started with ASP.NET Identity</span></span>

<span data-ttu-id="d722a-179">ASP.NET Identity se používá v šablonách projektů sady Visual Studio 2017 pro ASP.NET MVC, webové formuláře, webové rozhraní API a zabezpečené ověřování hesla.</span><span class="sxs-lookup"><span data-stu-id="d722a-179">ASP.NET Identity is used in the Visual Studio 2017 project templates for ASP.NET MVC, Web Forms, Web API and SPA.</span></span> <span data-ttu-id="d722a-180">V tomto návodu ukážeme, jak šablony projektu používají ASP.NET Identity k přidání funkcí k registraci, přihlášení a odhlášení uživatele.</span><span class="sxs-lookup"><span data-stu-id="d722a-180">In this walkthrough, we'll illustrate how the project templates use ASP.NET Identity to add functionality to register, sign in and sign out a user.</span></span>

<span data-ttu-id="d722a-181">ASP.NET Identity je implementováno pomocí následujícího postupu.</span><span class="sxs-lookup"><span data-stu-id="d722a-181">ASP.NET Identity is implemented using the following procedure.</span></span> <span data-ttu-id="d722a-182">Účelem tohoto článku je poskytnout vám přehled o vysoké úrovni ASP.NET Identity; můžete postupovat podle kroku, nebo si jen přečtěte podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="d722a-182">The purpose of this article is to give you a high level overview of ASP.NET Identity; you can follow it step by step or just read the details.</span></span> <span data-ttu-id="d722a-183">Podrobnější pokyny k vytváření aplikací pomocí ASP.NET Identity, včetně použití nového rozhraní API k přidání uživatelů, rolí a informací o profilu, najdete v části Další kroky na konci tohoto článku.</span><span class="sxs-lookup"><span data-stu-id="d722a-183">For more detailed instructions on creating apps using ASP.NET Identity, including using the new API to add users, roles and profile information, see the Next Steps section at the end of this article.</span></span>

1. <span data-ttu-id="d722a-184">Vytvořte aplikaci ASP.NET MVC s jednotlivými účty.</span><span class="sxs-lookup"><span data-stu-id="d722a-184">Create an ASP.NET MVC application with Individual Accounts.</span></span> <span data-ttu-id="d722a-185">Můžete použít ASP.NET Identity v ASP.NET MVC, webové formuláře, webové rozhraní API, signalizaci atd. V tomto článku začneme s aplikací ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="d722a-185">You can use ASP.NET Identity in ASP.NET MVC, Web Forms, Web API, SignalR etc. In this article we will start with an ASP.NET MVC application.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image1.png)
2. <span data-ttu-id="d722a-186">Vytvořený projekt obsahuje následující tři balíčky pro ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="d722a-186">The created project contains the following three packages for ASP.NET Identity.</span></span>

    - [`Microsoft.AspNet.Identity.EntityFramework`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/)  
   <span data-ttu-id="d722a-187">Tento balíček má Entity Framework implementaci ASP.NET Identity, která bude uchovávat ASP.NET Identity data a schéma SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d722a-187">This package has the Entity Framework implementation of ASP.NET Identity which will persist the ASP.NET Identity data and schema to SQL Server.</span></span>
    - [`Microsoft.AspNet.Identity.Core`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Core/)  
   <span data-ttu-id="d722a-188">Tento balíček má základní rozhraní pro ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="d722a-188">This package has the core interfaces for ASP.NET Identity.</span></span> <span data-ttu-id="d722a-189">Tento balíček se dá použít k zápisu implementace pro ASP.NET Identity, které cílí na různá úložiště trvalosti, jako je Azure Table Storage, databáze NoSQL atd.</span><span class="sxs-lookup"><span data-stu-id="d722a-189">This package can be used to write an implementation for ASP.NET Identity that targets different persistence stores such as Azure Table Storage, NoSQL databases etc.</span></span>
    - [`Microsoft.AspNet.Identity.OWIN`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Owin/)  
   <span data-ttu-id="d722a-190">Tento balíček obsahuje funkce, které slouží k připojení ověřování OWIN pomocí ASP.NET Identity v aplikacích ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d722a-190">This package contains functionality that is used to plug in OWIN authentication with ASP.NET Identity in ASP.NET applications.</span></span> <span data-ttu-id="d722a-191">Tato možnost se používá, když do aplikace přidáte funkci přihlašování a zavoláte do middleware pro ověřování souborů cookie OWIN k vygenerování souboru cookie.</span><span class="sxs-lookup"><span data-stu-id="d722a-191">This is used when you add sign in functionality to your application and call into OWIN Cookie Authentication middleware to generate a cookie.</span></span>
3. <span data-ttu-id="d722a-192">Vytváří se uživatel.</span><span class="sxs-lookup"><span data-stu-id="d722a-192">Creating a user.</span></span>  
   <span data-ttu-id="d722a-193">Spusťte aplikaci a kliknutím na odkaz **zaregistrovat** vytvořte uživatele.</span><span class="sxs-lookup"><span data-stu-id="d722a-193">Launch the application and then click on the **Register** link to create a user.</span></span> <span data-ttu-id="d722a-194">Následující obrázek ukazuje stránku registrace, která shromažďuje uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="d722a-194">The following image shows the Register page that collects the user name and password.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image2.png)  
  
   <span data-ttu-id="d722a-195">Když uživatel vybere tlačítko **Registrovat** , `Register` akce řadiče účtů vytvoří uživatele VOLÁNÍM rozhraní API ASP.NET identity, jak je zvýrazněno níže:</span><span class="sxs-lookup"><span data-stu-id="d722a-195">When the user selects the **Register** button, the `Register` action of the Account controller creates the user by calling the ASP.NET Identity API, as highlighted below:</span></span>

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample1.cs?highlight=8-9)]
4. <span data-ttu-id="d722a-196">Přihlásit se.</span><span class="sxs-lookup"><span data-stu-id="d722a-196">Sign in.</span></span>  
   <span data-ttu-id="d722a-197">Pokud byl uživatel úspěšně vytvořen, je přihlášen metodou `SignInAsync`.</span><span class="sxs-lookup"><span data-stu-id="d722a-197">If the user was successfully created, she is signed in by the `SignInAsync` method.</span></span>  

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample6.cs?highlight=12)]

   <span data-ttu-id="d722a-198">Metoda `SignInManager.SignInAsync` generuje [hodnota ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span><span class="sxs-lookup"><span data-stu-id="d722a-198">The `SignInManager.SignInAsync` method generates a [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span></span> <span data-ttu-id="d722a-199">Vzhledem k tomu, že ASP.NET Identity a ověřování souborů cookie OWIN jsou systémy založené na deklaracích, rozhraní vyžaduje, aby aplikace vygenerovala hodnota ClaimsIdentity pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="d722a-199">Since ASP.NET Identity and OWIN Cookie Authentication are claims-based system, the framework requires the app to generate a ClaimsIdentity for the user.</span></span> <span data-ttu-id="d722a-200">Hodnota ClaimsIdentity obsahuje informace o všech deklaracích identity pro uživatele, například o tom, k jakým rolím uživatel patří.</span><span class="sxs-lookup"><span data-stu-id="d722a-200">ClaimsIdentity has information about all the claims for the user, such as what roles the user belongs to.</span></span>   
 
5. <span data-ttu-id="d722a-201">Odhlaste se.</span><span class="sxs-lookup"><span data-stu-id="d722a-201">Log off.</span></span>  
   <span data-ttu-id="d722a-202">Vyberte odkaz **Odhlásit se** a zavolejte akci odhlášení v řadiči účtů.</span><span class="sxs-lookup"><span data-stu-id="d722a-202">Select the **Log off** link to call the LogOff action in the account controller.</span></span> 

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample5.cs?highlight=6)]

   <span data-ttu-id="d722a-203">Zvýrazněný kód výše ukazuje metodu OWIN `AuthenticationManager.SignOut`.</span><span class="sxs-lookup"><span data-stu-id="d722a-203">The highlighted code above shows the OWIN `AuthenticationManager.SignOut` method.</span></span> <span data-ttu-id="d722a-204">To je obdobou jako metoda [FormsAuthentication. Signing](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) , kterou používá modul [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) ve webových formulářích.</span><span class="sxs-lookup"><span data-stu-id="d722a-204">This is analogous to [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) method used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module in Web Forms.</span></span>

## <a name="components-of-aspnet-identity"></a><span data-ttu-id="d722a-205">Součásti ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="d722a-205">Components of ASP.NET Identity</span></span>

<span data-ttu-id="d722a-206">Následující diagram ukazuje součásti ASP.NET Identity systému (vyberte na [tomto](introduction-to-aspnet-identity/_static/image3.png) nebo v diagramu, abyste ho rozšířili).</span><span class="sxs-lookup"><span data-stu-id="d722a-206">The diagram below shows the components of the ASP.NET Identity system (select on [this](introduction-to-aspnet-identity/_static/image3.png) or on the diagram to enlarge it).</span></span> <span data-ttu-id="d722a-207">Balíčky v zeleně tvoří ASP.NET Identity systém.</span><span class="sxs-lookup"><span data-stu-id="d722a-207">The packages in green make up the ASP.NET Identity system.</span></span> <span data-ttu-id="d722a-208">Všechny ostatní balíčky jsou závislosti, které je potřeba k používání ASP.NET Identityho systému v aplikacích ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d722a-208">All the other packages are dependencies which are needed to use the ASP.NET Identity system in ASP.NET applications.</span></span>

[![](introduction-to-aspnet-identity/_static/image5.png)](introduction-to-aspnet-identity/_static/image4.png)

<span data-ttu-id="d722a-209">Následuje stručný popis balíčků NuGet, které nebyly dřív zmíněny:</span><span class="sxs-lookup"><span data-stu-id="d722a-209">The following is a brief description of the NuGet packages not mentioned previously:</span></span>

- [<span data-ttu-id="d722a-210">Microsoft.Owin.Security.Cookies</span><span class="sxs-lookup"><span data-stu-id="d722a-210">Microsoft.Owin.Security.Cookies</span></span>](http://www.nuget.org/packages/Microsoft.Owin.Security.Cookies/)  
 <span data-ttu-id="d722a-211">Middleware, který umožňuje aplikaci používat ověřování na základě souborů cookie, podobně jako ASP. Ověřování formulářů netto.</span><span class="sxs-lookup"><span data-stu-id="d722a-211">Middleware that enables an application to use cookie based authentication, similar to ASP.NET's Forms Authentication.</span></span>
- [<span data-ttu-id="d722a-212">EntityFramework</span><span class="sxs-lookup"><span data-stu-id="d722a-212">EntityFramework</span></span>](http://www.nuget.org/packages/EntityFramework/)  
 <span data-ttu-id="d722a-213">Entity Framework je pro relační databáze doporučena technologie pro přístup k datům společnosti Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d722a-213">Entity Framework is Microsoft's recommended data access technology for relational databases.</span></span>

## <a name="migrating-from-membership-to-aspnet-identity"></a><span data-ttu-id="d722a-214">Migrace z členství na ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="d722a-214">Migrating from Membership to ASP.NET Identity</span></span>

<span data-ttu-id="d722a-215">Doufáme, že brzy poskytneme pokyny k migraci stávajících aplikací, které používají členství v ASP.NET nebo jednoduché členství v novém systému ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="d722a-215">We hope to soon provide guidance on migrating your existing apps that use ASP.NET Membership or Simple Membership to the new ASP.NET Identity system.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d722a-216">Další kroky</span><span class="sxs-lookup"><span data-stu-id="d722a-216">Next Steps</span></span>

- [<span data-ttu-id="d722a-217">Vytvoření aplikace ASP.NET MVC 5 pomocí Facebooku a přihlášení Google OAuth2 a OpenID</span><span class="sxs-lookup"><span data-stu-id="d722a-217">Create an ASP.NET MVC 5 App with Facebook and Google OAuth2 and OpenID Sign-on</span></span>](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md)  
 <span data-ttu-id="d722a-218">Tento kurz používá rozhraní ASP.NET Identity API k přidání informací o profilu do uživatelské databáze a k ověřování pomocí Google a Facebooku.</span><span class="sxs-lookup"><span data-stu-id="d722a-218">The tutorial uses the ASP.NET Identity API to add profile information to the user database, and how to authenticate with Google and Facebook.</span></span>
- [<span data-ttu-id="d722a-219">Vytvořte aplikaci ASP.NET MVC s ověřováním a SQL DB a nasaďte ji do Azure App Service</span><span class="sxs-lookup"><span data-stu-id="d722a-219">Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service</span></span>](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data)  
 <span data-ttu-id="d722a-220">V tomto kurzu se dozvíte, jak pomocí rozhraní API identity přidat uživatele a role.</span><span class="sxs-lookup"><span data-stu-id="d722a-220">This tutorial shows how to use the Identity API to add users and roles.</span></span>
- [https://github.com/rustd/AspnetIdentitySample](https://github.com/rustd/AspnetIdentitySample)  
 <span data-ttu-id="d722a-221">Ukázková aplikace, která ukazuje, jak přidat základní role a podporu uživatelů a jak provádět role a správu uživatelů.</span><span class="sxs-lookup"><span data-stu-id="d722a-221">Sample application that shows how to add basic roles and user support and how to do roles and user management.</span></span>
