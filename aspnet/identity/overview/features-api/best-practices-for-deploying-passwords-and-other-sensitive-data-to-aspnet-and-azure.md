---
uid: identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure
title: Nasazení hesel a dalších citlivých dat do ASP.NET a Azure App Service-ASP.NET 4. x
author: Rick-Anderson
description: V tomto kurzu se dozvíte, jak může váš kód bezpečně ukládat a přistupovat k zabezpečeným informacím. Nejdůležitějším bodem je, že nikdy nebudete ukládat hesla ani jiné...
ms.author: riande
ms.date: 05/21/2015
ms.assetid: 97902c66-cb61-4d11-be52-73f962f2db0a
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure
msc.type: authoredcontent
ms.openlocfilehash: 8356a90611f791779cc4ff4730038d82cd76242f
ms.sourcegitcommit: 7709c0a091b8d55b7b33bad8849f7b66b23c3d72
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 02/19/2020
ms.locfileid: "77457047"
---
# <a name="best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure-app-service"></a><span data-ttu-id="5a78b-104">Doporučené postupy nasazení hesel a dalších citlivých dat do ASP.NET a služby Azure App Service</span><span class="sxs-lookup"><span data-stu-id="5a78b-104">Best practices for deploying passwords and other sensitive data to ASP.NET and Azure App Service</span></span>

<span data-ttu-id="5a78b-105">od [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="5a78b-105">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> <span data-ttu-id="5a78b-106">V tomto kurzu se dozvíte, jak může váš kód bezpečně ukládat a přistupovat k zabezpečeným informacím.</span><span class="sxs-lookup"><span data-stu-id="5a78b-106">This tutorial shows how your code can securely store and access secure information.</span></span> <span data-ttu-id="5a78b-107">Nejdůležitějším bodem je, že byste nikdy neměli ukládat hesla ani další citlivá data ve zdrojovém kódu a neměli byste používat provozní tajemství v režimu vývoje a testování.</span><span class="sxs-lookup"><span data-stu-id="5a78b-107">The most important point is you should never store passwords or other sensitive data in source code, and you shouldn't use production secrets in development and test mode.</span></span>
> 
> <span data-ttu-id="5a78b-108">Vzorový kód je jednoduchá Konzolová aplikace WebJob a aplikace ASP.NET MVC, které potřebují přístup k heslům připojovacího řetězce databáze, Twilio, Google a SendGrid Secure Keys.</span><span class="sxs-lookup"><span data-stu-id="5a78b-108">The sample code is a simple WebJob console app and a ASP.NET MVC app that needs access to a database connection string password, Twilio, Google and SendGrid secure keys.</span></span>
> 
> <span data-ttu-id="5a78b-109">Na místních nastaveních se také zmiňuje i PHP.</span><span class="sxs-lookup"><span data-stu-id="5a78b-109">On premise settings and PHP is also mentioned.</span></span>

- [<span data-ttu-id="5a78b-110">Práce s hesly ve vývojovém prostředí</span><span class="sxs-lookup"><span data-stu-id="5a78b-110">Working with passwords in the development environment</span></span>](#pwd)
- [<span data-ttu-id="5a78b-111">Práce s připojovacími řetězci ve vývojovém prostředí</span><span class="sxs-lookup"><span data-stu-id="5a78b-111">Working with connection strings in the development environment</span></span>](#con)
- [<span data-ttu-id="5a78b-112">Konzolové aplikace WebJobs</span><span class="sxs-lookup"><span data-stu-id="5a78b-112">WebJobs console apps</span></span>](#wj)
- [<span data-ttu-id="5a78b-113">Nasazení tajných klíčů do Azure</span><span class="sxs-lookup"><span data-stu-id="5a78b-113">Deploying secrets to Azure</span></span>](#da)
- [<span data-ttu-id="5a78b-114">Poznámky pro místní a PHP</span><span class="sxs-lookup"><span data-stu-id="5a78b-114">Notes for On-Premise and PHP</span></span>](#not)
- [<span data-ttu-id="5a78b-115">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="5a78b-115">Additional Resources</span></span>](#addRes)

<a id="pwd"></a>
## <a name="working-with-passwords-in-the-development-environment"></a><span data-ttu-id="5a78b-116">Práce s hesly ve vývojovém prostředí</span><span class="sxs-lookup"><span data-stu-id="5a78b-116">Working with passwords in the development environment</span></span>

<span data-ttu-id="5a78b-117">Kurzy často znázorňují citlivá data ve zdrojovém kódu a snad s upozorněním, že byste nikdy neměli ukládat citlivá data ve zdrojovém kódu.</span><span class="sxs-lookup"><span data-stu-id="5a78b-117">Tutorials frequently show sensitive data in source code, hopefully with a caveat that you should never store sensitive data in source code.</span></span> <span data-ttu-id="5a78b-118">Například moje [aplikace ASP.NET MVC 5 s kurzem SMS a e-mailem 2FA](../../../mvc/overview/security/aspnet-mvc-5-app-with-sms-and-email-two-factor-authentication.md) zobrazuje v souboru *Web. config* následující:</span><span class="sxs-lookup"><span data-stu-id="5a78b-118">For example, my [ASP.NET MVC 5 app with SMS and email 2FA](../../../mvc/overview/security/aspnet-mvc-5-app-with-sms-and-email-two-factor-authentication.md) tutorial shows the following in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample1.xml)]

<span data-ttu-id="5a78b-119">Soubor *Web. config* je zdrojový kód, takže tyto tajné klíče by nikdy neměly být uloženy v tomto souboru.</span><span class="sxs-lookup"><span data-stu-id="5a78b-119">The *web.config* file is source code, so these secrets should never be stored in that file.</span></span> <span data-ttu-id="5a78b-120">Naštěstí `<appSettings>` element má atribut `file`, který umožňuje určit externí soubor, který obsahuje nastavení konfigurace citlivých aplikací.</span><span class="sxs-lookup"><span data-stu-id="5a78b-120">Fortunately, the `<appSettings>` element has a `file` attribute that allows you to specify an external file that contains sensitive app config settings.</span></span> <span data-ttu-id="5a78b-121">Všechna vaše tajná klíčová okna můžete přesunout do externího souboru, pokud se externí soubor nevrátí do zdrojového stromu.</span><span class="sxs-lookup"><span data-stu-id="5a78b-121">You can move all your secrets to an external file as long as the external file is not checked into your source tree.</span></span> <span data-ttu-id="5a78b-122">Například v následujícím kódu soubor *AppSettingsSecrets. config* obsahuje všechny tajné klíče aplikace:</span><span class="sxs-lookup"><span data-stu-id="5a78b-122">For example, in the following markup, the file *AppSettingsSecrets.config* contains all the app secrets:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample2.xml)]

<span data-ttu-id="5a78b-123">Označení v externím souboru (*AppSettingsSecrets. config* v této ukázce) je stejný kód, který se nachází v souboru *Web. config* :</span><span class="sxs-lookup"><span data-stu-id="5a78b-123">The markup in the external file (*AppSettingsSecrets.config* in this sample), is the same markup found in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample3.xml)]

<span data-ttu-id="5a78b-124">Modul runtime ASP.NET sloučí obsah externího souboru s označením ve &lt;appSettings&gt; elementu.</span><span class="sxs-lookup"><span data-stu-id="5a78b-124">The ASP.NET runtime merges the contents of the external file with the markup in &lt;appSettings&gt; element.</span></span> <span data-ttu-id="5a78b-125">Pokud zadaný soubor nelze nalézt, modul runtime atribut souboru ignoruje.</span><span class="sxs-lookup"><span data-stu-id="5a78b-125">The runtime ignores the file attribute if the specified file cannot be found.</span></span>

> [!WARNING]
> <span data-ttu-id="5a78b-126">Zabezpečení – nepřidejte svůj soubor *tajných klíčů. config* do projektu nebo jej vraťte do správy zdrojového kódu.</span><span class="sxs-lookup"><span data-stu-id="5a78b-126">Security - Do not add your *secrets .config* file to your project or check it into source control.</span></span> <span data-ttu-id="5a78b-127">Ve výchozím nastavení sada Visual Studio nastaví `Build Action` na `Content`, což znamená, že soubor je nasazený.</span><span class="sxs-lookup"><span data-stu-id="5a78b-127">By default, Visual Studio sets the `Build Action` to `Content`, which means the file is deployed.</span></span> <span data-ttu-id="5a78b-128">Další informace najdete v tématu [Proč se nepovedlo nasadit všechny soubory ve složce projektu?](https://msdn.microsoft.com/library/ee942158(v=vs.110).aspx#can_i_exclude_specific_files_or_folders_from_deployment)</span><span class="sxs-lookup"><span data-stu-id="5a78b-128">For more information see [Why don't all of the files in my project folder get deployed?](https://msdn.microsoft.com/library/ee942158(v=vs.110).aspx#can_i_exclude_specific_files_or_folders_from_deployment)</span></span> <span data-ttu-id="5a78b-129">I když můžete použít jakékoli rozšíření souboru *tajných kódů. config* , je vhodné uchovávat soubor *. config*, protože konfigurační soubory nejsou obsluhovány službou IIS.</span><span class="sxs-lookup"><span data-stu-id="5a78b-129">Although you can use any extension for the *secrets .config* file, it's best to keep it *.config*, as config files are not served by IIS.</span></span> <span data-ttu-id="5a78b-130">Všimněte si také, že soubor *AppSettingsSecrets. config* je ze souboru *Web. config* ze dvou adresářových úrovní, takže je zcela z adresáře řešení.</span><span class="sxs-lookup"><span data-stu-id="5a78b-130">Notice also that the *AppSettingsSecrets.config* file is two directory levels up from the *web.config* file, so it's completely out of the solution directory.</span></span> <span data-ttu-id="5a78b-131">Přesunutím souboru z adresáře řešení &quot;git add \*&quot; ho do úložiště přidat.</span><span class="sxs-lookup"><span data-stu-id="5a78b-131">By moving the file out of the solution directory, &quot;git add \*&quot; won't add it to your repository.</span></span>

<a id="con"></a>
## <a name="working-with-connection-strings-in-the-development-environment"></a><span data-ttu-id="5a78b-132">Práce s připojovacími řetězci ve vývojovém prostředí</span><span class="sxs-lookup"><span data-stu-id="5a78b-132">Working with connection strings in the development environment</span></span>

<span data-ttu-id="5a78b-133">Visual Studio vytvoří nové projekty ASP.NET, které používají [LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx).</span><span class="sxs-lookup"><span data-stu-id="5a78b-133">Visual Studio creates new ASP.NET projects that use [LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx).</span></span> <span data-ttu-id="5a78b-134">LocalDB byl vytvořen speciálně pro vývojové prostředí.</span><span class="sxs-lookup"><span data-stu-id="5a78b-134">LocalDB was created specifically for the development environment.</span></span> <span data-ttu-id="5a78b-135">Nevyžaduje heslo, takže nemusíte nic dělat, abyste zabránili tomu, aby se tajné kódy kontrolovaly do zdrojového kódu.</span><span class="sxs-lookup"><span data-stu-id="5a78b-135">It doesn't require a password, therefore you don't need to do anything to prevent secrets from being checked into your source code.</span></span> <span data-ttu-id="5a78b-136">Některé vývojové týmy používají plné verze SQL Server (nebo jiného systému DBMS), které vyžadují heslo.</span><span class="sxs-lookup"><span data-stu-id="5a78b-136">Some development teams use the full versions of SQL Server (or other DBMS) that require a password.</span></span>

<span data-ttu-id="5a78b-137">Atribut `configSource` lze použít k nahrazení celého kódu `<connectionStrings>`.</span><span class="sxs-lookup"><span data-stu-id="5a78b-137">You can use the `configSource` attribute to replace the entire `<connectionStrings>` markup.</span></span> <span data-ttu-id="5a78b-138">Na rozdíl od atributu `<appSettings>` `file`, který sloučí značku, atribut `configSource` nahradí značku.</span><span class="sxs-lookup"><span data-stu-id="5a78b-138">Unlike the `<appSettings>` `file` attribute that merges the markup, the `configSource` attribute replaces the markup.</span></span> <span data-ttu-id="5a78b-139">Následující kód ukazuje atribut `configSource` v souboru *Web. config* :</span><span class="sxs-lookup"><span data-stu-id="5a78b-139">The following markup shows the `configSource` attribute in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample4.xml?highlight=1)]

> [!NOTE]
> <span data-ttu-id="5a78b-140">Použijete-li atribut `configSource`, jak je uvedeno výše, přesunete připojovací řetězce do externího souboru a ponecháte si aplikaci Visual Studio vytvořit nový web, nebudete schopni zjistit, že používáte databázi, a při publikování do Azure ze sady Visual Studio nezískáme možnost konfigurace databáze.</span><span class="sxs-lookup"><span data-stu-id="5a78b-140">If you use the `configSource` attribute as shown above to move your connection strings to an external file, and have Visual Studio create a new web site, it won't be able to detect you are using a database, and you won't get the option of configuring the database when you publish to Azure from Visual Studio.</span></span> <span data-ttu-id="5a78b-141">Pokud používáte atribut `configSource`, můžete použít PowerShell k vytvoření a nasazení vašeho webu a databáze, nebo můžete vytvořit web a databázi na portálu před publikováním.</span><span class="sxs-lookup"><span data-stu-id="5a78b-141">If you are using the `configSource` attribute, you can use PowerShell to create and deploy your web site and database, or you can create the web site and the database in the portal before you publish.</span></span> <span data-ttu-id="5a78b-142">Skript [New-AzureWebsitewithDB. ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) vytvoří nový web a databázi.</span><span class="sxs-lookup"><span data-stu-id="5a78b-142">The [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) script will create a new web site and database.</span></span>

> [!WARNING]
> <span data-ttu-id="5a78b-143">Zabezpečení – na rozdíl od souboru *AppSettingsSecrets. config* musí být soubor externích připojovacích řetězců ve stejném adresáři jako kořenový soubor *Web. config* , takže budete muset vzít v úvahu bezpečnostní opatření, abyste se ujistili, že je nebudete kontrolovat do zdrojového úložiště.</span><span class="sxs-lookup"><span data-stu-id="5a78b-143">Security - Unlike the *AppSettingsSecrets.config* file, the external connection strings file must be in the same directory as the root *web.config* file, so you'll have to take precautions to ensure you don't check it into your source repository.</span></span>

> [!NOTE]
> <span data-ttu-id="5a78b-144">**Upozornění zabezpečení v souboru tajných kódů:** Osvědčeným postupem je nepoužívat provozní tajemství v rámci testování a vývoje.</span><span class="sxs-lookup"><span data-stu-id="5a78b-144">**Security Warning on secrets file:** A best practice is to not use production secrets in test and development.</span></span> <span data-ttu-id="5a78b-145">Používáním produkčních hesel v testu nebo v jejich vývoji nevrací tyto tajné kódy.</span><span class="sxs-lookup"><span data-stu-id="5a78b-145">Using production passwords in test or development leaks those secrets.</span></span>

<a id="wj"></a>
## <a name="webjobs-console-apps"></a><span data-ttu-id="5a78b-146">Konzolové aplikace WebJobs</span><span class="sxs-lookup"><span data-stu-id="5a78b-146">WebJobs console apps</span></span>

<span data-ttu-id="5a78b-147">Soubor *App. config* používaný konzolovou aplikací nepodporuje relativní cesty, ale podporuje absolutní cesty.</span><span class="sxs-lookup"><span data-stu-id="5a78b-147">The *app.config* file used by a console app doesn't support relative paths, but it does support absolute paths.</span></span> <span data-ttu-id="5a78b-148">K přesunutí tajných kódů z adresáře projektu můžete použít absolutní cestu.</span><span class="sxs-lookup"><span data-stu-id="5a78b-148">You can use an absolute path to move your secrets out of your project directory.</span></span> <span data-ttu-id="5a78b-149">Následující kód ukazuje tajné klíče v souboru *C:\secrets\AppSettingsSecrets.config* a data v souboru *App. config* , která nejsou citlivá.</span><span class="sxs-lookup"><span data-stu-id="5a78b-149">The following markup shows the secrets in the *C:\secrets\AppSettingsSecrets.config* file, and non sensitive data in the *app.config* file.</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample5.xml?highlight=2)]

<a id="da"></a>
## <a name="deploying-secrets-to-azure"></a><span data-ttu-id="5a78b-150">Nasazení tajných klíčů do Azure</span><span class="sxs-lookup"><span data-stu-id="5a78b-150">Deploying secrets to Azure</span></span>

<span data-ttu-id="5a78b-151">Když nasadíte webovou aplikaci do Azure, soubor *AppSettingsSecrets. config* se nesadí (to je to, co chcete).</span><span class="sxs-lookup"><span data-stu-id="5a78b-151">When you deploy your web app to Azure, the *AppSettingsSecrets.config* file won't be deployed (that's what you want).</span></span> <span data-ttu-id="5a78b-152">Můžete přejít na [portál pro správu Azure](https://azure.microsoft.com/services/management-portal/) a nastavit je ručně, abyste to provedli:</span><span class="sxs-lookup"><span data-stu-id="5a78b-152">You could go to the [Azure Management Portal](https://azure.microsoft.com/services/management-portal/) and set them manually, to do that:</span></span>

1. <span data-ttu-id="5a78b-153">Přejít na [https://portal.azure.com](https://portal.azure.com)a přihlaste se pomocí přihlašovacích údajů Azure.</span><span class="sxs-lookup"><span data-stu-id="5a78b-153">Go to [https://portal.azure.com](https://portal.azure.com), and sign in with your Azure credentials.</span></span>
2. <span data-ttu-id="5a78b-154">Klikněte na **procházet &gt; Web Apps**a pak klikněte na název vaší webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="5a78b-154">Click **Browse &gt; Web Apps**, then click the name of your web app.</span></span>
3. <span data-ttu-id="5a78b-155">Klikněte na **všechna nastavení &gt; nastavení aplikace**.</span><span class="sxs-lookup"><span data-stu-id="5a78b-155">Click **All settings &gt; Application settings**.</span></span>

<span data-ttu-id="5a78b-156">**Nastavení aplikace** a hodnoty **připojovacích řetězců** přepíšou stejné nastavení v souboru *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="5a78b-156">The **app settings** and **connection string** values override the same settings in the *web.config* file.</span></span> <span data-ttu-id="5a78b-157">V našem příkladu jsme tato nastavení do Azure nasadili, ale pokud byly tyto klíče v souboru *Web. config* , bude mít přednost nastavení zobrazená na portálu.</span><span class="sxs-lookup"><span data-stu-id="5a78b-157">In our example, we did not deploy these settings to Azure, but if these keys were in the *web.config* file, the settings shown on the portal would take precedence.</span></span>

<span data-ttu-id="5a78b-158">Osvědčeným postupem je postupovat podle [pracovního postupu DevOps](../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything.md) a pomocí [Azure PowerShell](https://azure.microsoft.com/documentation/articles/install-configure-powershell/) (nebo jiné [architektury, jako je například](http://www.opscode.com/chef/) tovární nebo [Puppet](http://puppetlabs.com/puppet/what-is-puppet)), automatizovat nastavení těchto hodnot v Azure.</span><span class="sxs-lookup"><span data-stu-id="5a78b-158">A best practice is to follow a [DevOps workflow](../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything.md) and use [Azure PowerShell](https://azure.microsoft.com/documentation/articles/install-configure-powershell/) (or another framework such as [Chef](http://www.opscode.com/chef/) or [Puppet](http://puppetlabs.com/puppet/what-is-puppet)) to automate setting these values in Azure.</span></span> <span data-ttu-id="5a78b-159">Následující skript PowerShellu používá [Export-CLIXML](http://www.powershellcookbook.com/recipe/PukO/securely-store-credentials-on-disk) k exportu šifrovaných tajných klíčů na disk:</span><span class="sxs-lookup"><span data-stu-id="5a78b-159">The following PowerShell script uses [Export-CliXml](http://www.powershellcookbook.com/recipe/PukO/securely-store-credentials-on-disk) to export the encrypted secrets to disk:</span></span>

[!code-powershell[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample6.ps1)]

<span data-ttu-id="5a78b-160">Ve skriptu výše je ' název ' název tajného klíče, například '&quot;Arial\_AppSecret&quot; nebo "TwitterSecret".</span><span class="sxs-lookup"><span data-stu-id="5a78b-160">In the script above, ‘Name' is the name of the secret key, such as ‘&quot;FB\_AppSecret&quot; or "TwitterSecret".</span></span> <span data-ttu-id="5a78b-161">Soubor. Credential vytvořený skriptem můžete zobrazit v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="5a78b-161">You can view the ".credential" file created by the script in your browser.</span></span> <span data-ttu-id="5a78b-162">Fragment kódu níže testuje všechny soubory přihlašovacích údajů a nastavuje tajné klíče pro pojmenovanou webovou aplikaci:</span><span class="sxs-lookup"><span data-stu-id="5a78b-162">The snippet below tests each of the credential files and sets the secrets for the named web app:</span></span>

[!code-powershell[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample7.ps1)]

> [!WARNING]
> <span data-ttu-id="5a78b-163">Zabezpečení – Nezahrnovat hesla ani jiné tajné klíče do skriptu PowerShellu, takže by se tak přesadil účel použití skriptu PowerShellu k nasazení citlivých dat.</span><span class="sxs-lookup"><span data-stu-id="5a78b-163">Security - Don't include passwords or other secrets in the PowerShell script, doing so defeats the purpose of using a PowerShell script to deploy sensitive data.</span></span> <span data-ttu-id="5a78b-164">Rutina [Get-Credential](https://technet.microsoft.com/library/hh849815.aspx) poskytuje zabezpečený mechanismus pro získání hesla.</span><span class="sxs-lookup"><span data-stu-id="5a78b-164">The [Get-Credential](https://technet.microsoft.com/library/hh849815.aspx) cmdlet provides a secure mechanism to obtain a password.</span></span> <span data-ttu-id="5a78b-165">Použití výzvy uživatelského rozhraní může zabránit úniku hesla.</span><span class="sxs-lookup"><span data-stu-id="5a78b-165">Using a UI prompt can prevent leaking a password.</span></span>

### <a name="deploying-db-connection-strings"></a><span data-ttu-id="5a78b-166">Nasazení připojovacích řetězců databáze</span><span class="sxs-lookup"><span data-stu-id="5a78b-166">Deploying DB connection strings</span></span>

<span data-ttu-id="5a78b-167">Připojovací řetězce databáze jsou zpracovávány podobně jako nastavení aplikace.</span><span class="sxs-lookup"><span data-stu-id="5a78b-167">DB connection strings are handled similarly to app settings.</span></span> <span data-ttu-id="5a78b-168">Pokud nasadíte webovou aplikaci ze sady Visual Studio, připojovací řetězec bude nakonfigurován za vás.</span><span class="sxs-lookup"><span data-stu-id="5a78b-168">If you deploy your web app from Visual Studio, the connection string will be configured for you.</span></span> <span data-ttu-id="5a78b-169">To můžete ověřit na portálu.</span><span class="sxs-lookup"><span data-stu-id="5a78b-169">You can verify this in the portal.</span></span> <span data-ttu-id="5a78b-170">Doporučený způsob, jak nastavit připojovací řetězec, je PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5a78b-170">The recommended way to set the connection string is with PowerShell.</span></span> <span data-ttu-id="5a78b-171">Příklad skriptu PowerShellu: vytvoří web a databázi a nastaví připojovací řetězec na webu, Stáhněte si [New-AzureWebsitewithDB. ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) z [knihovny skriptů Azure](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span><span class="sxs-lookup"><span data-stu-id="5a78b-171">For an example of a PowerShell script the creates a website and database and sets the connection string in the website, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) from the [Azure Script library](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span></span>

<a id="not"></a>
## <a name="notes-for-php"></a><span data-ttu-id="5a78b-172">Poznámky pro PHP</span><span class="sxs-lookup"><span data-stu-id="5a78b-172">Notes for PHP</span></span>

<span data-ttu-id="5a78b-173">Vzhledem k tomu, že páry klíč-hodnota pro obě **nastavení aplikace** i **připojovací řetězce** jsou uloženy v proměnných prostředí v Azure App Service, můžou tyto hodnoty snadno načíst vývojáři, kteří používají libovolné architektury webových aplikací (například php).</span><span class="sxs-lookup"><span data-stu-id="5a78b-173">Since the key-value pairs for both **app settings** and **connection strings** are stored in environment variables on Azure App Service, developers that use any web app frameworks (such as PHP) can easily retrieve these values.</span></span> <span data-ttu-id="5a78b-174">Viz [webové stránky Windows Azure v Stefan Schackow: jak řetězce aplikace a připojovací řetězce fungují](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) na blogovém příspěvku, který ukazuje fragment php pro čtení nastavení aplikace a připojovacích řetězců.</span><span class="sxs-lookup"><span data-stu-id="5a78b-174">See Stefan Schackow's [Windows Azure Web Sites: How Application Strings and Connection Strings Work](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) blog post which shows a PHP snippet to read app settings and connection strings.</span></span>

## <a name="notes-for-on-premises-servers"></a><span data-ttu-id="5a78b-175">Poznámky pro místní servery</span><span class="sxs-lookup"><span data-stu-id="5a78b-175">Notes for on-premises servers</span></span>

<span data-ttu-id="5a78b-176">Pokud nasazujete na místní webové servery, můžete zajistit zabezpečení tajných klíčů [šifrováním konfiguračních oddílů konfiguračních souborů](https://msdn.microsoft.com/library/ff647398.aspx).</span><span class="sxs-lookup"><span data-stu-id="5a78b-176">If you are deploying to on-premises web servers, you can help secure secrets by [encrypting the configuration sections of configuration files](https://msdn.microsoft.com/library/ff647398.aspx).</span></span> <span data-ttu-id="5a78b-177">Jako alternativu můžete použít stejný přístup doporučený pro Azure websites: zachovat nastavení vývoje v konfiguračních souborech a použít hodnoty proměnných prostředí pro nastavení produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="5a78b-177">As an alternative, you can use the same approach recommended for Azure Websites: keep development settings in configuration files, and use environment variable values for production settings.</span></span> <span data-ttu-id="5a78b-178">V takovém případě je však nutné napsat kód aplikace pro funkce, které jsou automaticky na webu Azure websites: načíst nastavení z proměnných prostředí a použít tyto hodnoty místo nastavení konfiguračního souboru nebo použít nastavení konfiguračního souboru, když proměnné prostředí se nenašly.</span><span class="sxs-lookup"><span data-stu-id="5a78b-178">In this case, however, you have to write application code for functionality that is automatic in Azure Websites: retrieve settings from environment variables and use those values in place of configuration file settings, or use configuration file settings when environment variables are not found.</span></span>

<a id="addRes"></a>
## <a name="additional-resources"></a><span data-ttu-id="5a78b-179">Další materiály a zdroje informací</span><span class="sxs-lookup"><span data-stu-id="5a78b-179">Additional Resources</span></span>

<span data-ttu-id="5a78b-180">Příklad skriptu PowerShellu, který vytvoří webovou aplikaci a databázi, nastaví připojovací řetězec + nastavení aplikace. Stáhněte si [New-AzureWebsitewithDB. ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) z [knihovny skriptů Azure](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span><span class="sxs-lookup"><span data-stu-id="5a78b-180">For an example of a PowerShell script that creates a web app + database, sets the connection string + app settings, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) from the [Azure Script library](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span></span> 

<span data-ttu-id="5a78b-181">Viz [webové stránky Windows Azure v Stefan Schackow: jak fungují řetězce aplikace a připojovací řetězce.](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)</span><span class="sxs-lookup"><span data-stu-id="5a78b-181">See Stefan Schackow's [Windows Azure Web Sites: How Application Strings and Connection Strings Work](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)</span></span>

<span data-ttu-id="5a78b-182">Zvláštní díky Barryho Dorrans ( [@blowdart](https://twitter.com/blowdart) ) a Carlos Farre pro kontrolu.</span><span class="sxs-lookup"><span data-stu-id="5a78b-182">Special thanks to Barry Dorrans ( [@blowdart](https://twitter.com/blowdart) ) and Carlos Farre for reviewing.</span></span>
