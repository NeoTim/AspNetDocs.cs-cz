---
uid: identity/overview/extensibility/overview-of-custom-storage-providers-for-aspnet-identity
title: Přehled zprostředkovatelů vlastních úložišť pro ASP.NET Identity ASP.NET 4. x
author: Rick-Anderson
description: ASP.NET Identity je rozšiřitelný systém, který umožňuje vytvořit vlastního poskytovatele úložiště a zapojit ho do aplikace bez nutnosti znovu pracovat s aplikace...
ms.author: riande
ms.date: 10/13/2014
ms.assetid: 681a9204-462e-4260-9a0b-19f0644d6ad7
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/extensibility/overview-of-custom-storage-providers-for-aspnet-identity
msc.type: authoredcontent
ms.openlocfilehash: 21baedf6285b411f89627df9ca25d47a2a42e387
ms.sourcegitcommit: 88fc80e3f65aebdf61ec9414810ddbc31c543f04
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/22/2020
ms.locfileid: "76519099"
---
# <a name="overview-of-custom-storage-providers-for-aspnet-identity"></a><span data-ttu-id="c4cfb-103">Přehled poskytovatelů vlastního úložiště pro ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="c4cfb-103">Overview of Custom Storage Providers for ASP.NET Identity</span></span>

<span data-ttu-id="c4cfb-104">podle [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="c4cfb-105">ASP.NET Identity je rozšiřitelný systém, který umožňuje vytvořit vlastního poskytovatele úložiště a připojit ho k aplikaci bez nutnosti opětovného zpracování aplikace.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-105">ASP.NET Identity is an extensible system which enables you to create your own storage provider and plug it into your application without re-working the application.</span></span> <span data-ttu-id="c4cfb-106">Toto téma popisuje, jak vytvořit přizpůsobeného poskytovatele úložiště pro ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-106">This topic describes how to create a customized storage provider for ASP.NET Identity.</span></span> <span data-ttu-id="c4cfb-107">Popisuje důležité koncepty pro vytvoření vlastního poskytovatele úložiště, ale nejedná se o podrobný návod k implementaci vlastního poskytovatele úložiště.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-107">It covers the important concepts for creating your own storage provider, but it is not step-by-step walkthrough of implementing a custom storage provider.</span></span>
> 
> <span data-ttu-id="c4cfb-108">Příklad implementace vlastního poskytovatele úložiště najdete v tématu [implementace vlastního poskytovatele úložiště ASP.NET identity MySQL](implementing-a-custom-mysql-aspnet-identity-storage-provider.md).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-108">For an example of implementing a custom storage provider, see [Implementing a Custom MySQL ASP.NET Identity Storage Provider](implementing-a-custom-mysql-aspnet-identity-storage-provider.md).</span></span>
> 
> <span data-ttu-id="c4cfb-109">Toto téma bylo aktualizováno pro ASP.NET Identity 2,0.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-109">This topic was updated for ASP.NET Identity 2.0.</span></span>
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="c4cfb-110">Verze softwaru použité v tomto kurzu</span><span class="sxs-lookup"><span data-stu-id="c4cfb-110">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="c4cfb-111">Visual Studio 2013 s aktualizací Update 2</span><span class="sxs-lookup"><span data-stu-id="c4cfb-111">Visual Studio 2013 with Update 2</span></span>
> - <span data-ttu-id="c4cfb-112">ASP.NET Identity 2</span><span class="sxs-lookup"><span data-stu-id="c4cfb-112">ASP.NET Identity 2</span></span>

## <a name="introduction"></a><span data-ttu-id="c4cfb-113">Úvod</span><span class="sxs-lookup"><span data-stu-id="c4cfb-113">Introduction</span></span>

<span data-ttu-id="c4cfb-114">Ve výchozím nastavení ukládá ASP.NET Identity systém informace o uživatelích do databáze SQL Server a k vytvoření databáze používá Entity Framework Code First.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-114">By default, the ASP.NET Identity system stores user information in a SQL Server database, and uses Entity Framework Code First to create the database.</span></span> <span data-ttu-id="c4cfb-115">U mnoha aplikací funguje tento přístup dobře.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-115">For many applications, this approach works well.</span></span> <span data-ttu-id="c4cfb-116">Můžete ale chtít použít jiný typ trvalého mechanismu, jako je například Azure Table Storage, nebo už máte databázové tabulky s velmi odlišnou strukturou, než je výchozí implementace.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-116">However, you may prefer to use a different type of persistence mechanism, such as Azure Table Storage, or you may already have database tables with a very different structure than the default implementation.</span></span> <span data-ttu-id="c4cfb-117">V obou případech můžete napsat přizpůsobeného poskytovatele úložného mechanismu a připojit tohoto poskytovatele k vaší aplikaci.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-117">In either case, you can write a customized provider for your storage mechanism and plug that provider into your application.</span></span>

<span data-ttu-id="c4cfb-118">ASP.NET Identity je ve výchozím nastavení součástí mnoha šablon Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-118">ASP.NET Identity is included by default in many of the Visual Studio 2013 templates.</span></span> <span data-ttu-id="c4cfb-119">Aktualizace ASP.NET Identity můžete získat prostřednictvím [balíčku Microsoft ASPNET identity EntityFramework NuGet](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-119">You can get updates to ASP.NET Identity through [Microsoft AspNet Identity EntityFramework NuGet package](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/).</span></span>

<span data-ttu-id="c4cfb-120">Toto téma obsahuje následující oddíly:</span><span class="sxs-lookup"><span data-stu-id="c4cfb-120">This topic includes the following sections:</span></span>

- [<span data-ttu-id="c4cfb-121">Pochopení architektury</span><span class="sxs-lookup"><span data-stu-id="c4cfb-121">Understand the architecture</span></span>](#architecture)
- [<span data-ttu-id="c4cfb-122">Pochopení dat, která jsou uložena</span><span class="sxs-lookup"><span data-stu-id="c4cfb-122">Understand the data that is stored</span></span>](#data)
- [<span data-ttu-id="c4cfb-123">Vytvoření vrstvy přístupu k datům</span><span class="sxs-lookup"><span data-stu-id="c4cfb-123">Create the data access layer</span></span>](#dal)
- [<span data-ttu-id="c4cfb-124">Přizpůsobení třídy uživatele</span><span class="sxs-lookup"><span data-stu-id="c4cfb-124">Customize the user class</span></span>](#user)
- [<span data-ttu-id="c4cfb-125">Přizpůsobení úložiště uživatele</span><span class="sxs-lookup"><span data-stu-id="c4cfb-125">Customize the user store</span></span>](#userstore)
- [<span data-ttu-id="c4cfb-126">Přizpůsobení třídy role</span><span class="sxs-lookup"><span data-stu-id="c4cfb-126">Customize the role class</span></span>](#role)
- [<span data-ttu-id="c4cfb-127">Přizpůsobení úložiště rolí</span><span class="sxs-lookup"><span data-stu-id="c4cfb-127">Customize the role store</span></span>](#rolestore)
- [<span data-ttu-id="c4cfb-128">Překonfigurujte aplikaci tak, aby používala nového poskytovatele úložiště.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-128">Reconfigure application to use new storage provider</span></span>](#reconfigure)
- [<span data-ttu-id="c4cfb-129">Další implementace vlastních poskytovatelů úložiště</span><span class="sxs-lookup"><span data-stu-id="c4cfb-129">Other implementations of custom storage providers</span></span>](#other)

<a id="architecture"></a>
## <a name="understand-the-architecture"></a><span data-ttu-id="c4cfb-130">Pochopení architektury</span><span class="sxs-lookup"><span data-stu-id="c4cfb-130">Understand the architecture</span></span>

<span data-ttu-id="c4cfb-131">ASP.NET Identity se skládá ze tříd nazvaných manažeři a obchody.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-131">ASP.NET Identity consists of classes called managers and stores.</span></span> <span data-ttu-id="c4cfb-132">Správci jsou třídy vysoké úrovně, které vývojář aplikace používá k provádění operací, jako je například vytvoření uživatele, v systému ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-132">Managers are high-level classes which an application developer uses to perform operations, such as creating a user, in the ASP.NET Identity system.</span></span> <span data-ttu-id="c4cfb-133">Úložiště jsou třídy nižší úrovně, které určují, jak jsou trvalé entity, jako jsou uživatelé a role.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-133">Stores are lower-level classes that specify how entities, such as users and roles, are persisted.</span></span> <span data-ttu-id="c4cfb-134">Obchody jsou úzce spojeny s mechanismem trvalosti, ale manažeři jsou oddělené od úložišť, což znamená, že můžete nahradit mechanismus trvalosti bez přerušení celé aplikace.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-134">Stores are closely coupled with the persistence mechanism, but managers are decoupled from stores which means you can replace the persistence mechanism without disrupting the entire application.</span></span>

<span data-ttu-id="c4cfb-135">Následující diagram znázorňuje, jak vaše webová aplikace komunikuje s manažery, a ukládá interakce s vrstvami přístupu k datům.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-135">The following diagram shows how your web application interacts with the managers, and stores interact with the data access layer.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image1.png)

<span data-ttu-id="c4cfb-136">Chcete-li vytvořit přizpůsobeného poskytovatele úložiště pro ASP.NET Identity, je nutné vytvořit zdroj dat, vrstvu přístupu k datům a třídy úložiště, které pracují s touto vrstvou přístupu k datům.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-136">To create a customized storage provider for ASP.NET Identity, you have to create the data source, the data access layer, and the store classes that interact with this data access layer.</span></span> <span data-ttu-id="c4cfb-137">Můžete dál používat stejná rozhraní API správce k provádění operací s daty na uživateli, ale teď se data ukládají do jiného úložného systému.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-137">You can continue using the same manager APIs to perform data operations on the user but now that data is saved to a different storage system.</span></span>

<span data-ttu-id="c4cfb-138">Nemusíte přizpůsobovat třídy manažera, protože při vytváření nové instance UserManager nebo RoleManager poskytnete typ třídy uživatele a předá instanci třídy úložiště jako argument.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-138">You do not need to customize the manager classes because when creating a new instance of UserManager or RoleManager you provide the type of the user class and pass an instance of the store class as an argument.</span></span> <span data-ttu-id="c4cfb-139">Tento přístup umožňuje zapojit přizpůsobené třídy do existující struktury.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-139">This approach enables you to plug your customized classes into the existing structure.</span></span> <span data-ttu-id="c4cfb-140">Uvidíte, jak vytvořit instanci UserManager a RoleManager s přizpůsobenými třídami úložiště v oddílu [Změna konfigurace aplikace tak, aby používala nového poskytovatele úložiště](#reconfigure).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-140">You will see how to instantiate UserManager and RoleManager with your customized store classes in the section [Reconfigure application to use new storage provider](#reconfigure).</span></span>

<a id="data"></a>
## <a name="understand-the-data-that-is-stored"></a><span data-ttu-id="c4cfb-141">Pochopení dat, která jsou uložena</span><span class="sxs-lookup"><span data-stu-id="c4cfb-141">Understand the data that is stored</span></span>

<span data-ttu-id="c4cfb-142">Chcete-li implementovat vlastního poskytovatele úložiště, je třeba pochopit typy dat používaných v ASP.NET Identity a rozhodnout, jaké funkce jsou relevantní pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-142">To implement a custom storage provider, you must understand the types of data used with ASP.NET Identity, and decide which features are relevant to your application.</span></span>

| <span data-ttu-id="c4cfb-143">Datové</span><span class="sxs-lookup"><span data-stu-id="c4cfb-143">Data</span></span> | <span data-ttu-id="c4cfb-144">Popis</span><span class="sxs-lookup"><span data-stu-id="c4cfb-144">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c4cfb-145">Uživatelé</span><span class="sxs-lookup"><span data-stu-id="c4cfb-145">Users</span></span> | <span data-ttu-id="c4cfb-146">Registrovaní uživatelé vašeho webu.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-146">Registered users of your web site.</span></span> <span data-ttu-id="c4cfb-147">Zahrnuje ID uživatele a uživatelské jméno.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-147">Includes the user Id and user name.</span></span> <span data-ttu-id="c4cfb-148">Může zahrnovat heslo s algoritmem hash, pokud se uživatelé přihlašují pomocí přihlašovacích údajů, které jsou specifické pro vaši lokalitu (místo použití přihlašovacích údajů z externího webu, jako je Facebook), a bezpečnostní razítko, které určuje, jestli se v přihlašovacích údajích uživatele změnila.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-148">Might include a hashed password if users log in with credentials that are specific to your site (rather than using credentials from an external site like Facebook), and security stamp to indicate whether anything has changed in the user credentials.</span></span> <span data-ttu-id="c4cfb-149">Může obsahovat taky e-mailovou adresu, telefonní číslo, to, jestli je povolené dvojúrovňové ověřování, aktuální počet neúspěšných přihlášení a údaj o tom, jestli je účet zamčený.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-149">Might also include email address, phone number, whether two factor authentication is enabled, the current number of failed logins, and whether an account has been locked.</span></span> |
| <span data-ttu-id="c4cfb-150">Deklarace identity uživatelů</span><span class="sxs-lookup"><span data-stu-id="c4cfb-150">User Claims</span></span> | <span data-ttu-id="c4cfb-151">Sada příkazů (nebo deklarací identity) o uživateli, který představuje identitu uživatele.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-151">A set of statements (or claims) about the user that represent the user's identity.</span></span> <span data-ttu-id="c4cfb-152">Může povolit větší výraz identity uživatele, než je možné dosáhnout prostřednictvím rolí.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-152">Can enable greater expression of the user's identity than can be achieved through roles.</span></span> |
| <span data-ttu-id="c4cfb-153">Přihlášení uživatelů</span><span class="sxs-lookup"><span data-stu-id="c4cfb-153">User Logins</span></span> | <span data-ttu-id="c4cfb-154">Informace o externím poskytovateli ověřování (jako Facebook), který se použije při přihlašování uživatele</span><span class="sxs-lookup"><span data-stu-id="c4cfb-154">Information about the external authentication provider (like Facebook) to use when logging in a user.</span></span> |
| <span data-ttu-id="c4cfb-155">Role</span><span class="sxs-lookup"><span data-stu-id="c4cfb-155">Roles</span></span> | <span data-ttu-id="c4cfb-156">Skupiny autorizace pro váš web.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-156">Authorization groups for your site.</span></span> <span data-ttu-id="c4cfb-157">Zahrnuje ID role a název role (například admin nebo zaměstnanec).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-157">Includes the role Id and role name (like "Admin" or "Employee").</span></span> |

<a id="dal"></a>
## <a name="create-the-data-access-layer"></a><span data-ttu-id="c4cfb-158">Vytvoření vrstvy přístupu k datům</span><span class="sxs-lookup"><span data-stu-id="c4cfb-158">Create the data access layer</span></span>

<span data-ttu-id="c4cfb-159">V tomto tématu se předpokládá, že jste obeznámeni s mechanismem trvalosti, který budete používat, a vytváření entit pro tento mechanismus.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-159">This topic assumes you are familiar with the persistence mechanism that you are going to use and how to create entities for that mechanism.</span></span> <span data-ttu-id="c4cfb-160">Toto téma neposkytuje podrobné informace o tom, jak vytvořit úložiště nebo třídy přístupu k datům. místo toho poskytuje některé návrhy na rozhodnutích o návrhu, která je potřeba udělat při práci s ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-160">This topic does not provide details about how to create the repositories or data access classes; instead, it provides some suggestions about the design decisions you need to make when working with ASP.NET Identity.</span></span>

<span data-ttu-id="c4cfb-161">Při navrhování úložišť pro vlastního poskytovatele úložiště máte spoustu volnosti.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-161">You have a lot of freedom when designing the repositories for a customized store provider.</span></span> <span data-ttu-id="c4cfb-162">Stačí vytvořit úložiště pro funkce, které chcete v aplikaci použít.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-162">You only need to create repositories for features that you intend to use in your application.</span></span> <span data-ttu-id="c4cfb-163">Pokud například v aplikaci nepoužíváte role, nemusíte vytvářet úložiště pro role nebo role uživatelů.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-163">For example, if you are not using roles in your application, you do not need to create storage for roles or user roles.</span></span> <span data-ttu-id="c4cfb-164">Vaše technologie a stávající infrastruktura mohou vyžadovat strukturu, která se velmi liší od výchozí implementace ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-164">Your technology and existing infrastructure may require a structure that is very different from the default implementation of ASP.NET Identity.</span></span> <span data-ttu-id="c4cfb-165">Ve vrstvě pro přístup k datům poskytnete logiku pro práci se strukturou vašich úložišť.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-165">In your data access layer, you provide the logic to work with the structure of your repositories.</span></span>

<span data-ttu-id="c4cfb-166">Implementaci úložišť dat MySQL pro ASP.NET Identity 2,0 naleznete v tématu [MySQLIdentity. SQL](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/MySQLIdentity.sql).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-166">For a MySQL implementation of data repositories for ASP.NET Identity 2.0, see [MySQLIdentity.sql](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/MySQLIdentity.sql).</span></span>

<span data-ttu-id="c4cfb-167">Ve vrstvě přístupu k datům poskytnete logiku pro uložení dat z ASP.NET Identity do zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-167">In the data access layer, you provide the logic to save the data from ASP.NET Identity to your data source.</span></span> <span data-ttu-id="c4cfb-168">Vrstva přístupu k datům pro vlastního poskytovatele úložiště může obsahovat následující třídy pro ukládání informací o uživatelích a rolích.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-168">The data access layer for your customized storage provider might include the following classes to store user and role information.</span></span>

| <span data-ttu-id="c4cfb-169">Třída</span><span class="sxs-lookup"><span data-stu-id="c4cfb-169">Class</span></span> | <span data-ttu-id="c4cfb-170">Popis</span><span class="sxs-lookup"><span data-stu-id="c4cfb-170">Description</span></span> | <span data-ttu-id="c4cfb-171">Příklad</span><span class="sxs-lookup"><span data-stu-id="c4cfb-171">Example</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c4cfb-172">Kontext</span><span class="sxs-lookup"><span data-stu-id="c4cfb-172">Context</span></span> | <span data-ttu-id="c4cfb-173">Zapouzdřuje informace pro připojení k vašemu mechanismu trvalosti a provádění dotazů.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-173">Encapsulates the information to connect to your persistence mechanism and execute queries.</span></span> <span data-ttu-id="c4cfb-174">Tato třída je střední až do vaší vrstvy přístupu k datům.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-174">This class is central to your data access layer.</span></span> <span data-ttu-id="c4cfb-175">Ostatní třídy dat budou vyžadovat, aby instance této třídy prováděla své operace.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-175">The other data classes will require an instance of this class to perform their operations.</span></span> <span data-ttu-id="c4cfb-176">Vaše třídy úložiště se inicializují také instancí této třídy.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-176">You will also initialize your store classes with an instance of this class.</span></span> | [<span data-ttu-id="c4cfb-177">MySQLDatabase</span><span class="sxs-lookup"><span data-stu-id="c4cfb-177">MySQLDatabase</span></span>](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/MySQLDatabase.cs) |
| <span data-ttu-id="c4cfb-178">Uživatelské úložiště</span><span class="sxs-lookup"><span data-stu-id="c4cfb-178">User Storage</span></span> | <span data-ttu-id="c4cfb-179">Ukládá a načítá informace o uživateli (například uživatelské jméno a hodnota hash hesla).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-179">Stores and retrieves user information (such as user name and password hash).</span></span> | [<span data-ttu-id="c4cfb-180">UserTable (MySQL)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-180">UserTable (MySQL)</span></span>](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/UserTable.cs) |
| <span data-ttu-id="c4cfb-181">Úložiště rolí</span><span class="sxs-lookup"><span data-stu-id="c4cfb-181">Role Storage</span></span> | <span data-ttu-id="c4cfb-182">Ukládá a načítá informace o rolích (například název role).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-182">Stores and retrieves role information (such as the role name).</span></span> | [<span data-ttu-id="c4cfb-183">RoleTable (MySQL)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-183">RoleTable (MySQL)</span></span>](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/RoleTable.cs) |
| <span data-ttu-id="c4cfb-184">Úložiště UserClaims</span><span class="sxs-lookup"><span data-stu-id="c4cfb-184">UserClaims Storage</span></span> | <span data-ttu-id="c4cfb-185">Ukládá a načítá informace o deklaraci identity uživatele (například typ a hodnotu deklarace identity).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-185">Stores and retrieves user claim information (such as the claim type and value).</span></span> | [<span data-ttu-id="c4cfb-186">UserClaimsTable (MySQL)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-186">UserClaimsTable (MySQL)</span></span>](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/UserClaimsTable.cs) |
| <span data-ttu-id="c4cfb-187">Úložiště UserLogins</span><span class="sxs-lookup"><span data-stu-id="c4cfb-187">UserLogins Storage</span></span> | <span data-ttu-id="c4cfb-188">Ukládá a načítá přihlašovací informace uživatele (například externího poskytovatele ověřování).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-188">Stores and retrieves user login information (such as an external authentication provider).</span></span> | [<span data-ttu-id="c4cfb-189">UserLoginsTable (MySQL)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-189">UserLoginsTable (MySQL)</span></span>](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/UserLoginsTable.cs) |
| <span data-ttu-id="c4cfb-190">Úložiště položky UserRole</span><span class="sxs-lookup"><span data-stu-id="c4cfb-190">UserRole Storage</span></span> | <span data-ttu-id="c4cfb-191">Ukládá a načítá, ke kterým rolím je uživatel přiřazen.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-191">Stores and retrieves which roles a user is assigned to.</span></span> | [<span data-ttu-id="c4cfb-192">UserRoleTable (MySQL)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-192">UserRoleTable (MySQL)</span></span>](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/UserRoleTable.cs) |

<span data-ttu-id="c4cfb-193">Znovu stačí pouze implementovat třídy, které chcete použít ve své aplikaci.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-193">Again, you only need to implement the classes that you intend to use in your application.</span></span>

<span data-ttu-id="c4cfb-194">Ve třídách pro přístup k datům poskytnete kód pro provádění operací s daty pro konkrétní mechanismus trvalosti.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-194">In the data access classes, you provide code to perform data operations for your particular persistence mechanism.</span></span> <span data-ttu-id="c4cfb-195">Například v rámci implementace MySQL obsahuje Třída User třídu metodu pro vložení nového záznamu do tabulky databáze uživatelé.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-195">For example, within the MySQL implementation, the UserTable class contains a method to insert a new record into the Users database table.</span></span> <span data-ttu-id="c4cfb-196">Proměnná s názvem `_database` je instancí třídy MySQLDatabase.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-196">The variable named `_database` is an instance of the MySQLDatabase class.</span></span>

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample1.cs)]

<span data-ttu-id="c4cfb-197">Po vytvoření třídy pro přístup k datům je nutné vytvořit třídy úložiště, které volají konkrétní metody ve vrstvě přístupu k datům.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-197">After creating your data access classes, you must create store classes that call the specific methods in the data access layer.</span></span>

<a id="user"></a>
## <a name="customize-the-user-class"></a><span data-ttu-id="c4cfb-198">Přizpůsobení třídy uživatele</span><span class="sxs-lookup"><span data-stu-id="c4cfb-198">Customize the user class</span></span>

<span data-ttu-id="c4cfb-199">Při implementaci vlastního poskytovatele úložiště je nutné vytvořit třídu uživatele, která je ekvivalentní třídě [IdentityUser](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework.identityuser(v=vs.108).aspx) v oboru názvů [Microsoft. ASP. NET. identity. EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) :</span><span class="sxs-lookup"><span data-stu-id="c4cfb-199">When implementing your own storage provider, you must create a user class which is equivalent to the [IdentityUser](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework.identityuser(v=vs.108).aspx) class in the [Microsoft.ASP.NET.Identity.EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) namespace:</span></span>

<span data-ttu-id="c4cfb-200">Následující diagram znázorňuje třídu IdentityUser, kterou je nutné vytvořit a rozhraní pro implementaci v této třídě.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-200">The following diagram shows the IdentityUser class that you must create and the interface to implement in this class.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image2.png)

<span data-ttu-id="c4cfb-201">Rozhraní [&gt;IUser&lt;TKey](https://msdn.microsoft.com/library/dn613291(v=vs.108).aspx) definuje vlastnosti, které se UserManager pokusí zavolat při provádění požadovaných operací.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-201">The [IUser&lt;TKey&gt;](https://msdn.microsoft.com/library/dn613291(v=vs.108).aspx) interface defines the properties that the UserManager attempts to call when performing requested operations.</span></span> <span data-ttu-id="c4cfb-202">Rozhraní obsahuje dvě vlastnosti – ID a uživatelské jméno.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-202">The interface contains two properties - Id and UserName.</span></span> <span data-ttu-id="c4cfb-203">Rozhraní [&gt;IUser&lt;TKey](https://msdn.microsoft.com/library/dn613291(v=vs.108).aspx) umožňuje zadat typ klíče pro uživatele prostřednictvím obecného parametru **TKey** .</span><span class="sxs-lookup"><span data-stu-id="c4cfb-203">The [IUser&lt;TKey&gt;](https://msdn.microsoft.com/library/dn613291(v=vs.108).aspx) interface enables you to specify the type of the key for the user through the generic **TKey** parameter.</span></span> <span data-ttu-id="c4cfb-204">Typ vlastnosti ID se shoduje s hodnotou parametru TKey.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-204">The type of the Id property matches the value of the TKey parameter.</span></span>

<span data-ttu-id="c4cfb-205">Architektura identity také poskytuje rozhraní [IUser](https://msdn.microsoft.com/library/microsoft.aspnet.identity.iuser(v=vs.108).aspx) (bez obecného parametru), pokud chcete použít řetězcovou hodnotu pro klíč.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-205">The Identity framework also provides the [IUser](https://msdn.microsoft.com/library/microsoft.aspnet.identity.iuser(v=vs.108).aspx) interface (without the generic parameter) when you want to use a string value for the key.</span></span>

<span data-ttu-id="c4cfb-206">Třída IdentityUser implementuje IUser a obsahuje všechny další vlastnosti nebo konstruktory pro uživatele na vašem webu.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-206">The IdentityUser class implements IUser and contains any additional properties or constructors for users on your web site.</span></span> <span data-ttu-id="c4cfb-207">Následující příklad ukazuje třídu IdentityUser, která používá celé číslo pro klíč.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-207">The following example shows an IdentityUser class that uses an integer for the key.</span></span> <span data-ttu-id="c4cfb-208">Pole ID je nastaveno na hodnotu **int** , aby odpovídala hodnotě obecného parametru.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-208">The Id field is set to **int** to match the value of the generic parameter.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample2.cs)]

 <span data-ttu-id="c4cfb-209">Úplnou implementaci najdete v tématu [IdentityUser (MySQL)](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/IdentityUser.cs).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-209">For a complete implementation, see [IdentityUser (MySQL)](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/IdentityUser.cs).</span></span> 

<a id="userstore"></a>
## <a name="customize-the-user-store"></a><span data-ttu-id="c4cfb-210">Přizpůsobení úložiště uživatele</span><span class="sxs-lookup"><span data-stu-id="c4cfb-210">Customize the user store</span></span>

<span data-ttu-id="c4cfb-211">Vytvoříte také třídu UserStore, která poskytuje metody pro všechny operace s daty na uživateli.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-211">You also create a UserStore class that provides the methods for all data operations on the user.</span></span> <span data-ttu-id="c4cfb-212">Tato třída je ekvivalentní k třídě [UserStore&lt;TUser&gt;](https://msdn.microsoft.com/library/dn315446(v=vs.108).aspx) v oboru názvů [Microsoft. ASP. NET. identity. EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) .</span><span class="sxs-lookup"><span data-stu-id="c4cfb-212">This class is equivalent to the [UserStore&lt;TUser&gt;](https://msdn.microsoft.com/library/dn315446(v=vs.108).aspx) class in the [Microsoft.ASP.NET.Identity.EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) namespace.</span></span> <span data-ttu-id="c4cfb-213">Ve třídě UserStore implementujete [IUserStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613276(v=vs.108).aspx) a kterékoli z volitelných rozhraní.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-213">In your UserStore class, you implement the [IUserStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613276(v=vs.108).aspx) and any of the optional interfaces.</span></span> <span data-ttu-id="c4cfb-214">Můžete vybrat, která volitelná rozhraní budou implementována na základě funkcí, které chcete poskytnout do aplikace.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-214">You select which optional interfaces to implement based on the functionality you wish to provide in your application.</span></span>

<span data-ttu-id="c4cfb-215">Následující obrázek ukazuje třídu UserStore, kterou je nutné vytvořit, a relevantní rozhraní.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-215">The following image shows the UserStore class you must create and the relevant interfaces.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image3.png)

<span data-ttu-id="c4cfb-216">Výchozí šablona projektu v aplikaci Visual Studio obsahuje kód, který předpokládá, že mnoho volitelných rozhraní bylo implementováno v úložišti uživatele.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-216">The default project template in Visual Studio contains code that assumes many of the optional interfaces have been implemented in the user store.</span></span> <span data-ttu-id="c4cfb-217">Pokud používáte výchozí šablonu s přizpůsobeným uživatelským úložištěm, musíte buď implementovat volitelná rozhraní v úložišti uživatelů, nebo změnit kód šablony tak, aby již nevolal metody v rozhraních, které jste neimplementovali.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-217">If you are using the default template with a customized user store, you must either implement optional interfaces in your user store or alter the template code to no longer call methods in the interfaces you have not implemented.</span></span>

 <span data-ttu-id="c4cfb-218">Následující příklad ukazuje jednoduchou třídu úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-218">The following example shows a simple user store class.</span></span> <span data-ttu-id="c4cfb-219">Obecný parametr **TUser** přebírá typ uživatelské třídy, což je obvykle třída IdentityUser, kterou jste definovali.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-219">The **TUser** generic parameter takes the type of your user class which usually is the IdentityUser class you defined.</span></span> <span data-ttu-id="c4cfb-220">Obecný parametr **TKey** přebírá typ vašeho uživatelského klíče.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-220">The **TKey** generic parameter takes the type of your user key.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample3.cs)]

 <span data-ttu-id="c4cfb-221">V tomto příkladu konstruktor, který přebírá parametr s názvem *databáze* typu ExampleDatabase, je pouze ilustrace, jak předat vaší třídu přístupu k datům.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-221">In this example, the constructor that takes a parameter named *database* of type ExampleDatabase is only an illustration of how to pass in your data access class.</span></span> <span data-ttu-id="c4cfb-222">Například v implementaci MySQL tento konstruktor přijímá parametr typu MySQLDatabase.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-222">For example, in the MySQL implementation, this constructor takes a parameter of type MySQLDatabase.</span></span> 

<span data-ttu-id="c4cfb-223">V rámci vaší třídy UserStore používáte třídy pro přístup k datům, které jste vytvořili k provádění operací.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-223">Within your UserStore class, you use the data access classes that you created to perform operations.</span></span> <span data-ttu-id="c4cfb-224">Například v implementaci MySQL má třída UserStore metodu CreateAsync, která používá instanci uživatele k vložení nového záznamu.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-224">For example, in the MySQL implementation, the UserStore class has the CreateAsync method which uses an instance of UserTable to insert a new record.</span></span> <span data-ttu-id="c4cfb-225">Metoda **INSERT** objektu **User** je stejná jako metoda, která byla uvedena v předchozí části.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-225">The **Insert** method on the **userTable** object is the same method that was shown in the previous section.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample4.cs)]

### <a name="interfaces-to-implement-when-customizing-user-store"></a><span data-ttu-id="c4cfb-226">Rozhraní k implementaci při přizpůsobení úložiště uživatele</span><span class="sxs-lookup"><span data-stu-id="c4cfb-226">Interfaces to implement when customizing user store</span></span>

<span data-ttu-id="c4cfb-227">Další obrázek ukazuje více podrobností o funkcích definovaných v jednotlivých rozhraních.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-227">The next image shows more details about the functionality defined in each interface.</span></span> <span data-ttu-id="c4cfb-228">Všechna volitelná rozhraní dědí od IUserStore.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-228">All of the optional interfaces inherit from IUserStore.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image4.png)

- <span data-ttu-id="c4cfb-229">**IUserStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-229">**IUserStore**</span></span>  
  <span data-ttu-id="c4cfb-230">Rozhraní [TKey&gt;IUserStore&lt;TUser](https://msdn.microsoft.com/library/dn613278(v=vs.108).aspx) je jediné rozhraní, které musíte implementovat do svého úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-230">The [IUserStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613278(v=vs.108).aspx) interface is the only interface you must implement in your user store.</span></span> <span data-ttu-id="c4cfb-231">Definuje metody pro vytváření, aktualizaci, odstraňování a načítání uživatelů.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-231">It defines methods for creating, updating, deleting, and retrieving users.</span></span>
- <span data-ttu-id="c4cfb-232">**IUserClaimStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-232">**IUserClaimStore**</span></span>  
  <span data-ttu-id="c4cfb-233">Rozhraní [IUserClaimStore&lt;TUser, rozhraní TKey&gt;](https://msdn.microsoft.com/library/dn613265(v=vs.108).aspx) definuje metody, které je nutné implementovat do úložiště uživatele, aby bylo možné povolit deklarace identity uživatelů.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-233">The [IUserClaimStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613265(v=vs.108).aspx) interface defines the methods you must implement in your user store to enable user claims.</span></span> <span data-ttu-id="c4cfb-234">Obsahuje metody nebo přidávání, odebírání a načítání deklarací identity uživatelů.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-234">It contains methods or adding, removing and retrieving user claims.</span></span>
- <span data-ttu-id="c4cfb-235">**IUserLoginStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-235">**IUserLoginStore**</span></span>  
  <span data-ttu-id="c4cfb-236">[IUserLoginStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613272(v=vs.108).aspx) definuje metody, které je nutné implementovat do úložiště uživatele, aby bylo možné povolit externí poskytovatele ověřování.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-236">The [IUserLoginStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613272(v=vs.108).aspx) defines the methods you must implement in your user store to enable external authentication providers.</span></span> <span data-ttu-id="c4cfb-237">Obsahuje metody pro přidání, odebrání a načtení přihlášení uživatelů a metodu pro načtení uživatele na základě přihlašovacích údajů.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-237">It contains methods for adding, removing and retrieving user logins, and a method for retrieving a user based on the login information.</span></span>
- <span data-ttu-id="c4cfb-238">**IUserRoleStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-238">**IUserRoleStore**</span></span>  
  <span data-ttu-id="c4cfb-239">Rozhraní [IUserRoleStore&lt;TKey, rozhraní TUser&gt;](https://msdn.microsoft.com/library/dn613276(v=vs.108).aspx) definuje metody, které je nutné implementovat do vašeho úložiště uživatelů pro namapování uživatele na roli.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-239">The [IUserRoleStore&lt;TKey, TUser&gt;](https://msdn.microsoft.com/library/dn613276(v=vs.108).aspx) interface defines the methods you must implement in your user store to map a user to a role.</span></span> <span data-ttu-id="c4cfb-240">Obsahuje metody pro přidání, odebrání a načtení rolí uživatele a metodu, která zkontroluje, jestli je uživatel přiřazený k roli.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-240">It contains methods to add, remove, and retrieve a user's roles, and a method to check if a user is assigned to a role.</span></span>
- <span data-ttu-id="c4cfb-241">**IUserPasswordStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-241">**IUserPasswordStore**</span></span>  
  <span data-ttu-id="c4cfb-242">Rozhraní [IUserPasswordStore&lt;TUser, rozhraní TKey&gt;](https://msdn.microsoft.com/library/dn613273(v=vs.108).aspx) definuje metody, které je nutné implementovat do úložiště uživatele, aby trvaly hesla s hodnotou hash.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-242">The [IUserPasswordStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613273(v=vs.108).aspx) interface defines the methods you must implement in your user store to persist hashed passwords.</span></span> <span data-ttu-id="c4cfb-243">Obsahuje metody pro získání a nastavení hash hesla a metodu, která označuje, jestli uživatel nastavil heslo.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-243">It contains methods for getting and setting the hashed password, and a method that indicates whether the user has set a password.</span></span>
- <span data-ttu-id="c4cfb-244">**IUserSecurityStampStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-244">**IUserSecurityStampStore**</span></span>  
  <span data-ttu-id="c4cfb-245">Rozhraní [IUserSecurityStampStore&lt;TUser, rozhraní TKey&gt;](https://msdn.microsoft.com/library/dn613277(v=vs.108).aspx) definuje metody, které je nutné implementovat do úložiště uživatele, aby bylo možné použít bezpečnostní razítko pro označení, zda se změnily informace o účtu uživatele.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-245">The [IUserSecurityStampStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613277(v=vs.108).aspx) interface defines the methods you must implement in your user store to use a security stamp for indicating whether the user's account information has changed.</span></span> <span data-ttu-id="c4cfb-246">Toto razítko se aktualizuje, když uživatel změní heslo, nebo přidá nebo odebere přihlášení.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-246">This stamp is updated when a user changes the password, or adds or removes logins.</span></span> <span data-ttu-id="c4cfb-247">Obsahuje metody pro získání a nastavení razítka zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-247">It contains methods for getting and setting the security stamp.</span></span>
- <span data-ttu-id="c4cfb-248">**IUserTwoFactorStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-248">**IUserTwoFactorStore**</span></span>  
  <span data-ttu-id="c4cfb-249">Rozhraní [IUserTwoFactorStore&lt;TUser, rozhraní TKey&gt;](https://msdn.microsoft.com/library/dn613279(v=vs.108).aspx) definuje metody, které je nutné implementovat pro implementaci dvou faktorů ověřování.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-249">The [IUserTwoFactorStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613279(v=vs.108).aspx) interface defines the methods you must implement to implement two factor authentication.</span></span> <span data-ttu-id="c4cfb-250">Obsahuje metody pro získání a nastavení, zda je pro uživatele povoleno dvojúrovňové ověřování.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-250">It contains methods for getting and setting whether two factor authentication is enabled for a user.</span></span>
- <span data-ttu-id="c4cfb-251">**IUserPhoneNumberStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-251">**IUserPhoneNumberStore**</span></span>  
  <span data-ttu-id="c4cfb-252">Rozhraní [IUserPhoneNumberStore&lt;TUser, rozhraní TKey&gt;](https://msdn.microsoft.com/library/dn613275(v=vs.108).aspx) definuje metody, které je nutné implementovat pro ukládání uživatelských telefonních čísel.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-252">The [IUserPhoneNumberStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613275(v=vs.108).aspx) interface defines the methods you must implement to store user phone numbers.</span></span> <span data-ttu-id="c4cfb-253">Obsahuje metody pro získání a nastavení telefonního čísla a zda je telefonní číslo potvrzené.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-253">It contains methods for getting and setting the phone number and whether the phone number is confirmed.</span></span>
- <span data-ttu-id="c4cfb-254">**IUserEmailStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-254">**IUserEmailStore**</span></span>  
  <span data-ttu-id="c4cfb-255">Rozhraní [IUserEmailStore&lt;TUser, rozhraní TKey&gt;](https://msdn.microsoft.com/library/dn613143(v=vs.108).aspx) definuje metody, které je nutné implementovat pro ukládání e-mailových adres uživatele.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-255">The [IUserEmailStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613143(v=vs.108).aspx) interface defines the methods you must implement to store user email addresses.</span></span> <span data-ttu-id="c4cfb-256">Obsahuje metody pro získání a nastavení e-mailové adresy a toho, jestli se e-mail potvrdí.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-256">It contains methods for getting and setting the email address and whether the email is confirmed.</span></span>
- <span data-ttu-id="c4cfb-257">**IUserLockoutStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-257">**IUserLockoutStore**</span></span>  
  <span data-ttu-id="c4cfb-258">Rozhraní [IUserLockoutStore&lt;TUser, rozhraní TKey&gt;](https://msdn.microsoft.com/library/dn613271(v=vs.108).aspx) definuje metody, které je nutné implementovat pro ukládání informací o zamykání účtu.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-258">The [IUserLockoutStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613271(v=vs.108).aspx) interface defines the methods you must implement to store information about locking an account.</span></span> <span data-ttu-id="c4cfb-259">Obsahuje metody pro získání aktuálního počtu neúspěšných pokusů o přístup, získání a nastavení, zda je možné účet uzamknout, získat a nastavit koncové datum zámku, zvýšit počet neúspěšných pokusů a resetovat počet neúspěšných pokusů.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-259">It contains methods for getting the current number of failed access attempts, getting and setting whether the account can be locked, getting and setting the lock out end date, incrementing the number of failed attempts, and resetting the number of failed attempts.</span></span>
- <span data-ttu-id="c4cfb-260">**IQueryableUserStore**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-260">**IQueryableUserStore**</span></span>  
  <span data-ttu-id="c4cfb-261">Rozhraní [IQueryableUserStore&lt;TUser, rozhraní TKey&gt;](https://msdn.microsoft.com/library/dn613267(v=vs.108).aspx) definuje členy, které musíte implementovat k poskytnutí Queryable úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-261">The [IQueryableUserStore&lt;TUser, TKey&gt;](https://msdn.microsoft.com/library/dn613267(v=vs.108).aspx) interface defines the members you must implement to provide a queryable user store.</span></span> <span data-ttu-id="c4cfb-262">Obsahuje vlastnost, která obsahuje uživatele Queryable.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-262">It contains a property that holds the queryable users.</span></span>

  <span data-ttu-id="c4cfb-263">Implementujete rozhraní, která jsou potřebná v aplikaci. například rozhraní IUserClaimStore, IUserLoginStore, IUserRoleStore, IUserPasswordStore a IUserSecurityStampStore, jak je znázorněno níže.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-263">You implement the interfaces that are needed in your application; such as, the IUserClaimStore, IUserLoginStore, IUserRoleStore, IUserPasswordStore, and IUserSecurityStampStore interfaces as shown below.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample5.cs)]

<span data-ttu-id="c4cfb-264">Úplnou implementaci (včetně všech rozhraní) najdete v tématu [UserStore (MySQL)](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/UserStore.cs).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-264">For a complete implementation (including all of interfaces), see [UserStore (MySQL)](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/UserStore.cs).</span></span>

### <a name="identityuserclaim-identityuserlogin-and-identityuserrole"></a><span data-ttu-id="c4cfb-265">IdentityUserClaim, IdentityUserLogin a IdentityUserRole</span><span class="sxs-lookup"><span data-stu-id="c4cfb-265">IdentityUserClaim, IdentityUserLogin, and IdentityUserRole</span></span>

<span data-ttu-id="c4cfb-266">Obor názvů Microsoft. AspNet. identity. EntityFramework obsahuje implementace tříd [IdentityUserClaim](https://msdn.microsoft.com/library/dn613250(v=vs.108).aspx), [IdentityUserLogin](https://msdn.microsoft.com/library/dn613251(v=vs.108).aspx)a [IdentityUserRole](https://msdn.microsoft.com/library/dn613252(v=vs.108).aspx) .</span><span class="sxs-lookup"><span data-stu-id="c4cfb-266">The Microsoft.AspNet.Identity.EntityFramework namespace contains implementations of the [IdentityUserClaim](https://msdn.microsoft.com/library/dn613250(v=vs.108).aspx), [IdentityUserLogin](https://msdn.microsoft.com/library/dn613251(v=vs.108).aspx), and [IdentityUserRole](https://msdn.microsoft.com/library/dn613252(v=vs.108).aspx) classes.</span></span> <span data-ttu-id="c4cfb-267">Pokud používáte tyto funkce, můžete chtít vytvořit vlastní verze těchto tříd a definovat vlastnosti pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-267">If you are using these features, you may want to create your own versions of these classes and define the properties for your application.</span></span> <span data-ttu-id="c4cfb-268">V některých případech je ale při provádění základních operací (například přidání nebo odebrání deklarace identity uživatele) efektivnější tyto entity nečítat do paměti.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-268">However, sometimes it is more efficient to not load these entities into memory when performing basic operations (such as adding or removing a user's claim).</span></span> <span data-ttu-id="c4cfb-269">Místo toho mohou třídy úložiště back-end provádět tyto operace přímo na zdroji dat.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-269">Instead, the backend store classes can execute these operations directly on the data source.</span></span> <span data-ttu-id="c4cfb-270">Například metoda UserStore. GetClaimsAsync () může volat metodu userClaimTable. FindByUserId (uživatel. ID) pro provedení dotazu přímo v této tabulce a vrácení seznamu deklarací identity.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-270">For example, the UserStore.GetClaimsAsync() method can call the userClaimTable.FindByUserId(user.Id) method to execute a query on that table directly and return a list of claims.</span></span>

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample6.cs)]

<a id="role"></a>
## <a name="customize-the-role-class"></a><span data-ttu-id="c4cfb-271">Přizpůsobení třídy role</span><span class="sxs-lookup"><span data-stu-id="c4cfb-271">Customize the role class</span></span>

<span data-ttu-id="c4cfb-272">Při implementaci vlastního poskytovatele úložiště je nutné vytvořit třídu role, která je ekvivalentní třídě [IdentityRole](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework.identityrole(v=vs.108).aspx) v oboru názvů [Microsoft. ASP. NET. identity. EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) :</span><span class="sxs-lookup"><span data-stu-id="c4cfb-272">When implementing your own storage provider, you must create a role class which is equivalent to the [IdentityRole](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework.identityrole(v=vs.108).aspx) class in the [Microsoft.ASP.NET.Identity.EntityFramework](https://msdn.microsoft.com/library/microsoft.aspnet.identity.entityframework(v=vs.108).aspx) namespace:</span></span>

<span data-ttu-id="c4cfb-273">Následující diagram znázorňuje třídu IdentityRole, kterou je nutné vytvořit a rozhraní pro implementaci v této třídě.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-273">The following diagram shows the IdentityRole class that you must create and the interface to implement in this class.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image5.png)

<span data-ttu-id="c4cfb-274">Rozhraní [&gt;IRole&lt;TKey](https://msdn.microsoft.com/library/dn613268(v=vs.108).aspx) definuje vlastnosti, které se roleManager pokusí zavolat při provádění požadovaných operací.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-274">The [IRole&lt;TKey&gt;](https://msdn.microsoft.com/library/dn613268(v=vs.108).aspx) interface defines the properties that the RoleManager attempts to call when performing requested operations.</span></span> <span data-ttu-id="c4cfb-275">Rozhraní obsahuje dvě vlastnosti – ID a název.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-275">The interface contains two properties - Id and Name.</span></span> <span data-ttu-id="c4cfb-276">Rozhraní [&gt;IRole&lt;TKey](https://msdn.microsoft.com/library/dn613268(v=vs.108).aspx) umožňuje zadat typ klíče pro roli pomocí obecného parametru **TKey** .</span><span class="sxs-lookup"><span data-stu-id="c4cfb-276">The [IRole&lt;TKey&gt;](https://msdn.microsoft.com/library/dn613268(v=vs.108).aspx) interface enables you to specify the type of the key for the role through the generic **TKey** parameter.</span></span> <span data-ttu-id="c4cfb-277">Typ vlastnosti ID se shoduje s hodnotou parametru TKey.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-277">The type of the Id property matches the value of the TKey parameter.</span></span>

<span data-ttu-id="c4cfb-278">Architektura identity také poskytuje rozhraní [IRole](https://msdn.microsoft.com/library/microsoft.aspnet.identity.irole(v=vs.108).aspx) (bez obecného parametru), pokud chcete použít řetězcovou hodnotu pro klíč.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-278">The Identity framework also provides the [IRole](https://msdn.microsoft.com/library/microsoft.aspnet.identity.irole(v=vs.108).aspx) interface (without the generic parameter) when you want to use a string value for the key.</span></span>

<span data-ttu-id="c4cfb-279">Následující příklad ukazuje třídu IdentityRole, která používá celé číslo pro klíč.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-279">The following example shows an IdentityRole class that uses an integer for the key.</span></span> <span data-ttu-id="c4cfb-280">Pole ID je nastaveno na hodnotu int, aby odpovídala hodnotě obecného parametru.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-280">The Id field is set to int to match the value of the generic parameter.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample7.cs)]

 <span data-ttu-id="c4cfb-281">Úplnou implementaci najdete v tématu [IdentityRole (MySQL)](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/IdentityRole.cs).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-281">For a complete implementation, see [IdentityRole (MySQL)](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/IdentityRole.cs).</span></span> 

<a id="rolestore"></a>
## <a name="customize-the-role-store"></a><span data-ttu-id="c4cfb-282">Přizpůsobení úložiště rolí</span><span class="sxs-lookup"><span data-stu-id="c4cfb-282">Customize the role store</span></span>

<span data-ttu-id="c4cfb-283">Vytvoříte také třídu RoleStore, která poskytuje metody pro všechny operace s daty v rolích.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-283">You also create a RoleStore class that provides the methods for all data operations on roles.</span></span> <span data-ttu-id="c4cfb-284">Tato třída je ekvivalentní k třídě [RoleStore&lt;TRole&gt;](https://msdn.microsoft.com/library/dn468181(v=vs.108).aspx) v oboru názvů Microsoft. ASP. NET. identity. EntityFramework.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-284">This class is equivalent to the [RoleStore&lt;TRole&gt;](https://msdn.microsoft.com/library/dn468181(v=vs.108).aspx) class in the Microsoft.ASP.NET.Identity.EntityFramework namespace.</span></span> <span data-ttu-id="c4cfb-285">Ve třídě RoleStore implementujete [IRoleStore&lt;TRole, TKey&gt;](https://msdn.microsoft.com/library/dn613266(v=vs.108).aspx) a případně [IQueryableRoleStore&lt;TRole, TKey&gt;](https://msdn.microsoft.com/library/dn613262(v=vs.108).aspx) rozhraní.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-285">In your RoleStore class, you implement the [IRoleStore&lt;TRole, TKey&gt;](https://msdn.microsoft.com/library/dn613266(v=vs.108).aspx) and optionally the [IQueryableRoleStore&lt;TRole, TKey&gt;](https://msdn.microsoft.com/library/dn613262(v=vs.108).aspx) interface.</span></span>

![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image6.png)

<span data-ttu-id="c4cfb-286">Následující příklad ukazuje třídu úložiště role.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-286">The following example shows a role store class.</span></span> <span data-ttu-id="c4cfb-287">Obecný parametr TRole přebírá typ vaší třídy role, což je obvykle třída IdentityRole, kterou jste definovali.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-287">The TRole generic parameter takes the type of your role class which usually is the IdentityRole class you defined.</span></span> <span data-ttu-id="c4cfb-288">Obecný parametr TKey přebírá typ klíče role.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-288">The TKey generic parameter takes the type of your role key.</span></span> 

[!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample8.cs)]

- <span data-ttu-id="c4cfb-289">**IRoleStore&lt;TRole&gt;**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-289">**IRoleStore&lt;TRole&gt;**</span></span>  
  <span data-ttu-id="c4cfb-290">Rozhraní [IRoleStore](https://msdn.microsoft.com/library/dn468195.aspx) definuje metody, které se mají implementovat do vaší třídy úložiště rolí.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-290">The [IRoleStore](https://msdn.microsoft.com/library/dn468195.aspx) interface defines the methods to implement in your role store class.</span></span> <span data-ttu-id="c4cfb-291">Obsahuje metody pro vytváření, aktualizaci, odstraňování a načítání rolí.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-291">It contains methods for creating, updating, deleting and retrieving roles.</span></span>
- <span data-ttu-id="c4cfb-292">**RoleStore&lt;TRole&gt;**</span><span class="sxs-lookup"><span data-stu-id="c4cfb-292">**RoleStore&lt;TRole&gt;**</span></span>  
  <span data-ttu-id="c4cfb-293">Chcete-li přizpůsobit RoleStore, vytvořte třídu, která implementuje rozhraní IRoleStore.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-293">To customize RoleStore, create a class that implements the IRoleStore interface.</span></span> <span data-ttu-id="c4cfb-294">Tuto třídu je nutné implementovat pouze v případě, že chcete použít role v systému.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-294">You only have to implement this class if want to use roles on your system.</span></span> <span data-ttu-id="c4cfb-295">Konstruktor, který přebírá parametr pojmenovaný *databáze* typu ExampleDatabase, je pouze ilustrací toho, jak předat do vaší třídy přístupu k datům.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-295">The constructor that takes a parameter named *database* of type ExampleDatabase is only an illustration of how to pass in your data access class.</span></span> <span data-ttu-id="c4cfb-296">Například v implementaci MySQL tento konstruktor přijímá parametr typu MySQLDatabase.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-296">For example, in the MySQL implementation, this constructor takes a parameter of type MySQLDatabase.</span></span>  
  
  <span data-ttu-id="c4cfb-297">Úplnou implementaci najdete v tématu [RoleStore (MySQL)](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/RoleStore.cs) .</span><span class="sxs-lookup"><span data-stu-id="c4cfb-297">For a complete implementation, see [RoleStore (MySQL)](https://github.com/aspnet/samples/blob/master/samples/aspnet/Identity/AspNet.Identity.MySQL/RoleStore.cs) .</span></span>

<a id="reconfigure"></a>
## <a name="reconfigure-application-to-use-new-storage-provider"></a><span data-ttu-id="c4cfb-298">Překonfigurujte aplikaci tak, aby používala nového poskytovatele úložiště.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-298">Reconfigure application to use new storage provider</span></span>

<span data-ttu-id="c4cfb-299">Implementovali jste nového poskytovatele úložiště.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-299">You have implemented your new storage provider.</span></span> <span data-ttu-id="c4cfb-300">Teď musíte aplikaci nakonfigurovat tak, aby používala tohoto poskytovatele úložiště.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-300">Now, you must configure your application to use this storage provider.</span></span> <span data-ttu-id="c4cfb-301">Pokud byl do projektu přidán výchozí zprostředkovatel úložiště, je nutné odebrat výchozího zprostředkovatele a nahradit ho vaším poskytovatelem.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-301">If the default storage provider was included in your project, you must remove the default provider and replace it with your provider.</span></span>

### <a name="replace-default-storage-provider-in-mvc-project"></a><span data-ttu-id="c4cfb-302">Nahradit výchozího poskytovatele úložiště v projektu MVC</span><span class="sxs-lookup"><span data-stu-id="c4cfb-302">Replace default storage provider in MVC project</span></span>

1. <span data-ttu-id="c4cfb-303">V okně **Spravovat balíčky NuGet** odinstalujte balíček **Microsoft ASP.NET identity EntityFramework** .</span><span class="sxs-lookup"><span data-stu-id="c4cfb-303">In the **Manage NuGet Packages** window, uninstall the **Microsoft ASP.NET Identity EntityFramework** package.</span></span> <span data-ttu-id="c4cfb-304">Tento balíček můžete najít tak, že vyhledáte nainstalované balíčky identity. EntityFramework.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-304">You can find this package by searching in the Installed packages for Identity.EntityFramework.</span></span>  
    <span data-ttu-id="c4cfb-305">![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image7.png) se zobrazí dotaz, jestli chcete Entity Framework odinstalovat.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-305">![](overview-of-custom-storage-providers-for-aspnet-identity/_static/image7.png) You will be asked if you also want to uninstall Entity Framework.</span></span> <span data-ttu-id="c4cfb-306">Pokud ho nepotřebujete v jiných částech aplikace, můžete ho odinstalovat.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-306">If you do not need it in other parts of your application, you can uninstall it.</span></span>
2. <span data-ttu-id="c4cfb-307">V souboru IdentityModels.cs ve složce modely odstraňte nebo pokomentujte třídy **ApplicationUser** a **ApplicationDbContext** .</span><span class="sxs-lookup"><span data-stu-id="c4cfb-307">In the IdentityModels.cs file in the Models folder, delete or comment out the **ApplicationUser** and **ApplicationDbContext** classes.</span></span> <span data-ttu-id="c4cfb-308">V aplikaci MVC můžete odstranit celý soubor IdentityModels.cs.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-308">In an MVC application, you can delete the entire IdentityModels.cs file.</span></span> <span data-ttu-id="c4cfb-309">V aplikaci webových formulářů odstraňte tyto dvě třídy, ale ujistěte se, že jste zachovali pomocnou třídu, která je také umístěna v souboru IdentityModels.cs.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-309">In a Web Forms application, delete the two classes but make sure you keep the helper class that is also located in the IdentityModels.cs file.</span></span>
3. <span data-ttu-id="c4cfb-310">Pokud se poskytovatel úložiště nachází v samostatném projektu, přidejte na něj odkaz ve vaší webové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-310">If your storage provider resides in a separate project, add a reference to it in your web application.</span></span>
4. <span data-ttu-id="c4cfb-311">Nahraďte všechny odkazy na `using Microsoft.AspNet.Identity.EntityFramework;` pomocí příkazu Using pro obor názvů vašeho poskytovatele úložiště.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-311">Replace all references to `using Microsoft.AspNet.Identity.EntityFramework;` with a using statement for the namespace of your storage provider.</span></span>
5. <span data-ttu-id="c4cfb-312">Ve třídě **Startup.auth.cs** změňte metodu **ConfigureAuth** tak, aby používala jednu instanci příslušného kontextu.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-312">In the **Startup.Auth.cs** class, change the **ConfigureAuth** method to use a single instance of the appropriate context.</span></span> 

    [!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample9.cs?highlight=3)]
6. <span data-ttu-id="c4cfb-313">Ve složce App\_Start otevřete složku **IdentityConfig.cs**.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-313">In the App\_Start folder, open **IdentityConfig.cs**.</span></span> <span data-ttu-id="c4cfb-314">Ve třídě ApplicationUserManager změňte metodu **Create** tak, aby vracela správce uživatele, který používá vlastní uživatelské úložiště.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-314">In the ApplicationUserManager class, change the **Create** method to return a user manager that uses your customized user store.</span></span> 

    [!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample10.cs?highlight=3)]
7. <span data-ttu-id="c4cfb-315">Nahraďte všechny odkazy na **ApplicationUser** pomocí **IdentityUser**.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-315">Replace all references to **ApplicationUser** with **IdentityUser**.</span></span>
8. <span data-ttu-id="c4cfb-316">Výchozí projekt obsahuje některé členy třídy User, které nejsou definovány v rozhraní IUser; například e-maily, PasswordHash a GenerateUserIdentityAsync.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-316">The default project includes some members in user class which are not defined in the IUser interface; such as Email, PasswordHash, and GenerateUserIdentityAsync.</span></span> <span data-ttu-id="c4cfb-317">Pokud vaše třída uživatele nemá tyto členy, je nutné je buď implementovat, nebo změnit kód, který používá tyto členy.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-317">If your user class does not have these members, you must either implement them or change the code that uses these members.</span></span>
9. <span data-ttu-id="c4cfb-318">Pokud jste vytvořili nějaké instance nástroje RoleManager, změňte kód tak, aby používal novou třídu RoleStore.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-318">If you have created any instances of RoleManager, change that code to use your new RoleStore class.</span></span>  

    [!code-csharp[Main](overview-of-custom-storage-providers-for-aspnet-identity/samples/sample11.cs)]
10. <span data-ttu-id="c4cfb-319">Výchozí projekt je navržen pro třídu uživatele, která má řetězcovou hodnotu pro klíč.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-319">The default project is designed for a user class that has a string value for the key.</span></span> <span data-ttu-id="c4cfb-320">Pokud má vaše třída uživatele pro klíč jiný typ (například celé číslo), musíte změnit projekt tak, aby fungoval s vaším typem.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-320">If your user class has a different type for the key (such as an integer), you must change the project to work with your type.</span></span> <span data-ttu-id="c4cfb-321">Přečtěte si téma [Změna primárního klíče pro uživatele v ASP.NET identity](change-primary-key-for-users-in-aspnet-identity.md).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-321">See [Change Primary Key for Users in ASP.NET Identity](change-primary-key-for-users-in-aspnet-identity.md).</span></span>
11. <span data-ttu-id="c4cfb-322">V případě potřeby přidejte připojovací řetězec do souboru Web. config.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-322">If needed, add the connection string to the Web.config file.</span></span>

<a id="other"></a>
## <a name="other-resources"></a><span data-ttu-id="c4cfb-323">Další zdroje</span><span class="sxs-lookup"><span data-stu-id="c4cfb-323">Other resources</span></span>

- <span data-ttu-id="c4cfb-324">Blog: [implementace ASP.NET identity](http://odetocode.com/blogs/scott/archive/2014/01/20/implementing-asp-net-identity.aspx)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-324">Blog: [Implementing ASP.NET Identity](http://odetocode.com/blogs/scott/archive/2014/01/20/implementing-asp-net-identity.aspx)</span></span>
- <span data-ttu-id="c4cfb-325">Kurz a kód GIT: [Simple. Data ASP.NET identity provider](http://designcoderelease.blogspot.co.uk/2015/03/simpledata-aspnet-identity-provider.html)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-325">Tutorial and GIT code: [Simple.Data Asp.Net Identity Provider](http://designcoderelease.blogspot.co.uk/2015/03/simpledata-aspnet-identity-provider.html)</span></span>
- <span data-ttu-id="c4cfb-326">Kurz:[nastavení základních účtů identit a jejich nasměrování do externí databáze](http://typecastexception.com/post/2013/10/27/Configuring-Db-Connection-and-Code-First-Migration-for-Identity-Accounts-in-ASPNET-MVC-5-and-Visual-Studio-2013.aspx).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-326">Tutorial:[Setting up the basic Identity accounts, and pointing them at an external DB](http://typecastexception.com/post/2013/10/27/Configuring-Db-Connection-and-Code-First-Migration-for-Identity-Accounts-in-ASPNET-MVC-5-and-Visual-Studio-2013.aspx).</span></span> <span data-ttu-id="c4cfb-327">[@xivSolutions](https://twitter.com/xivSolutions).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-327">By [@xivSolutions](https://twitter.com/xivSolutions).</span></span>
- <span data-ttu-id="c4cfb-328">Kurz[: implementace vlastního poskytovatele úložiště ASP.NET identity MySQL](implementing-a-custom-mysql-aspnet-identity-storage-provider.md)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-328">Tutorial[: Implementing a Custom MySQL ASP.NET Identity Storage Provider](implementing-a-custom-mysql-aspnet-identity-storage-provider.md)</span></span>
- <span data-ttu-id="c4cfb-329">[Entity CodeFluent](http://blog.codefluententities.com/2014/04/30/asp-net-identity-v2-and-codefluent-entities/) podle [SoftFluent](http://www.softfluent.com/)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-329">[CodeFluent Entities](http://blog.codefluententities.com/2014/04/30/asp-net-identity-v2-and-codefluent-entities/) by [SoftFluent](http://www.softfluent.com/)</span></span>
- <span data-ttu-id="c4cfb-330">[Azure Table Storage](https://www.nuget.org/packages/accidentalfish.aspnet.identity.azure/) od James Randall.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-330">[Azure Table Storage](https://www.nuget.org/packages/accidentalfish.aspnet.identity.azure/) by James Randall.</span></span>
- <span data-ttu-id="c4cfb-331">Azure Table Storage: [ASPNET. identity. TableStorage](https://github.com/stuartleeks/leeksnet.AspNet.Identity.TableStorage) podle [@stuartleeks](https://twitter.com/stuartleeks).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-331">Azure Table Storage: [AspNet.Identity.TableStorage](https://github.com/stuartleeks/leeksnet.AspNet.Identity.TableStorage) by [@stuartleeks](https://twitter.com/stuartleeks).</span></span>
- [<span data-ttu-id="c4cfb-332">CouchDB/Cloud podle Daniel Wertheim.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-332">CouchDB / Cloudant by Daniel Wertheim.</span></span>](https://github.com/danielwertheim/mycouch.aspnet.identity)
- <span data-ttu-id="c4cfb-333">Elastická ledat[h: elastická identita](https://github.com/bmbsqd/elastic-identity) podle Bombsquad AB.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-333">Elastic Searc[h: Elastic Identity](https://github.com/bmbsqd/elastic-identity) by Bombsquad AB.</span></span>
- <span data-ttu-id="c4cfb-334">[MongoDB](http://www.nuget.org/packages/MongoDB.AspNet.Identity/) podle Jonathana Sheely Jonathana Sheely.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-334">[MongoDB](http://www.nuget.org/packages/MongoDB.AspNet.Identity/) by Jonathan Sheely Jonathan Sheely.</span></span>
- <span data-ttu-id="c4cfb-335">[NHibernate. ASPNET. identity](https://github.com/milesibastos/NHibernate.AspNet.Identity) podle Antônio mil. Bastos.</span><span class="sxs-lookup"><span data-stu-id="c4cfb-335">[NHibernate.AspNet.Identity](https://github.com/milesibastos/NHibernate.AspNet.Identity) by Antônio Milesi Bastos.</span></span>
- <span data-ttu-id="c4cfb-336">[RavenDB](http://www.nuget.org/packages/AspNet.Identity.RavenDB/1.0.0) podle [@tourismgeek](https://twitter.com/tourismgeek).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-336">[RavenDB](http://www.nuget.org/packages/AspNet.Identity.RavenDB/1.0.0) by [@tourismgeek](https://twitter.com/tourismgeek).</span></span>
- <span data-ttu-id="c4cfb-337">[RavenDB. ASPNET. identity](https://github.com/ILMServices/RavenDB.AspNet.Identity) podle [ILMServices](http://www.ilmservice.com/).</span><span class="sxs-lookup"><span data-stu-id="c4cfb-337">[RavenDB.AspNet.Identity](https://github.com/ILMServices/RavenDB.AspNet.Identity) by [ILMServices](http://www.ilmservice.com/).</span></span>
- <span data-ttu-id="c4cfb-338">Redis: [Redis. ASPNET. identity](https://github.com/aminjam/Redis.AspNet.Identity)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-338">Redis: [Redis.AspNet.Identity](https://github.com/aminjam/Redis.AspNet.Identity)</span></span>
- <span data-ttu-id="c4cfb-339">Šablony T4 pro generování kódu EF pro "první" databázi úložiště uživatele: [ASPNET. identity. EntityFramework](https://github.com/cbfrank/AspNet.Identity.EntityFramework)</span><span class="sxs-lookup"><span data-stu-id="c4cfb-339">T4 Templates to generate EF code for a "database first" user store: [AspNet.Identity.EntityFramework](https://github.com/cbfrank/AspNet.Identity.EntityFramework)</span></span>
