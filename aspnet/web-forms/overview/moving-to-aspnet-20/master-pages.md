---
uid: web-forms/overview/moving-to-aspnet-20/master-pages
title: Vzorové stránky | Dokumenty společnosti Microsoft
author: rick-anderson
description: Jednou z klíčových součástí úspěšného webu je konzistentní vzhled a chování. V ASP.NET 1.x vývojáři používali uživatelské ovládací prvky k replikaci společné stránky elem ...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: 9c0cce4d-efd9-4c14-b0e8-a1a140abb3f4
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/master-pages
msc.type: authoredcontent
ms.openlocfilehash: b493feb21d2e3d6429f0a23df5aab66e0c4c5b07
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/17/2020
ms.locfileid: "81543181"
---
# <a name="master-pages"></a><span data-ttu-id="b9317-104">Stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="b9317-104">Master Pages</span></span>

<span data-ttu-id="b9317-105">podle [společnosti Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="b9317-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="b9317-106">Jednou z klíčových součástí úspěšného webu je konzistentní vzhled a chování.</span><span class="sxs-lookup"><span data-stu-id="b9317-106">One of the key components to a successful Web site is a consistent look and feel.</span></span> <span data-ttu-id="b9317-107">V ASP.NET 1.x vývojáři používali uživatelské ovládací prvky k replikaci běžných prvků stránky ve webové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="b9317-107">In ASP.NET 1.x, developers used user controls to replicate common page elements across a Web application.</span></span> <span data-ttu-id="b9317-108">I když to je jistě funkční řešení, pomocí uživatelských ovládacích prvků má některé nevýhody.</span><span class="sxs-lookup"><span data-stu-id="b9317-108">While that is certainly a workable solution, using user controls does have some drawbacks.</span></span> <span data-ttu-id="b9317-109">Změna polohy uživatelského ovládacího prvku například vyžaduje změnu více stránek na webu.</span><span class="sxs-lookup"><span data-stu-id="b9317-109">For example, a change in position of a user control requires a change to multiple pages across a site.</span></span> <span data-ttu-id="b9317-110">Uživatelské ovládací prvky se také nezobrazují v návrhovém zobrazení po vložení na stránku.</span><span class="sxs-lookup"><span data-stu-id="b9317-110">User controls are also not rendered in Design view after being inserted on a page.</span></span>

<span data-ttu-id="b9317-111">Jednou z klíčových součástí úspěšného webu je konzistentní vzhled a chování.</span><span class="sxs-lookup"><span data-stu-id="b9317-111">One of the key components to a successful Web site is a consistent look and feel.</span></span> <span data-ttu-id="b9317-112">V ASP.NET 1.x vývojáři používali uživatelské ovládací prvky k replikaci běžných prvků stránky ve webové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="b9317-112">In ASP.NET 1.x, developers used user controls to replicate common page elements across a Web application.</span></span> <span data-ttu-id="b9317-113">I když to je jistě funkční řešení, pomocí uživatelských ovládacích prvků má některé nevýhody.</span><span class="sxs-lookup"><span data-stu-id="b9317-113">While that is certainly a workable solution, using user controls does have some drawbacks.</span></span> <span data-ttu-id="b9317-114">Změna polohy uživatelského ovládacího prvku například vyžaduje změnu více stránek na webu.</span><span class="sxs-lookup"><span data-stu-id="b9317-114">For example, a change in position of a user control requires a change to multiple pages across a site.</span></span> <span data-ttu-id="b9317-115">Uživatelské ovládací prvky se také nezobrazují v návrhovém zobrazení po vložení na stránku.</span><span class="sxs-lookup"><span data-stu-id="b9317-115">User controls are also not rendered in Design view after being inserted on a page.</span></span>

<span data-ttu-id="b9317-116">ASP.NET 2.0 zavádí stránky předlohy jako způsob zachování konzistentního vzhledu a chování, a jak brzy uvidíte, stránky předlohy představují významné zlepšení oproti metodě uživatelského ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="b9317-116">ASP.NET 2.0 introduces Master pages as a way of maintaining a consistent look and feel, and as you'll soon see, Master pages represent a significant improvement over the user control method.</span></span>

## <a name="why-master-pages"></a><span data-ttu-id="b9317-117">Proč stránky předlohy?</span><span class="sxs-lookup"><span data-stu-id="b9317-117">Why Master Pages?</span></span>

<span data-ttu-id="b9317-118">Možná se divíte, proč byly v ASP.NET 2.0 potřeba stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="b9317-118">You may be wondering why master pages were needed in ASP.NET 2.0.</span></span> <span data-ttu-id="b9317-119">Koneckonců, vývojáři webu již používají uživatelské ovládací prvky v ASP.NET 1.x ke sdílení oblastí obsahu mezi stránkami.</span><span class="sxs-lookup"><span data-stu-id="b9317-119">After all, Web site developers are already using user controls in ASP.NET 1.x to share content areas between pages.</span></span> <span data-ttu-id="b9317-120">Ve skutečnosti existuje několik důvodů, proč jsou uživatelské ovládací prvky méně než optimální řešení pro vytvoření společného rozložení.</span><span class="sxs-lookup"><span data-stu-id="b9317-120">There are actually several reasons why user controls are a less-than-optimal solution for creating a common layout.</span></span>

<span data-ttu-id="b9317-121">Uživatelské ovládací prvky ve skutečnosti nedefinují rozložení stránky.</span><span class="sxs-lookup"><span data-stu-id="b9317-121">User controls don't actually define page layout.</span></span> <span data-ttu-id="b9317-122">Místo toho definují rozložení a funkce pro část stránky.</span><span class="sxs-lookup"><span data-stu-id="b9317-122">Instead, they define the layout and functionality for a portion of a page.</span></span> <span data-ttu-id="b9317-123">Rozdíl mezi těmito dvěma je důležité, protože to dělá ovladatelnost řešení uživatelského ovládacího prvku mnohem obtížnější.</span><span class="sxs-lookup"><span data-stu-id="b9317-123">The distinction between these two is important because it makes manageability of a user control solution much more difficult.</span></span> <span data-ttu-id="b9317-124">Chcete-li například změnit umístění uživatelského ovládacího prvku na stránce, je nutné upravit skutečnou stránku, na které se uživatelský ovládací prvek zobrazí.</span><span class="sxs-lookup"><span data-stu-id="b9317-124">For example, when you want to change the position of a user control on your page, you must edit the actual page on which the user control appears.</span></span> <span data-ttu-id="b9317-125">To je v pořádku, pokud máte jen několik stránek, ale ve velkých místech, to se rychle stává noční můrou pro správu webu!</span><span class="sxs-lookup"><span data-stu-id="b9317-125">Thats fine if you have only a few pages, but in large sites, it quickly becomes a site management nightmare!</span></span>

<span data-ttu-id="b9317-126">Další nevýhodou použití uživatelských ovládacích prvků pro definování společnérozložení je zakořeněna v architektuře ASP.NET samotného.</span><span class="sxs-lookup"><span data-stu-id="b9317-126">Another drawback of using user controls for defining a common layout is rooted in the architecture of ASP.NET itself.</span></span> <span data-ttu-id="b9317-127">Pokud se změní libovolný veřejný člen uživatelského ovládacího prvku, vyžaduje, abyste překompilovali všechny stránky, které používají uživatelský ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="b9317-127">If any public member of a user control is changed, it requires you to recompile all of the pages that use the user control.</span></span> <span data-ttu-id="b9317-128">Na druhé straně ASP.NET bude re-JIT vaše stránky při prvním přístupu.</span><span class="sxs-lookup"><span data-stu-id="b9317-128">In turn, ASP.NET will then re-JIT your pages when they are first accessed.</span></span> <span data-ttu-id="b9317-129">To opět vytváří neškálovatelnou architekturu a problém se správou lokalit y pro větší weby.</span><span class="sxs-lookup"><span data-stu-id="b9317-129">This, once again, produces a non-scalable architecture and a site management problem for larger sites.</span></span>

<span data-ttu-id="b9317-130">Oba tyto problémy (a mnoho dalších) jsou pěkně řešeny stránek předlohy v ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="b9317-130">Both of these problems (and many more) are nicely addressed by master pages in ASP.NET 2.0.</span></span>

## <a name="how-master-pages-work"></a><span data-ttu-id="b9317-131">Jak stránky předlohy fungují</span><span class="sxs-lookup"><span data-stu-id="b9317-131">How Master Pages Work</span></span>

<span data-ttu-id="b9317-132">Stránka předlohy je obdobou šablony pro jiné stránky.</span><span class="sxs-lookup"><span data-stu-id="b9317-132">A master page is analogous to a template for other pages.</span></span> <span data-ttu-id="b9317-133">Na stránku předlohy se přidají prvky stránky, které by měly být sdíleny mezi jinými stránkami (tj. nabídkami, ohraničeními atd.).</span><span class="sxs-lookup"><span data-stu-id="b9317-133">Page elements that should be shared among other pages (i.e. menus, borders, etc.) are added to the master page.</span></span> <span data-ttu-id="b9317-134">Když jsou na web přidány nové stránky, můžete je přidružit ke stránce předlohy.</span><span class="sxs-lookup"><span data-stu-id="b9317-134">When new pages are added to the site, you can associate them with a master page.</span></span> <span data-ttu-id="b9317-135">Stránka přidružená ke stránce předlohy se nazývá **stránka obsahu**.</span><span class="sxs-lookup"><span data-stu-id="b9317-135">A page that is associated with a master page is called a **content page**.</span></span> <span data-ttu-id="b9317-136">Ve výchozím nastavení se stránka obsahu uchyluje k vzhledu ze stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="b9317-136">By default, a content page takes on the appearance from the master page.</span></span> <span data-ttu-id="b9317-137">Při vytváření stránky předlohy však můžete definovat části stránky, které může stránka obsahu nahradit vlastním obsahem.</span><span class="sxs-lookup"><span data-stu-id="b9317-137">However, when you create a master page, you can define portions of the page that the content page can replace with its own content.</span></span> <span data-ttu-id="b9317-138">Tyto části jsou definovány pomocí nového ovládacího prvku zavedeného v ASP.NET 2.0; ovládací prvek **ContentPlaceHolder.**</span><span class="sxs-lookup"><span data-stu-id="b9317-138">These portions are defined using a new control introduced in ASP.NET 2.0; the **ContentPlaceHolder** control.</span></span>

<span data-ttu-id="b9317-139">Stránka předlohy může obsahovat libovolný počet ovládacích prvků ContentPlaceHolder (nebo vůbec žádné.) Na stránce obsahu se obsah z ovládacích prvků ContentPlaceHolder zobrazí uvnitř ovládacích prvků **Content,** což je další nový ovládací prvek v ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="b9317-139">A master page can contain any number of ContentPlaceHolder controls (or none at all.) On the content page, the content from the ContentPlaceHolder controls appears inside of **Content** controls, another new control in ASP.NET 2.0.</span></span> <span data-ttu-id="b9317-140">Ve výchozím nastavení jsou ovládací prvky obsahu stránky obsahu prázdné, takže můžete zadat vlastní obsah.</span><span class="sxs-lookup"><span data-stu-id="b9317-140">By default, the content pages Content controls are empty so that you can provide your own content.</span></span> <span data-ttu-id="b9317-141">Pokud chcete použít obsah ze stránky předlohy uvnitř ovládacích prvků Obsah, můžete tak učinit tak, jak uvidíte dále v tomto modulu.</span><span class="sxs-lookup"><span data-stu-id="b9317-141">If you want to use the content from the master page inside of the Content controls, you can do so as you will see later in this module.</span></span> <span data-ttu-id="b9317-142">Ovládací prvek Content je mapován na ovládací prvek ContentPlaceHolder prostřednictvím atributu ContentPlaceHolderID ovládacího prvku Content.</span><span class="sxs-lookup"><span data-stu-id="b9317-142">The Content control is mapped to the ContentPlaceHolder control via the ContentPlaceHolderID attribute of the Content control.</span></span> <span data-ttu-id="b9317-143">Níže uvedený kód mapuje ovládací prvek Content na ovládací prvek ContentPlaceHolder nazvaný mainBody na vzorové stránce.</span><span class="sxs-lookup"><span data-stu-id="b9317-143">The code below maps a Content control to a ContentPlaceHolder control called mainBody on a master page.</span></span>

[!code-aspx[Main](master-pages/samples/sample1.aspx)]

> [!NOTE]
> <span data-ttu-id="b9317-144">Často uslyšíte, jak lidé popisují stránky předlohy jako základní třídu pro jiné stránky.</span><span class="sxs-lookup"><span data-stu-id="b9317-144">You will often hear people describe master pages as being a base class for other pages.</span></span> <span data-ttu-id="b9317-145">To vlastně není pravda.</span><span class="sxs-lookup"><span data-stu-id="b9317-145">Thats actually not true.</span></span> <span data-ttu-id="b9317-146">Vztah mezi stránkami předlohy a stránkami obsahu není vztahem dědičnosti.</span><span class="sxs-lookup"><span data-stu-id="b9317-146">The relationship between master pages and content pages is not one of inheritance.</span></span>

<span data-ttu-id="b9317-147">**Obrázek 1** znázorňuje stránku předlohy a přidruženou stránku obsahu tak, jak jsou zobrazeny v sadě Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="b9317-147">**Figure 1** shows a master page and an associated content page as they appear in Visual Studio 2005.</span></span> <span data-ttu-id="b9317-148">Ovládací prvek ContentPlaceHolder můžete zobrazit na stránce předlohy a odpovídající ovládací prvek Obsah na stránce obsahu.</span><span class="sxs-lookup"><span data-stu-id="b9317-148">You can see the ContentPlaceHolder control in the master page and the corresponding Content control in the content page.</span></span> <span data-ttu-id="b9317-149">Všimněte si, že obsah předlohy stránek, který je mimo ContentPlaceHolder je viditelný, ale šedě na stránce obsahu.</span><span class="sxs-lookup"><span data-stu-id="b9317-149">Notice that the master pages content that is outside of the ContentPlaceHolder is visible but grayed out in the content page.</span></span> <span data-ttu-id="b9317-150">Stránka obsahu může nahradit pouze obsah uvnitř contentplaceholderu.</span><span class="sxs-lookup"><span data-stu-id="b9317-150">Only the content inside of the ContentPlaceHolder can be supplanted by the content page.</span></span> <span data-ttu-id="b9317-151">Veškerý další obsah, který pochází ze stránky předlohy, je neměnný.</span><span class="sxs-lookup"><span data-stu-id="b9317-151">All other content that comes from the master page is immutable.</span></span>

![Stránka předlohy a její přidružená stránka obsahu](master-pages/_static/image1.jpg)

<span data-ttu-id="b9317-153">**Obrázek 1**: Stránka předlohy a její přidružená stránka obsahu</span><span class="sxs-lookup"><span data-stu-id="b9317-153">**Figure 1**: A master page and its associated content page</span></span>

## <a name="creating-a-master-page"></a><span data-ttu-id="b9317-154">Vytvoření stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="b9317-154">Creating a Master Page</span></span>

<span data-ttu-id="b9317-155">Vytvoření nové stránky předlohy:</span><span class="sxs-lookup"><span data-stu-id="b9317-155">To create a new master page:</span></span>

1. <span data-ttu-id="b9317-156">Otevřete visual studio 2005 a vytvořte nový web.</span><span class="sxs-lookup"><span data-stu-id="b9317-156">Open Visual Studio 2005 and create a new Web site.</span></span>
2. <span data-ttu-id="b9317-157">Klikněte na Soubor, Nový, Soubor.</span><span class="sxs-lookup"><span data-stu-id="b9317-157">Click File, New, File.</span></span>
3. <span data-ttu-id="b9317-158">Zvolte Hlavní soubor z dialogového okna Přidat novou položku, jak je znázorněno **na obrázku 2**.</span><span class="sxs-lookup"><span data-stu-id="b9317-158">Choose Master File from the Add New Item dialog as shown in **figure 2**.</span></span>
4. <span data-ttu-id="b9317-159">Klikněte na Přidat.</span><span class="sxs-lookup"><span data-stu-id="b9317-159">Click Add.</span></span>

![Vytvoření nové stránky předlohy](master-pages/_static/image2.jpg)

<span data-ttu-id="b9317-161">**Obrázek 2**: Vytvoření nové stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="b9317-161">**Figure 2**: Creating a New Master Page</span></span>

<span data-ttu-id="b9317-162">Všimněte si, že přípona souboru pro stránku předlohy je *.master*.</span><span class="sxs-lookup"><span data-stu-id="b9317-162">Notice that the file extension for a master page is *.master*.</span></span> <span data-ttu-id="b9317-163">Jedná se o jeden ze způsobů, jak se stránka předlohy liší od běžné stránky.</span><span class="sxs-lookup"><span data-stu-id="b9317-163">This is one of the ways that a master page differs from an ordinary page.</span></span> <span data-ttu-id="b9317-164">Další primární rozdíl je, že @Page namísto směrnice, stránka @Master předlohy obsahuje směrnice.</span><span class="sxs-lookup"><span data-stu-id="b9317-164">The other primary difference is that in lieu of a @Page directive, the master page contains a @Master directive.</span></span> <span data-ttu-id="b9317-165">Přepněte do zdrojového zobrazení pro stránku předlohy, kterou jste právě vytvořili, a zkontrolujte kód.</span><span class="sxs-lookup"><span data-stu-id="b9317-165">Switch to Source View for the master page you've just created and review the code.</span></span>

<span data-ttu-id="b9317-166">Nová stránka předlohy bude mít ve výchozím nastavení jeden ovládací prvek ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b9317-166">A new master page will have one ContentPlaceHolder control by default.</span></span> <span data-ttu-id="b9317-167">Ve většině případů má větší smysl nejprve vytvořit prvky společné stránky a potom vložit ovládací prvky ContentPlaceHolder tam, kde je požadován vlastní obsah.</span><span class="sxs-lookup"><span data-stu-id="b9317-167">In most cases, it makes more sense to create the common page elements first and then insert ContentPlaceHolder controls where custom content is desired.</span></span> <span data-ttu-id="b9317-168">V těchto případech budou vývojáři chtít odstranit výchozí ovládací prvek ContentPlaceHolder a vložit nové, jakmile bude stránka vyvíjena.</span><span class="sxs-lookup"><span data-stu-id="b9317-168">In those cases, developers will want to delete the default ContentPlaceHolder control and insert new ones as the page is developed.</span></span> <span data-ttu-id="b9317-169">Ovládací prvky ContentPlaceHolder nelze zmenšit navzdory skutečnosti, že zobrazují úchyty pro nastavení velikosti.</span><span class="sxs-lookup"><span data-stu-id="b9317-169">ContentPlaceHolder controls are not resizable despite the fact that they do display sizing handles.</span></span> <span data-ttu-id="b9317-170">ContentPlaceHolder velikosti ovládacího prvku automaticky na základě obsahu, který obsahuje s jednou výjimkou; Pokud umístíte ovládací prvek ContentPlaceHolder uvnitř prvku bloku, jako je například buňka tabulky, bude velikost podle velikosti prvku.</span><span class="sxs-lookup"><span data-stu-id="b9317-170">The ContentPlaceHolder control sizes automatically based upon the content that it contains with one exception; if you place a ContentPlaceHolder control inside of a block element such as a table cell, it will size according to the size of the element.</span></span>

## <a name="lab-1-working-with-master-pages"></a><span data-ttu-id="b9317-171">Laboratoř 1 Práce se stránkami předlohy</span><span class="sxs-lookup"><span data-stu-id="b9317-171">Lab 1 Working with Master Pages</span></span>

<span data-ttu-id="b9317-172">V tomto testovacím prostředí vytvoříte novou stránku předlohy a definujete tři ovládací prvky ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b9317-172">In this lab, you will create a new master page and define three ContentPlaceHolder controls.</span></span> <span data-ttu-id="b9317-173">Poté vytvoříte novou stránku Obsahu a nahradíte obsah alespoň z jednoho z ovládacích prvků ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b9317-173">You will then create a new Content page and replace the content from at least one of the ContentPlaceHolder controls.</span></span>

1. <span data-ttu-id="b9317-174">Vytvořte vzorovou stránku a vložte ovládací prvky ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b9317-174">Create a master page and insert ContentPlaceHolder controls.</span></span> 

    1. <span data-ttu-id="b9317-175">Vytvořte novou stránku předlohy, jak je popsáno výše.</span><span class="sxs-lookup"><span data-stu-id="b9317-175">Create a new master page as described above.</span></span>
    2. <span data-ttu-id="b9317-176">Odstraňte výchozí ovládací prvek ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b9317-176">Delete the default ContentPlaceHolder control.</span></span>
    3. <span data-ttu-id="b9317-177">Vyberte ovládací prvek ContentPlaceHolder kliknutím na stínované horní ohraničení ovládacího prvku a pak jej odstraňte stisknutím klávesy DEL na klávesnici.</span><span class="sxs-lookup"><span data-stu-id="b9317-177">Select the ContentPlaceHolder control by clicking the shaded top border of the control and then delete it by hitting the DEL key on your keyboard.</span></span>
    4. <span data-ttu-id="b9317-178">Vložte novou tabulku pomocí *šablony Záhlaví a boční* stránky, jak je znázorněno na obrázku 3.</span><span class="sxs-lookup"><span data-stu-id="b9317-178">Insert a new table using the *Header and side* template as shown in figure 3.</span></span> <span data-ttu-id="b9317-179">Změňte šířku a výšku na 90 % každý tak, aby celá tabulka je viditelná v návrháři.</span><span class="sxs-lookup"><span data-stu-id="b9317-179">Change the width and height to 90% each so that the entire table is visible in the designer.</span></span>

![](master-pages/_static/image3.jpg)

<span data-ttu-id="b9317-180">**Obrázek 3**</span><span class="sxs-lookup"><span data-stu-id="b9317-180">**Figure 3**</span></span>

1. <span data-ttu-id="b9317-181">Umístěte kurzor do každé buňky tabulky a nastavte vlastnost *valign* na *začátek*.</span><span class="sxs-lookup"><span data-stu-id="b9317-181">Place the cursor into each cell of the table and set the *valign* property to *top*.</span></span>
2. <span data-ttu-id="b9317-182">V panelu nástrojů vložte ovládací prvek ContentPlaceHolder do horní buňky tabulky (buňky záhlaví).)</span><span class="sxs-lookup"><span data-stu-id="b9317-182">From the Toolbox, insert a ContentPlaceHolder control in the top cell of the table (the header cell.)</span></span>
3. <span data-ttu-id="b9317-183">Když vložíte tento ovládací prvek ContentPlaceHolder, všimnete si, že výška řádku zabere téměř celou stránku, jak je znázorněno na obrázku 4.</span><span class="sxs-lookup"><span data-stu-id="b9317-183">When you insert this ContentPlaceHolder control, you will notice that the row height will take up almost the entire page as shown in figure 4.</span></span> <span data-ttu-id="b9317-184">V tuto chvíli se tím neznepokojuj.</span><span class="sxs-lookup"><span data-stu-id="b9317-184">Don't be concerned about that at this point.</span></span>

![Prázdné místo je ve stejné buňce jako ContentPlaceHolder](master-pages/_static/image1.gif)

<span data-ttu-id="b9317-186">**Obrázek 4**: Prázdné místo je ve stejné buňce jako ContentPlaceHolder</span><span class="sxs-lookup"><span data-stu-id="b9317-186">**Figure 4**: The empty space is in the same cell as the ContentPlaceHolder</span></span>

1. <span data-ttu-id="b9317-187">Umístěte ovládací prvek ContentPlaceHolder do ostatních dvou buněk.</span><span class="sxs-lookup"><span data-stu-id="b9317-187">Place a ContentPlaceHolder control in the other two cells.</span></span> <span data-ttu-id="b9317-188">Po vložení ostatních ovládacích prvků ContentPlaceHolder by měla být velikost buněk tabulky tak, jak byste očekávali.</span><span class="sxs-lookup"><span data-stu-id="b9317-188">Once the other ContentPlaceHolder controls have been inserted, the size of the table cells should be as you would expect.</span></span> <span data-ttu-id="b9317-189">Stránka by nyní měla vypadat jako stránka zobrazená **na obrázku 5**.</span><span class="sxs-lookup"><span data-stu-id="b9317-189">The page should now look like the page shown in **figure 5**.</span></span>

![Master se všemi ovládacími prvky ContentPlaceHolder.](master-pages/_static/image2.gif)

<span data-ttu-id="b9317-192">**Obrázek 5**: Předloha se všemi ovládacími prvky ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b9317-192">**Figure 5**: The Master with all ContentPlaceHolder controls.</span></span> <span data-ttu-id="b9317-193">Všimněte si, že výška buňky pro buňku záhlaví je nyní to, co by mělo být</span><span class="sxs-lookup"><span data-stu-id="b9317-193">Notice that the cell height for the header cell is now what it should be</span></span>

1. <span data-ttu-id="b9317-194">Do každého ze tří ovládacích prvků ContentPlaceHolder zadejte nějaký text podle svého výběru.</span><span class="sxs-lookup"><span data-stu-id="b9317-194">Enter some text of your choice into each of the three ContentPlaceHolder controls.</span></span>
2. <span data-ttu-id="b9317-195">Uložit stránku předlohy jako exercise1.master.</span><span class="sxs-lookup"><span data-stu-id="b9317-195">Save the master page as exercise1.master.</span></span>
3. <span data-ttu-id="b9317-196">Vytvořte nový webový formulář a přidružte jej ke stránce předlohy exercise1.master.</span><span class="sxs-lookup"><span data-stu-id="b9317-196">Create a new Web Form and associate it with the exercise1.master master page.</span></span>
4. <span data-ttu-id="b9317-197">V yberte Soubor, Nový, Soubor v sadě Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="b9317-197">Select File, New, File in Visual Studio 2005.</span></span>
5. <span data-ttu-id="b9317-198">V dialogovém okně Přidat novou položku vyberte **webový formulář.**</span><span class="sxs-lookup"><span data-stu-id="b9317-198">Select **Web Form** in the Add New Item dialog.</span></span>
6. <span data-ttu-id="b9317-199">Zkontrolujte, zda je zaškrtnuté políčko Vybrat stránku předlohy, jak je znázorněno na obrázku 6.</span><span class="sxs-lookup"><span data-stu-id="b9317-199">Make sure that the Select master page checkbox is checked as shown in figure 6.</span></span>

![Přidání nové stránky obsahu](master-pages/_static/image3.gif)

<span data-ttu-id="b9317-201">**Obrázek 6**: Přidání nové stránky obsahu</span><span class="sxs-lookup"><span data-stu-id="b9317-201">**Figure 6**: Adding a new Content Page</span></span>

1. <span data-ttu-id="b9317-202">Klikněte na Přidat.</span><span class="sxs-lookup"><span data-stu-id="b9317-202">Click Add.</span></span>
2. <span data-ttu-id="b9317-203">Vyberte cvičení1.master v dialogovém okně Vybrat stránku předlohy, jak je znázorněno na obrázku 7.</span><span class="sxs-lookup"><span data-stu-id="b9317-203">Select exercise1.master in the Select a master page dialog as shown in figure 7.</span></span>
3. <span data-ttu-id="b9317-204">Kliknutím na OK přidejte novou stránku obsahu.</span><span class="sxs-lookup"><span data-stu-id="b9317-204">Click OK to add the new content page.</span></span>

<span data-ttu-id="b9317-205">Nová stránka obsahu se zobrazí v sadě Visual Studio s jedním ovládacím prvkem Obsah pro každý ovládací prvek ContentPlaceHolder na stránce předlohy.</span><span class="sxs-lookup"><span data-stu-id="b9317-205">The new content page appears in Visual Studio with one Content control for each ContentPlaceHolder control on the master page.</span></span> <span data-ttu-id="b9317-206">Ve výchozím nastavení jsou ovládací prvky obsahu prázdné, takže můžete přidat vlastní obsah.</span><span class="sxs-lookup"><span data-stu-id="b9317-206">By default, the Content controls are empty so that you can add your own content.</span></span> <span data-ttu-id="b9317-207">Pokud chcete, aby použili obsah z ovládacího prvku ContentPlaceHolder na stránce předlohy, jednoduše klikněte na symbol inteligentní značky (malá černá šipka v pravém horním rohu ovládacího prvku) a z chytré značky zvolte *Výchozí pro předlohy obsahu,* jak je znázorněno na **obrázku 8**.</span><span class="sxs-lookup"><span data-stu-id="b9317-207">If you'd like for them to use the content from the ContentPlaceHolder control on the master page, simply click on the smart tag symbol (the small black arrow in the upper-right corner of the control) and choose *Default to Masters Content* from the smart tag as shown in **figure 8**.</span></span> <span data-ttu-id="b9317-208">Pokud tak učiníte, položka nabídky se změní na *Vytvořit vlastní obsah*.</span><span class="sxs-lookup"><span data-stu-id="b9317-208">When you do so, the menu item changes to *Create Custom Content*.</span></span> <span data-ttu-id="b9317-209">Kliknutím na něj v tomto okamžiku odeberete obsah ze stránky předlohy, což vám umožní definovat vlastní obsah pro daný ovládací prvek Obsah.</span><span class="sxs-lookup"><span data-stu-id="b9317-209">Clicking it at that point removes the content from the master page allowing you to define custom content for that particular Content control.</span></span>

![Nastavení ovládacího prvku obsahu na výchozí hodnotu pro obsah vzorových stránek](master-pages/_static/image4.gif)

<span data-ttu-id="b9317-211">**Obrázek 7**: Nastavení ovládacího prvku obsahu na výchozí hodnotu obsahu předlohy</span><span class="sxs-lookup"><span data-stu-id="b9317-211">**Figure 7**: Setting a Content Control to Default to the Master Pages Content</span></span>

## <a name="connecting-master-page-and-content-pages"></a><span data-ttu-id="b9317-212">Připojení stránky předlohy a stránek obsahu</span><span class="sxs-lookup"><span data-stu-id="b9317-212">Connecting Master Page and Content Pages</span></span>

<span data-ttu-id="b9317-213">Přidružení mezi stránkou předlohy a stránkou obsahu lze nakonfigurovat jedním ze čtyř různých způsobů:</span><span class="sxs-lookup"><span data-stu-id="b9317-213">The association between a master page and a content page can be configured in one of four different ways:</span></span>

- <span data-ttu-id="b9317-214">Atribut <strong>MasterPageFile</strong> @Page směrnice</span><span class="sxs-lookup"><span data-stu-id="b9317-214">The <strong>MasterPageFile</strong> attribute of the @Page directive</span></span>
- <span data-ttu-id="b9317-215">Nastavení vlastnosti **Page.MasterPageFile** v kódu.</span><span class="sxs-lookup"><span data-stu-id="b9317-215">Setting the **Page.MasterPageFile** property in code.</span></span>
- <span data-ttu-id="b9317-216">Element \*\* &lt;&gt; stránky\*\* v konfiguračním souboru aplikací (web.config v kořenové složce aplikace)</span><span class="sxs-lookup"><span data-stu-id="b9317-216">The **&lt;pages&gt;** element in the applications configuration file (web.config in the root folder of the application)</span></span>
- <span data-ttu-id="b9317-217">Element \*\* &lt;&gt; stránky\*\* v konfiguračním souboru podsložek (web.config v podsložce)</span><span class="sxs-lookup"><span data-stu-id="b9317-217">The **&lt;pages&gt;** element in a subfolders configuration file (web.config in a subfolder)</span></span>

## <a name="masterpagefile-attribute"></a><span data-ttu-id="b9317-218">Atribut MasterPageFile</span><span class="sxs-lookup"><span data-stu-id="b9317-218">MasterPageFile Attribute</span></span>

<span data-ttu-id="b9317-219">Atribut MasterPageFile usnadňuje použití stránky předlohy na určitou stránku ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b9317-219">The MasterPageFile attribute makes it easy to apply a master page to a particular ASP.NET page.</span></span> <span data-ttu-id="b9317-220">Je to také metoda použitá k použití stránky předlohy při zaškrtnutí políčka **Vybrat stránku předlohy** stejně jako ve cvičení 1.</span><span class="sxs-lookup"><span data-stu-id="b9317-220">It is also the method used to apply the master page when you check the **Select Master Page** checkbox as you did in Exercise 1.</span></span>

## <a name="setting-pagemasterpagefile-in-code"></a><span data-ttu-id="b9317-221">Nastavení souboru Page.MasterPageFile v kódu</span><span class="sxs-lookup"><span data-stu-id="b9317-221">Setting Page.MasterPageFile in Code</span></span>

<span data-ttu-id="b9317-222">Nastavením vlastnosti MasterPageFile v kódu můžete použít určitou stránku předlohy na obsah za běhu.</span><span class="sxs-lookup"><span data-stu-id="b9317-222">By setting the MasterPageFile property in code, you can apply a particular master page to your content at runtime.</span></span> <span data-ttu-id="b9317-223">To je užitečné v případech, kdy může být nutné použít určitou stránku předlohy na základě role uživatelů nebo jiných kritérií.</span><span class="sxs-lookup"><span data-stu-id="b9317-223">This is useful in cases where you may need to apply a specific master page based upon a users role or some other criteria.</span></span> <span data-ttu-id="b9317-224">Vlastnost MasterPageFile musí být nastavena v metodě PreInit.</span><span class="sxs-lookup"><span data-stu-id="b9317-224">The MasterPageFile property must be set in the PreInit method.</span></span> <span data-ttu-id="b9317-225">Pokud je nastavena po PreInit metoda, invalidOperationException bude vyvolána.</span><span class="sxs-lookup"><span data-stu-id="b9317-225">If it is set after the PreInit method, an InvalidOperationException will be thrown.</span></span> <span data-ttu-id="b9317-226">Stránka, na které je tato vlastnost nastavena, musí mít také ovládací prvek Content jako ovládací prvek nejvyšší úrovně pro stránku.</span><span class="sxs-lookup"><span data-stu-id="b9317-226">The page on which this property is being set must also have a Content control as the top-level control for the page.</span></span> <span data-ttu-id="b9317-227">V opačném případě bude vyvolána výjimka HttpException, když je nastavena vlastnost MasterPageFile.</span><span class="sxs-lookup"><span data-stu-id="b9317-227">Otherwise an HttpException will be thrown when the MasterPageFile property is set.</span></span>

## <a name="using-the-ltpagesgt-element"></a><span data-ttu-id="b9317-228">Použití &lt;stránek&gt; Element</span><span class="sxs-lookup"><span data-stu-id="b9317-228">Using the &lt;pages&gt; Element</span></span>

<span data-ttu-id="b9317-229">Stránku předlohy pro stránky můžete nakonfigurovat nastavením &lt;&gt; atributu masterPageFile v elementu stránky souboru web.config.</span><span class="sxs-lookup"><span data-stu-id="b9317-229">You can configure a master page for your pages by setting the masterPageFile attribute in the &lt;pages&gt; element of the web.config file.</span></span> <span data-ttu-id="b9317-230">Při použití této metody mějte na paměti, že soubory web.config nižší ve struktuře aplikace mohou toto nastavení přepsat.</span><span class="sxs-lookup"><span data-stu-id="b9317-230">When using this method, keep in mind that web.config files lower in the application structure can override this setting.</span></span> <span data-ttu-id="b9317-231">Toto nastavení také přepíše všechny atributy MasterPageFile nastavené @Page v direktivě.</span><span class="sxs-lookup"><span data-stu-id="b9317-231">Any MasterPageFile attribute set in a @Page directive will also override this setting.</span></span> <span data-ttu-id="b9317-232">Použití &lt;prvku&gt; stránky usnadňuje vytvoření *vzorové* stránky, kterou lze v případě potřeby přepsat v konkrétních složkách nebo souborech.</span><span class="sxs-lookup"><span data-stu-id="b9317-232">Using the &lt;pages&gt; element makes it simple to create a *master* master page that can be overridden if necessary in particular folders or files.</span></span>

## <a name="properties-in-master-pages"></a><span data-ttu-id="b9317-233">Vlastnosti na vzorových stránkách</span><span class="sxs-lookup"><span data-stu-id="b9317-233">Properties in Master Pages</span></span>

<span data-ttu-id="b9317-234">Stránka předlohy může zpřístupnit vlastnosti prostým zveřejněním těchto vlastností na stránce předlohy.</span><span class="sxs-lookup"><span data-stu-id="b9317-234">A master page can expose properties by simply making those properties public within the master page.</span></span> <span data-ttu-id="b9317-235">Například následující kód definuje vlastnost s názvem SomeProperty:</span><span class="sxs-lookup"><span data-stu-id="b9317-235">For example, the following code defines a property called SomeProperty:</span></span>

[!code-csharp[Main](master-pages/samples/sample2.cs)]

<span data-ttu-id="b9317-236">Chcete-li získat přístup k vlastnosti SomeProperty ze stránky Obsah, budete muset použít vlastnost Master takto:</span><span class="sxs-lookup"><span data-stu-id="b9317-236">To access the SomeProperty property from the Content page, you will need to use the Master property like so:</span></span>

[!code-csharp[Main](master-pages/samples/sample3.cs)]

## <a name="nesting-master-pages"></a><span data-ttu-id="b9317-237">Vnoření stránek předlohy</span><span class="sxs-lookup"><span data-stu-id="b9317-237">Nesting Master Pages</span></span>

<span data-ttu-id="b9317-238">Vzorové stránky jsou ideálním řešením pro zajištění společného vzhledu a chování ve velké webové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="b9317-238">Master pages are the perfect solution for ensuring a common look and feel across a large Web application.</span></span> <span data-ttu-id="b9317-239">Není však neobvyklé, že určité části velkého webu sdílejí společné rozhraní, zatímco jiné části sdílejí jiné rozhraní.</span><span class="sxs-lookup"><span data-stu-id="b9317-239">However, it's not uncommon to have certain parts of a large site share a common interface while other parts share a different interface.</span></span> <span data-ttu-id="b9317-240">Chcete-li tuto potřebu vyřešit, je ideálním řešením více stránek předlohy.</span><span class="sxs-lookup"><span data-stu-id="b9317-240">To address that need, multiple master pages are the perfect solution.</span></span> <span data-ttu-id="b9317-241">To však stále neřeší skutečnost, že velká aplikace může mít určité součásti (například nabídku), které jsou sdíleny mezi všemi stránkami a dalšími součástmi, které jsou sdíleny pouze mezi určitými částmi webu.</span><span class="sxs-lookup"><span data-stu-id="b9317-241">However, that still doesn't address the fact that a large application may have certain components (such as a menu, for example) that are shared among all pages and other components that are shared only among certain sections of the site.</span></span> <span data-ttu-id="b9317-242">Pro tento typ situace vnořené stránky předlohy vyplnit potřebu pěkně.</span><span class="sxs-lookup"><span data-stu-id="b9317-242">For that type of situation, nested master pages fill the need nicely.</span></span> <span data-ttu-id="b9317-243">Jak jste viděli, normální stránka předlohy se skládá ze stránky předlohy a stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="b9317-243">As you've seen, a normal master page consists of a master page and a content page.</span></span> <span data-ttu-id="b9317-244">V situaci vnořené stránky předlohy existují dvě stránky předlohy; nadřazený předloha a podřízený předloha.</span><span class="sxs-lookup"><span data-stu-id="b9317-244">In a nested master page situation, there are two master pages; a parent master and a child master.</span></span> <span data-ttu-id="b9317-245">Podřízená stránka předlohy je také stránka obsahu a její předloha je nadřazenou stránkou předlohy.</span><span class="sxs-lookup"><span data-stu-id="b9317-245">The child master page is also a content page and its master is the parent master page.</span></span>

<span data-ttu-id="b9317-246">Zde je kód pro typickou stránku předlohy:</span><span class="sxs-lookup"><span data-stu-id="b9317-246">Here is the code for a typical master page:</span></span>

[!code-aspx[Main](master-pages/samples/sample4.aspx)]

<span data-ttu-id="b9317-247">V vnořeném hlavním scénáři by to byl nadřazený předloha.</span><span class="sxs-lookup"><span data-stu-id="b9317-247">In a nested master scenario, this would be the parent master.</span></span> <span data-ttu-id="b9317-248">Jiná stránka předlohy by tuto stránku použila jako stránku předlohy a tento kód by vypadal takto:</span><span class="sxs-lookup"><span data-stu-id="b9317-248">Another master page would use this page as its master page, and that code would look like this:</span></span>

[!code-aspx[Main](master-pages/samples/sample5.aspx)]

<span data-ttu-id="b9317-249">Všimněte si, že v tomto scénáři podřízená předloha je také stránka obsahu pro nadřazenou předlohu.</span><span class="sxs-lookup"><span data-stu-id="b9317-249">Note that in this scenario, the child master is also a content page for the parent master.</span></span> <span data-ttu-id="b9317-250">Veškerý obsah podřízeného předlohy se zobrazí uvnitř ovládacího prvku Content, který získá jeho obsah z nadřazeného ovládacího prvku ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="b9317-250">All of the child master's content appears inside of a Content control that gets its content from the parent's ContentPlaceHolder control.</span></span>

> [!NOTE]
> <span data-ttu-id="b9317-251">Podpora návrháře není k dispozici pro vnořené stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="b9317-251">Designer support is not available for nested master pages.</span></span> <span data-ttu-id="b9317-252">Při vývoji pomocí vnořených předloh budete muset použít zdrojové zobrazení.</span><span class="sxs-lookup"><span data-stu-id="b9317-252">When you are developing using nested masters, you will need to use source view.</span></span>

<span data-ttu-id="b9317-253">Toto video ukazuje návod k použití vnořených stránek předlohy.</span><span class="sxs-lookup"><span data-stu-id="b9317-253">This video shows a walkthrough of using nested master pages.</span></span>

![](master-pages/_static/image1.png)

[<span data-ttu-id="b9317-254">Otevřít video na celou obrazovku</span><span class="sxs-lookup"><span data-stu-id="b9317-254">Open Full-Screen Video</span></span>](master-pages/_static/nested1.wmv)

![Výběr stránky předlohy](master-pages/_static/image4.jpg)

<span data-ttu-id="b9317-256">**Obrázek 8**: Výběr stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="b9317-256">**Figure 8**: Selecting a Master Page</span></span>
