---
uid: web-forms/overview/moving-to-aspnet-20/membership
title: Členství | Microsoft Docs
author: microsoft
description: ASP.NET členství sestaví na úspěchu modelu ověřování pomocí formulářů z ASP.NET 1. x. Ověřování pomocí formulářů ASP.NET nabízí pohodlný způsob, jak zamezit...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: f2339485-5d78-4c5e-8c0a-dc9b8a315345
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/membership
msc.type: authoredcontent
ms.openlocfilehash: da6fc205bd852a818d65425586cec38fdb08d310
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78642154"
---
# <a name="membership"></a><span data-ttu-id="9b55e-104">Členství</span><span class="sxs-lookup"><span data-stu-id="9b55e-104">Membership</span></span>

<span data-ttu-id="9b55e-105">od [Microsoftu](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="9b55e-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="9b55e-106">ASP.NET členství sestaví na úspěchu modelu ověřování pomocí formulářů z ASP.NET 1. x.</span><span class="sxs-lookup"><span data-stu-id="9b55e-106">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="9b55e-107">Ověřování pomocí formulářů ASP.NET poskytuje pohodlný způsob, jak začlenit přihlašovací formulář do vaší aplikace ASP.NET a ověřovat uživatele proti databázi nebo jinému úložišti dat.</span><span class="sxs-lookup"><span data-stu-id="9b55e-107">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span>

<span data-ttu-id="9b55e-108">ASP.NET členství sestaví na úspěchu modelu ověřování pomocí formulářů z ASP.NET 1. x.</span><span class="sxs-lookup"><span data-stu-id="9b55e-108">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="9b55e-109">Ověřování pomocí formulářů ASP.NET poskytuje pohodlný způsob, jak začlenit přihlašovací formulář do vaší aplikace ASP.NET a ověřovat uživatele proti databázi nebo jinému úložišti dat.</span><span class="sxs-lookup"><span data-stu-id="9b55e-109">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span> <span data-ttu-id="9b55e-110">Členové třídy FormsAuthentication umožňují zpracovávat soubory cookie pro ověřování, kontrolovat platné přihlašovací údaje, odhlásit uživatele atd. Implementace ověřování pomocí formulářů v aplikaci ASP.NET 1. x ale může vyžadovat spravedlivé množství kódu.</span><span class="sxs-lookup"><span data-stu-id="9b55e-110">The members of the FormsAuthentication class make it possible to handle cookies for authentication, check for a valid login, log a user out etc. However, implementing Forms authentication in an ASP.NET 1.x application can require a fair amount of code.</span></span>

<span data-ttu-id="9b55e-111">Členství v ASP.NET 2,0 je hlavním postupem při použití samotného ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="9b55e-111">Membership in ASP.NET 2.0 is a major advancement over using Forms authentication alone.</span></span> <span data-ttu-id="9b55e-112">(Členství je nejvíce robustní při kombinaci s ověřováním pomocí formulářů, ale ověřování pomocí formulářů není vyžadováno.) Jak budete brzy vidět, můžete použít členství v ASP.NET a ovládací prvky přihlášení v ASP.NET 2,0 k implementaci výkonného systému členství, aniž byste museli psát mnoho kódu.</span><span class="sxs-lookup"><span data-stu-id="9b55e-112">(Membership is most robust when coupled with Forms authentication, but using Forms authentication is not a requirement.) As you'll soon see, you can use ASP.NET Membership and the login controls in ASP.NET 2.0 to implement a powerful membership system without writing much code at all.</span></span>

## <a name="implementing-membership-in-aspnet-20"></a><span data-ttu-id="9b55e-113">Implementace členství v ASP.NET 2,0</span><span class="sxs-lookup"><span data-stu-id="9b55e-113">Implementing Membership in ASP.NET 2.0</span></span>

<span data-ttu-id="9b55e-114">Členství je implementováno pomocí následujících čtyř kroků.</span><span class="sxs-lookup"><span data-stu-id="9b55e-114">Membership is implemented by following four steps.</span></span> <span data-ttu-id="9b55e-115">Mějte na paměti, že existuje mnoho dílčích kroků, které se týkají, a také volitelná konfigurace, kterou je možné implementovat.</span><span class="sxs-lookup"><span data-stu-id="9b55e-115">Keep in mind that there are many sub-steps that are involved as well as optional configuration that can be implemented as well.</span></span> <span data-ttu-id="9b55e-116">Tyto kroky jsou určeny k ilustraci velkého obrázku konfigurace členství.</span><span class="sxs-lookup"><span data-stu-id="9b55e-116">These steps are meant to illustrate the big picture of configuring membership.</span></span>

1. <span data-ttu-id="9b55e-117">Vytvořte databázi členství (Pokud se jako úložiště členství používá SQL Server.)</span><span class="sxs-lookup"><span data-stu-id="9b55e-117">Create your membership database (if SQL Server is used as the membership store.)</span></span>
2. <span data-ttu-id="9b55e-118">Zadejte možnosti členství v konfiguračních souborech vašich aplikací.</span><span class="sxs-lookup"><span data-stu-id="9b55e-118">Specify the membership options in your applications configuration files.</span></span> <span data-ttu-id="9b55e-119">(Členství je ve výchozím nastavení povolené.)</span><span class="sxs-lookup"><span data-stu-id="9b55e-119">(Membership is enabled by default.)</span></span>
3. <span data-ttu-id="9b55e-120">Určete typ úložiště členství, který chcete použít.</span><span class="sxs-lookup"><span data-stu-id="9b55e-120">Determine the type of membership store you want to use.</span></span> <span data-ttu-id="9b55e-121">Možnosti jsou:</span><span class="sxs-lookup"><span data-stu-id="9b55e-121">Options are:</span></span> 

    - <span data-ttu-id="9b55e-122">Microsoft SQL Server (verze 7,0 nebo novější)</span><span class="sxs-lookup"><span data-stu-id="9b55e-122">Microsoft SQL Server (version 7.0 or later)</span></span>
    - <span data-ttu-id="9b55e-123">Úložiště služby Active Directory</span><span class="sxs-lookup"><span data-stu-id="9b55e-123">Active Directory Store</span></span>
    - <span data-ttu-id="9b55e-124">Vlastní zprostředkovatel členství</span><span class="sxs-lookup"><span data-stu-id="9b55e-124">Custom membership provider</span></span>
4. <span data-ttu-id="9b55e-125">Nakonfigurujte aplikaci pro ověřování ASP.NET Forms.</span><span class="sxs-lookup"><span data-stu-id="9b55e-125">Configure the application for ASP.NET Forms authentication.</span></span> <span data-ttu-id="9b55e-126">Později je členství navrženo tak, aby využívalo výhod ověřování pomocí formulářů, ale ověřování pomocí formulářů není vyžadováno.</span><span class="sxs-lookup"><span data-stu-id="9b55e-126">Once again, Membership is designed to take advantage of Forms authentication, but using Forms authentication is not a requirement.</span></span>
5. <span data-ttu-id="9b55e-127">Definujte uživatelské účty pro členství a v případě potřeby nakonfigurujte role.</span><span class="sxs-lookup"><span data-stu-id="9b55e-127">Define user accounts for membership and configure roles if desired.</span></span>

## <a name="creating-the-membership-database"></a><span data-ttu-id="9b55e-128">Vytváření databáze členství</span><span class="sxs-lookup"><span data-stu-id="9b55e-128">Creating the Membership Database</span></span>

<span data-ttu-id="9b55e-129">Pokud používáte jako úložiště členství SQL Server 7,0 nebo novější, můžete ke konfiguraci databáze použít nástroj ASPNET\_regsql (k dispozici z příkazového řádku Visual Studio .NET 2005).</span><span class="sxs-lookup"><span data-stu-id="9b55e-129">If you're using SQL Server 7.0 or later as your membership store, you can use the aspnet\_regsql utility (available most easily from the Visual Studio .NET 2005 Command Prompt) to configure your database.</span></span> <span data-ttu-id="9b55e-130">Nástroj ASPNET\_regsql lze použít jako nástroj příkazového řádku nebo pomocí Průvodce grafickým uživatelským rozhraním.</span><span class="sxs-lookup"><span data-stu-id="9b55e-130">The aspnet\_regsql utility can be used as a command prompt tool or via a GUI wizard.</span></span> <span data-ttu-id="9b55e-131">Nejjednodušším způsobem konfigurace databáze je metoda průvodce.</span><span class="sxs-lookup"><span data-stu-id="9b55e-131">The wizard method is the easiest way to configure your database.</span></span> <span data-ttu-id="9b55e-132">Chcete-li získat přístup k průvodci, stačí spustit následující příkaz:</span><span class="sxs-lookup"><span data-stu-id="9b55e-132">To access the wizard, simply run the following command:</span></span>

`aspnet_regsql W`

<span data-ttu-id="9b55e-133">Po spuštění tohoto příkazu se zobrazí Průvodce nastavením ASP.NET SQL Server, jak je znázorněno níže.</span><span class="sxs-lookup"><span data-stu-id="9b55e-133">Once you run that command, you will be presented with the ASP.NET SQL Server Setup Wizard as shown below.</span></span>

![](membership/_static/image1.jpg)

<span data-ttu-id="9b55e-134">**Obrázek 1**</span><span class="sxs-lookup"><span data-stu-id="9b55e-134">**Figure 1**</span></span>

<span data-ttu-id="9b55e-135">Průvodce instalací SQL Server ASP.NET vytvoří web v instanci, kterou zadáte v průvodci.</span><span class="sxs-lookup"><span data-stu-id="9b55e-135">The ASP.NET SQL Server Setup Wizard creates the Web site in the instance you specify in the wizard.</span></span> <span data-ttu-id="9b55e-136">ASP.NET ale použije připojovací řetězec v souboru Machine. config pro připojení k vaší databázi.</span><span class="sxs-lookup"><span data-stu-id="9b55e-136">However, ASP.NET will use the connection string in the machine.config file to connect to your database.</span></span> <span data-ttu-id="9b55e-137">Ve výchozím nastavení bude tento připojovací řetězec ukazovat na instanci SQL Server 2005, takže pokud používáte SQL Server 2000 nebo SQL Server 7,0 instance, bude nutné upravit připojovací řetězec v souboru Machine. config.</span><span class="sxs-lookup"><span data-stu-id="9b55e-137">By default, this connection string will point to a SQL Server 2005 instance, so if you are using a SQL Server 2000 or SQL Server 7.0 instance, you will need to modify the connection string in the machine.config file.</span></span> <span data-ttu-id="9b55e-138">Připojovací řetězec může být umístěn zde:</span><span class="sxs-lookup"><span data-stu-id="9b55e-138">That connection string can be located here:</span></span>

[!code-xml[Main](membership/samples/sample1.xml)]

<span data-ttu-id="9b55e-139">Pokud ale připojovací řetězec neupravíte, ASP.NET vám nezobrazí popisnou chybu.</span><span class="sxs-lookup"><span data-stu-id="9b55e-139">Unfortunately, if you don't modify the connection string, ASP.NET will not give you a descriptive error.</span></span> <span data-ttu-id="9b55e-140">Bude pouze pokračovat na stížnosti, že jste databázi nevytvořili.</span><span class="sxs-lookup"><span data-stu-id="9b55e-140">It will just continue to complain saying that you haven't created the database.</span></span> <span data-ttu-id="9b55e-141">V případě výše jsme změnili připojovací řetězec tak, aby odkazoval na místní instanci SQL Server 2000.</span><span class="sxs-lookup"><span data-stu-id="9b55e-141">In the case above, I have modified the connection string to point to my local SQL Server 2000 instance.</span></span>

## <a name="specifying-configuration-and-adding-users-and-roles"></a><span data-ttu-id="9b55e-142">Určení konfigurace a přidání uživatelů a rolí</span><span class="sxs-lookup"><span data-stu-id="9b55e-142">Specifying Configuration and Adding Users and Roles</span></span>

<span data-ttu-id="9b55e-143">Dalším krokem při konfiguraci členství je přidání potřebných informací do souboru Web. config aplikace.</span><span class="sxs-lookup"><span data-stu-id="9b55e-143">The next step in configuring Membership is to add the necessary information to the web.config file of the application.</span></span> <span data-ttu-id="9b55e-144">V ASP.NET 1. x je změna souboru Web. config někdy obtížné kvůli použití lowerCamelCase a chybějící technologie IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="9b55e-144">In ASP.NET 1.x, modifying the web.config file was sometimes difficult because of the use of lowerCamelCase and the lack of Intellisense.</span></span> <span data-ttu-id="9b55e-145">Visual Studio .NET 2005 usnadňuje práci s technologií IntelliSense pro konfigurační soubory, ale ASP.NET 2,0 ještě jeden krok provedete tak, že poskytnete webové rozhraní pro úpravu konfiguračních souborů.</span><span class="sxs-lookup"><span data-stu-id="9b55e-145">Visual Studio .NET 2005 makes the task much easier with Intellisense for configuration files, but ASP.NET 2.0 goes one step further by providing a Web interface for editing configuration files.</span></span>

<span data-ttu-id="9b55e-146">Webové rozhraní můžete spustit kliknutím na tlačítko Konfigurace ASP.NET na panelu nástrojů Průzkumník řešení, jak je znázorněno níže.</span><span class="sxs-lookup"><span data-stu-id="9b55e-146">You can launch the Web interface by clicking the ASP.NET Configuration button on the Solution Explorer toolbar as shown below.</span></span> <span data-ttu-id="9b55e-147">Webové rozhraní můžete také spustit pomocí automaticky otevíraných oken, která se zobrazí, když jsou vloženy ovládací prvky přihlášení.</span><span class="sxs-lookup"><span data-stu-id="9b55e-147">You can also launch the Web interface via pop-ups that are displayed when Login controls are inserted.</span></span>

![](membership/_static/image2.jpg)

<span data-ttu-id="9b55e-148">**Obrázek 2**</span><span class="sxs-lookup"><span data-stu-id="9b55e-148">**Figure 2**</span></span>

<span data-ttu-id="9b55e-149">Tím se spustí nástroj pro správu webu ASP.NET zobrazený níže.</span><span class="sxs-lookup"><span data-stu-id="9b55e-149">This launches the ASP.NET Web Site Administration Tool shown below.</span></span> <span data-ttu-id="9b55e-150">Správa webu ASP.NET je rozhraní se čtyřmi kartami, které usnadňuje správu nastavení aplikace.</span><span class="sxs-lookup"><span data-stu-id="9b55e-150">The ASP.NET Web Site Administration is a four-tab interface that makes it easy to manage application settings.</span></span> <span data-ttu-id="9b55e-151">K dispozici jsou následující karty:</span><span class="sxs-lookup"><span data-stu-id="9b55e-151">The following tabs are available:</span></span>

- <span data-ttu-id="9b55e-152">**Domovské**</span><span class="sxs-lookup"><span data-stu-id="9b55e-152">**Home**</span></span>
- <span data-ttu-id="9b55e-153">**Zabezpečení** Nakonfigurujte uživatele, role a přístup.</span><span class="sxs-lookup"><span data-stu-id="9b55e-153">**Security** Configure users, roles, and access.</span></span>
- <span data-ttu-id="9b55e-154">**Aplikace** Nakonfigurujte nastavení aplikace.</span><span class="sxs-lookup"><span data-stu-id="9b55e-154">**Application** Configure application settings.</span></span>
- <span data-ttu-id="9b55e-155">**Poskytovatel** Nakonfigurujte a otestujte poskytovatele členství aplikací.</span><span class="sxs-lookup"><span data-stu-id="9b55e-155">**Provider** Configure and test your applications membership provider.</span></span>

<span data-ttu-id="9b55e-156">Nástroj pro správu webu umožňuje snadno vytvářet nové uživatele, vytvářet nové role a spravovat uživatele a role.</span><span class="sxs-lookup"><span data-stu-id="9b55e-156">The Web Site Administration Tool allows you to easily create new users, create new roles, and to manage users and roles.</span></span> <span data-ttu-id="9b55e-157">Tato možnost není k dispozici v rozhraní systému Windows.</span><span class="sxs-lookup"><span data-stu-id="9b55e-157">This ability is not available in the Windows interface.</span></span> <span data-ttu-id="9b55e-158">Rozhraní Windows umožňuje snadno definovat autorizační nastavení a přidávat, odstraňovat a spravovat poskytovatele, funkce, které nejsou v nástroji pro správu webu.</span><span class="sxs-lookup"><span data-stu-id="9b55e-158">The Windows interface allows you to easily define authorization settings and to add, delete, and manage providers, capabilities that are not in the Web Site Administration Tool.</span></span>

<span data-ttu-id="9b55e-159">Chcete-li spustit rozhraní systému Windows, otevřete modul snap-in Internetová informační služba, klikněte pravým tlačítkem na aplikaci a vyberte možnost Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="9b55e-159">To launch the Windows interface, open the Internet Information Services snap-in, right-click on your application, and choose Properties.</span></span> <span data-ttu-id="9b55e-160">Klikněte na kartu ASP.NET a potom klikněte na tlačítko Upravit konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="9b55e-160">Click the ASP.NET tab and then click the Edit Configuration button.</span></span> <span data-ttu-id="9b55e-161">(Aby se povolilo tlačítko Upravit konfiguraci, musí být aplikace spuštěná pod ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="9b55e-161">(The application must be running under ASP.NET 2.0 for the Edit Configuration button to be enabled.</span></span> <span data-ttu-id="9b55e-162">Verzi ASP.NET můžete nakonfigurovat také v dialogovém okně ASP.NET.) Zobrazí se dialogové okno nastavení konfigurace ASP.NET, jak je znázorněno níže.</span><span class="sxs-lookup"><span data-stu-id="9b55e-162">You can configure the ASP.NET version in the ASP.NET dialog as well.) The ASP.NET Configuration Settings dialog is displayed as shown below.</span></span>

![](membership/_static/image3.jpg)

<span data-ttu-id="9b55e-163">**Obrázek 3**</span><span class="sxs-lookup"><span data-stu-id="9b55e-163">**Figure 3**</span></span>

<span data-ttu-id="9b55e-164">Na kartě Obecné jsou uvedené připojovací řetězce a nastavení aplikace.</span><span class="sxs-lookup"><span data-stu-id="9b55e-164">On the General tab, connection strings and application settings are listed.</span></span> <span data-ttu-id="9b55e-165">Všechna nastavení v kurzívě jsou definována v nadřazeném konfiguračním souboru (buď Machine. config nebo Web. config na vyšší úrovni) a nastavení, která nejsou kurzívou, jsou z konfiguračního souboru aplikací.</span><span class="sxs-lookup"><span data-stu-id="9b55e-165">Any settings in italics are defined in a parent configuration file (either the machine.config or a web.config at a higher level) and settings not in italics are from the applications configuration file.</span></span> <span data-ttu-id="9b55e-166">Pokud se nastavení přidá, odebere nebo upraví na úrovni aplikace, ASP.NET místo odebrání nastavení z konfiguračního souboru, ze kterého se dědí, přidá, odebere nebo upraví nastavení na stránce Web. config úrovně aplikace.</span><span class="sxs-lookup"><span data-stu-id="9b55e-166">If a setting is added, removed, or edited at the application level, ASP.NET will add, remove, or modify the setting at the application levels web.config instead of removing the setting from the configuration file from which it is inherited.</span></span>

<span data-ttu-id="9b55e-167">Karta ověřování je uvedená níže.</span><span class="sxs-lookup"><span data-stu-id="9b55e-167">The Authentication tab is shown below.</span></span> <span data-ttu-id="9b55e-168">Tady budete konfigurovat nastavení členství.</span><span class="sxs-lookup"><span data-stu-id="9b55e-168">This is where you will configure your membership settings.</span></span> <span data-ttu-id="9b55e-169">Nastavení ověřování formulářů, zprostředkovatelé členství a zprostředkovatelé rolí lze nakonfigurovat zde.</span><span class="sxs-lookup"><span data-stu-id="9b55e-169">Forms authentication settings, membership providers, and role providers can be configured here.</span></span>

![](membership/_static/image4.jpg)

<span data-ttu-id="9b55e-170">**Obrázek 4**</span><span class="sxs-lookup"><span data-stu-id="9b55e-170">**Figure 4**</span></span>

## <a name="implementing-membership-in-your-application"></a><span data-ttu-id="9b55e-171">Implementace členství v aplikaci</span><span class="sxs-lookup"><span data-stu-id="9b55e-171">Implementing Membership in Your Application</span></span>

<span data-ttu-id="9b55e-172">Nejjednodušší způsob, jak implementovat členství v ASP.NET 2,0 ve vaší aplikaci, je použití zadaných přihlašovacích ovládacích prvků.</span><span class="sxs-lookup"><span data-stu-id="9b55e-172">The easiest way to implement ASP.NET 2.0 membership in your application is to use the provided Logon controls.</span></span> <span data-ttu-id="9b55e-173">Tato metoda umožňuje implementovat základy členství v ASP.NET 2,0 bez nutnosti psát jakýkoli kód vůbec.</span><span class="sxs-lookup"><span data-stu-id="9b55e-173">This method allows you to implement the basics of ASP.NET 2.0 membership without writing any code at all.</span></span>

<span data-ttu-id="9b55e-174">V ASP.NET 2,0 jsou k dispozici následující ovládací prvky přihlášení:</span><span class="sxs-lookup"><span data-stu-id="9b55e-174">The following Logon controls are available in ASP.NET 2.0:</span></span>

## <a name="login-control"></a><span data-ttu-id="9b55e-175">Řízení přihlášení</span><span class="sxs-lookup"><span data-stu-id="9b55e-175">Login Control</span></span>

<span data-ttu-id="9b55e-176">Ovládací prvek Login poskytuje rozhraní pro někoho, co se přihlašuje do vašeho systému členství.</span><span class="sxs-lookup"><span data-stu-id="9b55e-176">The Login control provides an interface for someone to log into your membership system.</span></span> <span data-ttu-id="9b55e-177">Poskytne vám textové pole uživatelské jméno a heslo a tlačítko pro přihlášení.</span><span class="sxs-lookup"><span data-stu-id="9b55e-177">It provides you with a username and password textbox and a login button.</span></span> <span data-ttu-id="9b55e-178">Řada dalších běžných funkcí, jako je například odkaz k registraci pro lidi, kteří ještě neudělali, zaškrtávací políčko, které uživateli umožňuje automatické přihlášení při následných návštěvách, odkaz na připomenutí hesla atd. Všechny funkce ovládacího prvku Login jsou přizpůsobitelné prostřednictvím vlastností ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="9b55e-178">Many other common features such as a link to register for people who have not yet done so, a checkbox that allows the user to automatically login on subsequent visits, a link for a password reminder, etc. All features of the Login control are customizable via the properties of the control.</span></span>

<span data-ttu-id="9b55e-179">V ASP.NET 1. x museli vývojáři psát spravedlivé množství kódu, aby mohli vyhledávat při ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="9b55e-179">In ASP.NET 1.x, developers had to write a fair amount of code to do a lookup when using Forms authentication.</span></span> <span data-ttu-id="9b55e-180">Pomocí členství v ASP.NET 2,0 můžete ověřovat uživatele bez nutnosti psát jakýkoli kód.</span><span class="sxs-lookup"><span data-stu-id="9b55e-180">With ASP.NET 2.0 membership, you can validate users without writing any code at all.</span></span> <span data-ttu-id="9b55e-181">ASP.NET automaticky provede hledání uživatele.</span><span class="sxs-lookup"><span data-stu-id="9b55e-181">ASP.NET will automatically do the look-up of the user for you.</span></span> <span data-ttu-id="9b55e-182">(Pokud používáte ovládací prvek přihlášení bez použití členství v ASP.NET, můžete k ověření uživatele použít metodu **ověřování** .)</span><span class="sxs-lookup"><span data-stu-id="9b55e-182">(If you are using the Login control without using ASP.NET membership, you can use the **OnAuthenticate** method to validate the user.)</span></span>

## <a name="loginview-control"></a><span data-ttu-id="9b55e-183">Ovládací prvek LoginView</span><span class="sxs-lookup"><span data-stu-id="9b55e-183">LoginView Control</span></span>

<span data-ttu-id="9b55e-184">Ovládací prvek LoginView je ovládací prvek bez vizuálního vzhledu, který ve výchozím nastavení poskytuje dvě šablony. AnonymousTemplate a LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="9b55e-184">The LoginView control is a templated control that provides two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="9b55e-185">Zobrazená šablona je určena bez ohledu na to, zda je uživatel přihlášen k systému členství.</span><span class="sxs-lookup"><span data-stu-id="9b55e-185">The template that is displayed is determined by whether or not the user is logged into your membership system.</span></span> <span data-ttu-id="9b55e-186">Tento ovládací prvek se obvykle používá k zobrazení přihlašovacího ovládacího prvku, když uživatel ještě není přihlášený, a ovládací stavu přihlášení ovládací prvek a další přihlašovací ovládací prvky, když se uživatel přihlásí.</span><span class="sxs-lookup"><span data-stu-id="9b55e-186">This control is typically used to display a Login control when a user has not yet logged in and a LoginStatus control and/or other login controls when the user has logged in.</span></span> <span data-ttu-id="9b55e-187">Pokud používáte správu rolí v aplikaci ASP.NET, ovládací prvek LoginView může zobrazit specifickou šablonu založenou na roli uživatele.</span><span class="sxs-lookup"><span data-stu-id="9b55e-187">If you are using role management in your ASP.NET application, the LoginView control can display a specific template based upon the users role.</span></span> <span data-ttu-id="9b55e-188">(Další informace o správě rolí ASP.NET se týkají později.)</span><span class="sxs-lookup"><span data-stu-id="9b55e-188">(More on ASP.NET role management will be covered later.)</span></span>

## <a name="passwordrecovery-control"></a><span data-ttu-id="9b55e-189">Ovládací prvek PasswordRecovery</span><span class="sxs-lookup"><span data-stu-id="9b55e-189">PasswordRecovery Control</span></span>

<span data-ttu-id="9b55e-190">Ovládací prvek PasswordRecovery umožňuje uživatelům příjem e-mailů s jeho aktuálním heslem nebo resetování jeho hesla.</span><span class="sxs-lookup"><span data-stu-id="9b55e-190">The PasswordRecovery control allows users to receive an email with his or her current password or reset his or her password.</span></span> <span data-ttu-id="9b55e-191">Nešifrovaný text a šifrovaná hesla se dají obnovit a poslat uživatelům e-mailem.</span><span class="sxs-lookup"><span data-stu-id="9b55e-191">Clear text and encrypted passwords can be recovered and emailed to users.</span></span> <span data-ttu-id="9b55e-192">Pokud je heslo nastaveno na hodnotu hash, nelze ho obnovit.</span><span class="sxs-lookup"><span data-stu-id="9b55e-192">If the password is hashed, it cannot be recovered.</span></span> <span data-ttu-id="9b55e-193">Místo toho bude uživatel muset provést resetování hesla.</span><span class="sxs-lookup"><span data-stu-id="9b55e-193">Instead the user will be required to perform a password reset.</span></span>

## <a name="loginstatus-control"></a><span data-ttu-id="9b55e-194">Ovládací prvek ovládací stavu přihlášení</span><span class="sxs-lookup"><span data-stu-id="9b55e-194">LoginStatus Control</span></span>

<span data-ttu-id="9b55e-195">Ovládací prvek ovládací stavu přihlášení se používá k zobrazení indikátoru přihlášení pro uživatele, kteří nejsou přihlášení, a indikátor odhlášení pro uživatele, kteří jsou aktuálně přihlášení.</span><span class="sxs-lookup"><span data-stu-id="9b55e-195">The LoginStatus control is used to display a login indicator to users who are not logged in and a logout indicator to users who are currently logged in.</span></span> <span data-ttu-id="9b55e-196">Vlastnost Request. neověřená se používá k určení indikátoru, který se má zobrazit.</span><span class="sxs-lookup"><span data-stu-id="9b55e-196">The Request.IsAuthenticated property is used to determine which indicator to display.</span></span> <span data-ttu-id="9b55e-197">Indikátor zobrazený ovládacím prvkem ovládací stavu přihlášení může být text (implementovaný prostřednictvím vlastností **LoginText** a **LogoutText** ) nebo imagí (implementované prostřednictvím vlastností **LoginImageUrl** a **LogoutImageUrl** ).</span><span class="sxs-lookup"><span data-stu-id="9b55e-197">The indicator displayed by the LoginStatus control can be text (implemented via the **LoginText** and **LogoutText** properties) or images (implemented via the **LoginImageUrl** and **LogoutImageUrl** properties.)</span></span>

<span data-ttu-id="9b55e-198">Když se uživatel odhlásí prostřednictvím ovládacího prvku ovládací stavu přihlášení, přesměruje na adresu URL určenou vlastností **LogoutPageUrl** .</span><span class="sxs-lookup"><span data-stu-id="9b55e-198">When a user logs out via the LoginStatus control, he or she is redirected to the URL specified by the **LogoutPageUrl** property.</span></span> <span data-ttu-id="9b55e-199">Pokud tato vlastnost není nastavená, aktuální stránka se aktualizuje.</span><span class="sxs-lookup"><span data-stu-id="9b55e-199">If that property is not set, the current page is refreshed.</span></span> <span data-ttu-id="9b55e-200">Vzhledem k tomu, že lokalita je nejspíš chráněna ověřováním pomocí formulářů, aktualizuje aktuální stránku uživatele na přihlašovací stránku pro daný web.</span><span class="sxs-lookup"><span data-stu-id="9b55e-200">Since the site is likely protected by Forms authentication, the refresh of the current page will redirect the user to the login page for the site.</span></span>

## <a name="loginname-control"></a><span data-ttu-id="9b55e-201">Ovládací prvek LoginName</span><span class="sxs-lookup"><span data-stu-id="9b55e-201">LoginName Control</span></span>

<span data-ttu-id="9b55e-202">Ovládací prvek LoginName zobrazuje uživatelské jméno aktuálně přihlášeného k webu.</span><span class="sxs-lookup"><span data-stu-id="9b55e-202">The LoginName control displays the username of the user currently logged into the site.</span></span>

## <a name="createuserwizard-control"></a><span data-ttu-id="9b55e-203">CreateUserWizard Control</span><span class="sxs-lookup"><span data-stu-id="9b55e-203">CreateUserWizard Control</span></span>

<span data-ttu-id="9b55e-204">Ovládací prvek ovládacím CreateUserWizard poskytuje uživatelům pohodlný způsob, jak si zaregistrovat svůj systém členství.</span><span class="sxs-lookup"><span data-stu-id="9b55e-204">The CreateUserWizard control provides users with a convenient way to register for your membership system.</span></span> <span data-ttu-id="9b55e-205">Můžete přidat kroky (implementované jako kolekce WizardStep) prostřednictvím rozhraní uvedeného níže.</span><span class="sxs-lookup"><span data-stu-id="9b55e-205">You can add steps (implemented as a collection of WizardSteps) via the interface shown below.</span></span>

![](membership/_static/image5.jpg)

<span data-ttu-id="9b55e-206">**Obrázek 5**</span><span class="sxs-lookup"><span data-stu-id="9b55e-206">**Figure 5**</span></span>

<span data-ttu-id="9b55e-207">Ovládacím CreateUserWizard je ovládací prvek bez vizuálního vzhledu, který je odvozený od třídy Wizard a poskytuje následující šablony:</span><span class="sxs-lookup"><span data-stu-id="9b55e-207">The CreateUserWizard is a templated control that derives from the Wizard class and provides the following templates:</span></span>

- <span data-ttu-id="9b55e-208">**Šablona HeaderTemplate** Tato šablona ovládá vzhled záhlaví průvodce.</span><span class="sxs-lookup"><span data-stu-id="9b55e-208">**HeaderTemplate** This template controls the appearance of the header of the wizard.</span></span>
- <span data-ttu-id="9b55e-209">**Oddíl SideBarTemplate** Tato šablona ovládá vzhled postranního panelu Průvodce.</span><span class="sxs-lookup"><span data-stu-id="9b55e-209">**SidebarTemplate** This template controls the appearance of the sidebar of the wizard.</span></span>
- <span data-ttu-id="9b55e-210">**Oddíl StartNavigationTemplate** Tato šablona ovládá vzhled navigace v úvodním kroku.</span><span class="sxs-lookup"><span data-stu-id="9b55e-210">**StartNavigationTemplate** This template controls the appearance of the navigation are of the wizard at the start step.</span></span>
- <span data-ttu-id="9b55e-211">**Oddíl StepNavigationTemplate** Tato šablona ovládá vzhled navigační oblasti, pokud není v kroku zahájení nebo dokončení.</span><span class="sxs-lookup"><span data-stu-id="9b55e-211">**StepNavigationTemplate** This template controls the appearance of the navigation area when not in the start or finish step.</span></span>
- <span data-ttu-id="9b55e-212">**Oddíl FinishNavigationTemplate** Tato šablona ovládá vzhled navigační oblasti v kroku dokončení.</span><span class="sxs-lookup"><span data-stu-id="9b55e-212">**FinishNavigationTemplate** This template controls the appearance of the navigation area when on the finish step.</span></span>

<span data-ttu-id="9b55e-213">V případě každého kroku, který přidáte do průvodce, ASP.NET vytvoří vlastní šablonu, která obsahuje objekt ContentTemplate a oddíl CustomNavigationTemplate pro daný krok.</span><span class="sxs-lookup"><span data-stu-id="9b55e-213">Additionally, for each step that you add to the Wizard, ASP.NET will create a custom template that contains both a ContentTemplate and a CustomNavigationTemplate for that step.</span></span> <span data-ttu-id="9b55e-214">Úplné podrobnosti o přizpůsobení ovládacím CreateUserWizard najdete v dokumentaci k VS.NET 2005:</span><span class="sxs-lookup"><span data-stu-id="9b55e-214">For full details on customizing the CreateUserWizard, see the VS.NET 2005 documentation:</span></span>

## <a name="changepassword-control"></a><span data-ttu-id="9b55e-215">Ovládací prvek ChangePassword</span><span class="sxs-lookup"><span data-stu-id="9b55e-215">ChangePassword Control</span></span>

<span data-ttu-id="9b55e-216">Ovládací prvek ChangePassword umožňuje uživatelům změnit své heslo.</span><span class="sxs-lookup"><span data-stu-id="9b55e-216">The ChangePassword control allows users to change his or her password.</span></span> <span data-ttu-id="9b55e-217">Pokud má vlastnost DisplayUserName hodnotu true (ve výchozím nastavení je to false), může uživatel změnit své heslo, pokud nejsou přihlášeni.</span><span class="sxs-lookup"><span data-stu-id="9b55e-217">If the DisplayUserName property is true (it is false by default), the user can change his or her password when they are not logged in.</span></span> <span data-ttu-id="9b55e-218">Pokud *je* uživatel již přihlášen a vlastnost DisplayUserName je nastavena na hodnotu true, bude uživatel moci změnit heslo jiného uživatele, který není přihlášený, aby znal ID uživatele daného uživatele.</span><span class="sxs-lookup"><span data-stu-id="9b55e-218">If the user *is* already logged in and the DisplayUserName property is true, the user will be able to change the password of another user that is not logged in providing they know the user ID of that user.</span></span>

<span data-ttu-id="9b55e-219">Mějte na paměti, že pokud chcete, aby uživatelé mohli měnit hesla, aniž byste se museli přihlašovat, budete muset zajistit, aby se stránka, na které se ovládací prvek ChangePassword zobrazuje, dala anonymní přístup.</span><span class="sxs-lookup"><span data-stu-id="9b55e-219">Keep in mind that if you want users to be able to change passwords without having to log in, you will need to ensure that the page on which the ChangePassword control is displayed allows anonymous access.</span></span> <span data-ttu-id="9b55e-220">Uživatelé budou muset zadat své staré heslo, aby si mohli změnit heslo.</span><span class="sxs-lookup"><span data-stu-id="9b55e-220">Obviously, users will have to provide their old password in order to change their password.</span></span>

## <a name="role-management"></a><span data-ttu-id="9b55e-221">Správa rolí</span><span class="sxs-lookup"><span data-stu-id="9b55e-221">Role Management</span></span>

<span data-ttu-id="9b55e-222">Správa rolí umožňuje přiřadit uživatele k určité roli a pak omezit přístup k určitým souborům nebo složkám na základě této role.</span><span class="sxs-lookup"><span data-stu-id="9b55e-222">Role management allows you to assign users to a particular role and then restrict access to certain file or folders based on that role.</span></span> <span data-ttu-id="9b55e-223">Správa rolí taky poskytuje rozhraní API, pomocí kterého můžete programově určit role uživatelů nebo určit všechny uživatele v určité roli a odpovídajícím způsobem odpovědět.</span><span class="sxs-lookup"><span data-stu-id="9b55e-223">Role management also provides an API so that you can programmatically determine someones role or determine all users in a particular role and respond accordingly.</span></span>

<span data-ttu-id="9b55e-224">Správa rolí není požadavkem v členství v ASP.NET, a proto není požadavkem pro použití správy rolí členem členství.</span><span class="sxs-lookup"><span data-stu-id="9b55e-224">Role management is not a requirement in ASP.NET membership, nor is membership a requirement in order to use role management.</span></span> <span data-ttu-id="9b55e-225">Nicméně dva doplňují v tomto dodatku a je pravděpodobnější, že je budou používat společně spolu s nimi.</span><span class="sxs-lookup"><span data-stu-id="9b55e-225">However, the two supplement each other nicely and it is likely that developers will use them in conjunction with each other.</span></span>

<span data-ttu-id="9b55e-226">Chcete-li povolit správu rolí ve vaší aplikaci, proveďte následující změny v souboru Web. config:</span><span class="sxs-lookup"><span data-stu-id="9b55e-226">To enable role management in your application, make the following change in your web.config file:</span></span>

[!code-xml[Main](membership/samples/sample2.xml)]

<span data-ttu-id="9b55e-227">Pokud je atribut **CacheRolesInCookie** nastaven na hodnotu true, ASP.NET ukládá členství v rolích uživatelů do souboru cookie v klientovi.</span><span class="sxs-lookup"><span data-stu-id="9b55e-227">When the **cacheRolesInCookie** attribute is set to true, ASP.NET caches a users role membership in a cookie on the client.</span></span> <span data-ttu-id="9b55e-228">To umožňuje, aby vyhledávání rolí probíhalo bez volání do poskytovatel RoleProvider.</span><span class="sxs-lookup"><span data-stu-id="9b55e-228">This allows role lookups to occur without calls into the RoleProvider.</span></span> <span data-ttu-id="9b55e-229">Při použití tohoto atributu doporučujeme vývojářům zajistit, aby byl atribut **CookieProtection** nastaven na hodnotu vše.</span><span class="sxs-lookup"><span data-stu-id="9b55e-229">When using this attribute, developers are encouraged to ensure that the **cookieProtection** attribute is set to All.</span></span> <span data-ttu-id="9b55e-230">(Toto je výchozí nastavení.) Tím se zajistí, že se data cookie šifrují a napomáhají zajistit, aby se obsah souborů cookie nezměnil.</span><span class="sxs-lookup"><span data-stu-id="9b55e-230">(This is the default setting.) This ensures that the cookie data are encrypted and helps to ensure that the cookies contents haven't been altered.</span></span> <span data-ttu-id="9b55e-231">Role je možné přidat pomocí nástroje pro správu webu.</span><span class="sxs-lookup"><span data-stu-id="9b55e-231">Roles can be added using the Web Site Administration Tool.</span></span> <span data-ttu-id="9b55e-232">Umožňuje snadno definovat role, konfigurovat přístup k částem lokality na základě těchto rolí a přiřazovat uživatele k rolím.</span><span class="sxs-lookup"><span data-stu-id="9b55e-232">It allows you to easily define roles, configure access to parts of the site based on those roles, and assign users to roles.</span></span>

![](membership/_static/image6.jpg)

<span data-ttu-id="9b55e-233">**Obrázek 6**</span><span class="sxs-lookup"><span data-stu-id="9b55e-233">**Figure 6**</span></span>

<span data-ttu-id="9b55e-234">Jak vidíte výše, můžete přidat nové role pouhým zadáním názvu role a kliknutím na Přidat roli.</span><span class="sxs-lookup"><span data-stu-id="9b55e-234">As shown above, new roles can be added by simply entering the name of the role and then clicking Add Role.</span></span> <span data-ttu-id="9b55e-235">Existující role se dají spravovat nebo odstraňovat kliknutím na příslušný odkaz v seznamu existujících rolí.</span><span class="sxs-lookup"><span data-stu-id="9b55e-235">Existing roles can be managed or deleted by clicking the appropriate link in the list of existing roles.</span></span>

<span data-ttu-id="9b55e-236">Při správě role můžete přidat nebo odebrat uživatele, jak je znázorněno níže.</span><span class="sxs-lookup"><span data-stu-id="9b55e-236">When you manage a role, you can add or remove users as shown below.</span></span>

![](membership/_static/image7.jpg)

<span data-ttu-id="9b55e-237">**Obrázek 7**</span><span class="sxs-lookup"><span data-stu-id="9b55e-237">**Figure 7**</span></span>

<span data-ttu-id="9b55e-238">Zaškrtnutím políčka Uživatel je v roli můžete snadno přidat uživatele do konkrétní role.</span><span class="sxs-lookup"><span data-stu-id="9b55e-238">By checking the User Is In Role checkbox, you can easily add a user to a specific role.</span></span> <span data-ttu-id="9b55e-239">ASP.NET bude automaticky aktualizovat vaši databázi členství odpovídajícími položkami.</span><span class="sxs-lookup"><span data-stu-id="9b55e-239">ASP.NET will automatically update your membership database with the appropriate entries.</span></span> <span data-ttu-id="9b55e-240">Budete také chtít nakonfigurovat pravidla přístupu pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="9b55e-240">You will also want to configure access rules for your application.</span></span> <span data-ttu-id="9b55e-241">Vývojáři ASP.NET 1. x jsou obeznámeni s tím, že se to dělá prostřednictvím elementu &lt;Authorization&gt; v souboru Web. config a tato možnost je stále k dispozici v ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="9b55e-241">ASP.NET 1.x developers are familiar with doing this via the &lt;authorization&gt; element in the web.config file, and that option is still available in ASP.NET 2.0.</span></span> <span data-ttu-id="9b55e-242">Správa pravidel přístupu však usnadňuje správu pomocí nástroje pro správu webu, jak je znázorněno níže.</span><span class="sxs-lookup"><span data-stu-id="9b55e-242">However, its easier to manage access rules using the Web Site Administration Tool as shown below.</span></span>

![](membership/_static/image8.jpg)

<span data-ttu-id="9b55e-243">**Obrázek 8**</span><span class="sxs-lookup"><span data-stu-id="9b55e-243">**Figure 8**</span></span>

<span data-ttu-id="9b55e-244">V takovém případě je zvýrazněna složka pro správu (je obtížné ji vidět, protože nástroj je zvýrazní šedě) a má roli správců udělen přístup.</span><span class="sxs-lookup"><span data-stu-id="9b55e-244">In this case, the Administration folder is highlighted (its difficult to see because the tool highlights it in light gray) and the Administrators role has been granted access.</span></span> <span data-ttu-id="9b55e-245">Všichni ostatní uživatelé mají odepřený přístup.</span><span class="sxs-lookup"><span data-stu-id="9b55e-245">All other users are denied.</span></span> <span data-ttu-id="9b55e-246">Můžete kliknout na ikonu záhlaví a vybrat pravidlo a potom pomocí tlačítek nahoru a dolů seřadit pravidla.</span><span class="sxs-lookup"><span data-stu-id="9b55e-246">You can click on the head icon to select a rule and then use the Move Up and Move Down buttons to arrange the rules.</span></span> <span data-ttu-id="9b55e-247">Stejně jako u elementu ASP.NET &lt;Authorization&gt; se pravidla zpracovávají v pořadí, ve kterém se zobrazují.</span><span class="sxs-lookup"><span data-stu-id="9b55e-247">As with the ASP.NET &lt;authorization&gt; element, rules are processed in the order in which they appear.</span></span> <span data-ttu-id="9b55e-248">Jinými slovy, pokud se pořadí pravidel v snímku výše vrátilo zpět, nikdo by neměl přístup ke složce pro správu, protože první pravidlo, které by se ASP.NET, by představovalo pravidlo, které zakazuje všem do složky.</span><span class="sxs-lookup"><span data-stu-id="9b55e-248">In other words, if the order of rules in the shot above were reversed, no one would have access to the Administration folder because the first rule that ASP.NET would encounter would be the rule that denies everyone to the folder.</span></span>

<span data-ttu-id="9b55e-249">ASP.NET 2,0 přidá soubor Web. config do složky, pro kterou zadáváte přístupové pravidlo.</span><span class="sxs-lookup"><span data-stu-id="9b55e-249">ASP.NET 2.0 adds a web.config file to the folder for which you are specifying an access rule.</span></span> <span data-ttu-id="9b55e-250">Pravidla přístupu se dají upravovat pomocí konfiguračního souboru nebo pomocí nástroje pro správu webu.</span><span class="sxs-lookup"><span data-stu-id="9b55e-250">Access rules can be edited via the configuration file or via the Web Site Administration Tool.</span></span> <span data-ttu-id="9b55e-251">Jinými slovy, nástroj pro správu webu je jednoduše rozhraní, pomocí kterého se konfigurační soubor dá upravovat v uživatelsky přívětivém prostředí.</span><span class="sxs-lookup"><span data-stu-id="9b55e-251">In other words, the Web Site Administration Tool is simply an interface through which the configuration file can be edited in a user-friendly environment.</span></span>

## <a name="using-roles-in-code"></a><span data-ttu-id="9b55e-252">Použití rolí v kódu</span><span class="sxs-lookup"><span data-stu-id="9b55e-252">Using Roles in Code</span></span>

<span data-ttu-id="9b55e-253">Rozhraní API pro správu rolí se od verze 1. x nezměnilo.</span><span class="sxs-lookup"><span data-stu-id="9b55e-253">The API for role management has not changed since version 1.x.</span></span> <span data-ttu-id="9b55e-254">Metoda **IsInRole** slouží k určení, jestli je uživatel v určité roli.</span><span class="sxs-lookup"><span data-stu-id="9b55e-254">The **IsInRole** method is used to determine if a user is in a particular role.</span></span>

[!code-csharp[Main](membership/samples/sample3.cs)]

<span data-ttu-id="9b55e-255">ASP.NET také vytvoří instanci tento RolePrincipal jako člena aktuálního kontextu.</span><span class="sxs-lookup"><span data-stu-id="9b55e-255">ASP.NET also creates a RolePrincipal instance as a member of the current context.</span></span> <span data-ttu-id="9b55e-256">Objekt tento RolePrincipal lze použít k získání všech rolí, ke kterým uživatel patří, následovně:</span><span class="sxs-lookup"><span data-stu-id="9b55e-256">The RolePrincipal object can be used to obtain all of the roles to which the user belongs as follows:</span></span>

[!code-csharp[Main](membership/samples/sample4.cs)]

## <a name="using-rolegroups-with-the-loginview-control"></a><span data-ttu-id="9b55e-257">Použití kolekci RoleGroups s ovládacím prvkem LoginView</span><span class="sxs-lookup"><span data-stu-id="9b55e-257">Using RoleGroups with the LoginView Control</span></span>

<span data-ttu-id="9b55e-258">Teď, když jste obeznámeni se správou rolí a členstvím, umožňuje stručně diskutovat, jak ovládací prvek LoginView využívá tuto funkci v ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="9b55e-258">Now that you have an understanding of role management and membership, lets discuss briefly how the LoginView control takes advantage of this capability in ASP.NET 2.0.</span></span> <span data-ttu-id="9b55e-259">Jak už bylo popsáno, ovládací prvek LoginView je ovládací prvek bez vizuálního vzhledu, který ve výchozím nastavení obsahuje dvě šablony; AnonymousTemplate a LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="9b55e-259">As previously discussed, the LoginView control is a templated control that contains two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="9b55e-260">V dialogovém okně úlohy LoginView je odkaz (zobrazený níže), který umožňuje upravit kolekci RoleGroups.</span><span class="sxs-lookup"><span data-stu-id="9b55e-260">Within the LoginView Tasks dialog is a link (shown below) that allows you to edit RoleGroups.</span></span>

![](membership/_static/image9.jpg)

<span data-ttu-id="9b55e-261">**Obrázek 9**</span><span class="sxs-lookup"><span data-stu-id="9b55e-261">**Figure 9**</span></span>

<span data-ttu-id="9b55e-262">Každý objekt ve skupinových rolích obsahuje pole řetězců, které definují role, na které se vztahuje role.</span><span class="sxs-lookup"><span data-stu-id="9b55e-262">Each RoleGroup object contains an array of strings that defines which roles that RoleGroup applies to.</span></span> <span data-ttu-id="9b55e-263">Chcete-li do ovládacího prvku LoginView přidat novou skupina rolí, klikněte na odkaz upravit kolekci RoleGroups.</span><span class="sxs-lookup"><span data-stu-id="9b55e-263">To add a new RoleGroup to the LoginView control, click the Edit RoleGroups link.</span></span> <span data-ttu-id="9b55e-264">Na obrázku výše vidíte, že jsem pro správce přidal novou skupinu rolí.</span><span class="sxs-lookup"><span data-stu-id="9b55e-264">In the image above, you can see that I have added a new RoleGroup for Administrators.</span></span> <span data-ttu-id="9b55e-265">Výběrem této skupiny rolí (skupiny rolí [0]) z rozevíracího seznamu zobrazení lze nakonfigurovat šablonu, která bude zobrazena pouze pro členy role správců.</span><span class="sxs-lookup"><span data-stu-id="9b55e-265">By selecting that RoleGroup (RoleGroup[0]) from the Views dropdown, I can configure a template that will only be displayed to members of the Administrators role.</span></span> <span data-ttu-id="9b55e-266">Na následujícím obrázku jsem přidal novou roli role, která se vztahuje na členy role Sales a role distribuce.</span><span class="sxs-lookup"><span data-stu-id="9b55e-266">In the image below, I have added a new RoleGroup that applies to members of the Sales role and the Distribution role.</span></span> <span data-ttu-id="9b55e-267">Tím se přidá druhá role do rozevíracího seznamu zobrazení v dialogovém okně úlohy LoginView a cokoli přidané do této šablony uvidí libovolný uživatel v roli Sales nebo Distribution.</span><span class="sxs-lookup"><span data-stu-id="9b55e-267">This adds a second RoleGroup to the Views dropdown in the LoginView Tasks dialog and anything added to that template will be visible by any user in either the Sales or Distribution role.</span></span>

![](membership/_static/image10.jpg)

<span data-ttu-id="9b55e-268">**Obrázek 10**</span><span class="sxs-lookup"><span data-stu-id="9b55e-268">**Figure 10**</span></span>

## <a name="overriding-the-existing-membership-provider"></a><span data-ttu-id="9b55e-269">Přepsání stávajícího zprostředkovatele členství</span><span class="sxs-lookup"><span data-stu-id="9b55e-269">Overriding the Existing Membership Provider</span></span>

<span data-ttu-id="9b55e-270">Existuje několik způsobů, jak můžete roztáhnout funkce ASP.NET členství.</span><span class="sxs-lookup"><span data-stu-id="9b55e-270">There are a couple of ways that you can extend the functionality of ASP.NET membership.</span></span> <span data-ttu-id="9b55e-271">První z nich můžete zjevně změnit stávající funkce třídy SqlMembershipProvider děděním z ní a přepsáním jejích metod.</span><span class="sxs-lookup"><span data-stu-id="9b55e-271">First of all, you can obviously change the existing functionality of the SqlMembershipProvider class by inheriting from it and overriding its methods.</span></span> <span data-ttu-id="9b55e-272">Například pokud chcete implementovat vlastní funkce při vytváření uživatelů, můžete vytvořit vlastní třídu, která dědí z SqlMembershipProvider následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="9b55e-272">For example, if you want to implement your own functionality when users are created, you can create your own class that inherits from SqlMembershipProvider as follows:</span></span>

[!code-csharp[Main](membership/samples/sample5.cs)]

<span data-ttu-id="9b55e-273">Pokud na druhé straně chcete vytvořit vlastního poskytovatele (pro ukládání informací o členství v databázi Access), můžete vytvořit vlastního poskytovatele.</span><span class="sxs-lookup"><span data-stu-id="9b55e-273">If, on the other hand, you want to create your own provider (to store your membership information in an Access database, for example), you can create your own provider.</span></span>

## <a name="creating-your-own-membership-provider"></a><span data-ttu-id="9b55e-274">Vytvoření vlastního poskytovatele členství</span><span class="sxs-lookup"><span data-stu-id="9b55e-274">Creating Your Own Membership Provider</span></span>

<span data-ttu-id="9b55e-275">Chcete-li vytvořit vlastního poskytovatele členství, budete nejprve muset vytvořit třídu, která dědí z třídy MembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="9b55e-275">To create your own membership provider, you will first need to create a class that inherits from the MembershipProvider class.</span></span> <span data-ttu-id="9b55e-276">Pokud používáte VB.NET, Visual Studio 2005 přidá zástupné procedury pro všechny metody, které je třeba přepsat.</span><span class="sxs-lookup"><span data-stu-id="9b55e-276">If you are using VB.NET, Visual Studio 2005 will add the stubs for all of the methods that you need to override.</span></span> <span data-ttu-id="9b55e-277">Pokud používáte C#, můžete přidat zástupné procedury.</span><span class="sxs-lookup"><span data-stu-id="9b55e-277">If you are using C#, its up to you to add the stubs.</span></span>

<span data-ttu-id="9b55e-278">Bude nutné přepsat následující:</span><span class="sxs-lookup"><span data-stu-id="9b55e-278">You will need to override the following:</span></span>

- <span data-ttu-id="9b55e-279">ApplicationName – vlastnost</span><span class="sxs-lookup"><span data-stu-id="9b55e-279">ApplicationName property</span></span>
- <span data-ttu-id="9b55e-280">ChangePassword – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-280">ChangePassword function</span></span>
- <span data-ttu-id="9b55e-281">ChangePasswordQuestionAndAnswer – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-281">ChangePasswordQuestionAndAnswer function</span></span>
- <span data-ttu-id="9b55e-282">CreateUser – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-282">CreateUser function</span></span>
- <span data-ttu-id="9b55e-283">DeleteUser – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-283">DeleteUser function</span></span>
- <span data-ttu-id="9b55e-284">Vlastnost EnablePasswordReset</span><span class="sxs-lookup"><span data-stu-id="9b55e-284">EnablePasswordReset property</span></span>
- <span data-ttu-id="9b55e-285">Vlastnost EnablePasswordRetrieval</span><span class="sxs-lookup"><span data-stu-id="9b55e-285">EnablePasswordRetrieval property</span></span>
- <span data-ttu-id="9b55e-286">FindUsersByEmail – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-286">FindUsersByEmail function</span></span>
- <span data-ttu-id="9b55e-287">FindUsersByName – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-287">FindUsersByName function</span></span>
- <span data-ttu-id="9b55e-288">GetAllUsers – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-288">GetAllUsers function</span></span>
- <span data-ttu-id="9b55e-289">GetNumberOfUsersOnline – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-289">GetNumberOfUsersOnline function</span></span>
- <span data-ttu-id="9b55e-290">GetPassword – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-290">GetPassword function</span></span>
- <span data-ttu-id="9b55e-291">GetUser – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-291">GetUser function</span></span>
- <span data-ttu-id="9b55e-292">GetUserNameByEmail – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-292">GetUserNameByEmail function</span></span>
- <span data-ttu-id="9b55e-293">Vlastnost MaxInvalidPasswordAttempts</span><span class="sxs-lookup"><span data-stu-id="9b55e-293">MaxInvalidPasswordAttempts property</span></span>
- <span data-ttu-id="9b55e-294">Vlastnost hodnota MinRequiredNonAlphanumericCharacters</span><span class="sxs-lookup"><span data-stu-id="9b55e-294">MinRequiredNonAlphanumericCharacters property</span></span>
- <span data-ttu-id="9b55e-295">Vlastnost hodnota minRequiredPasswordLength</span><span class="sxs-lookup"><span data-stu-id="9b55e-295">MinRequiredPasswordLength property</span></span>
- <span data-ttu-id="9b55e-296">Vlastnost PasswordAttemptWindow</span><span class="sxs-lookup"><span data-stu-id="9b55e-296">PasswordAttemptWindow property</span></span>
- <span data-ttu-id="9b55e-297">Vlastnost PasswordFormat</span><span class="sxs-lookup"><span data-stu-id="9b55e-297">PasswordFormat property</span></span>
- <span data-ttu-id="9b55e-298">Vlastnost PasswordStrengthRegularExpression</span><span class="sxs-lookup"><span data-stu-id="9b55e-298">PasswordStrengthRegularExpression property</span></span>
- <span data-ttu-id="9b55e-299">Vlastnost RequiresQuestionAndAnswer</span><span class="sxs-lookup"><span data-stu-id="9b55e-299">RequiresQuestionAndAnswer property</span></span>
- <span data-ttu-id="9b55e-300">Vlastnost RequiresUniqueEmail</span><span class="sxs-lookup"><span data-stu-id="9b55e-300">RequiresUniqueEmail property</span></span>
- <span data-ttu-id="9b55e-301">ResetPassword – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-301">ResetPassword function</span></span>
- <span data-ttu-id="9b55e-302">Odemknout funkci uživatele</span><span class="sxs-lookup"><span data-stu-id="9b55e-302">Unlock user function</span></span>
- <span data-ttu-id="9b55e-303">UpdateUser – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-303">UpdateUser function</span></span>
- <span data-ttu-id="9b55e-304">ValidateUser – funkce</span><span class="sxs-lookup"><span data-stu-id="9b55e-304">ValidateUser function</span></span>

<span data-ttu-id="9b55e-305">To je poměrně seznam, který se má implementovat C# jako vývojář.</span><span class="sxs-lookup"><span data-stu-id="9b55e-305">Thats quite a list to implement as a C# developer.</span></span> <span data-ttu-id="9b55e-306">Může být snazší vytvořit třídu v VB.NET bez implementace a pak použít reflektor .NET nebo podobný nástroj k převedení kódu na C#.</span><span class="sxs-lookup"><span data-stu-id="9b55e-306">You may find it easier to create the class in VB.NET without any implementation and then use .NET Reflector or a similar tool to convert the code to C#.</span></span>

<span data-ttu-id="9b55e-307">Připojovací řetězec a další vlastnosti by měly být nastaveny na výchozí hodnoty v metodě Initialize.</span><span class="sxs-lookup"><span data-stu-id="9b55e-307">The connection string and other properties should be set to their defaults in the Initialize method.</span></span> <span data-ttu-id="9b55e-308">(Metoda Initialize je vyvolána, když je poskytovatel načten za běhu.) Druhý parametr metody Initialize je typu System. Collections. specialize. kolekce NameValueCollection a je odkaz na &lt;přidání&gt; elementu, který je přidružen k vašemu vlastnímu poskytovateli v souboru Web. config.</span><span class="sxs-lookup"><span data-stu-id="9b55e-308">(The Initialize method is fired when the provider is loaded at runtime.) The second parameter to the Initialize method is of type System.Collections.Specialized.NameValueCollection and is a reference to the &lt;add&gt; element that is associated with your custom provider in the web.config file.</span></span> <span data-ttu-id="9b55e-309">Tato položka vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="9b55e-309">That entry looks like the following:</span></span>

[!code-xml[Main](membership/samples/sample6.xml)]

<span data-ttu-id="9b55e-310">Tady je příklad metody Initialize.</span><span class="sxs-lookup"><span data-stu-id="9b55e-310">Here is an example of the Initialize method.</span></span>

[!code-csharp[Main](membership/samples/sample7.cs)]

<span data-ttu-id="9b55e-311">Aby bylo možné uživatele ověřit při odeslání přihlašovacího formuláře, budete muset použít metodu ValidateUser.</span><span class="sxs-lookup"><span data-stu-id="9b55e-311">In order to validate the user when they submit your login form, you will need to use the ValidateUser method.</span></span> <span data-ttu-id="9b55e-312">Tato metoda je aktivována, když uživatel klikne na tlačítko pro přihlášení v ovládacím prvku Login.</span><span class="sxs-lookup"><span data-stu-id="9b55e-312">This method fires when the user clicks the login button in the Login control.</span></span> <span data-ttu-id="9b55e-313">Umístíte svůj kód, který bude vyhledávat uživatel v této metodě.</span><span class="sxs-lookup"><span data-stu-id="9b55e-313">You will place your code that does the user lookup in this method.</span></span>

<span data-ttu-id="9b55e-314">Jak vidíte, psaní vlastního poskytovatele členství není obtížné a umožňuje rozšířit tyto výkonné funkce ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="9b55e-314">As you can see, writing your own membership provider is not difficult and allows you to extend this powerful functionality of ASP.NET 2.0.</span></span>
