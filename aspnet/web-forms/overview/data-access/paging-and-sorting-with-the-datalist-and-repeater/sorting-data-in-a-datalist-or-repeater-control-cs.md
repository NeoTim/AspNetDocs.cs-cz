---
uid: web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
title: Řazení dat v ovládacím prvku DataList nebo Repeater (C#) | Microsoft Docs
author: rick-anderson
description: V tomto kurzu podíváme se, jak zahrnout podporu řazení do prvku DataList a Repeater, a jak vytvořit DataList nebo Repeater, jejichž data mohou...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: f52c302a-1b7c-46fe-8a13-8412c95cbf6d
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
msc.type: authoredcontent
ms.openlocfilehash: 66a09c637d33c812b39e0ce85a552bd71665a2e1
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78620279"
---
# <a name="sorting-data-in-a-datalist-or-repeater-control-c"></a><span data-ttu-id="9856d-103">Řazení dat sestavy ovládacími prvky DataList nebo Repeater (C#)</span><span class="sxs-lookup"><span data-stu-id="9856d-103">Sorting Data in a DataList or Repeater Control (C#)</span></span>

<span data-ttu-id="9856d-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="9856d-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="9856d-105">[Stáhnout ukázkovou aplikaci](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) nebo [Stáhnout PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="9856d-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) or [Download PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span></span>

> <span data-ttu-id="9856d-106">V tomto kurzu podíváme se, jak zahrnout podporu řazení do prvku DataList a Repeater a jak vytvořit DataList nebo Repeater, jejichž data lze stránkovat a seřadit.</span><span class="sxs-lookup"><span data-stu-id="9856d-106">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="introduction"></a><span data-ttu-id="9856d-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="9856d-107">Introduction</span></span>

<span data-ttu-id="9856d-108">V [předchozím kurzu](paging-report-data-in-a-datalist-or-repeater-control-cs.md) jsme prozkoumali, jak přidat podporu stránkování do prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="9856d-108">In the [previous tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to add paging support to a DataList.</span></span> <span data-ttu-id="9856d-109">Vytvořili jsme novou metodu ve třídě `ProductsBLL` (`GetProductsAsPagedDataSource`), která vrátila objekt `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="9856d-109">We created a new method in the `ProductsBLL` class (`GetProductsAsPagedDataSource`) that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="9856d-110">Při vazbě na prvek DataList nebo Repeater by prvek DataList nebo Repeater zobrazil pouze požadovanou stránku dat.</span><span class="sxs-lookup"><span data-stu-id="9856d-110">When bound to a DataList or Repeater, the DataList or Repeater would display just the requested page of data.</span></span> <span data-ttu-id="9856d-111">Tato technika je podobná tomu, co se používá interně ovládacími prvky GridView, DetailsView a FormView k zajištění předdefinovaných výchozích funkcí stránkování.</span><span class="sxs-lookup"><span data-stu-id="9856d-111">This technique is similar to what is used internally by the GridView, DetailsView, and FormView controls to provide their built-in default paging functionality.</span></span>

<span data-ttu-id="9856d-112">Kromě nabídky Podpora stránkování zahrnuje prvek GridView také podporu řazení v krabici.</span><span class="sxs-lookup"><span data-stu-id="9856d-112">In addition to offering paging support, the GridView also includes out of the box sorting support.</span></span> <span data-ttu-id="9856d-113">Prvky DataList ani Repeater neposkytují integrovanou funkci řazení; funkce řazení však lze přidat s bitem kódu.</span><span class="sxs-lookup"><span data-stu-id="9856d-113">Neither the DataList nor Repeater provides built-in sorting functionality; however, sorting features can be added with a bit of code.</span></span> <span data-ttu-id="9856d-114">V tomto kurzu podíváme se, jak zahrnout podporu řazení do prvku DataList a Repeater a jak vytvořit DataList nebo Repeater, jejichž data lze stránkovat a seřadit.</span><span class="sxs-lookup"><span data-stu-id="9856d-114">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="a-review-of-sorting"></a><span data-ttu-id="9856d-115">Kontrola řazení</span><span class="sxs-lookup"><span data-stu-id="9856d-115">A Review of Sorting</span></span>

<span data-ttu-id="9856d-116">Jak jsme viděli v kurzu pro [data o stránkování a řazení dat sestavy](../paging-and-sorting/paging-and-sorting-report-data-cs.md) , ovládací prvek GridView poskytuje podporu řazení v krabici.</span><span class="sxs-lookup"><span data-stu-id="9856d-116">As we saw in the [Paging and Sorting Report Data](../paging-and-sorting/paging-and-sorting-report-data-cs.md) tutorial, the GridView control provides out of the box sorting support.</span></span> <span data-ttu-id="9856d-117">Každé pole GridView může mít přidruženou `SortExpression`, která označuje datové pole, podle kterého se mají data řadit.</span><span class="sxs-lookup"><span data-stu-id="9856d-117">Each GridView field can have an associated `SortExpression`, which indicates the data field by which to sort the data.</span></span> <span data-ttu-id="9856d-118">Pokud je vlastnost GridView s `AllowSorting` nastavena na `true`, každé pole GridView, které má hodnotu vlastnosti `SortExpression`, má jeho hlavičku vykreslenou jako LinkButton.</span><span class="sxs-lookup"><span data-stu-id="9856d-118">When the GridView s `AllowSorting` property is set to `true`, each GridView field that has a `SortExpression` property value has its header rendered as a LinkButton.</span></span> <span data-ttu-id="9856d-119">Když uživatel klikne na určité záhlaví pole GridView, dojde k postbacku a data jsou seřazena podle `SortExpression`pole, které jste klikli.</span><span class="sxs-lookup"><span data-stu-id="9856d-119">When a user clicks a particular GridView field s header, a postback occurs and the data is sorted according to the clicked field s `SortExpression`.</span></span>

<span data-ttu-id="9856d-120">Ovládací prvek GridView má také vlastnost `SortExpression`, která ukládá `SortExpression` pole GridView, podle kterého se data řadí.</span><span class="sxs-lookup"><span data-stu-id="9856d-120">The GridView control has a `SortExpression` property as well, which stores the `SortExpression` of the GridView field the data is sorted by.</span></span> <span data-ttu-id="9856d-121">Kromě toho vlastnost `SortDirection` označuje, zda mají být data řazena ve vzestupném nebo sestupném pořadí (Pokud uživatel klikne na konkrétní pole GridView s hlavičkou dvakrát po úspěchu, je pořadí řazení přepnuto).</span><span class="sxs-lookup"><span data-stu-id="9856d-121">Additionally, a `SortDirection` property indicates whether the data is to be sorted in ascending or descending order (if a user clicks a particular GridView field s header link twice in succession, the sort order is toggled).</span></span>

<span data-ttu-id="9856d-122">Když je ovládací prvek GridView svázán s ovládacím prvkem zdroje dat, vypíná jeho `SortExpression` a `SortDirection` vlastnosti ovládacího prvku zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="9856d-122">When the GridView is bound to its data source control, it hands off its `SortExpression` and `SortDirection` properties to the data source control.</span></span> <span data-ttu-id="9856d-123">Ovládací prvek zdroje dat načte data a pak je seřadí podle zadaného `SortExpression` a vlastností `SortDirection`.</span><span class="sxs-lookup"><span data-stu-id="9856d-123">The data source control retrieves the data and then sorts it according to the supplied `SortExpression` and `SortDirection` properties.</span></span> <span data-ttu-id="9856d-124">Po řazení dat se ovládací prvek zdroje dat vrátí do prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="9856d-124">After sorting the data, the data source control returns it to the GridView.</span></span>

<span data-ttu-id="9856d-125">Pro replikaci této funkce pomocí ovládacích prvků DataList nebo Repeater je nutné:</span><span class="sxs-lookup"><span data-stu-id="9856d-125">To replicate this functionality with the DataList or Repeater controls, we must:</span></span>

- <span data-ttu-id="9856d-126">Vytvoření rozhraní pro řazení</span><span class="sxs-lookup"><span data-stu-id="9856d-126">Create a sorting interface</span></span>
- <span data-ttu-id="9856d-127">Zapamatujte si datové pole, podle kterého se má řadit, a zda se má seřadit ve vzestupném nebo sestupném pořadí</span><span class="sxs-lookup"><span data-stu-id="9856d-127">Remember the data field to sort by and whether to sort in ascending or descending order</span></span>
- <span data-ttu-id="9856d-128">Instruujte ObjectDataSource, aby data seřadila podle konkrétního datového pole.</span><span class="sxs-lookup"><span data-stu-id="9856d-128">Instruct the ObjectDataSource to sort the data by a particular data field</span></span>

<span data-ttu-id="9856d-129">Tyto tři úkoly budeme řešit v krocích 3 a 4.</span><span class="sxs-lookup"><span data-stu-id="9856d-129">We'll tackle these three tasks in steps 3 and 4.</span></span> <span data-ttu-id="9856d-130">V takovém případě se podíváme, jak zahrnout podporu stránkování i řazení do prvku DataList nebo Repeater.</span><span class="sxs-lookup"><span data-stu-id="9856d-130">Following that, we'll examine how to include both paging and sorting support in a DataList or Repeater.</span></span>

## <a name="step-2-displaying-the-products-in-a-repeater"></a><span data-ttu-id="9856d-131">Krok 2: zobrazení produktů v Repeater</span><span class="sxs-lookup"><span data-stu-id="9856d-131">Step 2: Displaying the Products in a Repeater</span></span>

<span data-ttu-id="9856d-132">Než se pustíme do implementace jakékoli funkce související s řazením, nechte začít seznamem produktů v ovládacím prvku Repeater.</span><span class="sxs-lookup"><span data-stu-id="9856d-132">Before we worry about implementing any of the sorting-related functionality, let s start by listing the products in a Repeater control.</span></span> <span data-ttu-id="9856d-133">Začněte tím, že otevřete stránku `Sorting.aspx` ve složce `PagingSortingDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="9856d-133">Start by opening the `Sorting.aspx` page in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="9856d-134">Přidejte ovládací prvek Repeater na webovou stránku a nastavte jeho vlastnost `ID` na hodnotu `SortableProducts`.</span><span class="sxs-lookup"><span data-stu-id="9856d-134">Add a Repeater control to the web page, setting its `ID` property to `SortableProducts`.</span></span> <span data-ttu-id="9856d-135">Z inteligentní značky Repeater vytvořte nový prvek ObjectDataSource s názvem `ProductsDataSource` a nakonfigurujte jej tak, aby načetl data z metody `GetProducts()` `ProductsBLL` třídy s.</span><span class="sxs-lookup"><span data-stu-id="9856d-135">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource` and configure it to retrieve data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="9856d-136">V rozevíracích seznamech na kartách INSERT, UPDATE a DELETE vyberte možnost (žádná).</span><span class="sxs-lookup"><span data-stu-id="9856d-136">Select the (None) option from the drop-down lists in the INSERT, UPDATE, and DELETE tabs.</span></span>

<span data-ttu-id="9856d-137">[![vytvořit prvek ObjectDataSource a nakonfigurovat jej pro použití metody GetProductsAsPagedDataSource ()](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-137">[![Create an ObjectDataSource and Configure it to Use the GetProductsAsPagedDataSource() Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span></span>

<span data-ttu-id="9856d-138">**Obrázek 1**: vytvořte prvek ObjectDataSource a nakonfigurujte ho tak, aby používal metodu `GetProductsAsPagedDataSource()` ([kliknutím zobrazíte obrázek v plné velikosti).](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-138">**Figure 1**: Create an ObjectDataSource and Configure it to Use the `GetProductsAsPagedDataSource()` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span></span>

<span data-ttu-id="9856d-139">[![nastavení rozevíracích seznamů na kartách aktualizace, vložení a odstranění na (žádné)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-139">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span></span>

<span data-ttu-id="9856d-140">**Obrázek 2**: nastavení rozevíracích seznamů na kartách aktualizace, vložení a odstranění na (žádné) ([kliknutím zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="9856d-140">**Figure 2**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None) ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span></span>

<span data-ttu-id="9856d-141">Na rozdíl od u prvku DataList, Visual Studio automaticky nevytvoří `ItemTemplate` pro ovládací prvek Repeater po jeho svázání se zdrojem dat.</span><span class="sxs-lookup"><span data-stu-id="9856d-141">Unlike with the DataList, Visual Studio does not automatically create an `ItemTemplate` for the Repeater control after binding it to a data source.</span></span> <span data-ttu-id="9856d-142">Kromě toho je nutné přidat toto `ItemTemplate` deklarativně, protože inteligentní značka ovládacího prvku Repeater chybí možnost Upravit šablony, která se nachází v prvku DataList s.</span><span class="sxs-lookup"><span data-stu-id="9856d-142">Furthermore, we must add this `ItemTemplate` declaratively, as the Repeater control s smart tag lacks the Edit Templates option found in the DataList s.</span></span> <span data-ttu-id="9856d-143">Umožňuje použít stejný `ItemTemplate` z předchozího kurzu, který zobrazuje název produktu, dodavatele a kategorii.</span><span class="sxs-lookup"><span data-stu-id="9856d-143">Let s use the same `ItemTemplate` from the previous tutorial, which displayed the product s name, supplier, and category.</span></span>

<span data-ttu-id="9856d-144">Po přidání `ItemTemplate`by měl být argument Repeat a ObjectDataSource s deklarativním označením podobný následujícímu:</span><span class="sxs-lookup"><span data-stu-id="9856d-144">After adding the `ItemTemplate`, the Repeater and ObjectDataSource s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample1.aspx)]

<span data-ttu-id="9856d-145">Obrázek 3 ukazuje tuto stránku při prohlížení v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="9856d-145">Figure 3 shows this page when viewed through a browser.</span></span>

<span data-ttu-id="9856d-146">[Zobrazí se ![každý název produktu, dodavatel a kategorie.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-146">[![Each Product s Name, Supplier, and Category is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span></span>

<span data-ttu-id="9856d-147">**Obrázek 3**: zobrazí se každý název produktu, dodavatel a kategorie ([kliknutím zobrazíte obrázek v plné velikosti).](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-147">**Figure 3**: Each Product s Name, Supplier, and Category is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span></span>

## <a name="step-3-instructing-the-objectdatasource-to-sort-the-data"></a><span data-ttu-id="9856d-148">Krok 3: pokyny pro prvek ObjectDataSource k řazení dat</span><span class="sxs-lookup"><span data-stu-id="9856d-148">Step 3: Instructing the ObjectDataSource to Sort the Data</span></span>

<span data-ttu-id="9856d-149">Abychom mohli seřadit data zobrazená v OPAKOVAČI, musíme informovat prvek ObjectDataSource výrazu řazení, podle kterého by se měla data seřadit.</span><span class="sxs-lookup"><span data-stu-id="9856d-149">To sort the data displayed in the Repeater, we need to inform the ObjectDataSource of the sort expression by which the data should be sorted.</span></span> <span data-ttu-id="9856d-150">Před tím, než prvek ObjectDataSource načte svá data, nejprve spustí svou [`Selecting` událost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), která nám poskytne příležitost zadat výraz řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-150">Before the ObjectDataSource retrieves its data, it first fires its [`Selecting` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), which provides an opportunity for us to specify a sort expression.</span></span> <span data-ttu-id="9856d-151">Obslužné rutině události `Selecting` je předán objekt typu [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), který má vlastnost s názvem [`Arguments`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) typu [`DataSourceSelectArguments`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span><span class="sxs-lookup"><span data-stu-id="9856d-151">The `Selecting` event handler is passed an object of type [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), which has a property named [`Arguments`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) of type [`DataSourceSelectArguments`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span></span> <span data-ttu-id="9856d-152">Třída `DataSourceSelectArguments` je navržena tak, aby předávala požadavky související s daty od příjemce dat do ovládacího prvku zdroje dat a obsahuje [vlastnost`SortExpression`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span><span class="sxs-lookup"><span data-stu-id="9856d-152">The `DataSourceSelectArguments` class is designed to pass data-related requests from a consumer of data to the data source control, and includes a [`SortExpression` property](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span></span>

<span data-ttu-id="9856d-153">Chcete-li předat informace o řazení ze stránky ASP.NET do prvku ObjectDataSource, vytvořte obslužnou rutinu události pro událost `Selecting` a použijte následující kód:</span><span class="sxs-lookup"><span data-stu-id="9856d-153">To pass sorting information from the ASP.NET page to the ObjectDataSource, create an event handler for the `Selecting` event and use the following code:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample2.cs)]

<span data-ttu-id="9856d-154">Hodnota *SortExpression* by měla být přiřazena názvu datového pole, podle kterého se data mají seřadit (například NázevVýrobku).</span><span class="sxs-lookup"><span data-stu-id="9856d-154">The *sortExpression* value should be assigned the name of the data field to sort the data by (such as ProductName ).</span></span> <span data-ttu-id="9856d-155">Neexistuje žádná vlastnost související s směrem řazení, takže pokud chcete seřadit data v sestupném pořadí, přidejte řetězec DESC k hodnotě *SortExpression* (například NázevVýrobku DESC).</span><span class="sxs-lookup"><span data-stu-id="9856d-155">There is no sort direction-related property, so if you want to sort the data in descending order, append the string DESC to the *sortExpression* value (such as ProductName DESC ).</span></span>

<span data-ttu-id="9856d-156">Pokračujte a vyzkoušejte některé jiné pevně zakódované hodnoty pro *SortExpression* a otestujte výsledky v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="9856d-156">Go ahead and try some different hard-coded values for *sortExpression* and test the results in a browser.</span></span> <span data-ttu-id="9856d-157">Jak ukazuje obrázek 4, při použití příkazu ProductName DESC jako *SortExpression*jsou produkty seřazené podle jejich názvu v opačném abecedním pořadí.</span><span class="sxs-lookup"><span data-stu-id="9856d-157">As Figure 4 shows, when using ProductName DESC as the *sortExpression*, the products are sorted by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="9856d-158">[![produktů seřazené podle jejich názvu v obráceném abecedním pořadí](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-158">[![The Products are Sorted by their Name in Reverse Alphabetical Order](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span></span>

<span data-ttu-id="9856d-159">**Obrázek 4**: produkty jsou seřazené podle jejich názvu v obráceném abecedním pořadí ([kliknutím zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png)).</span><span class="sxs-lookup"><span data-stu-id="9856d-159">**Figure 4**: The Products are Sorted by their Name in Reverse Alphabetical Order ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span></span>

## <a name="step-4-creating-the-sorting-interface-and-remembering-the-sort-expression-and-direction"></a><span data-ttu-id="9856d-160">Krok 4: vytvoření rozhraní řazení a pamatujce si výraz a směr řazení</span><span class="sxs-lookup"><span data-stu-id="9856d-160">Step 4: Creating the Sorting Interface and Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="9856d-161">Zapnutí podpory řazení v prvku GridView převede každý text záhlaví pole, který lze seřadit, do prvku LinkButton, který po kliknutí vyřadí data odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="9856d-161">Turning on sorting support in the GridView converts each sortable field s header text into a LinkButton that, when clicked, sorts the data accordingly.</span></span> <span data-ttu-id="9856d-162">Takové rozhraní řazení dává smysl pro prvek GridView, kde jsou data ve sloupcích správně rozložena.</span><span class="sxs-lookup"><span data-stu-id="9856d-162">Such a sorting interface makes sense for the GridView, where its data is neatly laid out in columns.</span></span> <span data-ttu-id="9856d-163">Pro ovládací prvky DataList a Repeater je však potřeba jiné rozhraní řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-163">For the DataList and Repeater controls, however, a different sorting interface is needed.</span></span> <span data-ttu-id="9856d-164">Běžné rozhraní pro řazení seznamu dat (na rozdíl od mřížky dat) je rozevírací seznam, který poskytuje pole, podle kterých lze data seřadit.</span><span class="sxs-lookup"><span data-stu-id="9856d-164">A common sorting interface for a list of data (as opposed to a grid of data), is a drop-down list that provides the fields by which the data can be sorted.</span></span> <span data-ttu-id="9856d-165">Umožňuje implementovat takové rozhraní pro tento kurz.</span><span class="sxs-lookup"><span data-stu-id="9856d-165">Let s implement such an interface for this tutorial.</span></span>

<span data-ttu-id="9856d-166">Přidejte webový ovládací prvek DropDownList nad `SortableProducts` a nastavte jeho vlastnost `ID` na `SortBy`.</span><span class="sxs-lookup"><span data-stu-id="9856d-166">Add a DropDownList Web control above the `SortableProducts` Repeater and set its `ID` property to `SortBy`.</span></span> <span data-ttu-id="9856d-167">V okno Vlastnosti klikněte na elipsy ve vlastnosti `Items` a zobrazte tak editor kolekce ListItem.</span><span class="sxs-lookup"><span data-stu-id="9856d-167">From the Properties window, click the ellipses in the `Items` property to bring up the ListItem Collection Editor.</span></span> <span data-ttu-id="9856d-168">Přidejte `ListItem` s a seřaďte data podle polí `ProductName`, `CategoryName`a `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="9856d-168">Add `ListItem` s to sort the data by the `ProductName`, `CategoryName`, and `SupplierName` fields.</span></span> <span data-ttu-id="9856d-169">Přidejte také `ListItem` k seřazení produktů podle jejich názvu v opačném abecedním pořadí.</span><span class="sxs-lookup"><span data-stu-id="9856d-169">Also add a `ListItem` to sort the products by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="9856d-170">Vlastnosti `ListItem` `Text` lze nastavit na libovolnou hodnotu (například název), ale vlastnosti `Value` musí být nastaveny na název datového pole (například NázevVýrobku).</span><span class="sxs-lookup"><span data-stu-id="9856d-170">The `ListItem` `Text` properties can be set to any value (such as Name ), but the `Value` properties must be set to the name of the data field (such as ProductName ).</span></span> <span data-ttu-id="9856d-171">Chcete-li výsledky seřadit v sestupném pořadí, přidejte řetězec DESC k názvu datového pole, jako je například NázevVýrobku DESC.</span><span class="sxs-lookup"><span data-stu-id="9856d-171">To sort the results in descending order, append the string DESC to the data field name, like ProductName DESC .</span></span>

![Přidat ListItem pro každé pole dat, která lze seřadit](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image13.png)

<span data-ttu-id="9856d-173">**Obrázek 5**: Přidání `ListItem` pro každé pole s řazením dat</span><span class="sxs-lookup"><span data-stu-id="9856d-173">**Figure 5**: Add a `ListItem` for Each of the Sortable Data Fields</span></span>

<span data-ttu-id="9856d-174">Nakonec přidejte ovládací prvek webové tlačítko napravo od ovládacího prvku DropDownList.</span><span class="sxs-lookup"><span data-stu-id="9856d-174">Finally, add a Button Web control to the right of the DropDownList.</span></span> <span data-ttu-id="9856d-175">Nastavte jeho `ID` na `RefreshRepeater` a jeho vlastnost `Text` na hodnotu aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="9856d-175">Set its `ID` to `RefreshRepeater` and its `Text` property to Refresh .</span></span>

<span data-ttu-id="9856d-176">Po vytvoření `ListItem` s a přidání tlačítka Aktualizovat by měla být deklarativní syntaxe DropDownList a tlačítka s podobným způsobem vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="9856d-176">After creating the `ListItem` s and adding the Refresh button, the DropDownList and Button s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample3.aspx)]

<span data-ttu-id="9856d-177">S kompletním řazením DropDownList je potřeba aktualizovat obslužnou rutinu události ObjectDataSource s `Selecting` tak, aby používala vybranou vlastnost `SortBy``ListItem` s `Value` na rozdíl od pevně zakódovaného výrazu řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-177">With the sorting DropDownList complete, we next need to update the ObjectDataSource s `Selecting` event handler so that it uses the selected `SortBy``ListItem` s `Value` property as opposed to a hard-coded sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample4.cs)]

<span data-ttu-id="9856d-178">V tomto okamžiku se při první návštěvě stránky budou produkty zpočátku seřadit podle pole `ProductName` dat, protože `SortBy` `ListItem` vybraná ve výchozím nastavení (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="9856d-178">At this point when first visiting the page the products will initially be sorted by the `ProductName` data field, as it s the `SortBy` `ListItem` selected by default (see Figure 6).</span></span> <span data-ttu-id="9856d-179">Výběr jiné možnosti řazení, jako je například kategorie a kliknutí na tlačítko Aktualizovat, způsobí postback a znovu seřadí data podle názvu kategorie, jak ukazuje obrázek 7.</span><span class="sxs-lookup"><span data-stu-id="9856d-179">Selecting a different sorting option such as Category and clicking Refresh will cause a postback and re-sort the data by the category name, as Figure 7 shows.</span></span>

<span data-ttu-id="9856d-180">[![jsou produkty zpočátku seřazené podle jména](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-180">[![The Products are Initially Sorted by their Name](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span></span>

<span data-ttu-id="9856d-181">**Obrázek 6**: produkty jsou zpočátku seřazené podle jejich názvu ([kliknutím zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png)).</span><span class="sxs-lookup"><span data-stu-id="9856d-181">**Figure 6**: The Products are Initially Sorted by their Name ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span></span>

<span data-ttu-id="9856d-182">[![jsou teď produkty seřazené podle kategorie.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-182">[![The Products are Now Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span></span>

<span data-ttu-id="9856d-183">**Obrázek 7**: produkty jsou nyní seřazené podle kategorie ([kliknutím zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png)).</span><span class="sxs-lookup"><span data-stu-id="9856d-183">**Figure 7**: The Products are Now Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span></span>

> [!NOTE]
> <span data-ttu-id="9856d-184">Kliknutím na tlačítko Aktualizovat dojde k automatickému seřazení dat, protože stav zobrazení opakování s byl zakázán, což způsobí, že se má opakovat změna vazby na zdroj dat při každém postbacku.</span><span class="sxs-lookup"><span data-stu-id="9856d-184">Clicking the Refresh button causes the data to automatically be re-sorted because the Repeater s view state has been disabled, thereby causing the Repeater to rebind to its data source on every postback.</span></span> <span data-ttu-id="9856d-185">Pokud jste opustili stav zobrazení opakovače s povoleným, změna rozevíracího seznamu řazení nebude mít vliv na pořadí řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-185">If you ve left the Repeater s view state enabled, changing the sorting drop-down list won't have any affect on the sort order.</span></span> <span data-ttu-id="9856d-186">Chcete-li tento problém napravit, vytvořte obslužnou rutinu události pro tlačítko Obnovit `Click` událost a znovu navažte na svůj zdroj dat (voláním metody Repeater s `DataBind()`).</span><span class="sxs-lookup"><span data-stu-id="9856d-186">To remedy this, create an event handler for the Refresh Button s `Click` event and rebind the Repeater to its data source (by calling the Repeater s `DataBind()` method).</span></span>

## <a name="remembering-the-sort-expression-and-direction"></a><span data-ttu-id="9856d-187">Pamatuje výraz řazení a směr</span><span class="sxs-lookup"><span data-stu-id="9856d-187">Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="9856d-188">Při vytváření třídicího prvku DataList nebo opakovače na stránce, kde může dojít k neřazení souvisejících postbacků, je nutné, aby byl výraz řazení a směr v rámci zpětného volání.</span><span class="sxs-lookup"><span data-stu-id="9856d-188">When creating a sortable DataList or Repeater on a page where non-sort related postbacks may occur, it s imperative that the sort expression and direction be remembered across postbacks.</span></span> <span data-ttu-id="9856d-189">Představte si například, že v tomto kurzu jsme aktualizovali Repeater, aby se pro každý produkt zahrnulo tlačítko pro odstranění.</span><span class="sxs-lookup"><span data-stu-id="9856d-189">For example, imagine that we updated the Repeater in this tutorial to include a Delete button with each product.</span></span> <span data-ttu-id="9856d-190">Když uživatel klikne na tlačítko Odstranit, spustíme nějaký kód, který odstraní vybraný produkt a pak znovu naváže data na Repeater.</span><span class="sxs-lookup"><span data-stu-id="9856d-190">When the user clicks the Delete button we d run some code to delete the selected product and then rebind the data to the Repeater.</span></span> <span data-ttu-id="9856d-191">Pokud nejsou podrobnosti řazení uchovány v rámci zpětného odeslání, data zobrazená na obrazovce se vrátí k původnímu pořadí řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-191">If the sort details are not persisted across postback, the data displayed on screen will revert to the original sort order.</span></span>

<span data-ttu-id="9856d-192">Pro tento kurz implicitně uloží výraz řazení a směr do svého stavu zobrazení pro nás.</span><span class="sxs-lookup"><span data-stu-id="9856d-192">For this tutorial, the DropDownList implicitly saves the sort expression and direction in its view state for us.</span></span> <span data-ttu-id="9856d-193">Pokud jsme používali jiné rozhraní řazení s jedním z nich, řekněme, že k různým možnostem řazení potřebujeme pamatovat si pořadí řazení napříč zpětnými odesláními.</span><span class="sxs-lookup"><span data-stu-id="9856d-193">If we were using a different sorting interface one with, say, LinkButtons that provided the various sorting options we d need to take care to remember the sort order across postbacks.</span></span> <span data-ttu-id="9856d-194">To lze provést uložením parametrů řazení ve stavu zobrazení stránky, zahrnutím parametru řazení do řetězce dotazu nebo prostřednictvím některé jiné techniky trvalosti stavu.</span><span class="sxs-lookup"><span data-stu-id="9856d-194">This could be accomplished by storing the sorting parameters in the page s view state, by including the sort parameter in the querystring, or through some other state persistence technique.</span></span>

<span data-ttu-id="9856d-195">V budoucích příkladech v tomto kurzu se seznámíte s tím, jak zachovat podrobnosti o řazení ve stavu zobrazení stránky s.</span><span class="sxs-lookup"><span data-stu-id="9856d-195">Future examples in this tutorial explore how to persist the sorting details in the page s view state.</span></span>

## <a name="step-5-adding-sorting-support-to-a-datalist-that-uses-default-paging"></a><span data-ttu-id="9856d-196">Krok 5: Přidání podpory řazení do prvku DataList, který používá výchozí stránkování</span><span class="sxs-lookup"><span data-stu-id="9856d-196">Step 5: Adding Sorting Support to a DataList that Uses Default Paging</span></span>

<span data-ttu-id="9856d-197">V [předchozím kurzu](paging-report-data-in-a-datalist-or-repeater-control-cs.md) jsme prozkoumali, jak implementovat výchozí stránkování pomocí prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="9856d-197">In the [preceding tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to implement default paging with a DataList.</span></span> <span data-ttu-id="9856d-198">Tento předchozí příklad můžete využít k tomu, aby se zahrnula možnost řazení stránkovaných dat.</span><span class="sxs-lookup"><span data-stu-id="9856d-198">Let s extend this previous example to include the ability to sort the paged data.</span></span> <span data-ttu-id="9856d-199">Začněte tím, že otevřete `SortingWithDefaultPaging.aspx` a `Paging.aspx` stránky ve složce `PagingSortingDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="9856d-199">Start by opening the `SortingWithDefaultPaging.aspx` and `Paging.aspx` pages in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="9856d-200">Na stránce `Paging.aspx` klikněte na tlačítko zdroj a zobrazte tak deklarativní označení stránky.</span><span class="sxs-lookup"><span data-stu-id="9856d-200">From the `Paging.aspx` page, click on the Source button to view the page s declarative markup.</span></span> <span data-ttu-id="9856d-201">Zkopíruje vybraný text (viz obrázek 8) a vloží jej do deklarativní značky `SortingWithDefaultPaging.aspx` mezi značkami `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="9856d-201">Copy the selected text (see Figure 8) and paste it into the declarative markup of `SortingWithDefaultPaging.aspx` between the `<asp:Content>` tags.</span></span>

<span data-ttu-id="9856d-202">[![replikovat deklarativní označení v &lt;ASP: obsah&gt; značky z stránkování. aspx do SortingWithDefaultPaging. aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-202">[![Replicate the Declarative Markup in the &lt;asp:Content&gt; Tags from Paging.aspx to SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span></span>

<span data-ttu-id="9856d-203">**Obrázek 8**: replikace deklarativní značky v `<asp:Content>` značek z `Paging.aspx` na `SortingWithDefaultPaging.aspx` ([kliknutím zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="9856d-203">**Figure 8**: Replicate the Declarative Markup in the `<asp:Content>` Tags from `Paging.aspx` to `SortingWithDefaultPaging.aspx` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span></span>

<span data-ttu-id="9856d-204">Po zkopírování deklarativní značky zkopírujte metody a vlastnosti ve třídě `Paging.aspx` stránky s kódem na pozadí do třídy kódu na pozadí pro `SortingWithDefaultPaging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="9856d-204">After copying the declarative markup, copy the methods and properties in the `Paging.aspx` page s code-behind class to the code-behind class for `SortingWithDefaultPaging.aspx`.</span></span> <span data-ttu-id="9856d-205">Dále si chvíli počkejte, než se zobrazí stránka `SortingWithDefaultPaging.aspx` v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="9856d-205">Next, take a moment to view the `SortingWithDefaultPaging.aspx` page in a browser.</span></span> <span data-ttu-id="9856d-206">Mělo by se jednat o stejné funkce a vzhled jako `Paging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="9856d-206">It should exhibit the same functionality and appearance as `Paging.aspx`.</span></span>

## <a name="enhancing-productsbll-to-include-a-default-paging-and-sorting-method"></a><span data-ttu-id="9856d-207">Vylepšení ProductsBLL, aby zahrnovalo výchozí metodu stránkování a řazení</span><span class="sxs-lookup"><span data-stu-id="9856d-207">Enhancing ProductsBLL to Include a Default Paging and Sorting Method</span></span>

<span data-ttu-id="9856d-208">V předchozím kurzu jsme vytvořili metodu `GetProductsAsPagedDataSource(pageIndex, pageSize)` ve třídě `ProductsBLL`, která vrátila objekt `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="9856d-208">In the previous tutorial we created a `GetProductsAsPagedDataSource(pageIndex, pageSize)` method in the `ProductsBLL` class that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="9856d-209">Tento objekt `PagedDataSource` byl vyplněn *všemi* produkty (prostřednictvím metody `GetProducts()` knihoven BLL s), ale při vazbě na prvek DataList byly zobrazeny pouze záznamy odpovídající zadaným vstupním parametrům *pageIndex* a *PageSize* .</span><span class="sxs-lookup"><span data-stu-id="9856d-209">This `PagedDataSource` object was populated with *all* of the products (via the BLL s `GetProducts()` method), but when bound to the DataList only those records corresponding to the specified *pageIndex* and *pageSize* input parameters were displayed.</span></span>

<span data-ttu-id="9856d-210">Dříve v tomto kurzu jsme přidali podporu řazení zadáním výrazu řazení z obslužné rutiny události `Selecting` ObjectDataSource s.</span><span class="sxs-lookup"><span data-stu-id="9856d-210">Earlier in this tutorial we added sorting support by specifying the sort expression from the ObjectDataSource s `Selecting` event handler.</span></span> <span data-ttu-id="9856d-211">To funguje dobře, když je prvek ObjectDataSource vrácen objekt, který lze seřadit, jako `ProductsDataTable` vrácenou metodou `GetProducts()`.</span><span class="sxs-lookup"><span data-stu-id="9856d-211">This works well when the ObjectDataSource is returned an object that can be sorted, like the `ProductsDataTable` returned by the `GetProducts()` method.</span></span> <span data-ttu-id="9856d-212">Objekt `PagedDataSource` vrácený metodou `GetProductsAsPagedDataSource` však nepodporuje řazení vnitřního zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="9856d-212">However, the `PagedDataSource` object returned by the `GetProductsAsPagedDataSource` method does not support sorting of its inner data source.</span></span> <span data-ttu-id="9856d-213">Místo toho je potřeba *před* vložením do `PagedDataSource`seřadit výsledky vrácené z metody `GetProducts()`.</span><span class="sxs-lookup"><span data-stu-id="9856d-213">Instead, we need to sort the results returned from the `GetProducts()` method *before* we put it in the `PagedDataSource`.</span></span>

<span data-ttu-id="9856d-214">Chcete-li to provést, vytvořte novou metodu ve třídě `ProductsBLL` `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span><span class="sxs-lookup"><span data-stu-id="9856d-214">To accomplish this, create a new method in the `ProductsBLL` class, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span></span> <span data-ttu-id="9856d-215">Chcete-li seřadit `ProductsDataTable` vracené metodou `GetProducts()`, zadejte vlastnost `Sort` jejího výchozího `DataTableView`:</span><span class="sxs-lookup"><span data-stu-id="9856d-215">To sort the `ProductsDataTable` returned by the `GetProducts()` method, specify the `Sort` property of its default `DataTableView`:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample5.cs)]

<span data-ttu-id="9856d-216">Metoda `GetProductsSortedAsPagedDataSource` se od `GetProductsAsPagedDataSource` metody vytvořená v předchozím kurzu liší jenom mírně.</span><span class="sxs-lookup"><span data-stu-id="9856d-216">The `GetProductsSortedAsPagedDataSource` method differs only slightly from the `GetProductsAsPagedDataSource` method created in the previous tutorial.</span></span> <span data-ttu-id="9856d-217">Konkrétně `GetProductsSortedAsPagedDataSource` akceptuje další vstupní parametr `sortExpression` a přiřadí tuto hodnotu k vlastnosti `Sort` `ProductDataTable` s `DefaultView`.</span><span class="sxs-lookup"><span data-stu-id="9856d-217">In particular, `GetProductsSortedAsPagedDataSource` accepts an additional input parameter `sortExpression` and assigns this value to the `Sort` property of the `ProductDataTable` s `DefaultView`.</span></span> <span data-ttu-id="9856d-218">Několik řádků kódu později je `PagedDataSource` objekt s zdrojem dat, přiřazen `ProductDataTable` `DefaultView`.</span><span class="sxs-lookup"><span data-stu-id="9856d-218">A few lines of code later, the `PagedDataSource` object s DataSource is assigned the `ProductDataTable` s `DefaultView`.</span></span>

## <a name="calling-the-getproductssortedaspageddatasource-method-and-specifying-the-value-for-the-sortexpression-input-parameter"></a><span data-ttu-id="9856d-219">Volání metody GetProductsSortedAsPagedDataSource a určení hodnoty pro vstupní parametr SortExpression</span><span class="sxs-lookup"><span data-stu-id="9856d-219">Calling the GetProductsSortedAsPagedDataSource Method and Specifying the Value for the SortExpression Input Parameter</span></span>

<span data-ttu-id="9856d-220">Po dokončení metody `GetProductsSortedAsPagedDataSource` je dalším krokem poskytnutí hodnoty pro tento parametr.</span><span class="sxs-lookup"><span data-stu-id="9856d-220">With the `GetProductsSortedAsPagedDataSource` method complete, the next step is to provide the value for this parameter.</span></span> <span data-ttu-id="9856d-221">Prvek ObjectDataSource v `SortingWithDefaultPaging.aspx` je aktuálně nakonfigurován pro volání metody `GetProductsAsPagedDataSource` a předá dva vstupní parametry prostřednictvím jejich dvou `QueryStringParameters`, které jsou zadány v kolekci `SelectParameters`.</span><span class="sxs-lookup"><span data-stu-id="9856d-221">The ObjectDataSource in `SortingWithDefaultPaging.aspx` is currently configured to call the `GetProductsAsPagedDataSource` method and passes in the two input parameters through its two `QueryStringParameters`, which are specified in the `SelectParameters` collection.</span></span> <span data-ttu-id="9856d-222">Tyto dva `QueryStringParameters` označují, že zdroj pro parametry `GetProductsAsPagedDataSource` metoda s *pageIndex* a *PageSize* pocházejí z polí QueryString `pageIndex` a `pageSize`.</span><span class="sxs-lookup"><span data-stu-id="9856d-222">These two `QueryStringParameters` indicate that the source for the `GetProductsAsPagedDataSource` method s *pageIndex* and *pageSize* parameters come from the querystring fields `pageIndex` and `pageSize`.</span></span>

<span data-ttu-id="9856d-223">Aktualizujte vlastnost ObjectDataSource `SelectMethod` tak, aby vyvolala novou metodu `GetProductsSortedAsPagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="9856d-223">Update the ObjectDataSource s `SelectMethod` property so that it invokes the new `GetProductsSortedAsPagedDataSource` method.</span></span> <span data-ttu-id="9856d-224">Pak přidejte nový `QueryStringParameter` tak, aby byl vstupní parametr *SortExpression* k dispozici z pole QueryString `sortExpression`.</span><span class="sxs-lookup"><span data-stu-id="9856d-224">Then, add a new `QueryStringParameter` so that the *sortExpression* input parameter is accessed from the querystring field `sortExpression`.</span></span> <span data-ttu-id="9856d-225">Nastavte `QueryStringParameter` s `DefaultValue` na NázevVýrobku.</span><span class="sxs-lookup"><span data-stu-id="9856d-225">Set the `QueryStringParameter` s `DefaultValue` to ProductName .</span></span>

<span data-ttu-id="9856d-226">Po těchto změnách by deklarativní označení ObjectDataSource s mělo vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="9856d-226">After these changes, the ObjectDataSource s declarative markup should look like:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample6.aspx)]

<span data-ttu-id="9856d-227">V tomto okamžiku bude stránka `SortingWithDefaultPaging.aspx` seřadit výsledky abecedně podle názvu produktu (viz obrázek 9).</span><span class="sxs-lookup"><span data-stu-id="9856d-227">At this point, the `SortingWithDefaultPaging.aspx` page will sort its results alphabetically by the product name (see Figure 9).</span></span> <span data-ttu-id="9856d-228">Důvodem je, že ve výchozím nastavení je hodnota NázevVýrobku předána jako parametr `GetProductsSortedAsPagedDataSource` *SortExpression* metoda s.</span><span class="sxs-lookup"><span data-stu-id="9856d-228">This is because, by default, a value of ProductName is passed in as the `GetProductsSortedAsPagedDataSource` method s *sortExpression* parameter.</span></span>

<span data-ttu-id="9856d-229">[![ve výchozím nastavení jsou výsledky seřazené podle NázevVýrobku.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-229">[![By Default, the Results are Sorted by ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span></span>

<span data-ttu-id="9856d-230">**Obrázek 9**: ve výchozím nastavení jsou výsledky seřazené podle `ProductName` ([kliknutím zobrazíte obrázek v plné velikosti).](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-230">**Figure 9**: By Default, the Results are Sorted by `ProductName` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span></span>

<span data-ttu-id="9856d-231">Pokud ručně přidáte `sortExpression` pole QueryString, například `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` výsledky budou seřazeny podle zadaného `sortExpression`.</span><span class="sxs-lookup"><span data-stu-id="9856d-231">If you manually add a `sortExpression` querystring field such as `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` the results will be sorted by the specified `sortExpression`.</span></span> <span data-ttu-id="9856d-232">Tento parametr `sortExpression` však není při přesunu na jinou stránku dat zahrnut v dotazu QueryString.</span><span class="sxs-lookup"><span data-stu-id="9856d-232">However, this `sortExpression` parameter is not included in the querystring when moving to a different page of data.</span></span> <span data-ttu-id="9856d-233">Ve skutečnosti se kliknutím na tlačítko Další nebo poslední stránky vrátíte zpátky na `Paging.aspx`!</span><span class="sxs-lookup"><span data-stu-id="9856d-233">In fact, clicking on the Next or Last page buttons takes us back to `Paging.aspx`!</span></span> <span data-ttu-id="9856d-234">Kromě toho momentálně neexistuje žádné rozhraní řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-234">Furthermore, there s currently no sorting interface.</span></span> <span data-ttu-id="9856d-235">Jediný způsob, jakým uživatel může změnit pořadí řazení stránkovaných dat, je manipulace s řetězcem dotazu přímo.</span><span class="sxs-lookup"><span data-stu-id="9856d-235">The only way a user can change the sort order of the paged data is by manipulating the querystring directly.</span></span>

## <a name="creating-the-sorting-interface"></a><span data-ttu-id="9856d-236">Vytvoření rozhraní řazení</span><span class="sxs-lookup"><span data-stu-id="9856d-236">Creating the Sorting Interface</span></span>

<span data-ttu-id="9856d-237">Nejdřív je potřeba aktualizovat metodu `RedirectUser`, aby uživatel mohl `SortingWithDefaultPaging.aspx` (místo `Paging.aspx`) a zahrnout `sortExpression` hodnotu do řetězce dotazu.</span><span class="sxs-lookup"><span data-stu-id="9856d-237">We first need to update the `RedirectUser` method to send the user to `SortingWithDefaultPaging.aspx` (instead of `Paging.aspx`) and to include the `sortExpression` value in the querystring.</span></span> <span data-ttu-id="9856d-238">Měli bychom také přidat vlastnost `SortExpression` s názvem stránky jen pro čtení, na úrovni stránky.</span><span class="sxs-lookup"><span data-stu-id="9856d-238">We should also add a read-only, page-level named `SortExpression` property.</span></span> <span data-ttu-id="9856d-239">Tato vlastnost, podobně jako `PageIndex` a `PageSize` vlastnosti vytvořené v předchozím kurzu, vrátí hodnotu pole `sortExpression` QueryString, pokud existuje, a výchozí hodnotu (ProductName) v opačném případě.</span><span class="sxs-lookup"><span data-stu-id="9856d-239">This property, similar to the `PageIndex` and `PageSize` properties created in the previous tutorial, returns the value of the `sortExpression` querystring field if it exists, and the default value ( ProductName ) otherwise.</span></span>

<span data-ttu-id="9856d-240">V současné době metoda `RedirectUser` přijímá pouze jeden vstupní parametr index stránky, která se má zobrazit.</span><span class="sxs-lookup"><span data-stu-id="9856d-240">Currently the `RedirectUser` method accepts only a single input parameter the index of the page to display.</span></span> <span data-ttu-id="9856d-241">Nicméně mohou nastat situace, kdy chceme uživatele přesměrovat na konkrétní stránku dat pomocí výrazu řazení, který není zadán v řetězci QueryString.</span><span class="sxs-lookup"><span data-stu-id="9856d-241">However, there may be times when we want to redirect the user to a particular page of data using a sort expression other than what s specified in the querystring.</span></span> <span data-ttu-id="9856d-242">V okamžiku vytvoříme rozhraní řazení pro tuto stránku, které bude obsahovat řadu webových ovládacích prvků tlačítek pro řazení dat podle zadaného sloupce.</span><span class="sxs-lookup"><span data-stu-id="9856d-242">In a moment we'll create the sorting interface for this page, which will include a series of Button Web controls for sorting the data by a specified column.</span></span> <span data-ttu-id="9856d-243">Když se klikne na jedno z těchto tlačítek, chceme přesměrovat uživatele na příslušnou hodnotu řadicího výrazu.</span><span class="sxs-lookup"><span data-stu-id="9856d-243">When one of those Buttons is clicked, we want to redirect the user passing in the appropriate sort expression value.</span></span> <span data-ttu-id="9856d-244">Chcete-li poskytnout tuto funkci, vytvořte dvě verze `RedirectUser` metody.</span><span class="sxs-lookup"><span data-stu-id="9856d-244">To provide this functionality, create two versions of the `RedirectUser` method.</span></span> <span data-ttu-id="9856d-245">První z nich by měl přijmout jenom index stránky, aby se zobrazila, zatímco druhá druhá přijímá index stránky a výraz řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-245">The first one should accept just the page index to display, while the second one accepts the page index and sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample7.cs)]

<span data-ttu-id="9856d-246">V prvním příkladu v tomto kurzu jsme vytvořili rozhraní řazení pomocí ovládacího prvkem DropDownList.</span><span class="sxs-lookup"><span data-stu-id="9856d-246">In the first example in this tutorial, we created a sorting interface using a DropDownList.</span></span> <span data-ttu-id="9856d-247">V tomto příkladu můžete použít tři webové ovládací prvky tlačítka umístěné nad prvek DataList One pro řazení podle `ProductName`, jeden pro `CategoryName`a druhý pro `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="9856d-247">For this example, let s use three Button Web controls positioned above the DataList one for sorting by `ProductName`, one for `CategoryName`, and one for `SupplierName`.</span></span> <span data-ttu-id="9856d-248">Přidejte tři webové ovládací prvky tlačítka a patřičným nastavením vlastností `ID` a `Text`:</span><span class="sxs-lookup"><span data-stu-id="9856d-248">Add the three Button Web controls, setting their `ID` and `Text` properties appropriately:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample8.aspx)]

<span data-ttu-id="9856d-249">Dále vytvořte obslužnou rutinu události `Click` pro každou.</span><span class="sxs-lookup"><span data-stu-id="9856d-249">Next, create a `Click` event handler for each.</span></span> <span data-ttu-id="9856d-250">Obslužné rutiny události by měly volat metodu `RedirectUser` a vracet uživatele na první stránku pomocí vhodného výrazu řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-250">The event handlers should call the `RedirectUser` method, returning the user to the first page using the appropriate sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample9.cs)]

<span data-ttu-id="9856d-251">Při první návštěvě stránky se data seřadí podle názvu produktu abecedně (odkazují zpátky na obrázek 9).</span><span class="sxs-lookup"><span data-stu-id="9856d-251">When first visiting the page, the data is sorted by the product name alphabetically (refer back to Figure 9).</span></span> <span data-ttu-id="9856d-252">Kliknutím na tlačítko Další přejdete na druhou stránku dat a potom kliknete na tlačítko Seřadit podle kategorie.</span><span class="sxs-lookup"><span data-stu-id="9856d-252">Click the Next button to advance to the second page of data and then click the Sort by Category button.</span></span> <span data-ttu-id="9856d-253">Tím se vrátíme na první stránku dat, která je seřazená podle názvu kategorie (viz obrázek 10).</span><span class="sxs-lookup"><span data-stu-id="9856d-253">This returns us to the first page of data, sorted by category name (see Figure 10).</span></span> <span data-ttu-id="9856d-254">Podobně kliknutím na tlačítko Seřadit podle dodavatele seřadí data podle dodavatele počínaje první stránkou dat.</span><span class="sxs-lookup"><span data-stu-id="9856d-254">Likewise, clicking the Sort by Supplier button sorts the data by supplier starting from the first page of data.</span></span> <span data-ttu-id="9856d-255">Výběr řazení se pamatuje, protože data jsou stránkovaná.</span><span class="sxs-lookup"><span data-stu-id="9856d-255">The sort choice is remembered as the data is paged through.</span></span> <span data-ttu-id="9856d-256">Obrázek 11 ukazuje stránku po řazení podle kategorie a přechod na třináctou stránku dat.</span><span class="sxs-lookup"><span data-stu-id="9856d-256">Figure 11 shows the page after sorting by category and then advancing to the thirteenth page of data.</span></span>

<span data-ttu-id="9856d-257">[![produkty jsou seřazené podle kategorie](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-257">[![The Products are Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span></span>

<span data-ttu-id="9856d-258">**Obrázek 10**: produkty jsou seřazené podle kategorie ([kliknutím zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png)).</span><span class="sxs-lookup"><span data-stu-id="9856d-258">**Figure 10**: The Products are Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span></span>

<span data-ttu-id="9856d-259">[![výraz řazení se pamatuje při stránkování prostřednictvím dat.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-259">[![The Sort Expression is Remembered When Paging Through the Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span></span>

<span data-ttu-id="9856d-260">**Obrázek 11**: výraz řazení se při stránkování přes data pamatuje ([kliknutím zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png)).</span><span class="sxs-lookup"><span data-stu-id="9856d-260">**Figure 11**: The Sort Expression is Remembered When Paging Through the Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span></span>

## <a name="step-6-custom-paging-through-records-in-a-repeater"></a><span data-ttu-id="9856d-261">Krok 6: vlastní stránkování prostřednictvím záznamů v Repeater</span><span class="sxs-lookup"><span data-stu-id="9856d-261">Step 6: Custom Paging Through Records in a Repeater</span></span>

<span data-ttu-id="9856d-262">Příklad DataList vyhodnocený v kroku 5 stránky prostřednictvím svých dat pomocí neefektivní výchozí techniky stránkování.</span><span class="sxs-lookup"><span data-stu-id="9856d-262">The DataList example examined in step 5 pages through its data using the inefficient default paging technique.</span></span> <span data-ttu-id="9856d-263">Když je stránkování po dostatečně velkých objemech dat, je nezbytné, aby se použilo vlastní stránkování.</span><span class="sxs-lookup"><span data-stu-id="9856d-263">When paging through sufficiently large amounts of data, it is imperative that custom paging be used.</span></span> <span data-ttu-id="9856d-264">V rámci [efektivního stránkování až po velké objemy dat](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) a [seřazení vlastních](../paging-and-sorting/sorting-custom-paged-data-cs.md) výukových kurzů s daty jsme prozkoumali rozdíly mezi výchozími a vlastními metodami STRÁNKOVÁNÍ a vytvoření v knihoven BLL pro použití vlastních stránkování a řazení vlastních stránkovaných dat.</span><span class="sxs-lookup"><span data-stu-id="9856d-264">Back in the [Efficiently Paging Through Large Amounts of Data](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) and [Sorting Custom Paged Data](../paging-and-sorting/sorting-custom-paged-data-cs.md) tutorials, we examined the differences between default and custom paging and created methods in the BLL for utilizing custom paging and sorting custom paged data.</span></span> <span data-ttu-id="9856d-265">Zejména v těchto dvou předchozích kurzech jsme přidali následující tři metody do třídy `ProductsBLL`:</span><span class="sxs-lookup"><span data-stu-id="9856d-265">In particular, in these two previous tutorials we added the following three methods to the `ProductsBLL` class:</span></span>

- <span data-ttu-id="9856d-266">`GetProductsPaged(startRowIndex, maximumRows)` vrátí konkrétní podmnožinu záznamů začínající na *StartRowIndex* a nepřekračuje *MaximumRows*.</span><span class="sxs-lookup"><span data-stu-id="9856d-266">`GetProductsPaged(startRowIndex, maximumRows)` returns a particular subset of records starting at *startRowIndex* and not exceeding *maximumRows*.</span></span>
- <span data-ttu-id="9856d-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` vrátí konkrétní podmnožinu záznamů seřazených podle zadaného vstupního parametru *SortExpression* .</span><span class="sxs-lookup"><span data-stu-id="9856d-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` returns a particular subset of records sorted by the specified *sortExpression* input parameter.</span></span>
- <span data-ttu-id="9856d-268">`TotalNumberOfProducts()` poskytuje celkový počet záznamů v tabulce databáze `Products`.</span><span class="sxs-lookup"><span data-stu-id="9856d-268">`TotalNumberOfProducts()` provides the total number of records in the `Products` database table.</span></span>

<span data-ttu-id="9856d-269">Tyto metody lze použít k efektivnímu vytvoření stránky a k řazení dat pomocí ovládacího prvku DataList nebo Repeater.</span><span class="sxs-lookup"><span data-stu-id="9856d-269">These methods can be used to efficiently page and sort through data using a DataList or Repeater control.</span></span> <span data-ttu-id="9856d-270">K ilustraci je možné začít vytvořením ovládacího prvku Repeater s podporou vlastního stránkování; Pak přidáme možnosti řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-270">To illustrate this, let s start by creating a Repeater control with custom paging support; we'll then add sorting capabilities.</span></span>

<span data-ttu-id="9856d-271">Ve složce `PagingSortingDataListRepeater` otevřete stránku `SortingWithCustomPaging.aspx` a přidejte do ní Repeater a nastavte její vlastnost `ID` na `Products`.</span><span class="sxs-lookup"><span data-stu-id="9856d-271">Open the `SortingWithCustomPaging.aspx` page in the `PagingSortingDataListRepeater` folder and add a Repeater to the page, setting its `ID` property to `Products`.</span></span> <span data-ttu-id="9856d-272">Z inteligentní značky Repeater vytvořte nový prvek ObjectDataSource s názvem `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="9856d-272">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="9856d-273">Nakonfigurujte ho tak, aby vybral jeho data z `GetProductsPaged` metody `ProductsBLL` třídy s.</span><span class="sxs-lookup"><span data-stu-id="9856d-273">Configure it to select its data from the `ProductsBLL` class s `GetProductsPaged` method.</span></span>

<span data-ttu-id="9856d-274">[![nakonfigurovat prvek ObjectDataSource tak, aby používal metodu ProductsBLL třídy s GetProductsPaged](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-274">[![Configure the ObjectDataSource to Use the ProductsBLL Class s GetProductsPaged Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span></span>

<span data-ttu-id="9856d-275">**Obrázek 12**: Konfigurace prvku ObjectDataSource pro použití `GetProductsPaged` metody `ProductsBLL` třídy s ([kliknutím zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="9856d-275">**Figure 12**: Configure the ObjectDataSource to Use the `ProductsBLL` Class s `GetProductsPaged` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span></span>

<span data-ttu-id="9856d-276">V rozevíracích seznamech na kartě aktualizovat, vložit a odstranit klikněte na možnost (žádné) a potom klikněte na tlačítko Další.</span><span class="sxs-lookup"><span data-stu-id="9856d-276">Set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) and then click the Next button.</span></span> <span data-ttu-id="9856d-277">Průvodce konfigurací zdroje dat teď vyzve k zadání zdrojů `GetProductsPaged` metod s *StartRowIndex* a vstupními parametry *MaximumRows* .</span><span class="sxs-lookup"><span data-stu-id="9856d-277">The Configure Data Source wizard now prompts for the sources of the `GetProductsPaged` method s *startRowIndex* and *maximumRows* input parameters.</span></span> <span data-ttu-id="9856d-278">Ve skutečnosti jsou tyto vstupní parametry ignorovány.</span><span class="sxs-lookup"><span data-stu-id="9856d-278">In actuality, these input parameters are ignored.</span></span> <span data-ttu-id="9856d-279">Místo toho budou hodnoty *StartRowIndex* a *MaximumRows* předány prostřednictvím vlastnosti `Arguments` v obslužné rutině prvku ObjectDataSource s `Selecting`, stejně jako způsob, jakým jsme určili *SortExpression* v tomto kurzu s první ukázkou.</span><span class="sxs-lookup"><span data-stu-id="9856d-279">Instead, the *startRowIndex* and *maximumRows* values will be passed in through the `Arguments` property in the ObjectDataSource s `Selecting` event handler, just like how we specified the *sortExpression* in this tutorial s first demo.</span></span> <span data-ttu-id="9856d-280">Proto ponechte rozevírací seznamy zdroje parametrů v nastavení Průvodce na žádné.</span><span class="sxs-lookup"><span data-stu-id="9856d-280">Therefore, leave the parameter source drop-down lists in the wizard set at None .</span></span>

<span data-ttu-id="9856d-281">[![ponechat zdroje parametrů nastavené na None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-281">[![Leave the Parameter Sources Set to None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span></span>

<span data-ttu-id="9856d-282">**Obrázek 13**: ponechte nastavené zdroje parametrů na None ([kliknutím zobrazíte obrázek v plné velikosti).](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-282">**Figure 13**: Leave the Parameter Sources Set to None ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span></span>

> [!NOTE]
> <span data-ttu-id="9856d-283">Nenastavujte *vlastnost* `EnablePaging` ObjectDataSource s na `true`.</span><span class="sxs-lookup"><span data-stu-id="9856d-283">Do *not* set the ObjectDataSource s `EnablePaging` property to `true`.</span></span> <span data-ttu-id="9856d-284">Prvek ObjectDataSource bude mít za následek automatické zahrnutí vlastních parametrů *StartRowIndex* a *MaximumRows* do seznamu existujících parametrů `SelectMethod` s.</span><span class="sxs-lookup"><span data-stu-id="9856d-284">This will cause the ObjectDataSource to automatically include its own *startRowIndex* and *maximumRows* parameters to the `SelectMethod` s existing parameter list.</span></span> <span data-ttu-id="9856d-285">Vlastnost `EnablePaging` je užitečná při vázání vlastních stránkovaných dat na ovládací prvek GridView, DetailsView nebo FormView, protože tyto ovládací prvky očekávají určité chování prvku ObjectDataSource, který je k dispozici pouze v případě, že je `true`vlastnost `EnablePaging`.</span><span class="sxs-lookup"><span data-stu-id="9856d-285">The `EnablePaging` property is useful when binding custom paged data to a GridView, DetailsView, or FormView control because these controls expect certain behavior from the ObjectDataSource that s only available when `EnablePaging` property is `true`.</span></span> <span data-ttu-id="9856d-286">Vzhledem k tomu, že je nutné ručně přidat podporu stránkování pro prvek DataList a Repeater, nechte tuto vlastnost nastavenou na `false` (výchozí), jak se v rámci naší ASP.NET stránky zanesli k potřebným funkcím.</span><span class="sxs-lookup"><span data-stu-id="9856d-286">Since we have to manually add the paging support for the DataList and Repeater, leave this property set to `false` (the default), as we'll bake in the needed functionality directly within our ASP.NET page.</span></span>

<span data-ttu-id="9856d-287">Nakonec definujte `ItemTemplate` Repeater, aby se zobrazil název produktu, kategorie a dodavatel.</span><span class="sxs-lookup"><span data-stu-id="9856d-287">Finally, define the Repeater s `ItemTemplate` so that the product s name, category, and supplier are shown.</span></span> <span data-ttu-id="9856d-288">Po těchto změnách by deklarativní syntaxe Repeater a ObjectDataSource s vypadala podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="9856d-288">After these changes, the Repeater and ObjectDataSource s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample10.aspx)]

<span data-ttu-id="9856d-289">Chvíli počkejte, než navštívíte stránku v prohlížeči, a Všimněte si, že se nevrátí žádné záznamy.</span><span class="sxs-lookup"><span data-stu-id="9856d-289">Take a moment to visit the page through a browser and note that no records are returned.</span></span> <span data-ttu-id="9856d-290">Je to proto, že jsme zatím zadali hodnoty parametrů *StartRowIndex* a *MaximumRows* ; Proto jsou hodnoty 0 předávány pro obě.</span><span class="sxs-lookup"><span data-stu-id="9856d-290">This is because we ve yet to specify the *startRowIndex* and *maximumRows* parameter values; therefore, values of 0 are being passed in for both.</span></span> <span data-ttu-id="9856d-291">Chcete-li zadat tyto hodnoty, vytvořte obslužnou rutinu události pro událost ObjectDataSource `Selecting` a nastavte tyto hodnoty programově na pevně zakódované hodnoty 0 a 5 v uvedeném pořadí:</span><span class="sxs-lookup"><span data-stu-id="9856d-291">To specify these values, create an event handler for the ObjectDataSource s `Selecting` event and set these parameters values programmatically to hard-coded values of 0 and 5, respectively:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample11.cs)]

<span data-ttu-id="9856d-292">Při této změně zobrazí stránka při zobrazení v prohlížeči prvních pět produktů.</span><span class="sxs-lookup"><span data-stu-id="9856d-292">With this change, the page, when viewed through a browser, shows the first five products.</span></span>

<span data-ttu-id="9856d-293">[![se zobrazí prvních pět záznamů.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-293">[![The First Five Records are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span></span>

<span data-ttu-id="9856d-294">**Obrázek 14**: zobrazí se prvních pět záznamů ([kliknutím zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png)).</span><span class="sxs-lookup"><span data-stu-id="9856d-294">**Figure 14**: The First Five Records are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span></span>

> [!NOTE]
> <span data-ttu-id="9856d-295">Produkty uvedené na obrázku 14 se seřadí podle názvu produktu, protože `GetProductsPaged` uložený postup, který provádí efektivní vlastní stránkovací dotaz, vyřadí výsledky podle `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="9856d-295">The products listed in Figure 14 happen to be sorted by product name because the `GetProductsPaged` stored procedure that performs the efficient custom paging query orders the results by `ProductName`.</span></span>

<span data-ttu-id="9856d-296">Aby bylo možné uživateli procházet stránky, musíme sledovat index počátečního řádku a maximální počet řádků a zapamatovat si tyto hodnoty napříč zpětnými voláními.</span><span class="sxs-lookup"><span data-stu-id="9856d-296">In order to allow the user to step through the pages, we need to keep track of the start row index and maximum rows and remember these values across postbacks.</span></span> <span data-ttu-id="9856d-297">Ve výchozím příkladu stránkování používali pole QueryString k uchování těchto hodnot; v této ukázce je možné zachovat tyto informace ve stavu zobrazení stránky s.</span><span class="sxs-lookup"><span data-stu-id="9856d-297">In the default paging example we used querystring fields to persist these values; for this demo, let s persist this information in the page s view state.</span></span> <span data-ttu-id="9856d-298">Vytvořte následující dvě vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="9856d-298">Create the following two properties:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample12.cs)]

<span data-ttu-id="9856d-299">Dále aktualizujte kód v obslužné rutině události výběru tak, aby místo pevně kódovaných hodnot 0 a 5 používala vlastnosti `StartRowIndex` a `MaximumRows`:</span><span class="sxs-lookup"><span data-stu-id="9856d-299">Next, update the code in the Selecting event handler so that it uses the `StartRowIndex` and `MaximumRows` properties instead of the hard-coded values of 0 and 5:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample13.cs)]

<span data-ttu-id="9856d-300">V tomto okamžiku se na naší stránce pořád zobrazuje prvních pět záznamů.</span><span class="sxs-lookup"><span data-stu-id="9856d-300">At this point our page still shows just the first five records.</span></span> <span data-ttu-id="9856d-301">Avšak u těchto vlastností je nově připraveno vytvořit rozhraní stránkování.</span><span class="sxs-lookup"><span data-stu-id="9856d-301">However, with these properties in place, we re ready to create our paging interface.</span></span>

## <a name="adding-the-paging-interface"></a><span data-ttu-id="9856d-302">Přidání rozhraní stránkování</span><span class="sxs-lookup"><span data-stu-id="9856d-302">Adding the Paging Interface</span></span>

<span data-ttu-id="9856d-303">Pojďme použít stejné první, předchozí, další, poslední rozhraní pro stránkování, které se používá ve výchozím příkladu stránkování, včetně webového ovládacího prvku popisek, který zobrazuje zobrazovanou stránku dat a celkový počet stránek, které existují.</span><span class="sxs-lookup"><span data-stu-id="9856d-303">Let s use the same First, Previous, Next, Last paging interface used in the default paging example, including the Label Web control that displays what page of data is being viewed and how many total pages exist.</span></span> <span data-ttu-id="9856d-304">Přidejte čtyři webové ovládací prvky tlačítka a popisek pod Repeater.</span><span class="sxs-lookup"><span data-stu-id="9856d-304">Add the four Button Web controls and Label below the Repeater.</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample14.aspx)]

<span data-ttu-id="9856d-305">Dále vytvořte obslužné rutiny událostí `Click` pro čtyři tlačítka.</span><span class="sxs-lookup"><span data-stu-id="9856d-305">Next, create `Click` event handlers for the four Buttons.</span></span> <span data-ttu-id="9856d-306">Po kliknutí na jedno z těchto tlačítek musíme aktualizovat `StartRowIndex` a znovu navazovat data na Repeater.</span><span class="sxs-lookup"><span data-stu-id="9856d-306">When one of these Buttons is clicked, we need to update the `StartRowIndex` and rebind the data to the Repeater.</span></span> <span data-ttu-id="9856d-307">Kód pro první, předchozí a další tlačítka jsou dostatečně snadné, ale pro poslední tlačítko, jak pro poslední stránku dat určit index počátečního řádku?</span><span class="sxs-lookup"><span data-stu-id="9856d-307">The code for the First, Previous, and Next buttons is simple enough, but for the Last button how do we determine the start row index for the last page of data?</span></span> <span data-ttu-id="9856d-308">Aby bylo možné tento index vypočítat i v případě, že chcete určit, zda má být povoleno tlačítko Další a poslední, musíme zjistit, kolik záznamů je celkem na straně sebe.</span><span class="sxs-lookup"><span data-stu-id="9856d-308">To compute this index as well as being able to determine whether the Next and Last buttons should be enabled we need to know how many records in total are being paged through.</span></span> <span data-ttu-id="9856d-309">To můžeme určit voláním metody `ProductsBLL` třídy s `TotalNumberOfProducts()`.</span><span class="sxs-lookup"><span data-stu-id="9856d-309">We can determine this by calling the `ProductsBLL` class s `TotalNumberOfProducts()` method.</span></span> <span data-ttu-id="9856d-310">Umožňuje vytvořit vlastnost na úrovni stránky jen pro čtení s názvem `TotalRowCount`, která vrací výsledky `TotalNumberOfProducts()` metody:</span><span class="sxs-lookup"><span data-stu-id="9856d-310">Let s create a read-only, page-level property named `TotalRowCount` that returns the results of the `TotalNumberOfProducts()` method:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample15.cs)]

<span data-ttu-id="9856d-311">Pomocí této vlastnosti teď můžeme určit index počátečního řádku s poslední stránkou.</span><span class="sxs-lookup"><span data-stu-id="9856d-311">With this property we can now determine the last page s start row index.</span></span> <span data-ttu-id="9856d-312">Konkrétně se jedná o celočíselný výsledek `TotalRowCount` minus 1 děleno `MaximumRows`vynásobené `MaximumRows`.</span><span class="sxs-lookup"><span data-stu-id="9856d-312">Specifically, it s the integer result of the `TotalRowCount` minus 1 divided by `MaximumRows`, multiplied by `MaximumRows`.</span></span> <span data-ttu-id="9856d-313">Nyní můžeme zapisovat obslužné rutiny událostí `Click` pro čtyři tlačítka rozhraní pro stránkování:</span><span class="sxs-lookup"><span data-stu-id="9856d-313">We can now write the `Click` event handlers for the four paging interface buttons:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample16.cs)]

<span data-ttu-id="9856d-314">Nakonec musíme při zobrazení poslední stránky vypnout první a předchozí tlačítka ve stránkovacím rozhraní při zobrazení první stránky dat a tlačítka Další a poslední.</span><span class="sxs-lookup"><span data-stu-id="9856d-314">Finally, we need to disable the First and Previous buttons in the paging interface when viewing the first page of data and the Next and Last buttons when viewing the last page.</span></span> <span data-ttu-id="9856d-315">K tomu je potřeba přidat následující kód do obslužné rutiny události `Selecting` ObjectDataSource s:</span><span class="sxs-lookup"><span data-stu-id="9856d-315">To accomplish this, add the following code to the ObjectDataSource s `Selecting` event handler:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample17.cs)]

<span data-ttu-id="9856d-316">Po přidání těchto obslužných rutin událostí `Click` a kódu pro povolení nebo zakázání prvků stránkovacího rozhraní v závislosti na aktuálním indexu počátečního řádku otestujte stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="9856d-316">After adding these `Click` event handlers and the code to enable or disable the paging interface elements based on the current start row index, test the page in a browser.</span></span> <span data-ttu-id="9856d-317">Jak ukazuje obrázek 15, při první návštěvě stránky se neaktivují první a předchozí tlačítka.</span><span class="sxs-lookup"><span data-stu-id="9856d-317">As Figure 15 illustrates, when first visiting the page the First and Previous buttons will are disabled.</span></span> <span data-ttu-id="9856d-318">Kliknutím na další zobrazíte druhou stránku dat a při kliknutí na poslední se zobrazí poslední stránka (viz obrázek 16 a 17).</span><span class="sxs-lookup"><span data-stu-id="9856d-318">Clicking Next shows the second page of data, while clicking Last displays the final page (see Figures 16 and 17).</span></span> <span data-ttu-id="9856d-319">Při zobrazení poslední stránky dat se vypne tlačítko Další i poslední.</span><span class="sxs-lookup"><span data-stu-id="9856d-319">When viewing the last page of data both the Next and Last buttons are disabled.</span></span>

<span data-ttu-id="9856d-320">[Při zobrazení první stránky produktů jsou zakázané ![předchozí a poslední tlačítka](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-320">[![The Previous and Last Buttons are Disabled When Viewing the First Page of Products](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span></span>

<span data-ttu-id="9856d-321">**Obrázek 15**: při prohlížení první stránky produktů je vypnuto tlačítko předchozí a poslední ([kliknutím zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="9856d-321">**Figure 15**: The Previous and Last Buttons are Disabled When Viewing the First Page of Products ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span></span>

<span data-ttu-id="9856d-322">[![se zobrazí druhá stránka produktů](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-322">[![The Second Page of Products are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span></span>

<span data-ttu-id="9856d-323">**Obrázek 16**: zobrazí se druhá stránka produktů ([kliknutím zobrazíte obrázek v plné velikosti).](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-323">**Figure 16**: The Second Page of Products are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span></span>

<span data-ttu-id="9856d-324">[![kliknutí na poslední zobrazí poslední stránku dat.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-324">[![Clicking Last Displays the Final Page of Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span></span>

<span data-ttu-id="9856d-325">**Obrázek 17**: po kliknutí na poslední se zobrazí poslední stránka dat (Kliknutím zobrazíte[obrázek v plné velikosti).](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-325">**Figure 17**: Clicking Last Displays the Final Page of Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span></span>

## <a name="step-7-including-sorting-support-with-the-custom-paged-repeater"></a><span data-ttu-id="9856d-326">Krok 7: včetně podpory řazení u vlastního stránkovaného opakovače</span><span class="sxs-lookup"><span data-stu-id="9856d-326">Step 7: Including Sorting Support with the Custom Paged Repeater</span></span>

<span data-ttu-id="9856d-327">Po implementaci vlastního stránkování se teď znovu připravujeme k zahrnutí podpory řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-327">Now that custom paging has been implemented, we re ready to include sorting support.</span></span> <span data-ttu-id="9856d-328">Metoda `ProductsBLL` třídy s `GetProductsPagedAndSorted` má stejné vstupní parametry *StartRowIndex* a *MaximumRows* jako `GetProductsPaged`, ale umožňuje další vstupní parametr *SortExpression* .</span><span class="sxs-lookup"><span data-stu-id="9856d-328">The `ProductsBLL` class s `GetProductsPagedAndSorted` method has the same *startRowIndex* and *maximumRows* input parameters as `GetProductsPaged`, but permits an additional *sortExpression* input parameter.</span></span> <span data-ttu-id="9856d-329">Pokud chcete použít metodu `GetProductsPagedAndSorted` z `SortingWithCustomPaging.aspx`, musíme provést následující kroky:</span><span class="sxs-lookup"><span data-stu-id="9856d-329">To use the `GetProductsPagedAndSorted` method from `SortingWithCustomPaging.aspx`, we need to perform the following steps:</span></span>

1. <span data-ttu-id="9856d-330">Změňte vlastnost `SelectMethod` ObjectDataSource s z `GetProductsPaged` na `GetProductsPagedAndSorted`.</span><span class="sxs-lookup"><span data-stu-id="9856d-330">Change the ObjectDataSource s `SelectMethod` property from `GetProductsPaged` to `GetProductsPagedAndSorted`.</span></span>
2. <span data-ttu-id="9856d-331">Přidejte objekt *sortExpression* `Parameter` do kolekce `SelectParameters` ObjectDataSource s.</span><span class="sxs-lookup"><span data-stu-id="9856d-331">Add a *sortExpression* `Parameter` object to the ObjectDataSource s `SelectParameters` collection.</span></span>
3. <span data-ttu-id="9856d-332">Vytvořte soukromou vlastnost `SortExpression` na úrovni stránky, která bude zachována jeho hodnotu napříč zpětnými voláními ve stavu zobrazení stránky.</span><span class="sxs-lookup"><span data-stu-id="9856d-332">Create a private, page-level `SortExpression` property that persists its value across postbacks through the page s view state.</span></span>
4. <span data-ttu-id="9856d-333">Aktualizujte obslužnou rutinu události ObjectDataSource s `Selecting` pro přiřazení parametru ObjectDataSource s *SortExpression* hodnotu vlastnosti `SortExpression` na úrovni stránky.</span><span class="sxs-lookup"><span data-stu-id="9856d-333">Update the ObjectDataSource s `Selecting` event handler to assign the ObjectDataSource s *sortExpression* parameter the value of the page-level `SortExpression` property.</span></span>
5. <span data-ttu-id="9856d-334">Vytvořte rozhraní řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-334">Create the sorting interface.</span></span>

<span data-ttu-id="9856d-335">Začněte tím, že aktualizujete vlastnost `SelectMethod` ObjectDataSource s a přidáte `Parameter`*SortExpression* .</span><span class="sxs-lookup"><span data-stu-id="9856d-335">Start by updating the ObjectDataSource s `SelectMethod` property and adding a *sortExpression* `Parameter`.</span></span> <span data-ttu-id="9856d-336">Ujistěte se, že vlastnost *sortExpression* `Parameter` s `Type` je nastavená na `String`.</span><span class="sxs-lookup"><span data-stu-id="9856d-336">Make sure that the *sortExpression* `Parameter` s `Type` property is set to `String`.</span></span> <span data-ttu-id="9856d-337">Po dokončení těchto prvních dvou úkolů by deklarativní označení ObjectDataSource s mělo vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="9856d-337">After completing these first two tasks, the ObjectDataSource s declarative markup should look like the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample18.aspx)]

<span data-ttu-id="9856d-338">Dále potřebujeme vlastnost `SortExpression` na úrovni stránky, jejíž hodnota je serializovaná na zobrazení stavu.</span><span class="sxs-lookup"><span data-stu-id="9856d-338">Next, we need a page-level `SortExpression` property whose value is serialized to view state.</span></span> <span data-ttu-id="9856d-339">Pokud nebyla nastavena žádná hodnota výrazu řazení, použijte jako výchozí výchozí hodnotu NázevVýrobku:</span><span class="sxs-lookup"><span data-stu-id="9856d-339">If no sort expression value has been set, use ProductName as the default:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample19.cs)]

<span data-ttu-id="9856d-340">Předtím, než prvek ObjectDataSource vyvolá metodu `GetProductsPagedAndSorted` potřebujeme nastavit `Parameter` *SortExpression* na hodnotu vlastnosti `SortExpression`.</span><span class="sxs-lookup"><span data-stu-id="9856d-340">Before the ObjectDataSource invokes the `GetProductsPagedAndSorted` method we need to set the *sortExpression* `Parameter` to the value of the `SortExpression` property.</span></span> <span data-ttu-id="9856d-341">V obslužné rutině události `Selecting` přidejte následující řádek kódu:</span><span class="sxs-lookup"><span data-stu-id="9856d-341">In the `Selecting` event handler, add the following line of code:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample20.cs)]

<span data-ttu-id="9856d-342">To vše zůstává k implementaci rozhraní řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-342">All that remains is to implement the sorting interface.</span></span> <span data-ttu-id="9856d-343">Stejně jako v posledním příkladu se musí mít rozhraní řazení implementované pomocí tří webových ovládacích prvků na tlačítku, které umožní uživateli seřadit výsledky podle názvu produktu, kategorie nebo dodavatele.</span><span class="sxs-lookup"><span data-stu-id="9856d-343">As we did in the last example, let s have the sorting interface implemented using three Button Web controls that allow the user to sort the results by product name, category, or supplier.</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample21.aspx)]

<span data-ttu-id="9856d-344">Vytvořte obslužné rutiny událostí `Click` pro tyto tři ovládací prvky tlačítka.</span><span class="sxs-lookup"><span data-stu-id="9856d-344">Create `Click` event handlers for these three Button controls.</span></span> <span data-ttu-id="9856d-345">V obslužné rutině události obnovte `StartRowIndex` na 0, nastavte `SortExpression` na odpovídající hodnotu a znovu Navažte data na Repeater:</span><span class="sxs-lookup"><span data-stu-id="9856d-345">In the event handler, reset the `StartRowIndex` to 0, set the `SortExpression` to the appropriate value, and rebind the data to the Repeater:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample22.cs)]

<span data-ttu-id="9856d-346">To všechno je!</span><span class="sxs-lookup"><span data-stu-id="9856d-346">That s all there is to it!</span></span> <span data-ttu-id="9856d-347">I když bylo k dispozici několik kroků pro získání vlastního stránkování a seřazení, byly kroky velmi podobné těm, které jsou potřeba pro výchozí stránkování.</span><span class="sxs-lookup"><span data-stu-id="9856d-347">While there were a number of steps to get custom paging and sorting implemented, the steps were very similar to those needed for default paging.</span></span> <span data-ttu-id="9856d-348">Obrázek 18 zobrazuje produkty při prohlížení poslední stránky dat, pokud jsou seřazeny podle kategorie.</span><span class="sxs-lookup"><span data-stu-id="9856d-348">Figure 18 shows the products when viewing the last page of data when sorted by category.</span></span>

<span data-ttu-id="9856d-349">[![se zobrazí poslední stránka dat seřazená podle kategorie.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-349">[![The Last Page of Data, Sorted by Category, is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span></span>

<span data-ttu-id="9856d-350">**Obrázek 18**: zobrazí se poslední stránka dat seřazená podle kategorie ([kliknutím zobrazíte obrázek v plné velikosti).](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="9856d-350">**Figure 18**: The Last Page of Data, Sorted by Category, is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span></span>

> [!NOTE]
> <span data-ttu-id="9856d-351">V předchozích příkladech se při třídění podle dodavatele dodavatele použil jako výraz řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-351">In previous examples, when sorting by the supplier SupplierName was used as the sort expression.</span></span> <span data-ttu-id="9856d-352">Pro implementaci vlastního stránkování ale musíme použít CompanyName.</span><span class="sxs-lookup"><span data-stu-id="9856d-352">However, for the custom paging implementation, we need to use CompanyName.</span></span> <span data-ttu-id="9856d-353">Důvodem je skutečnost, že úložná procedura zodpovědná za implementaci vlastního stránkování `GetProductsPagedAndSorted` předá výraz řazení do klíčového slova `ROW_NUMBER()`, klíčové slovo `ROW_NUMBER()` vyžaduje skutečný název sloupce, nikoli alias.</span><span class="sxs-lookup"><span data-stu-id="9856d-353">This is because the stored procedure responsible for implementing custom paging `GetProductsPagedAndSorted` passes the sort expression into the `ROW_NUMBER()` keyword, The `ROW_NUMBER()` keyword requires the actual column name rather than an alias.</span></span> <span data-ttu-id="9856d-354">Proto je nutné použít `CompanyName` (název sloupce v tabulce `Suppliers`) místo aliasu používaného v dotazu `SELECT` (`SupplierName`) pro výraz řazení.</span><span class="sxs-lookup"><span data-stu-id="9856d-354">Therefore, we must use `CompanyName` (the name of the column in the `Suppliers` table) rather than the alias used in the `SELECT` query (`SupplierName`) for the sort expression.</span></span>

## <a name="summary"></a><span data-ttu-id="9856d-355">Souhrn</span><span class="sxs-lookup"><span data-stu-id="9856d-355">Summary</span></span>

<span data-ttu-id="9856d-356">Prvky DataList ani Repeat nenabízejí integrovanou podporu pro řazení, ale s bitem kódu a vlastním rozhraním řazení. Tyto funkce lze přidat.</span><span class="sxs-lookup"><span data-stu-id="9856d-356">Neither the DataList nor Repeater offer built-in sorting support, but with a bit of code and a custom sorting interface, such functionality can be added.</span></span> <span data-ttu-id="9856d-357">Při implementaci řazení, ale ne stránkování, lze výraz řazení určit prostřednictvím objektu `DataSourceSelectArguments` předaného do metody ObjectDataSource s `Select`.</span><span class="sxs-lookup"><span data-stu-id="9856d-357">When implementing sorting, but not paging, the sort expression can be specified through the `DataSourceSelectArguments` object passed into the ObjectDataSource s `Select` method.</span></span> <span data-ttu-id="9856d-358">Tuto vlastnost `DataSourceSelectArguments` objektů `SortExpression` lze přiřadit v obslužné rutině události ObjectDataSource s `Selecting`.</span><span class="sxs-lookup"><span data-stu-id="9856d-358">This `DataSourceSelectArguments` object s `SortExpression` property can be assigned in the ObjectDataSource s `Selecting` event handler.</span></span>

<span data-ttu-id="9856d-359">Chcete-li přidat možnosti řazení do prvku DataList nebo Repeater, který již poskytuje podporu stránkování, nejjednodušší způsob je přizpůsobení vrstvy obchodní logiky tak, aby zahrnovala metodu, která přijímá řadicí výraz.</span><span class="sxs-lookup"><span data-stu-id="9856d-359">To add sorting capabilities to a DataList or Repeater that already provides paging support, the easiest approach is to customize the Business Logic Layer to include a method that accepts a sort expression.</span></span> <span data-ttu-id="9856d-360">Tyto informace lze následně předat prostřednictvím parametru v prvku ObjectDataSource s `SelectParameters`.</span><span class="sxs-lookup"><span data-stu-id="9856d-360">This information can then be passed in through a parameter in the ObjectDataSource s `SelectParameters`.</span></span>

<span data-ttu-id="9856d-361">V tomto kurzu se dokončí naše zkoumání stránkování a řazení pomocí ovládacího prvku DataList a Repeater.</span><span class="sxs-lookup"><span data-stu-id="9856d-361">This tutorial completes our examination of paging and sorting with the DataList and Repeater controls.</span></span> <span data-ttu-id="9856d-362">Náš další a finální kurz vám podíváme se, jak přidat webové ovládací prvky tlačítka do šablon DataList a Repeater s, aby bylo možné poskytovat některé vlastní uživatelem iniciované funkce na základě jednotlivých položek.</span><span class="sxs-lookup"><span data-stu-id="9856d-362">Our next and final tutorial will examine how to add Button Web controls to the DataList and Repeater s templates in order to provide some custom, user-initiated functionality on a per-item basis.</span></span>

<span data-ttu-id="9856d-363">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="9856d-363">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="9856d-364">O autorovi</span><span class="sxs-lookup"><span data-stu-id="9856d-364">About the Author</span></span>

<span data-ttu-id="9856d-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="9856d-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="9856d-366">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="9856d-366">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="9856d-367">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="9856d-367">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="9856d-368">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9856d-368">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="9856d-369">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="9856d-369">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="9856d-370">Zvláštní díky</span><span class="sxs-lookup"><span data-stu-id="9856d-370">Special Thanks To</span></span>

<span data-ttu-id="9856d-371">Tato řada kurzů byla přezkoumána mnoha užitečnými kontrolory.</span><span class="sxs-lookup"><span data-stu-id="9856d-371">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9856d-372">Kontrolorovi realizace tohoto kurzu bylo David Suru.</span><span class="sxs-lookup"><span data-stu-id="9856d-372">Lead reviewer for this tutorial was David Suru.</span></span> <span data-ttu-id="9856d-373">Uvažujete o přezkoumání mých nadcházejících článků na webu MSDN?</span><span class="sxs-lookup"><span data-stu-id="9856d-373">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="9856d-374">Pokud ano, vyřaďte mi řádek na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9856d-374">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9856d-375">[Předchozí](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
> [Další](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="9856d-375">[Previous](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
[Next](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span></span>
