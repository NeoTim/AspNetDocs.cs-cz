---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-vb
title: Přehled vložení, aktualizace a odstranění dat (VB) | Microsoft Docs
author: rick-anderson
description: V tomto kurzu se dozvíte, jak namapovat metody vložení (), Update () a Delete () prvku ObjectDataSource na metody tříd knihoven BLL a také jak konfigurovat...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: 35b40b8f-2ca8-4ab3-9c19-f361a91a3647
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-vb
msc.type: authoredcontent
ms.openlocfilehash: 79491118ba1cbbc8c1b67ca9646a817d941f17ba
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/28/2019
ms.locfileid: "74630920"
---
# <a name="an-overview-of-inserting-updating-and-deleting-data-vb"></a><span data-ttu-id="6801a-103">Přehled vložení, aktualizace a odstranění dat (VB)</span><span class="sxs-lookup"><span data-stu-id="6801a-103">An Overview of Inserting, Updating, and Deleting Data (VB)</span></span>

<span data-ttu-id="6801a-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="6801a-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="6801a-105">[Stáhnout ukázkovou aplikaci](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_16_VB.exe) nebo [Stáhnout PDF](an-overview-of-inserting-updating-and-deleting-data-vb/_static/datatutorial16vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="6801a-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_16_VB.exe) or [Download PDF](an-overview-of-inserting-updating-and-deleting-data-vb/_static/datatutorial16vb1.pdf)</span></span>

> <span data-ttu-id="6801a-106">V tomto kurzu se dozvíte, jak namapovat metody vložení (), Update () a Delete () prvku ObjectDataSource na metody tříd knihoven BLL a jak nakonfigurovat ovládací prvky GridView, DetailsView a FormView pro zajištění možností změny dat.</span><span class="sxs-lookup"><span data-stu-id="6801a-106">In this tutorial we'll see how to map an ObjectDataSource's Insert(), Update(), and Delete() methods to the methods of BLL classes, as well as how to configure the GridView, DetailsView, and FormView controls to provide data modification capabilities.</span></span>

## <a name="introduction"></a><span data-ttu-id="6801a-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="6801a-107">Introduction</span></span>

<span data-ttu-id="6801a-108">V posledních několika kurzech jsme prozkoumali, jak zobrazit data na stránce ASP.NET pomocí ovládacích prvků GridView, DetailsView a FormView.</span><span class="sxs-lookup"><span data-stu-id="6801a-108">Over the past several tutorials we've examined how to display data in an ASP.NET page using the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="6801a-109">Tyto ovládací prvky jednoduše fungují s daty, která jsou jim dodána.</span><span class="sxs-lookup"><span data-stu-id="6801a-109">These controls simply work with data supplied to them.</span></span> <span data-ttu-id="6801a-110">Běžně tyto ovládací prvky přistupují k datům pomocí ovládacího prvku zdroje dat, jako je například ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-110">Commonly, these controls access data through the use of a data source control, such as the ObjectDataSource.</span></span> <span data-ttu-id="6801a-111">Zjistili jsme, jak prvek ObjectDataSource funguje jako proxy mezi stránkou ASP.NET a podkladovým datům.</span><span class="sxs-lookup"><span data-stu-id="6801a-111">We've seen how the ObjectDataSource acts as a proxy between the ASP.NET page and the underlying data.</span></span> <span data-ttu-id="6801a-112">Když prvek GridView potřebuje zobrazit data, vyvolá jeho `Select()` metodu ObjectDataSource, která zase vyvolá metodu z naší vrstvy obchodní logiky (knihoven BLL), která volá metodu v příslušné vrstvě pro přístup k datům (DAL) TableAdapter, která zase odesílá dotaz `SELECT` do databáze Northwind.</span><span class="sxs-lookup"><span data-stu-id="6801a-112">When a GridView needs to display data, it invokes its ObjectDataSource's `Select()` method, which in turn invokes a method from our Business Logic Layer (BLL), which calls a method in the appropriate Data Access Layer's (DAL) TableAdapter, which in turn sends a `SELECT` query to the Northwind database.</span></span>

<span data-ttu-id="6801a-113">Pokud jste v [našem prvním kurzu](../introduction/creating-a-data-access-layer-cs.md)naplnili objekty tableadaptery na dal, Visual Studio automaticky přidalo metody pro vkládání, aktualizaci a odstraňování dat z podkladové databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="6801a-113">Recall that when we created the TableAdapters in the DAL in [our first tutorial](../introduction/creating-a-data-access-layer-cs.md), Visual Studio automatically added methods for inserting, updating, and deleting data from the underlying database table.</span></span> <span data-ttu-id="6801a-114">Kromě toho při [vytváření vrstvy obchodní logiky](../introduction/creating-a-business-logic-layer-vb.md) jsme navrhli metody v knihoven BLL, které se do těchto dat zavolaly, do těchto metod úprav dal.</span><span class="sxs-lookup"><span data-stu-id="6801a-114">Moreover, in [Creating a Business Logic Layer](../introduction/creating-a-business-logic-layer-vb.md) we designed methods in the BLL that called down into these data modification DAL methods.</span></span>

<span data-ttu-id="6801a-115">Kromě jeho metody `Select()` má prvek ObjectDataSource také metody `Insert()`, `Update()`a `Delete()`.</span><span class="sxs-lookup"><span data-stu-id="6801a-115">In addition to its `Select()` method, the ObjectDataSource also has `Insert()`, `Update()`, and `Delete()` methods.</span></span> <span data-ttu-id="6801a-116">Podobně jako u metody `Select()` mohou být tyto tři metody namapovány na metody v podkladovém objektu.</span><span class="sxs-lookup"><span data-stu-id="6801a-116">Like the `Select()` method, these three methods can be mapped to methods in an underlying object.</span></span> <span data-ttu-id="6801a-117">Pokud je nakonfigurována pro vložení, aktualizaci nebo odstranění dat, ovládací prvky GridView, DetailsView a FormView poskytují uživatelské rozhraní pro úpravu podkladových dat.</span><span class="sxs-lookup"><span data-stu-id="6801a-117">When configured to insert, update, or delete data, the GridView, DetailsView, and FormView controls provide a user interface for modifying the underlying data.</span></span> <span data-ttu-id="6801a-118">Toto uživatelské rozhraní volá metody `Insert()`, `Update()`a `Delete()` prvku ObjectDataSource, které následně vyvolávají přidružené metody objektu (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="6801a-118">This user interface calls the `Insert()`, `Update()`, and `Delete()` methods of the ObjectDataSource, which then invoke the underlying object's associated methods (see Figure 1).</span></span>

<span data-ttu-id="6801a-119">[![metody Insert (), Update () a Delete () prvku ObjectDataSource slouží jako proxy do knihoven BLL](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image2.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-119">[![The ObjectDataSource's Insert(), Update(), and Delete() Methods Serve as a Proxy into the BLL](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image2.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image1.png)</span></span>

<span data-ttu-id="6801a-120">**Obrázek 1**: metody `Insert()`, `Update()`a `Delete()` prvku ObjectDataSource slouží jako proxy do knihoven BLL ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-120">**Figure 1**: The ObjectDataSource's `Insert()`, `Update()`, and `Delete()` Methods Serve as a Proxy into the BLL ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image3.png))</span></span>

<span data-ttu-id="6801a-121">V tomto kurzu se dozvíte, jak namapovat metody `Insert()`, `Update()`a `Delete()` prvku ObjectDataSource na metody tříd v knihoven BLL, a jak nakonfigurovat ovládací prvky GridView, DetailsView a FormView pro poskytování možností změny dat.</span><span class="sxs-lookup"><span data-stu-id="6801a-121">In this tutorial we'll see how to map the ObjectDataSource's `Insert()`, `Update()`, and `Delete()` methods to methods of classes in the BLL, as well as how to configure the GridView, DetailsView, and FormView controls to provide data modification capabilities.</span></span>

## <a name="step-1-creating-the-insert-update-and-delete-tutorials-web-pages"></a><span data-ttu-id="6801a-122">Krok 1: vytvoření webových stránek kurzy INSERT, Update a DELETE</span><span class="sxs-lookup"><span data-stu-id="6801a-122">Step 1: Creating the Insert, Update, and Delete Tutorials Web Pages</span></span>

<span data-ttu-id="6801a-123">Předtím, než začneme zkoumat, jak vkládat, aktualizovat a odstraňovat data, si nejdřív chvíli počkejte, než vytvoříte stránky ASP.NET v našem projektu webu, který budeme potřebovat pro tento kurz, a dalších.</span><span class="sxs-lookup"><span data-stu-id="6801a-123">Before we start exploring how to insert, update, and delete data, let's first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next several ones.</span></span> <span data-ttu-id="6801a-124">Začněte přidáním nové složky s názvem `EditInsertDelete`.</span><span class="sxs-lookup"><span data-stu-id="6801a-124">Start by adding a new folder named `EditInsertDelete`.</span></span> <span data-ttu-id="6801a-125">Dále přidejte následující stránky ASP.NET do této složky a nezapomeňte přidružit jednotlivé stránky k `Site.master` hlavní stránce:</span><span class="sxs-lookup"><span data-stu-id="6801a-125">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `Basics.aspx`
- `DataModificationEvents.aspx`
- `ErrorHandling.aspx`
- `UIValidation.aspx`
- `CustomizedUI.aspx`
- `OptimisticConcurrency.aspx`
- `ConfirmationOnDelete.aspx`
- `UserLevelAccess.aspx`

![Přidání stránek ASP.NET pro kurzy týkající se úprav dat](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image4.png)

<span data-ttu-id="6801a-127">**Obrázek 2**: přidání stránek ASP.NET pro kurzy týkající se úprav dat</span><span class="sxs-lookup"><span data-stu-id="6801a-127">**Figure 2**: Add the ASP.NET Pages for the Data Modification-Related Tutorials</span></span>

<span data-ttu-id="6801a-128">Podobně jako v ostatních složkách `Default.aspx` ve složce `EditInsertDelete` vypíše kurzy v části.</span><span class="sxs-lookup"><span data-stu-id="6801a-128">Like in the other folders, `Default.aspx` in the `EditInsertDelete` folder will list the tutorials in its section.</span></span> <span data-ttu-id="6801a-129">Zajistěte, aby tato funkce poskytovala `SectionLevelTutorialListing.ascx` uživatelský ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="6801a-129">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="6801a-130">Proto tento uživatelský ovládací prvek přidejte do `Default.aspx` tím, že ho přetáhnete z Průzkumník řešení na zobrazení Návrh stránky.</span><span class="sxs-lookup"><span data-stu-id="6801a-130">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page's Design view.</span></span>

<span data-ttu-id="6801a-131">[![přidat uživatelský ovládací prvek SectionLevelTutorialListing. ascx do default. aspx](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image6.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-131">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image6.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image5.png)</span></span>

<span data-ttu-id="6801a-132">**Obrázek 3**: Přidání uživatelského ovládacího prvku `SectionLevelTutorialListing.ascx` do `Default.aspx` ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="6801a-132">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image7.png))</span></span>

<span data-ttu-id="6801a-133">Nakonec přidejte stránky jako položky do souboru `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="6801a-133">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="6801a-134">Konkrétně přidejte následující značku po přizpůsobeném formátování `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="6801a-134">Specifically, add the following markup after the Customized Formatting `<siteMapNode>`:</span></span>

[!code-xml[Main](an-overview-of-inserting-updating-and-deleting-data-vb/samples/sample1.xml)]

<span data-ttu-id="6801a-135">Po aktualizaci `Web.sitemap`chvíli počkejte, než se zobrazí web kurzy prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="6801a-135">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="6801a-136">Nabídka na levé straně teď obsahuje položky pro kurzy pro úpravy, vkládání a odstraňování.</span><span class="sxs-lookup"><span data-stu-id="6801a-136">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![Mapa webu teď obsahuje položky pro kurzy pro úpravy, vkládání a odstraňování.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image8.png)

<span data-ttu-id="6801a-138">**Obrázek 4**: Mapa webu teď obsahuje položky pro kurzy pro úpravy, vkládání a odstraňování.</span><span class="sxs-lookup"><span data-stu-id="6801a-138">**Figure 4**: The Site Map Now Includes Entries for the Editing, Inserting, and Deleting Tutorials</span></span>

## <a name="step-2-adding-and-configuring-the-objectdatasource-control"></a><span data-ttu-id="6801a-139">Krok 2: Přidání a konfigurace ovládacího prvku ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="6801a-139">Step 2: Adding and Configuring the ObjectDataSource Control</span></span>

<span data-ttu-id="6801a-140">Vzhledem k tomu, že se ovládací prvek GridView, DetailsView a FormView liší v možnosti úprav dat a rozložení, Podívejme se každou jednotlivě.</span><span class="sxs-lookup"><span data-stu-id="6801a-140">Since the GridView, DetailsView, and FormView each differ in their data modification capabilities and layout, let's examine each one individually.</span></span> <span data-ttu-id="6801a-141">Místo toho, aby každý ovládací prvek používal vlastní prvek ObjectDataSource, ale pojďme pouze vytvořit jediný prvek ObjectDataSource, který mohou sdílet všechny tři ukázkové příklady.</span><span class="sxs-lookup"><span data-stu-id="6801a-141">Rather than have each control using its own ObjectDataSource, however, let's just create a single ObjectDataSource that all three control examples can share.</span></span>

<span data-ttu-id="6801a-142">Otevřete stránku `Basics.aspx`, přetáhněte prvek ObjectDataSource z panelu nástrojů do návrháře a klikněte na odkaz konfigurace zdroje dat z jeho inteligentní značky.</span><span class="sxs-lookup"><span data-stu-id="6801a-142">Open the `Basics.aspx` page, drag an ObjectDataSource from the Toolbox onto the Designer, and click the Configure Data Source link from its smart tag.</span></span> <span data-ttu-id="6801a-143">Vzhledem k tomu, že `ProductsBLL` je jediná třída knihoven BLL, která poskytuje úpravy, vkládání a odstraňování metod, nakonfigurujte prvek ObjectDataSource, aby používal tuto třídu.</span><span class="sxs-lookup"><span data-stu-id="6801a-143">Since the `ProductsBLL` is the only BLL class that provides editing, inserting, and deleting methods, configure the ObjectDataSource to use this class.</span></span>

<span data-ttu-id="6801a-144">[![nakonfigurovat prvek ObjectDataSource tak, aby používal třídu ProductsBLL](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image10.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-144">[![Configure the ObjectDataSource to Use the ProductsBLL Class](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image10.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image9.png)</span></span>

<span data-ttu-id="6801a-145">**Obrázek 5**: Konfigurace prvku ObjectDataSource, aby používal třídu `ProductsBLL` ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="6801a-145">**Figure 5**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image11.png))</span></span>

<span data-ttu-id="6801a-146">Na další obrazovce můžeme určit, jaké metody `ProductsBLL` třídy jsou namapovány na `Select()`, `Insert()`, `Update()`a `Delete()` prvku ObjectDataSource, a to tak, že vyberete příslušnou kartu a zvolíte metodu z rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="6801a-146">In the next screen we can specify what methods of the `ProductsBLL` class are mapped to the ObjectDataSource's `Select()`, `Insert()`, `Update()`, and `Delete()` by selecting the appropriate tab and choosing the method from the drop-down list.</span></span> <span data-ttu-id="6801a-147">Obrázek 6, který by měl nyní vypadat dobře, mapuje metodu `Select()` prvku ObjectDataSource na metodu `GetProducts()` `ProductsBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="6801a-147">Figure 6, which should look familiar by now, maps the ObjectDataSource's `Select()` method to the `ProductsBLL` class's `GetProducts()` method.</span></span> <span data-ttu-id="6801a-148">Metody `Insert()`, `Update()`a `Delete()` lze nakonfigurovat výběrem příslušné karty ze seznamu podél horního okraje.</span><span class="sxs-lookup"><span data-stu-id="6801a-148">The `Insert()`, `Update()`, and `Delete()` methods can be configured by selecting the appropriate tab from the list along the top.</span></span>

<span data-ttu-id="6801a-149">[![mají-li prvek ObjectDataSource vracet všechny produkty](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image13.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-149">[![Have the ObjectDataSource Return All of the Products](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image13.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image12.png)</span></span>

<span data-ttu-id="6801a-150">**Obrázek 6**: Chcete-li, aby prvek ObjectDataSource vrátil všechny produkty ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="6801a-150">**Figure 6**: Have the ObjectDataSource Return All of the Products ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image14.png))</span></span>

<span data-ttu-id="6801a-151">Na obrázcích 7, 8 a 9 se zobrazí karty aktualizace, vložení a odstranění prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-151">Figures 7, 8, and 9 show the ObjectDataSource's UPDATE, INSERT, and DELETE tabs.</span></span> <span data-ttu-id="6801a-152">Tyto karty nakonfigurujte tak, aby metody `Insert()`, `Update()`a `Delete()` vyvolaly `UpdateProduct`, `AddProduct`a `DeleteProduct` metody třídy `ProductsBLL`, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="6801a-152">Configure these tabs so that the `Insert()`, `Update()`, and `Delete()` methods invoke the `ProductsBLL` class's `UpdateProduct`, `AddProduct`, and `DeleteProduct` methods, respectively.</span></span>

<span data-ttu-id="6801a-153">[![namapovat metodu Update () prvku ObjectDataSource na UpdateProduct metodu třídy ProductBLL](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image16.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-153">[![Map the ObjectDataSource's Update() Method to the ProductBLL Class's UpdateProduct Method](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image16.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image15.png)</span></span>

<span data-ttu-id="6801a-154">**Obrázek 7**: namapujte metodu `Update()` prvku ObjectDataSource na `UpdateProduct` metodu `ProductBLL` třídy ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-154">**Figure 7**: Map the ObjectDataSource's `Update()` Method to the `ProductBLL` Class's `UpdateProduct` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image17.png))</span></span>

<span data-ttu-id="6801a-155">[![namapovat metodu Insert () prvku ObjectDataSource na AddProduct metodu třídy ProductBLL](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image19.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-155">[![Map the ObjectDataSource's Insert() Method to the ProductBLL Class's AddProduct Method](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image19.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image18.png)</span></span>

<span data-ttu-id="6801a-156">**Obrázek 8**: namapujte metodu `Insert()` prvku ObjectDataSource na metodu Add `Product` `ProductBLL` třídy ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-156">**Figure 8**: Map the ObjectDataSource's `Insert()` Method to the `ProductBLL` Class's Add `Product` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image20.png))</span></span>

<span data-ttu-id="6801a-157">[![namapovat metodu DELETE () prvku ObjectDataSource na DeleteProduct metodu třídy ProductBLL](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image22.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-157">[![Map the ObjectDataSource's Delete() Method to the ProductBLL Class's DeleteProduct Method](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image22.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image21.png)</span></span>

<span data-ttu-id="6801a-158">**Obrázek 9**: namapujte metodu `Delete()` prvku ObjectDataSource na `DeleteProduct` metodu `ProductBLL` třídy ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-158">**Figure 9**: Map the ObjectDataSource's `Delete()` Method to the `ProductBLL` Class's `DeleteProduct` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image23.png))</span></span>

<span data-ttu-id="6801a-159">Možná jste si všimli, že v rozevíracích seznamech na kartách aktualizace, vložení a odstranění již byly vybrány tyto metody.</span><span class="sxs-lookup"><span data-stu-id="6801a-159">You may have noticed that the drop-down lists in the UPDATE, INSERT, and DELETE tabs already had these methods selected.</span></span> <span data-ttu-id="6801a-160">To je díky našemu využití `DataObjectMethodAttribute`, které upraví metody `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="6801a-160">This is thanks to our use of the `DataObjectMethodAttribute` that decorates the methods of `ProductsBLL`.</span></span> <span data-ttu-id="6801a-161">Například metoda DeleteProduct má následující signaturu:</span><span class="sxs-lookup"><span data-stu-id="6801a-161">For example, the DeleteProduct method has the following signature:</span></span>

[!code-vb[Main](an-overview-of-inserting-updating-and-deleting-data-vb/samples/sample2.vb)]

<span data-ttu-id="6801a-162">Atribut `DataObjectMethodAttribute` označuje účel jednotlivých metod, zda je určena pro výběr, vložení, aktualizaci nebo odstranění a zda se jedná o výchozí hodnotu.</span><span class="sxs-lookup"><span data-stu-id="6801a-162">The `DataObjectMethodAttribute` attribute indicates the purpose of each method whether it is for selecting, inserting, updating, or deleting and whether or not it's the default value.</span></span> <span data-ttu-id="6801a-163">Pokud jste tyto atributy při vytváření tříd knihoven BLL vynechali, budete muset ručně vybrat metody z karet aktualizace, vložení a odstranění.</span><span class="sxs-lookup"><span data-stu-id="6801a-163">If you omitted these attributes when creating your BLL classes, you'll need to manually select the methods from the UPDATE, INSERT, and DELETE tabs.</span></span>

<span data-ttu-id="6801a-164">Po zajistěte, aby byly odpovídající metody `ProductsBLL` namapovány na `Insert()`, `Update()`a `Delete()` prvku ObjectDataSource, kliknutím na Dokončit dokončete průvodce.</span><span class="sxs-lookup"><span data-stu-id="6801a-164">After ensuring that the appropriate `ProductsBLL` methods are mapped to the ObjectDataSource's `Insert()`, `Update()`, and `Delete()` methods, click Finish to complete the wizard.</span></span>

## <a name="examining-the-objectdatasources-markup"></a><span data-ttu-id="6801a-165">Zkoumání značek ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="6801a-165">Examining the ObjectDataSource's Markup</span></span>

<span data-ttu-id="6801a-166">Po nakonfigurování prvku ObjectDataSource prostřednictvím Průvodce přejdete do zobrazení zdroje a Prohlédněte si vygenerované deklarativní označení.</span><span class="sxs-lookup"><span data-stu-id="6801a-166">After configuring the ObjectDataSource through its wizard, go to the Source view to examine the generated declarative markup.</span></span> <span data-ttu-id="6801a-167">Značka `<asp:ObjectDataSource>` určuje podkladový objekt a metody, které mají být vyvolány.</span><span class="sxs-lookup"><span data-stu-id="6801a-167">The `<asp:ObjectDataSource>` tag specifies the underlying object and the methods to invoke.</span></span> <span data-ttu-id="6801a-168">Kromě toho existují `DeleteParameters`, `UpdateParameters`a `InsertParameters`, které jsou mapovány na vstupní parametry pro `AddProduct`, `UpdateProduct`a `DeleteProduct` metody třídy `ProductsBLL`:</span><span class="sxs-lookup"><span data-stu-id="6801a-168">Additionally, there are `DeleteParameters`, `UpdateParameters`, and `InsertParameters` that map to the input parameters for the `ProductsBLL` class's `AddProduct`, `UpdateProduct`, and `DeleteProduct` methods:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-vb/samples/sample3.aspx)]

<span data-ttu-id="6801a-169">Prvek ObjectDataSource obsahuje parametr pro každý vstupní parametr pro jeho přidružené metody, stejně jako seznam `SelectParameter` s je přítomen, pokud je prvek ObjectDataSource nakonfigurován pro volání metody Select, která očekává vstupní parametr (například `GetProductsByCategoryID(categoryID)`).</span><span class="sxs-lookup"><span data-stu-id="6801a-169">The ObjectDataSource includes a parameter for each of the input parameters for its associated methods, just like a list of `SelectParameter` s is present when the ObjectDataSource is configured to call a select method that expects an input parameter (such as `GetProductsByCategoryID(categoryID)`).</span></span> <span data-ttu-id="6801a-170">Jak vidíte za chvilku, hodnoty pro tyto `DeleteParameters`, `UpdateParameters`a `InsertParameters` jsou nastaveny automaticky pomocí prvku GridView, DetailsView a FormView před vyvoláním metody `Insert()`, `Update()`nebo `Delete()` prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-170">As we'll see shortly, values for these `DeleteParameters`, `UpdateParameters`, and `InsertParameters` are set automatically by the GridView, DetailsView, and FormView prior to invoking the ObjectDataSource's `Insert()`, `Update()`, or `Delete()` method.</span></span> <span data-ttu-id="6801a-171">Tyto hodnoty se dají v budoucím kurzu nastavit i programově, protože budeme projednávat v budoucím kurzu.</span><span class="sxs-lookup"><span data-stu-id="6801a-171">These values can also be set programmatically as needed, as we'll discuss in a future tutorial.</span></span>

<span data-ttu-id="6801a-172">Jedním z vedlejších účinků použití Průvodce pro konfiguraci na prvek ObjectDataSource je, že sada Visual Studio nastavuje [vlastnost OldValuesParameterFormatString na hodnotu](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.oldvaluesparameterformatstring(VS.80).aspx) `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="6801a-172">One side effect of using the wizard to configure to ObjectDataSource is that Visual Studio sets the [OldValuesParameterFormatString property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.oldvaluesparameterformatstring(VS.80).aspx) to `original_{0}`.</span></span> <span data-ttu-id="6801a-173">Tato hodnota vlastnosti slouží k zahrnutí původních hodnot upravovaných dat a je užitečná ve dvou scénářích:</span><span class="sxs-lookup"><span data-stu-id="6801a-173">This property value is used to include the original values of the data being edited and is useful in two scenarios:</span></span>

- <span data-ttu-id="6801a-174">Pokud při úpravách záznamu může uživatel změnit hodnotu primárního klíče.</span><span class="sxs-lookup"><span data-stu-id="6801a-174">If, when editing a record, users are able to change the primary key value.</span></span> <span data-ttu-id="6801a-175">V takovém případě je nutné zadat jak novou hodnotu primárního klíče, tak původní hodnotu primárního klíče, aby se mohl najít záznam s původní hodnotou primárního klíče a odpovídajícím způsobem aktualizovat jeho hodnotu.</span><span class="sxs-lookup"><span data-stu-id="6801a-175">In this case, both the new primary key value and the original primary key value must be provided so that the record with the original primary key value can be found and have its value updated accordingly.</span></span>
- <span data-ttu-id="6801a-176">Při použití optimistické souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="6801a-176">When using optimistic concurrency.</span></span> <span data-ttu-id="6801a-177">Optimistická souběžnost je technika, která zajistí, že dva souběžní uživatelé nepřepisují jiné změny, a je téma pro budoucí kurz.</span><span class="sxs-lookup"><span data-stu-id="6801a-177">Optimistic concurrency is a technique to ensure that two simultaneous users don't overwrite one another's changes, and is the topic for a future tutorial.</span></span>

<span data-ttu-id="6801a-178">Vlastnost `OldValuesParameterFormatString` označuje název vstupních parametrů v metodách aktualizace a odstranění podkladového objektu pro původní hodnoty.</span><span class="sxs-lookup"><span data-stu-id="6801a-178">The `OldValuesParameterFormatString` property indicates the name of the input parameters in the underlying object's update and delete methods for the original values.</span></span> <span data-ttu-id="6801a-179">Tuto vlastnost a její účel podíváme podrobněji, když prozkoumáme optimistickou souběžnost.</span><span class="sxs-lookup"><span data-stu-id="6801a-179">We'll discuss this property and its purpose in greater detail when we explore optimistic concurrency.</span></span> <span data-ttu-id="6801a-180">Dá se to ale udělat, protože naše knihoven BLL metody neočekávají původní hodnoty, takže je důležité, abyste tuto vlastnost odstranili.</span><span class="sxs-lookup"><span data-stu-id="6801a-180">I bring it up now, however, because our BLL's methods do not expect the original values and therefore it's important that we remove this property.</span></span> <span data-ttu-id="6801a-181">Ponecháním vlastnosti `OldValuesParameterFormatString` nastavenou na jinou hodnotu než výchozí (`{0}`) dojde k chybě, když se webový ovládací prvek data pokusí vyvolat `Update()` nebo `Delete()` metody prvku ObjectDataSource, protože prvek ObjectDataSource se pokusí předat jak v `UpdateParameters`, tak i `DeleteParameters`, tak i v parametrech původní hodnoty.</span><span class="sxs-lookup"><span data-stu-id="6801a-181">Leaving the `OldValuesParameterFormatString` property set to anything other than the default (`{0}`) will cause an error when a data Web control attempts to invoke the ObjectDataSource's `Update()` or `Delete()` methods because the ObjectDataSource will attempt to pass in both the `UpdateParameters` or `DeleteParameters` specified as well as original value parameters.</span></span>

<span data-ttu-id="6801a-182">Pokud se to v tomto situaci vážně selhalo jasně, nedělejte si starosti, tato vlastnost a její nástroj se podíváme v budoucím kurzu.</span><span class="sxs-lookup"><span data-stu-id="6801a-182">If this isn't terribly clear at this juncture, don't worry, we'll examine this property and its utility in a future tutorial.</span></span> <span data-ttu-id="6801a-183">Prozatím je třeba určit, že se má tato deklarace vlastnosti odebrat zcela z deklarativní syntaxe, nebo nastavit hodnotu na výchozí hodnotu ({0}).</span><span class="sxs-lookup"><span data-stu-id="6801a-183">For now, just be certain to either remove this property declaration entirely from the declarative syntax or set the value to the default value ({0}).</span></span>

> [!NOTE]
> <span data-ttu-id="6801a-184">Pokud jednoduše vymažete hodnotu vlastnosti `OldValuesParameterFormatString` z okno Vlastnosti ve zobrazení Návrh, bude vlastnost stále existovat v deklarativní syntaxi, ale musí být nastavena na prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="6801a-184">If you simply clear out the `OldValuesParameterFormatString` property value from the Properties window in the Design view, the property will still exist in the declarative syntax, but be set to an empty string.</span></span> <span data-ttu-id="6801a-185">To bohužel pořád vede ke stejnému problému, který je popsaný výše.</span><span class="sxs-lookup"><span data-stu-id="6801a-185">This, unfortunately, will still result in the same problem discussed above.</span></span> <span data-ttu-id="6801a-186">Proto buď odeberte vlastnost zcela z deklarativní syntaxe nebo z okno Vlastnosti nastavte výchozí hodnotu `{0}`.</span><span class="sxs-lookup"><span data-stu-id="6801a-186">Therefore, either remove the property altogether from the declarative syntax or, from the Properties window, set the value to the default, `{0}`.</span></span>

## <a name="step-3-adding-a-data-web-control-and-configuring-it-for-data-modification"></a><span data-ttu-id="6801a-187">Krok 3: Přidání webového ovládacího prvku data a jeho konfigurace pro úpravu dat</span><span class="sxs-lookup"><span data-stu-id="6801a-187">Step 3: Adding a Data Web Control and Configuring It for Data Modification</span></span>

<span data-ttu-id="6801a-188">Po přidání ovládacího prvku ObjectDataSource na stránku a nakonfigurovaném na stránce jsme připraveni přidat data webové ovládací prvky do stránky, jak budou zobrazovat data, a poskytnout tak pro koncové uživatele prostředky pro jeho úpravu.</span><span class="sxs-lookup"><span data-stu-id="6801a-188">Once the ObjectDataSource has been added to the page and configured, we're ready to add data Web controls to the page to both display the data and provide a means for the end user to modify it.</span></span> <span data-ttu-id="6801a-189">Podíváme se na prvky GridView, DetailsView a FormView samostatně, protože se tyto webové ovládací prvky dat liší v možnosti úprav dat a konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="6801a-189">We'll look at the GridView, DetailsView, and FormView separately, as these data Web controls differ in their data modification capabilities and configuration.</span></span>

<span data-ttu-id="6801a-190">Jak je uvedeno ve zbývající části tohoto článku, přidávání velmi základních úprav, vkládání a odstraňování podpory prostřednictvím ovládacích prvků GridView, DetailsView a FormView je skutečně jednoduché jako kontrola několika zaškrtávacích políček.</span><span class="sxs-lookup"><span data-stu-id="6801a-190">As we'll see in the remainder of this article, adding very basic editing, inserting, and deleting support through the GridView, DetailsView, and FormView controls is really as simple as checking a couple of checkboxes.</span></span> <span data-ttu-id="6801a-191">V reálném světě existuje mnoho odlišnostích a okrajových případů, které poskytují více funkcí, než stačí Ukázat a klikní.</span><span class="sxs-lookup"><span data-stu-id="6801a-191">There are many subtleties and edge cases in the real-world that make providing such functionality more involved than just point and click.</span></span> <span data-ttu-id="6801a-192">Tento kurz se ale zaměřuje výhradně na prokázání možností změny dat zjednodušený.</span><span class="sxs-lookup"><span data-stu-id="6801a-192">This tutorial, however, focuses solely on proving simplistic data modification capabilities.</span></span> <span data-ttu-id="6801a-193">V budoucích kurzech se budou posuzovat obavy, které se projeví v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="6801a-193">Future tutorials will examine concerns that will undoubtedly arise in a real-world setting.</span></span>

## <a name="deleting-data-from-the-gridview"></a><span data-ttu-id="6801a-194">Odstranění dat z prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-194">Deleting Data from the GridView</span></span>

<span data-ttu-id="6801a-195">Začněte přetažením prvku GridView z panelu nástrojů do návrháře.</span><span class="sxs-lookup"><span data-stu-id="6801a-195">Start by dragging a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="6801a-196">Dále navažte prvek ObjectDataSource na prvek GridView tím, že ho vyberete z rozevíracího seznamu v inteligentní značce prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-196">Next, bind the ObjectDataSource to the GridView by selecting it from the drop-down list in the GridView's smart tag.</span></span> <span data-ttu-id="6801a-197">V tomto okamžiku deklarativní označení ovládacího prvku GridView bude:</span><span class="sxs-lookup"><span data-stu-id="6801a-197">At this point the GridView's declarative markup will be:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-vb/samples/sample4.aspx)]

<span data-ttu-id="6801a-198">Svázání prvku GridView s ovládacím prvkem ObjectDataSource prostřednictvím inteligentní značky má dvě výhody:</span><span class="sxs-lookup"><span data-stu-id="6801a-198">Binding the GridView to the ObjectDataSource through its smart tag has two benefits:</span></span>

- <span data-ttu-id="6801a-199">BoundFields a CheckBoxFields jsou automaticky vytvořeny pro každé pole vrácené prvkem ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-199">BoundFields and CheckBoxFields are automatically created for each of the fields returned by the ObjectDataSource.</span></span> <span data-ttu-id="6801a-200">Kromě toho jsou vlastnosti vlastnost BoundField a třídě CheckBoxField podporována nastaveny na základě metadat podkladového pole.</span><span class="sxs-lookup"><span data-stu-id="6801a-200">Moreover, the BoundField and CheckBoxField's properties are set based on the underlying field's metadata.</span></span> <span data-ttu-id="6801a-201">Například pole `ProductID`, `CategoryName`a `SupplierName` jsou v `ProductsDataTable` označena jako jen pro čtení, která by proto neměla být při úpravách aktualizovatelná.</span><span class="sxs-lookup"><span data-stu-id="6801a-201">For example, the `ProductID`, `CategoryName`, and `SupplierName` fields are marked as read-only in the `ProductsDataTable` and therefore shouldn't be updatable when editing.</span></span> <span data-ttu-id="6801a-202">Aby to bylo možné, tyto vlastnosti BoundFields ' [ReadOnly](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.readonly(VS.80).aspx) jsou nastaveny na `True`.</span><span class="sxs-lookup"><span data-stu-id="6801a-202">To accommodate this, these BoundFields' [ReadOnly properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.readonly(VS.80).aspx) are set to `True`.</span></span>
- <span data-ttu-id="6801a-203">[Vlastnost DataKeyNames](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames(VS.80).aspx) je přiřazena k primárním klíčovým polím (y) podkladového objektu.</span><span class="sxs-lookup"><span data-stu-id="6801a-203">The [DataKeyNames property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames(VS.80).aspx) is assigned to the primary key field(s) of the underlying object.</span></span> <span data-ttu-id="6801a-204">To je nezbytné při použití prvku GridView pro úpravu nebo odstranění dat, protože tato vlastnost označuje pole (nebo sadu polí), které jedinečný identifikuje každý záznam.</span><span class="sxs-lookup"><span data-stu-id="6801a-204">This is essential when using the GridView for editing or deleting data, as this property indicates the field (or set of fields) that unique identifies each record.</span></span> <span data-ttu-id="6801a-205">Další informace o vlastnosti `DataKeyNames` naleznete v tématu návrat k [hlavnímu a podrobnému odkazu pomocí selektivního hlavního prvku GridView s podrobnostmi o prvku detailview](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="6801a-205">For more information on the `DataKeyNames` property, refer back to the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial.</span></span>

<span data-ttu-id="6801a-206">I když prvek GridView může být svázán s prvkem ObjectDataSource prostřednictvím okno Vlastnosti nebo deklarativní syntaxe, je třeba ručně přidat odpovídající kód pro vlastnost BoundField a `DataKeyNames`.</span><span class="sxs-lookup"><span data-stu-id="6801a-206">While the GridView can be bound to the ObjectDataSource through the Properties window or declarative syntax, doing so requires you to manually add the appropriate BoundField and `DataKeyNames` markup.</span></span>

<span data-ttu-id="6801a-207">Ovládací prvek GridView nabízí integrovanou podporu pro úpravy a odstranění na úrovni řádků.</span><span class="sxs-lookup"><span data-stu-id="6801a-207">The GridView control provides built-in support for row-level editing and deleting.</span></span> <span data-ttu-id="6801a-208">Konfigurace prvku GridView, aby podporovala odstranění, přidává sloupec odstranění tlačítek.</span><span class="sxs-lookup"><span data-stu-id="6801a-208">Configuring a GridView to support deleting adds a column of Delete buttons.</span></span> <span data-ttu-id="6801a-209">Když koncový uživatel klikne na tlačítko Odstranit pro určitý řádek, postback provede a prvek GridView provede následující kroky:</span><span class="sxs-lookup"><span data-stu-id="6801a-209">When the end user clicks the Delete button for a particular row, a postback ensues and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="6801a-210">Přiřadí se hodnoty `DeleteParameters` prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-210">The ObjectDataSource's `DeleteParameters` value(s) are assigned</span></span>
2. <span data-ttu-id="6801a-211">Je vyvolána metoda `Delete()` prvku ObjectDataSource a odstraní se zadaný záznam.</span><span class="sxs-lookup"><span data-stu-id="6801a-211">The ObjectDataSource's `Delete()` method is invoked, deleting the specified record</span></span>
3. <span data-ttu-id="6801a-212">Prvek GridView se znovu sváže s ovládacím prvkem ObjectDataSource vyvoláním jeho `Select()` metody.</span><span class="sxs-lookup"><span data-stu-id="6801a-212">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>

<span data-ttu-id="6801a-213">Hodnoty přiřazené k `DeleteParameters` jsou hodnoty polí `DataKeyNames` pro řádek, na kterém bylo tlačítko Odstranit.</span><span class="sxs-lookup"><span data-stu-id="6801a-213">The values assigned to the `DeleteParameters` are the values of the `DataKeyNames` field(s) for the row whose Delete button was clicked.</span></span> <span data-ttu-id="6801a-214">Proto je důležité, aby byla správně nastavena vlastnost `DataKeyNames` prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-214">Therefore it's vital that a GridView's `DataKeyNames` property be correctly set.</span></span> <span data-ttu-id="6801a-215">Pokud chybí, `DeleteParameters` se mu v kroku 1 přiřadí hodnota `Nothing`, která naopak v kroku 2 nevytvoří žádné odstraněné záznamy.</span><span class="sxs-lookup"><span data-stu-id="6801a-215">If it's missing, the `DeleteParameters` will be assigned a value of `Nothing` in Step 1, which in turn will not result in any deleted records in Step 2.</span></span>

> [!NOTE]
> <span data-ttu-id="6801a-216">Kolekce `DataKeys` je uložena ve stavu ovládacího prvku GridView s, což znamená, že hodnoty `DataKeys` budou zapamatovatný v rámci postbacku i v případě, že je stav zobrazení GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-216">The `DataKeys` collection is stored in the GridView s control state, meaning that the `DataKeys` values will be remembered across postback even if the GridView s view state has been disabled.</span></span> <span data-ttu-id="6801a-217">Je však velmi důležité, aby stav zobrazení zůstal povolen pro GridViews, které podporují úpravy nebo odstranění (výchozí chování).</span><span class="sxs-lookup"><span data-stu-id="6801a-217">However, it is very important that view state remains enabled for GridViews that support editing or deleting (the default behavior).</span></span> <span data-ttu-id="6801a-218">Pokud nastavíte vlastnost `EnableViewState` prvku GridView s na `false`, bude chování při úpravách a odstraňování fungovat pro jednoho uživatele, ale pokud existují souběžní uživatelé, kteří odstraňují data, existuje možnost, že tyto souběžní uživatelé mohou omylem odstranit nebo upravit záznamy, které nechtěly.</span><span class="sxs-lookup"><span data-stu-id="6801a-218">If you set the GridView s `EnableViewState` property to `false`, the editing and deleting behavior will work fine for a single user, but if there are concurrent users deleting data, there exists the possibility that these concurrent users may accidentally delete or edit records that they didn't intend.</span></span> <span data-ttu-id="6801a-219">Další informace najdete v tématu moje položka blogu, [Upozornění: problémy s Concurrency s ASP.NET 2,0 gridviews/DetailsView/formviews, které podporují úpravy a/nebo odstraňování a jejichž stav zobrazení je zakázaný](http://scottonwriting.net/sowblog/posts/10054.aspx).</span><span class="sxs-lookup"><span data-stu-id="6801a-219">See my blog entry, [WARNING: Concurrency Issue with ASP.NET 2.0 GridViews/DetailsView/FormViews that Support Editing and/or Deleting and Whose View State is Disabled](http://scottonwriting.net/sowblog/posts/10054.aspx), for more information.</span></span>

<span data-ttu-id="6801a-220">Stejné upozornění platí také pro ovládací prvek DetailsView a FormView.</span><span class="sxs-lookup"><span data-stu-id="6801a-220">This same warning also applies to DetailsViews and FormViews.</span></span>

<span data-ttu-id="6801a-221">Chcete-li přidat možnosti odstranění do prvku GridView, stačí přejít na jeho inteligentní značku a zaškrtnout políčko Povolit odstranění.</span><span class="sxs-lookup"><span data-stu-id="6801a-221">To add deleting capabilities to a GridView, simply go to its smart tag and check the Enable Deleting checkbox.</span></span>

![Zaškrtněte políčko Povolit odstranění.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image24.png)

<span data-ttu-id="6801a-223">**Obrázek 10**: zaškrtněte políčko Povolit odstranění.</span><span class="sxs-lookup"><span data-stu-id="6801a-223">**Figure 10**: Check the Enable Deleting Checkbox</span></span>

<span data-ttu-id="6801a-224">Zaškrtnutí políčka Povolit odstranění z inteligentní značky přidá do prvku GridView (CommandField).</span><span class="sxs-lookup"><span data-stu-id="6801a-224">Checking the Enable Deleting checkbox from the smart tag adds a CommandField to the GridView.</span></span> <span data-ttu-id="6801a-225">CommandField vykreslí sloupec v prvku GridView pomocí tlačítek pro provádění jednoho nebo více z následujících úkolů: výběr záznamu, úprava záznamu a odstranění záznamu.</span><span class="sxs-lookup"><span data-stu-id="6801a-225">The CommandField renders a column in the GridView with buttons for performing one or more of the following tasks: selecting a record, editing a record, and deleting a record.</span></span> <span data-ttu-id="6801a-226">Dříve jsme viděli CommandField v akci s výběrem záznamů v seznamu [hlavní a podrobnosti pomocí selektivního hlavního prvku GridView s podrobným](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) kurzem prvku detailview.</span><span class="sxs-lookup"><span data-stu-id="6801a-226">We previously saw the CommandField in action with selecting records in the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial.</span></span>

<span data-ttu-id="6801a-227">CommandField obsahuje řadu vlastností `ShowXButton`, které určují, jaké série tlačítek se zobrazí v CommandField.</span><span class="sxs-lookup"><span data-stu-id="6801a-227">The CommandField contains a number of `ShowXButton` properties that indicate what series of buttons are displayed in the CommandField.</span></span> <span data-ttu-id="6801a-228">Zaškrtnutím políčka Povolit odstranění je CommandField, jehož vlastnost `ShowDeleteButton` je `True` přidána do kolekce sloupců prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-228">By checking the Enable Deleting checkbox a CommandField whose `ShowDeleteButton` property is `True` has been added to the GridView's Columns collection.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-vb/samples/sample5.aspx)]

<span data-ttu-id="6801a-229">V tomto okamžiku se domníváte, že je, nebo ne, jsme hotovi s přidáním podpory odstranění do prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-229">At this point, believe it or not, we're done with adding deleting support to the GridView!</span></span> <span data-ttu-id="6801a-230">Jak ukazuje obrázek 11, při návštěvě této stránky v prohlížeči se zobrazí sloupec s tlačítky pro odstranění.</span><span class="sxs-lookup"><span data-stu-id="6801a-230">As Figure 11 shows, when visiting this page through a browser a column of Delete buttons is present.</span></span>

<span data-ttu-id="6801a-231">[![CommandField přidá sloupec tlačítek pro odstranění.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image26.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-231">[![The CommandField Adds a Column of Delete Buttons](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image26.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image25.png)</span></span>

<span data-ttu-id="6801a-232">**Obrázek 11**: CommandField přidá sloupec tlačítek pro odstranění ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image27.png)).</span><span class="sxs-lookup"><span data-stu-id="6801a-232">**Figure 11**: The CommandField Adds a Column of Delete Buttons ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image27.png))</span></span>

<span data-ttu-id="6801a-233">Pokud jste tento kurz sestavili od sebe na vlastní, při testování této stránky klikněte na tlačítko Odstranit a vyvolá se výjimka.</span><span class="sxs-lookup"><span data-stu-id="6801a-233">If you've been building this tutorial from the ground up on your own, when testing this page clicking the Delete button will raise an exception.</span></span> <span data-ttu-id="6801a-234">Pokračujte ve čtení, abyste se dozvěděli, proč byly tyto výjimky vyvolány a jak je opravit.</span><span class="sxs-lookup"><span data-stu-id="6801a-234">Continue reading to learn as to why these exceptions were raised and how to fix them.</span></span>

> [!NOTE]
> <span data-ttu-id="6801a-235">Pokud sledujete pomocí stahování, které je přiloženo v tomto kurzu, již byly tyto problémy pro.</span><span class="sxs-lookup"><span data-stu-id="6801a-235">If you're following along using the download accompanying this tutorial, these problems have already been accounted for.</span></span> <span data-ttu-id="6801a-236">Doporučujeme si ale přečíst si níže uvedené podrobnosti, které vám pomůžou identifikovat problémy, které mohou nastat, a vhodná alternativní řešení.</span><span class="sxs-lookup"><span data-stu-id="6801a-236">However, I encourage you to read through the details listed below to help identify problems that may arise and suitable workarounds.</span></span>

<span data-ttu-id="6801a-237">Pokud při pokusu o odstranění produktu dojde k výjimce, jejíž zpráva je podobná řetězci "*ObjectDataSource" ObjectDataSource1 nebylo možné najít neobecnou metodu "DeleteProduct", která má parametry: ProductID, původní\_ProductID*, "pravděpodobně jste zapomněli odebrat vlastnost `OldValuesParameterFormatString` z prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-237">If, when attempting to delete a product, you get an exception whose message is similar to "*ObjectDataSource 'ObjectDataSource1' could not find a non-generic method 'DeleteProduct' that has parameters: productID, original\_ProductID*," you likely forgot to remove the `OldValuesParameterFormatString` property from the ObjectDataSource.</span></span> <span data-ttu-id="6801a-238">Při zadání vlastnosti `OldValuesParameterFormatString` se prvek ObjectDataSource pokusí předat vstupní parametry `productID` a `original_ProductID` do metody `DeleteProduct`.</span><span class="sxs-lookup"><span data-stu-id="6801a-238">With the `OldValuesParameterFormatString` property specified, the ObjectDataSource attempts to pass in both `productID` and `original_ProductID` input parameters to the `DeleteProduct` method.</span></span> <span data-ttu-id="6801a-239">`DeleteProduct`však akceptuje pouze jeden vstupní parametr, a proto výjimku.</span><span class="sxs-lookup"><span data-stu-id="6801a-239">`DeleteProduct`, however, only accepts a single input parameter, hence the exception.</span></span> <span data-ttu-id="6801a-240">Odebrání vlastnosti `OldValuesParameterFormatString` (nebo její nastavení na `{0}`) instruuje prvek ObjectDataSource, aby se nepokoušel předat původní vstupní parametr.</span><span class="sxs-lookup"><span data-stu-id="6801a-240">Removing the `OldValuesParameterFormatString` property (or setting it to `{0}`) instructs the ObjectDataSource to not attempt to pass in the original input parameter.</span></span>

<span data-ttu-id="6801a-241">[![zajistěte, aby byla vlastnost OldValuesParameterFormatString vyčištěna.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image29.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-241">[![Ensure That the OldValuesParameterFormatString Property Has Been Cleared Out](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image29.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image28.png)</span></span>

<span data-ttu-id="6801a-242">**Obrázek 12**: Ujistěte se, že se vlastnost `OldValuesParameterFormatString` vymazala ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-242">**Figure 12**: Ensure That the `OldValuesParameterFormatString` Property Has Been Cleared Out ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image30.png))</span></span>

<span data-ttu-id="6801a-243">I když jste odebrali vlastnost `OldValuesParameterFormatString`, při pokusu o odstranění produktu s touto zprávou se stále zobrazí výjimka:*příkaz DELETE koliduje s omezením reference ' FK\_Order\_details\_Products*). Databáze Northwind obsahuje omezení cizího klíče mezi `Order Details` a `Products` tabulce, což znamená, že produkt nelze odstranit ze systému, pokud pro něj existuje jeden nebo více záznamů v tabulce `Order Details`.</span><span class="sxs-lookup"><span data-stu-id="6801a-243">Even if you had removed the `OldValuesParameterFormatString` property, you still will get an exception when trying to delete a product with the message: "*The DELETE statement conflicted with the REFERENCE constraint 'FK\_Order\_Details\_Products'*." The Northwind database contains a foreign key constraint between the `Order Details` and `Products` table, meaning that a product cannot be deleted from the system if there are one or more records for it in the `Order Details` table.</span></span> <span data-ttu-id="6801a-244">Vzhledem k tomu, že každý produkt v databázi Northwind obsahuje minimálně jeden záznam v `Order Details`, nemůžeme odstranit žádné produkty, dokud neodstraníme záznamy s přidruženými objednávkami daného produktu.</span><span class="sxs-lookup"><span data-stu-id="6801a-244">Since every product in the Northwind database has at least one record in `Order Details`, we cannot delete any products until we first delete the product's associated order details records.</span></span>

<span data-ttu-id="6801a-245">[![omezení cizího klíče zakáže odstraňování produktů.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image32.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-245">[![A Foreign Key Constraint Prohibits the Deletion of Products](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image32.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image31.png)</span></span>

<span data-ttu-id="6801a-246">**Obrázek 13**: omezení cizího klíče znemožňuje odstranění produktů ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image33.png)).</span><span class="sxs-lookup"><span data-stu-id="6801a-246">**Figure 13**: A Foreign Key Constraint Prohibits the Deletion of Products ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image33.png))</span></span>

<span data-ttu-id="6801a-247">Pro náš kurz můžeme jednoduše odstranit všechny záznamy z `Order Details` tabulky.</span><span class="sxs-lookup"><span data-stu-id="6801a-247">For our tutorial, let's just delete all of the records from the `Order Details` table.</span></span> <span data-ttu-id="6801a-248">V reálné aplikaci budeme potřebovat:</span><span class="sxs-lookup"><span data-stu-id="6801a-248">In a real-world application we'd need to either:</span></span>

- <span data-ttu-id="6801a-249">Mít další obrazovku pro správu informací o objednávkách.</span><span class="sxs-lookup"><span data-stu-id="6801a-249">Have another screen to manage order details information</span></span>
- <span data-ttu-id="6801a-250">Rozšiřte metodu `DeleteProduct` tak, aby zahrnovala logiku pro odstranění podrobností o objednávce zadaného produktu.</span><span class="sxs-lookup"><span data-stu-id="6801a-250">Augment the `DeleteProduct` method to include logic to delete the specified product's order details</span></span>
- <span data-ttu-id="6801a-251">Upravte dotaz SQL používaný TableAdapter, aby zahrnoval odstranění podrobností o objednávce zadaného produktu.</span><span class="sxs-lookup"><span data-stu-id="6801a-251">Modify the SQL query used by the TableAdapter to include deletion of the specified product's order details</span></span>

<span data-ttu-id="6801a-252">Pojďme jenom odstranit všechny záznamy z tabulky `Order Details`, abyste obcházeli omezení cizího klíče.</span><span class="sxs-lookup"><span data-stu-id="6801a-252">Let's just delete all of the records from the `Order Details` table to circumvent the foreign key constraint.</span></span> <span data-ttu-id="6801a-253">Přejděte na Průzkumník serveru v aplikaci Visual Studio, klikněte pravým tlačítkem na uzel `NORTHWND.MDF` a vyberte nový dotaz.</span><span class="sxs-lookup"><span data-stu-id="6801a-253">Go to the Server Explorer in Visual Studio, right-click on the `NORTHWND.MDF` node, and choose New Query.</span></span> <span data-ttu-id="6801a-254">Pak v okně dotazu spusťte následující příkaz SQL: `DELETE FROM [Order Details]`</span><span class="sxs-lookup"><span data-stu-id="6801a-254">Then, in the query window, run the following SQL statement: `DELETE FROM [Order Details]`</span></span>

<span data-ttu-id="6801a-255">[![odstranit všechny záznamy z tabulky Order details](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image35.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-255">[![Delete All Records from the Order Details Table](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image35.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image34.png)</span></span>

<span data-ttu-id="6801a-256">**Obrázek 14**: odstranění všech záznamů z `Order Details` tabulky ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="6801a-256">**Figure 14**: Delete All Records from the `Order Details` Table ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image36.png))</span></span>

<span data-ttu-id="6801a-257">Po vymazání `Order Details` tabulky klikněte na tlačítko Odstranit a produkt se odstraní bez chyby.</span><span class="sxs-lookup"><span data-stu-id="6801a-257">After clearing out the `Order Details` table clicking on the Delete button will delete the product without error.</span></span> <span data-ttu-id="6801a-258">Pokud při kliknutí na tlačítko Odstranit produkt neodstraníte, zkontrolujte, zda je vlastnost `DataKeyNames` prvku GridView nastavena na pole primárního klíče (`ProductID`).</span><span class="sxs-lookup"><span data-stu-id="6801a-258">If clicking on the Delete button does not delete the product, check to ensure that the GridView's `DataKeyNames` property is set to the primary key field (`ProductID`).</span></span>

> [!NOTE]
> <span data-ttu-id="6801a-259">Když kliknete na tlačítko Odstranit, vystavení se odstraní a záznam se odstraní.</span><span class="sxs-lookup"><span data-stu-id="6801a-259">When clicking on the Delete button a postback ensues and the record is deleted.</span></span> <span data-ttu-id="6801a-260">To může být nebezpečné, protože je snadné omylem kliknout na tlačítko Odstranit nesprávný řádek.</span><span class="sxs-lookup"><span data-stu-id="6801a-260">This can be dangerous since it is easy to accidentally click on the wrong row's Delete button.</span></span> <span data-ttu-id="6801a-261">V budoucím kurzu se dozvíte, jak přidat potvrzení na straně klienta při odstraňování záznamu.</span><span class="sxs-lookup"><span data-stu-id="6801a-261">In a future tutorial we'll see how to add a client-side confirmation when deleting a record.</span></span>

## <a name="editing-data-with-the-gridview"></a><span data-ttu-id="6801a-262">Úprava dat pomocí prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-262">Editing Data with the GridView</span></span>

<span data-ttu-id="6801a-263">Kromě odstranění poskytuje ovládací prvek GridView také integrovanou podporu pro úpravy na úrovni řádků.</span><span class="sxs-lookup"><span data-stu-id="6801a-263">Along with deleting, the GridView control also provides built-in row-level editing support.</span></span> <span data-ttu-id="6801a-264">Konfigurace prvku GridView pro podporu úprav přidá sloupec editačních tlačítek.</span><span class="sxs-lookup"><span data-stu-id="6801a-264">Configuring a GridView to support editing adds a column of Edit buttons.</span></span> <span data-ttu-id="6801a-265">V perspektivě koncového uživatele způsobí kliknutí na tlačítko pro úpravy řádku, aby se řádek stal upravitelný, přepnuli buňky do textových polí, které obsahují existující hodnoty, a nahradí tlačítko Upravit tlačítky aktualizovat a zrušit.</span><span class="sxs-lookup"><span data-stu-id="6801a-265">From the end user's perspective, clicking a row's Edit button causes that row to become editable, turning the cells into textboxes containing the existing values and replacing the Edit button with Update and Cancel buttons.</span></span> <span data-ttu-id="6801a-266">Po provedení požadovaných změn může koncový uživatel kliknout na tlačítko Aktualizovat a potvrdit změny nebo tlačítko Storno, které je zahodí.</span><span class="sxs-lookup"><span data-stu-id="6801a-266">After making their desired changes, the end user can click the Update button to commit the changes or the Cancel button to discard them.</span></span> <span data-ttu-id="6801a-267">V obou případech po kliknutí na aktualizovat nebo zrušit se prvek GridView vrátí do stavu před úpravou.</span><span class="sxs-lookup"><span data-stu-id="6801a-267">In either case, after clicking Update or Cancel the GridView returns to its pre-editing state.</span></span>

<span data-ttu-id="6801a-268">V naší perspektivě jako vývojář stránky, když koncový uživatel klikne na tlačítko pro úpravy pro určitý řádek, postback provede a prvek GridView provede následující kroky:</span><span class="sxs-lookup"><span data-stu-id="6801a-268">From our perspective as the page developer, when the end user clicks the Edit button for a particular row, a postback ensues and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="6801a-269">Vlastnost `EditItemIndex` prvku GridView je přiřazena k indexu řádku, jehož tlačítko pro úpravy bylo kliknuto.</span><span class="sxs-lookup"><span data-stu-id="6801a-269">The GridView's `EditItemIndex` property is assigned to the index of the row whose Edit button was clicked</span></span>
2. <span data-ttu-id="6801a-270">Prvek GridView se znovu sváže s ovládacím prvkem ObjectDataSource vyvoláním jeho `Select()` metody.</span><span class="sxs-lookup"><span data-stu-id="6801a-270">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>
3. <span data-ttu-id="6801a-271">Index řádku, který se shoduje s `EditItemIndex` je vykreslený v režimu úprav.</span><span class="sxs-lookup"><span data-stu-id="6801a-271">The row index that matches the `EditItemIndex` is rendered in "edit mode."</span></span> <span data-ttu-id="6801a-272">V tomto režimu je tlačítko Upravit nahrazeno tlačítky aktualizovat a zrušit a BoundFields, jejichž vlastnosti `ReadOnly` jsou false (výchozí) se vykreslují jako webové ovládací prvky TextBox, jejichž `Text` vlastnosti jsou přiřazeny hodnotám datových polí.</span><span class="sxs-lookup"><span data-stu-id="6801a-272">In this mode, the Edit button is replaced by Update and Cancel buttons and BoundFields whose `ReadOnly` properties are False (the default) are rendered as TextBox Web controls whose `Text` properties are assigned to the data fields' values.</span></span>

<span data-ttu-id="6801a-273">V tomto okamžiku je kód vrácen do prohlížeče, což umožňuje koncovému uživateli provádět změny dat v řádku.</span><span class="sxs-lookup"><span data-stu-id="6801a-273">At this point the markup is returned to the browser, allowing the end user to make any changes to the row's data.</span></span> <span data-ttu-id="6801a-274">Když uživatel klikne na tlačítko Aktualizovat, dojde k postbacku a prvek GridView provede následující kroky:</span><span class="sxs-lookup"><span data-stu-id="6801a-274">When the user clicks the Update button, a postback occurs and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="6801a-275">Hodnotám `UpdateParameters` prvku ObjectDataSource jsou přiřazeny hodnoty zadané koncovým uživatelem do rozhraní pro úpravy ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-275">The ObjectDataSource's `UpdateParameters` value(s) are assigned the values entered by the end user into the GridView's editing interface</span></span>
2. <span data-ttu-id="6801a-276">Je vyvolána metoda `Update()` prvku ObjectDataSource, aktualizace zadaného záznamu</span><span class="sxs-lookup"><span data-stu-id="6801a-276">The ObjectDataSource's `Update()` method is invoked, updating the specified record</span></span>
3. <span data-ttu-id="6801a-277">Prvek GridView se znovu sváže s ovládacím prvkem ObjectDataSource vyvoláním jeho `Select()` metody.</span><span class="sxs-lookup"><span data-stu-id="6801a-277">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>

<span data-ttu-id="6801a-278">Hodnoty primárního klíče přiřazené `UpdateParameters` v kroku 1 pocházejí z hodnot zadaných ve vlastnosti `DataKeyNames`, zatímco hodnoty neprimárních klíčů pocházejí z textu ve webových ovládacích prvcích TextBox pro upravený řádek.</span><span class="sxs-lookup"><span data-stu-id="6801a-278">The primary key values assigned to the `UpdateParameters` in Step 1 come from the values specified in the `DataKeyNames` property, whereas the non-primary key values come from the text in the TextBox Web controls for the edited row.</span></span> <span data-ttu-id="6801a-279">Stejně jako při odstraňování je důležité, aby byla správně nastavena vlastnost `DataKeyNames` prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-279">As with deleting, it is vital that a GridView's `DataKeyNames` property be correctly set.</span></span> <span data-ttu-id="6801a-280">Pokud chybí, hodnota `UpdateParameters` primární klíč se mu v kroku 1 přiřadí hodnota `Nothing`, která zase nebude mít za následek aktualizované záznamy v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="6801a-280">If it's missing, the `UpdateParameters` primary key value will be assigned a value of `Nothing` in Step 1, which in turn will not result in any updated records in Step 2.</span></span>

<span data-ttu-id="6801a-281">Funkčnost úprav se dá aktivovat pouhým zaškrtnutím políčka Povolit úpravy v inteligentní značce ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-281">Editing functionality can be activated by simply checking the Enable Editing checkbox in the GridView's smart tag.</span></span>

![Zaškrtněte políčko Povolit úpravy.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image37.png)

<span data-ttu-id="6801a-283">**Obrázek 15**: zaškrtněte políčko Povolit úpravy.</span><span class="sxs-lookup"><span data-stu-id="6801a-283">**Figure 15**: Check the Enable Editing Checkbox</span></span>

<span data-ttu-id="6801a-284">Zaškrtnutím políčka Povolit úpravy přidáte CommandField (v případě potřeby) a nastavíte jeho vlastnost `ShowEditButton` na `True`.</span><span class="sxs-lookup"><span data-stu-id="6801a-284">Checking the Enable Editing checkbox will add a CommandField (if needed) and set its `ShowEditButton` property to `True`.</span></span> <span data-ttu-id="6801a-285">Jak jsme viděli dříve, CommandField obsahuje řadu vlastností `ShowXButton`, které určují, jaké série tlačítek se zobrazí v CommandField.</span><span class="sxs-lookup"><span data-stu-id="6801a-285">As we saw earlier, the CommandField contains a number of `ShowXButton` properties that indicate what series of buttons are displayed in the CommandField.</span></span> <span data-ttu-id="6801a-286">Zaškrtnutím políčka Povolit úpravy přidáte do existujícího CommandField vlastnost `ShowEditButton`:</span><span class="sxs-lookup"><span data-stu-id="6801a-286">Checking the Enable Editing checkbox adds the `ShowEditButton` property to the existing CommandField:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-vb/samples/sample6.aspx)]

<span data-ttu-id="6801a-287">To je vše, co je přidání podpory základní pro úpravy.</span><span class="sxs-lookup"><span data-stu-id="6801a-287">That's all there is to adding rudimentary editing support.</span></span> <span data-ttu-id="6801a-288">Jak Figure16 ukazuje, rozhraní pro úpravy je místo všech vlastnost BoundField, jejichž vlastnost `ReadOnly` nastavena na `False` (výchozí) je vykreslena jako textové pole.</span><span class="sxs-lookup"><span data-stu-id="6801a-288">As Figure16 shows, the editing interface is rather crude each BoundField whose `ReadOnly` property is set to `False` (the default) is rendered as a TextBox.</span></span> <span data-ttu-id="6801a-289">To zahrnuje pole jako `CategoryID` a `SupplierID`, což jsou klíče na jiné tabulky.</span><span class="sxs-lookup"><span data-stu-id="6801a-289">This includes fields like `CategoryID` and `SupplierID`, which are keys to other tables.</span></span>

<span data-ttu-id="6801a-290">[![kliknutí na tlačítko Chai s úpravou řádku se zobrazí řádek v režimu úprav.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image39.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-290">[![Clicking Chai s Edit Button Displays the Row in Edit Mode](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image39.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image38.png)</span></span>

<span data-ttu-id="6801a-291">**Obrázek 16**: kliknutí na tlačítko Chai s úpravou zobrazí řádek v režimu úprav ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-291">**Figure 16**: Clicking Chai s Edit Button Displays the Row in Edit Mode ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image40.png))</span></span>

<span data-ttu-id="6801a-292">Kromě toho, že uživatelé žádají přímo o úpravu hodnot cizích klíčů, nemá rozhraní pro úpravu rozhraní následující možnosti:</span><span class="sxs-lookup"><span data-stu-id="6801a-292">In addition to asking users to edit foreign key values directly, the editing interface's interface is lacking in the following ways:</span></span>

- <span data-ttu-id="6801a-293">Pokud uživatel zadá `CategoryID` nebo `SupplierID`, které v databázi neexistují, `UPDATE` bude porušovat omezení cizího klíče, což způsobí, že se vyvolá výjimka.</span><span class="sxs-lookup"><span data-stu-id="6801a-293">If the user enters a `CategoryID` or `SupplierID` that does not exist in the database, the `UPDATE` will violate a foreign key constraint, causing an exception to be raised.</span></span>
- <span data-ttu-id="6801a-294">Rozhraní pro úpravy neobsahuje žádné ověřování.</span><span class="sxs-lookup"><span data-stu-id="6801a-294">The editing interface doesn't include any validation.</span></span> <span data-ttu-id="6801a-295">Pokud neposkytnete požadovanou hodnotu (například `ProductName`), nebo zadejte hodnotu řetězce, kde je očekávána číselná hodnota (například zadání "příliš velkého množství!"</span><span class="sxs-lookup"><span data-stu-id="6801a-295">If you don't provide a required value (such as `ProductName`), or enter a string value where a numeric value is expected (such as entering "Too much!"</span></span> <span data-ttu-id="6801a-296">do textového pole `UnitPrice`) bude vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="6801a-296">into the `UnitPrice` textbox), an exception will be thrown.</span></span> <span data-ttu-id="6801a-297">V budoucím kurzu se podíváme, jak přidat ověřovací ovládací prvky do uživatelského rozhraní pro úpravy.</span><span class="sxs-lookup"><span data-stu-id="6801a-297">A future tutorial will examine how to add validation controls to the editing user interface.</span></span>
- <span data-ttu-id="6801a-298">V současné době musí být *všechna* pole produktu, která nejsou jen pro čtení, obsažena v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-298">Currently, *all* product fields that are not read-only must be included in the GridView.</span></span> <span data-ttu-id="6801a-299">Pokud jsme chtěli odebrat pole z prvku GridView, řekněme `UnitPrice`, když aktualizujete data, v prvku GridView nebude nastavena hodnota `UpdateParameters` `UnitPrice`, která by změnila `UnitPrice` záznamu databáze na `NULL` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="6801a-299">If we were to remove a field from the GridView, say `UnitPrice`, when updating the data the GridView would not set the `UnitPrice` `UpdateParameters` value, which would change the database record's `UnitPrice` to a `NULL` value.</span></span> <span data-ttu-id="6801a-300">Podobně platí, že pokud je požadované pole, například `ProductName`, odebráno z prvku GridView, aktualizace selže se stejným "*sloupcem" NázevVýrobku "nepovoluje hodnoty null*". výše zmíněná výjimka je uvedena výše.</span><span class="sxs-lookup"><span data-stu-id="6801a-300">Similarly, if a required field, such as `ProductName`, is removed from the GridView, the update will fail with the same "*Column 'ProductName' does not allow nulls*" exception mentioned above.</span></span>
- <span data-ttu-id="6801a-301">Formátování rozhraní pro úpravy ponechá hodně požadovaných.</span><span class="sxs-lookup"><span data-stu-id="6801a-301">The editing interface formatting leaves a lot to be desired.</span></span> <span data-ttu-id="6801a-302">`UnitPrice` se zobrazí se čtyřmi desetinnými místy.</span><span class="sxs-lookup"><span data-stu-id="6801a-302">The `UnitPrice` is shown with four decimal points.</span></span> <span data-ttu-id="6801a-303">V ideálním případě by hodnoty `CategoryID` a `SupplierID` obsahovaly DropDownList, které uvádějí kategorie a dodavatele v systému.</span><span class="sxs-lookup"><span data-stu-id="6801a-303">Ideally the `CategoryID` and `SupplierID` values would contain DropDownLists that list the categories and suppliers in the system.</span></span>

<span data-ttu-id="6801a-304">Jedná se o všechny nedostatky, které budeme muset hned začít používat, ale budou řešeny v budoucích kurzech.</span><span class="sxs-lookup"><span data-stu-id="6801a-304">These are all shortcomings that we'll have to live with for now, but will be addressed in future tutorials.</span></span>

## <a name="inserting-editing-and-deleting-data-with-the-detailsview"></a><span data-ttu-id="6801a-305">Vkládání, úpravy a odstraňování dat pomocí ovládacího prvku DetailsView</span><span class="sxs-lookup"><span data-stu-id="6801a-305">Inserting, Editing, and Deleting Data with the DetailsView</span></span>

<span data-ttu-id="6801a-306">Jak jsme viděli v předchozích kurzech, ovládací prvek DetailsView zobrazuje jeden záznam v čase a, podobně jako v prvku GridView, umožňuje upravovat a odstraňovat aktuálně zobrazený záznam.</span><span class="sxs-lookup"><span data-stu-id="6801a-306">As we've seen in earlier tutorials, the DetailsView control displays one record at a time and, like the GridView, allows for editing and deleting of the currently displayed record.</span></span> <span data-ttu-id="6801a-307">Činnost koncového uživatele při úpravách a odstraňování položek z prvku DetailsView a pracovního postupu ze strany ASP.NET jsou stejné jako v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-307">Both the end user's experience with editing and deleting items from a DetailsView and the workflow from the ASP.NET side is identical to that of the GridView.</span></span> <span data-ttu-id="6801a-308">Tam, kde se ovládací prvek DetailsView liší od prvku GridView, je také k dispozici integrovaná podpora vkládání.</span><span class="sxs-lookup"><span data-stu-id="6801a-308">Where the DetailsView differs from the GridView is that it also provides built-in inserting support.</span></span>

<span data-ttu-id="6801a-309">Chcete-li předvést možnosti změny dat prvku GridView, Začněte přidáním prvku DetailsView na stránku `Basics.aspx` nad existující prvek GridView a vytvořit jeho svázání s existujícím prvkem ObjectDataSource prostřednictvím inteligentní značky prvku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="6801a-309">To demonstrate the data modification capabilities of the GridView, start by adding a DetailsView to the `Basics.aspx` page above the existing GridView and bind it to the existing ObjectDataSource through the DetailsView's smart tag.</span></span> <span data-ttu-id="6801a-310">Dále vymažte vlastnosti ovládacího prvku `Height` a `Width` a zaškrtněte možnost Povolit stránkování z inteligentní značky.</span><span class="sxs-lookup"><span data-stu-id="6801a-310">Next, clear out the DetailsView's `Height` and `Width` properties, and check the Enable Paging option from the smart tag.</span></span> <span data-ttu-id="6801a-311">Chcete-li povolit úpravy, vkládání a odstraňování podpory, stačí zaškrtnout políčka Povolit úpravy, povolit vkládání a povolit odstranění v inteligentní značce.</span><span class="sxs-lookup"><span data-stu-id="6801a-311">To enable editing, inserting, and deleting support, simply check the Enable Editing, Enable Inserting, and Enable Deleting checkboxes in the smart tag.</span></span>

![Konfigurace ovládacího prvku DetailsView pro podporu úprav, vkládání a odstraňování](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image41.png)

<span data-ttu-id="6801a-313">**Obrázek 17**: konfigurace ovládacího prvku DetailsView pro podporu úprav, vkládání a odstraňování</span><span class="sxs-lookup"><span data-stu-id="6801a-313">**Figure 17**: Configure the DetailsView to Support Editing, Inserting, and Deleting</span></span>

<span data-ttu-id="6801a-314">Stejně jako u prvku GridView, přidání úpravy, vložení nebo odstranění podpory přidá do ovládacího prvku CommandField, jak ukazuje následující deklarativní syntaxe:</span><span class="sxs-lookup"><span data-stu-id="6801a-314">As with the GridView, adding editing, inserting, or deleting support adds a CommandField to the DetailsView, as the following declarative syntax shows:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-vb/samples/sample7.aspx)]

<span data-ttu-id="6801a-315">Všimněte si, že pro prvek DetailsView se CommandField na konci kolekce Columns zobrazuje ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="6801a-315">Note that for the DetailsView the CommandField appears at the end of the Columns collection by default.</span></span> <span data-ttu-id="6801a-316">Vzhledem k tomu, že se pole ovládacího prvku DetailsView vykreslují jako řádky, CommandField se zobrazí jako řádek s tlačítky vložit, upravit a odstranit v dolní části ovládacího prvku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="6801a-316">Since the DetailsView's fields are rendered as rows, the CommandField appears as a row with Insert, Edit, and Delete buttons at the bottom of the DetailsView.</span></span>

<span data-ttu-id="6801a-317">[![nakonfigurovat prvek DetailsView na podporu úprav, vkládání a odstraňování](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image43.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-317">[![Configure the DetailsView to Support Editing, Inserting, and Deleting](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image43.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image42.png)</span></span>

<span data-ttu-id="6801a-318">**Obrázek 18**: konfigurace ovládacího prvku DetailsView pro podporu úprav, vkládání a odstraňování ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="6801a-318">**Figure 18**: Configure the DetailsView to Support Editing, Inserting, and Deleting ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image44.png))</span></span>

<span data-ttu-id="6801a-319">Kliknutí na tlačítko Odstranit spustí stejnou posloupnost událostí jako u prvku GridView: postback; následováno ovládacím prvkem DetailsView naplněný `DeleteParameters` prvku ObjectDataSource na základě hodnot `DataKeyNames`; a jsou dokončeny voláním metody `Delete()` prvku ObjectDataSource, která ve skutečnosti odebere produkt z databáze.</span><span class="sxs-lookup"><span data-stu-id="6801a-319">Clicking on the Delete button starts the same sequence of events as with the GridView: a postback; followed by the DetailsView populating its ObjectDataSource's `DeleteParameters` based on the `DataKeyNames` values; and completed with a call its ObjectDataSource's `Delete()` method, which actually removes the product from the database.</span></span> <span data-ttu-id="6801a-320">Úpravy v ovládacím prvku DetailsView také fungují způsobem, který se shoduje s prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-320">Editing in the DetailsView also works in a fashion identical to that of the GridView.</span></span>

<span data-ttu-id="6801a-321">Pro vložení se koncovému uživateli zobrazí nové tlačítko, které při kliknutí vykreslí ovládací prvek DetailsView v režimu vkládání.</span><span class="sxs-lookup"><span data-stu-id="6801a-321">For inserting, the end user is presented with a New button that, when clicked, renders the DetailsView in "insert mode."</span></span> <span data-ttu-id="6801a-322">Pomocí příkazu "vložit režim" nové tlačítko je nahrazeno tlačítky vložit a zrušit a pouze ty BoundFields, jejichž vlastnost `InsertVisible` je nastavena na hodnotu `True` (výchozí) se zobrazí.</span><span class="sxs-lookup"><span data-stu-id="6801a-322">With "insert mode" the New button is replaced by Insert and Cancel buttons and only those BoundFields whose `InsertVisible` property is set to `True` (the default) are displayed.</span></span> <span data-ttu-id="6801a-323">Tato datová pole, která jsou identifikována jako pole s automatickým přírůstkem, jako je například `ProductID`, mají [vlastnost InsertVisible](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datacontrolfield.insertvisible(VS.80).aspx) nastavenou na `False` při vazbě prvku DetailsView ke zdroji dat pomocí inteligentní značky.</span><span class="sxs-lookup"><span data-stu-id="6801a-323">Those data fields identified as auto-increment fields, such as `ProductID`, have their [InsertVisible property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datacontrolfield.insertvisible(VS.80).aspx) set to `False` when binding the DetailsView to the data source through the smart tag.</span></span>

<span data-ttu-id="6801a-324">Když vytvoříte vazbu zdroje dat k prvku DetailsView prostřednictvím inteligentní značky, sada Visual Studio nastaví vlastnost `InsertVisible` tak, aby `False` pouze pro pole s automatickým přírůstkem.</span><span class="sxs-lookup"><span data-stu-id="6801a-324">When binding a data source to a DetailsView through the smart tag, Visual Studio sets the `InsertVisible` property to `False` only for auto-increment fields.</span></span> <span data-ttu-id="6801a-325">Pole jen pro čtení, například `CategoryName` a `SupplierName`, se zobrazí v uživatelském rozhraní "režim vkládání", pokud jejich vlastnost `InsertVisible` není explicitně nastavena na `False`.</span><span class="sxs-lookup"><span data-stu-id="6801a-325">Read-only fields, like `CategoryName` and `SupplierName`, will be displayed in the "insert mode" user interface unless their `InsertVisible` property is explicitly set to `False`.</span></span> <span data-ttu-id="6801a-326">Chvíli počkejte, než se nastaví tato dvě pole `InsertVisible` vlastnosti na `False`, a to buď prostřednictvím deklarativní syntaxe ovládacího prvku DetailsView, nebo prostřednictvím odkazu upravit pole v inteligentní značce.</span><span class="sxs-lookup"><span data-stu-id="6801a-326">Take a moment to set these two fields' `InsertVisible` properties to `False`, either through the DetailsView's declarative syntax or through the Edit Fields link in the smart tag.</span></span> <span data-ttu-id="6801a-327">Obrázek 19 ukazuje nastavení vlastností `InsertVisible` na `False` kliknutím na odkaz upravit pole.</span><span class="sxs-lookup"><span data-stu-id="6801a-327">Figure 19 shows setting the `InsertVisible` properties to `False` by clicking on the Edit Fields link.</span></span>

<span data-ttu-id="6801a-328">[![Northwind Traders teď nabízí Acme čaj](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image46.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-328">[![Northwind Traders Now Offers Acme Tea](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image46.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image45.png)</span></span>

<span data-ttu-id="6801a-329">**Obrázek 19**: Northwind Traders teď nabízí Acme čaj ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-329">**Figure 19**: Northwind Traders Now Offers Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image47.png))</span></span>

<span data-ttu-id="6801a-330">Po nastavení vlastností `InsertVisible` zobrazte stránku `Basics.aspx` v prohlížeči a klikněte na tlačítko Nový.</span><span class="sxs-lookup"><span data-stu-id="6801a-330">After setting the `InsertVisible` properties, view the `Basics.aspx` page in a browser and click the New button.</span></span> <span data-ttu-id="6801a-331">Obrázek 20 ukazuje prvek DetailsView při přidávání nového nápoje, Acme čaj na naši produktovou řadu.</span><span class="sxs-lookup"><span data-stu-id="6801a-331">Figure 20 shows the DetailsView when adding a new beverage, Acme Tea, to our product line.</span></span>

<span data-ttu-id="6801a-332">[![Northwind Traders teď nabízí Acme čaj](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image49.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image48.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-332">[![Northwind Traders Now Offers Acme Tea](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image49.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image48.png)</span></span>

<span data-ttu-id="6801a-333">**Obrázek 20**: Northwind Traders teď nabízí Acme čaj ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-333">**Figure 20**: Northwind Traders Now Offers Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image50.png))</span></span>

<span data-ttu-id="6801a-334">Po zadání podrobností pro Acme čaj a kliknutí na tlačítko Vložit dojde k postbacku a nový záznam se přidá do tabulky `Products` databáze.</span><span class="sxs-lookup"><span data-stu-id="6801a-334">After entering the details for Acme Tea and clicking the Insert button, a postback ensues and the new record is added to the `Products` database table.</span></span> <span data-ttu-id="6801a-335">Vzhledem k tomu, že tento prvek DetailsView uvádí produkty v pořadí, ve kterém v tabulce databáze existují, je nutné, aby se na poslední produkt zobrazila stránka, aby bylo možné nový produkt zobrazit.</span><span class="sxs-lookup"><span data-stu-id="6801a-335">Since this DetailsView lists the products in order with which they exist in the database table, we must page to the last product in order to see the new product.</span></span>

<span data-ttu-id="6801a-336">[Podrobnosti ![pro Acme čaj](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image52.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-336">[![Details for Acme Tea](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image52.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image51.png)</span></span>

<span data-ttu-id="6801a-337">**Obrázek 21**: podrobnosti pro Acme čaj ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image53.png))</span><span class="sxs-lookup"><span data-stu-id="6801a-337">**Figure 21**: Details for Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image53.png))</span></span>

> [!NOTE]
> <span data-ttu-id="6801a-338">[Vlastnost CurrentMode](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.currentmode(VS.80).aspx) prvku DetailsView indikuje zobrazované rozhraní a může mít jednu z následujících hodnot: `Edit`, `Insert`nebo `ReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="6801a-338">The DetailsView's [CurrentMode property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.currentmode(VS.80).aspx) indicates the interface being displayed and can be one of the following values: `Edit`, `Insert`, or `ReadOnly`.</span></span> <span data-ttu-id="6801a-339">[Vlastnost DefaultMode](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.defaultmode(VS.80).aspx) označuje režim, po který se prvek DetailsView vrátí po dokončení úprav nebo vložení a je vhodný pro zobrazení prvku DetailsView, který je trvale v režimu úprav nebo vložení.</span><span class="sxs-lookup"><span data-stu-id="6801a-339">The [DefaultMode property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.defaultmode(VS.80).aspx) indicates the mode the DetailsView returns to after an edit or insert has been completed and is useful for displaying a DetailsView that is permanently in edit or insert mode.</span></span>

<span data-ttu-id="6801a-340">Bod a kliknutí na možnosti vkládání a úprav ovládacího prvku DetailsView mají stejná omezení jako v prvku GridView: uživatel musí zadat existující `CategoryID` a `SupplierID` hodnoty prostřednictvím textového pole. rozhraní nemá žádnou logiku ověřování. všechna pole produktu, která neumožňují `NULL` hodnoty nebo nemají výchozí hodnotu zadanou na úrovni databáze, musí být součástí rozhraní pro vkládání a tak dále.</span><span class="sxs-lookup"><span data-stu-id="6801a-340">The point and click inserting and editing capabilities of the DetailsView suffer from the same limitations as the GridView: the user must enter existing `CategoryID` and `SupplierID` values through a textbox; the interface lacks any validation logic; all product fields that do not allow `NULL` values or don't have a default value specified at the database level must be included in the inserting interface, and so on.</span></span>

<span data-ttu-id="6801a-341">Techniky, které jsme prověříme pro rozšíření a vylepšení rozhraní pro úpravy prvku GridView v budoucích článcích, se dají použít i pro úpravy a vkládání rozhraní ovládacího prvku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="6801a-341">The techniques we will examine for extending and enhancing the GridView's editing interface in future articles can be applied to the DetailsView control's editing and inserting interfaces as well.</span></span>

## <a name="using-the-formview-for-a-more-flexible-data-modification-user-interface"></a><span data-ttu-id="6801a-342">Použití třídy FormView pro flexibilnější uživatelské rozhraní pro úpravu dat</span><span class="sxs-lookup"><span data-stu-id="6801a-342">Using the FormView for a More Flexible Data Modification User Interface</span></span>

<span data-ttu-id="6801a-343">Třída FormView nabízí integrovanou podporu pro vkládání, úpravu a odstraňování dat, ale vzhledem k tomu, že používá šablony namísto polí, není k dispozici žádné místo pro přidání BoundFields nebo CommandField, které jsou použity ovládacími prvky GridView a DetailsView k poskytnutí dat. rozhraní úprav.</span><span class="sxs-lookup"><span data-stu-id="6801a-343">The FormView offers built-in support for inserting, editing, and deleting data, but because it uses templates instead of fields there's no place to add the BoundFields or the CommandField used by the GridView and DetailsView controls to provide the data modification interface.</span></span> <span data-ttu-id="6801a-344">Místo toho je nutné, aby toto rozhraní webové ovládací prvky shromažďující vstup uživatele při přidávání nové položky nebo úpravách existujících položek spolu s tlačítky nová, upravit, odstranit, vložit, aktualizovat a Storno musely být ručně přidány do odpovídajících šablon.</span><span class="sxs-lookup"><span data-stu-id="6801a-344">Instead, this interface the Web controls for collecting user input when adding a new item or editing an existing one along with the New, Edit, Delete, Insert, Update, and Cancel buttons must be added manually to the appropriate templates.</span></span> <span data-ttu-id="6801a-345">Aplikace Visual Studio naštěstí automaticky vytvoří potřebné rozhraní při vázání třídy FormView na zdroj dat v rozevíracím seznamu v jeho inteligentní značce.</span><span class="sxs-lookup"><span data-stu-id="6801a-345">Fortunately, Visual Studio will automatically create the needed interface when binding the FormView to a data source through the drop-down list in its smart tag.</span></span>

<span data-ttu-id="6801a-346">Pro ilustraci těchto technik Začněte přidáním třídy FormView na `Basics.aspx` stránku a z inteligentní značky třídy FormView ji navažte na prvek ObjectDataSource, který je už vytvořený.</span><span class="sxs-lookup"><span data-stu-id="6801a-346">To illustrate these techniques, start by adding a FormView to the `Basics.aspx` page and, from the FormView's smart tag, bind it to the ObjectDataSource already created.</span></span> <span data-ttu-id="6801a-347">Tím dojde k vygenerování `EditItemTemplate`, `InsertItemTemplate`a `ItemTemplate` pro ovládací prvky FormView with TextBox pro shromažďování webových ovládacích prvků vstupu a tlačítka pro nové tlačítka, úpravy, odstranění, vložení, aktualizaci a zrušení.</span><span class="sxs-lookup"><span data-stu-id="6801a-347">This will generate an `EditItemTemplate`, `InsertItemTemplate`, and `ItemTemplate` for the FormView with TextBox Web controls for collecting the user's input and Button Web controls for the New, Edit, Delete, Insert, Update, and Cancel buttons.</span></span> <span data-ttu-id="6801a-348">Kromě toho vlastnost `DataKeyNames` třídy FormView je nastavena na pole primárního klíče (`ProductID`) objektu vráceného prvkem ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-348">Additionally, the FormView's `DataKeyNames` property is set to the primary key field (`ProductID`) of the object returned by the ObjectDataSource.</span></span> <span data-ttu-id="6801a-349">Nakonec zaškrtněte v inteligentní značce FormView možnost Povolit stránkování.</span><span class="sxs-lookup"><span data-stu-id="6801a-349">Lastly, check the Enable Paging option in the FormView's smart tag.</span></span>

<span data-ttu-id="6801a-350">Následující příklad ukazuje deklarativní označení pro `ItemTemplate` třídy FormView poté, co byla třída FormView svázána s prvkem ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-350">The following shows the declarative markup for the FormView's `ItemTemplate` after the FormView has been bound to the ObjectDataSource.</span></span> <span data-ttu-id="6801a-351">Ve výchozím nastavení je každé pole produktu, které není logické hodnoty, svázáno s vlastností `Text` webového ovládacího prvku popisek, zatímco každé pole s logickou hodnotou (`Discontinued`) je svázáno s vlastností `Checked` ovládacího prvku webového ovládacího prvku Disabled.</span><span class="sxs-lookup"><span data-stu-id="6801a-351">By default, each non-Boolean value product field is bound to the `Text` property of a Label Web control while each Boolean value field (`Discontinued`) is bound to the `Checked` property of a disabled CheckBox Web control.</span></span> <span data-ttu-id="6801a-352">Aby tlačítka nová, upravit a odstranit aktivovala určité chování FormView při kliknutí, je nutné, aby jejich `CommandName` hodnoty byly nastavené na `New`, `Edit`a `Delete`v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="6801a-352">In order for the New, Edit, and Delete buttons to trigger certain FormView behavior when clicked, it is imperative that their `CommandName` values be set to `New`, `Edit`, and `Delete`, respectively.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-vb/samples/sample8.aspx)]

<span data-ttu-id="6801a-353">Obrázek 22 zobrazuje `ItemTemplate` třídy FormView při prohlížení v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="6801a-353">Figure 22 shows the FormView's `ItemTemplate` when viewed through a browser.</span></span> <span data-ttu-id="6801a-354">Každé pole produktu je v dolní části uvedeno v tlačítku nová, upravit a odstranit.</span><span class="sxs-lookup"><span data-stu-id="6801a-354">Each product field is listed with the New, Edit, and Delete buttons at the bottom.</span></span>

<span data-ttu-id="6801a-355">[![defaut FormView ItemTemplate zobrazuje každé pole produktu spolu s tlačítky nový, upravit a odstranit.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image55.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image54.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-355">[![The Defaut FormView ItemTemplate Lists Each Product Field Along with New, Edit, and Delete Buttons](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image55.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image54.png)</span></span>

<span data-ttu-id="6801a-356">**Obrázek 22**: Defaut FormView `ItemTemplate` uvádí každé pole produktu spolu s tlačítky nový, upravit a odstranit ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image56.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-356">**Figure 22**: The Defaut FormView `ItemTemplate` Lists Each Product Field Along with New, Edit, and Delete Buttons ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image56.png))</span></span>

<span data-ttu-id="6801a-357">Podobně jako u prvku GridView a DetailsView, kliknutí na tlačítko Odstranit nebo jakékoli tlačítko, LinkButton nebo obrázkové, jehož vlastnost `CommandName` je nastavena na hodnotu odstranit způsobí postback, naplní `DeleteParameters` ovládacího prvku ObjectDataSource na základě hodnoty `DataKeyNames` třídy FormView a vyvolá `Delete()` ovládacího prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-357">Like with the GridView and DetailsView, clicking the Delete button or any Button, LinkButton, or ImageButton whose `CommandName` property is set to Delete causes a postback, populates the ObjectDataSource's `DeleteParameters` based on the FormView's `DataKeyNames` value, and invokes the ObjectDataSource's `Delete()` method.</span></span>

<span data-ttu-id="6801a-358">Po kliknutí na tlačítko pro úpravy dojde k provedení postbacku a data jsou znovu svázána s `EditItemTemplate`, což zodpovídá za vykreslování rozhraní pro úpravy.</span><span class="sxs-lookup"><span data-stu-id="6801a-358">When the Edit button is clicked a postback ensues and the data is rebound to the `EditItemTemplate`, which is responsible for rendering the editing interface.</span></span> <span data-ttu-id="6801a-359">Toto rozhraní zahrnuje webové ovládací prvky pro úpravu dat spolu s tlačítky aktualizovat a zrušit.</span><span class="sxs-lookup"><span data-stu-id="6801a-359">This interface includes the Web controls for editing data along with the Update and Cancel buttons.</span></span> <span data-ttu-id="6801a-360">Výchozí `EditItemTemplate` vygenerované aplikací Visual Studio obsahuje popisek pro všechna pole s automatickým přírůstku (`ProductID`), textové pole pro každé nelogické hodnoty a zaškrtávací políčko pro každé pole logické hodnoty.</span><span class="sxs-lookup"><span data-stu-id="6801a-360">The default `EditItemTemplate` generated by Visual Studio contains a Label for any auto-increment fields (`ProductID`), a TextBox for each non-Boolean value field, and a CheckBox for each Boolean value field.</span></span> <span data-ttu-id="6801a-361">Toto chování je velmi podobné automaticky generovanému BoundFields v ovládacích prvcích GridView a DetailsView.</span><span class="sxs-lookup"><span data-stu-id="6801a-361">This behavior is very similar to the auto-generated BoundFields in the GridView and DetailsView controls.</span></span>

> [!NOTE]
> <span data-ttu-id="6801a-362">Jedním z malých problémů s automatickou generací `EditItemTemplate` FormView je, že vykresluje webové ovládací prvky TextBox pro tato pole, která jsou jen pro čtení, jako je například `CategoryName` a `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="6801a-362">One small issue with the FormView's auto-generation of the `EditItemTemplate` is that it renders TextBox Web controls for those fields that are read-only, such as `CategoryName` and `SupplierName`.</span></span> <span data-ttu-id="6801a-363">Podíváme se, jak se to bude brzy vyhlížet.</span><span class="sxs-lookup"><span data-stu-id="6801a-363">We'll see how to account for this shortly.</span></span>

<span data-ttu-id="6801a-364">Ovládací prvky TextBox v `EditItemTemplate` mají svou vlastnost `Text` svázány s hodnotou jejich odpovídajícího datového pole pomocí *obousměrné datové*sady.</span><span class="sxs-lookup"><span data-stu-id="6801a-364">The TextBox controls in the `EditItemTemplate` have their `Text` property bound to the value of their corresponding data field using *two-way databinding*.</span></span> <span data-ttu-id="6801a-365">Obousměrná vazba, označená `<%# Bind("dataField") %>`, provádí datovou vazbu při vázání dat na šablonu a při naplňování parametrů ObjectDataSource pro vkládání nebo upravování záznamů.</span><span class="sxs-lookup"><span data-stu-id="6801a-365">Two-way databinding, denoted by `<%# Bind("dataField") %>`, performs databinding both when binding data to the template and when populating the ObjectDataSource's parameters for inserting or editing records.</span></span> <span data-ttu-id="6801a-366">To znamená, že když uživatel klikne na tlačítko Upravit z `ItemTemplate`, vrátí metoda `Bind()` zadanou hodnotu datového pole.</span><span class="sxs-lookup"><span data-stu-id="6801a-366">That is, when the user clicks the Edit button from the `ItemTemplate`, the `Bind()` method returns the specified data field value.</span></span> <span data-ttu-id="6801a-367">Poté, co uživatel provede změny a klikne na aktualizovat, jsou hodnoty odeslané zpět, které odpovídají datovým polím zadaným pomocí `Bind()`, použity pro `UpdateParameters`prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-367">After the user makes their changes and clicks Update, the values posted back that correspond to the data fields specified using `Bind()` are applied to the ObjectDataSource's `UpdateParameters`.</span></span> <span data-ttu-id="6801a-368">Případně jednosměrná vazba, označená `<%# Eval("dataField") %>`, načítá pouze hodnoty datových polí při vázání dat na šablonu a *nevrací uživatelem* zadané hodnoty do parametrů zdroje dat při zpětném volání.</span><span class="sxs-lookup"><span data-stu-id="6801a-368">Alternatively, one-way databinding, denoted by `<%# Eval("dataField") %>`, only retrieves the data field values when binding data to the template and does *not* return the user-entered values to the data source's parameters on postback.</span></span>

<span data-ttu-id="6801a-369">Následující deklarativní kód ukazuje `EditItemTemplate`třídy FormView.</span><span class="sxs-lookup"><span data-stu-id="6801a-369">The following declarative markup shows the FormView's `EditItemTemplate`.</span></span> <span data-ttu-id="6801a-370">Všimněte si, že metoda `Bind()` se používá v syntaxi DataBinding a že webové ovládací prvky tlačítka aktualizovat a Storno mají odpovídající nastavení vlastností `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="6801a-370">Note that the `Bind()` method is used in the databinding syntax here and that the Update and Cancel Button Web controls have their `CommandName` properties set accordingly.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-vb/samples/sample9.aspx)]

<span data-ttu-id="6801a-371">Náš `EditItemTemplate`, v tomto okamžiku způsobí, že bude vyvolána výjimka, pokud se ji pokusíme použít.</span><span class="sxs-lookup"><span data-stu-id="6801a-371">Our `EditItemTemplate`, at this point, will cause an exception to be thrown if we attempt to use it.</span></span> <span data-ttu-id="6801a-372">Problémem je, že pole `CategoryName` a `SupplierName` se vykreslují jako webové ovládací prvky TextBox v `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6801a-372">The problem is that the `CategoryName` and `SupplierName` fields are rendered as TextBox Web controls in the `EditItemTemplate`.</span></span> <span data-ttu-id="6801a-373">Musíme buď změnit tato textová pole na popisky, nebo je úplně odebrat.</span><span class="sxs-lookup"><span data-stu-id="6801a-373">We either need to change these TextBoxes to Labels or remove them altogether.</span></span> <span data-ttu-id="6801a-374">Pojďme je jednoduše odstranit úplně z `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6801a-374">Let's simply delete them entirely from the `EditItemTemplate`.</span></span>

<span data-ttu-id="6801a-375">Obrázek 23 ukazuje zobrazení FormView v prohlížeči po kliknutí na tlačítko Upravit pro příkaz Chai.</span><span class="sxs-lookup"><span data-stu-id="6801a-375">Figure 23 shows the FormView in a browser after the Edit button has been clicked for Chai.</span></span> <span data-ttu-id="6801a-376">Všimněte si, že pole `SupplierName` a `CategoryName` zobrazená v `ItemTemplate` již nejsou k dispozici, protože je právě odebrala z `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6801a-376">Note that the `SupplierName` and `CategoryName` fields shown in the `ItemTemplate` are no longer present, as we just removed them from the `EditItemTemplate`.</span></span> <span data-ttu-id="6801a-377">Když kliknete na tlačítko Aktualizovat, třída FormView pokračuje přes stejné pořadí kroků jako ovládací prvky GridView a DetailsView.</span><span class="sxs-lookup"><span data-stu-id="6801a-377">When the Update button is clicked the FormView proceeds through the same sequence of steps as the GridView and DetailsView controls.</span></span>

<span data-ttu-id="6801a-378">[![ve výchozím nastavení, hodnota EditItemTemplate zobrazuje každé upravitelné pole produktu jako textové pole nebo zaškrtávací políčko.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image58.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image57.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-378">[![By Default the EditItemTemplate Shows Each Editable Product Field as a TextBox or CheckBox](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image58.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image57.png)</span></span>

<span data-ttu-id="6801a-379">**Obrázek 23**: ve výchozím nastavení `EditItemTemplate` zobrazuje každé upravitelné pole produktu jako textové pole nebo zaškrtávací políčko ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image59.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-379">**Figure 23**: By Default the `EditItemTemplate` Shows Each Editable Product Field as a TextBox or CheckBox ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image59.png))</span></span>

<span data-ttu-id="6801a-380">Po kliknutí na tlačítko Vložit `ItemTemplate` FormView dojde k vystavení.</span><span class="sxs-lookup"><span data-stu-id="6801a-380">When the Insert button is clicked the FormView's `ItemTemplate` a postback ensues.</span></span> <span data-ttu-id="6801a-381">Žádná data však nejsou svázána se standardem FormView, protože probíhá přidávání nového záznamu.</span><span class="sxs-lookup"><span data-stu-id="6801a-381">However, no data is bound to the FormView because a new record is being added.</span></span> <span data-ttu-id="6801a-382">Rozhraní `InsertItemTemplate` zahrnuje webové ovládací prvky pro přidání nového záznamu spolu s tlačítky vložit a Storno.</span><span class="sxs-lookup"><span data-stu-id="6801a-382">The `InsertItemTemplate` interface includes the Web controls for adding a new record along with the Insert and Cancel buttons.</span></span> <span data-ttu-id="6801a-383">Výchozí `InsertItemTemplate` vygenerované v aplikaci Visual Studio obsahuje textové pole pro každé pole, které není typu Boolean, a zaškrtávací políčko pro každé pole s logickou hodnotou, podobně jako rozhraní `EditItemTemplate`generovaného automaticky.</span><span class="sxs-lookup"><span data-stu-id="6801a-383">The default `InsertItemTemplate` generated by Visual Studio contains a TextBox for each non-Boolean value field and a CheckBox for each Boolean value field, similar to the auto-generated `EditItemTemplate`'s interface.</span></span> <span data-ttu-id="6801a-384">Ovládací prvky TextBox mají svou `Text` vlastnost vázané na hodnotu jejich odpovídajícího datového pole pomocí obousměrné datové sady.</span><span class="sxs-lookup"><span data-stu-id="6801a-384">The TextBox controls have their `Text` property bound to the value of their corresponding data field using two-way databinding.</span></span>

<span data-ttu-id="6801a-385">Následující deklarativní kód ukazuje `InsertItemTemplate`třídy FormView.</span><span class="sxs-lookup"><span data-stu-id="6801a-385">The following declarative markup shows the FormView's `InsertItemTemplate`.</span></span> <span data-ttu-id="6801a-386">Všimněte si, že metoda `Bind()` se používá v syntaxi DataBinding a že webové ovládací prvky tlačítka Vložit a Storno mají odpovídající nastavení vlastností `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="6801a-386">Note that the `Bind()` method is used in the databinding syntax here and that the Insert and Cancel Button Web controls have their `CommandName` properties set accordingly.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-vb/samples/sample10.aspx)]

<span data-ttu-id="6801a-387">Je k dispozici Subtlety s `InsertItemTemplate`automatické generace třídy FormView.</span><span class="sxs-lookup"><span data-stu-id="6801a-387">There's a subtlety with the FormView's auto-generation of the `InsertItemTemplate`.</span></span> <span data-ttu-id="6801a-388">Konkrétně jsou webové ovládací prvky TextBox vytvořeny i pro pole, která jsou jen pro čtení, například `CategoryName` a `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="6801a-388">Specifically, the TextBox Web controls are created even for those fields that are read-only, such as `CategoryName` and `SupplierName`.</span></span> <span data-ttu-id="6801a-389">Podobně jako u `EditItemTemplate`musíme tato textová pole z `InsertItemTemplate`odebrat.</span><span class="sxs-lookup"><span data-stu-id="6801a-389">Like with the `EditItemTemplate`, we need to remove these TextBoxes from the `InsertItemTemplate`.</span></span>

<span data-ttu-id="6801a-390">Obrázek 24 zobrazuje FormView v prohlížeči při přidávání nového produktu, Acme kávy.</span><span class="sxs-lookup"><span data-stu-id="6801a-390">Figure 24 shows the FormView in a browser when adding a new product, Acme Coffee.</span></span> <span data-ttu-id="6801a-391">Všimněte si, že pole `SupplierName` a `CategoryName` zobrazená v `ItemTemplate` již nejsou přítomna, protože jsme je právě odstranili.</span><span class="sxs-lookup"><span data-stu-id="6801a-391">Note that the `SupplierName` and `CategoryName` fields shown in the `ItemTemplate` are no longer present, as we just removed them.</span></span> <span data-ttu-id="6801a-392">Když kliknete na tlačítko Vložit, třída FormView pokračuje stejným způsobem jako v ovládacím prvku DetailsView a přidá nový záznam do tabulky `Products`.</span><span class="sxs-lookup"><span data-stu-id="6801a-392">When the Insert button is clicked the FormView proceeds through the same sequence of steps as the DetailsView control, adding a new record to the `Products` table.</span></span> <span data-ttu-id="6801a-393">Obrázek 25 znázorňuje po vložení ve třídě FormView informace o pokusných produktech z kávy.</span><span class="sxs-lookup"><span data-stu-id="6801a-393">Figure 25 shows Acme Coffee product's details in the FormView after it has been inserted.</span></span>

<span data-ttu-id="6801a-394">[![šablona InsertItemTemplate určuje rozhraní pro vložení třídy FormView.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image61.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image60.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-394">[![The InsertItemTemplate Dictates the FormView's Inserting Interface](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image61.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image60.png)</span></span>

<span data-ttu-id="6801a-395">**Obrázek 24**: `InsertItemTemplate` určuje rozhraní pro vložení třídy FormView ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image62.png)).</span><span class="sxs-lookup"><span data-stu-id="6801a-395">**Figure 24**: The `InsertItemTemplate` Dictates the FormView's Inserting Interface ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image62.png))</span></span>

<span data-ttu-id="6801a-396">[![podrobnosti nového produktu, Acme kávy, se zobrazí ve třídě FormView.](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image64.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image63.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-396">[![The Details for New Product, Acme Coffee, are Displayed in the FormView](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image64.png)](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image63.png)</span></span>

<span data-ttu-id="6801a-397">**Obrázek 25**: podrobnosti o novém produktu, Acme kávy, se zobrazí ve třídě FormView ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image65.png)</span><span class="sxs-lookup"><span data-stu-id="6801a-397">**Figure 25**: The Details for New Product, Acme Coffee, are Displayed in the FormView ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-vb/_static/image65.png))</span></span>

<span data-ttu-id="6801a-398">Oddělením karet pro čtení, úpravy a vkládání rozhraní do tří samostatných šablon umožňuje třída FormView lepší kontrolu nad těmito rozhraními než ovládací prvek DetailsView a GridView.</span><span class="sxs-lookup"><span data-stu-id="6801a-398">By separating out the read-only, editing, and inserting interfaces into three separate templates, the FormView allows for a finer degree of control over these interfaces than the DetailsView and GridView.</span></span>

> [!NOTE]
> <span data-ttu-id="6801a-399">Podobně jako prvek DetailsView, vlastnost `CurrentMode` třídy FormView indikuje zobrazené rozhraní a jeho vlastnost `DefaultMode` označuje režim, po kterém se třída FormView vrátí na po dokončení úpravy nebo vložení.</span><span class="sxs-lookup"><span data-stu-id="6801a-399">Like the DetailsView, the FormView's `CurrentMode` property indicates the interface being displayed and its `DefaultMode` property indicates the mode the FormView returns to after an edit or insert has been completed.</span></span>

## <a name="summary"></a><span data-ttu-id="6801a-400">Přehled</span><span class="sxs-lookup"><span data-stu-id="6801a-400">Summary</span></span>

<span data-ttu-id="6801a-401">V tomto kurzu jsme prozkoumali základy vkládání, úprav a odstraňování dat pomocí prvku GridView, DetailsView a FormView.</span><span class="sxs-lookup"><span data-stu-id="6801a-401">In this tutorial we examined the basics of inserting, editing, and deleting data using the GridView, DetailsView, and FormView.</span></span> <span data-ttu-id="6801a-402">Všechny tři z těchto ovládacích prvků poskytují určitou úroveň předdefinovaných možností změny dat, které lze využít bez nutnosti psát jediný řádek kódu na ASP.NET stránce díky webovým ovládacím prvkům data a prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="6801a-402">All three of these controls provide some level of built-in data modification capabilities that can be utilized without writing a single line of code in the ASP.NET page thanks to the data Web controls and the ObjectDataSource.</span></span> <span data-ttu-id="6801a-403">Nicméně jednoduché a kliknutí na techniky vykreslují poměrně Frail a Naive uživatelské rozhraní pro úpravu dat.</span><span class="sxs-lookup"><span data-stu-id="6801a-403">However, the simple point and click techniques render a fairly frail and naïve data modification user interface.</span></span> <span data-ttu-id="6801a-404">Abychom zajistili ověřování, vkládání programových hodnot, řádné zpracování výjimek, přizpůsobení uživatelského rozhraní a tak dále, budeme muset spoléhat na řadou reálných techniky, které se budou probrat v dalších několika kurzech.</span><span class="sxs-lookup"><span data-stu-id="6801a-404">To provide validation, inject programmatic values, gracefully handle exceptions, customize the user interface, and so on, we'll need to rely on a bevy of techniques that will be discussed over the next several tutorials.</span></span>

<span data-ttu-id="6801a-405">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="6801a-405">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="6801a-406">O autorovi</span><span class="sxs-lookup"><span data-stu-id="6801a-406">About the Author</span></span>

<span data-ttu-id="6801a-407">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="6801a-407">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="6801a-408">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="6801a-408">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="6801a-409">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="6801a-409">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="6801a-410">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="6801a-410">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="6801a-411">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="6801a-411">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="6801a-412">[Předchozí](limiting-data-modification-functionality-based-on-the-user-cs.md)
> [Další](examining-the-events-associated-with-inserting-updating-and-deleting-vb.md)</span><span class="sxs-lookup"><span data-stu-id="6801a-412">[Previous](limiting-data-modification-functionality-based-on-the-user-cs.md)
[Next](examining-the-events-associated-with-inserting-updating-and-deleting-vb.md)</span></span>
