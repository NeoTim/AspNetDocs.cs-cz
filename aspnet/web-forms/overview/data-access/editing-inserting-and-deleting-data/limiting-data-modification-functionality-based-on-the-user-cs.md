---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/limiting-data-modification-functionality-based-on-the-user-cs
title: Omezení funkcí pro úpravu dat podle uživatele (C#) | Microsoft Docs
author: rick-anderson
description: Ve webové aplikaci, která umožňuje uživatelům upravovat data, mohou mít různé uživatelské účty různá oprávnění k úpravám dat. V tomto kurzu podíváme se, jak t...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: 2b251c82-77cf-4e36-baa9-b648eddaa394
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/limiting-data-modification-functionality-based-on-the-user-cs
msc.type: authoredcontent
ms.openlocfilehash: c3cacaddb7e9b493ba39718f41dcaab360d36fd9
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/28/2019
ms.locfileid: "74580708"
---
# <a name="limiting-data-modification-functionality-based-on-the-user-c"></a><span data-ttu-id="7999e-104">Omezení funkcí pro úpravu dat podle uživatele (C#)</span><span class="sxs-lookup"><span data-stu-id="7999e-104">Limiting Data Modification Functionality Based on the User (C#)</span></span>

<span data-ttu-id="7999e-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7999e-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7999e-106">[Stáhnout ukázkovou aplikaci](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_23_CS.exe) nebo [Stáhnout PDF](limiting-data-modification-functionality-based-on-the-user-cs/_static/datatutorial23cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="7999e-106">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_23_CS.exe) or [Download PDF](limiting-data-modification-functionality-based-on-the-user-cs/_static/datatutorial23cs1.pdf)</span></span>

> <span data-ttu-id="7999e-107">Ve webové aplikaci, která umožňuje uživatelům upravovat data, mohou mít různé uživatelské účty různá oprávnění k úpravám dat.</span><span class="sxs-lookup"><span data-stu-id="7999e-107">In a web application that allows users to edit data, different user accounts may have different data-editing privileges.</span></span> <span data-ttu-id="7999e-108">V tomto kurzu podíváme se, jak dynamicky upravovat možnosti změny dat na základě navštíveného uživatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-108">In this tutorial we'll examine how to dynamically adjust the data modification capabilities based on the visiting user.</span></span>

## <a name="introduction"></a><span data-ttu-id="7999e-109">Úvod</span><span class="sxs-lookup"><span data-stu-id="7999e-109">Introduction</span></span>

<span data-ttu-id="7999e-110">Řada webových aplikací podporuje uživatelské účty a poskytuje různé možnosti, sestavy a funkce na základě přihlášeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-110">A number of web applications support user accounts and provide different options, reports, and functionality based on the logged in user.</span></span> <span data-ttu-id="7999e-111">V našich kurzech bychom například chtěli dovolit, aby se uživatelé od dodavatelů přihlásili k webu a aktualizovali Obecné informace o svých produktech – jejich jméno a množství na jednotku, případně i informace o dodavatelích, jako je název společnosti. Adresa: informace o kontaktní osobě a tak dále.</span><span class="sxs-lookup"><span data-stu-id="7999e-111">For example, with our tutorials we might want to allow users from the supplier companies to log on to the site and update general information about their products - their name and quantity per unit, perhaps - along with supplier information, such as their company name, address, the contact person s information, and so on.</span></span> <span data-ttu-id="7999e-112">Kromě toho můžeme chtít zahrnout některé uživatelské účty pro lidi z naší společnosti, aby se mohli přihlásit a aktualizovat informace o produktech jako jednotky na skladě, změnit pořadí a tak dále.</span><span class="sxs-lookup"><span data-stu-id="7999e-112">Furthermore, we might want to include some user accounts for people from our company so that they can log on and update product information like units on stock, reorder level, and so forth.</span></span> <span data-ttu-id="7999e-113">Naše webová aplikace může také uživatelům umožnit, aby navštívili (uživatelé, kteří ještě nejsou přihlášení), ale omezili si jejich zobrazení jenom na data.</span><span class="sxs-lookup"><span data-stu-id="7999e-113">Our web application might also allow anonymous users to visit (people who have not logged on), but would limit them to just viewing data.</span></span> <span data-ttu-id="7999e-114">V rámci tohoto systému uživatelských účtů chceme, aby webové ovládací prvky dat na našich ASP.NET stránkách nabízely možnosti vkládání, úprav a odstraňování, které jsou vhodné pro aktuálně přihlášeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-114">With such a user account system in place, we would want the data Web controls in our ASP.NET pages to offer the inserting, editing, and deleting capabilities appropriate for the currently logged on user.</span></span>

<span data-ttu-id="7999e-115">V tomto kurzu podíváme se, jak dynamicky upravovat možnosti změny dat na základě navštíveného uživatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-115">In this tutorial we'll examine how to dynamically adjust the data modification capabilities based on the visiting user.</span></span> <span data-ttu-id="7999e-116">Konkrétně vytvoříme stránku, která zobrazí informace o dodavatelích v upravitelném ovládacím prvku DetailsView spolu s prvku GridView, který obsahuje seznam produktů poskytovaných dodavatelem.</span><span class="sxs-lookup"><span data-stu-id="7999e-116">In particular, we'll create a page that displays the suppliers information in an editable DetailsView along with a GridView that lists the products provided by the supplier.</span></span> <span data-ttu-id="7999e-117">Pokud uživatel navštívil stránku z naší společnosti, může: zobrazit informace o dodavatelích; upravit jejich adresu; a upravte informace pro jakýkoli produkt poskytovaný dodavatelem.</span><span class="sxs-lookup"><span data-stu-id="7999e-117">If the user visiting the page is from our company, they can: view any supplier s information; edit their address; and edit the information for any product provided by the supplier.</span></span> <span data-ttu-id="7999e-118">Pokud je však uživatel z konkrétní společnosti, může zobrazit a upravit pouze vlastní informace o adrese a upravovat pouze své produkty, které nebyly označeny jako ukončené.</span><span class="sxs-lookup"><span data-stu-id="7999e-118">If, however, the user is from a particular company, they can only view and edit their own address information and can only edit their products that have not been marked as discontinued.</span></span>

<span data-ttu-id="7999e-119">[![může uživatel z naší společnosti upravovat informace o dodavatelích.](limiting-data-modification-functionality-based-on-the-user-cs/_static/image2.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-119">[![A User from Our Company Can Edit Any Supplier s Information](limiting-data-modification-functionality-based-on-the-user-cs/_static/image2.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image1.png)</span></span>

<span data-ttu-id="7999e-120">**Obrázek 1**: uživatel z naší společnosti může upravovat informace o dodavatelích ([kliknutím zobrazíte obrázek v plné velikosti).](limiting-data-modification-functionality-based-on-the-user-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-120">**Figure 1**: A User from Our Company Can Edit Any Supplier s Information ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image3.png))</span></span>

<span data-ttu-id="7999e-121">[![uživatel z konkrétního dodavatele může zobrazit a upravit pouze své informace](limiting-data-modification-functionality-based-on-the-user-cs/_static/image5.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-121">[![A User from a Particular Supplier Can Only View and Edit their Information](limiting-data-modification-functionality-based-on-the-user-cs/_static/image5.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image4.png)</span></span>

<span data-ttu-id="7999e-122">**Obrázek 2**: uživatel z konkrétního dodavatele může zobrazit a upravit pouze své informace ([kliknutím zobrazíte obrázek v plné velikosti](limiting-data-modification-functionality-based-on-the-user-cs/_static/image6.png)).</span><span class="sxs-lookup"><span data-stu-id="7999e-122">**Figure 2**: A User from a Particular Supplier Can Only View and Edit their Information ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image6.png))</span></span>

<span data-ttu-id="7999e-123">Pojďme začít!</span><span class="sxs-lookup"><span data-stu-id="7999e-123">Let s get started!</span></span>

> [!NOTE]
> <span data-ttu-id="7999e-124">Systém členství v ASP.NET 2,0 s poskytuje standardizovanou a rozšiřitelnou platformu pro vytváření, správu a ověřování uživatelských účtů.</span><span class="sxs-lookup"><span data-stu-id="7999e-124">ASP.NET 2.0 s membership system provides a standardized, extensible platform for creating, managing, and validating user accounts.</span></span> <span data-ttu-id="7999e-125">Vzhledem k tomu, že přezkoumání systému členství je nad rámec těchto kurzů, tento kurz místo toho "předstírá" členství, protože umožňuje anonymním návštěvníkům zvolit, zda jsou od konkrétního dodavatele nebo z naší společnosti.</span><span class="sxs-lookup"><span data-stu-id="7999e-125">Since an examination of the membership system is beyond the scope of these tutorials, this tutorial instead "fakes" membership by allowing anonymous visitors to choose whether they are from a particular supplier or from our company.</span></span> <span data-ttu-id="7999e-126">Další informace o členství najdete v článku věnovaném [kontrole členství, rolí a datových řad v ASP.NET 2,0 s](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx) .</span><span class="sxs-lookup"><span data-stu-id="7999e-126">For more on membership, refer to my [Examining ASP.NET 2.0 s Membership, Roles, and Profile](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx) article series.</span></span>

## <a name="step-1-allowing-the-user-to-specify-their-access-rights"></a><span data-ttu-id="7999e-127">Krok 1: umožnění uživateli zadat přístupová práva</span><span class="sxs-lookup"><span data-stu-id="7999e-127">Step 1: Allowing the User to Specify their Access Rights</span></span>

<span data-ttu-id="7999e-128">V reálné webové aplikaci obsahují informace o účtu uživatele informace o tom, zda pracovaly pro naši společnost nebo konkrétního dodavatele, a tyto informace budou programově přístupné z našich stránek ASP.NET po přihlášení uživatele k webu.</span><span class="sxs-lookup"><span data-stu-id="7999e-128">In a real-world web application, a user s account information would include whether they worked for our company or for a particular supplier, and this information would be programmatically accessible from our ASP.NET pages once the user has logged on to the site.</span></span> <span data-ttu-id="7999e-129">Tyto informace mohou být zachyceny prostřednictvím systému rolí ASP.NET 2,0 s, jako informace o účtu na úrovni uživatele přes profilový systém nebo prostřednictvím některých vlastních prostředků.</span><span class="sxs-lookup"><span data-stu-id="7999e-129">This information could be captured through ASP.NET 2.0 s roles system, as user-level account information through the profile system, or through some custom means.</span></span>

<span data-ttu-id="7999e-130">Vzhledem k tomu, že cílem tohoto kurzu je předvedení úprav možností změny dat na základě přihlášeného uživatele a není určeno k tomu, aby procházela členství, role a systémy profilů ASP.NET 2,0 s, využijeme jednoduše mechanizmus pro určení možnosti pro uživatele, kteří navštívili stránku – DropDownList, ze kterého může uživatel určit, jestli mají být schopni zobrazit a upravit jakékoli informace o dodavatelích nebo případně také informace o dodavateli, které mohou zobrazit a upravit.</span><span class="sxs-lookup"><span data-stu-id="7999e-130">Since the aim of this tutorial is to demonstrate adjusting the data modification capabilities based on the logged on user, and is not meant to showcase ASP.NET 2.0 s membership, roles, and profile systems, we'll use a very simply mechanism to determine the capabilities for the user visiting the page - a DropDownList from which the user can indicate if they should be able to view and edit any of the suppliers information or, alternatively, what particular supplier s information they can view and edit.</span></span> <span data-ttu-id="7999e-131">Pokud uživatel informuje o tom, že může zobrazit a upravit informace o dodavateli (výchozí), může stránku procházet všemi dodavateli, upravovat informace o dodavatelích a upravovat název a množství jednotek pro všechny produkty poskytované vybraným dodavatelem.</span><span class="sxs-lookup"><span data-stu-id="7999e-131">If the user indicates that she can view and edit all supplier information (the default), she can page through all suppliers, edit any supplier s address information, and edit the name and quantity per unit for any product provided by the selected supplier.</span></span> <span data-ttu-id="7999e-132">Pokud uživatel informuje, že může pouze zobrazit a upravit konkrétního dodavatele, může zobrazit pouze podrobnosti a produkty pro tohoto dodavatele a může aktualizovat pouze název a množství informací o jednotce pro tyto produkty, *které nejsou* ukončeny.</span><span class="sxs-lookup"><span data-stu-id="7999e-132">If the user indicates that she can only view and edit a particular supplier, however, then she can only view the details and products for that one supplier and can only update the name and quantity per unit information for those products that are *not* discontinued.</span></span>

<span data-ttu-id="7999e-133">Náš první krok v tomto kurzu, pak je vytvořit tuto DropDownList a naplnit ji dodavateli v systému.</span><span class="sxs-lookup"><span data-stu-id="7999e-133">Our first step in this tutorial, then, is to create this DropDownList and populate it with the suppliers in the system.</span></span> <span data-ttu-id="7999e-134">Otevřete stránku `UserLevelAccess.aspx` ve složce `EditInsertDelete`, přidejte DropDownList, jehož vlastnost `ID` je nastavena na `Suppliers`a navažte tuto vlastnost DropDownList na nový prvek ObjectDataSource s názvem `AllSuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="7999e-134">Open the `UserLevelAccess.aspx` page in the `EditInsertDelete` folder, add a DropDownList whose `ID` property is set to `Suppliers`, and bind this DropDownList to a new ObjectDataSource named `AllSuppliersDataSource`.</span></span>

<span data-ttu-id="7999e-135">[![vytvořit nový prvek ObjectDataSource s názvem AllSuppliersDataSource](limiting-data-modification-functionality-based-on-the-user-cs/_static/image8.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-135">[![Create a New ObjectDataSource Named AllSuppliersDataSource](limiting-data-modification-functionality-based-on-the-user-cs/_static/image8.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image7.png)</span></span>

<span data-ttu-id="7999e-136">**Obrázek 3**: vytvoření nového prvku ObjectDataSource s názvem `AllSuppliersDataSource` ([kliknutím zobrazíte obrázek v plné velikosti](limiting-data-modification-functionality-based-on-the-user-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="7999e-136">**Figure 3**: Create a New ObjectDataSource Named `AllSuppliersDataSource` ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image9.png))</span></span>

<span data-ttu-id="7999e-137">Vzhledem k tomu, že chceme, aby tato třída DropDownList zahrnovala všechny dodavatele, nakonfigurujte prvek ObjectDataSource, aby vyvolala metodu `SuppliersBLL` třídy s `GetSuppliers()`.</span><span class="sxs-lookup"><span data-stu-id="7999e-137">Since we want this DropDownList to include all suppliers, configure the ObjectDataSource to invoke the `SuppliersBLL` class s `GetSuppliers()` method.</span></span> <span data-ttu-id="7999e-138">Také zajistěte, aby byla metoda ObjectDataSource s `Update()` namapována na metodu `SuppliersBLL` třídy s `UpdateSupplierAddress`, protože tento prvek ObjectDataSource bude také použit ovládacím prvkem DetailsView, který budeme přidávat v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="7999e-138">Also ensure that the ObjectDataSource s `Update()` method is mapped to the `SuppliersBLL` class s `UpdateSupplierAddress` method, as this ObjectDataSource will also be used by the DetailsView we'll be adding in Step 2.</span></span>

<span data-ttu-id="7999e-139">Po dokončení průvodce ObjectDataSource dokončete postup konfigurací `Suppliers` DropDownList tak, aby se zobrazilo `CompanyName` datové pole a jako hodnotu pro každý `ListItem`používá pole `SupplierID` data.</span><span class="sxs-lookup"><span data-stu-id="7999e-139">After completing the ObjectDataSource wizard, complete the steps by configuring the `Suppliers` DropDownList such that it shows the `CompanyName` data field and uses the `SupplierID` data field as the value for each `ListItem`.</span></span>

<span data-ttu-id="7999e-140">[![konfigurace DropDownList pro dodavatele pro použití datových polí CompanyName a KódDodavatele](limiting-data-modification-functionality-based-on-the-user-cs/_static/image11.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-140">[![Configure the Suppliers DropDownList to Use the CompanyName and SupplierID Data Fields](limiting-data-modification-functionality-based-on-the-user-cs/_static/image11.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image10.png)</span></span>

<span data-ttu-id="7999e-141">**Obrázek 4**: Konfigurace `Suppliers` DropDownList pro použití datových polí `CompanyName` a `SupplierID` ([kliknutím zobrazíte obrázek v plné velikosti](limiting-data-modification-functionality-based-on-the-user-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="7999e-141">**Figure 4**: Configure the `Suppliers` DropDownList to Use the `CompanyName` and `SupplierID` Data Fields ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image12.png))</span></span>

<span data-ttu-id="7999e-142">V tomto okamžiku zobrazí DropDownList názvy společností dodavatelů v databázi.</span><span class="sxs-lookup"><span data-stu-id="7999e-142">At this point, the DropDownList lists the company names of the suppliers in the database.</span></span> <span data-ttu-id="7999e-143">Je ale také potřeba do DropDownList přidat možnost Zobrazit/upravit všechny dodavatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-143">However, we also need to include a "Show/Edit ALL Suppliers" option to the DropDownList.</span></span> <span data-ttu-id="7999e-144">Pokud to chcete provést, nastavte vlastnost `Suppliers` DropDownList s `AppendDataBoundItems` na `true` a pak přidejte `ListItem`, jehož vlastnost `Text` je "Zobrazit/upravit všechny dodavatele" a jehož hodnota je `-1`.</span><span class="sxs-lookup"><span data-stu-id="7999e-144">To accomplish this, set the `Suppliers` DropDownList s `AppendDataBoundItems` property to `true` and then add a `ListItem` whose `Text` property is "Show/Edit ALL Suppliers" and whose value is `-1`.</span></span> <span data-ttu-id="7999e-145">To lze přidat přímo prostřednictvím deklarativní značky nebo pomocí návrháře tak, že přejdete na okno Vlastnosti a kliknete na tři tečky ve vlastnosti DropDownList s `Items`.</span><span class="sxs-lookup"><span data-stu-id="7999e-145">This can be added directly through the declarative markup or through the Designer by going to the Properties window and clicking on the ellipses in the DropDownList s `Items` property.</span></span>

> [!NOTE]
> <span data-ttu-id="7999e-146">Pokud chcete podrobnější diskuzi o přidání položky Select All do ovládacího prvkem DropDownList vázaného na data, přečtěte si téma [*filtrování hlavní/podrobnosti pomocí kurzu DropDownList*](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="7999e-146">Refer back to the [*Master/Detail Filtering With a DropDownList*](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) tutorial for a more detailed discussion on adding a Select All item to a databound DropDownList.</span></span>

<span data-ttu-id="7999e-147">Po nastavení vlastnosti `AppendDataBoundItems` a přidání `ListItem` by deklarativní označení DropDownList mělo vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="7999e-147">After the `AppendDataBoundItems` property has been set and the `ListItem` added, the DropDownList s declarative markup should look like:</span></span>

[!code-aspx[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample1.aspx)]

<span data-ttu-id="7999e-148">Obrázek 5 ukazuje snímek obrazovky s aktuálním průběhem při prohlížení v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="7999e-148">Figure 5 shows a screen shot of our current progress, when viewed through a browser.</span></span>

<span data-ttu-id="7999e-149">[![ec DropDownList pro dodavatele obsahuje hodnotu Zobrazit vše v seznamu a jednu pro každého dodavatele.](limiting-data-modification-functionality-based-on-the-user-cs/_static/image14.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-149">[![The Suppliers DropDownList Contains a Show ALL ListItem, Plus One for Each Supplier](limiting-data-modification-functionality-based-on-the-user-cs/_static/image14.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image13.png)</span></span>

<span data-ttu-id="7999e-150">**Obrázek 5**: `Suppliers` DropDownList obsahuje příkaz Show All `ListItem`a jeden pro každého dodavatele ([kliknutím zobrazíte obrázek v plné velikosti).](limiting-data-modification-functionality-based-on-the-user-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-150">**Figure 5**: The `Suppliers` DropDownList Contains a Show ALL `ListItem`, Plus One for Each Supplier ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image15.png))</span></span>

<span data-ttu-id="7999e-151">Vzhledem k tomu, že chceme aktualizovat uživatelské rozhraní hned po změně výběru uživatelem, nastavte vlastnost `Suppliers` DropDownList s `AutoPostBack` na `true`.</span><span class="sxs-lookup"><span data-stu-id="7999e-151">Since we want to update the user interface immediately after the user has changed their selection, set the `Suppliers` DropDownList s `AutoPostBack` property to `true`.</span></span> <span data-ttu-id="7999e-152">V kroku 2 vytvoříme ovládací prvek DetailsView, který zobrazí informace o dodavatelích na základě výběru DropDownList.</span><span class="sxs-lookup"><span data-stu-id="7999e-152">In Step 2 we'll create a DetailsView control that will show the information for the supplier(s) based on the DropDownList selection.</span></span> <span data-ttu-id="7999e-153">V kroku 3 potom vytvoříme obslužnou rutinu události pro tuto událost DropDownList s `SelectedIndexChanged`, do které přidáte kód, který sváže příslušné informace o dodavateli s ovládacím prvkem na základě vybraného dodavatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-153">Then, in Step 3, we'll create an event handler for this DropDownList s `SelectedIndexChanged` event, in which we'll add code that binds the appropriate supplier information to the DetailsView based upon the selected supplier.</span></span>

## <a name="step-2-adding-a-detailsview-control"></a><span data-ttu-id="7999e-154">Krok 2: Přidání ovládacího prvku DetailsView</span><span class="sxs-lookup"><span data-stu-id="7999e-154">Step 2: Adding a DetailsView Control</span></span>

<span data-ttu-id="7999e-155">Umožňuje použít prvek DetailsView k zobrazení informací o dodavateli.</span><span class="sxs-lookup"><span data-stu-id="7999e-155">Let s use a DetailsView to show supplier information.</span></span> <span data-ttu-id="7999e-156">Pro uživatele, který může zobrazit a upravit všechny dodavatele, bude ovládací prvek DetailsView podporovat stránkování, což uživateli umožňuje procházet informace o dodavateli v jednom okamžiku.</span><span class="sxs-lookup"><span data-stu-id="7999e-156">For the user who can view and edit all suppliers, the DetailsView will support paging, allowing the user to step through the supplier information one record at a time.</span></span> <span data-ttu-id="7999e-157">Pokud je však uživatel pro konkrétního dodavatele fungovat, zobrazí se v ovládacím prvku DetailsView pouze konkrétní informace o dodavatelích a nebude zahrnovat rozhraní stránkování.</span><span class="sxs-lookup"><span data-stu-id="7999e-157">If the user works for a particular supplier, however, the DetailsView will show only that particular supplier s information and will not include a paging interface.</span></span> <span data-ttu-id="7999e-158">V obou případech musí DetailsView uživateli dovolit, aby upravil pole Adresa dodavatele, města a země.</span><span class="sxs-lookup"><span data-stu-id="7999e-158">In either case, the DetailsView needs to allow the user to edit the supplier s address, city, and country fields.</span></span>

<span data-ttu-id="7999e-159">Přidejte prvek DetailsView na stránku pod `Suppliers` DropDownList, nastavte jeho vlastnost `ID` na `SupplierDetails`a navažte ji na `AllSuppliersDataSource` ObjectDataSource vytvořeném v předchozím kroku.</span><span class="sxs-lookup"><span data-stu-id="7999e-159">Add a DetailsView to the page beneath the `Suppliers` DropDownList, set its `ID` property to `SupplierDetails`, and bind it to the `AllSuppliersDataSource` ObjectDataSource created in the previous step.</span></span> <span data-ttu-id="7999e-160">Potom zaškrtněte políčka Povolit stránkování a povolit úpravy z inteligentní značky DetailsView s.</span><span class="sxs-lookup"><span data-stu-id="7999e-160">Next, check the Enable Paging and Enable Editing checkboxes from the DetailsView s smart tag.</span></span>

> [!NOTE]
> <span data-ttu-id="7999e-161">Pokud nevidíte možnost Povolit úpravy v inteligentní značce DetailsView s, protože jste nemapovali metodu ObjectDataSource s `Update()` na metodu `SuppliersBLL` třídy s `UpdateSupplierAddress`.</span><span class="sxs-lookup"><span data-stu-id="7999e-161">If you don t see an Enable Editing option in the DetailsView s smart tag it s because you did not map the ObjectDataSource s `Update()` method to the `SuppliersBLL` class s `UpdateSupplierAddress` method.</span></span> <span data-ttu-id="7999e-162">Chvíli počkejte, než se vrátíte zpátky a udělejte tuto změnu konfigurace, po které by se měla možnost Povolit úpravy zobrazit v inteligentní značce DetailsView s.</span><span class="sxs-lookup"><span data-stu-id="7999e-162">Take a moment to go back and make this configuration change, after which the Enable Editing option should appear in the DetailsView s smart tag.</span></span>

<span data-ttu-id="7999e-163">Vzhledem k tomu, že metoda `SuppliersBLL` třídy s `UpdateSupplierAddress` přijímá pouze čtyři parametry-`supplierID`, `address`, `city`a `country`-upravit ovládací prvek DetailsView s BoundFields tak, aby `CompanyName` a `Phone` BoundFields jsou jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="7999e-163">Since the `SuppliersBLL` class s `UpdateSupplierAddress` method only accepts four parameters - `supplierID`, `address`, `city`, and `country` - modify the DetailsView s BoundFields so that the `CompanyName` and `Phone` BoundFields are read-only.</span></span> <span data-ttu-id="7999e-164">Kromě toho odeberte `SupplierID` vlastnost BoundField zcela.</span><span class="sxs-lookup"><span data-stu-id="7999e-164">Additionally, remove the `SupplierID` BoundField altogether.</span></span> <span data-ttu-id="7999e-165">Nakonec má `AllSuppliersDataSource` ObjectDataSource aktuálně má svou vlastnost `OldValuesParameterFormatString` nastavenou na `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="7999e-165">Finally, the `AllSuppliersDataSource` ObjectDataSource currently has its `OldValuesParameterFormatString` property set to `original_{0}`.</span></span> <span data-ttu-id="7999e-166">Chvíli odeberte nastavení této vlastnosti z deklarativní syntaxe nebo ji nastavte na výchozí hodnotu, `{0}`.</span><span class="sxs-lookup"><span data-stu-id="7999e-166">Take a moment to remove this property setting from the declarative syntax altogether, or set it to the default value, `{0}`.</span></span>

<span data-ttu-id="7999e-167">Po nakonfigurování `SupplierDetails` DetailsView a `AllSuppliersDataSource` ObjectDataSource budeme mít následující deklarativní označení:</span><span class="sxs-lookup"><span data-stu-id="7999e-167">After configuring the `SupplierDetails` DetailsView and `AllSuppliersDataSource` ObjectDataSource, we will have the following declarative markup:</span></span>

[!code-aspx[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample2.aspx)]

<span data-ttu-id="7999e-168">V tomto okamžiku může být element DetailsView stránkou a zvolené informace o adrese dodavatele lze aktualizovat bez ohledu na výběr, který jste provedli v `Suppliers` DropDownList (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="7999e-168">At this point the DetailsView can be paged through and the selected supplier s address information can be updated, regardless of the selection made in the `Suppliers` DropDownList (see Figure 6).</span></span>

<span data-ttu-id="7999e-169">[![se můžou zobrazit informace o dodavatelích a její adresa se aktualizuje.](limiting-data-modification-functionality-based-on-the-user-cs/_static/image17.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-169">[![Any Suppliers Information Can Be Viewed, and Its Address Updated](limiting-data-modification-functionality-based-on-the-user-cs/_static/image17.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image16.png)</span></span>

<span data-ttu-id="7999e-170">**Obrázek 6**: informace o všech dodavatelích se dají zobrazit a její adresa se aktualizovala ([kliknutím zobrazíte obrázek v plné velikosti).](limiting-data-modification-functionality-based-on-the-user-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-170">**Figure 6**: Any Suppliers Information Can Be Viewed, and Its Address Updated ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image18.png))</span></span>

## <a name="step-3-displaying-only-the-selected-supplier-s-information"></a><span data-ttu-id="7999e-171">Krok 3: zobrazení pouze vybraných informací o dodavateli</span><span class="sxs-lookup"><span data-stu-id="7999e-171">Step 3: Displaying Only the Selected Supplier s Information</span></span>

<span data-ttu-id="7999e-172">Na naší stránce jsou aktuálně zobrazeny informace pro všechny dodavatele bez ohledu na to, zda byl vybrán konkrétní dodavatel z `Suppliers` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="7999e-172">Our page currently displays the information for all suppliers regardless of whether a particular supplier has been selected from the `Suppliers` DropDownList.</span></span> <span data-ttu-id="7999e-173">Aby bylo možné zobrazit jenom informace o dodavatelích pro vybraného dodavatele, musíme na naši stránku přidat další prvek ObjectDataSource, což načte informace o určitém dodavateli.</span><span class="sxs-lookup"><span data-stu-id="7999e-173">In order to display just the supplier information for the selected supplier we need to add another ObjectDataSource to our page, one that retrieves information about a particular supplier.</span></span>

<span data-ttu-id="7999e-174">Přidejte na stránku nový prvek ObjectDataSource a pojmenujte ho `SingleSupplierDataSource`.</span><span class="sxs-lookup"><span data-stu-id="7999e-174">Add a new ObjectDataSource to the page, naming it `SingleSupplierDataSource`.</span></span> <span data-ttu-id="7999e-175">Z inteligentní značky klikněte na odkaz Konfigurovat zdroj dat a použijte metodu `GetSupplierBySupplierID(supplierID)` `SuppliersBLL` třídy s.</span><span class="sxs-lookup"><span data-stu-id="7999e-175">From its smart tag, click the Configure Data Source link and have it use the `SuppliersBLL` class s `GetSupplierBySupplierID(supplierID)` method.</span></span> <span data-ttu-id="7999e-176">Stejně jako u `AllSuppliersDataSource` ObjectDataSource mají `SingleSupplierDataSource` prvek ObjectDataSource s `Update()` namapovaný na `UpdateSupplierAddress` metodu `SuppliersBLL` třídy s.</span><span class="sxs-lookup"><span data-stu-id="7999e-176">As with the `AllSuppliersDataSource` ObjectDataSource, have the `SingleSupplierDataSource` ObjectDataSource s `Update()` method mapped to the `SuppliersBLL` class s `UpdateSupplierAddress` method.</span></span>

<span data-ttu-id="7999e-177">[![nakonfigurovat prvek ObjectDataSource SingleSupplierDataSource na použití metody GetSupplierBySupplierID (KódDodavatele)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image20.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-177">[![Configure the SingleSupplierDataSource ObjectDataSource to Use the GetSupplierBySupplierID(supplierID) Method](limiting-data-modification-functionality-based-on-the-user-cs/_static/image20.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image19.png)</span></span>

<span data-ttu-id="7999e-178">**Obrázek 7**: Konfigurace `SingleSupplierDataSource` ObjectDataSource pro použití metody `GetSupplierBySupplierID(supplierID)` ([kliknutím zobrazíte obrázek v plné velikosti](limiting-data-modification-functionality-based-on-the-user-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="7999e-178">**Figure 7**: Configure the `SingleSupplierDataSource` ObjectDataSource to Use the `GetSupplierBySupplierID(supplierID)` Method ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image21.png))</span></span>

<span data-ttu-id="7999e-179">V dalším kroku se zobrazí výzva k zadání zdroje parametrů pro `GetSupplierBySupplierID(supplierID)` metoda s `supplierID` vstupním parametrem.</span><span class="sxs-lookup"><span data-stu-id="7999e-179">Next, we re prompted to specify the parameter source for the `GetSupplierBySupplierID(supplierID)` method s `supplierID` input parameter.</span></span> <span data-ttu-id="7999e-180">Vzhledem k tomu, že chceme zobrazit informace pro dodavatele vybrané z DropDownList, použijte jako zdroj parametru vlastnost `Suppliers` DropDownList s `SelectedValue`.</span><span class="sxs-lookup"><span data-stu-id="7999e-180">Since we want to show the information for the supplier selected from the DropDownList, use the `Suppliers` DropDownList s `SelectedValue` property as the parameter source.</span></span>

<span data-ttu-id="7999e-181">[![jako zdroj parametru ČísloDodavatele použít DropDownList pro dodavatele](limiting-data-modification-functionality-based-on-the-user-cs/_static/image23.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-181">[![Use the Suppliers DropDownList as the supplierID Parameter Source](limiting-data-modification-functionality-based-on-the-user-cs/_static/image23.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image22.png)</span></span>

<span data-ttu-id="7999e-182">**Obrázek 8**: jako zdroj parametru `supplierID` použijte `Suppliers` DropDownList ([kliknutím zobrazíte obrázek v plné velikosti).](limiting-data-modification-functionality-based-on-the-user-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-182">**Figure 8**: Use the `Suppliers` DropDownList as the `supplierID` Parameter Source ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image24.png))</span></span>

<span data-ttu-id="7999e-183">I s tímto druhým prvkem ObjectDataSource přidány je ovládací prvek DetailsView aktuálně nakonfigurován tak, aby vždy používal `AllSuppliersDataSource` ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="7999e-183">Even with this second ObjectDataSource added, the DetailsView control is currently configured to always use the `AllSuppliersDataSource` ObjectDataSource.</span></span> <span data-ttu-id="7999e-184">Musíme přidat logiku pro úpravu zdroje dat používaného ovládacím prvkem DetailsView v závislosti na vybrané položce `Suppliers` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="7999e-184">We need to add logic to adjust the data source used by the DetailsView depending on the `Suppliers` DropDownList item selected.</span></span> <span data-ttu-id="7999e-185">K tomuto účelu vytvořte obslužnou rutinu události `SelectedIndexChanged` pro DropDownList pro dodavatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-185">To accomplish this, create a `SelectedIndexChanged` event handler for the Suppliers DropDownList.</span></span> <span data-ttu-id="7999e-186">To lze snadno vytvořit dvojitým kliknutím na DropDownList v návrháři.</span><span class="sxs-lookup"><span data-stu-id="7999e-186">This can most easily be created by double-clicking the DropDownList in the Designer.</span></span> <span data-ttu-id="7999e-187">Tato obslužná rutina události musí určit, jaký zdroj dat se má použít, a musí znovu vytvořit vazby dat k prvku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="7999e-187">This event handler needs to determine what data source to use and must rebind the data to the DetailsView.</span></span> <span data-ttu-id="7999e-188">Toho je možné dosáhnout pomocí následujícího kódu:</span><span class="sxs-lookup"><span data-stu-id="7999e-188">This is accomplished with the following code:</span></span>

[!code-csharp[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample3.cs)]

<span data-ttu-id="7999e-189">Obslužná rutina události začíná tím, že určí, zda byla vybrána možnost Zobrazit/upravit všechny dodavatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-189">The event handler begins by determining whether the "Show/Edit ALL Suppliers" option was selected.</span></span> <span data-ttu-id="7999e-190">Pokud byl, nastaví `SupplierDetails` DetailsView s `DataSourceID` na `AllSuppliersDataSource` a vrátí uživatele k prvnímu záznamu v sadě dodavatelů nastavením vlastnosti `PageIndex` na hodnotu 0.</span><span class="sxs-lookup"><span data-stu-id="7999e-190">If it was, it sets the `SupplierDetails` DetailsView s `DataSourceID` to `AllSuppliersDataSource` and returns the user to the first record in the set of suppliers by setting the `PageIndex` property to 0.</span></span> <span data-ttu-id="7999e-191">Pokud však uživatel vybral konkrétního dodavatele z DropDownList, `DataSourceID` ovládacího prvku DetailsView přiřazen `SingleSuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="7999e-191">If, however, the user has selected a particular supplier from the DropDownList, the DetailsView s `DataSourceID` is assigned to `SingleSuppliersDataSource`.</span></span> <span data-ttu-id="7999e-192">Bez ohledu na to, jaký zdroj dat se používá, je režim `SuppliersDetails` vrácen zpět do režimu jen pro čtení a data jsou znovu svázána s ovládacím prvkem DetailsView voláním metody `SuppliersDetails` Control s `DataBind()`.</span><span class="sxs-lookup"><span data-stu-id="7999e-192">Regardless of what data source is used, the `SuppliersDetails` mode is reverted back to the read-only mode and the data is rebound to the DetailsView by a call to the `SuppliersDetails` control s `DataBind()` method.</span></span>

<span data-ttu-id="7999e-193">V rámci této obslužné rutiny události nyní ovládací prvek DetailsView zobrazuje vybraného dodavatele, pokud nebyla vybrána možnost Zobrazit/upravit všechny dodavatele. v takovém případě lze všechny dodavatele zobrazit přes rozhraní stránkování.</span><span class="sxs-lookup"><span data-stu-id="7999e-193">With this event handler in place, the DetailsView control now shows the selected supplier, unless the "Show/Edit ALL Suppliers" option was selected, in which case all of the suppliers can be viewed through the paging interface.</span></span> <span data-ttu-id="7999e-194">Obrázek 9 zobrazí stránku s vybranou možností zobrazit/upravit všechny dodavatele; Všimněte si, že rozhraní stránkování je k dispozici a umožňuje uživateli navštívit a aktualizovat libovolného dodavatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-194">Figure 9 shows the page with the "Show/Edit ALL Suppliers" option selected; note that the paging interface is present, allowing the user to visit and update any supplier.</span></span> <span data-ttu-id="7999e-195">Obrázek 10 ukazuje stránku s vybraným dodavatelem Ma Maison.</span><span class="sxs-lookup"><span data-stu-id="7999e-195">Figure 10 shows the page with the Ma Maison supplier selected.</span></span> <span data-ttu-id="7999e-196">V tomto případě se v tomto případě v tomto případě dá zobrazit a upravit jenom informace Ma Maison.</span><span class="sxs-lookup"><span data-stu-id="7999e-196">Only Ma Maison s information is viewable and editable in this case.</span></span>

<span data-ttu-id="7999e-197">[![se všechny informace o dodavatelích dají zobrazit a upravit.](limiting-data-modification-functionality-based-on-the-user-cs/_static/image26.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-197">[![All of the Suppliers Information Can Be Viewed and Edited](limiting-data-modification-functionality-based-on-the-user-cs/_static/image26.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image25.png)</span></span>

<span data-ttu-id="7999e-198">**Obrázek 9**: můžete zobrazit a upravit všechny informace o dodavatelích ([kliknutím zobrazíte obrázek v plné velikosti).](limiting-data-modification-functionality-based-on-the-user-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-198">**Figure 9**: All of the Suppliers Information Can Be Viewed and Edited ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image27.png))</span></span>

<span data-ttu-id="7999e-199">[![zobrazit a upravit lze pouze vybrané informace dodavatele.](limiting-data-modification-functionality-based-on-the-user-cs/_static/image29.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-199">[![Only the Selected Supplier s Information Can Be Viewed and Edited](limiting-data-modification-functionality-based-on-the-user-cs/_static/image29.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image28.png)</span></span>

<span data-ttu-id="7999e-200">**Obrázek 10**: zobrazit a upravit lze pouze vybrané informace dodavatele ([kliknutím zobrazíte obrázek v plné velikosti).](limiting-data-modification-functionality-based-on-the-user-cs/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-200">**Figure 10**: Only the Selected Supplier s Information Can Be Viewed and Edited ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="7999e-201">Pro tento kurz musí být ovládací prvek DropDownList i DetailsView `EnableViewState` nastavena na `true` (výchozí), protože změny vlastností ovládacího prvku DropDownList s `SelectedIndex` a ovládacího prvku DetailsView s `DataSourceID` musí být zapamatovatelné napříč zpětnými voláními.</span><span class="sxs-lookup"><span data-stu-id="7999e-201">For this tutorial, both the DropDownList and DetailsView control s `EnableViewState` must be set to `true` (the default) because the DropDownList s `SelectedIndex` and the DetailsView s `DataSourceID` property s changes must be remembered across postbacks.</span></span>

## <a name="step-4-listing-the-suppliers-products-in-an-editable-gridview"></a><span data-ttu-id="7999e-202">Krok 4: výpis produktů dodavatelů do upravitelného prvku GridView</span><span class="sxs-lookup"><span data-stu-id="7999e-202">Step 4: Listing the Suppliers Products in an Editable GridView</span></span>

<span data-ttu-id="7999e-203">Po dokončení našeho prvku DetailsView je dalším krokem zahrnutí upravitelného prvku GridView, který obsahuje seznam produktů poskytovaných vybraným dodavatelem.</span><span class="sxs-lookup"><span data-stu-id="7999e-203">With the DetailsView complete, our next step is to include an editable GridView that lists those products provided by the selected supplier.</span></span> <span data-ttu-id="7999e-204">Tento prvek GridView by měl umožňovat úpravy pouze polí `ProductName` a `QuantityPerUnit`.</span><span class="sxs-lookup"><span data-stu-id="7999e-204">This GridView should allow edits to only the `ProductName` and `QuantityPerUnit` fields.</span></span> <span data-ttu-id="7999e-205">Pokud uživatel, který stránku navštíví, pochází z konkrétního dodavatele, mělo by to umožňovat pouze aktualizace těchto produktů, *které nejsou* ukončeny.</span><span class="sxs-lookup"><span data-stu-id="7999e-205">Moreover, if the user visiting the page is from a particular supplier, it should only allow updates to those products that are *not* discontinued.</span></span> <span data-ttu-id="7999e-206">Abychom to mohli udělat, musíte nejdřív přidat přetížení metody `ProductsBLL` třídy s `UpdateProducts`, která přebírá pouze pole `ProductID`, `ProductName`a `QuantityPerUnit` jako vstupy.</span><span class="sxs-lookup"><span data-stu-id="7999e-206">To accomplish this we'll need to first add an overload of the `ProductsBLL` class s `UpdateProducts` method that takes in just the `ProductID`, `ProductName`, and `QuantityPerUnit` fields as inputs.</span></span> <span data-ttu-id="7999e-207">V mnoha kurzech jsme tento proces předem provedli, takže Podívejme se jenom na kód, který by měl být přidaný do `ProductsBLL`:</span><span class="sxs-lookup"><span data-stu-id="7999e-207">We ve stepped through this process beforehand in numerous tutorials, so let s just look at the code here, which should be added to `ProductsBLL`:</span></span>

[!code-csharp[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample4.cs)]

<span data-ttu-id="7999e-208">Po vytvoření tohoto přetížení se znovu připravujeme k přidání ovládacího prvku GridView a jeho přidruženého prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="7999e-208">With this overload created, we re ready to add the GridView control and its associated ObjectDataSource.</span></span> <span data-ttu-id="7999e-209">Přidejte na stránku nový prvek GridView, nastavte jeho vlastnost `ID` na `ProductsBySupplier`a nakonfigurujte ji tak, aby používala nový prvek ObjectDataSource s názvem `ProductsBySupplierDataSource`.</span><span class="sxs-lookup"><span data-stu-id="7999e-209">Add a new GridView to the page, set its `ID` property to `ProductsBySupplier`, and configure it to use a new ObjectDataSource named `ProductsBySupplierDataSource`.</span></span> <span data-ttu-id="7999e-210">Vzhledem k tomu, že chceme, aby tento prvek GridView vypisovat tyto produkty vybraným dodavatelem, použijte metodu `GetProductsBySupplierID(supplierID)` `ProductsBLL` třídy s.</span><span class="sxs-lookup"><span data-stu-id="7999e-210">Since we want this GridView to list those products by the selected supplier, use the `ProductsBLL` class s `GetProductsBySupplierID(supplierID)` method.</span></span> <span data-ttu-id="7999e-211">Namapujte také metodu `Update()` na nové přetížení `UpdateProduct`, které jsme právě vytvořili.</span><span class="sxs-lookup"><span data-stu-id="7999e-211">Also map the `Update()` method to the new `UpdateProduct` overload we just created.</span></span>

<span data-ttu-id="7999e-212">[![nakonfigurovat prvek ObjectDataSource na použití právě vytvořeného přetížení UpdateProduct](limiting-data-modification-functionality-based-on-the-user-cs/_static/image32.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-212">[![Configure the ObjectDataSource to Use the UpdateProduct Overload Just Created](limiting-data-modification-functionality-based-on-the-user-cs/_static/image32.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image31.png)</span></span>

<span data-ttu-id="7999e-213">**Obrázek 11**: Konfigurace prvku ObjectDataSource pro použití právě vytvořeného přetížení `UpdateProduct` ([kliknutím zobrazíte obrázek v plné velikosti](limiting-data-modification-functionality-based-on-the-user-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="7999e-213">**Figure 11**: Configure the ObjectDataSource to Use the `UpdateProduct` Overload Just Created ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image33.png))</span></span>

<span data-ttu-id="7999e-214">Po zobrazení výzvy k výběru zdroje parametrů pro `supplierID` vstupní parametr `GetProductsBySupplierID(supplierID)` metoda.</span><span class="sxs-lookup"><span data-stu-id="7999e-214">We re prompted to select the parameter source for the `GetProductsBySupplierID(supplierID)` method s `supplierID` input parameter.</span></span> <span data-ttu-id="7999e-215">Vzhledem k tomu, že chceme Zobrazit produkty pro dodavatele vybrané v ovládacím prvku DetailsView, použijte jako zdroj parametru vlastnost `SuppliersDetails` DetailsView Control s `SelectedValue`.</span><span class="sxs-lookup"><span data-stu-id="7999e-215">Since we want to show the products for the supplier selected in the DetailsView, use the `SuppliersDetails` DetailsView control s `SelectedValue` property as the parameter source.</span></span>

<span data-ttu-id="7999e-216">[![jako zdroj parametru použít vlastnost SuppliersDetails DetailsView s SelectedValue](limiting-data-modification-functionality-based-on-the-user-cs/_static/image35.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-216">[![Use the SuppliersDetails DetailsView s SelectedValue Property as the Parameter Source](limiting-data-modification-functionality-based-on-the-user-cs/_static/image35.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image34.png)</span></span>

<span data-ttu-id="7999e-217">**Obrázek 12**: použití vlastnosti `SuppliersDetails` DetailsView s `SelectedValue` jako zdroje parametru ([kliknutím zobrazíte obrázek v plné velikosti](limiting-data-modification-functionality-based-on-the-user-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="7999e-217">**Figure 12**: Use the `SuppliersDetails` DetailsView s `SelectedValue` Property as the Parameter Source ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image36.png))</span></span>

<span data-ttu-id="7999e-218">Pokud se vrátíte do prvku GridView, odeberte všechna pole GridView s výjimkou `ProductName`, `QuantityPerUnit`a `Discontinued`a označte `Discontinued` třídě CheckBoxField podporována jako jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="7999e-218">Returning to the GridView, remove all of the GridView fields except for `ProductName`, `QuantityPerUnit`, and `Discontinued`, marking the `Discontinued` CheckBoxField as read-only.</span></span> <span data-ttu-id="7999e-219">Také zaškrtněte možnost Povolit úpravy z inteligentní značky GridView s.</span><span class="sxs-lookup"><span data-stu-id="7999e-219">Also, check the Enable Editing option from the GridView s smart tag.</span></span> <span data-ttu-id="7999e-220">Po provedení těchto změn by deklarativní označení ovládacího prvku GridView a ObjectDataSource mělo vypadat podobně jako následující:</span><span class="sxs-lookup"><span data-stu-id="7999e-220">After these changes have been made, the declarative markup for the GridView and ObjectDataSource should look similar to the following:</span></span>

[!code-aspx[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample5.aspx)]

<span data-ttu-id="7999e-221">Stejně jako u našich předchozích ObjectDataSource je tato vlastnost `OldValuesParameterFormatString` nastavena na hodnotu `original_{0}`, což způsobí problémy při pokusu o aktualizaci názvu produktu nebo množství na jednotku.</span><span class="sxs-lookup"><span data-stu-id="7999e-221">As with our previous ObjectDataSources, this one s `OldValuesParameterFormatString` property is set to `original_{0}`, which will cause problems when attempting to update a product s name or quantity per unit.</span></span> <span data-ttu-id="7999e-222">Odeberte tuto vlastnost z deklarativní syntaxe úplně nebo ji nastavte na výchozí `{0}`.</span><span class="sxs-lookup"><span data-stu-id="7999e-222">Remove this property from the declarative syntax altogether or set it to its default, `{0}`.</span></span>

<span data-ttu-id="7999e-223">Po dokončení této konfigurace na naší stránce se teď zobrazí seznam produktů poskytovaných dodavatelem vybraným v prvku GridView (viz obrázek 13).</span><span class="sxs-lookup"><span data-stu-id="7999e-223">With this configuration complete, our page now lists the products provided by the supplier selected in the GridView (see Figure 13).</span></span> <span data-ttu-id="7999e-224">V současné době je možné aktualizovat *libovolný* název produktu nebo množství na jednotku.</span><span class="sxs-lookup"><span data-stu-id="7999e-224">Currently *any* product s name or quantity per unit can be updated.</span></span> <span data-ttu-id="7999e-225">Musíme ale aktualizovat naši logiku stránky tak, aby byly tyto funkce pro uživatele přidružené k určitému dodavateli zakázané pro ukončené produkty.</span><span class="sxs-lookup"><span data-stu-id="7999e-225">However, we need to update our page logic so that such functionality is prohibited for discontinued products for users associated with a particular supplier.</span></span> <span data-ttu-id="7999e-226">Tento závěrečný kámen provedeme v kroku 5.</span><span class="sxs-lookup"><span data-stu-id="7999e-226">We'll tackle this final piece in Step 5.</span></span>

<span data-ttu-id="7999e-227">[Zobrazí se ![produktů poskytovaných vybraným dodavatelem.](limiting-data-modification-functionality-based-on-the-user-cs/_static/image38.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-227">[![The Products Provided by the Selected Supplier are Displayed](limiting-data-modification-functionality-based-on-the-user-cs/_static/image38.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image37.png)</span></span>

<span data-ttu-id="7999e-228">**Obrázek 13**: zobrazí se produkty poskytované vybraným dodavatelem ([kliknutím zobrazíte obrázek v plné velikosti](limiting-data-modification-functionality-based-on-the-user-cs/_static/image39.png)).</span><span class="sxs-lookup"><span data-stu-id="7999e-228">**Figure 13**: The Products Provided by the Selected Supplier are Displayed ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image39.png))</span></span>

> [!NOTE]
> <span data-ttu-id="7999e-229">Přidáním tohoto upravitelného prvku GridView by se měla aktualizovat obslužná rutina události `Suppliers` DropDownList s `SelectedIndexChanged`, aby vracela prvek GridView do stavu jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="7999e-229">With the addition of this editable GridView the `Suppliers` DropDownList s `SelectedIndexChanged` event handler should be updated to return the GridView to a read-only state.</span></span> <span data-ttu-id="7999e-230">V opačném případě je v případě, že je v úpravě informací o produktu vybrán jiný dodavatel, odpovídající index v prvku GridView pro nového dodavatele bude také možné upravovat.</span><span class="sxs-lookup"><span data-stu-id="7999e-230">Otherwise, if a different supplier is selected while in the middle of editing product information, the corresponding index in the GridView for the new supplier will also be editable.</span></span> <span data-ttu-id="7999e-231">Chcete-li tomu zabránit, jednoduše nastavte vlastnost GridView s `EditIndex` na `-1` v obslužné rutině události `SelectedIndexChanged`.</span><span class="sxs-lookup"><span data-stu-id="7999e-231">To prevent this, simply set the GridView s `EditIndex` property to `-1` in the `SelectedIndexChanged` event handler.</span></span>

<span data-ttu-id="7999e-232">Také si vyvoláte, že je důležité, aby byl povolen stav zobrazení GridView s (výchozí chování).</span><span class="sxs-lookup"><span data-stu-id="7999e-232">Also, recall that it is important that the GridView s view state be enabled (the default behavior).</span></span> <span data-ttu-id="7999e-233">Pokud nastavíte vlastnost `EnableViewState` prvku GridView s na hodnotu `false`, spustíte riziko, že neúmyslně odstraní nebo upraví záznamy v souběžných uživatelích.</span><span class="sxs-lookup"><span data-stu-id="7999e-233">If you set the GridView s `EnableViewState` property to `false`, you run the risk of having concurrent users unintentionally deleting or editing records.</span></span> <span data-ttu-id="7999e-234">Viz [Upozornění: problém souběžnosti s ASP.NET 2,0 gridviews/DetailsView/formviews, které podporují úpravy a/nebo odstraňování a jejichž stav zobrazení je zakázán](http://scottonwriting.net/sowblog/posts/10054.aspx) pro další informace.</span><span class="sxs-lookup"><span data-stu-id="7999e-234">See [WARNING: Concurrency Issue with ASP.NET 2.0 GridViews/DetailsView/FormViews that Support Editing and/or Deleting and Whose View State is Disabled](http://scottonwriting.net/sowblog/posts/10054.aspx) for more information.</span></span>

## <a name="step-5-disallow-editing-for-discontinued-products-when-showedit-all-suppliers-is-not-selected"></a><span data-ttu-id="7999e-235">Krok 5: Zákaz úprav pro ukončené produkty, když není vybraná možnost Zobrazit/upravit všechny dodavatele</span><span class="sxs-lookup"><span data-stu-id="7999e-235">Step 5: Disallow Editing for Discontinued Products When Show/Edit ALL Suppliers is Not Selected</span></span>

<span data-ttu-id="7999e-236">I když je prvek GridView `ProductsBySupplier` plně funkční, aktuálně uděluje uživatelům, kteří jsou od konkrétního dodavatele, příliš velký přístup.</span><span class="sxs-lookup"><span data-stu-id="7999e-236">While the `ProductsBySupplier` GridView is fully functional, it currently grants too much access to those users who are from a particular supplier.</span></span> <span data-ttu-id="7999e-237">Podle našich obchodních pravidel by tito uživatelé neměli moct aktualizovat vyřazené produkty.</span><span class="sxs-lookup"><span data-stu-id="7999e-237">Per our business rules, such users should not be able to update discontinued products.</span></span> <span data-ttu-id="7999e-238">K vykonání tohoto problému můžeme skrýt (nebo zakázat) tlačítko Upravit v těchto řádcích GridView s ukončenými produkty, pokud je stránka navštívená uživatelem od dodavatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-238">To enforce this, we can hide (or disable) the Edit button in those GridView rows with discontinued products when the page is being visited by a user from a supplier.</span></span>

<span data-ttu-id="7999e-239">Vytvořte obslužnou rutinu události pro `RowDataBound` událost GridView.</span><span class="sxs-lookup"><span data-stu-id="7999e-239">Create an event handler for the GridView s `RowDataBound` event.</span></span> <span data-ttu-id="7999e-240">V této obslužné rutině je potřeba určit, jestli je uživatel přidružený ke konkrétnímu dodavateli, který je pro tento kurz určený, a to tak, že zkontroluje `SelectedValue` vlastnost dodavatelé pro dodavatele – Pokud je to něco jiného než-1, bude uživatel přidružený k určitému dodavateli.</span><span class="sxs-lookup"><span data-stu-id="7999e-240">In this event handler we need to determine whether or not the user is associated with a particular supplier, which, for this tutorial, can be determined by checking the Suppliers DropDownList s `SelectedValue` property - if it s something other than -1, then the user is associated with a particular supplier.</span></span> <span data-ttu-id="7999e-241">Pro tyto uživatele je pak potřeba určit, jestli je produkt vyřazený.</span><span class="sxs-lookup"><span data-stu-id="7999e-241">For such users, we then need to determine whether or not the product is discontinued.</span></span> <span data-ttu-id="7999e-242">Odkaz na skutečnou instanci `ProductRow` spojenou s řádkem GridView lze vytvořit prostřednictvím vlastnosti `e.Row.DataItem`, jak je popsáno v kurzu [*zobrazení souhrnných informací v tomto kurzu pro prvky GridView*](../custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="7999e-242">We can grab a reference to the actual `ProductRow` instance bound to the GridView row via the `e.Row.DataItem` property, as discussed in the [*Displaying Summary Information in the GridView s Footer*](../custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs.md) tutorial.</span></span> <span data-ttu-id="7999e-243">Pokud je produkt vyřazený, můžeme pomocí technik popsaných v předchozím kurzu přikázat na tlačítko pro úpravy v prvku GridView s CommandField a [*Přidat potvrzení na straně klienta*](adding-client-side-confirmation-when-deleting-cs.md).</span><span class="sxs-lookup"><span data-stu-id="7999e-243">If the product is discontinued, we can grab a programmatic reference to the Edit button in the GridView s CommandField using the techniques discussed in the previous tutorial, [*Adding Client-Side Confirmation When Deleting*](adding-client-side-confirmation-when-deleting-cs.md).</span></span> <span data-ttu-id="7999e-244">Až budeme mít odkaz, můžeme tlačítko skrýt nebo zakázat.</span><span class="sxs-lookup"><span data-stu-id="7999e-244">Once we have a reference we can then hide or disable the button.</span></span>

[!code-csharp[Main](limiting-data-modification-functionality-based-on-the-user-cs/samples/sample6.cs)]

<span data-ttu-id="7999e-245">Pokud je tato obslužná rutina události na místě, když navštívíte tuto stránku jako uživatel od konkrétního dodavatele, tyto produkty, které jsou vyřazené, nejsou editovatelné, protože pro tyto produkty je tlačítko Upravit skryté.</span><span class="sxs-lookup"><span data-stu-id="7999e-245">With this event handler in place, when visiting this page as a user from a specific supplier those products that are discontinued are not editable, as the Edit button is hidden for these products.</span></span> <span data-ttu-id="7999e-246">Například "Anton" s Gumbo mix je Nepokračující produkt pro nového dodavatele Orleans Cajun.</span><span class="sxs-lookup"><span data-stu-id="7999e-246">For example, Chef Anton s Gumbo Mix is a discontinued product for the New Orleans Cajun Delights supplier.</span></span> <span data-ttu-id="7999e-247">Při návštěvě stránky pro tohoto konkrétního dodavatele je tlačítko Upravit pro tento produkt skryté od pohledu (viz obrázek 14).</span><span class="sxs-lookup"><span data-stu-id="7999e-247">When visiting the page for this particular supplier, the Edit button for this product is hidden from sight (see Figure 14).</span></span> <span data-ttu-id="7999e-248">Když ale navštívíte pomocí možnosti Zobrazit/upravit všechny dodavatele, zpřístupní se tlačítko Upravit (viz obrázek 15).</span><span class="sxs-lookup"><span data-stu-id="7999e-248">However, when visiting using the "Show/Edit ALL Suppliers," the Edit button is available (see Figure 15).</span></span>

<span data-ttu-id="7999e-249">[![pro uživatele, kteří jsou konkrétní pro dodavatele, je tlačítko Upravit pro Gumbo pro Anton s](limiting-data-modification-functionality-based-on-the-user-cs/_static/image41.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-249">[![For Supplier-Specific Users the Edit Button for Chef Anton s Gumbo Mix is Hidden](limiting-data-modification-functionality-based-on-the-user-cs/_static/image41.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image40.png)</span></span>

<span data-ttu-id="7999e-250">**Obrázek 14**: u uživatelů specifických pro dodavatele je tlačítko Upravit pro Anton, které je Gumbo, skryté ([kliknutím zobrazíte obrázek v plné velikosti).](limiting-data-modification-functionality-based-on-the-user-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-250">**Figure 14**: For Supplier-Specific Users the Edit Button for Chef Anton s Gumbo Mix is Hidden ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image42.png))</span></span>

<span data-ttu-id="7999e-251">[![pro zobrazit nebo upravit všechny uživatele dodavatelů se zobrazí tlačítko Upravit pro Anton s Gumboem.](limiting-data-modification-functionality-based-on-the-user-cs/_static/image44.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-251">[![For Show/Edit ALL Suppliers Users, the Edit Button for Chef Anton s Gumbo Mix is Displayed](limiting-data-modification-functionality-based-on-the-user-cs/_static/image44.png)](limiting-data-modification-functionality-based-on-the-user-cs/_static/image43.png)</span></span>

<span data-ttu-id="7999e-252">**Obrázek 15**: u Zobrazit/upravit všechny uživatele dodavatelů se zobrazí tlačítko Upravit pro Anton, která obsahuje Gumbo ([kliknutím zobrazíte obrázek v plné velikosti).](limiting-data-modification-functionality-based-on-the-user-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="7999e-252">**Figure 15**: For Show/Edit ALL Suppliers Users, the Edit Button for Chef Anton s Gumbo Mix is Displayed ([Click to view full-size image](limiting-data-modification-functionality-based-on-the-user-cs/_static/image45.png))</span></span>

## <a name="checking-for-access-rights-in-the-business-logic-layer"></a><span data-ttu-id="7999e-253">Kontrola přístupových práv ve vrstvě obchodní logiky</span><span class="sxs-lookup"><span data-stu-id="7999e-253">Checking for Access Rights in the Business Logic Layer</span></span>

<span data-ttu-id="7999e-254">V tomto kurzu stránka ASP.NET zpracovává veškerou logiku s ohledem na informace, které uživatel uvidí a jaké produkty může aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="7999e-254">In this tutorial the ASP.NET page handles all logic with regards to what information the user can see and what products he can update.</span></span> <span data-ttu-id="7999e-255">V ideálním případě by tato logika byla také přítomna ve vrstvě obchodní logiky.</span><span class="sxs-lookup"><span data-stu-id="7999e-255">Ideally, this logic would also be present at the Business Logic Layer.</span></span> <span data-ttu-id="7999e-256">Například metoda `SuppliersBLL` třídy s `GetSuppliers()` (která vrací všechny dodavatele) může obsahovat kontrolu, aby se zajistilo, že aktuálně přihlášený uživatel *není* přidružen ke konkrétnímu dodavateli.</span><span class="sxs-lookup"><span data-stu-id="7999e-256">For example, the `SuppliersBLL` class s `GetSuppliers()` method (which returns all suppliers) might include a check to ensure that the currently logged on user is *not* associated with a specific supplier.</span></span> <span data-ttu-id="7999e-257">Podobně `UpdateSupplierAddress` metoda by mohla zahrnovat kontrolu, aby se zajistilo, že aktuálně přihlášený uživatel pracoval pro naši společnost (a proto může aktualizovat všechny informace o adrese dodavatele) nebo je přidružený k dodavateli, jehož data se aktualizují.</span><span class="sxs-lookup"><span data-stu-id="7999e-257">Likewise, the `UpdateSupplierAddress` method could include a check to ensure that the currently logged on user either worked for our company (and therefore can update all suppliers address information) or is associated with the supplier whose data is being updated.</span></span>

<span data-ttu-id="7999e-258">Nezahrnuli jsme sem tyto knihoven BLL kontroly, protože v našem kurzu jsou práva uživatele určena pomocí ovládacího prvkem DropDownList na stránce, ke kterému třídy knihoven BLL získat přístup.</span><span class="sxs-lookup"><span data-stu-id="7999e-258">I did not include such BLL-layer checks here because in our tutorial the user s rights are determined by a DropDownList on the page, which the BLL classes cannot access.</span></span> <span data-ttu-id="7999e-259">Při používání systému členství nebo jednoho z předem připravených ověřovacích schémat poskytovaných službou ASP.NET (například ověřování systému Windows) je přístup k informacím a rolím aktuálně přihlášeného uživatele z knihoven BLL, čímž se takový přístup stane. Kontrola práv je možná na prezentační i knihoven BLL vrstvě.</span><span class="sxs-lookup"><span data-stu-id="7999e-259">When using the membership system or one of the out-of-the box authentication schemes provided by ASP.NET (such as Windows authentication), the currently logged on user s information and roles information can be accessed from the BLL, thereby making such access rights checks possible at both the presentation and BLL layers.</span></span>

## <a name="summary"></a><span data-ttu-id="7999e-260">Přehled</span><span class="sxs-lookup"><span data-stu-id="7999e-260">Summary</span></span>

<span data-ttu-id="7999e-261">Většina webů, které poskytují uživatelské účty, musí přizpůsobit rozhraní změny dat na základě přihlášeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="7999e-261">Most sites that provide user accounts need to customize the data modification interface based upon the logged in user.</span></span> <span data-ttu-id="7999e-262">Uživatelé s právy pro správu mohou odstranit a upravit jakýkoli záznam, zatímco uživatelé bez oprávnění správce mohou být omezeni pouze na aktualizaci nebo odstranění záznamů, které sami vytvořili.</span><span class="sxs-lookup"><span data-stu-id="7999e-262">Administrative users may be able to delete and edit any record, whereas non-administrative users may be limited to only updating or deleting records they created themselves.</span></span> <span data-ttu-id="7999e-263">Bez ohledu na to, jak scénář může být, lze rozšířit třídy dat webové ovládací prvky, prvky ObjectDataSource a obchodní logiky tak, aby na základě přihlášeného uživatele mohli přidat nebo zamítnout určité funkce.</span><span class="sxs-lookup"><span data-stu-id="7999e-263">Whatever the scenario may be, the data Web controls, ObjectDataSource, and Business Logic Layer classes can be extended to add or deny certain functionality based on the logged on user.</span></span> <span data-ttu-id="7999e-264">V tomto kurzu jsme viděli, jak omezit zobrazitelná a upravitelná data v závislosti na tom, jestli byl uživatel přidružený ke konkrétnímu dodavateli nebo jestli pracoval pro naši společnost.</span><span class="sxs-lookup"><span data-stu-id="7999e-264">In this tutorial we saw how to limit the viewable and editable data depending on whether the user was associated with a particular supplier or if they worked for our company.</span></span>

<span data-ttu-id="7999e-265">V tomto kurzu se uzavírá naše zkoumání vkládání, aktualizace a odstraňování dat pomocí ovládacích prvků GridView, DetailsView a FormView.</span><span class="sxs-lookup"><span data-stu-id="7999e-265">This tutorial concludes our examination of inserting, updating, and deleting data using the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="7999e-266">Počínaje dalším kurzem vám budeme věnovat pozornost přidání podpory stránkování a řazení.</span><span class="sxs-lookup"><span data-stu-id="7999e-266">Starting with the next tutorial, we'll turn our attention to adding paging and sorting support.</span></span>

<span data-ttu-id="7999e-267">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="7999e-267">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="7999e-268">O autorovi</span><span class="sxs-lookup"><span data-stu-id="7999e-268">About the Author</span></span>

<span data-ttu-id="7999e-269">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="7999e-269">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="7999e-270">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="7999e-270">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="7999e-271">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="7999e-271">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="7999e-272">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7999e-272">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="7999e-273">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="7999e-273">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="7999e-274">[Předchozí](adding-client-side-confirmation-when-deleting-cs.md)
> [Další](an-overview-of-inserting-updating-and-deleting-data-vb.md)</span><span class="sxs-lookup"><span data-stu-id="7999e-274">[Previous](adding-client-side-confirmation-when-deleting-cs.md)
[Next](an-overview-of-inserting-updating-and-deleting-data-vb.md)</span></span>
