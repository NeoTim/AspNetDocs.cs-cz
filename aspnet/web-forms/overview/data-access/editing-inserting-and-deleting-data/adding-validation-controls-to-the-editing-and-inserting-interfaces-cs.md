---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
title: Přidání ověřovacích ovládacích prvků do rozhraní pro úpravy aC#vložení () | Microsoft Docs
author: rick-anderson
description: V tomto kurzu se dozvíte, jak snadné je přidat ověřovací ovládací prvky do EditItemTemplate a šablona InsertItemTemplate webového ovládacího prvku, aby se zajistilo další...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: 2086cb1a-ab78-49ae-9c0b-03891c69776a
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
msc.type: authoredcontent
ms.openlocfilehash: 110ee08f1d0707664ef6268f34ceab9da30a3e61
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78610192"
---
# <a name="adding-validation-controls-to-the-editing-and-inserting-interfaces-c"></a><span data-ttu-id="f1bbd-103">Přidání validačních ovládacích prvků do rozhraní pro úpravy a vložení (C#)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-103">Adding Validation Controls to the Editing and Inserting Interfaces (C#)</span></span>

<span data-ttu-id="f1bbd-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f1bbd-105">[Stáhnout ukázkovou aplikaci](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) nebo [Stáhnout PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) or [Download PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span></span>

> <span data-ttu-id="f1bbd-106">V tomto kurzu se dozvíte, jak snadné je přidat ověřovací ovládací prvky do EditItemTemplate a šablona InsertItemTemplate webového ovládacího prvku dat a poskytnout tak další uživatelské rozhraní foolproof.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-106">In this tutorial we'll see how easy it is to add validation controls to the EditItemTemplate and InsertItemTemplate of a data Web control, to provide a more foolproof user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="f1bbd-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="f1bbd-107">Introduction</span></span>

<span data-ttu-id="f1bbd-108">Ovládací prvky GridView a DetailsView v ukázkách, které jsme prozkoumali v posledních třech kurzech, se všechny skládají z BoundFields a CheckBoxFields (typy polí automaticky přidané pomocí sady Visual Studio při vázání prvku GridView nebo DetailsView na zdroj dat. řízení prostřednictvím inteligentní značky).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-108">The GridView and DetailsView controls in the examples we've explored over the past three tutorials have all been composed of BoundFields and CheckBoxFields (the field types automatically added by Visual Studio when binding a GridView or DetailsView to a data source control through the smart tag).</span></span> <span data-ttu-id="f1bbd-109">Při úpravách řádku v prvku GridView nebo DetailsView jsou tato BoundFields, která nejsou jen pro čtení, převedena do textových polí, ze kterých může koncový uživatel upravovat stávající data.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-109">When editing a row in a GridView or DetailsView, those BoundFields that are not read-only are converted into textboxes, from which the end user can modify the existing data.</span></span> <span data-ttu-id="f1bbd-110">Podobně při vložení nového záznamu do ovládacího prvku DetailsView se u těch BoundFields, jejichž vlastnost `InsertVisible` je nastavena na `true` (výchozí), vykreslují jako prázdná textová pole, do kterých může uživatel zadat hodnoty pole nového záznamu.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-110">Similarly, when inserting a new record into a DetailsView control, those BoundFields whose `InsertVisible` property is set to `true` (the default) are rendered as empty textboxes, into which the user can provide the new record's field values.</span></span> <span data-ttu-id="f1bbd-111">Stejně tak CheckBoxFields, které jsou zakázány ve standardním rozhraní, jen pro čtení, se v rozhraních pro úpravy a vkládání převedou na povolená zaškrtávací políčka.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-111">Likewise, CheckBoxFields, which are disabled in the standard, read-only interface, are converted into enabled checkboxes in the editing and inserting interfaces.</span></span>

<span data-ttu-id="f1bbd-112">Zatímco výchozí rozhraní pro úpravy a vkládání pro vlastnost BoundField a třídě CheckBoxField podporována mohou být užitečná, rozhraní nemá žádné řazení ověřování.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-112">While the default editing and inserting interfaces for the BoundField and CheckBoxField can be helpful, the interface lacks any sort of validation.</span></span> <span data-ttu-id="f1bbd-113">Pokud uživatel zadá omylem datovou položku, například vynechání pole `ProductName` nebo zadání neplatné hodnoty pro `UnitsInStock` (například-50), bude vyvolána výjimka z hloubky architektury aplikace.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-113">If a user makes a data entry mistake - such as omitting the `ProductName` field or entering an invalid value for `UnitsInStock` (such as -50) an exception will be raised from within the depths of the application architecture.</span></span> <span data-ttu-id="f1bbd-114">I když tato výjimka může být řádně zpracována tak, jak je znázorněno v [předchozím kurzu](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), v ideálním případě úpravy nebo vložení uživatelského rozhraní by zahrnovala ovládací prvky ověřování, které uživateli brání v zadání takových neplatných dat na prvním místě.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-114">While this exception can be gracefully handled as demonstrated in the [previous tutorial](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), ideally the editing or inserting user interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="f1bbd-115">Aby bylo možné poskytnout přizpůsobené úpravy nebo vložení rozhraní, je nutné nahradit vlastnost BoundField nebo třídě CheckBoxField podporována pomocí TemplateField.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-115">In order to provide a customized editing or inserting interface, we need to replace the BoundField or CheckBoxField with a TemplateField.</span></span> <span data-ttu-id="f1bbd-116">TemplateFields, které byly tématem diskuze v [ovládacím prvku GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) a používají templatefields v výukových kurzech [ovládacího prvku DetailsView](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) , mohou sestávat z několika šablon definujících samostatná rozhraní pro různé stavy řádků.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-116">TemplateFields, which were the topic of discussion in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) and [Using TemplateFields in the DetailsView Control](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) tutorials, can consist of multiple templates defining separate interfaces for different row states.</span></span> <span data-ttu-id="f1bbd-117">`ItemTemplate` TemplateField se používá k při vykreslování polí nebo řádků jen pro čtení v ovládacích prvcích DetailsView nebo GridView, zatímco `EditItemTemplate` a `InsertItemTemplate` označují rozhraní, která se mají použít pro režimy úprav a vkládání.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-117">The TemplateField's `ItemTemplate` is used to when rendering read-only fields or rows in the DetailsView or GridView controls, whereas the `EditItemTemplate` and `InsertItemTemplate` indicate the interfaces to use for the editing and inserting modes, respectively.</span></span>

<span data-ttu-id="f1bbd-118">V tomto kurzu se dozvíte, jak snadné je přidat ověřovací ovládací prvky do `EditItemTemplate` TemplateField a `InsertItemTemplate` tak, aby poskytovalo další uživatelské rozhraní foolproof.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-118">In this tutorial we'll see how easy it is to add validation controls to the TemplateField's `EditItemTemplate` and `InsertItemTemplate` to provide a more foolproof user interface.</span></span> <span data-ttu-id="f1bbd-119">Konkrétně tento kurz využívá příklad vytvořený při [zkoumání událostí souvisejících s vložením, aktualizací a odstraněním](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) kurzu a rozšiřuje rozhraní pro úpravy a vkládání, aby zahrnovala příslušné ověření.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-119">Specifically, this tutorial takes the example created in the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial and augments the editing and inserting interfaces to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromexamining-the-events-associated-with-inserting-updating-and-deleting"></a><span data-ttu-id="f1bbd-120">Krok 1: replikace příkladu z[zkoumání událostí spojených s vložením, aktualizací a odstraněním](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-120">Step 1: Replicating the Example from[Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span></span>

<span data-ttu-id="f1bbd-121">Při [zkoumání událostí spojených s vložením, aktualizací a odstraněním](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) kurzu jsme vytvořili stránku, která uvádí názvy a ceny produktů ve upravitelném prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-121">In the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial we created a page that listed the names and prices of the products in an editable GridView.</span></span> <span data-ttu-id="f1bbd-122">Kromě toho stránka obsahovala prvek DetailsView, jehož vlastnost `DefaultMode` byla nastavena na hodnotu `Insert`, takže vždy vykresluje v režimu vkládání.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-122">Additionally, the page included a DetailsView whose `DefaultMode` property was set to `Insert`, thereby always rendering in insert mode.</span></span> <span data-ttu-id="f1bbd-123">Od tohoto prvku DetailsView může uživatel zadat název a cenu nového produktu, kliknout na Vložit a přidat ho do systému (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-123">From this DetailsView, the user could enter the name and price for a new product, click Insert, and have it added to the system (see Figure 1).</span></span>

<span data-ttu-id="f1bbd-124">[![předchozí příklad umožňuje uživatelům přidávat nové produkty a upravovat stávající.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-124">[![The Previous Example Allows Users to Add New Products and Edit Existing Ones](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span></span>

<span data-ttu-id="f1bbd-125">**Obrázek 1**: předchozí příklad umožňuje uživatelům přidávat nové produkty a upravovat stávající ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-125">**Figure 1**: The Previous Example Allows Users to Add New Products and Edit Existing Ones ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span></span>

<span data-ttu-id="f1bbd-126">Naším cílem tohoto kurzu je rozšířit ovládací prvky DetailsView a GridView k poskytnutí ověřovacích ovládacích prvků.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-126">Our goal for this tutorial is to augment the DetailsView and GridView to provide validation controls.</span></span> <span data-ttu-id="f1bbd-127">Konkrétně naše logika ověřování bude:</span><span class="sxs-lookup"><span data-stu-id="f1bbd-127">In particular, our validation logic will:</span></span>

- <span data-ttu-id="f1bbd-128">Vyžadovat, aby se při vkládání nebo úpravách produktu zadal název</span><span class="sxs-lookup"><span data-stu-id="f1bbd-128">Require that the name be provided when inserting or editing a product</span></span>
- <span data-ttu-id="f1bbd-129">Vyžaduje, aby byla při vkládání záznamu zadána cena. Při úpravách záznamu budeme stále vyžadovat cenu, ale použije programovou logiku v obslužné rutině `RowUpdating` ovládacího prvku GridView, která už je přítomna v předchozím kurzu.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-129">Require that the price be provided when inserting a record; when editing a record, we will still require a price, but will use the programmatic logic in the GridView's `RowUpdating` event handler already present from the earlier tutorial</span></span>
- <span data-ttu-id="f1bbd-130">Ujistěte se, že zadaná hodnota ceny je platný formát měny.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-130">Ensure that the value entered for the price is a valid currency format</span></span>

<span data-ttu-id="f1bbd-131">Předtím, než se můžeme podívat na rozšíření předchozího příkladu, aby bylo ověřování zahrnuto, nejdřív je potřeba replikovat příklad ze stránky `DataModificationEvents.aspx` na stránku pro tento kurz, `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-131">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `DataModificationEvents.aspx` page to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="f1bbd-132">Aby bylo možné tento postup provést, je nutné zkopírovat jak deklarativní značku, tak i zdrojový kód stránky `DataModificationEvents.aspx`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-132">To accomplish this we need to copy over both the `DataModificationEvents.aspx` page's declarative markup and its source code.</span></span> <span data-ttu-id="f1bbd-133">Nejdřív zkopírujte přes deklarativní označení provedením následujících kroků:</span><span class="sxs-lookup"><span data-stu-id="f1bbd-133">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="f1bbd-134">Otevření stránky `DataModificationEvents.aspx` v aplikaci Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f1bbd-134">Open the `DataModificationEvents.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="f1bbd-135">Přejděte na deklarativní značku stránky (klikněte na tlačítko zdroj v dolní části stránky).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-135">Go to the page's declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="f1bbd-136">Zkopírujte text v rámci značek `<asp:Content>` a `</asp:Content>` (řádky 3 až 44), jak je znázorněno na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-136">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 44), as shown in Figure 2.</span></span>

<span data-ttu-id="f1bbd-137">[![zkopírovat text v &lt;ASP: ovládací prvek Content&gt;](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-137">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span></span>

<span data-ttu-id="f1bbd-138">**Obrázek 2**: zkopírování textu v ovládacím prvku `<asp:Content>` ([kliknutím zobrazíte obrázek v plné velikosti](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f1bbd-138">**Figure 2**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span></span>

1. <span data-ttu-id="f1bbd-139">Otevřete stránku `UIValidation.aspx`</span><span class="sxs-lookup"><span data-stu-id="f1bbd-139">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="f1bbd-140">Přejít na deklarativní značku stránky</span><span class="sxs-lookup"><span data-stu-id="f1bbd-140">Go to the page's declarative markup</span></span>
3. <span data-ttu-id="f1bbd-141">Vložte text do ovládacího prvku `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-141">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="f1bbd-142">Chcete-li zkopírovat zdrojový kód, otevřete stránku `DataModificationEvents.aspx.cs` a zkopírujte pouze text *v rámci* `EditInsertDelete_DataModificationEvents` třídy.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-142">To copy over the source code, open the `DataModificationEvents.aspx.cs` page and copy just the text *within* the `EditInsertDelete_DataModificationEvents` class.</span></span> <span data-ttu-id="f1bbd-143">Zkopírujte tři obslužné rutiny události (`Page_Load`, `GridView1_RowUpdating`a `ObjectDataSource1_Inserting`), ale **nekopírujte** deklaraci třídy ani příkazy `using`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-143">Copy the three event handlers (`Page_Load`, `GridView1_RowUpdating`, and `ObjectDataSource1_Inserting`), but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="f1bbd-144">Vložte *zkopírovaný text do `EditInsertDelete_UIValidation` třídy v `UIValidation.aspx.cs`* .</span><span class="sxs-lookup"><span data-stu-id="f1bbd-144">Paste the copied text *within* the `EditInsertDelete_UIValidation` class in `UIValidation.aspx.cs`.</span></span>

<span data-ttu-id="f1bbd-145">Po přesunutí obsahu a kódu z `DataModificationEvents.aspx` na `UIValidation.aspx`chvíli počkejte, než se otestuje pokrok v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-145">After moving over the content and code from `DataModificationEvents.aspx` to `UIValidation.aspx`, take a moment to test out your progress in a browser.</span></span> <span data-ttu-id="f1bbd-146">V každé z těchto dvou stránek byste měli vidět stejný výstup a vyzkoušet stejné funkce (pro snímek obrazovky `DataModificationEvents.aspx` v akci se podívejte zpátky na obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-146">You should see the same output and experience the same functionality in each of these two pages (refer back to Figure 1 for a screen shot of `DataModificationEvents.aspx` in action).</span></span>

## <a name="step-2-converting-the-boundfields-into-templatefields"></a><span data-ttu-id="f1bbd-147">Krok 2: převod BoundFields na TemplateFields</span><span class="sxs-lookup"><span data-stu-id="f1bbd-147">Step 2: Converting the BoundFields Into TemplateFields</span></span>

<span data-ttu-id="f1bbd-148">Chcete-li přidat ověřovací ovládací prvky do rozhraní pro úpravy a vkládání, je nutné převést BoundFields používané ovládacími prvky DetailsView a GridView na TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-148">To add validation controls to the editing and inserting interfaces, the BoundFields used by the DetailsView and GridView controls need to be converted into TemplateFields.</span></span> <span data-ttu-id="f1bbd-149">Chcete-li to dosáhnout, klikněte na odkazy upravit sloupce a upravit pole v inteligentních značkách GridView a DetailsView.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-149">To achieve this, click on the Edit Columns and Edit Fields links in the GridView and DetailsView's smart tags, respectively.</span></span> <span data-ttu-id="f1bbd-150">Vyberte jednotlivé BoundFields a klikněte na odkaz převést toto pole na TemplateField.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-150">There, select each of the BoundFields and click the "Convert this field into a TemplateField" link.</span></span>

<span data-ttu-id="f1bbd-151">[![převést všechny BoundFields ovládacího prvku DetailsView a GridView na TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-151">[![Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span></span>

<span data-ttu-id="f1bbd-152">**Obrázek 3**: převeďte všechny BoundFields ovládacího prvku DetailsView a GridView na pole TemplateField ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-152">**Figure 3**: Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span></span>

<span data-ttu-id="f1bbd-153">Převod vlastnost BoundField na TemplateField prostřednictvím dialogového okna pole vygeneruje TemplateField, který vykazuje stejné rozhraní jako jen pro čtení, úpravy a vkládání rozhraní jako vlastnost BoundField sám.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-153">Converting a BoundField into a TemplateField through the Fields dialog box generates a TemplateField that exhibits the same read-only, editing, and inserting interfaces as the BoundField itself.</span></span> <span data-ttu-id="f1bbd-154">Následující kód ukazuje deklarativní syntaxi pro pole `ProductName` v prvku DetailsView poté, co byl převeden na TemplateField:</span><span class="sxs-lookup"><span data-stu-id="f1bbd-154">The following markup shows the declarative syntax for the `ProductName` field in the DetailsView after it has been converted into a TemplateField:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample1.aspx)]

<span data-ttu-id="f1bbd-155">Všimněte si, že u tohoto TemplateField se automaticky vytvořily tři šablony `ItemTemplate`, `EditItemTemplate`a `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-155">Note that this TemplateField had three templates automatically created `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate`.</span></span> <span data-ttu-id="f1bbd-156">`ItemTemplate` zobrazuje jednu hodnotu datového pole (`ProductName`) pomocí webového ovládacího prvku popisek, zatímco `EditItemTemplate` a `InsertItemTemplate` prezentují hodnotu datového pole ve webovém ovládacím prvku TextBox, který přidruží datové pole k vlastnosti `Text` textového pole pomocí obousměrné datové vazby.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-156">The `ItemTemplate` displays a single data field value (`ProductName`) using a Label Web control, while the `EditItemTemplate` and `InsertItemTemplate` present the data field value in a TextBox Web control that associates the data field with the TextBox's `Text` property using two-way databinding.</span></span> <span data-ttu-id="f1bbd-157">Vzhledem k tomu, že při vkládání pouze používáme ovládací prvek DetailsView na této stránce, můžete `ItemTemplate` a `EditItemTemplate` odebrat ze dvou vlastností TemplateField, i když v nich nedochází k žádnému poškození.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-157">Since we are only using the DetailsView in this page for inserting, you may remove the `ItemTemplate` and `EditItemTemplate` from the two TemplateFields, although there's no harm in leaving them.</span></span>

<span data-ttu-id="f1bbd-158">Vzhledem k tomu, že prvek GridView nepodporuje integrované funkce vkládání prvku DetailsView, převod pole `ProductName` prvku GridView na hodnotu TemplateField má za následek pouze `ItemTemplate` a `EditItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="f1bbd-158">Since the GridView does not support the built-in inserting features of the DetailsView, converting the GridView's `ProductName` field into a TemplateField results in only an `ItemTemplate` and `EditItemTemplate`:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample2.aspx)]

<span data-ttu-id="f1bbd-159">Kliknutím na převést toto pole na TemplateField vytvoří Visual Studio TemplateField, jehož šablony napodobují uživatelské rozhraní převedené vlastnost BoundField.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-159">By clicking the "Convert this field into a TemplateField," Visual Studio has created a TemplateField whose templates mimic the user interface of the converted BoundField.</span></span> <span data-ttu-id="f1bbd-160">Můžete to ověřit tak, že navštívíte tuto stránku prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-160">You can verify this by visiting this page through a browser.</span></span> <span data-ttu-id="f1bbd-161">Zjistíte, že vzhled a chování vlastností TemplateField je stejné jako při použití BoundFields.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-161">You'll find that the appearance and behavior of the TemplateFields is identical to the experience when BoundFields were used instead.</span></span>

> [!NOTE]
> <span data-ttu-id="f1bbd-162">V případě potřeby můžete přizpůsobit rozhraní úprav v šablonách.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-162">Feel free to customize the editing interfaces in the templates as needed.</span></span> <span data-ttu-id="f1bbd-163">Například můžeme chtít, aby textové pole v `UnitPrice`ech TemplateField bylo vykresleno jako menší textové pole, než `ProductName` TextBox.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-163">For example, we may want to have the TextBox in the `UnitPrice` TemplateFields rendered as a smaller textbox than the `ProductName` textbox.</span></span> <span data-ttu-id="f1bbd-164">Chcete-li to dosáhnout, můžete nastavit vlastnost `Columns` textového pole na odpovídající hodnotu nebo zadat absolutní šířku prostřednictvím vlastnosti `Width`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-164">To accomplish this you can set the TextBox's `Columns` property to an appropriate value or provide an absolute width via the `Width` property.</span></span> <span data-ttu-id="f1bbd-165">V dalším kurzu se dozvíte, jak zcela přizpůsobit rozhraní pro úpravu tím, že nahradíte textové pole alternativním webovým ovládacím prvkem pro zadávání dat.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-165">In the next tutorial we'll see how to completely customize the editing interface by replacing the TextBox with an alternate data entry Web control.</span></span>

## <a name="step-3-adding-the-validation-controls-to-the-gridviewsedititemtemplate-s"></a><span data-ttu-id="f1bbd-166">Krok 3: Přidání ovládacích prvků ověřování do`EditItemTemplate` prvku GridView</span><span class="sxs-lookup"><span data-stu-id="f1bbd-166">Step 3: Adding the Validation Controls to the GridView's`EditItemTemplate` s</span></span>

<span data-ttu-id="f1bbd-167">Při vytváření formulářů pro zadávání dat je důležité, aby uživatelé zadali všechna povinná pole a aby všechny zadané vstupy byly právní a správně formátované hodnoty.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-167">When constructing data entry forms, it is important that users enter any required fields and that all provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="f1bbd-168">Aby bylo zajištěno, že vstupy uživatele jsou platné, ASP.NET poskytuje pět předdefinovaných ověřovacích ovládacích prvků, které jsou navrženy pro použití k ověření hodnoty jednoho vstupního ovládacího prvku:</span><span class="sxs-lookup"><span data-stu-id="f1bbd-168">To help ensure that a user's inputs are valid, ASP.NET provides five built-in validation controls that are designed to be used to validate the value of a single input control:</span></span>

- <span data-ttu-id="f1bbd-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) zajistí, že byla zadána hodnota.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="f1bbd-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) ověří hodnotu pro jinou hodnotu webového ovládacího prvku nebo konstantní hodnotu nebo zajistí, že formát hodnoty je platný pro zadaný datový typ.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value's format is legal for a specified data type</span></span>
- <span data-ttu-id="f1bbd-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) zajišťuje, že hodnota spadá do rozsahu hodnot</span><span class="sxs-lookup"><span data-stu-id="f1bbd-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="f1bbd-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) ověří hodnotu oproti [regulárnímu výrazu](http://en.wikipedia.org/wiki/Regular_expression) .</span><span class="sxs-lookup"><span data-stu-id="f1bbd-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="f1bbd-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) ověří hodnotu podle vlastní uživatelem definované metody</span><span class="sxs-lookup"><span data-stu-id="f1bbd-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="f1bbd-174">Další informace o těchto pěti ovládacích prvcích najdete v [části ovládací prvky ověřování](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) v [kurzech rychlý Start ASP.NET](https://asp.net/QuickStart/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-174">For more information on these five controls, check out the [Validation Controls section](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://asp.net/QuickStart/aspnet/).</span></span>

<span data-ttu-id="f1bbd-175">Pro náš kurz budeme muset použít RequiredFieldValidator jak v ovládacím prvku DetailsView, tak v `ProductName` prvku GridView a v RequiredFieldValidator v prvku TemplateField `UnitPrice` DetailsView.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-175">For our tutorial we'll need to use a RequiredFieldValidator in both the DetailsView and GridView's `ProductName` TemplateFields and a RequiredFieldValidator in the DetailsView's `UnitPrice` TemplateField.</span></span> <span data-ttu-id="f1bbd-176">Kromě toho bude nutné přidat CompareValidator do obou ovládacích prvků ' ovládací prvky ' `UnitPrice`, které zajistí, že zadaná cena má hodnotu větší než nebo rovna 0 a je prezentována v platném formátu měny.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-176">Furthermore, we'll need to add a CompareValidator to both controls' `UnitPrice` TemplateFields that ensures that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="f1bbd-177">Zatímco ASP.NET 1. x má stejné pět ověřovacích ovládacích prvků, ASP.NET 2,0 přináší řadu vylepšení, což je hlavní dvě Podpora skriptů na straně klienta pro jiné prohlížeče než Internet Explorer a možnost rozdělit ovládací prvky ověřování na stránku na skupiny ověření.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-177">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers other than Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="f1bbd-178">Další informace o nových funkcích ovládacího prvku ověřování v 2,0 najdete v tématu přeASP.NET [ovládacích prvků ověřování v nástroji 2,0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-178">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>

<span data-ttu-id="f1bbd-179">Pojďme začít přidáním nezbytných ověřovacích ovládacích prvků do `EditItemTemplate` s v poli TemplateFields prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-179">Let's start by adding the necessary validation controls to the `EditItemTemplate` s in the GridView's TemplateFields.</span></span> <span data-ttu-id="f1bbd-180">Chcete-li to provést, klikněte na odkaz Upravit šablony z inteligentní značky GridView a zobrazte rozhraní pro úpravu šablony.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-180">To accomplish this, click on the Edit Templates link from the GridView's smart tag to bring up the template editing interface.</span></span> <span data-ttu-id="f1bbd-181">Odtud můžete v rozevíracím seznamu vybrat šablonu, kterou chcete upravit.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-181">From here, you can select which template to edit from the drop-down list.</span></span> <span data-ttu-id="f1bbd-182">Vzhledem k tomu, že chceme rozšířit rozhraní pro úpravy, potřebujeme přidat ověřovací ovládací prvky do `ProductName` a `UnitPrice``EditItemTemplate` s.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-182">Since we want to augment the editing interface, we need to add validation controls to the `ProductName` and `UnitPrice`'s `EditItemTemplate` s.</span></span>

<span data-ttu-id="f1bbd-183">[![potřebujeme, abychom rozšířili pole NázevVýrobku a JednotkováCena.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-183">[![We Need to Extend the ProductName and UnitPrice's EditItemTemplates](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span></span>

<span data-ttu-id="f1bbd-184">**Obrázek 4**: musíme zvětšit `ProductName` a `UnitPrice``EditItemTemplate` s ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-184">**Figure 4**: We Need to Extend the `ProductName` and `UnitPrice`'s `EditItemTemplate` s ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span></span>

<span data-ttu-id="f1bbd-185">V `EditItemTemplate``ProductName` přidejte RequiredFieldValidator přetažením z panelu nástrojů do rozhraní pro úpravu šablony a umístěte ho za textové pole.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-185">In the `ProductName` `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing after the TextBox.</span></span>

<span data-ttu-id="f1bbd-186">[![přidat RequiredFieldValidator do NázevVýrobku EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-186">[![Add a RequiredFieldValidator to the ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span></span>

<span data-ttu-id="f1bbd-187">**Obrázek 5**: Přidání RequiredFieldValidator do `EditItemTemplate` `ProductName` ([kliknutím zobrazíte obrázek v plné velikosti](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="f1bbd-187">**Figure 5**: Add a RequiredFieldValidator to the `ProductName` `EditItemTemplate` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span></span>

<span data-ttu-id="f1bbd-188">Všechny ovládací prvky ověřování fungují při ověřování vstupu jednoho ASP.NET webového ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-188">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="f1bbd-189">Proto musíme naznačit, že RequiredFieldValidator, který jste právě přidali, by měl ověřit proti textovému poli v `EditItemTemplate`; toho lze dosáhnout nastavením [vlastnosti ControlToValidate](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) ovládacího prvku ověřování na `ID` příslušného webového ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-189">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the TextBox in the `EditItemTemplate`; this is accomplished by setting the validation control's [ControlToValidate property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control.</span></span> <span data-ttu-id="f1bbd-190">Textové pole teď má nondescript `ID` `TextBox1`, ale pojďme ho změnit na něco vhodnějšího.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-190">The TextBox currently has the rather nondescript `ID` of `TextBox1`, but let's change it to something more appropriate.</span></span> <span data-ttu-id="f1bbd-191">Klikněte na textové pole v šabloně a potom v okno Vlastnosti změňte `ID` z `TextBox1` na `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-191">Click on the TextBox in the template and then, from the Properties window, change the `ID` from `TextBox1` to `EditProductName`.</span></span>

<span data-ttu-id="f1bbd-192">[![změnit ID textového pole na EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-192">[![Change the TextBox's ID to EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span></span>

<span data-ttu-id="f1bbd-193">**Obrázek 6**: Změňte `ID` textového pole na `EditProductName` ([kliknutím zobrazíte obrázek v plné velikosti](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png)).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-193">**Figure 6**: Change the TextBox's `ID` to `EditProductName` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span></span>

<span data-ttu-id="f1bbd-194">Dále nastavte vlastnost `ControlToValidate` RequiredFieldValidator na hodnotu `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-194">Next, set the RequiredFieldValidator's `ControlToValidate` property to `EditProductName`.</span></span> <span data-ttu-id="f1bbd-195">Nakonec nastavte [vlastnost ErrorMessage](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) na hodnotu "je nutné zadat název produktu a [vlastnost Text](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) na"\*".</span><span class="sxs-lookup"><span data-stu-id="f1bbd-195">Finally, set the [ErrorMessage property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to "You must provide the product's name" and the [Text property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to "\*".</span></span> <span data-ttu-id="f1bbd-196">Hodnota vlastnosti `Text`, je-li k dispozici, je text, který je zobrazen ovládacím prvkem ověřování v případě, že se ověření nepovede.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-196">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="f1bbd-197">Hodnota vlastnosti `ErrorMessage`, která je povinná, je používána ovládacím prvkem ovládací souhrnu ověření; Pokud je hodnota vlastnosti `Text` vynechána, hodnota vlastnosti `ErrorMessage` je také text zobrazený ovládacím prvkem ověřování na neplatném vstupu.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-197">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is also the text displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="f1bbd-198">Po nastavení těchto tří vlastností RequiredFieldValidator by měla obrazovka vypadat podobně jako na obrázku 7.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-198">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 7.</span></span>

<span data-ttu-id="f1bbd-199">[![nastavit vlastnosti ControlToValidate, ErrorMessage a text RequiredFieldValidator](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-199">[![Set the RequiredFieldValidator's ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span></span>

<span data-ttu-id="f1bbd-200">**Obrázek 7**: nastavení vlastností `ControlToValidate`, `ErrorMessage`a `Text` ([kliknutím zobrazíte obrázek v plné velikosti](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="f1bbd-200">**Figure 7**: Set the RequiredFieldValidator's `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span></span>

<span data-ttu-id="f1bbd-201">Když se RequiredFieldValidator přidá do `EditItemTemplate``ProductName`, vše zůstává k přidání nezbytného ověření do `EditItemTemplate``UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-201">With the RequiredFieldValidator added to the `ProductName` `EditItemTemplate`, all that remains is to add the necessary validation to the `UnitPrice` `EditItemTemplate`.</span></span> <span data-ttu-id="f1bbd-202">Vzhledem k tomu, že jsme se rozhodli, že pro tuto stránku je `UnitPrice` při úpravách záznamu volitelný, nepotřebujeme přidat RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-202">Since we've decided that, for this page, the `UnitPrice` is optional when editing a record, we don't need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="f1bbd-203">Je ale potřeba přidat CompareValidator, aby se zajistilo, že `UnitPrice`, pokud je zadaný, je správně naformátovaná jako měna a je větší nebo rovna 0.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-203">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="f1bbd-204">Než přidáme CompareValidator do `EditItemTemplate``UnitPrice`, pojďme nejdřív změnit ID webového ovládacího prvku TextBox z `TextBox2` na `EditUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-204">Before we add the CompareValidator to the `UnitPrice` `EditItemTemplate`, let's first change the TextBox Web control's ID from `TextBox2` to `EditUnitPrice`.</span></span> <span data-ttu-id="f1bbd-205">Po provedení této změny přidejte CompareValidator, nastaví jeho vlastnost `ControlToValidate` na `EditUnitPrice`, jeho vlastnost `ErrorMessage` na hodnotu "cena musí být větší než nebo rovna nule a nesmí obsahovat symbol měny" a jeho `Text` vlastnost na hodnotu "\*".</span><span class="sxs-lookup"><span data-stu-id="f1bbd-205">After making this change, add the CompareValidator, setting its `ControlToValidate` property to `EditUnitPrice`, its `ErrorMessage` property to "The price must be greater than or equal to zero and cannot include the currency symbol", and its `Text` property to "\*".</span></span>

<span data-ttu-id="f1bbd-206">Chcete-li určit, že hodnota `UnitPrice` musí být větší nebo rovna 0, nastavte [vlastnost operator](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) CompareValidator na hodnotu `GreaterThanEqual`, [Vlastnost ValueToCompare](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) na hodnotu "0" a jeho [vlastnost Type](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) na `Currency`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-206">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator's [Operator property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [ValueToCompare property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to "0", and its [Type property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span> <span data-ttu-id="f1bbd-207">Následující deklarativní syntaxe ukazuje `UnitPrice` TemplateField `EditItemTemplate` poté, co byly provedeny tyto změny:</span><span class="sxs-lookup"><span data-stu-id="f1bbd-207">The following declarative syntax shows the `UnitPrice` TemplateField's `EditItemTemplate` after these changes have been made:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample3.aspx)]

<span data-ttu-id="f1bbd-208">Po provedení těchto změn otevřete stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-208">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="f1bbd-209">Pokud se pokusíte vynechat název nebo zadat neplatnou hodnotu ceny při úpravě produktu, zobrazí se vedle textového pole hvězdička.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-209">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="f1bbd-210">Jak ukazuje obrázek 8, hodnota ceny zahrnující symbol měny, jako je například $19,95, se považuje za neplatnou.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-210">As Figure 8 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="f1bbd-211">CompareValidator `Currency` `Type` umožňuje oddělovačům číslic (například čárky nebo teček, v závislosti na nastavení jazykové verze) a úvodní znaménko plus nebo mínus, ale *nepovoluje symbol* měny.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-211">The CompareValidator's `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="f1bbd-212">Toto chování může perplex uživatele, protože rozhraní pro úpravy aktuálně vykresluje `UnitPrice` pomocí formátu měny.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-212">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="f1bbd-213">V *událostech souvisejících s vložením, aktualizací a odstraněním* kurzu nastavíme vlastnost `DataFormatString` vlastnost boundfield na `{0:c}`, aby se naformátoval jako měna.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-213">Recall that in the *Events Associated with Inserting, Updating, and Deleting* tutorial we set the BoundField's `DataFormatString` property to `{0:c}` in order to format it as a currency.</span></span> <span data-ttu-id="f1bbd-214">Kromě toho nastavíme vlastnost `ApplyFormatInEditMode` na hodnotu true, což způsobí, že rozhraní pro úpravy ovládacího prvku GridView naformátuje `UnitPrice` jako měnu.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-214">Furthermore, we set the `ApplyFormatInEditMode` property to true, causing the GridView's editing interface to format the `UnitPrice` as a currency.</span></span> <span data-ttu-id="f1bbd-215">Při převodu vlastnost BoundField na TemplateField, Visual Studio poznamenalo tato nastavení a naformátují vlastnost `Text` TextBox jako měnu pomocí `<%# Bind("UnitPrice", "{0:c}") %>`syntaxe datové vazby.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-215">When converting the BoundField into a TemplateField, Visual Studio noted these settings and formatted the TextBox's `Text` property as a currency using the databinding syntax `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span>

<span data-ttu-id="f1bbd-216">[![se zobrazí hvězdička vedle textových polí s neplatným vstupem.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-216">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span></span>

<span data-ttu-id="f1bbd-217">**Obrázek 8**: u textových polí s neplatným vstupem se zobrazí hvězdička ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-217">**Figure 8**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span></span>

<span data-ttu-id="f1bbd-218">I když ověřování funguje tak, jak je, uživatel musí při úpravách záznamu ručně odebrat symbol měny, což není přijatelné.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-218">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="f1bbd-219">K nápravě máme tři možnosti:</span><span class="sxs-lookup"><span data-stu-id="f1bbd-219">To remedy this, we have three options:</span></span>

1. <span data-ttu-id="f1bbd-220">Nakonfigurujte `EditItemTemplate` tak, aby se hodnota `UnitPrice` neformátovala jako měna.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-220">Configure the `EditItemTemplate` so that the `UnitPrice` value is not formatted as a currency.</span></span>
2. <span data-ttu-id="f1bbd-221">Umožní uživateli zadat symbol měny odebráním CompareValidator a jeho nahrazením RegularExpressionValidator, který správně kontroluje správně naformátovanou hodnotu měny.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-221">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that properly checks for a properly formatted currency value.</span></span> <span data-ttu-id="f1bbd-222">Problém je v tom, že regulární výraz pro ověření hodnoty měny není v podstatě a při pokusu o začlenění nastavení jazykové verze by vyžadoval psaní kódu.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-222">The problem here is that the regular expression to validate a currency value is not pretty and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="f1bbd-223">Odeberte ovládací prvek ověřování zcela a v obslužné rutině události `RowUpdating` prvku GridView spoléhá na na na straně serveru logiku ověřování.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-223">Remove the validation control altogether and rely on server-side validation logic in the GridView's `RowUpdating` event handler.</span></span>

<span data-ttu-id="f1bbd-224">Pojďme pro toto cvičení použít možnost #1.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-224">Let's go with option #1 for this exercise.</span></span> <span data-ttu-id="f1bbd-225">V současné době je `UnitPrice` formátován jako měna z důvodu výrazu datové vazby pro textové pole v `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-225">Currently the `UnitPrice` is formatted as a currency due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="f1bbd-226">Změňte příkaz BIND na `Bind("UnitPrice", "{0:n2}")`, který formátuje výsledek jako číslo se dvěma číslicemi přesnosti.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-226">Change the Bind statement to `Bind("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="f1bbd-227">To lze provést přímo prostřednictvím deklarativní syntaxe nebo kliknutím na odkaz Upravit datové vazby z `EditUnitPrice` textového pole v `EditItemTemplate` `UnitPrice` TemplateField (viz obrázek 9 a 10).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-227">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `EditUnitPrice` TextBox in the `UnitPrice` TemplateField's `EditItemTemplate` (see Figures 9 and 10).</span></span>

<span data-ttu-id="f1bbd-228">[![klikněte na odkaz Upravit datové vazby v textovém poli.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-228">[![Click on the TextBox's Edit DataBindings link](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span></span>

<span data-ttu-id="f1bbd-229">**Obrázek 9**: klikněte na odkaz Upravit datové vazby v textovém poli ([kliknutím zobrazíte obrázek v plné velikosti](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png)).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-229">**Figure 9**: Click on the TextBox's Edit DataBindings link ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span></span>

<span data-ttu-id="f1bbd-230">[![určení specifikátoru formátu v příkazu BIND](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-230">[![Specify the Format Specifier in the Bind Statement](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span></span>

<span data-ttu-id="f1bbd-231">**Obrázek 10**: určení specifikátoru formátu v příkazu `Bind` ([kliknutím zobrazíte obrázek v plné velikosti](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="f1bbd-231">**Figure 10**: Specify the Format Specifier in the `Bind` Statement ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span></span>

<span data-ttu-id="f1bbd-232">V důsledku této změny formátovaná cena v rozhraní pro úpravy zahrnuje čárky jako oddělovač skupin a tečku jako oddělovač desetinných míst, ale ponechá symbol měny.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-232">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="f1bbd-233">`UnitPrice` `EditItemTemplate` neobsahuje RequiredFieldValidator, což umožňuje zpětné odeslání do následovat a zahájení logiky aktualizace.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-233">The `UnitPrice` `EditItemTemplate` doesn't include a RequiredFieldValidator, allowing the postback to ensue and the updating logic to commence.</span></span> <span data-ttu-id="f1bbd-234">Nicméně obslužná rutina události `RowUpdating` zkopírovala z *zkoumání událostí přidružených k vložení, aktualizaci a odstranění* kurzu obsahuje programovou kontrolu, která zajišťuje, že `UnitPrice` k dispozici.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-234">However, the `RowUpdating` event handler copied over from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial includes a programmatic check that ensures that the `UnitPrice` is provided.</span></span> <span data-ttu-id="f1bbd-235">Pokud chcete tuto logiku odebrat, nechte ji v tom, jak je, nebo přidejte RequiredFieldValidator do `EditItemTemplate``UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-235">Feel free to remove this logic, leave it in as-is, or add a RequiredFieldValidator to the `UnitPrice` `EditItemTemplate`.</span></span>

## <a name="step-4-summarizing-data-entry-problems"></a><span data-ttu-id="f1bbd-236">Krok 4: sumarizace problémů se zadáváním dat</span><span class="sxs-lookup"><span data-stu-id="f1bbd-236">Step 4: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="f1bbd-237">Kromě pěti ovládacích prvků ověřování obsahuje ASP.NET [ovládací prvek ovládací souhrnu ověření](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), který zobrazuje `ErrorMessage` s těmito ověřovacími ovládacími prvky, které zjistila neplatná data.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-237">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="f1bbd-238">Tato souhrnná data lze zobrazit jako text na webové stránce nebo modálním objektem MessageBox na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-238">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="f1bbd-239">Pojďme tento kurz vylepšit, aby se zahrnuly funkce MessageBox na straně klienta, které shrnují jakékoli problémy s ověřením.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-239">Let's enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="f1bbd-240">Chcete-li to provést, přetáhněte ovládací prvek ovládací souhrnu ověření z panelu nástrojů na Návrhář.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-240">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="f1bbd-241">Umístění ovládacího prvku ověřování není ve skutečnosti, protože ho nakonfigurujeme tak, aby zobrazoval pouze souhrn jako MessageBox.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-241">The location of the Validation control doesn't really matter, since we're going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="f1bbd-242">Po přidání ovládacího prvku nastavte jeho [vlastnost ShowSummary](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) na `false` a jeho [vlastnost ShowMessageBox na hodnotu](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) `true`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-242">After adding the control, set its [ShowSummary property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `false` and its [ShowMessageBox property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `true`.</span></span> <span data-ttu-id="f1bbd-243">S tímto sčítáním jsou všechny chyby ověřování shrnuty ve MessageBox na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-243">With this addition, any validation errors are summarized in a client-side messagebox.</span></span>

<span data-ttu-id="f1bbd-244">[![chyby ověřování jsou shrnuty ve MessageBox na straně klienta.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-244">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span></span>

<span data-ttu-id="f1bbd-245">**Obrázek 11**: Chyby ověřování jsou shrnuty v prvku MessageBox na straně klienta ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-245">**Figure 11**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span></span>

## <a name="step-5-adding-the-validation-controls-to-the-detailsviewsinsertitemtemplate"></a><span data-ttu-id="f1bbd-246">Krok 5: Přidání ovládacích prvků ověřování do`InsertItemTemplate` ovládacího prvku DetailsView</span><span class="sxs-lookup"><span data-stu-id="f1bbd-246">Step 5: Adding the Validation Controls to the DetailsView's`InsertItemTemplate`</span></span>

<span data-ttu-id="f1bbd-247">Vše, co pro tento kurz zbývá, je přidání ověřovacích ovládacích prvků do rozhraní pro vložení ovládacího prvku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-247">All that remains for this tutorial is to add the validation controls to the DetailsView's inserting interface.</span></span> <span data-ttu-id="f1bbd-248">Proces přidání ovládacích prvků ověřování do šablon ovládacího prvku DetailsView je totožný s tím, že byl zkontrolován v kroku 3; Proto budeme Breeze prostřednictvím úkolu v tomto kroku.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-248">The process of adding validation controls to the DetailsView's templates is identical to that examined in Step 3; therefore, we'll breeze through the task in this step.</span></span> <span data-ttu-id="f1bbd-249">Stejně jako u `EditItemTemplate` prvků prvku GridView, doporučujeme, abyste přejmenovali `ID` s textovým polem nondescript `TextBox1` a `TextBox2` na `InsertProductName` a `InsertUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-249">As we did with the GridView's `EditItemTemplate` s, I encourage you to rename the `ID` s of the TextBoxes from the nondescript `TextBox1` and `TextBox2` to `InsertProductName` and `InsertUnitPrice`.</span></span>

<span data-ttu-id="f1bbd-250">Přidejte RequiredFieldValidator do `InsertItemTemplate``ProductName`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-250">Add a RequiredFieldValidator to the `ProductName` `InsertItemTemplate`.</span></span> <span data-ttu-id="f1bbd-251">Nastavte `ControlToValidate` na `ID` textového pole v šabloně, vlastnost `Text` na "\*" a jeho vlastnost `ErrorMessage` na "je nutné zadat název produktu."</span><span class="sxs-lookup"><span data-stu-id="f1bbd-251">Set the `ControlToValidate` to the `ID` of the TextBox in the template, its `Text` property to "\*" and its `ErrorMessage` property to "You must provide the product's name".</span></span>

<span data-ttu-id="f1bbd-252">Vzhledem k tomu, že při přidávání nového záznamu se `UnitPrice` vyžaduje pro tuto stránku, přidejte do `InsertItemTemplate``UnitPrice`u RequiredFieldValidator a patřičně nastavte vlastnosti `ControlToValidate`, `Text`a `ErrorMessage`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-252">Since the `UnitPrice` is required for this page when adding a new record, add a RequiredFieldValidator to the `UnitPrice` `InsertItemTemplate`, setting its `ControlToValidate`, `Text`, and `ErrorMessage` properties appropriately.</span></span> <span data-ttu-id="f1bbd-253">Nakonec přidejte do `UnitPrice` `InsertItemTemplate` také CompareValidator a nakonfigurujte jeho `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`a `ValueToCompare` vlastnosti stejně jako v `UnitPrice`prvku GridView na `EditItemTemplate`CompareValidator.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-253">Finally, add a CompareValidator to the `UnitPrice` `InsertItemTemplate` as well, configuring its `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, and `ValueToCompare` properties just like we did with the `UnitPrice`'s CompareValidator in the GridView's `EditItemTemplate`.</span></span>

<span data-ttu-id="f1bbd-254">Po přidání těchto ovládacích prvků ověřování nelze do systému přidat nový produkt, pokud jeho název není zadán nebo pokud je jeho cena záporná nebo má neplatně naformátované číslo.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-254">After adding these validation controls, a new product cannot be added to the system if its name is not supplied or if its price is a negative number or illegally formatted.</span></span>

<span data-ttu-id="f1bbd-255">[do rozhraní pro vkládání prvku DetailsView se přidala ![logika ověřování.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-255">[![Validation Logic has been Added to the DetailsView's Inserting Interface](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span></span>

<span data-ttu-id="f1bbd-256">**Obrázek 12**: logika ověřování byla přidána do rozhraní pro vkládání prvku DetailsView ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-256">**Figure 12**: Validation Logic has been Added to the DetailsView's Inserting Interface ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span></span>

## <a name="step-6-partitioning-the-validation-controls-into-validation-groups"></a><span data-ttu-id="f1bbd-257">Krok 6: dělení ovládacích prvků ověřování do skupin ověřování</span><span class="sxs-lookup"><span data-stu-id="f1bbd-257">Step 6: Partitioning the Validation Controls Into Validation Groups</span></span>

<span data-ttu-id="f1bbd-258">Naše stránka se skládá ze dvou logických různorodých sad ověřovacích ovládacích prvků: těch, které odpovídají rozhraní pro úpravy prvku GridView a těch, které odpovídají rozhraní pro vložení ovládacího prvku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-258">Our page consists of two logically disparate sets of validation controls: those that correspond to the GridView's editing interface and those that correspond to the DetailsView's inserting interface.</span></span> <span data-ttu-id="f1bbd-259">Ve výchozím nastavení, když dojde k postbacku, jsou kontrolovány *všechny* ovládací prvky ověřování na stránce.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-259">By default, when a postback occurs *all* validation controls on the page are checked.</span></span> <span data-ttu-id="f1bbd-260">Při úpravách záznamu ale nechcete, aby se ovládací prvky pro ověřování rozhraní vloženého prvku vložily k ověření.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-260">However, when editing a record we don't want the DetailsView's inserting interface's validation controls to validate.</span></span> <span data-ttu-id="f1bbd-261">Obrázek 13 znázorňuje naše aktuální dilematem, když uživatel upravuje produkt s dokonale přípustnými hodnotami. Kliknutím na aktualizovat dojde k chybě ověřování, protože hodnoty název a cena v rozhraní pro vložení jsou prázdné.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-261">Figure 13 illustrates our current dilemma when a user is editing a product with perfectly legal values, clicking Update causes a validation error because the name and price values in the inserting interface are blank.</span></span>

<span data-ttu-id="f1bbd-262">[![aktualizace produktu způsobí, že se ovládací prvky vložení rozhraní připraví na oheň.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-262">[![Updating a Product Causes the Inserting Interface's Validation Controls to Fire](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span></span>

<span data-ttu-id="f1bbd-263">**Obrázek 13**: aktualizace produktu způsobí, že se ovládací prvky pro vložení rozhraní při ověřování aktivují ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-263">**Figure 13**: Updating a Product Causes the Inserting Interface's Validation Controls to Fire ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span></span>

<span data-ttu-id="f1bbd-264">Ovládací prvky ověřování v ASP.NET 2,0 lze rozdělit do skupin ověřování prostřednictvím jejich vlastnosti `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-264">The validation controls in ASP.NET 2.0 can be partitioned into validation groups through their `ValidationGroup` property.</span></span> <span data-ttu-id="f1bbd-265">Chcete-li přidružit sadu ověřovacích ovládacích prvků ve skupině, jednoduše nastavte jejich vlastnost `ValidationGroup` na stejnou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-265">To associate a set of validation controls in a group, simply set their `ValidationGroup` property to the same value.</span></span> <span data-ttu-id="f1bbd-266">Pro náš kurz nastavte vlastnosti `ValidationGroup` ovládacích prvků ověřování v prvcích TemplateField prvku GridView na `EditValidationControls` a `ValidationGroup` vlastnosti vlastností TemplateField prvku DetailsView na `InsertValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-266">For our tutorial, set the `ValidationGroup` properties of the validation controls in the GridView's TemplateFields to `EditValidationControls` and the `ValidationGroup` properties of the DetailsView's TemplateFields to `InsertValidationControls`.</span></span> <span data-ttu-id="f1bbd-267">Tyto změny lze provést přímo v deklarativním označení nebo prostřednictvím okno Vlastnosti při použití rozhraní Edit šablony návrháře.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-267">These changes can be done directly in the declarative markup or through the Properties window when using the Designer's edit template interface.</span></span>

<span data-ttu-id="f1bbd-268">Kromě ovládacích prvků ověřování obsahuje ovládací prvky s tlačítky a tlačítky v ASP.NET 2,0 také vlastnost `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-268">In addition to the validation controls, the Button and Button-related controls in ASP.NET 2.0 also include a `ValidationGroup` property.</span></span> <span data-ttu-id="f1bbd-269">Validátory ověřovací skupiny jsou kontrolovány pouze v případě, že je zpětně vyvoláno tlačítko se stejným nastavením vlastnosti `ValidationGroup`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-269">A validation group's validators are checked for validity only when a postback is induced by a Button that has the same `ValidationGroup` property setting.</span></span> <span data-ttu-id="f1bbd-270">Například pokud chcete, aby tlačítko pro vložení ovládacího prvku DetailsView aktivovalo `InsertValidationControls` skupinu ověření, potřebujeme nastavit vlastnost `ValidationGroup` CommandField na hodnotu `InsertValidationControls` (viz obrázek 14).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-270">For example, in order for the DetailsView's Insert button to trigger the `InsertValidationControls` validation group we need to set the CommandField's `ValidationGroup` property to `InsertValidationControls` (see Figure 14).</span></span> <span data-ttu-id="f1bbd-271">Kromě toho nastavte vlastnost CommandField's `ValidationGroup` prvku GridView na hodnotu `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-271">Additionally, set the GridView's CommandField's `ValidationGroup` property to `EditValidationControls`.</span></span>

<span data-ttu-id="f1bbd-272">[![nastavte vlastnost CommandField's Validation elementu ovládacího prvku na InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-272">[![Set the DetailsView's CommandField's ValidationGroup property to InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span></span>

<span data-ttu-id="f1bbd-273">**Obrázek 14**: nastavte vlastnost CommandField's `ValidationGroup` ovládacího prvku na hodnotu `InsertValidationControls` ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-273">**Figure 14**: Set the DetailsView's CommandField's `ValidationGroup` property to `InsertValidationControls` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span></span>

<span data-ttu-id="f1bbd-274">Po provedení těchto změn by pole TemplateField a CommandFields ovládacího prvku GridView a měly vypadat podobně jako následující:</span><span class="sxs-lookup"><span data-stu-id="f1bbd-274">After these changes, the DetailsView and GridView's TemplateFields and CommandFields should look similar to the following:</span></span>

<span data-ttu-id="f1bbd-275">Pole TemplateField a CommandField prvku DetailsView</span><span class="sxs-lookup"><span data-stu-id="f1bbd-275">The DetailsView's TemplateFields and CommandField</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample4.aspx)]

<span data-ttu-id="f1bbd-276">CommandField a TemplateField prvku GridView</span><span class="sxs-lookup"><span data-stu-id="f1bbd-276">The GridView's CommandField and TemplateFields</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample5.aspx)]

<span data-ttu-id="f1bbd-277">V tuto chvíli se ovládací prvky ověřování specifické pro úpravy aktivují jenom v případě, že se klikne na tlačítko pro aktualizaci prvku GridView a ovládací prvky pro ověření specifické pro vložení se aktivují jenom v případě, že se klikne na tlačítko pro vložení ovládacího prvku DetailsView, řešení problému zvýrazněného obrázek</span><span class="sxs-lookup"><span data-stu-id="f1bbd-277">At this point the edit-specific validation controls fire only when the GridView's Update button is clicked and the insert-specific validation controls fire only when the DetailsView's Insert button is clicked, resolving the problem highlighted by Figure 13.</span></span> <span data-ttu-id="f1bbd-278">Tato změna ale ovládací souhrnu ověření ovládací prvek se už nezobrazuje při zadávání neplatných dat.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-278">However, with this change our ValidationSummary control no longer displays when entering invalid data.</span></span> <span data-ttu-id="f1bbd-279">Ovládací prvek ovládací souhrnu ověření obsahuje také vlastnost `ValidationGroup` a zobrazuje pouze souhrnné informace o těchto ovládacích prvcích ověřování v příslušné ověřovací skupině.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-279">The ValidationSummary control also contains a `ValidationGroup` property and only shows summary information for those validation controls in its validation group.</span></span> <span data-ttu-id="f1bbd-280">Proto musíme na této stránce mít dva ovládací prvky ověřování, jednu pro skupinu ověření `InsertValidationControls` a jednu pro `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-280">Therefore, we need to have two validation controls in this page, one for the `InsertValidationControls` validation group and one for `EditValidationControls`.</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample6.aspx)]

<span data-ttu-id="f1bbd-281">Tento kurz se dokončí.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-281">With this addition our tutorial is complete!</span></span>

## <a name="summary"></a><span data-ttu-id="f1bbd-282">Souhrn</span><span class="sxs-lookup"><span data-stu-id="f1bbd-282">Summary</span></span>

<span data-ttu-id="f1bbd-283">I když BoundFields může poskytovat rozhraní pro vložení i úpravy, rozhraní není přizpůsobitelné.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-283">While BoundFields can provide both an inserting and editing interface, the interface is not customizable.</span></span> <span data-ttu-id="f1bbd-284">Obecně chceme do rozhraní pro úpravy a vkládání přidat ovládací prvky ověřování, abyste zajistili, že uživatel zadá požadované vstupy do právního formátu.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-284">Commonly, we want to add validation controls to the editing and inserting interface to ensure that the user enters required inputs in a legal format.</span></span> <span data-ttu-id="f1bbd-285">Aby bylo možné tento postup provést, je nutné převést BoundFields na TemplateFields a přidat ověřovací ovládací prvky do odpovídajících šablon.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-285">To accomplish this we must convert the BoundFields into TemplateFields and add the validation controls to the appropriate template(s).</span></span> <span data-ttu-id="f1bbd-286">V tomto kurzu jsme rozšířili příklad z *hlediska událostí souvisejících s vložením, aktualizací a odstraněním* kurzu a přidáte ovládací prvky ověřování do rozhraní pro vložení ovládacího prvku DetailsView i do rozhraní pro úpravy ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-286">In this tutorial we extended the example from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial, adding validation controls to both the DetailsView's inserting interface and the GridView's editing interface.</span></span> <span data-ttu-id="f1bbd-287">Kromě toho jsme viděli, jak zobrazit souhrnné informace o ověřování pomocí ovládacího prvku ovládací souhrnu ověření a jak rozdělit ovládací prvky ověřování na stránku do různých ověřovacích skupin.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-287">Moreover, we saw how to display summary validation information using the ValidationSummary control and how to partition the validation controls on the page into distinct validation groups.</span></span>

<span data-ttu-id="f1bbd-288">Jak jsme viděli v tomto kurzu, TemplateField umožňují rozšířit rozhraní pro úpravy a vkládání, aby zahrnovala ověřovací ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-288">As we saw in this tutorial, TemplateFields allow the editing and inserting interfaces to be augmented to include validation controls.</span></span> <span data-ttu-id="f1bbd-289">TemplateFields lze také rozšířit tak, aby zahrnovaly další vstupní webové ovládací prvky, které umožňují nahradit textové pole vhodnějším webovým ovládacím prvkem.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-289">TemplateFields can also be extended to include additional input Web controls, enabling the TextBox to be replaced by a more suitable Web control.</span></span> <span data-ttu-id="f1bbd-290">V našem dalším kurzu se dozvíte, jak nahradit ovládací prvek TextBox ovládacím prvkem DropDownList vázaného na data, který je ideální při úpravách cizího klíče (například `CategoryID` nebo `SupplierID` v tabulce `Products`).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-290">In our next tutorial we'll see how to replace the TextBox control with a data-bound DropDownList control, which is ideal when editing a foreign key (such as `CategoryID` or `SupplierID` in the `Products` table).</span></span>

<span data-ttu-id="f1bbd-291">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="f1bbd-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f1bbd-292">O autorovi</span><span class="sxs-lookup"><span data-stu-id="f1bbd-292">About the Author</span></span>

<span data-ttu-id="f1bbd-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f1bbd-294">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f1bbd-295">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f1bbd-296">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f1bbd-297">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="f1bbd-297">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f1bbd-298">Zvláštní díky</span><span class="sxs-lookup"><span data-stu-id="f1bbd-298">Special Thanks To</span></span>

<span data-ttu-id="f1bbd-299">Tato řada kurzů byla přezkoumána mnoha užitečnými kontrolory.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-299">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f1bbd-300">Kontroloři vedoucích k tomuto kurzu byli Liz Shulok a Zack Novotný.</span><span class="sxs-lookup"><span data-stu-id="f1bbd-300">Lead reviewers for this tutorial were Liz Shulok and Zack Jones.</span></span> <span data-ttu-id="f1bbd-301">Uvažujete o přezkoumání mých nadcházejících článků na webu MSDN?</span><span class="sxs-lookup"><span data-stu-id="f1bbd-301">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f1bbd-302">Pokud ano, vyřaďte mi řádek na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-302">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f1bbd-303">[Předchozí](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
> [Další](customizing-the-data-modification-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f1bbd-303">[Previous](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
[Next](customizing-the-data-modification-interface-cs.md)</span></span>
