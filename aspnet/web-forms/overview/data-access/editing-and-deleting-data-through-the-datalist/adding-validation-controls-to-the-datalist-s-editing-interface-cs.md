---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
title: Přidání validačních ovládacích prvků do rozhraní pro úpravy prvkuC#DataList () | Microsoft Docs
author: rick-anderson
description: V tomto kurzu se dozvíte, jak snadné je přidat ověřovací ovládací prvky do EditItemTemplate prvku DataList, aby se zajistilo více foolproof úprav uživatele int...
ms.author: riande
ms.date: 10/30/2006
ms.assetid: 3ecc21c5-da0e-40ab-abb4-fac1e47398ad
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
msc.type: authoredcontent
ms.openlocfilehash: e3c14b7098da832bd28f57026e81dcb7f7ba7130
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78594484"
---
# <a name="adding-validation-controls-to-the-datalists-editing-interface-c"></a><span data-ttu-id="7036e-103">Přidání validačních ovládacích prvků do rozhraní pro úpravy prvku DataList (C#)</span><span class="sxs-lookup"><span data-stu-id="7036e-103">Adding Validation Controls to the DataList's Editing Interface (C#)</span></span>

<span data-ttu-id="7036e-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7036e-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7036e-105">[Stáhnout ukázkovou aplikaci](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) nebo [Stáhnout PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="7036e-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) or [Download PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span></span>

> <span data-ttu-id="7036e-106">V tomto kurzu se dozvíte, jak snadné je přidat ověřovací ovládací prvky do EditItemTemplate prvku DataList, aby bylo možné zajistit další foolproof úpravy uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="7036e-106">In this tutorial we'll see how easy it is to add validation controls to the DataList's EditItemTemplate in order to provide a more foolproof editing user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="7036e-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="7036e-107">Introduction</span></span>

<span data-ttu-id="7036e-108">V prozatímných kurzech upravujících úpravy ovládacího prvku DataList nezahrnovala žádná aktivní ověřování vstupu uživatele, i když neplatný vstup uživatele, jako je chybějící název produktu nebo záporná cena, má za následek výjimku.</span><span class="sxs-lookup"><span data-stu-id="7036e-108">In the DataList editing tutorials thus far, the DataLists editing interfaces have not included any proactive user input validation even though invalid user input such as a missing product name or negative price results in an exception.</span></span> <span data-ttu-id="7036e-109">V [předchozím kurzu](handling-bll-and-dal-level-exceptions-cs.md) jsme prozkoumali, jak přidat kód pro zpracování výjimek do obslužné rutiny události `UpdateCommand` DataList s, aby se zachytává a korektně zobrazovala informace o všech vyvolaných výjimkách.</span><span class="sxs-lookup"><span data-stu-id="7036e-109">In the [preceding tutorial](handling-bll-and-dal-level-exceptions-cs.md) we examined how to add exception handling code to the DataList s `UpdateCommand` event handler in order to catch and gracefully display information about any exceptions that were raised.</span></span> <span data-ttu-id="7036e-110">V ideálním případě však rozhraní pro úpravy obsahuje ovládací prvky ověřování, které uživatelům brání v zadávání takových neplatných dat na prvním místě.</span><span class="sxs-lookup"><span data-stu-id="7036e-110">Ideally, however, the editing interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="7036e-111">V tomto kurzu se dozvíte, jak snadné je přidat ovládací prvky ověřování do `EditItemTemplate` DataList s, aby bylo možné zajistit další foolproof úpravy uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="7036e-111">In this tutorial we'll see how easy it is to add validation controls to the DataList s `EditItemTemplate` in order to provide a more foolproof editing user interface.</span></span> <span data-ttu-id="7036e-112">Konkrétně tento kurz používá příklad vytvořený v předchozím kurzu a rozšiřuje rozhraní pro úpravy tak, aby zahrnovalo příslušné ověření.</span><span class="sxs-lookup"><span data-stu-id="7036e-112">Specifically, this tutorial takes the example created in the preceding tutorial and augments the editing interface to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromhandling-bll--and-dal-level-exceptions"></a><span data-ttu-id="7036e-113">Krok 1: replikace příkladu z manipulace s[výjimkami na úrovni knihoven BLL a dal](handling-bll-and-dal-level-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="7036e-113">Step 1: Replicating the Example from[Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md)</span></span>

<span data-ttu-id="7036e-114">V kurzu [zpracování výjimek knihoven BLL a dal](handling-bll-and-dal-level-exceptions-cs.md) jsme vytvořili stránku, která uvádí názvy a ceny produktů ve dvou sloupcích upravitelných DataList.</span><span class="sxs-lookup"><span data-stu-id="7036e-114">In the [Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md) tutorial we created a page that listed the names and prices of the products in a two-column, editable DataList.</span></span> <span data-ttu-id="7036e-115">Naším cílem tohoto kurzu je rozšířit rozhraní pro úpravy DataList s, aby zahrnovalo ověřovací ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="7036e-115">Our goal for this tutorial is to augment the DataList s editing interface to include validation controls.</span></span> <span data-ttu-id="7036e-116">Konkrétně naše logika ověřování bude:</span><span class="sxs-lookup"><span data-stu-id="7036e-116">In particular, our validation logic will:</span></span>

- <span data-ttu-id="7036e-117">Vyžadovat, aby byl zadaný název produktu</span><span class="sxs-lookup"><span data-stu-id="7036e-117">Require that the product s name be provided</span></span>
- <span data-ttu-id="7036e-118">Ujistěte se, že zadaná hodnota ceny je platný formát měny.</span><span class="sxs-lookup"><span data-stu-id="7036e-118">Ensure that the value entered for the price is a valid currency format</span></span>
- <span data-ttu-id="7036e-119">Ujistěte se, že hodnota zadaná pro cenu je větší nebo rovna nule, protože záporná hodnota `UnitPrice` je neplatná.</span><span class="sxs-lookup"><span data-stu-id="7036e-119">Ensure that the value entered for the price is greater than or equal to zero, since a negative `UnitPrice` value is illegal</span></span>

<span data-ttu-id="7036e-120">Předtím, než se můžeme podívat na rozšíření předchozího příkladu, aby bylo ověřování zahrnuto, nejdřív je potřeba replikovat příklad ze stránky `ErrorHandling.aspx` ve složce `EditDeleteDataList` na stránku pro tento kurz, `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="7036e-120">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `ErrorHandling.aspx` page in the `EditDeleteDataList` folder to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="7036e-121">Abychom to dosáhli, musíme zkopírovat jak deklarativní značky `ErrorHandling.aspx` stránky, tak i jeho zdrojový kód.</span><span class="sxs-lookup"><span data-stu-id="7036e-121">To achieve this we need to copy over both the `ErrorHandling.aspx` page s declarative markup and its source code.</span></span> <span data-ttu-id="7036e-122">Nejdřív zkopírujte přes deklarativní označení provedením následujících kroků:</span><span class="sxs-lookup"><span data-stu-id="7036e-122">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="7036e-123">Otevření stránky `ErrorHandling.aspx` v aplikaci Visual Studio</span><span class="sxs-lookup"><span data-stu-id="7036e-123">Open the `ErrorHandling.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="7036e-124">Přejděte na deklarativní značku stránky (klikněte na tlačítko zdroj v dolní části stránky).</span><span class="sxs-lookup"><span data-stu-id="7036e-124">Go to the page s declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="7036e-125">Zkopírujte text v rámci značek `<asp:Content>` a `</asp:Content>` (řádky 3 až 32), jak je znázorněno na obrázku 1.</span><span class="sxs-lookup"><span data-stu-id="7036e-125">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 32), as shown in Figure 1.</span></span>

<span data-ttu-id="7036e-126">[![zkopírovat text v &lt;ASP: ovládací prvek Content&gt;](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7036e-126">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span></span>

<span data-ttu-id="7036e-127">**Obrázek 1**: zkopírování textu v ovládacím prvku `<asp:Content>` ([kliknutím zobrazíte obrázek v plné velikosti](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="7036e-127">**Figure 1**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span></span>

1. <span data-ttu-id="7036e-128">Otevřete stránku `UIValidation.aspx`</span><span class="sxs-lookup"><span data-stu-id="7036e-128">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="7036e-129">Přejít na deklarativní označení stránky</span><span class="sxs-lookup"><span data-stu-id="7036e-129">Go to the page s declarative markup</span></span>
3. <span data-ttu-id="7036e-130">Vložte text do ovládacího prvku `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="7036e-130">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="7036e-131">Chcete-li zkopírovat zdrojový kód, otevřete stránku `ErrorHandling.aspx.vb` a zkopírujte pouze text *v rámci* `EditDeleteDataList_ErrorHandling` třídy.</span><span class="sxs-lookup"><span data-stu-id="7036e-131">To copy over the source code, open the `ErrorHandling.aspx.vb` page and copy just the text *within* the `EditDeleteDataList_ErrorHandling` class.</span></span> <span data-ttu-id="7036e-132">Zkopírujte tři obslužné rutiny události (`Products_EditCommand`, `Products_CancelCommand`a `Products_UpdateCommand`) spolu s metodou `DisplayExceptionDetails`, ale **nekopírujte** deklaraci třídy ani příkazy `using`.</span><span class="sxs-lookup"><span data-stu-id="7036e-132">Copy the three event handlers (`Products_EditCommand`, `Products_CancelCommand`, and `Products_UpdateCommand`) along with the `DisplayExceptionDetails` method, but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="7036e-133">Vložte *zkopírovaný text do `EditDeleteDataList_UIValidation` třídy v `UIValidation.aspx.vb`* .</span><span class="sxs-lookup"><span data-stu-id="7036e-133">Paste the copied text *within* the `EditDeleteDataList_UIValidation` class in `UIValidation.aspx.vb`.</span></span>

<span data-ttu-id="7036e-134">Po přesunutí obsahu a kódu z `ErrorHandling.aspx` na `UIValidation.aspx`chvíli počkejte, než se vyzkouší stránky v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="7036e-134">After moving over the content and code from `ErrorHandling.aspx` to `UIValidation.aspx`, take a moment to test out the pages in a browser.</span></span> <span data-ttu-id="7036e-135">V každé z těchto dvou stránek byste měli vidět stejný výstup a vyzkoušet stejnou funkci (viz obrázek 2).</span><span class="sxs-lookup"><span data-stu-id="7036e-135">You should see the same output and experience the same functionality in each of these two pages (see Figure 2).</span></span>

<span data-ttu-id="7036e-136">[![stránka UIValidation. aspx napodobuje funkci v ErrorHandling. aspx.](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="7036e-136">[![The UIValidation.aspx Page Mimics the Functionality in ErrorHandling.aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span></span>

<span data-ttu-id="7036e-137">**Obrázek 2**: stránka `UIValidation.aspx` napodobuje funkci v `ErrorHandling.aspx` ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="7036e-137">**Figure 2**: The `UIValidation.aspx` Page Mimics the Functionality in `ErrorHandling.aspx` ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span></span>

## <a name="step-2-adding-the-validation-controls-to-the-datalist-s-edititemtemplate"></a><span data-ttu-id="7036e-138">Krok 2: Přidání ovládacích prvků ověřování do rozhraní DataList s EditItemTemplate</span><span class="sxs-lookup"><span data-stu-id="7036e-138">Step 2: Adding the Validation Controls to the DataList s EditItemTemplate</span></span>

<span data-ttu-id="7036e-139">Při vytváření formulářů pro zadávání dat je důležité, aby uživatelé zadali všechna povinná pole a aby všechny jejich zadané vstupy byly právní a správně formátované hodnoty.</span><span class="sxs-lookup"><span data-stu-id="7036e-139">When constructing data entry forms, it is important that users enter any required fields and that all their provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="7036e-140">Aby bylo zajištěno, že vstupy uživatele jsou platné, ASP.NET poskytuje pět předdefinovaných ověřovacích ovládacích prvků, které jsou navrženy k ověření hodnoty jediného vstupního webového ovládacího prvku:</span><span class="sxs-lookup"><span data-stu-id="7036e-140">To help ensure that a user s inputs are valid, ASP.NET provides five built-in validation controls that are designed to validate the value of a single input Web control:</span></span>

- <span data-ttu-id="7036e-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) zajistí, že byla zadána hodnota.</span><span class="sxs-lookup"><span data-stu-id="7036e-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="7036e-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) ověří hodnotu pro jinou hodnotu webového ovládacího prvku nebo konstantní hodnotu nebo zajistí, že formát Value s je platný pro zadaný datový typ.</span><span class="sxs-lookup"><span data-stu-id="7036e-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value s format is legal for a specified data type</span></span>
- <span data-ttu-id="7036e-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) zajišťuje, že hodnota spadá do rozsahu hodnot</span><span class="sxs-lookup"><span data-stu-id="7036e-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="7036e-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) ověří hodnotu oproti [regulárnímu výrazu](http://en.wikipedia.org/wiki/Regular_expression) .</span><span class="sxs-lookup"><span data-stu-id="7036e-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="7036e-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) ověří hodnotu podle vlastní uživatelem definované metody</span><span class="sxs-lookup"><span data-stu-id="7036e-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="7036e-146">Další informace o těchto pěti ovládacích prvcích odkazují zpátky na kurz [přidávání ověřovacích ovládacích prvků do rozhraní pro úpravy a vkládání](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) , nebo si přečtěte [část ovládací prvky ověřování](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) v kurzu [rychlý Start pro ASP.NET](https://quickstarts.asp.net).</span><span class="sxs-lookup"><span data-stu-id="7036e-146">For more information on these five controls refer back to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) tutorial or check out the [Validation Controls section](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://quickstarts.asp.net).</span></span>

<span data-ttu-id="7036e-147">Pro náš kurz budeme muset použít RequiredFieldValidator, aby se zajistilo, že se zadala hodnota pro název produktu, a CompareValidator, aby se zajistilo, že zadaná cena má hodnotu větší nebo rovnu 0 a je prezentována v platném formátu měny.</span><span class="sxs-lookup"><span data-stu-id="7036e-147">For our tutorial we'll need to use a RequiredFieldValidator to ensure that a value for the product name has been supplied and a CompareValidator to ensure that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="7036e-148">Zatímco ASP.NET 1. x má stejné pět ověřovacích ovládacích prvků, ASP.NET 2,0 přináší řadu vylepšení, což je hlavní dvě Podpora skriptů na straně klienta pro prohlížeče kromě aplikace Internet Explorer a možnost rozdělit ovládací prvky ověřování na stránku na skupiny ověření.</span><span class="sxs-lookup"><span data-stu-id="7036e-148">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers in addition to Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="7036e-149">Další informace o nových funkcích ovládacího prvku ověřování v 2,0 najdete v tématu přeASP.NET [ovládacích prvků ověřování v nástroji 2,0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="7036e-149">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>

<span data-ttu-id="7036e-150">Nechte začít přidáním nezbytných ověřovacích ovládacích prvků do `EditItemTemplate`DataList s.</span><span class="sxs-lookup"><span data-stu-id="7036e-150">Let s start by adding the necessary validation controls to the DataList s `EditItemTemplate`.</span></span> <span data-ttu-id="7036e-151">Tuto úlohu lze provést prostřednictvím návrháře kliknutím na odkaz Upravit šablony z inteligentní značky DataList s nebo prostřednictvím deklarativní syntaxe.</span><span class="sxs-lookup"><span data-stu-id="7036e-151">This task can be performed through the Designer by clicking on the Edit Templates link from the DataList s smart tag, or through the declarative syntax.</span></span> <span data-ttu-id="7036e-152">Umožňuje Krokovat s procesem pomocí možnosti Upravit šablony z zobrazení Návrh.</span><span class="sxs-lookup"><span data-stu-id="7036e-152">Let s step through the process using the Edit Templates option from the Design view.</span></span> <span data-ttu-id="7036e-153">Po zvolení úprav `EditItemTemplate`prvku DataList, přidejte objekt RequiredFieldValidator přetažením z panelu nástrojů do rozhraní pro úpravu šablony a umístěte jej za textové pole `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="7036e-153">After choosing to edit the DataList s `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing it after the `ProductName` TextBox.</span></span>

<span data-ttu-id="7036e-154">[![přidat RequiredFieldValidator do pole EditItemTemplate za textovým polem NázevVýrobku](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="7036e-154">[![Add a RequiredFieldValidator to the EditItemTemplate After the ProductName TextBox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span></span>

<span data-ttu-id="7036e-155">**Obrázek 3**: přidejte RequiredFieldValidator do `EditItemTemplate After` textového pole `ProductName` ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="7036e-155">**Figure 3**: Add a RequiredFieldValidator to the `EditItemTemplate After` the `ProductName` TextBox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span></span>

<span data-ttu-id="7036e-156">Všechny ovládací prvky ověřování fungují při ověřování vstupu jednoho ASP.NET webového ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="7036e-156">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="7036e-157">Proto je potřeba určit, že RequiredFieldValidator, který jsme právě přidali, by měla ověřit proti `ProductName` TextBox; To se provádí nastavením [vlastnosti`ControlToValidate`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) ovládacího prvku pro ověřování na `ID` příslušného webového ovládacího prvku (`ProductName`, v této instanci).</span><span class="sxs-lookup"><span data-stu-id="7036e-157">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the `ProductName` TextBox; this is done by setting the validation control s [`ControlToValidate` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control (`ProductName`, in this instance).</span></span> <span data-ttu-id="7036e-158">Dále nastavte [vlastnost`ErrorMessage`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) na hodnotu musíte zadat název produktu a [vlastnost`Text`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) na \*.</span><span class="sxs-lookup"><span data-stu-id="7036e-158">Next, set the [`ErrorMessage` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to You must provide the product s name and the [`Text` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to \*.</span></span> <span data-ttu-id="7036e-159">Hodnota vlastnosti `Text`, je-li k dispozici, je text, který je zobrazen ovládacím prvkem ověřování v případě, že se ověření nepovede.</span><span class="sxs-lookup"><span data-stu-id="7036e-159">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="7036e-160">Hodnota vlastnosti `ErrorMessage`, která je povinná, je používána ovládacím prvkem ovládací souhrnu ověření; Pokud je hodnota vlastnosti `Text` vynechána, zobrazí se ovládací prvek ověřování u neplatného vstupu hodnotu vlastnosti `ErrorMessage`.</span><span class="sxs-lookup"><span data-stu-id="7036e-160">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="7036e-161">Po nastavení těchto tří vlastností RequiredFieldValidator by měla obrazovka vypadat podobně jako na obrázku 4.</span><span class="sxs-lookup"><span data-stu-id="7036e-161">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 4.</span></span>

<span data-ttu-id="7036e-162">[![nastavit vlastnosti RequiredFieldValidator s ControlToValidate, ErrorMessage a text](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="7036e-162">[![Set the RequiredFieldValidator s ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span></span>

<span data-ttu-id="7036e-163">**Obrázek 4**: nastavte vlastnosti RequiredFieldValidator `ControlToValidate`, `ErrorMessage`a `Text` ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="7036e-163">**Figure 4**: Set the RequiredFieldValidator s `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span></span>

<span data-ttu-id="7036e-164">Když se RequiredFieldValidator přidá do `EditItemTemplate`, vše zůstává k přidání nezbytného ověření pro textové pole s cenami produktu.</span><span class="sxs-lookup"><span data-stu-id="7036e-164">With the RequiredFieldValidator added to the `EditItemTemplate`, all that remains is to add the necessary validation for the product s price TextBox.</span></span> <span data-ttu-id="7036e-165">Vzhledem k tomu, že `UnitPrice` při úpravách záznamu volitelné, nepotřebujeme přidat RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="7036e-165">Since the `UnitPrice` is optional when editing a record, we don t need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="7036e-166">Je ale potřeba přidat CompareValidator, aby se zajistilo, že `UnitPrice`, pokud je zadaný, je správně naformátovaná jako měna a je větší nebo rovna 0.</span><span class="sxs-lookup"><span data-stu-id="7036e-166">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="7036e-167">Přidejte CompareValidator do `EditItemTemplate` a nastavte jeho vlastnost `ControlToValidate` na `UnitPrice`. jeho vlastnost `ErrorMessage` na hodnotu Price musí být větší než nebo rovna nule a nesmí obsahovat symbol měny a jeho vlastnost `Text` \*.</span><span class="sxs-lookup"><span data-stu-id="7036e-167">Add the CompareValidator into the `EditItemTemplate` and set its `ControlToValidate` property to `UnitPrice`, its `ErrorMessage` property to The price must be greater than or equal to zero and cannot include the currency symbol, and its `Text` property to \*.</span></span> <span data-ttu-id="7036e-168">Chcete-li určit, že hodnota `UnitPrice` musí být větší nebo rovna 0, nastavte [vlastnost`Operator`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) CompareValidator s na hodnotu `GreaterThanEqual`, vlastnost [`ValueToCompare`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) na hodnotu 0 a [vlastnost`Type`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) na `Currency`.</span><span class="sxs-lookup"><span data-stu-id="7036e-168">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator s [`Operator` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [`ValueToCompare` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to 0, and its [`Type` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span>

<span data-ttu-id="7036e-169">Po přidání těchto dvou ovládacích prvků ověřování by měla být deklarativní syntaxe `EditItemTemplate` DataList s vypadat podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="7036e-169">After adding these two validation controls, the DataList s `EditItemTemplate` s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample1.aspx)]

<span data-ttu-id="7036e-170">Po provedení těchto změn otevřete stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="7036e-170">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="7036e-171">Pokud se pokusíte vynechat název nebo zadat neplatnou hodnotu ceny při úpravě produktu, zobrazí se vedle textového pole hvězdička.</span><span class="sxs-lookup"><span data-stu-id="7036e-171">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="7036e-172">Jak ukazuje obrázek 5, hodnota ceny zahrnující symbol měny, jako je například $19,95, se považuje za neplatnou.</span><span class="sxs-lookup"><span data-stu-id="7036e-172">As Figure 5 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="7036e-173">CompareValidator s `Currency` `Type` umožňuje oddělovač číslic (například čárky nebo tečky, v závislosti na nastavení jazykové verze) a úvodní znaménko plus nebo mínus, ale *nepovoluje symbol* měny.</span><span class="sxs-lookup"><span data-stu-id="7036e-173">The CompareValidator s `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="7036e-174">Toto chování může perplex uživatele, protože rozhraní pro úpravy aktuálně vykresluje `UnitPrice` pomocí formátu měny.</span><span class="sxs-lookup"><span data-stu-id="7036e-174">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

<span data-ttu-id="7036e-175">[![se zobrazí hvězdička vedle textových polí s neplatným vstupem.](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="7036e-175">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span></span>

<span data-ttu-id="7036e-176">**Obrázek 5**: u textových polí s neplatným vstupem se zobrazí hvězdička ([kliknutím zobrazíte obrázek v plné velikosti](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png)).</span><span class="sxs-lookup"><span data-stu-id="7036e-176">**Figure 5**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span></span>

<span data-ttu-id="7036e-177">I když ověřování funguje tak, jak je, uživatel musí při úpravách záznamu ručně odebrat symbol měny, což není přijatelné.</span><span class="sxs-lookup"><span data-stu-id="7036e-177">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="7036e-178">Kromě toho, pokud existují neplatné vstupy v rozhraní pro úpravy, tlačítka aktualizovat ani zrušit, když kliknou, vyvolá zpětné odeslání.</span><span class="sxs-lookup"><span data-stu-id="7036e-178">Moreover, if there are invalid inputs in the editing interface neither the Update nor Cancel buttons, when clicked, will invoke a postback.</span></span> <span data-ttu-id="7036e-179">V ideálním případě tlačítko Storno vrátí prvek DataList do stavu před úpravou bez ohledu na platnost vstupů uživatele.</span><span class="sxs-lookup"><span data-stu-id="7036e-179">Ideally, the Cancel button would return the DataList to its pre-editing state regardless of the validity of the user s inputs.</span></span> <span data-ttu-id="7036e-180">Před aktualizací informací o produktu v obslužné rutině události `UpdateCommand` DataList je také potřeba zajistit, aby data stránky byla platná, protože ověřování pomocí logiky na straně klienta může být obcházeno uživateli, jejichž prohlížeče buď nepodporují JavaScript, nebo mají zakázanou podporu.</span><span class="sxs-lookup"><span data-stu-id="7036e-180">Also, we need to ensure that the page s data is valid before updating the product information in the DataList s `UpdateCommand` event handler, as the validation controls client-side logic can be bypassed by users whose browsers either don t support JavaScript or have its support disabled.</span></span>

## <a name="removing-the-currency-symbol-from-the-edititemtemplate-s-unitprice-textbox"></a><span data-ttu-id="7036e-181">Odebrání symbolu měny z pole EditItemTemplate s UnitPrice</span><span class="sxs-lookup"><span data-stu-id="7036e-181">Removing the Currency Symbol from the EditItemTemplate s UnitPrice TextBox</span></span>

<span data-ttu-id="7036e-182">Při použití `Currency``Type`CompareValidator s nesmí vstup ověřený, obsahovat žádné symboly měny.</span><span class="sxs-lookup"><span data-stu-id="7036e-182">When using the CompareValidator s `Currency``Type`, the input being validated must not include any currency symbols.</span></span> <span data-ttu-id="7036e-183">Přítomnost takových symbolů způsobí, že CompareValidator označí vstup jako neplatný.</span><span class="sxs-lookup"><span data-stu-id="7036e-183">The presence of such symbols causes the CompareValidator to mark the input as invalid.</span></span> <span data-ttu-id="7036e-184">Naše rozhraní pro úpravy však v současnosti obsahuje symbol měny v textovém poli `UnitPrice`, což znamená, že uživatel musí explicitně odebrat symbol měny před uložením změn.</span><span class="sxs-lookup"><span data-stu-id="7036e-184">However, our editing interface currently includes a currency symbol in the `UnitPrice` TextBox, meaning the user must explicitly remove the currency symbol before saving their changes.</span></span> <span data-ttu-id="7036e-185">K nápravě máme tři možnosti:</span><span class="sxs-lookup"><span data-stu-id="7036e-185">To remedy this we have three options:</span></span>

1. <span data-ttu-id="7036e-186">Nakonfigurujte `EditItemTemplate` tak, aby hodnota `UnitPrice` TextBox neformátovala jako měna.</span><span class="sxs-lookup"><span data-stu-id="7036e-186">Configure the `EditItemTemplate` so that the `UnitPrice` TextBox value is not formatted as a currency.</span></span>
2. <span data-ttu-id="7036e-187">Umožní uživateli zadat symbol měny odebráním CompareValidator a jeho nahrazením RegularExpressionValidator, který kontroluje správně formátovanou hodnotu měny.</span><span class="sxs-lookup"><span data-stu-id="7036e-187">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that checks for a properly formatted currency value.</span></span> <span data-ttu-id="7036e-188">Zde je uvedeno, že regulární výraz pro ověření hodnoty měny není stejně jednoduchý jako CompareValidator a by vyžadoval psaní kódu, pokud jsme chtěli začlenit nastavení jazykové verze.</span><span class="sxs-lookup"><span data-stu-id="7036e-188">The challenge here is that the regular expression to validate a currency value is not as straightforward as the CompareValidator and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="7036e-189">Odeberte ovládací prvek ověřování zcela a spoléhat na vlastní logiku ověřování na straně serveru v prvku GridView `RowUpdating` obslužná rutina události.</span><span class="sxs-lookup"><span data-stu-id="7036e-189">Remove the validation control altogether and rely on custom server-side validation logic in the GridView s `RowUpdating` event handler.</span></span>

<span data-ttu-id="7036e-190">Pro tento kurz si podíváme s možností 1.</span><span class="sxs-lookup"><span data-stu-id="7036e-190">Let s go with option 1 for this tutorial.</span></span> <span data-ttu-id="7036e-191">V současné době je `UnitPrice` formátován jako hodnota měny z důvodu výrazu datové vazby pro textové pole v `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="7036e-191">Currently the `UnitPrice` is formatted as a currency value due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="7036e-192">Změňte příkaz `Eval` na `Eval("UnitPrice", "{0:n2}")`, který formátuje výsledek jako číslo se dvěma číslicemi přesnosti.</span><span class="sxs-lookup"><span data-stu-id="7036e-192">Change the `Eval` statement to `Eval("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="7036e-193">To lze provést přímo prostřednictvím deklarativní syntaxe nebo kliknutím na odkaz Upravit datové vazby z `UnitPrice` textového pole v `EditItemTemplate`DataList s.</span><span class="sxs-lookup"><span data-stu-id="7036e-193">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `UnitPrice` TextBox in the DataList s `EditItemTemplate`.</span></span>

<span data-ttu-id="7036e-194">V důsledku této změny formátovaná cena v rozhraní pro úpravy zahrnuje čárky jako oddělovač skupin a tečku jako oddělovač desetinných míst, ale ponechá symbol měny.</span><span class="sxs-lookup"><span data-stu-id="7036e-194">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="7036e-195">Když odeberete formát měny z upravitelného rozhraní, zjistíte, že je vhodné vložit symbol měny jako text mimo textové pole.</span><span class="sxs-lookup"><span data-stu-id="7036e-195">When removing the currency format from the editable interface, I find it helpful to put the currency symbol as text outside the TextBox.</span></span> <span data-ttu-id="7036e-196">Slouží jako pomocný parametr pro uživatele, že nemusejí zadávat symbol měny.</span><span class="sxs-lookup"><span data-stu-id="7036e-196">This serves as a hint to the user that they do not need to provide the currency symbol.</span></span>

## <a name="fixing-the-cancel-button"></a><span data-ttu-id="7036e-197">Oprava tlačítka Storno</span><span class="sxs-lookup"><span data-stu-id="7036e-197">Fixing the Cancel Button</span></span>

<span data-ttu-id="7036e-198">Ve výchozím nastavení ověřování webové ovládací prvky generuje JavaScript k provedení ověření na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="7036e-198">By default, the validation Web controls emit JavaScript to perform validation on the client-side.</span></span> <span data-ttu-id="7036e-199">Při kliknutí na tlačítko, LinkButton nebo obrázkové, jsou ovládací prvky ověřování na stránce zkontrolovány na straně klienta před tím, než dojde k postbacku.</span><span class="sxs-lookup"><span data-stu-id="7036e-199">When a Button, LinkButton, or ImageButton is clicked, the validation controls on the page are checked on the client-side before the postback occurs.</span></span> <span data-ttu-id="7036e-200">Pokud jsou k dispozici neplatná data, zpětné volání je zrušeno.</span><span class="sxs-lookup"><span data-stu-id="7036e-200">If there is any invalid data, the postback is cancelled.</span></span> <span data-ttu-id="7036e-201">U některých tlačítek je ale možné, že platnost dat neklade; v takovém případě je zrušení zpětného volání z důvodu neplatných dat rušivé.</span><span class="sxs-lookup"><span data-stu-id="7036e-201">For certain Buttons, though, the validity of the data might be immaterial; in such a case, having the postback cancelled due to invalid data is a nuisance.</span></span>

<span data-ttu-id="7036e-202">Tlačítko Zrušit je takový příklad.</span><span class="sxs-lookup"><span data-stu-id="7036e-202">The Cancel button is such an example.</span></span> <span data-ttu-id="7036e-203">Představte si, že uživatel zadá neplatná data, jako je například vynechání názvu produktu, a pak rozhodne, že nechce produkt po celou hodnotu uložit, a narazí na tlačítko Storno.</span><span class="sxs-lookup"><span data-stu-id="7036e-203">Imagine that a user enters invalid data, such as omitting the product s name, and then decides she doesn t want to save the product after all and hits the Cancel button.</span></span> <span data-ttu-id="7036e-204">V současné době tlačítko zrušit aktivuje ovládací prvky ověřování na stránce, která hlásí, že chybí název produktu, a brání zpětnému odeslání.</span><span class="sxs-lookup"><span data-stu-id="7036e-204">Currently, the Cancel button triggers the validation controls on the page, which report that the product name is missing and prevent the postback.</span></span> <span data-ttu-id="7036e-205">Náš uživatel musí zadat nějaký text do textového pole `ProductName` jenom pro zrušení procesu úprav.</span><span class="sxs-lookup"><span data-stu-id="7036e-205">Our user has to type some text into the `ProductName` TextBox just to cancel out of the editing process.</span></span>

<span data-ttu-id="7036e-206">Naštěstí, tlačítko, LinkButton a obrázkové mají [vlastnost`CausesValidation`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) , která může indikovat, zda kliknutí na tlačítko má zahájit logiku ověřování (výchozí nastavení `True`).</span><span class="sxs-lookup"><span data-stu-id="7036e-206">Fortunately, the Button, LinkButton, and ImageButton have a [`CausesValidation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) that can indicate whether or not clicking the Button should initiate the validation logic (defaults to `True`).</span></span> <span data-ttu-id="7036e-207">Nastavte vlastnost `CausesValidation` tlačítka Storno na hodnotu `False`.</span><span class="sxs-lookup"><span data-stu-id="7036e-207">Set the Cancel Button s `CausesValidation` property to `False`.</span></span>

## <a name="ensuring-the-inputs-are-valid-in-the-updatecommand-event-handler"></a><span data-ttu-id="7036e-208">Zajištění platnosti vstupů v obslužné rutině události UpdateCommand</span><span class="sxs-lookup"><span data-stu-id="7036e-208">Ensuring the Inputs are Valid in the UpdateCommand Event Handler</span></span>

<span data-ttu-id="7036e-209">Z důvodu skriptu na straně klienta generovaného ovládacími prvky ověřování, pokud uživatel zadá neplatný vstup, zruší všechny postbacky iniciované pomocí tlačítka, LinkButton nebo obrázkové, jejichž vlastnosti `CausesValidation` jsou `True` (výchozí).</span><span class="sxs-lookup"><span data-stu-id="7036e-209">Due to the client-side script emitted by the validation controls, if a user enters invalid input the validation controls cancel any postbacks initiated by Button, LinkButton, or ImageButton controls whose `CausesValidation` properties are `True` (the default).</span></span> <span data-ttu-id="7036e-210">Pokud se ale uživatel navštíví s prohlížečem antiquated nebo s tím, jehož podpora JavaScriptu je zakázaná, nespustí se kontroly ověřování na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="7036e-210">However, if a user is visiting with an antiquated browser or one whose JavaScript support has been disabled, the client-side validation checks will not execute.</span></span>

<span data-ttu-id="7036e-211">Všechny ovládací prvky ověřování ASP.NET zopakují svůj ověřovací logiku ihned po zpětném odeslání a nahlásí celkovou platnost vstupů stránky prostřednictvím [vlastnosti`Page.IsValid`](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span><span class="sxs-lookup"><span data-stu-id="7036e-211">All of the ASP.NET validation controls repeat their validation logic immediately upon postback and report the overall validity of the page s inputs via the [`Page.IsValid` property](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span></span> <span data-ttu-id="7036e-212">Tok stránky ale není nijak přerušený ani zastavený podle hodnoty `Page.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="7036e-212">However, the page flow is not interrupted or stopped in any way based on the value of `Page.IsValid`.</span></span> <span data-ttu-id="7036e-213">Jako vývojáři je naše zodpovědnost za zajištění, že vlastnost `Page.IsValid` má hodnotu `True` před pokračováním v kódu, který předpokládá platná vstupní data.</span><span class="sxs-lookup"><span data-stu-id="7036e-213">As developers, it is our responsibility to ensure that the `Page.IsValid` property has a value of `True` before proceeding with code that assumes valid input data.</span></span>

<span data-ttu-id="7036e-214">Pokud je na uživateli zakázaný JavaScript, navštíví naši stránku, upraví produkt, zadá cenu za moc nákladný a klikne na tlačítko Aktualizovat, ověřování na straně klienta se obejít a postback se následovat.</span><span class="sxs-lookup"><span data-stu-id="7036e-214">If a user has JavaScript disabled, visits our page, edits a product, enters a price value of Too expensive, and clicks the Update button, the client-side validation will be bypassed and a postback will ensue.</span></span> <span data-ttu-id="7036e-215">Při zpětném volání se spustí obslužná rutina ASP.NET stránky s `UpdateCommand` a při pokusu o analýzu příliš nákladného na `Decimal`je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="7036e-215">On postback, the ASP.NET page s `UpdateCommand` event handler executes and an exception is raised when attempting to parse Too expensive to a `Decimal`.</span></span> <span data-ttu-id="7036e-216">Vzhledem k tomu, že máme zpracování výjimek, taková výjimka bude zpracována řádným, ale můžeme zabránit tomu, aby se neplatná data procházela v prvním místě, a to tak, že bude pokračovat pouze s `UpdateCommand` obslužnou rutinou události, pokud `Page.IsValid` má hodnotu `True`.</span><span class="sxs-lookup"><span data-stu-id="7036e-216">Since we have exception handling, such an exception will be handled gracefully, but we could prevent the invalid data from slipping through in the first place by only proceeding with the `UpdateCommand` event handler if `Page.IsValid` has a value of `True`.</span></span>

<span data-ttu-id="7036e-217">Přidejte následující kód na začátek obslužné rutiny události `UpdateCommand` těsně před blok `Try`:</span><span class="sxs-lookup"><span data-stu-id="7036e-217">Add the following code to the start of the `UpdateCommand` event handler, immediately before the `Try` block:</span></span>

[!code-csharp[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample2.cs)]

<span data-ttu-id="7036e-218">S tímto sčítáním se produkt pokusí aktualizovat jenom v případě, že jsou odeslaná data platná.</span><span class="sxs-lookup"><span data-stu-id="7036e-218">With this addition, the product will attempt to be updated only if the submitted data is valid.</span></span> <span data-ttu-id="7036e-219">Většina uživatelů nebude moci odeslat neplatná data z důvodu ověřování skriptů na straně klienta, ale uživatelé, jejichž prohlížeče nepodporují JavaScript nebo které mají zakázanou podporu JavaScriptu, mohou obejít kontroly na straně klienta a odesílat neplatná data.</span><span class="sxs-lookup"><span data-stu-id="7036e-219">Most users won't be able to postback invalid data due to the validation controls client-side scripts, but users whose browsers don t support JavaScript or that have JavaScript support disabled, can bypass the client-side checks and submit invalid data.</span></span>

> [!NOTE]
> <span data-ttu-id="7036e-220">Čtecí modul bystří si odvolá, že při aktualizaci dat pomocí prvku GridView, nemuseli byste explicitně kontrolovat vlastnost `Page.IsValid` v naší třídě Code-on na pozadí.</span><span class="sxs-lookup"><span data-stu-id="7036e-220">The astute reader will recall that when updating data with the GridView, we didn't need to explicitly check the `Page.IsValid` property in our page s code-behind class.</span></span> <span data-ttu-id="7036e-221">Je to proto, že prvek GridView aktualizuje vlastnost `Page.IsValid` pro nás a pokračuje pouze s aktualizací pouze v případě, že vrací hodnotu `True`.</span><span class="sxs-lookup"><span data-stu-id="7036e-221">This is because the GridView consults the `Page.IsValid` property for us and only proceeds with the update only if it returns a value of `True`.</span></span>

## <a name="step-3-summarizing-data-entry-problems"></a><span data-ttu-id="7036e-222">Krok 3: sumarizace problémů se zadáváním dat</span><span class="sxs-lookup"><span data-stu-id="7036e-222">Step 3: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="7036e-223">Kromě pěti ovládacích prvků ověřování obsahuje ASP.NET [ovládací prvek ovládací souhrnu ověření](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), který zobrazuje `ErrorMessage` s těmito ověřovacími ovládacími prvky, které zjistila neplatná data.</span><span class="sxs-lookup"><span data-stu-id="7036e-223">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="7036e-224">Tato souhrnná data lze zobrazit jako text na webové stránce nebo modálním objektem MessageBox na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="7036e-224">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="7036e-225">Tento kurz vám usnadní zahrnutí MessageBox na straně klienta, které shrnuje jakékoli problémy s ověřením.</span><span class="sxs-lookup"><span data-stu-id="7036e-225">Let s enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="7036e-226">Chcete-li to provést, přetáhněte ovládací prvek ovládací souhrnu ověření z panelu nástrojů na Návrhář.</span><span class="sxs-lookup"><span data-stu-id="7036e-226">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="7036e-227">Poloha ovládacího prvku ovládací souhrnu ověření má nezávisle na skutečnosti, protože ho znovu nakonfigurujeme tak, aby zobrazoval pouze souhrn jako MessageBox.</span><span class="sxs-lookup"><span data-stu-id="7036e-227">The location of the ValidationSummary control doesn t really matter, since we re going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="7036e-228">Po přidání ovládacího prvku nastavte jeho [vlastnost`ShowSummary`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) na `False` a jeho [vlastnost`ShowMessageBox`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) na `True`.</span><span class="sxs-lookup"><span data-stu-id="7036e-228">After adding the control, set its [`ShowSummary` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `False` and its [`ShowMessageBox` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `True`.</span></span> <span data-ttu-id="7036e-229">S tímto sčítáním jsou všechny chyby ověřování shrnuty na straně klienta MessageBox (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="7036e-229">With this addition, any validation errors are summarized in a client-side messagebox (see Figure 6).</span></span>

<span data-ttu-id="7036e-230">[![chyby ověřování jsou shrnuty ve MessageBox na straně klienta.](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="7036e-230">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span></span>

<span data-ttu-id="7036e-231">**Obrázek 6**: Chyby ověřování jsou shrnuty v prvku MessageBox na straně klienta ([kliknutím zobrazíte obrázek v plné velikosti).](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="7036e-231">**Figure 6**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span></span>

## <a name="summary"></a><span data-ttu-id="7036e-232">Souhrn</span><span class="sxs-lookup"><span data-stu-id="7036e-232">Summary</span></span>

<span data-ttu-id="7036e-233">V tomto kurzu jsme zjistili, jak snížit pravděpodobnost výjimek pomocí ověřovacích ovládacích prvků, abyste proaktivně zajistili, že vstupy uživatelů jsou platné před pokusem o jejich použití v pracovním postupu aktualizace.</span><span class="sxs-lookup"><span data-stu-id="7036e-233">In this tutorial we saw how to reduce the likelihood of exceptions by using validation controls to proactively ensure that our users inputs are valid before attempting to use them in the updating workflow.</span></span> <span data-ttu-id="7036e-234">ASP.NET poskytuje pět ověřovacích webových ovládacích prvků, které jsou navrženy pro kontrolu konkrétního vstupu webového ovládacího prvku a hlášení o platnosti vstupu s.</span><span class="sxs-lookup"><span data-stu-id="7036e-234">ASP.NET provides five validation Web controls that are designed to inspect a particular Web control s input and report back on the input s validity.</span></span> <span data-ttu-id="7036e-235">V tomto kurzu jsme použili dvě z těchto pěti ovládacích prvků RequiredFieldValidator a CompareValidator, abyste zajistili, že byl dodán název produktu a že cena měla formát měny s hodnotou větší než nebo rovna nule.</span><span class="sxs-lookup"><span data-stu-id="7036e-235">In this tutorial we used two of those five controls the RequiredFieldValidator and the CompareValidator to ensure that the product s name was supplied and that the price had a currency format with a value greater than or equal to zero.</span></span>

<span data-ttu-id="7036e-236">Přidávání ověřovacích ovládacích prvků do rozhraní pro úpravy DataList s je tak jednoduché jako přetahování na `EditItemTemplate` ze sady nástrojů a nastavení několik vlastností.</span><span class="sxs-lookup"><span data-stu-id="7036e-236">Adding validation controls to the DataList s editing interface is as simple as dragging them onto the `EditItemTemplate` from the Toolbox and setting a handful of properties.</span></span> <span data-ttu-id="7036e-237">Ve výchozím nastavení ovládací prvky ověřování automaticky generují skript ověřování na straně klienta; poskytují také ověřování na straně serveru při postbacku a ukládají kumulativní výsledek do vlastnosti `Page.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="7036e-237">By default, the validation controls automatically emit client-side validation script; they also provide server-side validation on postback, storing the cumulative result in the `Page.IsValid` property.</span></span> <span data-ttu-id="7036e-238">Chcete-li při kliknutí na tlačítko, LinkButton nebo obrázkové obejít ověřování na straně klienta, nastavte vlastnost tlačítko s `CausesValidation` na `False`.</span><span class="sxs-lookup"><span data-stu-id="7036e-238">To bypass the client-side validation when a Button, LinkButton, or ImageButton is clicked, set the button s `CausesValidation` property to `False`.</span></span> <span data-ttu-id="7036e-239">Před provedením jakýchkoli úkolů s daty odeslanými při zpětném volání ověřte také, že vlastnost `Page.IsValid` vrátí `True`.</span><span class="sxs-lookup"><span data-stu-id="7036e-239">Also, before performing any tasks with the data submitted on postback, ensure that the `Page.IsValid` property returns `True`.</span></span>

<span data-ttu-id="7036e-240">Všechny kurzy pro úpravy DataList, které jsme dosud zkoumali, mají velmi jednoduchá rozhraní pro úpravy a textové pole pro název produktu a další pro tuto cenu.</span><span class="sxs-lookup"><span data-stu-id="7036e-240">All of the DataList editing tutorials we ve examined so far have had very simple editing interfaces a TextBox for the product s name and another for the price.</span></span> <span data-ttu-id="7036e-241">Rozhraní pro úpravy však může obsahovat kombinaci různých webových ovládacích prvků, jako jsou například DropDownList, kalendáře, přepínače, zaškrtávací políčka a tak dále.</span><span class="sxs-lookup"><span data-stu-id="7036e-241">The editing interface, however, can contain a mix of different Web controls, such as DropDownLists, Calendars, RadioButtons, CheckBoxes, and so on.</span></span> <span data-ttu-id="7036e-242">V našem dalším kurzu se podíváme na sestavení rozhraní, které používá různé webové ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="7036e-242">In our next tutorial we'll look at building an interface that uses a variety of Web controls.</span></span>

<span data-ttu-id="7036e-243">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="7036e-243">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="7036e-244">O autorovi</span><span class="sxs-lookup"><span data-stu-id="7036e-244">About the Author</span></span>

<span data-ttu-id="7036e-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="7036e-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="7036e-246">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="7036e-246">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="7036e-247">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="7036e-247">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="7036e-248">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7036e-248">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="7036e-249">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="7036e-249">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="7036e-250">Zvláštní díky</span><span class="sxs-lookup"><span data-stu-id="7036e-250">Special Thanks To</span></span>

<span data-ttu-id="7036e-251">Tato řada kurzů byla přezkoumána mnoha užitečnými kontrolory.</span><span class="sxs-lookup"><span data-stu-id="7036e-251">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="7036e-252">Kontroloři vedoucích k tomuto kurzu byli Dennis Patterson, Ken Pespisa a Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="7036e-252">Lead reviewers for this tutorial were Dennis Patterson, Ken Pespisa, and Liz Shulok.</span></span> <span data-ttu-id="7036e-253">Uvažujete o přezkoumání mých nadcházejících článků na webu MSDN?</span><span class="sxs-lookup"><span data-stu-id="7036e-253">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="7036e-254">Pokud ano, vyřaďte mi řádek na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7036e-254">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="7036e-255">[Předchozí](handling-bll-and-dal-level-exceptions-cs.md)
> [Další](customizing-the-datalist-s-editing-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="7036e-255">[Previous](handling-bll-and-dal-level-exceptions-cs.md)
[Next](customizing-the-datalist-s-editing-interface-cs.md)</span></span>
