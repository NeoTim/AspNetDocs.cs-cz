---
uid: web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
title: Dávkové odstraňování (C#) | Dokumentace Microsoftu
author: rick-anderson
description: Zjistěte, jak odstranit více záznamů databáze v rámci jedné operace. Ve vrstvě uživatelského rozhraní můžeme stavět rozšířené GridView vytvořili v předchozím kroku tut...
ms.author: riande
ms.date: 06/26/2007
ms.assetid: ac6916d0-a5ab-4218-9760-7ba9e72d258c
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: da913e08cd007a89b659f87ef30ea15160692c09
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/17/2019
ms.locfileid: "59416945"
---
# <a name="batch-deleting-c"></a><span data-ttu-id="5f108-104">Dávkové odstraňování (C#)</span><span class="sxs-lookup"><span data-stu-id="5f108-104">Batch Deleting (C#)</span></span>

<span data-ttu-id="5f108-105">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5f108-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5f108-106">[Stáhněte si kód](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) nebo [stahovat PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="5f108-106">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) or [Download PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span></span>

> <span data-ttu-id="5f108-107">Zjistěte, jak odstranit více záznamů databáze v rámci jedné operace.</span><span class="sxs-lookup"><span data-stu-id="5f108-107">Learn how to delete multiple database records in a single operation.</span></span> <span data-ttu-id="5f108-108">Ve vrstvě uživatelského rozhraní jsme stavět rozšířené GridView vytvořili v předchozí kurzu.</span><span class="sxs-lookup"><span data-stu-id="5f108-108">In the User Interface Layer we build upon an enhanced GridView created in an earlier tutorial.</span></span> <span data-ttu-id="5f108-109">V datové vrstvě přístupu jsme zabalit více operací odstranit v rámci transakce, aby se zajistilo, že všechna odstranění úspěšné nebo všechna odstranění se vrátí zpět.</span><span class="sxs-lookup"><span data-stu-id="5f108-109">In the Data Access Layer we wrap the multiple Delete operations within a transaction to ensure that all deletions succeed or all deletions are rolled back.</span></span>


## <a name="introduction"></a><span data-ttu-id="5f108-110">Úvod</span><span class="sxs-lookup"><span data-stu-id="5f108-110">Introduction</span></span>

<span data-ttu-id="5f108-111">[Předchozím kurzu](batch-updating-cs.md) prozkoumali vytvoření dávky úpravy rozhraní pomocí plně upravitelné ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="5f108-111">The [preceding tutorial](batch-updating-cs.md) explored how to create a batch editing interface using a fully-editable GridView.</span></span> <span data-ttu-id="5f108-112">V situacích, kdy uživatelé běžně upravujete mnoha záznamů najednou, bude vyžadovat úpravy rozhraní batch mnohem méně zpětného odeslání a kontext myš a klávesnici přepínače, a tím zlepšují efektivitu s koncovým uživatelem.</span><span class="sxs-lookup"><span data-stu-id="5f108-112">In situations where users are commonly editing many records at once, a batch editing interface will require far fewer postbacks and keyboard-to-mouse context switches, thereby improving the end user s efficiency.</span></span> <span data-ttu-id="5f108-113">Tato technika je užitečná podobně pro stránky, kde je běžné, že uživatelům odstranit mnoha záznamů najednou.</span><span class="sxs-lookup"><span data-stu-id="5f108-113">This technique is similarly useful for pages where it is common for users to delete many records in one go.</span></span>

<span data-ttu-id="5f108-114">Každý, kdo použil online e-mailového klienta je již obeznámeni s jedním z nejběžnějších dávkové odstranění rozhraní: zaškrtávací políčko v každém řádku v tabulce s odpovídající odstranit všechny zaškrtnutí položky a tlačítka (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="5f108-114">Anyone who has used an online email client is already familiar with one of the most common batch deleting interfaces: a checkbox in each row in a grid with a corresponding Delete All Checked Items button (see Figure 1).</span></span> <span data-ttu-id="5f108-115">Tento kurz je spíše krátký protože jsme ve neučinili všechny těžkou práci v předchozích kurzech při vytváření webové rozhraní a metoda odstranit řadu záznamy jako jednu atomickou operaci.</span><span class="sxs-lookup"><span data-stu-id="5f108-115">This tutorial is rather short because we ve already done all of the hard work in previous tutorials in creating both the web-based interface and a method to delete a series of records as a single atomic operation.</span></span> <span data-ttu-id="5f108-116">V [přidání sloupce zaškrtávacích políček do ovládacího prvku GridView](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) kurzu jsme vytvořili GridView sloupce zaškrtávacích políček a v [zabalení úprav databáze do transakce](wrapping-database-modifications-within-a-transaction-cs.md) kurzu jsme vytvořili metody v BLL, byste použili transakce odstranit `List<T>` z `ProductID` hodnoty.</span><span class="sxs-lookup"><span data-stu-id="5f108-116">In the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial we created a GridView with a column of checkboxes and in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial we created a method in the BLL that would use a transaction to delete a `List<T>` of `ProductID` values.</span></span> <span data-ttu-id="5f108-117">V tomto kurzu budeme stavět a sloučit naše předchozí prostředí, abyste vytvořili pracovní dávkové odstranění příklad.</span><span class="sxs-lookup"><span data-stu-id="5f108-117">In this tutorial, we will build upon and merge our previous experiences to create a working batch deleting example.</span></span>


<span data-ttu-id="5f108-118">[![Každý řádek obsahuje zaškrtávací políčko](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5f108-118">[![Each Row Includes a Checkbox](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span></span>

<span data-ttu-id="5f108-119">**Obrázek 1**: Každý řádek obsahuje zaškrtávací políčko ([kliknutím ji zobrazíte obrázek v plné velikosti](batch-deleting-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="5f108-119">**Figure 1**: Each Row Includes a Checkbox ([Click to view full-size image](batch-deleting-cs/_static/image2.png))</span></span>


## <a name="step-1-creating-the-batch-deleting-interface"></a><span data-ttu-id="5f108-120">Krok 1: Vytváření dávkové odstranění rozhraní</span><span class="sxs-lookup"><span data-stu-id="5f108-120">Step 1: Creating the Batch Deleting Interface</span></span>

<span data-ttu-id="5f108-121">Protože jsme už vytvořili dávkové odstranění rozhraní [přidání sloupce zaškrtávacích políček do ovládacího prvku GridView](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) kurzu jsme můžete jednoduše zkopírovat ho do `BatchDelete.aspx` místo vytváření od začátku.</span><span class="sxs-lookup"><span data-stu-id="5f108-121">Since we already created the batch deleting interface in the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, we can simply copy it to `BatchDelete.aspx` rather than creating it from scratch.</span></span> <span data-ttu-id="5f108-122">Začněte otevřením `BatchDelete.aspx` stránku `BatchData` složky a `CheckBoxField.aspx` stránku `EnhancedGridView` složky.</span><span class="sxs-lookup"><span data-stu-id="5f108-122">Start by opening the `BatchDelete.aspx` page in the `BatchData` folder and the `CheckBoxField.aspx` page in the `EnhancedGridView` folder.</span></span> <span data-ttu-id="5f108-123">Z `CheckBoxField.aspx` stránce, přejděte do zobrazení zdroje a zkopírujte kód mezi `<asp:Content>` značek, jak je znázorněno na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="5f108-123">From the `CheckBoxField.aspx` page, go to the Source view and copy the markup between the `<asp:Content>` tags as shown in Figure 2.</span></span>


<span data-ttu-id="5f108-124">[![Deklarativní CheckBoxField.aspx zkopírujte do schránky](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="5f108-124">[![Copy the Declarative Markup of CheckBoxField.aspx to the Clipboard](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span></span>

<span data-ttu-id="5f108-125">**Obrázek 2**: Zkopírujte deklarativním označení `CheckBoxField.aspx` do schránky ([kliknutím ji zobrazíte obrázek v plné velikosti](batch-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="5f108-125">**Figure 2**: Copy the Declarative Markup of `CheckBoxField.aspx` to the Clipboard ([Click to view full-size image](batch-deleting-cs/_static/image4.png))</span></span>


<span data-ttu-id="5f108-126">Dále přejděte do zobrazení zdroje v `BatchDelete.aspx` a vložte obsah schránky. v rámci `<asp:Content>` značky.</span><span class="sxs-lookup"><span data-stu-id="5f108-126">Next, go to the Source view in `BatchDelete.aspx` and paste the contents of the clipboard within the `<asp:Content>` tags.</span></span> <span data-ttu-id="5f108-127">Také zkopírujte a vložte kód z v rámci třídy modelu code-behind ve `CheckBoxField.aspx.cs` k v rámci třídy modelu code-behind ve `BatchDelete.aspx.cs` ( `DeleteSelectedProducts` tlačítko s `Click` obslužné rutiny události `ToggleCheckState` metody a `Click` obslužné rutiny událostí pro `CheckAll` a `UncheckAll` tlačítka).</span><span class="sxs-lookup"><span data-stu-id="5f108-127">Also copy and paste the code from within the code-behind class in `CheckBoxField.aspx.cs` to within the code-behind class in `BatchDelete.aspx.cs` (the `DeleteSelectedProducts` Button s `Click` event handler, the `ToggleCheckState` method, and the `Click` event handlers for the `CheckAll` and `UncheckAll` Buttons).</span></span> <span data-ttu-id="5f108-128">Po zkopírování přes tento obsah `BatchDelete.aspx` třídy stránky s kódem na pozadí by měl obsahovat následující kód:</span><span class="sxs-lookup"><span data-stu-id="5f108-128">After copying over this content, the `BatchDelete.aspx` page s code-behind class should contain the following code:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample1.cs)]

<span data-ttu-id="5f108-129">Po zkopírování deklarativní a zdrojový kód, věnujte chvíli testování `BatchDelete.aspx` zobrazením prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="5f108-129">After copying over the declarative markup and source code, take a moment to test `BatchDelete.aspx` by viewing it through a browser.</span></span> <span data-ttu-id="5f108-130">Měli byste vidět seznam prvních deseti produktů v GridView s každým řádkem výpis produkt s názvem, kategorie a cena spolu s zaškrtávací políčko GridView.</span><span class="sxs-lookup"><span data-stu-id="5f108-130">You should see a GridView listing the first ten products in a GridView with each row listing the product s name, category, and price along with a checkbox.</span></span> <span data-ttu-id="5f108-131">Měla by existovat tři tlačítka: Zaškrtnout vše, zrušit zaškrtnutí všech položek a odstranit vybrané produkty.</span><span class="sxs-lookup"><span data-stu-id="5f108-131">There should be three buttons: Check All, Uncheck All, and Delete Selected Products.</span></span> <span data-ttu-id="5f108-132">Kliknutím na tlačítko Zkontrolovat všechny vybere všech zaškrtávacích políček, zatímco zrušit zaškrtnutí všech vymaže všechna zaškrtávací políčka.</span><span class="sxs-lookup"><span data-stu-id="5f108-132">Clicking the Check All button selects all checkboxes, while Uncheck All clears all checkboxes.</span></span> <span data-ttu-id="5f108-133">Kliknutím na Odstranit vybrané produkty zobrazí zprávu, která obsahuje seznam `ProductID` hodnoty vybrané produkty, ale nedojde k odstranění ve skutečnosti produktů.</span><span class="sxs-lookup"><span data-stu-id="5f108-133">Clicking Delete Selected Products displays a message that lists the `ProductID` values of the selected products, but does not actually delete the products.</span></span>


<span data-ttu-id="5f108-134">[![Rozhraní z CheckBoxField.aspx byl přesunut do BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="5f108-134">[![The Interface from CheckBoxField.aspx has been Moved to BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="5f108-135">**Obrázek 3**: Rozhraní z `CheckBoxField.aspx` byl přesunut do `BatchDeleting.aspx` ([kliknutím ji zobrazíte obrázek v plné velikosti](batch-deleting-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="5f108-135">**Figure 3**: The Interface from `CheckBoxField.aspx` has been Moved to `BatchDeleting.aspx` ([Click to view full-size image](batch-deleting-cs/_static/image6.png))</span></span>


## <a name="step-2-deleting-the-checked-products-using-transactions"></a><span data-ttu-id="5f108-136">Krok 2: Odstraňuje se Checked produkty pomocí transakcí</span><span class="sxs-lookup"><span data-stu-id="5f108-136">Step 2: Deleting the Checked Products Using Transactions</span></span>

<span data-ttu-id="5f108-137">Pomocí služby batch, odstraňuje se úspěšně zkopírovat do rozhraní `BatchDeleting.aspx`, all, zůstane je aktualizovat kód tak, aby na tlačítko Odstranit vybrané produkty odstraní checked produkty pomocí `DeleteProductsWithTransaction` metodu `ProductsBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="5f108-137">With the batch deleting interface successfully copied over to `BatchDeleting.aspx`, all that remains is to update the code so that the Delete Selected Products button deletes the checked products using the `DeleteProductsWithTransaction` method in the `ProductsBLL` class.</span></span> <span data-ttu-id="5f108-138">Tato metoda přidá [zabalení úprav databáze do transakce](wrapping-database-modifications-within-a-transaction-cs.md) kurz, přijímá jako vstup `List<T>` z `ProductID` hodnoty a odstraní každý odpovídající `ProductID` v rámci oboru transakce.</span><span class="sxs-lookup"><span data-stu-id="5f108-138">This method, added in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, accepts as its input a `List<T>` of `ProductID` values and deletes each corresponding `ProductID` within the scope of a transaction.</span></span>

<span data-ttu-id="5f108-139">`DeleteSelectedProducts` Tlačítko s `Click` obslužná rutina události aktuálně používá následující `foreach` smyčky k iteraci v rámci každého řádku prvku GridView:</span><span class="sxs-lookup"><span data-stu-id="5f108-139">The `DeleteSelectedProducts` Button s `Click` event handler currently uses the following `foreach` loop to iterate through each GridView row:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample2.cs)]

<span data-ttu-id="5f108-140">Pro každý řádek `ProductSelector` zaškrtávací políčko webový ovládací prvek se odkazuje prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="5f108-140">For each row, the `ProductSelector` CheckBox Web control is programmatically referenced.</span></span> <span data-ttu-id="5f108-141">Pokud je zaškrtnuto, řádku s `ProductID` je načten z `DataKeys` kolekce a `DeleteResults` popisek s `Text` vlastnost je aktualizováno, aby zahrnovalo zpráva oznamující, že řádek byl vybrán k odstranění.</span><span class="sxs-lookup"><span data-stu-id="5f108-141">If it is checked, the row s `ProductID` is retrieved from the `DataKeys` collection and the `DeleteResults` Label s `Text` property is updated to include a message indicating that the row was selected for deletion.</span></span>

<span data-ttu-id="5f108-142">Výše uvedený kód jako volání skutečně neodstraní všechny záznamy `ProductsBLL` třída s `Delete` metoda je označené jako komentář. Tuto logiku odstranit chtěli použít, by kód odstranit produkty, ale ne v rámci atomická operace.</span><span class="sxs-lookup"><span data-stu-id="5f108-142">The above code does not actually delete any records as the call to the `ProductsBLL` class s `Delete` method is commented out. Were this delete logic to be applied, the code would delete the products but not within an atomic operation.</span></span> <span data-ttu-id="5f108-143">To znamená pokud první několik odstraní v pořadí bylo úspěšné, ale novější verzi se nezdařilo (možná z důvodu narušení omezení pro cizí klíč), bude vyvolána výjimka, ale tyto produkty již odstraněn by zůstala odstraněné.</span><span class="sxs-lookup"><span data-stu-id="5f108-143">That is, if the first few deletes in the sequence succeeded, but a later one failed (perhaps due to a foreign key constraint violation), an exception would be thrown but those products already deleted would remain deleted.</span></span>

<span data-ttu-id="5f108-144">Aby bylo možné zajistit atomicitu, musíme místo toho použít `ProductsBLL` třída s `DeleteProductsWithTransaction` metody.</span><span class="sxs-lookup"><span data-stu-id="5f108-144">In order to assure atomicity, we need to instead use the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="5f108-145">Protože tato metoda přijímá seznam `ProductID` hodnoty, musíme nejprve ji zkompilujte tento seznam z mřížky a předat ji jako parametr.</span><span class="sxs-lookup"><span data-stu-id="5f108-145">Because this method accepts a list of `ProductID` values, we need to first compile this list from the grid and then pass it as a parameter.</span></span> <span data-ttu-id="5f108-146">Nejprve vytvoříme instanci `List<T>` typu `int`.</span><span class="sxs-lookup"><span data-stu-id="5f108-146">We first create an instance of a `List<T>` of type `int`.</span></span> <span data-ttu-id="5f108-147">V rámci `foreach` smyčky, je potřeba přidat vybrané produkty `ProductID` hodnoty tohoto `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="5f108-147">Within the `foreach` loop we need to add the selected products `ProductID` values to this `List<T>`.</span></span> <span data-ttu-id="5f108-148">Po smyčce to `List<T>` musí být předán `ProductsBLL` třída s `DeleteProductsWithTransaction` metody.</span><span class="sxs-lookup"><span data-stu-id="5f108-148">After the loop this `List<T>` must be passed to the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="5f108-149">Aktualizace `DeleteSelectedProducts` tlačítko s `Click` obslužné rutiny události s následujícím kódem:</span><span class="sxs-lookup"><span data-stu-id="5f108-149">Update the `DeleteSelectedProducts` Button s `Click` event handler with the following code:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample3.cs)]

<span data-ttu-id="5f108-150">Aktualizovaný kód vytvoří `List<T>` typu `int` (`productIDsToDelete`) a naplní ho `ProductID` hodnoty odstranit.</span><span class="sxs-lookup"><span data-stu-id="5f108-150">The updated code creates a `List<T>` of type `int` (`productIDsToDelete`) and populates it with the `ProductID` values to delete.</span></span> <span data-ttu-id="5f108-151">Po `foreach` smyčky, pokud je vybrána, aspoň jeden produkt `ProductsBLL` třída s `DeleteProductsWithTransaction` metoda je volána a tento seznam.</span><span class="sxs-lookup"><span data-stu-id="5f108-151">After the `foreach` loop, if there is at least one product selected, the `ProductsBLL` class s `DeleteProductsWithTransaction` method is called and passed this list.</span></span> <span data-ttu-id="5f108-152">`DeleteResults` Popisek se zobrazí také a znovu připojeno data do prvku GridView (tak, aby nově odstraněné záznamy se už nebude zobrazovat jako řádky mřížky).</span><span class="sxs-lookup"><span data-stu-id="5f108-152">The `DeleteResults` Label is also displayed and the data rebound to the GridView (so that the newly-deleted records no longer appear as rows in the grid).</span></span>

<span data-ttu-id="5f108-153">Obrázek 4 ukazuje prvku GridView, po několik řádků vybraných pro odstranění.</span><span class="sxs-lookup"><span data-stu-id="5f108-153">Figure 4 shows the GridView after a number of rows have been selected for deletion.</span></span> <span data-ttu-id="5f108-154">Obrázek 5 ukazuje na obrazovce, ihned po kliknutí na tlačítko Odstranit vybrané produkty.</span><span class="sxs-lookup"><span data-stu-id="5f108-154">Figure 5 shows the screen immediately after the Delete Selected Products button has been clicked.</span></span> <span data-ttu-id="5f108-155">Všimněte si, že na obrázku 5 `ProductID` hodnoty odstraněné záznamy zobrazené v popisku pod prvku GridView a řádky už nejsou v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="5f108-155">Note that in Figure 5 the `ProductID` values of the deleted records are displayed in the Label beneath the GridView and those rows are no longer in the GridView.</span></span>


<span data-ttu-id="5f108-156">[![Odstraní vybrané produkty](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5f108-156">[![The Selected Products Will Be Deleted](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span></span>

<span data-ttu-id="5f108-157">**Obrázek 4**: Vybrané produkty se odstraní ([kliknutím ji zobrazíte obrázek v plné velikosti](batch-deleting-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="5f108-157">**Figure 4**: The Selected Products Will Be Deleted ([Click to view full-size image](batch-deleting-cs/_static/image8.png))</span></span>


<span data-ttu-id="5f108-158">[![Hodnoty odstranit ProductID produkty jsou uvedené pod prvku GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="5f108-158">[![The Deleted Products ProductID Values are Listed Beneath the GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span></span>

<span data-ttu-id="5f108-159">**Obrázek 5**: Produkty odstranit `ProductID` hodnoty jsou uvedené pod prvku GridView ([kliknutím ji zobrazíte obrázek v plné velikosti](batch-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="5f108-159">**Figure 5**: The Deleted Products `ProductID` Values are Listed Beneath the GridView ([Click to view full-size image](batch-deleting-cs/_static/image10.png))</span></span>


> [!NOTE]
> <span data-ttu-id="5f108-160">K testování `DeleteProductsWithTransaction` atomicitu metody s ručně přidat záznam pro produkt `Order Details` tabulku a pak se pokusíte odstranit tento produkt (spolu s ostatními).</span><span class="sxs-lookup"><span data-stu-id="5f108-160">To test the `DeleteProductsWithTransaction` method s atomicity, manually add an entry for a product in the `Order Details` table and then attempt to delete that product (along with others).</span></span> <span data-ttu-id="5f108-161">Narušení omezení pro cizí klíč se zobrazí při pokusu o odstranění produktu s související objednávky, ale Všimněte si, jak ostatní odstranění vybrané produkty jsou vráceny zpět.</span><span class="sxs-lookup"><span data-stu-id="5f108-161">You will receive a foreign key constraint violation when attempting to delete the product with an associated order, but note how the other selected products deletions are rolled back.</span></span>


## <a name="summary"></a><span data-ttu-id="5f108-162">Souhrn</span><span class="sxs-lookup"><span data-stu-id="5f108-162">Summary</span></span>

<span data-ttu-id="5f108-163">Vytvoření dávkové odstranění rozhraní zahrnuje přidání prvek GridView s sloupce zaškrtávacích políček a tlačítko webové ovládací prvek, který, při kliknutí na, odstraní všechny vybrané řádky jako jednu atomickou operaci.</span><span class="sxs-lookup"><span data-stu-id="5f108-163">Creating a batch deleting interface involves adding a GridView with a column of checkboxes and a Button Web control that, when clicked, will delete all of the selected rows as a single atomic operation.</span></span> <span data-ttu-id="5f108-164">V tomto kurzu jsme vytvořili toto rozhraní podle piecing společně pracovat v předchozích kurzech [přidání sloupce zaškrtávacích políček do ovládacího prvku GridView](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) a [zabalení úprav databáze do transakce](wrapping-database-modifications-within-a-transaction-cs.md).</span><span class="sxs-lookup"><span data-stu-id="5f108-164">In this tutorial we built such an interface by piecing together work done in two previous tutorials, [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) and [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span></span> <span data-ttu-id="5f108-165">V prvním kurzu jsme vytvořili GridView s sloupce zaškrtávacích políček a v ten jsme implementovali metodu BLL, při předání `List<T>` z `ProductID` hodnoty, je odstranit vše v rámci oboru transakce.</span><span class="sxs-lookup"><span data-stu-id="5f108-165">In the first tutorial we created a GridView with a column of checkboxes and in the latter we implemented a method in the BLL that, when passed a `List<T>` of `ProductID` values, deleted them all within the scope of a transaction.</span></span>

<span data-ttu-id="5f108-166">V dalším kurzu vytvoříme rozhraní pro provádění dávkové vložení.</span><span class="sxs-lookup"><span data-stu-id="5f108-166">In the next tutorial we'll create an interface for performing batch inserts.</span></span>

<span data-ttu-id="5f108-167">Všechno nejlepší programování!</span><span class="sxs-lookup"><span data-stu-id="5f108-167">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="5f108-168">O autorovi</span><span class="sxs-lookup"><span data-stu-id="5f108-168">About the Author</span></span>

<span data-ttu-id="5f108-169">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a Zakladatel [4GuysFromRolla.com](http://www.4guysfromrolla.com), má práce s Microsoft webových technologiích od roku 1998.</span><span class="sxs-lookup"><span data-stu-id="5f108-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5f108-170">Scott funguje jako nezávislý konzultant, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="5f108-170">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5f108-171">Jeho nejnovější knihy [ *Edice nakladatelství Sams naučit sami ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="5f108-171">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="5f108-172">Může být dosáhl v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5f108-172">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="5f108-173">nebo prostřednictvím jeho blogu, který lze nalézt v [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="5f108-173">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="5f108-174">Speciální k</span><span class="sxs-lookup"><span data-stu-id="5f108-174">Special Thanks To</span></span>

<span data-ttu-id="5f108-175">V této sérii kurzů byl recenzován uživatelem mnoho užitečných revidující.</span><span class="sxs-lookup"><span data-stu-id="5f108-175">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="5f108-176">Vedoucí revidující pro účely tohoto kurzu byly Hilton Giesenow a Teresy Murphy.</span><span class="sxs-lookup"><span data-stu-id="5f108-176">Lead reviewers for this tutorial were Hilton Giesenow and Teresa Murphy.</span></span> <span data-ttu-id="5f108-177">Zajímat téma Moje nadcházejících článcích MSDN?</span><span class="sxs-lookup"><span data-stu-id="5f108-177">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="5f108-178">Pokud ano, vyřaďte mě řádek na [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5f108-178">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5f108-179">[Předchozí](batch-updating-cs.md)
> [další](batch-inserting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="5f108-179">[Previous](batch-updating-cs.md)
[Next](batch-inserting-cs.md)</span></span>
