---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb
title: Hlavní a podrobnosti pomocí seznamu hlavních záznamů s odrážkami s podrobnostmi DataList (VB) | Microsoft Docs
author: rick-anderson
description: V tomto kurzu zkomprimujete sestavu se dvěma stránkami a podrobnostmi pro předchozí kurz na jednu stránku, kde se zobrazí seznam názvů kategorií na t...
ms.author: riande
ms.date: 10/17/2006
ms.assetid: ee20742f-6fb7-49a0-a009-058fe363aacb
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb
msc.type: authoredcontent
ms.openlocfilehash: 81d72c666925e89729464e7ea696bde8d323e277
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/28/2019
ms.locfileid: "74641715"
---
# <a name="masterdetail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb"></a><span data-ttu-id="446f1-103">Zobrazení hlavních záznamů / podrobností v seznamu hlavních záznamů s odrážkami a podrobnostmi v prvku DataList (VB)</span><span class="sxs-lookup"><span data-stu-id="446f1-103">Master/Detail Using a Bulleted List of Master Records with a Details DataList (VB)</span></span>

<span data-ttu-id="446f1-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="446f1-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="446f1-105">[Stáhnout ukázkovou aplikaci](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_35_VB.exe) nebo [Stáhnout PDF](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/datatutorial35vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="446f1-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_35_VB.exe) or [Download PDF](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/datatutorial35vb1.pdf)</span></span>

> <span data-ttu-id="446f1-106">V tomto kurzu zkomprimujete sestavu se dvěma stránkami a podrobnostmi o předchozím kurzu na jednu stránku, kde se zobrazí seznam názvů kategorií na levé straně obrazovky a produkty vybrané kategorie na pravé straně obrazovky.</span><span class="sxs-lookup"><span data-stu-id="446f1-106">In this tutorial we'll compress the two-page master/detail report of the previous tutorial into a single page, showing a bulleted list of category names on the left side of the screen and the selected category's products on the right of the screen.</span></span>

## <a name="introduction"></a><span data-ttu-id="446f1-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="446f1-107">Introduction</span></span>

<span data-ttu-id="446f1-108">V [předchozím kurzu](master-detail-filtering-acess-two-pages-datalist-vb.md) jsme se vyhledali tak, jak oddělit hlavní a podrobné sestavy na dvou stránkách.</span><span class="sxs-lookup"><span data-stu-id="446f1-108">In the [preceding tutorial](master-detail-filtering-acess-two-pages-datalist-vb.md) we looked at how to separate a master/detail report across two pages.</span></span> <span data-ttu-id="446f1-109">Na stránce předlohy jsme použili ovládací prvek Repeater k vykreslení seznamu kategorií s odrážkami.</span><span class="sxs-lookup"><span data-stu-id="446f1-109">In the master page we used a Repeater control to render a bulleted list of categories.</span></span> <span data-ttu-id="446f1-110">Název každé kategorie byl hypertextový odkaz, který při kliknutí na ni převezme uživatele na stránku podrobností, kde se ve dvou sloupcích DataList ukázaly tyto produkty patřící do vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="446f1-110">Each category name was a hyperlink that, when clicked, would take the user to the details page, where a two-column DataList showed those products belonging to the selected category.</span></span>

<span data-ttu-id="446f1-111">V tomto kurzu zkomprimujeme dvoustranný kurz na jednu stránku a zobrazí se seznam názvů kategorií na levé straně obrazovky s odrážkami s každým názvem kategorie vykresleným jako LinkButton.</span><span class="sxs-lookup"><span data-stu-id="446f1-111">In this tutorial we'll compress the two-page tutorial into a single page, showing a bulleted list of category names on the left side of the screen with each category name rendered as a LinkButton.</span></span> <span data-ttu-id="446f1-112">Kliknutí na jednu z kategorií název LinkButtons vyvolává zpětné odeslání a váže vybrané produkty kategorie s na dva sloupce DataList na pravé straně obrazovky.</span><span class="sxs-lookup"><span data-stu-id="446f1-112">Clicking one of the category name LinkButtons induces a postback and binds the selected category s products to a two-column DataList on the right of the screen.</span></span> <span data-ttu-id="446f1-113">Kromě zobrazení jednotlivých kategorií s názvem opakuje na levé straně počet produktů, které jsou pro danou kategorii k dispozici (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="446f1-113">In addition to displaying each category s name, the Repeater on the left shows how many total products there are for a given category (see Figure 1).</span></span>

<span data-ttu-id="446f1-114">[![kategorie s název a celkový počet produktů se zobrazí vlevo.](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image2.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-114">[![The Category s Name and Total Number of Products are Displayed on the Left](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image2.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image1.png)</span></span>

<span data-ttu-id="446f1-115">**Obrázek 1**: na levé straně se zobrazí název kategorie a celkový počet produktů ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-115">**Figure 1**: The Category s Name and Total Number of Products are Displayed on the Left ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image3.png))</span></span>

## <a name="step-1-displaying-a-repeater-in-the-left-portion-of-the-screen"></a><span data-ttu-id="446f1-116">Krok 1: zobrazení opakovače v levé části obrazovky</span><span class="sxs-lookup"><span data-stu-id="446f1-116">Step 1: Displaying a Repeater in the Left Portion of the Screen</span></span>

<span data-ttu-id="446f1-117">Pro účely tohoto kurzu musíme zobrazit seznam kategorií s odrážkami vlevo od vybraných produktů kategorií.</span><span class="sxs-lookup"><span data-stu-id="446f1-117">For this tutorial we need to have the bulleted list of categories appear to the left of the selected category s products.</span></span> <span data-ttu-id="446f1-118">Obsah webové stránky lze umístit pomocí standardních značek odstavců HTML, nekoncových mezer, `<table>` s a tak dále, nebo prostřednictvím kaskádových stylů CSS.</span><span class="sxs-lookup"><span data-stu-id="446f1-118">Content within a web page can be positioned using standard HTML elements paragraph tags, non-breaking spaces, `<table>` s, and so on or through cascading stylesheet (CSS) techniques.</span></span> <span data-ttu-id="446f1-119">Všechny naše kurzy doposud používaly techniky CSS k umístění.</span><span class="sxs-lookup"><span data-stu-id="446f1-119">All of our tutorials thus far have used CSS techniques for positioning.</span></span> <span data-ttu-id="446f1-120">Při sestavování uživatelského rozhraní navigace na naší stránce předlohy na [stránkách předlohy a](../introduction/master-pages-and-site-navigation-vb.md) v kurzu navigace na webu jsme použili *absolutní umístění*, které indikuje přesný Posun pixelů pro navigační seznam a hlavní obsah.</span><span class="sxs-lookup"><span data-stu-id="446f1-120">When we built the navigation user interface in our master page in the [Master Pages and Site Navigation](../introduction/master-pages-and-site-navigation-vb.md) tutorial we used *absolute positioning*, indicating the precise pixel offset for the navigation list and the main content.</span></span> <span data-ttu-id="446f1-121">Alternativně lze šablonu stylů CSS použít k umístění jednoho prvku vpravo nebo vlevo od druhého až po *plovoucí*.</span><span class="sxs-lookup"><span data-stu-id="446f1-121">Alternatively, CSS can be used to position one element to the right or left of another through *floating*.</span></span> <span data-ttu-id="446f1-122">Seznam kategorií s odrážkami se zobrazuje vlevo od vybraných produktů kategorie s použitím plovoucího opakovače vlevo od prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="446f1-122">We can have the bulleted list of categories appear to the left of the selected category s products by floating the Repeater to the left of the DataList</span></span>

<span data-ttu-id="446f1-123">Otevřete stránku `CategoriesAndProducts.aspx` ze složky `DataListRepeaterFiltering` a přidejte ji do stránky Repeater a DataList.</span><span class="sxs-lookup"><span data-stu-id="446f1-123">Open the `CategoriesAndProducts.aspx` page from the `DataListRepeaterFiltering` folder and add to the page a Repeater and a DataList.</span></span> <span data-ttu-id="446f1-124">Nastavte `ID` opakování na `Categories` a DataList s na `CategoryProducts`.</span><span class="sxs-lookup"><span data-stu-id="446f1-124">Set the Repeater s `ID` to `Categories` and the DataList s to `CategoryProducts`.</span></span> <span data-ttu-id="446f1-125">Přejít do zobrazení zdroje a umístit ovládací prvky Repeater a DataList do jejich vlastních prvků `<div>`.</span><span class="sxs-lookup"><span data-stu-id="446f1-125">Go to the Source view and put the Repeater and DataList controls within their own `<div>` elements.</span></span> <span data-ttu-id="446f1-126">To znamená, že se nejdříve vloží Repeat do prvku `<div>` a poté prvek DataList ve svém vlastním prvku `<div>` přímo za Repeat.</span><span class="sxs-lookup"><span data-stu-id="446f1-126">That is, enclose the Repeater within a `<div>` element first and then the DataList in its own `<div>` element directly after the Repeater.</span></span> <span data-ttu-id="446f1-127">Vaše značka v tomto okamžiku by měla vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="446f1-127">Your markup at this point should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample1.aspx)]

<span data-ttu-id="446f1-128">Pro obtékání opakovače vlevo od prvku DataList je nutné použít atribut `float` stylu CSS, například:</span><span class="sxs-lookup"><span data-stu-id="446f1-128">To float the Repeater to the left of the DataList, we need to use the `float` CSS style attribute, like so:</span></span>

[!code-html[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample2.html)]

<span data-ttu-id="446f1-129">`float: left;` obtéká první prvek `<div>` nalevo od druhého prvku.</span><span class="sxs-lookup"><span data-stu-id="446f1-129">The `float: left;` floats the first `<div>` element to the left of the second one.</span></span> <span data-ttu-id="446f1-130">Nastavení `width` a `padding-right` označují první `<div>` `width` a velikost odsazení mezi `<div>`m obsahem prvku a jeho pravým okrajem.</span><span class="sxs-lookup"><span data-stu-id="446f1-130">The `width` and `padding-right` settings indicate the first `<div>` s `width` and how much padding is added between the `<div>` element s content and its right margin.</span></span> <span data-ttu-id="446f1-131">Další informace o plovoucích prvcích v šablonách stylů CSS najdete v [Floatutorial](http://css.maxdesign.com.au/floatutorial/).</span><span class="sxs-lookup"><span data-stu-id="446f1-131">For more information on floating elements in CSS check out the [Floatutorial](http://css.maxdesign.com.au/floatutorial/).</span></span>

<span data-ttu-id="446f1-132">Namísto určení nastavení stylu přímo pomocí prvního `<p>` atributu `style` elementu, nechte místo toho vytvořit novou třídu CSS v `Styles.css` s názvem `FloatLeft`:</span><span class="sxs-lookup"><span data-stu-id="446f1-132">Rather than specify the style setting directly through the first `<p>` element s `style` attribute, let s instead create a new CSS class in `Styles.css` named `FloatLeft`:</span></span>

[!code-css[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample3.css)]

<span data-ttu-id="446f1-133">Pak můžeme `<div>` nahradit `<div class="FloatLeft">`.</span><span class="sxs-lookup"><span data-stu-id="446f1-133">Then we can replace the `<div>` with `<div class="FloatLeft">`.</span></span>

<span data-ttu-id="446f1-134">Po přidání třídy šablony stylů CSS a konfiguraci značek na stránce `CategoriesAndProducts.aspx` přejdete do návrháře.</span><span class="sxs-lookup"><span data-stu-id="446f1-134">After adding the CSS class and configuring the markup in the `CategoriesAndProducts.aspx` page, go to the Designer.</span></span> <span data-ttu-id="446f1-135">Měl by se vidět, že se má na začátku v prvku DataList zobrazit obdélník, který se zobrazí vlevo (i když se teď právě zobrazují jako šedá pole, protože jsme ještě předtím nakonfigurovali své zdroje dat nebo šablony).</span><span class="sxs-lookup"><span data-stu-id="446f1-135">You should see the Repeater floating to the left of the DataList (although right now both just appear as gray boxes since we ve yet to configure their data sources or templates).</span></span>

<span data-ttu-id="446f1-136">[![, že se opakuje vlevo od prvku DataList](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image5.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-136">[![The Repeater is Floated to the Left of the DataList](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image5.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image4.png)</span></span>

<span data-ttu-id="446f1-137">**Obrázek 2**: Repeater se odpluje nalevo od prvku DataList ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-137">**Figure 2**: The Repeater is Floated to the Left of the DataList ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image6.png))</span></span>

## <a name="step-2-determining-the-number-of-products-for-each-category"></a><span data-ttu-id="446f1-138">Krok 2: určení počtu produktů pro jednotlivé kategorie</span><span class="sxs-lookup"><span data-stu-id="446f1-138">Step 2: Determining the Number of Products for Each Category</span></span>

<span data-ttu-id="446f1-139">S úplným označením Repeat a DataList s doplňováním kódu jsme znovu připraveni vytvořit vazby dat kategorie k ovládacímu prvku Repeater.</span><span class="sxs-lookup"><span data-stu-id="446f1-139">With the Repeater and DataList s surrounding markup complete, we re ready to bind the category data to the Repeater control.</span></span> <span data-ttu-id="446f1-140">Seznam kategorií s odrážkami na obrázku 1 ale navíc také potřebuje zobrazit počet produktů přidružených k této kategorii.</span><span class="sxs-lookup"><span data-stu-id="446f1-140">However, as the bulleted list of categories in Figure 1 shows, in addition to each category s name we also need to display the number of products associated with the category.</span></span> <span data-ttu-id="446f1-141">Pro přístup k těmto informacím můžeme buď:</span><span class="sxs-lookup"><span data-stu-id="446f1-141">To access this information we can either:</span></span>

- <span data-ttu-id="446f1-142">**Určete tyto informace ze třídy ASP.NET stránky s kódem na pozadí.**</span><span class="sxs-lookup"><span data-stu-id="446f1-142">**Determine this information from the ASP.NET page s code-behind class.**</span></span> <span data-ttu-id="446f1-143">S ohledem na konkrétní *`categoryID`* můžeme určit počet přidružených produktů voláním metody `ProductsBLL` třídy s `GetProductsByCategoryID(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="446f1-143">Given a particular *`categoryID`* we can determine the number of associated products by calling the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="446f1-144">Tato metoda vrátí objekt `ProductsDataTable`, jehož vlastnost `Count` určuje, kolik `ProductsRow` existuje, což je počet produktů pro zadanou *`categoryID`* .</span><span class="sxs-lookup"><span data-stu-id="446f1-144">This method returns a `ProductsDataTable` object whose `Count` property indicates how many `ProductsRow` s exists, which is the number of products for the specified *`categoryID`*.</span></span> <span data-ttu-id="446f1-145">Můžeme vytvořit obslužnou rutinu události `ItemDataBound` pro Repeater, která pro každou kategorii, která je svázána s argumentem Repeater, volá metodu `ProductsBLL` třídy s `GetProductsByCategoryID(categoryID)` a obsahuje její počet ve výstupu.</span><span class="sxs-lookup"><span data-stu-id="446f1-145">We can create an `ItemDataBound` event handler for the Repeater that, for each category bound to the Repeater, calls the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method and includes its count in the output.</span></span>
- <span data-ttu-id="446f1-146">**Aktualizujte `CategoriesDataTable` v zadané datové sadě tak, aby zahrnovaly sloupec `NumberOfProducts`.**</span><span class="sxs-lookup"><span data-stu-id="446f1-146">**Update the `CategoriesDataTable` in the Typed DataSet to include a `NumberOfProducts` column.**</span></span> <span data-ttu-id="446f1-147">Pak můžeme aktualizovat metodu `GetCategories()` v `CategoriesDataTable` tak, aby obsahovala tyto informace, nebo můžete také opustit `GetCategories()` jako a vytvořit novou `CategoriesDataTable` metodu nazvanou `GetCategoriesAndNumberOfProducts()`.</span><span class="sxs-lookup"><span data-stu-id="446f1-147">We can then update the `GetCategories()` method in the `CategoriesDataTable` to include this information or, alternatively, leave `GetCategories()` as-is and create a new `CategoriesDataTable` method called `GetCategoriesAndNumberOfProducts()`.</span></span>

<span data-ttu-id="446f1-148">Pojďme prozkoumat oba tyto postupy.</span><span class="sxs-lookup"><span data-stu-id="446f1-148">Let s explore both of these techniques.</span></span> <span data-ttu-id="446f1-149">Prvním přístupem je jednodušší implementovat, protože nepotřebujeme aktualizovat vrstvu přístupu k datům. ale vyžaduje více komunikace s databází.</span><span class="sxs-lookup"><span data-stu-id="446f1-149">The first approach is simpler to implement since we don t need to update the Data Access Layer; however, it requires more communications with the database.</span></span> <span data-ttu-id="446f1-150">Volání metody `ProductsBLL` třídy s `GetProductsByCategoryID(categoryID)` v obslužné rutině události `ItemDataBound` přidá další volání databáze pro každou kategorii zobrazenou v OPAKOVAČI.</span><span class="sxs-lookup"><span data-stu-id="446f1-150">The call to the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method in the `ItemDataBound` event handler adds an extra database call for each category displayed in the Repeater.</span></span> <span data-ttu-id="446f1-151">V této technice je k dispozici volání databáze *n* + 1, kde *n* je počet kategorií zobrazených v poli Repeater.</span><span class="sxs-lookup"><span data-stu-id="446f1-151">With this technique there are *N* + 1 database calls, where *N* is the number of categories displayed in the Repeater.</span></span> <span data-ttu-id="446f1-152">Při druhém přístupu se počet produktů vrátí s informacemi o jednotlivých kategoriích z metody `CategoriesBLL` třídy s `GetCategories()` (nebo `GetCategoriesAndNumberOfProducts()`), a výsledkem je pouze jedna cesta k databázi.</span><span class="sxs-lookup"><span data-stu-id="446f1-152">With the second approach, the product count is returned with information about each category from the `CategoriesBLL` class s `GetCategories()` (or `GetCategoriesAndNumberOfProducts()`) method, thereby resulting in just one trip to the database.</span></span>

## <a name="determining-the-number-of-products-in-the-itemdatabound-event-handler"></a><span data-ttu-id="446f1-153">Určení počtu produktů v obslužné rutině události ItemDataBound</span><span class="sxs-lookup"><span data-stu-id="446f1-153">Determining the Number of Products in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="446f1-154">Určení počtu produktů pro každou kategorii v `ItemDataBound` obslužná rutina události Repeater, nevyžaduje žádné úpravy existující vrstvy přístupu k datům.</span><span class="sxs-lookup"><span data-stu-id="446f1-154">Determining the number of products for each category in the Repeater s `ItemDataBound` event handler does not require any modifications to our existing Data Access Layer.</span></span> <span data-ttu-id="446f1-155">Všechny úpravy lze provádět přímo na stránce `CategoriesAndProducts.aspx`.</span><span class="sxs-lookup"><span data-stu-id="446f1-155">All modifications can be made directly within the `CategoriesAndProducts.aspx` page.</span></span> <span data-ttu-id="446f1-156">Začněte přidáním nového prvku ObjectDataSource s názvem `CategoriesDataSource` prostřednictvím inteligentní značky Repeater.</span><span class="sxs-lookup"><span data-stu-id="446f1-156">Start by adding a new ObjectDataSource named `CategoriesDataSource` via the Repeater s smart tag.</span></span> <span data-ttu-id="446f1-157">Dále nakonfigurujte `CategoriesDataSource` ObjectDataSource tak, aby bylo načteno jeho data z metody `GetCategories()` `CategoriesBLL` třídy s.</span><span class="sxs-lookup"><span data-stu-id="446f1-157">Next, configure the `CategoriesDataSource` ObjectDataSource so that it retrieves its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>

<span data-ttu-id="446f1-158">[![nakonfigurovat prvek ObjectDataSource tak, aby používal metodu CategoriesBLL třídy s GetCategories ()](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image8.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-158">[![Configure the ObjectDataSource to Use the CategoriesBLL class s GetCategories() Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image8.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image7.png)</span></span>

<span data-ttu-id="446f1-159">**Obrázek 3**: Konfigurace prvku ObjectDataSource pro použití `GetCategories()` metody `CategoriesBLL` třídy s ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="446f1-159">**Figure 3**: Configure the ObjectDataSource to Use the `CategoriesBLL` class s `GetCategories()` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image9.png))</span></span>

<span data-ttu-id="446f1-160">V případě, že je třeba kliknout na každou položku v `Categories` Repeat, je nutné kliknout na možnost a při kliknutí na `CategoryProducts` DataList zobrazit tyto produkty pro vybranou kategorii.</span><span class="sxs-lookup"><span data-stu-id="446f1-160">Each item in the `Categories` Repeater needs to be clickable and, when clicked, cause the `CategoryProducts` DataList to display those products for the selected category.</span></span> <span data-ttu-id="446f1-161">To se dá udělat tak, že každý z kategorií vytvoří hypertextový odkaz, propojí zpátky na stejnou stránku (`CategoriesAndProducts.aspx`), ale předává `CategoryID` přes QueryString, podobně jako jsme viděli v předchozím kurzu.</span><span class="sxs-lookup"><span data-stu-id="446f1-161">This can be accomplished by making each category a hyperlink, linking back to this same page (`CategoriesAndProducts.aspx`), but passing the `CategoryID` through the querystring, much like we saw in the previous tutorial.</span></span> <span data-ttu-id="446f1-162">Výhodou tohoto přístupu je, že stránka, která zobrazuje konkrétní kategorie produktů, může být záložkou a indexována vyhledávacím modulem.</span><span class="sxs-lookup"><span data-stu-id="446f1-162">The advantage of this approach is that a page displaying a particular category s products can be bookmarked and indexed by a search engine.</span></span>

<span data-ttu-id="446f1-163">Případně můžeme vytvořit každou kategorii a LinkButton, což je přístup, který budeme používat pro tento kurz.</span><span class="sxs-lookup"><span data-stu-id="446f1-163">Alternatively, we can make each category a LinkButton, which is the approach we'll use for this tutorial.</span></span> <span data-ttu-id="446f1-164">LinkButton vykreslí v prohlížeči uživatele jako hypertextový odkaz, ale při kliknutí vyvolá zpětné odeslání. Při zpětném volání se musí prvek DataList s ObjectDataSource aktualizovat, aby se zobrazily tyto produkty patřící do vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="446f1-164">The LinkButton renders in the user s browser as a hyperlink but, when clicked, induces a postback; on postback, the DataList s ObjectDataSource needs to be refreshed to display those products belonging to the selected category.</span></span> <span data-ttu-id="446f1-165">Pro tento kurz, použití hypertextového odkazu, je vhodnější než použití LinkButton; v některých případech ale může být použití možnosti LinkButton výhodnější.</span><span class="sxs-lookup"><span data-stu-id="446f1-165">For this tutorial, using a hyperlink makes more sense than using a LinkButton; however, there may be other scenarios where using a LinkButton is more advantageous.</span></span> <span data-ttu-id="446f1-166">I když by byl přístup k hypertextovým odkazům ideální pro tento příklad, místo toho se dá prozkoumat pomocí odkazu LinkButton.</span><span class="sxs-lookup"><span data-stu-id="446f1-166">While the hyperlink approach would be ideal for this example, let s instead explore using the LinkButton.</span></span> <span data-ttu-id="446f1-167">Jak vidíte, použití odkazu na čísle zavádí některé výzvy, které by jinak nevznikly hypertextovým odkazem.</span><span class="sxs-lookup"><span data-stu-id="446f1-167">As we'll see, using a LinkButton introduces some challenges that would not otherwise arise with a hyperlink.</span></span> <span data-ttu-id="446f1-168">Proto použití položky LinkButton v tomto kurzu zvýrazní tyto výzvy a pomůže vám nabídnout řešení pro tyto scénáře, kde můžeme místo hypertextového odkazu použít LinkButton.</span><span class="sxs-lookup"><span data-stu-id="446f1-168">Therefore, using a LinkButton in this tutorial will highlight these challenges and help provide solutions for those scenarios where we may want to use a LinkButton instead of a hyperlink.</span></span>

> [!NOTE]
> <span data-ttu-id="446f1-169">Doporučujeme, abyste tento kurz opakovali pomocí ovládacího prvku hypertextový odkaz nebo elementu `<a>` místo prvku LinkButton.</span><span class="sxs-lookup"><span data-stu-id="446f1-169">You are encouraged to repeat this tutorial using a HyperLink control or `<a>` element in lieu of the LinkButton.</span></span>

<span data-ttu-id="446f1-170">Následující kód ukazuje deklarativní syntaxi pro Repeater a ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="446f1-170">The following markup shows the declarative syntax for the Repeater and the ObjectDataSource.</span></span> <span data-ttu-id="446f1-171">Všimněte si, že šablony Repeater vykreslují seznam s odrážkami s každou položkou jako LinkButton:</span><span class="sxs-lookup"><span data-stu-id="446f1-171">Note that the Repeater s templates render a bulleted list with each item as a LinkButton:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample4.aspx)]

> [!NOTE]
> <span data-ttu-id="446f1-172">Pro účely tohoto kurzu musí mít Repeater povolený stav zobrazení (Všimněte si opomenutí `EnableViewState="False"` z deklarativní syntaxe s opakováním).</span><span class="sxs-lookup"><span data-stu-id="446f1-172">For this tutorial the Repeater must have its view state enabled (note the omission of the `EnableViewState="False"` from the Repeater s declarative syntax).</span></span> <span data-ttu-id="446f1-173">V kroku 3 vytvoříme obslužnou rutinu události pro událost Repeater `ItemCommand`, ve které budeme aktualizovat kolekci `SelectParameters` DataList s ObjectDataSource s.</span><span class="sxs-lookup"><span data-stu-id="446f1-173">In step 3 we'll be creating an event handler for the Repeater s `ItemCommand` event in which we'll be updating the DataList s ObjectDataSource s `SelectParameters` collection.</span></span> <span data-ttu-id="446f1-174">`ItemCommand`Repeat se ale neaktivuje, pokud je stav zobrazení zakázaný.</span><span class="sxs-lookup"><span data-stu-id="446f1-174">The Repeater s `ItemCommand`, however, won't fire if view state is disabled.</span></span> <span data-ttu-id="446f1-175">Podívejte [se na stumper otázky ASP.NET](http://scottonwriting.net/sowblog/posts/1263.aspx) a [její řešení](http://scottonwriting.net/sowBlog/posts/1268.aspx) , kde najdete další informace o tom, proč je potřeba povolit stav zobrazení `ItemCommand` události Repeater.</span><span class="sxs-lookup"><span data-stu-id="446f1-175">See [A Stumper of an ASP.NET Question](http://scottonwriting.net/sowblog/posts/1263.aspx) and [its solution](http://scottonwriting.net/sowBlog/posts/1268.aspx) for more information on why view state must be enabled for a Repeater s `ItemCommand` event to fire.</span></span>

<span data-ttu-id="446f1-176">LinkButton s hodnotou vlastnosti `ID` `ViewCategory` nemá nastavenou vlastnost `Text`.</span><span class="sxs-lookup"><span data-stu-id="446f1-176">The LinkButton with the `ID` property value of `ViewCategory` does not have its `Text` property set.</span></span> <span data-ttu-id="446f1-177">Pokud jsme chtěli zobrazit název kategorie, nastavili jsme vlastnost text deklarativně prostřednictvím syntaxe datových vazeb, například takto:</span><span class="sxs-lookup"><span data-stu-id="446f1-177">If we had just wanted to display the category name, we would have set the Text property declaratively, through databinding syntax, like so:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample5.aspx)]

<span data-ttu-id="446f1-178">Chceme ale zobrazit *Jak název kategorie s, tak počet* produktů, které patří do této kategorie.</span><span class="sxs-lookup"><span data-stu-id="446f1-178">However, we want to show both the category s name *and* the number of products belonging to that category.</span></span> <span data-ttu-id="446f1-179">Tyto informace lze načíst z obslužné rutiny události Repeater `ItemDataBound` tím, že zavoláte metodu `GetCategoriesByProductID(categoryID)` `ProductBLL` třídy s a určíte, kolik záznamů je vráceno ve výsledném `ProductsDataTable`, jak ukazuje následující kód:</span><span class="sxs-lookup"><span data-stu-id="446f1-179">This information can be retrieved from the Repeater s `ItemDataBound` event handler by making a call to the `ProductBLL` class s `GetCategoriesByProductID(categoryID)` method and determining how many records are returned in the resulting `ProductsDataTable`, as the following code illustrates:</span></span>

[!code-vb[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample6.vb)]

<span data-ttu-id="446f1-180">Začneme tím, že zajistíme, že budeme znovu pracovat s datovou položkou (jejíž `ItemType` je `Item` nebo `AlternatingItem`), a pak odkazuje na `CategoriesRow` instanci, která je právě svázaná s aktuálním `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="446f1-180">We start out by ensuring that we re working with a data item (one whose `ItemType` is `Item` or `AlternatingItem`) and then reference the `CategoriesRow` instance that has just been bound to the current `RepeaterItem`.</span></span> <span data-ttu-id="446f1-181">Dále určíme počet produktů pro tuto kategorii vytvořením instance třídy `ProductsBLL`, voláním její metody `GetCategoriesByProductID(categoryID)` a určením počtu vrácených záznamů pomocí vlastnosti `Count`.</span><span class="sxs-lookup"><span data-stu-id="446f1-181">Next, we determine the number of products for this category by creating an instance of the `ProductsBLL` class, calling its `GetCategoriesByProductID(categoryID)` method, and determining the number of records returned using the `Count` property.</span></span> <span data-ttu-id="446f1-182">Nakonec `ViewCategory` LinkButton v šabloně ItemTemplate odkazuje na odkaz a jeho vlastnost `Text` je nastavena na *CategoryName* (*NumberOfProductsInCategory*), kde *NumberOfProductsInCategory* je formátováno jako číslo s nulovými desetinnými místy.</span><span class="sxs-lookup"><span data-stu-id="446f1-182">Finally, the `ViewCategory` LinkButton in the ItemTemplate is references and its `Text` property is set to *CategoryName* (*NumberOfProductsInCategory*), where *NumberOfProductsInCategory* is formatted as a number with zero decimal places.</span></span>

> [!NOTE]
> <span data-ttu-id="446f1-183">Alternativně jsme mohli přidat *funkci formátování* do třídy ASP.NET stránky s kódem na pozadí, která přijímá kategorie s `CategoryName` a `CategoryID` hodnoty a vrátí `CategoryName` zřetězené s počtem produktů v kategorii (podle určení voláním metody `GetCategoriesByProductID(categoryID)`).</span><span class="sxs-lookup"><span data-stu-id="446f1-183">Alternatively, we could have added a *formatting function* to the ASP.NET page s code-behind class that accepts a category s `CategoryName` and `CategoryID` values and returns the `CategoryName` concatenated with the number of products in the category (as determined by calling the `GetCategoriesByProductID(categoryID)` method).</span></span> <span data-ttu-id="446f1-184">Výsledky takové funkce formátování mohou být deklarativně přiřazeny vlastnosti text LinkButton s, což nahrazuje nutnost obslužné rutiny události `ItemDataBound`.</span><span class="sxs-lookup"><span data-stu-id="446f1-184">The results of such a formatting function could be declaratively assigned to the LinkButton s Text property replacing the need for the `ItemDataBound` event handler.</span></span> <span data-ttu-id="446f1-185">Další informace o používání funkcí formátování naleznete [v tématu použití templatefields v ovládacím prvku GridView](../custom-formatting/using-templatefields-in-the-gridview-control-vb.md) nebo [formátování prvku DataList a Repeater na základě kurzů dat](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-vb.md) .</span><span class="sxs-lookup"><span data-stu-id="446f1-185">Refer to the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-vb.md) or [Formatting the DataList and Repeater Based Upon Data](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-vb.md) tutorials for more information on using formatting functions.</span></span>

<span data-ttu-id="446f1-186">Po přidání této obslužné rutiny události chvíli počkejte, než se stránka otestuje v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="446f1-186">After adding this event handler, take a moment to test the page through a browser.</span></span> <span data-ttu-id="446f1-187">Všimněte si, že je každá kategorie uvedená v seznamu s odrážkami, zobrazuje název kategorie a počet produktů přidružených k této kategorii (viz obrázek 4).</span><span class="sxs-lookup"><span data-stu-id="446f1-187">Note how each category is listed in a bulleted list, displaying the category s name and the number of products associated with the category (see Figure 4).</span></span>

<span data-ttu-id="446f1-188">[![se zobrazí všechny kategorie s názvem a počet produktů.](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image11.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-188">[![Each Category s Name and Number of Products are Displayed](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image11.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image10.png)</span></span>

<span data-ttu-id="446f1-189">**Obrázek 4**: zobrazí se všechny kategorie s názvem a počet produktů ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image12.png)).</span><span class="sxs-lookup"><span data-stu-id="446f1-189">**Figure 4**: Each Category s Name and Number of Products are Displayed ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image12.png))</span></span>

## <a name="updating-thecategoriesdatatableandcategoriestableadapterto-include-the-number-of-products-for-each-category"></a><span data-ttu-id="446f1-190">Aktualizace`CategoriesDataTable`a`CategoriesTableAdapter`, aby obsahovaly počet produktů pro každou kategorii</span><span class="sxs-lookup"><span data-stu-id="446f1-190">Updating the`CategoriesDataTable`and`CategoriesTableAdapter`to Include the Number of Products for Each Category</span></span>

<span data-ttu-id="446f1-191">Místo určení počtu produktů pro každou kategorii v rámci vazby na Repeater můžete tento proces zjednodušit úpravou `CategoriesDataTable` a `CategoriesTableAdapter` ve vrstvě přístupu k datům tak, aby tyto informace byly nativně zahrnuty.</span><span class="sxs-lookup"><span data-stu-id="446f1-191">Rather than determining the number of products for each category as it s bound to the Repeater, we can streamline this process by adjusting the `CategoriesDataTable` and `CategoriesTableAdapter` in the Data Access Layer to include this information natively.</span></span> <span data-ttu-id="446f1-192">Abychom to dosáhli, je nutné přidat nový sloupec, který `CategoriesDataTable` k uložení počtu přidružených produktů.</span><span class="sxs-lookup"><span data-stu-id="446f1-192">To achieve this, we must add a new column to `CategoriesDataTable` to hold the number of associated products.</span></span> <span data-ttu-id="446f1-193">Chcete-li přidat nový sloupec do objektu DataTable, otevřete typovou datovou sadu (`App_Code\DAL\Northwind.xsd`), klikněte pravým tlačítkem myši na objekt DataTable, který chcete upravit, a vyberte možnost Přidat/sloupec.</span><span class="sxs-lookup"><span data-stu-id="446f1-193">To add a new column to a DataTable, open the Typed DataSet (`App_Code\DAL\Northwind.xsd`), right-click on the DataTable to modify, and choose Add / Column.</span></span> <span data-ttu-id="446f1-194">Přidat nový sloupec do `CategoriesDataTable` (viz obrázek 5).</span><span class="sxs-lookup"><span data-stu-id="446f1-194">Add a new column to the `CategoriesDataTable` (see Figure 5).</span></span>

<span data-ttu-id="446f1-195">[![přidat nový sloupec do CategoriesDataSource](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image14.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-195">[![Add a New Column to the CategoriesDataSource](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image14.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image13.png)</span></span>

<span data-ttu-id="446f1-196">**Obrázek 5**: Přidání nového sloupce do `CategoriesDataSource` ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="446f1-196">**Figure 5**: Add a New Column to the `CategoriesDataSource` ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image15.png))</span></span>

<span data-ttu-id="446f1-197">Tím se přidá nový sloupec s názvem `Column1`, který můžete změnit pouhým zadáním jiného názvu.</span><span class="sxs-lookup"><span data-stu-id="446f1-197">This will add a new column named `Column1`, which you can change by simply typing in a different name.</span></span> <span data-ttu-id="446f1-198">Přejmenujte tento nový sloupec na `NumberOfProducts`.</span><span class="sxs-lookup"><span data-stu-id="446f1-198">Rename this new column to `NumberOfProducts`.</span></span> <span data-ttu-id="446f1-199">Dále je potřeba nakonfigurovat tyto vlastnosti sloupce.</span><span class="sxs-lookup"><span data-stu-id="446f1-199">Next, we need to configure this column s properties.</span></span> <span data-ttu-id="446f1-200">Klikněte na nový sloupec a přejděte na okno Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="446f1-200">Click on the new column and go to the Properties window.</span></span> <span data-ttu-id="446f1-201">Změňte vlastnost `DataType` sloupců z `System.String` na `System.Int32` a nastavte vlastnost `ReadOnly` na `True`, jak je znázorněno na obrázku 6.</span><span class="sxs-lookup"><span data-stu-id="446f1-201">Change the column s `DataType` property from `System.String` to `System.Int32` and set the `ReadOnly` property to `True`, as shown in Figure 6.</span></span>

![Nastavte vlastnosti DataType a ReadOnly nového sloupce.](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image16.png)

<span data-ttu-id="446f1-203">**Obrázek 6**: nastavení vlastností `DataType` a `ReadOnly` nového sloupce</span><span class="sxs-lookup"><span data-stu-id="446f1-203">**Figure 6**: Set the `DataType` and `ReadOnly` Properties of the New Column</span></span>

<span data-ttu-id="446f1-204">I když `CategoriesDataTable` nyní má sloupec `NumberOfProducts`, není jeho hodnota nastavena žádným z odpovídajících dotazů TableAdapter s.</span><span class="sxs-lookup"><span data-stu-id="446f1-204">While the `CategoriesDataTable` now has a `NumberOfProducts` column, its value is not set by any of the corresponding TableAdapter s queries.</span></span> <span data-ttu-id="446f1-205">Metodu `GetCategories()` můžeme aktualizovat, aby vracela tyto informace, pokud chceme tyto informace vracet při každém načtení informací o kategoriích.</span><span class="sxs-lookup"><span data-stu-id="446f1-205">We can update the `GetCategories()` method to return this information if we want such information returned every time category information is retrieved.</span></span> <span data-ttu-id="446f1-206">Pokud ale potřebujeme jen přidružit počet přidružených produktů pro kategorie ve vzácných instancích (například jenom v tomto kurzu), můžeme ponechat `GetCategories()` tak, jak jsou, a vytvořit novou metodu, která vrátí tyto informace.</span><span class="sxs-lookup"><span data-stu-id="446f1-206">If, however, we only need to grab the number of associated products for the categories in rare instances (such as just for this tutorial), then we can leave `GetCategories()` as-is and create a new method that returns this information.</span></span> <span data-ttu-id="446f1-207">Pojďme použít tento druhý přístup a vytvořit novou metodu s názvem `GetCategoriesAndNumberOfProducts()`.</span><span class="sxs-lookup"><span data-stu-id="446f1-207">Let s use this latter approach, creating a new method named `GetCategoriesAndNumberOfProducts()`.</span></span>

<span data-ttu-id="446f1-208">Chcete-li přidat tuto novou metodu `GetCategoriesAndNumberOfProducts()`, klikněte pravým tlačítkem myši na `CategoriesTableAdapter` a vyberte možnost Nový dotaz.</span><span class="sxs-lookup"><span data-stu-id="446f1-208">To add this new `GetCategoriesAndNumberOfProducts()` method, right-click on the `CategoriesTableAdapter` and choose New Query.</span></span> <span data-ttu-id="446f1-209">Tím se zobrazí Průvodce konfigurací dotazu TableAdapter, který jsme v předchozích kurzech používali mnohokrát.</span><span class="sxs-lookup"><span data-stu-id="446f1-209">This brings up the TableAdapter Query Configuration Wizard, which we ve used numerous times in previous tutorials.</span></span> <span data-ttu-id="446f1-210">V případě této metody spusťte Průvodce tak, že je uvedeno, že dotaz používá příkaz SQL ad hoc, který vrací řádky.</span><span class="sxs-lookup"><span data-stu-id="446f1-210">For this method, start the wizard by indicating that the query uses an ad-hoc SQL statement that returns rows.</span></span>

<span data-ttu-id="446f1-211">[![vytvořit metodu pomocí ad-hoc příkazu SQL](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image18.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-211">[![Create the Method Using an Ad-Hoc SQL Statement](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image18.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image17.png)</span></span>

<span data-ttu-id="446f1-212">**Obrázek 7**: vytvoření metody pomocí ad-hoc příkazu SQL ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="446f1-212">**Figure 7**: Create the Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image19.png))</span></span>

<span data-ttu-id="446f1-213">[![příkaz jazyka SQL vrátí řádky](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image21.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-213">[![The SQL Statement Returns Rows](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image21.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image20.png)</span></span>

<span data-ttu-id="446f1-214">**Obrázek 8**: příkaz jazyka SQL vrací řádky ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="446f1-214">**Figure 8**: The SQL Statement Returns Rows ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image22.png))</span></span>

<span data-ttu-id="446f1-215">Další obrazovka průvodce vás vyzve, aby se dotaz použil.</span><span class="sxs-lookup"><span data-stu-id="446f1-215">The next wizard screen prompts us for the query to use.</span></span> <span data-ttu-id="446f1-216">Pokud chcete vrátit jednotlivé kategorie `CategoryID`, `CategoryName`a `Description`, spolu s počtem produktů přidružených k této kategorii, použijte následující příkaz `SELECT`:</span><span class="sxs-lookup"><span data-stu-id="446f1-216">To return each category s `CategoryID`, `CategoryName`, and `Description` fields, along with the number of products associated with the category, use the following `SELECT` statement:</span></span>

[!code-sql[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample7.sql)]

<span data-ttu-id="446f1-217">[![zadejte dotaz, který se má použít.](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image24.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-217">[![Specify the Query to Use](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image24.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image23.png)</span></span>

<span data-ttu-id="446f1-218">**Obrázek 9**: určení dotazu, který se má použít ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="446f1-218">**Figure 9**: Specify the Query to Use ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image25.png))</span></span>

<span data-ttu-id="446f1-219">Všimněte si, že poddotaz, který vypočítá počet produktů přidružených k této kategorii, má alias `NumberOfProducts`.</span><span class="sxs-lookup"><span data-stu-id="446f1-219">Note that the subquery that computes the number of products associated with the category is aliased as `NumberOfProducts`.</span></span> <span data-ttu-id="446f1-220">Tato shoda názvů způsobí, že hodnota vrácená tímto poddotazem bude přidružena k sloupci `CategoriesDataTable` s `NumberOfProducts`.</span><span class="sxs-lookup"><span data-stu-id="446f1-220">This naming match causes the value returned by this subquery to be associated with the `CategoriesDataTable` s `NumberOfProducts` column.</span></span>

<span data-ttu-id="446f1-221">Po zadání tohoto dotazu je posledním krokem výběr názvu nové metody.</span><span class="sxs-lookup"><span data-stu-id="446f1-221">After entering this query, the last step is to choose the name for the new method.</span></span> <span data-ttu-id="446f1-222">Pro naplnění objektu DataTable použijte `FillWithNumberOfProducts` a `GetCategoriesAndNumberOfProducts` a vraťte se ke vzorům DataTable.</span><span class="sxs-lookup"><span data-stu-id="446f1-222">Use `FillWithNumberOfProducts` and `GetCategoriesAndNumberOfProducts` for the Fill a DataTable and Return a DataTable patterns, respectively.</span></span>

<span data-ttu-id="446f1-223">[![název nové metody FillWithNumberOfProducts a GetCategoriesAndNumberOfProducts pro TableAdapter s](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image27.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-223">[![Name the New TableAdapter s Methods FillWithNumberOfProducts and GetCategoriesAndNumberOfProducts](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image27.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image26.png)</span></span>

<span data-ttu-id="446f1-224">**Obrázek 10**: pojmenujte nové metody TableAdapter s `FillWithNumberOfProducts` a `GetCategoriesAndNumberOfProducts` ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-224">**Figure 10**: Name the New TableAdapter s Methods `FillWithNumberOfProducts` and `GetCategoriesAndNumberOfProducts` ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image28.png))</span></span>

<span data-ttu-id="446f1-225">V tomto okamžiku byla vrstva přístupu k datům rozšířena tak, aby obsahovala počet produktů na kategorii.</span><span class="sxs-lookup"><span data-stu-id="446f1-225">At this point the Data Access Layer has been extended to include the number of products per category.</span></span> <span data-ttu-id="446f1-226">Vzhledem k tomu, že všechny naše prezentační vrstvy směrují všechna volání na DAL prostřednictvím samostatné vrstvy obchodní logiky, musíme do `CategoriesBLL` třídy přidat odpovídající metodu `GetCategoriesAndNumberOfProducts`:</span><span class="sxs-lookup"><span data-stu-id="446f1-226">Since all our presentation layer routes all calls to the DAL through a separate Business Logic Layer we need to add a corresponding `GetCategoriesAndNumberOfProducts` method to the `CategoriesBLL` class:</span></span>

[!code-vb[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample8.vb)]

<span data-ttu-id="446f1-227">Po dokončení a knihoven BLLi jsme připraveni tato data navážet do `Categories`ového opakovače v `CategoriesAndProducts.aspx`!</span><span class="sxs-lookup"><span data-stu-id="446f1-227">With the DAL and BLL complete, we re ready to bind this data to the `Categories` Repeater in `CategoriesAndProducts.aspx`!</span></span> <span data-ttu-id="446f1-228">Pokud jste již vytvořili prvek ObjectDataSource pro příkaz Repeater z části určení počtu produktů v sekci obslužné rutiny události `ItemDataBound`, odstraňte tento prvek ObjectDataSource a odeberte nastavení vlastnosti Repeater s `DataSourceID`; také odvedení události Repeater `ItemDataBound` z obslužné rutiny události odebráním syntaxe `Handles Categories.OnItemDataBound` ve třídě kódu na pozadí ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="446f1-228">If you ve already created an ObjectDataSource for the Repeater from the Determining the Number of Products in the `ItemDataBound` Event Handler section, delete this ObjectDataSource and remove the Repeater s `DataSourceID` property setting; also unwire the Repeater s `ItemDataBound` event from the event handler by removing the `Handles Categories.OnItemDataBound` syntax in the ASP.NET code-behind class.</span></span>

<span data-ttu-id="446f1-229">Pomocí návratového znaku zpět v původním stavu přidejte nový prvek ObjectDataSource s názvem `CategoriesDataSource` prostřednictvím inteligentní značky Repeater.</span><span class="sxs-lookup"><span data-stu-id="446f1-229">With the Repeater back in its original state, add a new ObjectDataSource named `CategoriesDataSource` via the Repeater s smart tag.</span></span> <span data-ttu-id="446f1-230">Nakonfigurujte prvek ObjectDataSource tak, aby používal třídu `CategoriesBLL`, ale místo toho, aby používal metodu `GetCategories()`, mělo by místo toho použít `GetCategoriesAndNumberOfProducts()` (viz obrázek 11).</span><span class="sxs-lookup"><span data-stu-id="446f1-230">Configure the ObjectDataSource to use the `CategoriesBLL` class, but instead of having it use the `GetCategories()` method, have it use `GetCategoriesAndNumberOfProducts()` instead (see Figure 11).</span></span>

<span data-ttu-id="446f1-231">[![nakonfigurovat prvek ObjectDataSource na použití metody GetCategoriesAndNumberOfProducts](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image30.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-231">[![Configure the ObjectDataSource to Use the GetCategoriesAndNumberOfProducts Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image30.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image29.png)</span></span>

<span data-ttu-id="446f1-232">**Obrázek 11**: Konfigurace prvku ObjectDataSource pro použití metody `GetCategoriesAndNumberOfProducts` ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="446f1-232">**Figure 11**: Configure the ObjectDataSource to Use the `GetCategoriesAndNumberOfProducts` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image31.png))</span></span>

<span data-ttu-id="446f1-233">Dále aktualizujte `ItemTemplate` tak, aby vlastnost LinkButton s `Text` byla deklarativně přiřazena pomocí syntaxe DataBinding a obsahovala datová pole `CategoryName` a `NumberOfProducts`.</span><span class="sxs-lookup"><span data-stu-id="446f1-233">Next, update the `ItemTemplate` so that the LinkButton s `Text` property is declaratively assigned using databinding syntax and includes both the `CategoryName` and `NumberOfProducts` data fields.</span></span> <span data-ttu-id="446f1-234">Dokončení deklarativních značek pro Repeater a `CategoriesDataSource` ObjectDataSource následuje:</span><span class="sxs-lookup"><span data-stu-id="446f1-234">The complete declarative markup for the Repeater and the `CategoriesDataSource` ObjectDataSource follow:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample9.aspx)]

<span data-ttu-id="446f1-235">Výstup vykreslený aktualizací hodnoty DAL za účelem zahrnutí sloupce `NumberOfProducts` je stejný jako při použití přístupu k obslužné rutině události `ItemDataBound` (vraťte se zpátky na obrázek 4, kde se zobrazí snímek obrazovky s názvem kategorie a počet produktů).</span><span class="sxs-lookup"><span data-stu-id="446f1-235">The output rendered by updating the DAL to include a `NumberOfProducts` column is the same as using the `ItemDataBound` event handler approach (refer back to Figure 4 to see a screen shot of the Repeater showing the category names and number of products).</span></span>

## <a name="step-3-displaying-the-selected-category-s-products"></a><span data-ttu-id="446f1-236">Krok 3: zobrazení vybraných produktů kategorií s</span><span class="sxs-lookup"><span data-stu-id="446f1-236">Step 3: Displaying the Selected Category s Products</span></span>

<span data-ttu-id="446f1-237">V tomto okamžiku má `Categories` Repeater zobrazení seznamu kategorií spolu s počtem produktů v jednotlivých kategoriích.</span><span class="sxs-lookup"><span data-stu-id="446f1-237">At this point we have the `Categories` Repeater displaying the list of categories along with the number of products in each category.</span></span> <span data-ttu-id="446f1-238">Repeater používá LinkButton pro každou kategorii, která při kliknutí způsobí postback, ve kterém je potřeba zobrazit tyto produkty pro vybranou kategorii v `CategoryProducts` DataList.</span><span class="sxs-lookup"><span data-stu-id="446f1-238">The Repeater uses a LinkButton for each category that, when clicked, causes a postback, at which point we need to display those products for the selected category in the `CategoryProducts` DataList.</span></span>

<span data-ttu-id="446f1-239">Jedna z nich čelí, jak má prvek DataList zobrazit pouze ty produkty pro vybranou kategorii.</span><span class="sxs-lookup"><span data-stu-id="446f1-239">One challenge facing us is how to have the DataList display just those products for the selected category.</span></span> <span data-ttu-id="446f1-240">V seznamu [a podrobnostech pomocí selektivního hlavního prvku GridView s kurzem podrobností DetailsView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-vb.md) jsme viděli, jak vytvořit prvek GridView, jehož řádky by se daly vybrat, s vybranými podrobnostmi o řádcích zobrazenými v ovládacím prvku DetailsView na stejné stránce.</span><span class="sxs-lookup"><span data-stu-id="446f1-240">In the [Master/Detail Using a Selectable Master GridView with a Details DetailsView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-vb.md) tutorial we saw how to build a GridView whose rows could be selected, with the selected row s details being displayed in a DetailsView on the same page.</span></span> <span data-ttu-id="446f1-241">Prvek GridView s ObjectDataSource vrátil informace o všech produktech pomocí metody `GetProducts()` `ProductsBLL` s, zatímco ovládací prvek DetailsView s ObjectDataSource načetl informace o vybraném produktu pomocí metody `GetProductsByProductID(productID)`.</span><span class="sxs-lookup"><span data-stu-id="446f1-241">The GridView s ObjectDataSource returned information about all products using the `ProductsBLL` s `GetProducts()` method while the DetailsView s ObjectDataSource retrieved information about the selected product using the `GetProductsByProductID(productID)` method.</span></span> <span data-ttu-id="446f1-242">Hodnota parametru *`productID`* byla k dispozici deklarativně tak, že ji přidružíte k hodnotě vlastnosti GridView s `SelectedValue`.</span><span class="sxs-lookup"><span data-stu-id="446f1-242">The *`productID`* parameter value was provided declaratively by associating it with the value of the GridView s `SelectedValue` property.</span></span> <span data-ttu-id="446f1-243">Tento příkaz bohužel nemá vlastnost `SelectedValue` a nemůže sloužit jako zdroj parametru.</span><span class="sxs-lookup"><span data-stu-id="446f1-243">Unfortunately, the Repeater does not have a `SelectedValue` property and cannot serve as a parameter source.</span></span>

> [!NOTE]
> <span data-ttu-id="446f1-244">Toto je jeden z těchto výzev, které se zobrazí při použití prvku LinkButton v rámci Repeater.</span><span class="sxs-lookup"><span data-stu-id="446f1-244">This is one of those challenges that appear when using the LinkButton in a Repeater.</span></span> <span data-ttu-id="446f1-245">Použili jsme hypertextový odkaz k předání `CategoryID` prostřednictvím řetězce dotazu, můžeme použít toto pole QueryString jako zdroj hodnoty parametru s.</span><span class="sxs-lookup"><span data-stu-id="446f1-245">Had we used a hyperlink to pass in the `CategoryID` through the querystring instead, we could use that QueryString field as the source for the parameter s value.</span></span>

<span data-ttu-id="446f1-246">Předtím, než se obáváme o nedostatku `SelectedValue` vlastnosti pro Repeater, ale můžeme nejdřív navazovat vazby prvku DataList na prvek ObjectDataSource a zadat jeho `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="446f1-246">Before we worry about the lack of a `SelectedValue` property for the Repeater, though, let s first bind the DataList to an ObjectDataSource and specify its `ItemTemplate`.</span></span>

<span data-ttu-id="446f1-247">Z inteligentní značky DataList s Přihlaste se k přidání nového prvku ObjectDataSource s názvem `CategoryProductsDataSource` a nakonfigurujte ho tak, aby používal metodu `GetProductsByCategoryID(categoryID)` `ProductsBLL` třídy s.</span><span class="sxs-lookup"><span data-stu-id="446f1-247">From the DataList s smart tag, opt to add a new ObjectDataSource named `CategoryProductsDataSource` and configure it to use the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="446f1-248">Vzhledem k tomu, že DataList v tomto kurzu nabízí rozhraní jen pro čtení, můžete nastavit rozevírací seznamy na kartách vložení, aktualizace a odstranění na (žádné).</span><span class="sxs-lookup"><span data-stu-id="446f1-248">Since the DataList in this tutorial offers a read-only interface, feel free to set the drop-down lists in the INSERT, UPDATE, and DELETE tabs to (None).</span></span>

<span data-ttu-id="446f1-249">[![nakonfigurovat prvek ObjectDataSource tak, aby používal metodu ProductsBLL třídy s GetProductsByCategoryID (KódKategorie)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image33.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-249">[![Configure the ObjectDataSource to Use ProductsBLL Class s GetProductsByCategoryID(categoryID) Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image33.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image32.png)</span></span>

<span data-ttu-id="446f1-250">**Obrázek 12**: Konfigurace prvku ObjectDataSource pro použití `ProductsBLL` třídy s `GetProductsByCategoryID(categoryID)` metoda ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="446f1-250">**Figure 12**: Configure the ObjectDataSource to Use `ProductsBLL` Class s `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image34.png))</span></span>

<span data-ttu-id="446f1-251">Vzhledem k tomu, že metoda `GetProductsByCategoryID(categoryID)` očekává vstupní parametr ( *`categoryID`* ), Průvodce konfigurací zdroje dat nám umožňuje zadat parametr s parametrem source.</span><span class="sxs-lookup"><span data-stu-id="446f1-251">Since the `GetProductsByCategoryID(categoryID)` method expects an input parameter (*`categoryID`*), the Configure Data Source wizard allows us to specify the parameter s source.</span></span> <span data-ttu-id="446f1-252">Měly by se tyto kategorie vypisovat v prvku GridView nebo v prvku DataList, ale v rozevíracím seznamu zdroj parametrů se nastaví ovládací prvek a vlastnosti ControlID na `ID` webového ovládacího prvku data.</span><span class="sxs-lookup"><span data-stu-id="446f1-252">Had the categories been listed in a GridView or a DataList, we d set the Parameter source drop-down list to Control and the ControlID to the `ID` of the data Web control.</span></span> <span data-ttu-id="446f1-253">Vzhledem k tomu, že u Repeater chybí vlastnost `SelectedValue`, nemůže být použit jako zdroj parametru.</span><span class="sxs-lookup"><span data-stu-id="446f1-253">However, since the Repeater lacks a `SelectedValue` property it cannot be used as a parameter source.</span></span> <span data-ttu-id="446f1-254">Pokud zkontrolujete, zjistíte, že rozevírací seznam ControlID obsahuje pouze jeden ovládací prvek `ID``CategoryProducts`, `ID` prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="446f1-254">If you check, you'll find that the ControlID drop-down list only contains one control `ID``CategoryProducts`, the `ID` of the DataList.</span></span>

<span data-ttu-id="446f1-255">Prozatím nastavte rozevírací seznam zdroj parametrů na žádný.</span><span class="sxs-lookup"><span data-stu-id="446f1-255">For now, set the Parameter source drop-down list to None.</span></span> <span data-ttu-id="446f1-256">Pokud kliknete na položku LinkButton v poli Repeater, ukončíme programově přiřazení této hodnoty parametru.</span><span class="sxs-lookup"><span data-stu-id="446f1-256">We'll end up programmatically assigning this parameter value when a category LinkButton is clicked in the Repeater.</span></span>

<span data-ttu-id="446f1-257">[![nespecifikovat zdroj parametru pro parametr KódKategorie](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image36.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-257">[![Do Not Specify a Parameter Source for the categoryID Parameter](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image36.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image35.png)</span></span>

<span data-ttu-id="446f1-258">**Obrázek 13**: nezadávejte zdrojový parametr pro parametr *`categoryID`* ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image37.png)).</span><span class="sxs-lookup"><span data-stu-id="446f1-258">**Figure 13**: Do Not Specify a Parameter Source for the *`categoryID`* Parameter ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image37.png))</span></span>

<span data-ttu-id="446f1-259">Po dokončení Průvodce konfigurací zdroje dat aplikace Visual Studio automaticky vygeneruje `ItemTemplate`DataList s.</span><span class="sxs-lookup"><span data-stu-id="446f1-259">After completing the Configure Data Source wizard, Visual Studio auto-generates the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="446f1-260">Nahraďte tento výchozí `ItemTemplate` šablonou, kterou jsme použili v předchozím kurzu. také nastavte vlastnost `RepeatColumns` DataList na 2.</span><span class="sxs-lookup"><span data-stu-id="446f1-260">Replace this default `ItemTemplate` with the template we used in the preceding tutorial; also, set the DataList s `RepeatColumns` property to 2.</span></span> <span data-ttu-id="446f1-261">Po provedení těchto změn by deklarativní označení pro prvek DataList a jeho přidružené prvky ObjectDataSource mělo vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="446f1-261">After making these changes the declarative markup for your DataList and its associated ObjectDataSource should look like the following:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample10.aspx)]

<span data-ttu-id="446f1-262">V současné době není parametr `CategoryProductsDataSource` ObjectDataSource s *`categoryID`* nikdy nastaven, takže při zobrazení stránky se nezobrazí žádné produkty.</span><span class="sxs-lookup"><span data-stu-id="446f1-262">Currently, the `CategoryProductsDataSource` ObjectDataSource s *`categoryID`* parameter is never set, so no products are displayed when viewing the page.</span></span> <span data-ttu-id="446f1-263">To, co musíme udělat, je tato hodnota parametru nastavená na základě `CategoryID` kategorie kliknutí v poli Repeater.</span><span class="sxs-lookup"><span data-stu-id="446f1-263">What we need to do is have this parameter value set based on the `CategoryID` of the clicked category in the Repeater.</span></span> <span data-ttu-id="446f1-264">Tím se dokončí dvě výzvy: nejdřív určíme, kdy se na LinkButton `ItemTemplate` kliklo. a za druhé, jak můžeme určit `CategoryID` odpovídající kategorie, jejíž LinkButton byl kliknuto?</span><span class="sxs-lookup"><span data-stu-id="446f1-264">This introduces two challenges: first, how do we determine when a LinkButton in the Repeater s `ItemTemplate` has been clicked; and second, how can we determine the `CategoryID` of the corresponding category whose LinkButton was clicked?</span></span>

<span data-ttu-id="446f1-265">Prvek LinkButton, jako je tlačítko a ovládací prvky obrázkové, má událost `Click` a [událost`Command`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.command.aspx).</span><span class="sxs-lookup"><span data-stu-id="446f1-265">The LinkButton like the Button and ImageButton controls has a `Click` event and a [`Command` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.command.aspx).</span></span> <span data-ttu-id="446f1-266">Událost `Click` je navržena tak, aby jednoduše poznamenala, že jste klikli na LinkButton.</span><span class="sxs-lookup"><span data-stu-id="446f1-266">The `Click` event is designed to simply note that the LinkButton has been clicked.</span></span> <span data-ttu-id="446f1-267">Někdy ale kromě toho, že jste klikli na položku LinkButton, ale také potřebujete předat nějaké další informace obslužné rutině události.</span><span class="sxs-lookup"><span data-stu-id="446f1-267">At times, however, in addition to noting that the LinkButton has been clicked we also need to pass some extra information to the event handler.</span></span> <span data-ttu-id="446f1-268">Pokud se jedná o tento případ, vlastnosti LinkButton [`CommandName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandname.aspx) a [`CommandArgument`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx) lze přiřadit k této dodatečné informaci.</span><span class="sxs-lookup"><span data-stu-id="446f1-268">If this is the case, the LinkButton s [`CommandName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandname.aspx) and [`CommandArgument`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx) properties can be assigned this extra information.</span></span> <span data-ttu-id="446f1-269">Pak při kliknutí na LinkButton se událost `Command` aktivuje (namísto události `Click`) a obslužná rutina události je předána hodnotami vlastností `CommandName` a `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="446f1-269">Then, when the LinkButton is clicked, its `Command` event fires (instead of its `Click` event) and the event handler is passed the values of the `CommandName` and `CommandArgument` properties.</span></span>

<span data-ttu-id="446f1-270">Když je událost `Command` vyvolána v rámci šablony v Repeater, [událost repeater`ItemCommand`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeater.itemcommand.aspx) se aktivuje a předává se `CommandName` a `CommandArgument` hodnoty kliknutí na položku LinkButton (nebo tlačítko nebo obrázkové).</span><span class="sxs-lookup"><span data-stu-id="446f1-270">When a `Command` event is raised from within a template in the Repeater, the Repeater s [`ItemCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeater.itemcommand.aspx) fires and is passed the `CommandName` and `CommandArgument` values of the clicked LinkButton (or Button or ImageButton).</span></span> <span data-ttu-id="446f1-271">Proto je potřeba provést následující akce, aby bylo možné určit, kdy došlo ke kliknutí na položku LinkButton kategorie v OPAKOVAČI:</span><span class="sxs-lookup"><span data-stu-id="446f1-271">Therefore, to determine when a category LinkButton in the Repeater has been clicked, we need to do the following:</span></span>

1. <span data-ttu-id="446f1-272">Nastavte vlastnost `CommandName` prvku LinkButton v poli Repeater s `ItemTemplate` na určitou hodnotu (používá se ListProducts).</span><span class="sxs-lookup"><span data-stu-id="446f1-272">Set the `CommandName` property of the LinkButton in the Repeater s `ItemTemplate` to some value (I ve used ListProducts ).</span></span> <span data-ttu-id="446f1-273">Nastavením této `CommandName` hodnoty je při kliknutí na LinkButton aktivována událost `Command` LinkButton s.</span><span class="sxs-lookup"><span data-stu-id="446f1-273">By setting this `CommandName` value, the LinkButton s `Command` event fires when the LinkButton is clicked.</span></span>
2. <span data-ttu-id="446f1-274">Nastavte vlastnost LinkButton s `CommandArgument` na hodnotu `CategoryID`aktuální položky.</span><span class="sxs-lookup"><span data-stu-id="446f1-274">Set the LinkButton s `CommandArgument` property to the value of the current item s `CategoryID`.</span></span>
3. <span data-ttu-id="446f1-275">Vytvořte obslužnou rutinu události pro událost `ItemCommand` opakování.</span><span class="sxs-lookup"><span data-stu-id="446f1-275">Create an event handler for the Repeater s `ItemCommand` event.</span></span> <span data-ttu-id="446f1-276">V obslužné rutině události nastavte `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parametr na hodnotu `CommandArgument`předaného.</span><span class="sxs-lookup"><span data-stu-id="446f1-276">In the event handler, set the `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parameter to the value of the passed-in `CommandArgument`.</span></span>

<span data-ttu-id="446f1-277">Následující `ItemTemplate` značky pro Repeater kategorií implementuje kroky 1 a 2.</span><span class="sxs-lookup"><span data-stu-id="446f1-277">The following `ItemTemplate` markup for the Categories Repeater implements steps 1 and 2.</span></span> <span data-ttu-id="446f1-278">Všimněte si, jak je přiřazena hodnota `CommandArgument` datové položce s `CategoryID` pomocí syntaxe DataBinding:</span><span class="sxs-lookup"><span data-stu-id="446f1-278">Note how the `CommandArgument` value is assigned the data item s `CategoryID` using databinding syntax:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample11.aspx)]

<span data-ttu-id="446f1-279">Pokaždé, když se vytvoří obslužná rutina události `ItemCommand`, je obezřetná vždy, když chcete, aby se automaticky zkontrolovala hodnota příchozí `CommandName`, protože *jakákoli* `Command` událost vyvolaná *jakýmkoli* tlačítkem, LinkButton nebo obrázkové v rámci Repeater způsobí, že se událost `ItemCommand` aktivuje.</span><span class="sxs-lookup"><span data-stu-id="446f1-279">Whenever creating an `ItemCommand` event handler it is prudent to always first check the incoming `CommandName` value because *any* `Command` event raised by *any* Button, LinkButton, or ImageButton within the Repeater will cause the `ItemCommand` event to fire.</span></span> <span data-ttu-id="446f1-280">V současné době máme jenom jednu takovou položku LinkButton. v budoucnu bychom (nebo jiný vývojář v našem týmu) mohli přidat další webové ovládací prvky tlačítek do tohoto opakovače, který po kliknutí vyvolá stejnou `ItemCommand` obslužnou rutinu události.</span><span class="sxs-lookup"><span data-stu-id="446f1-280">While we currently only have one such LinkButton now, in the future we (or another developer on our team) might add additional button Web controls to the Repeater that, when clicked, raises the same `ItemCommand` event handler.</span></span> <span data-ttu-id="446f1-281">Proto se nejlépe ujistěte, že jste zkontrolovali vlastnost `CommandName` a chcete pokračovat v programové logice, pokud se shoduje s očekávanou hodnotou.</span><span class="sxs-lookup"><span data-stu-id="446f1-281">Therefore, it s best to always make sure you check the `CommandName` property and only proceed with your programmatic logic if it matches up to the value expected.</span></span>

<span data-ttu-id="446f1-282">Po zajistěte, aby se předaná hodnota `CommandName` rovna ListProducts, obslužná rutina události poté přiřadí parametr `CategoryProductsDataSource` ObjectDataSource s `CategoryID` k hodnotě předaného `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="446f1-282">After ensuring that the passed-in `CommandName` value equals ListProducts, the event handler then assigns the `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parameter to the value of the passed-in `CommandArgument`.</span></span> <span data-ttu-id="446f1-283">Tato změna `SelectParameters` ObjectDataSource a automaticky způsobí, že prvek DataList se znovu sváže se zdrojem dat a zobrazí produkty pro nově vybranou kategorii.</span><span class="sxs-lookup"><span data-stu-id="446f1-283">This modification to the ObjectDataSource s `SelectParameters` automatically causes the DataList to rebind itself to the data source, showing the products for the newly selected category.</span></span>

[!code-vb[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/samples/sample12.vb)]

<span data-ttu-id="446f1-284">S těmito dodatky jsme náš kurz dokončili.</span><span class="sxs-lookup"><span data-stu-id="446f1-284">With these additions, our tutorial is complete!</span></span> <span data-ttu-id="446f1-285">Vyzkoušejte si chvilku, abyste ho otestovali v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="446f1-285">Take a moment to test it out in a browser.</span></span> <span data-ttu-id="446f1-286">Obrázek 14 zobrazuje obrazovku při první návštěvě stránky.</span><span class="sxs-lookup"><span data-stu-id="446f1-286">Figure 14 shows the screen when first visiting the page.</span></span> <span data-ttu-id="446f1-287">Vzhledem k tomu, že se kategorie ještě vybrala, nezobrazí se žádné produkty.</span><span class="sxs-lookup"><span data-stu-id="446f1-287">Since a category has yet to be selected, no products are displayed.</span></span> <span data-ttu-id="446f1-288">Kliknutím na kategorii, jako je například výroba, se zobrazí tyto produkty v kategorii produkt v zobrazení se dvěma sloupci (viz obrázek 15).</span><span class="sxs-lookup"><span data-stu-id="446f1-288">Clicking on a category, such as Produce, displays those products in the Product category in a two-column view (see Figure 15).</span></span>

<span data-ttu-id="446f1-289">[Při první návštěvě stránky se nezobrazují ![žádné produkty.](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image39.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-289">[![No Products are Displayed When First Visiting the Page](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image39.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image38.png)</span></span>

<span data-ttu-id="446f1-290">**Obrázek 14**: při první návštěvě stránky nejsou zobrazeny žádné produkty ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image40.png)).</span><span class="sxs-lookup"><span data-stu-id="446f1-290">**Figure 14**: No Products are Displayed When First Visiting the Page ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image40.png))</span></span>

<span data-ttu-id="446f1-291">[![kliknutí na kategorii výroba zobrazí seznam vyhovujících produktů napravo.](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image42.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-291">[![Clicking the Produce Category Lists the Matching Products to the Right](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image42.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image41.png)</span></span>

<span data-ttu-id="446f1-292">**Obrázek 15**: kliknutím na kategorii výroba zobrazíte seznam vyhovujících produktů vpravo ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="446f1-292">**Figure 15**: Clicking the Produce Category Lists the Matching Products to the Right ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-vb/_static/image43.png))</span></span>

## <a name="summary"></a><span data-ttu-id="446f1-293">Přehled</span><span class="sxs-lookup"><span data-stu-id="446f1-293">Summary</span></span>

<span data-ttu-id="446f1-294">Jak jsme viděli v tomto kurzu a předchozí sestavy hlavní/podrobnosti je možné rozložit na dvě stránky nebo konsolidovat na jednu z nich.</span><span class="sxs-lookup"><span data-stu-id="446f1-294">As we saw in this tutorial and the preceding one, master/detail reports can be spread out across two pages, or consolidated on one.</span></span> <span data-ttu-id="446f1-295">Zobrazení sestavy hlavní/podrobnosti na jedné stránce ale zavádí některé problémy s tím, jak nejlépe rozložení hlavního a podrobného záznamu na stránce.</span><span class="sxs-lookup"><span data-stu-id="446f1-295">Displaying a master/details report on a single page, however, introduces some challenges on how best to layout the master and details records on the page.</span></span> <span data-ttu-id="446f1-296">V seznamu *a podrobnostech pomocí selektivního hlavního prvku GridView s podrobným* kurzem k podrobnostem se zobrazí záznamy podrobností nad hlavními záznamy; v tomto kurzu jsme pomocí techniků CSS nastavili hlavní záznamy na levou stranu podrobností.</span><span class="sxs-lookup"><span data-stu-id="446f1-296">In the *Master/Detail Using a Selectable Master GridView with a Details DetailsView* tutorial we had the details records appear above the master records; in this tutorial we used CSS techniques to have the master records float to the left of the details.</span></span>

<span data-ttu-id="446f1-297">Společně s zobrazením sestav hlavních a podrobností jsme také pomohli prozkoumat, jak načíst počet produktů přidružených ke každé kategorii a jak provádět logiku na straně serveru při kliknutí na LinkButton (nebo tlačítko nebo obrázkové) v rámci Repeater.</span><span class="sxs-lookup"><span data-stu-id="446f1-297">Along with displaying master/details reports, we also had the opportunity to explore how to retrieve the number of products associated with each category as well as how to perform server-side logic when a LinkButton (or Button or ImageButton) is clicked from within a Repeater.</span></span>

<span data-ttu-id="446f1-298">V tomto kurzu se dokončí naše zkoumání sestav hlavní/podrobnosti s prvky DataList a Repeater.</span><span class="sxs-lookup"><span data-stu-id="446f1-298">This tutorial completes our examination of master/detail reports with the DataList and Repeater.</span></span> <span data-ttu-id="446f1-299">Naše další sada kurzů vám ukáže, jak přidat do ovládacího prvku DataList možnosti úprav a odstranění.</span><span class="sxs-lookup"><span data-stu-id="446f1-299">Our next set of tutorials will illustrate how to add editing and deleting capabilities to the DataList control.</span></span>

<span data-ttu-id="446f1-300">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="446f1-300">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="446f1-301">Další čtení</span><span class="sxs-lookup"><span data-stu-id="446f1-301">Further Reading</span></span>

<span data-ttu-id="446f1-302">Další informace o tématech popsaných v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="446f1-302">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- <span data-ttu-id="446f1-303">[Floatutorial](http://css.maxdesign.com.au/floatutorial/) kurz pro plovoucí prvky CSS pomocí šablon stylů CSS</span><span class="sxs-lookup"><span data-stu-id="446f1-303">[Floatutorial](http://css.maxdesign.com.au/floatutorial/) a tutorial on floating CSS elements with CSS</span></span>
- <span data-ttu-id="446f1-304">[Šablony stylů CSS](http://www.brainjar.com/css/positioning/) – Další informace o umísťování elementů pomocí šablon stylů CSS</span><span class="sxs-lookup"><span data-stu-id="446f1-304">[CSS Positioning](http://www.brainjar.com/css/positioning/) more information on positioning elements with CSS</span></span>
- <span data-ttu-id="446f1-305">[Rozložení obsahu pomocí jazyka HTML](http://www.w3schools.com/html/html_layout.asp) pomocí `<table>` s a dalších prvků HTML pro umístění</span><span class="sxs-lookup"><span data-stu-id="446f1-305">[Laying Out Content with HTML](http://www.w3schools.com/html/html_layout.asp) using `<table>` s and other HTML elements for positioning</span></span>

## <a name="about-the-author"></a><span data-ttu-id="446f1-306">O autorovi</span><span class="sxs-lookup"><span data-stu-id="446f1-306">About the Author</span></span>

<span data-ttu-id="446f1-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="446f1-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="446f1-308">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="446f1-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="446f1-309">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="446f1-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="446f1-310">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="446f1-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="446f1-311">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="446f1-311">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="446f1-312">Zvláštní díky</span><span class="sxs-lookup"><span data-stu-id="446f1-312">Special Thanks To</span></span>

<span data-ttu-id="446f1-313">Tato řada kurzů byla přezkoumána mnoha užitečnými kontrolory.</span><span class="sxs-lookup"><span data-stu-id="446f1-313">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="446f1-314">Kontrolor potenciálních zákazníků pro tento kurz byl Zack Novotný.</span><span class="sxs-lookup"><span data-stu-id="446f1-314">Lead reviewer for this tutorial was Zack Jones.</span></span> <span data-ttu-id="446f1-315">Uvažujete o přezkoumání mých nadcházejících článků na webu MSDN?</span><span class="sxs-lookup"><span data-stu-id="446f1-315">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="446f1-316">Pokud ano, vyřaďte mi řádek na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="446f1-316">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="446f1-317">Předchozí</span><span class="sxs-lookup"><span data-stu-id="446f1-317">Previous</span></span>](master-detail-filtering-acess-two-pages-datalist-vb.md)
