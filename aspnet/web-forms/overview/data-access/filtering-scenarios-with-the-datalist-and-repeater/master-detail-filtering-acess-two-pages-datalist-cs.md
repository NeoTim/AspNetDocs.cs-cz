---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
title: Filtrování seznamu a podrobností na dvou stránkách (C#) | Microsoft Docs
author: rick-anderson
description: V tomto kurzu se podíváme na to, jak oddělit hlavní a podrobné sestavy mezi dvěma stránkami. Na hlavní stránce používáme ovládací prvek Repeater k vykreslení seznamu CATEG...
ms.author: riande
ms.date: 10/30/2010
ms.assetid: 68b8c023-92fa-4df6-9563-1764e16e4b04
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: 545b24a66476c55aff88ac62d3a6528105fea6c0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78607077"
---
# <a name="masterdetail-filtering-across-two-pages-c"></a><span data-ttu-id="4c024-104">Filtrování hlavních záznamů / podrobností na dvou stránkách (C#)</span><span class="sxs-lookup"><span data-stu-id="4c024-104">Master/Detail Filtering Across Two Pages (C#)</span></span>

<span data-ttu-id="4c024-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="4c024-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="4c024-106">[Stáhnout ukázkovou aplikaci](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe) nebo [Stáhnout PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="4c024-106">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe) or [Download PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span></span>

> <span data-ttu-id="4c024-107">V tomto kurzu se podíváme na to, jak oddělit hlavní a podrobné sestavy mezi dvěma stránkami.</span><span class="sxs-lookup"><span data-stu-id="4c024-107">In this tutorial we look at how to separate a master/detail report across two pages.</span></span> <span data-ttu-id="4c024-108">Na stránce "hlavní" používáme ovládací prvek Repeater k vykreslení seznamu kategorií, který při kliknutí na něj převezme uživatele na stránku podrobností, kde se ve dvou sloupcích DataList zobrazí tyto produkty patřící do vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="4c024-108">In the "master" page we use a Repeater control to render a list of categories that, when clicked, will take the user to the "details" page where a two-column DataList shows those products belonging to the selected category.</span></span>

## <a name="introduction"></a><span data-ttu-id="4c024-109">Úvod</span><span class="sxs-lookup"><span data-stu-id="4c024-109">Introduction</span></span>

<span data-ttu-id="4c024-110">V [předchozím kurzu](master-detail-filtering-with-a-dropdownlist-datalist-cs.md) jsme viděli, jak zobrazit hlavní a podrobné sestavy na jedné webové stránce pomocí DropDownList pro zobrazení "hlavních" záznamů a prvku DataList pro zobrazení podrobností.</span><span class="sxs-lookup"><span data-stu-id="4c024-110">In the [preceding tutorial](master-detail-filtering-with-a-dropdownlist-datalist-cs.md) we saw how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details."</span></span> <span data-ttu-id="4c024-111">Dalším běžným vzorem, který se používá pro hlavní a podrobné sestavy, je mít hlavní záznamy na jedné webové stránce a podrobnosti na jiném.</span><span class="sxs-lookup"><span data-stu-id="4c024-111">Another common pattern used for master/detail reports is to have the master records on one web page and the details on another.</span></span> <span data-ttu-id="4c024-112">V předchozím kurzu zobrazení [hlavního/podrobného filtrování na dvou stránkách](../masterdetail/master-detail-filtering-across-two-pages-cs.md) jsme tento model prozkoumali pomocí prvku GridView, který zobrazí všechny dodavatele v systému.</span><span class="sxs-lookup"><span data-stu-id="4c024-112">In the earlier [Master/Detail Filtering Across Two Pages](../masterdetail/master-detail-filtering-across-two-pages-cs.md) tutorial, we examined this pattern using a GridView to display all of the suppliers in the system.</span></span> <span data-ttu-id="4c024-113">Tento prvek GridView obsahuje objekt HyperLinkField, který je vykreslen jako odkaz na druhou stránku, který se předává podél `SupplierID` v řetězci dotazu.</span><span class="sxs-lookup"><span data-stu-id="4c024-113">This GridView included a HyperLinkField, which rendered as a link to a second page, passing along the `SupplierID` in the querystring.</span></span> <span data-ttu-id="4c024-114">Druhá stránka použila prvek GridView k vypsání produktů poskytovaných vybraným dodavatelem.</span><span class="sxs-lookup"><span data-stu-id="4c024-114">The second page used a GridView to list those products provided by the selected supplier.</span></span>

<span data-ttu-id="4c024-115">Tyto dvě a podrobné sestavy lze také provést pomocí prvků DataList a Repeater.</span><span class="sxs-lookup"><span data-stu-id="4c024-115">Such two-page master/detail reports can be accomplished using DataList and Repeater controls as well.</span></span> <span data-ttu-id="4c024-116">Jediným rozdílem je, že prvek DataList ani Repeater neposkytují podporu pro ovládací prvek HyperLinkField.</span><span class="sxs-lookup"><span data-stu-id="4c024-116">The only difference is that neither the DataList nor the Repeater provides support for the HyperLinkField control.</span></span> <span data-ttu-id="4c024-117">Místo toho je nutné přidat webový ovládací prvek hypertextového odkazu nebo ukotvení elementu HTML (`<a>`) v rámci `ItemTemplate`ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="4c024-117">Instead, we must add a HyperLink Web control or an anchor HTML element (`<a>`) within the control's `ItemTemplate`.</span></span> <span data-ttu-id="4c024-118">Vlastnost `NavigateUrl` hypertextového odkazu nebo atribut `href` kotvy lze následně přizpůsobit pomocí deklarativních nebo programových přístupů.</span><span class="sxs-lookup"><span data-stu-id="4c024-118">The HyperLink's `NavigateUrl` property or the anchor's `href` attribute can then be customized using declarative or programmatic approaches.</span></span>

<span data-ttu-id="4c024-119">V tomto kurzu prozkoumáme příklad, který vypíše kategorie v seznamu s odrážkami na jedné stránce pomocí ovládacího prvku Repeater.</span><span class="sxs-lookup"><span data-stu-id="4c024-119">In this tutorial we'll explore an example that lists the categories in a bulleted list on one page using a Repeater control.</span></span> <span data-ttu-id="4c024-120">Každá položka seznamu bude obsahovat název a Popis kategorie s názvem kategorie zobrazeným jako odkaz na druhou stránku.</span><span class="sxs-lookup"><span data-stu-id="4c024-120">Each list item will include the category's name and description, with the category name displayed as a link to a second page.</span></span> <span data-ttu-id="4c024-121">Kliknutím na tento odkaz zobrazíte uživatele na druhou stránku, kde prvek DataList zobrazí tyto produkty, které patří do vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="4c024-121">Clicking on this link will whisk the user to the second page, where a DataList will show those products that belong to the selected category.</span></span>

## <a name="step-1-displaying-the-categories-in-a-bulleted-list"></a><span data-ttu-id="4c024-122">Krok 1: zobrazení kategorií v seznamu s odrážkami</span><span class="sxs-lookup"><span data-stu-id="4c024-122">Step 1: Displaying the Categories in a Bulleted List</span></span>

<span data-ttu-id="4c024-123">Prvním krokem při vytváření libovolné hlavní a podrobné sestavy je spuštění zobrazením "hlavních" záznamů.</span><span class="sxs-lookup"><span data-stu-id="4c024-123">The first step in creating any master/detail report is to start by displaying the "master" records.</span></span> <span data-ttu-id="4c024-124">Naším prvním úkolem je proto zobrazení kategorií na hlavní stránce.</span><span class="sxs-lookup"><span data-stu-id="4c024-124">Therefore, our first task is to display the categories in the "master" page.</span></span> <span data-ttu-id="4c024-125">Otevřete stránku `CategoryListMaster.aspx` ve složce `DataListRepeaterFiltering`, přidejte ovládací prvek Repeater a z inteligentní značky se přihlaste k přidání nového prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="4c024-125">Open the `CategoryListMaster.aspx` page in the `DataListRepeaterFiltering` folder, add a Repeater control, and, from the smart tag, opt to add a new ObjectDataSource.</span></span> <span data-ttu-id="4c024-126">Nakonfigurujte nový prvek ObjectDataSource tak, aby měl přístup k jeho datům z metody `GetCategories` `CategoriesBLL` třídy (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="4c024-126">Configure the new ObjectDataSource so that it accesses its data from the `CategoriesBLL` class's `GetCategories` method (see Figure 1).</span></span>

<span data-ttu-id="4c024-127">[![nakonfigurovat prvek ObjectDataSource na použití metody GetCategories třídy CategoriesBLL](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-127">[![Configure the ObjectDataSource to Use the CategoriesBLL Class's GetCategories Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span></span>

<span data-ttu-id="4c024-128">**Obrázek 1**: Konfigurace prvku ObjectDataSource pro použití metody `GetCategories` `CategoriesBLL` třídy ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="4c024-128">**Figure 1**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class's `GetCategories` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span></span>

<span data-ttu-id="4c024-129">Dále definujte šablony opakování tak, aby se v seznamu s odrážkami zobrazovaly jednotlivé názvy a popisy kategorií jako položka.</span><span class="sxs-lookup"><span data-stu-id="4c024-129">Next, define the Repeater's templates such that it displays each category name and description as an item in a bulleted list.</span></span> <span data-ttu-id="4c024-130">Nedělejme si ještě starosti s tím, že každá kategorie má odkaz na stránku podrobností.</span><span class="sxs-lookup"><span data-stu-id="4c024-130">Let's not yet worry about having each category link to the details page.</span></span> <span data-ttu-id="4c024-131">Následující příklad ukazuje deklarativní označení pro Repeater a ObjectDataSource:</span><span class="sxs-lookup"><span data-stu-id="4c024-131">The following shows the declarative markup for the Repeater and ObjectDataSource:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample1.aspx)]

<span data-ttu-id="4c024-132">Po dokončení tohoto kódu si chvíli počkejte, než se vám zobrazí náš pokrok v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="4c024-132">With this markup complete, take a moment to view our progress through a browser.</span></span> <span data-ttu-id="4c024-133">Jak ukazuje obrázek 2, opakuje se vykreslení v seznamu s odrážkami, který zobrazuje název a popis každé kategorie.</span><span class="sxs-lookup"><span data-stu-id="4c024-133">As Figure 2 shows, the Repeater renders as a bulleted list showing each category's name and description.</span></span>

<span data-ttu-id="4c024-134">[![se každá kategorie zobrazuje jako položka seznamu s odrážkami](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-134">[![Each Category is Displayed as a Bulleted List Item](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span></span>

<span data-ttu-id="4c024-135">**Obrázek 2**: Každá kategorie se zobrazuje jako položka seznamu s odrážkami ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-135">**Figure 2**: Each Category is Displayed as a Bulleted List Item ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span></span>

## <a name="step-2-turning-the-category-name-into-a-link-to-the-details-page"></a><span data-ttu-id="4c024-136">Krok 2: zapnutí názvu kategorie na odkaz na stránku podrobností</span><span class="sxs-lookup"><span data-stu-id="4c024-136">Step 2: Turning the Category Name into a Link to the Details Page</span></span>

<span data-ttu-id="4c024-137">Aby uživatel mohl uživateli zobrazit informace o podrobnostech pro danou kategorii, musíme přidat odkaz na každou položku seznamu s odrážkami, kterou při kliknutí na ni převezme uživatele na druhou stránku (`ProductsForCategoryDetails.aspx`).</span><span class="sxs-lookup"><span data-stu-id="4c024-137">To allow a user to display the "details" information for a given category, we need to add a link to each bulleted list item that, when clicked, will take the user to the second page (`ProductsForCategoryDetails.aspx`).</span></span> <span data-ttu-id="4c024-138">Na druhé stránce se pak zobrazí produkty vybrané kategorie pomocí prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="4c024-138">This second page will then display the products for the selected category using a DataList.</span></span> <span data-ttu-id="4c024-139">Aby bylo možné určit kategorii, jejíž odkaz byl kliknuto, musíme k druhé stránce v rámci určitého mechanismu předat `CategoryID`a kategorie kliknutí.</span><span class="sxs-lookup"><span data-stu-id="4c024-139">In order to determine the category whose link was clicked, we need to pass the clicked category's `CategoryID` to the second page through some mechanism.</span></span> <span data-ttu-id="4c024-140">Nejjednodušší, nejjednodušším způsobem přenosu skalárních dat z jedné stránky na druhý je prostřednictvím řetězce dotazu, což je možnost, kterou v tomto kurzu použijeme.</span><span class="sxs-lookup"><span data-stu-id="4c024-140">The simplest, most straightforward way to transfer scalar data from one page to another is through the querystring, which is the option we'll use in this tutorial.</span></span> <span data-ttu-id="4c024-141">Konkrétně `ProductsForCategoryDetails.aspx` stránka očekává, že vybraná hodnota *`categoryID`* bude předána pomocí pole QueryString s názvem `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="4c024-141">In particular, the `ProductsForCategoryDetails.aspx` page will expect the selected *`categoryID`* value to be passed through a querystring field named `CategoryID`.</span></span> <span data-ttu-id="4c024-142">Pokud například chcete zobrazit produkty pro kategorii nápoje, která má `CategoryID` 1, uživatel navštíví `ProductsForCategoryDetails.aspx?CategoryID=1`.</span><span class="sxs-lookup"><span data-stu-id="4c024-142">For example, to view the products for the Beverages category, which has a `CategoryID` of 1, a user would visit `ProductsForCategoryDetails.aspx?CategoryID=1`.</span></span>

<span data-ttu-id="4c024-143">Pro vytvoření hypertextového odkazu pro každou položku seznamu s odrážkami v OPAKOVAČI musíme přidat webový ovládací prvek hypertextového odkazu nebo prvek ukotvení HTML (`<a>`) do `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="4c024-143">To create a hyperlink for each bulleted list item in the Repeater we need to either add a HyperLink Web control or an HTML anchor element (`<a>`) to the `ItemTemplate`.</span></span> <span data-ttu-id="4c024-144">Ve scénářích, kdy se hypertextový odkaz zobrazí u každého řádku, bude stačit kterýkoli přístup.</span><span class="sxs-lookup"><span data-stu-id="4c024-144">In scenarios where the hyperlink is displayed the same for each row, either approach will suffice.</span></span> <span data-ttu-id="4c024-145">Pro opakuje raději použití prvku ukotvení.</span><span class="sxs-lookup"><span data-stu-id="4c024-145">For Repeaters, I prefer using the anchor element.</span></span> <span data-ttu-id="4c024-146">Chcete-li použít prvek ukotvení, aktualizujte hodnoty ItemTemplate opakování na:</span><span class="sxs-lookup"><span data-stu-id="4c024-146">To use the anchor element, update the Repeater's ItemTemplate to:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample2.aspx)]

<span data-ttu-id="4c024-147">Všimněte si, že `CategoryID` lze vložit přímo do atributu `href` elementu ukotvení; Nicméně k tomu je potřeba určit, aby se hodnota atributu `href`a pomocí apostrofů (a uvozovky), protože metoda `Eval` v atributu `href` omezuje svůj řetězec (`"CategoryID"`) na uvozovky.</span><span class="sxs-lookup"><span data-stu-id="4c024-147">Note that the `CategoryID` can be injected directly within the anchor element's `href` attribute; however, to do so be certain to delimit the `href` attribute's value with apostrophes (and note quotation marks) since the `Eval` method within the `href` attribute delimits its string (`"CategoryID"`) with quotation marks.</span></span> <span data-ttu-id="4c024-148">Alternativně lze místo toho použít webový ovládací prvek hypertextového odkazu:</span><span class="sxs-lookup"><span data-stu-id="4c024-148">Alternatively, a HyperLink Web control can be used instead:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample3.aspx)]

<span data-ttu-id="4c024-149">Všimněte si, jak se statická část adresy URL – `ProductsForCategoryDetails.aspx?CategoryID` – připojí k výsledku `Eval("CategoryID")` přímo v rámci syntaxe DataBinding pomocí zřetězení řetězců.</span><span class="sxs-lookup"><span data-stu-id="4c024-149">Note how the static portion of the URL — `ProductsForCategoryDetails.aspx?CategoryID` — is appended to the result of `Eval("CategoryID")` directly within the databinding syntax using string concatenation.</span></span>

<span data-ttu-id="4c024-150">Jednou z výhod používání ovládacího prvku hypertextový odkaz je to, že se v případě potřeby dá programově přistupovat z obslužné rutiny události `ItemDataBound` Repeater.</span><span class="sxs-lookup"><span data-stu-id="4c024-150">One benefit of using the HyperLink control is that it can be programmatically accessed from the Repeater's `ItemDataBound` event handler, if needed.</span></span> <span data-ttu-id="4c024-151">Například může být vhodné zobrazit název kategorie jako text, nikoli jako odkaz pro kategorie bez přidružených produktů.</span><span class="sxs-lookup"><span data-stu-id="4c024-151">For example, you might want to display the category name as text rather than as a link for categories with no associated products.</span></span> <span data-ttu-id="4c024-152">Tato kontrolu by mohla být provedena programově v obslužné rutině události `ItemDataBound`; u kategorií bez přidružených produktů může být vlastnost `NavigateUrl` hypertextového odkazu nastavena na prázdný řetězec, což vede k vygenerování konkrétního názvu kategorie jako prostý text (nikoli jako odkaz).</span><span class="sxs-lookup"><span data-stu-id="4c024-152">Such a check could be programmatically performed in the `ItemDataBound` event handler; for categories with no associated products, the HyperLink's `NavigateUrl` property could be set to a blank string, thereby resulting in that particular category name rendering as plain text (rather than as a link).</span></span> <span data-ttu-id="4c024-153">Další informace o formátování prvku DataList a zopakování obsahu v závislosti na programové logice prostřednictvím obslužné rutiny události `ItemDataBound` naleznete v tématu o [formátování prvku DataList a Repeater na základě](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) výukového kurzu.</span><span class="sxs-lookup"><span data-stu-id="4c024-153">Refer back to the [Formatting the DataList and Repeater Based Upon Data](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) tutorial for more information on formatting the DataList and Repeater's contents based on programmatic logic through the `ItemDataBound` event handler.</span></span>

<span data-ttu-id="4c024-154">Pokud potřebujete, můžete na stránce použít buď prvek ukotvení, nebo přístup k ovládacímu prvku hypertextový odkaz.</span><span class="sxs-lookup"><span data-stu-id="4c024-154">If you are following along, feel free to use either the anchor element or HyperLink control approach in your page.</span></span> <span data-ttu-id="4c024-155">Bez ohledu na přístup by se při prohlížení stránky v prohlížeči měly všechny názvy kategorií vykreslovat jako odkaz na `ProductsForCategoryDetails.aspx`s předáním příslušné `CategoryID` hodnoty (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="4c024-155">Regardless of the approach, when viewing the page through a browser each category name should be rendered as a link to `ProductsForCategoryDetails.aspx`, passing in the applicable `CategoryID` value (see Figure 3).</span></span>

<span data-ttu-id="4c024-156">[![název kategorie teď odkazují na ProductsForCategoryDetails. aspx.](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-156">[![The Category Names Now Link to ProductsForCategoryDetails.aspx](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span></span>

<span data-ttu-id="4c024-157">**Obrázek 3**: názvy kategorií teď odkazují na `ProductsForCategoryDetails.aspx` ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-157">**Figure 3**: The Category Names Now Link to `ProductsForCategoryDetails.aspx` ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span></span>

## <a name="step-3-listing-the-products-that-belong-to-the-selected-category"></a><span data-ttu-id="4c024-158">Krok 3: seznam produktů, které patří do vybrané kategorie</span><span class="sxs-lookup"><span data-stu-id="4c024-158">Step 3: Listing the Products that Belong to the Selected Category</span></span>

<span data-ttu-id="4c024-159">Po dokončení stránky `CategoryListMaster.aspx` jsme připraveni na to, abychom vám pomohli s implementací stránky podrobností, `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="4c024-159">With the `CategoryListMaster.aspx` page complete, we're ready to turn our attention to implementing the "details" page, `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="4c024-160">Otevřete tuto stránku, přetáhněte prvek DataList z panelu nástrojů do návrháře a nastavte jeho vlastnost `ID` na hodnotu `ProductsInCategory`.</span><span class="sxs-lookup"><span data-stu-id="4c024-160">Open this page, drag a DataList from the Toolbox onto the Designer, and set its `ID` property to `ProductsInCategory`.</span></span> <span data-ttu-id="4c024-161">Dále můžete z inteligentní značky prvku DataList zvolit přidání nového prvku ObjectDataSource na stránku a pojmenování `ProductsInCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="4c024-161">Next, from the DataList's smart tag choose to add a new ObjectDataSource to the page, naming it `ProductsInCategoryDataSource`.</span></span> <span data-ttu-id="4c024-162">Nakonfigurujte ji tak, aby zavolala metodu `GetProductsByCategoryID(categoryID)` třídy `ProductsBLL`; v rozevíracích seznamech na kartách vložení, aktualizace a odstranění nastavte (žádné).</span><span class="sxs-lookup"><span data-stu-id="4c024-162">Configure it such that it calls the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method; set the drop-down lists in the INSERT, UPDATE, and DELETE tabs to (None).</span></span>

<span data-ttu-id="4c024-163">[![nakonfigurovat prvek ObjectDataSource pro použití metody GetProductsByCategoryID (KódKategorie) třídy ProductsBLL](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-163">[![Configure the ObjectDataSource to Use the ProductsBLL Class's GetProductsByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span></span>

<span data-ttu-id="4c024-164">**Obrázek 4**: Konfigurace prvku ObjectDataSource pro použití metody `GetProductsByCategoryID(categoryID)` `ProductsBLL` třídy ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="4c024-164">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class's `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span></span>

<span data-ttu-id="4c024-165">Vzhledem k tomu, že metoda `GetProductsByCategoryID(categoryID)` přijímá vstupní parametr ( *`categoryID`* ), průvodce zvolit zdroj dat nabízí možnost zadat zdroj parametru.</span><span class="sxs-lookup"><span data-stu-id="4c024-165">Since the `GetProductsByCategoryID(categoryID)` method accepts an input parameter (*`categoryID`*), the Choose Data Source wizard offers us an opportunity to specify the parameter's source.</span></span> <span data-ttu-id="4c024-166">Nastavte zdroj parametru na QueryString pomocí `CategoryID`vlastnost QueryStringField.</span><span class="sxs-lookup"><span data-stu-id="4c024-166">Set the parameter source to QueryString using the QueryStringField `CategoryID`.</span></span>

<span data-ttu-id="4c024-167">[![jako zdroj parametru použít KódKategorie pole QueryString](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-167">[![Use the Querystring Field CategoryID as the Parameter's Source](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span></span>

<span data-ttu-id="4c024-168">**Obrázek 5**: použijte pole QueryString `CategoryID` jako zdroj parametru ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-168">**Figure 5**: Use the Querystring Field `CategoryID` as the Parameter's Source ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span></span>

<span data-ttu-id="4c024-169">Jak jsme viděli v předchozích kurzech, po dokončení průvodce vybrat zdroj dat automaticky vytvoří Visual Studio `ItemTemplate` pro prvek DataList, kde jsou uvedeny jednotlivé názvy a hodnoty datových polí.</span><span class="sxs-lookup"><span data-stu-id="4c024-169">As we've seen in previous tutorials, after completing the Choose Data Source wizard, Visual Studio automatically creates an `ItemTemplate` for the DataList that lists each data field name and value.</span></span> <span data-ttu-id="4c024-170">Nahraďte tuto šablonu názvem, který obsahuje jenom název produktu, dodavatele a cenu.</span><span class="sxs-lookup"><span data-stu-id="4c024-170">Replace this template with one that lists only the product's name, supplier, and price.</span></span> <span data-ttu-id="4c024-171">Také nastavte vlastnost `RepeatColumns` prvku DataList na hodnotu 2.</span><span class="sxs-lookup"><span data-stu-id="4c024-171">Also, set the DataList's `RepeatColumns` property to 2.</span></span> <span data-ttu-id="4c024-172">Po těchto změnách by deklarativní označení DataList a ObjectDataSource mělo vypadat podobně jako následující:</span><span class="sxs-lookup"><span data-stu-id="4c024-172">After these changes, your DataList and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample4.aspx)]

<span data-ttu-id="4c024-173">Chcete-li zobrazit tuto stránku v akci, začněte na stránce `CategoryListMaster.aspx`; potom klikněte na odkaz v seznamu kategorie s odrážkami.</span><span class="sxs-lookup"><span data-stu-id="4c024-173">To view this page in action, start from the `CategoryListMaster.aspx` page; next, click on a link in the categories bulleted list.</span></span> <span data-ttu-id="4c024-174">Provedete to tak, že přejdete na `ProductsForCategoryDetails.aspx`a projdete `CategoryID` skrze dotaz QueryString.</span><span class="sxs-lookup"><span data-stu-id="4c024-174">Doing so will take you to `ProductsForCategoryDetails.aspx`, passing along the `CategoryID` through the querystring.</span></span> <span data-ttu-id="4c024-175">`ProductsInCategoryDataSource` ObjectDataSource v `ProductsForCategoryDetails.aspx` pak získá pouze tyto produkty pro určenou kategorii a zobrazí je v prvku DataList, který vykresluje dva produkty na řádek.</span><span class="sxs-lookup"><span data-stu-id="4c024-175">The `ProductsInCategoryDataSource` ObjectDataSource in `ProductsForCategoryDetails.aspx` will then get just those products for the specified category and display them in the DataList, which renders two products per row.</span></span> <span data-ttu-id="4c024-176">Obrázek 6 zobrazuje snímek obrazovky `ProductsForCategoryDetails.aspx` při prohlížení nápojů.</span><span class="sxs-lookup"><span data-stu-id="4c024-176">Figure 6 shows a screenshot of `ProductsForCategoryDetails.aspx` when viewing the Beverages.</span></span>

<span data-ttu-id="4c024-177">[![zobrazeny nápoje, dvě na každý řádek](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-177">[![The Beverages are Displayed, Two per Row](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span></span>

<span data-ttu-id="4c024-178">**Obrázek 6**: zobrazeny nápoje, dva řádky ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="4c024-178">**Figure 6**: The Beverages are Displayed, Two per Row ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span></span>

## <a name="step-4-displaying-category-information-on-productsforcategorydetailsaspx"></a><span data-ttu-id="4c024-179">Krok 4: zobrazení informací o kategorii v ProductsForCategoryDetails. aspx</span><span class="sxs-lookup"><span data-stu-id="4c024-179">Step 4: Displaying Category Information on ProductsForCategoryDetails.aspx</span></span>

<span data-ttu-id="4c024-180">Když uživatel klikne na kategorii v `CategoryListMaster.aspx`, předají se `ProductsForCategoryDetails.aspx` a zobrazí se produkty, které patří do vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="4c024-180">When a user clicks on a category in `CategoryListMaster.aspx`, they are taken to `ProductsForCategoryDetails.aspx` and shown the products that belong to the selected category.</span></span> <span data-ttu-id="4c024-181">V `ProductsForCategoryDetails.aspx` ale neexistují žádné vizuální pomůcky k výběru kategorie.</span><span class="sxs-lookup"><span data-stu-id="4c024-181">However, in `ProductsForCategoryDetails.aspx` there are no visual cues as to what category was selected.</span></span> <span data-ttu-id="4c024-182">Uživatel, který chtěl kliknout na nápoje, ale omylem klikl na koření, nemá žádný způsob, jak svou chybu realizovat, jakmile dosáhnou `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="4c024-182">A user that meant to click Beverages, but accidentally clicked Condiments, has no way of realizing their mistake once they reach `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="4c024-183">Pro zmírnění tohoto potenciálního problému můžeme zobrazit informace o vybrané kategorii – její název a popis, a to v horní části stránky `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="4c024-183">To alleviate this potential problem, we can display information about the selected category — its name and description — at the top of the `ProductsForCategoryDetails.aspx` page.</span></span>

<span data-ttu-id="4c024-184">K tomu je nutné přidat FormView nad ovládací prvek Repeater v `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="4c024-184">To accomplish this, add a FormView above the Repeater control in `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="4c024-185">Dále přidejte nový prvek ObjectDataSource na stránku z inteligentní značky FormView s názvem `CategoryDataSource` a nakonfigurujte ji tak, aby používala metodu `GetCategoryByCategoryID(categoryID)` `CategoriesBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="4c024-185">Next, add a new ObjectDataSource to the page from the FormView's smart tag named `CategoryDataSource` and configure it to use the `CategoriesBLL` class's `GetCategoryByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="4c024-186">[![přístup k informacím o kategorii prostřednictvím metody GetCategoryByCategoryID (KódKategorie) třídy CategoriesBLL](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-186">[![Access Information about the Category through the CategoriesBLL Class's GetCategoryByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span></span>

<span data-ttu-id="4c024-187">**Obrázek 7**: přístup k informacím o kategorii prostřednictvím metody `GetCategoryByCategoryID(categoryID)` `CategoriesBLL` třídy ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="4c024-187">**Figure 7**: Access Information about the Category through the `CategoriesBLL` Class's `GetCategoryByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span></span>

<span data-ttu-id="4c024-188">Stejně jako u `ProductsInCategoryDataSource` ObjectDataSource přidané v kroku 3 Průvodce konfigurací zdroje dat `CategoryDataSource`vyzve nás ke zdroji pro vstupní parametr metody `GetCategoryByCategoryID(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="4c024-188">As with the `ProductsInCategoryDataSource` ObjectDataSource added in Step 3, the `CategoryDataSource`'s Configure Data Source wizard prompts us for a source for the `GetCategoryByCategoryID(categoryID)` method's input parameter.</span></span> <span data-ttu-id="4c024-189">Použijte přesně stejné nastavení jako předtím a nastavte zdroj parametru na hodnotu QueryString a hodnotu vlastnost QueryStringField na `CategoryID` (odkaz zpět na obrázek 5).</span><span class="sxs-lookup"><span data-stu-id="4c024-189">Use the exact same settings as before, setting the parameter source to QueryString and the QueryStringField value to `CategoryID` (refer back to Figure 5).</span></span>

<span data-ttu-id="4c024-190">Po dokončení Průvodce vytvoří Visual Studio automaticky `ItemTemplate`, `EditItemTemplate`a `InsertItemTemplate` pro FormView.</span><span class="sxs-lookup"><span data-stu-id="4c024-190">After completing the wizard, Visual Studio automatically creates an `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate` for the FormView.</span></span> <span data-ttu-id="4c024-191">Vzhledem k tomu, že poskytujeme rozhraní jen pro čtení, můžete `EditItemTemplate` a `InsertItemTemplate`odebrat.</span><span class="sxs-lookup"><span data-stu-id="4c024-191">Since we're providing a read-only interface, feel free to remove the `EditItemTemplate` and `InsertItemTemplate`.</span></span> <span data-ttu-id="4c024-192">Také si můžete bez obav přizpůsobit `ItemTemplate`třídy FormView.</span><span class="sxs-lookup"><span data-stu-id="4c024-192">Also, feel free to customize the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="4c024-193">Po odebrání nadbytečných šablon a přizpůsobení šablony ItemTemplate by měly deklarativní značky FormView a ObjectDataSource vypadat podobně jako následující:</span><span class="sxs-lookup"><span data-stu-id="4c024-193">After removing the superfluous templates and customizing the ItemTemplate, your FormView and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample5.aspx)]

<span data-ttu-id="4c024-194">Obrázek 8 ukazuje snímek obrazovky při prohlížení této stránky prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="4c024-194">Figure 8 shows a screen shot when viewing this page through a browser.</span></span>

> [!NOTE]
> <span data-ttu-id="4c024-195">Kromě třídy FormView jsem také přidali ovládací prvek hypertextový odkaz nad FormView, který převezme uživatele zpět do seznamu kategorií (`CategoryListMaster.aspx`).</span><span class="sxs-lookup"><span data-stu-id="4c024-195">In addition to the FormView, I've also added a HyperLink control above the FormView that will take the user back to the list of categories (`CategoryListMaster.aspx`).</span></span> <span data-ttu-id="4c024-196">Tento odkaz můžete umístit jinam nebo ho zcela vynechat.</span><span class="sxs-lookup"><span data-stu-id="4c024-196">Feel free to place this link elsewhere or to omit it altogether.</span></span>

<span data-ttu-id="4c024-197">[Informace o ![kategorie se teď zobrazují v horní části stránky.](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-197">[![Category Information is Now Displayed at the Top of the Page](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span></span>

<span data-ttu-id="4c024-198">**Obrázek 8**: informace o kategorii se teď zobrazují v horní části stránky ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png)).</span><span class="sxs-lookup"><span data-stu-id="4c024-198">**Figure 8**: Category Information is Now Displayed at the Top of the Page ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span></span>

## <a name="step-5-displaying-a-message-if-no-products-belong-to-the-selected-category"></a><span data-ttu-id="4c024-199">Krok 5: zobrazení zprávy, pokud žádné produkty nepatří do vybrané kategorie</span><span class="sxs-lookup"><span data-stu-id="4c024-199">Step 5: Displaying a Message if No Products Belong to the Selected Category</span></span>

<span data-ttu-id="4c024-200">Stránka `CategoryListMaster.aspx` obsahuje seznam všech kategorií v systému bez ohledu na to, zda jsou k dispozici nějaké produkty.</span><span class="sxs-lookup"><span data-stu-id="4c024-200">The `CategoryListMaster.aspx` page lists all categories in the system, regardless of whether there are any associated products.</span></span> <span data-ttu-id="4c024-201">Pokud uživatel klikne na kategorii bez přidružených produktů, prvek DataList v `ProductsForCategoryDetails.aspx` nebude vykreslen, protože jeho zdroj dat nebude obsahovat žádné položky.</span><span class="sxs-lookup"><span data-stu-id="4c024-201">If a user clicks on a category with no associated products, the DataList in `ProductsForCategoryDetails.aspx` will not be rendered, as its data source will not have any items.</span></span> <span data-ttu-id="4c024-202">Jak jsme viděli v minulých kurzech, prvek GridView poskytuje vlastnost `EmptyDataText`, která se dá použít k určení textové zprávy, která se má zobrazit, pokud ve svém zdroji dat nejsou žádné záznamy.</span><span class="sxs-lookup"><span data-stu-id="4c024-202">As we've seen in past tutorials, the GridView provides an `EmptyDataText` property that can be used to specify a text message to display if there are no records in its data source.</span></span> <span data-ttu-id="4c024-203">Prvek DataList ani Repeater ale takovou vlastnost bohužel neexistují.</span><span class="sxs-lookup"><span data-stu-id="4c024-203">Unfortunately, neither the DataList nor Repeater has such a property.</span></span>

<span data-ttu-id="4c024-204">Aby se zobrazila zpráva informující o uživateli, že pro vybranou kategorii neexistují žádné odpovídající produkty, musíme na stránku přidat ovládací prvek popisek, jehož vlastnost `Text` je přiřazena zprávě, která se zobrazí v případě, že neexistují žádné odpovídající produkty.</span><span class="sxs-lookup"><span data-stu-id="4c024-204">In order to display a message informing the user that there are no matching products for the selected category, we need to add a Label control to the page whose `Text` property is assigned the message to display in the event that there are no matching products.</span></span> <span data-ttu-id="4c024-205">Pak je nutné programově nastavit jeho vlastnost `Visible` na základě toho, zda prvek DataList obsahuje nějaké položky.</span><span class="sxs-lookup"><span data-stu-id="4c024-205">We then need to programmatically set its `Visible` property based on whether or not the DataList contains any items.</span></span>

<span data-ttu-id="4c024-206">Chcete-li to dosáhnout, Začněte přidáním popisku pod prvkem DataList.</span><span class="sxs-lookup"><span data-stu-id="4c024-206">To accomplish this, start by adding a Label beneath the DataList.</span></span> <span data-ttu-id="4c024-207">Vlastnost `ID` nastavte na `NoProductsMessage` a vlastnost `Text` na hodnotu pro vybranou kategorii nejsou k dispozici žádné produkty... Dál je potřeba programově nastavit vlastnost `Visible` tohoto popisku na základě toho, jestli jsou nějaká data vázaná na `ProductsInCategory` DataList.</span><span class="sxs-lookup"><span data-stu-id="4c024-207">Set its `ID` property to `NoProductsMessage` and its `Text` property to "There are no products for the selected category…" Next, we need to programmatically set this Label's `Visible` property based on whether or not any data was bound to the `ProductsInCategory` DataList.</span></span> <span data-ttu-id="4c024-208">Toto přiřazení je nutné provést poté, co byla data svázána s ovládacím prvky DataList.</span><span class="sxs-lookup"><span data-stu-id="4c024-208">This assignment must be made after the data has been bound to the DataList.</span></span> <span data-ttu-id="4c024-209">Pro prvky GridView, DetailsView a FormView jsme mohli vytvořit obslužnou rutinu události pro událost `DataBound` ovládacího prvku, která se aktivuje po dokončení datové vazby.</span><span class="sxs-lookup"><span data-stu-id="4c024-209">For the GridView, DetailsView, and FormView, we could create an event handler for the control's `DataBound` event, which fires after databinding has completed.</span></span> <span data-ttu-id="4c024-210">Prvek DataList ani Repeater však nemá k dispozici událost `DataBound`.</span><span class="sxs-lookup"><span data-stu-id="4c024-210">However, neither the DataList nor the Repeater has a `DataBound` event available.</span></span>

<span data-ttu-id="4c024-211">Pro tento konkrétní příklad můžeme přiřadit vlastnost `Visible` popisku v obslužné rutině události `Page_Load`, protože data budou přiřazena do prvku DataList před událostí `Load` stránky.</span><span class="sxs-lookup"><span data-stu-id="4c024-211">For this particular example we can assign the Label's `Visible` property in the `Page_Load` event handler, since the data will have been assigned to the DataList prior to the page's `Load` event.</span></span> <span data-ttu-id="4c024-212">Tento přístup však nefunguje v obecném případě, protože data z prvku ObjectDataSource mohou být vázána na DataList později v životním cyklu stránky.</span><span class="sxs-lookup"><span data-stu-id="4c024-212">However, this approach would not work in the general case, as the data from the ObjectDataSource might be bound to the DataList later in the page's lifecycle.</span></span> <span data-ttu-id="4c024-213">Například pokud jsou zobrazená data založena na hodnotě v jiném ovládacím prvku, jako je například při zobrazení sestavy hlavní/podrobnosti pomocí ovládacího prvku DropDownList pro uchovávání "hlavních" záznamů, data se nemusí svázat s webovým ovládacím prvkem data, dokud ne`PreRender` fáze v životním cyklu stránky.</span><span class="sxs-lookup"><span data-stu-id="4c024-213">For example, if the displayed data is based upon the value in another control, such as it is when displaying a master/detail report using a DropDownList to hold the "master" records, the data may not rebound to the data Web control until the `PreRender` stage in the page's life cycle.</span></span>

<span data-ttu-id="4c024-214">Jedno řešení, které bude fungovat pro všechny případy, je přiřazení vlastnosti `Visible` k `False` v obslužné rutině události `ItemDataBound` (nebo `ItemCreated`) prvku DataList při vytváření vazby typu položky `Item` nebo `AlternatingItem`.</span><span class="sxs-lookup"><span data-stu-id="4c024-214">One solution which will work for all cases is to assign the `Visible` property to `False` in the DataList's `ItemDataBound` (or `ItemCreated`) event handler when binding an item type of `Item` or `AlternatingItem`.</span></span> <span data-ttu-id="4c024-215">V takovém případě víme, že ve zdroji dat existuje alespoň jedna položka dat, a proto může popisek `NoProductsMessage` skrýt.</span><span class="sxs-lookup"><span data-stu-id="4c024-215">In such a case we know that there is at least one data item in the data source and therefore can hide the `NoProductsMessage` Label.</span></span> <span data-ttu-id="4c024-216">Kromě této obslužné rutiny události potřebujeme také obslužnou rutinu události pro událost `DataBinding` prvku DataList, kde inicializujeme vlastnost `Visible` popisku na `True`.</span><span class="sxs-lookup"><span data-stu-id="4c024-216">In addition to this event handler, we also need an event handler for the DataList's `DataBinding` event, where we initialize the Label's `Visible` property to `True`.</span></span> <span data-ttu-id="4c024-217">Vzhledem k tomu, že událost `DataBinding` je aktivována před `ItemDataBound` událostí, bude zpočátku vlastnost `Visible` popisku nastavena na `True`; Pokud však existují nějaké datové položky, bude nastaveno na `False`.</span><span class="sxs-lookup"><span data-stu-id="4c024-217">Since the `DataBinding` event fires before the `ItemDataBound` events, the Label's `Visible` property will initially be set to `True`; if there are any data items, however, it will be set to `False`.</span></span> <span data-ttu-id="4c024-218">Následující kód implementuje tuto logiku:</span><span class="sxs-lookup"><span data-stu-id="4c024-218">The following code implements this logic:</span></span>

[!code-csharp[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample6.cs)]

<span data-ttu-id="4c024-219">Všechny kategorie v databázi Northwind jsou přidruženy k jednomu nebo více produktům.</span><span class="sxs-lookup"><span data-stu-id="4c024-219">All of the categories in the Northwind database are associated with one or more products.</span></span> <span data-ttu-id="4c024-220">K otestování této funkce jsem ručně upravil (a) databázi Northwind pro tento kurz, a proto znovu přiřadíte všechny produkty přidružené ke kategorii Products (`CategoryID` = 7) do kategorie rybích plodů (`CategoryID` = 8).</span><span class="sxs-lookup"><span data-stu-id="4c024-220">To test this feature, I've manually adjusted the Northwind database for this tutorial, reassigning all products associated with the Produce category (`CategoryID` = 7) to the Seafood category (`CategoryID` = 8).</span></span> <span data-ttu-id="4c024-221">To lze provést z Průzkumník serveru tím, že vyberete nový dotaz a použijete následující příkaz `UPDATE`:</span><span class="sxs-lookup"><span data-stu-id="4c024-221">This can be accomplished from the Server Explorer by choosing New Query and using the following `UPDATE` statement:</span></span>

[!code-sql[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample7.sql)]

<span data-ttu-id="4c024-222">Po aktualizaci databáze se odpovídajícím způsobem vraťte na stránku `CategoryListMaster.aspx` a klikněte na odkaz vytvořit.</span><span class="sxs-lookup"><span data-stu-id="4c024-222">After updating the database accordingly, return to the `CategoryListMaster.aspx` page and click on the Produce link.</span></span> <span data-ttu-id="4c024-223">Vzhledem k tomu, že už neexistují žádné produkty patřící do kategorie produktů, měli byste vidět, že pro vybranou kategorii nejsou žádné produkty... zpráva, jak je znázorněno na obrázku 9.</span><span class="sxs-lookup"><span data-stu-id="4c024-223">Since there are no longer any products belonging to the Produce category, you should see the "There are no products for the selected category…" message, as shown in Figure 9.</span></span>

<span data-ttu-id="4c024-224">[![se zobrazí zpráva, pokud nejsou k dispozici žádné produkty patřící do vybrané kategorie.](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="4c024-224">[![A Message is Displayed if there are No Products Belonging to the Selected Category](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span></span>

<span data-ttu-id="4c024-225">**Obrázek 9**: Pokud nejsou k dispozici žádné produkty patřící do vybrané kategorie ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png)), zobrazí se zpráva.</span><span class="sxs-lookup"><span data-stu-id="4c024-225">**Figure 9**: A Message is Displayed if there are No Products Belonging to the Selected Category ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span></span>

## <a name="summary"></a><span data-ttu-id="4c024-226">Souhrn</span><span class="sxs-lookup"><span data-stu-id="4c024-226">Summary</span></span>

<span data-ttu-id="4c024-227">I když se v sestavách a podrobností můžou zobrazovat hlavní a podrobné záznamy na jedné stránce, na mnoha webech, které jsou oddělené na dvou webových stránkách.</span><span class="sxs-lookup"><span data-stu-id="4c024-227">While master/detail reports can display both the master and detail records on a single page, in many websites they are separated out across two web pages.</span></span> <span data-ttu-id="4c024-228">V tomto kurzu jsme se podívali na to, jak implementovat takovou sestavu hlavní/podrobnosti s kategoriemi uvedenými v seznamu s odrážkami pomocí opakovače na webové stránce hlavní a s přidruženými produkty uvedenými na stránce Podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="4c024-228">In this tutorial we looked at how to implement such a master/detail report by having the categories listed in a bulleted list using a Repeater in the "master" web page and the associated products listed in the "details" page.</span></span> <span data-ttu-id="4c024-229">Každá položka seznamu na hlavní webové stránce obsahovala odkaz na stránku s podrobnostmi, která prošla `CategoryID` hodnotou řádku.</span><span class="sxs-lookup"><span data-stu-id="4c024-229">Each list item in the master web page contained a link to the details page that passed along the row's `CategoryID` value.</span></span>

<span data-ttu-id="4c024-230">Na stránce podrobností načítající tyto produkty pro zadaného dodavatele byl provedeno prostřednictvím metody `GetProductsByCategoryID(categoryID)` `ProductsBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="4c024-230">In the details page retrieving those products for the specified supplier was accomplished through the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="4c024-231">Hodnota parametru *`categoryID`* byla určena deklarativně pomocí hodnoty `CategoryID` QueryString jako zdroje parametru.</span><span class="sxs-lookup"><span data-stu-id="4c024-231">The *`categoryID`* parameter value was specified declaratively using the `CategoryID` querystring value as the parameter source.</span></span> <span data-ttu-id="4c024-232">Zjistili jsme také, jak zobrazit podrobnosti o kategorii na stránce podrobností pomocí FormView a jak zobrazit zprávu, pokud neexistovaly žádné produkty patřící do vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="4c024-232">We also looked at how to display category details in the details page using a FormView and how to display a message if there were no products belonging to the selected category.</span></span>

<span data-ttu-id="4c024-233">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="4c024-233">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="4c024-234">O autorovi</span><span class="sxs-lookup"><span data-stu-id="4c024-234">About the Author</span></span>

<span data-ttu-id="4c024-235">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="4c024-235">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="4c024-236">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="4c024-236">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="4c024-237">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="4c024-237">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="4c024-238">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="4c024-238">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="4c024-239">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="4c024-239">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="4c024-240">Zvláštní díky...</span><span class="sxs-lookup"><span data-stu-id="4c024-240">Special Thanks To…</span></span>

<span data-ttu-id="4c024-241">Tato řada kurzů byla přezkoumána mnoha užitečnými kontrolory.</span><span class="sxs-lookup"><span data-stu-id="4c024-241">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="4c024-242">Kontroloři vedoucích k tomuto kurzu byli Zack Novotný a Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="4c024-242">Lead reviewers for this tutorial were Zack Jones and Liz Shulok.</span></span> <span data-ttu-id="4c024-243">Uvažujete o přezkoumání mých nadcházejících článků na webu MSDN?</span><span class="sxs-lookup"><span data-stu-id="4c024-243">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="4c024-244">Pokud ano, vyřaďte mi řádek na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="4c024-244">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4c024-245">[Předchozí](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
> [Další](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span><span class="sxs-lookup"><span data-stu-id="4c024-245">[Previous](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
[Next](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span></span>
