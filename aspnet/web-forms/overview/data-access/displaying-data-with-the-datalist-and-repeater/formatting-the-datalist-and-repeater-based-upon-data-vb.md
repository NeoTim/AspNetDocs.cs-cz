---
uid: web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-vb
title: Formátování prvku DataList a Repeater na základě dat (VB) | Microsoft Docs
author: rick-anderson
description: V tomto kurzu budeme postupovat podle příkladů formátování vzhledu ovládacích prvků DataList a Repeater, a to buď pomocí funkcí formátování s...
ms.author: riande
ms.date: 09/13/2006
ms.assetid: e2f401ae-37bb-4b19-aa97-d6b385d40f88
msc.legacyurl: /web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-vb
msc.type: authoredcontent
ms.openlocfilehash: c9b60e4dacd992962942034e84c01cb82e039c81
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/28/2019
ms.locfileid: "74636727"
---
# <a name="formatting-the-datalist-and-repeater-based-upon-data-vb"></a><span data-ttu-id="a97f9-103">Formátování ovládacích prvků DataList a Repeater na základě dat (VB)</span><span class="sxs-lookup"><span data-stu-id="a97f9-103">Formatting the DataList and Repeater Based Upon Data (VB)</span></span>

<span data-ttu-id="a97f9-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a97f9-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a97f9-105">[Stáhnout ukázkovou aplikaci](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_VB.exe) nebo [Stáhnout PDF](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/datatutorial30vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a97f9-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_VB.exe) or [Download PDF](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/datatutorial30vb1.pdf)</span></span>

> <span data-ttu-id="a97f9-106">V tomto kurzu si projdeme příklady, jak naformátovat vzhled ovládacích prvků DataList a Repeater, a to buď pomocí funkcí formátování v rámci šablon, nebo pomocí zpracování události DataBound.</span><span class="sxs-lookup"><span data-stu-id="a97f9-106">In this tutorial we'll step through examples of how we format the appearance of the DataList and Repeater controls, either by using formatting functions within templates or by handling the DataBound event.</span></span>

## <a name="introduction"></a><span data-ttu-id="a97f9-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="a97f9-107">Introduction</span></span>

<span data-ttu-id="a97f9-108">Jak jsme viděli v předchozím kurzu, DataList nabízí řadu vlastností souvisejících s Style, které mají vliv na jeho vzhled.</span><span class="sxs-lookup"><span data-stu-id="a97f9-108">As we saw in the preceding tutorial, the DataList offers a number of style-related properties that affect its appearance.</span></span> <span data-ttu-id="a97f9-109">Konkrétně jsme viděli, jak přiřadit výchozí třídy CSS k vlastnostem DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`a `SelectedItemStyle`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-109">In particular, we saw how to assign default CSS classes to the DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`, and `SelectedItemStyle` properties.</span></span> <span data-ttu-id="a97f9-110">Kromě těchto čtyř vlastností prvek DataList zahrnuje řadu dalších vlastností souvisejících s Style, například `Font`, `ForeColor`, `BackColor`a `BorderWidth`pro pojmenování několika.</span><span class="sxs-lookup"><span data-stu-id="a97f9-110">In addition to these four properties, the DataList includes a number of other style-related properties, such as `Font`, `ForeColor`, `BackColor`, and `BorderWidth`, to name a few.</span></span> <span data-ttu-id="a97f9-111">Ovládací prvek Repeater neobsahuje žádné vlastnosti související s Style.</span><span class="sxs-lookup"><span data-stu-id="a97f9-111">The Repeater control does not contain any style-related properties.</span></span> <span data-ttu-id="a97f9-112">Jakékoli takové nastavení stylu musí být provedeno přímo v rámci značky v šablonách Repeater.</span><span class="sxs-lookup"><span data-stu-id="a97f9-112">Any such style settings must be made directly within the markup in the Repeater s templates.</span></span>

<span data-ttu-id="a97f9-113">Často ale, jak mají být data naformátovaná, závisí na samotných datech.</span><span class="sxs-lookup"><span data-stu-id="a97f9-113">Often, though, how data should be formatted depends on the data itself.</span></span> <span data-ttu-id="a97f9-114">Například při výpisu produktů může být vhodné zobrazit informace o produktech v barvě šedé barvy písma, pokud je přerušit, nebo můžete chtít zvýraznit `UnitsInStock` hodnotu, pokud je nula.</span><span class="sxs-lookup"><span data-stu-id="a97f9-114">For example, when listing products we might want to display the product information in a light gray font color if it is discontinued, or we may want to highlight the `UnitsInStock` value if it is zero.</span></span> <span data-ttu-id="a97f9-115">Jak jsme viděli v předchozích kurzech, GridView, DetailsView a FormView nabízí dva různé způsoby formátování jejich vzhledu na základě jejich dat:</span><span class="sxs-lookup"><span data-stu-id="a97f9-115">As we saw in previous tutorials, the GridView, DetailsView, and FormView offer two distinct ways to format their appearance based on their data:</span></span>

- <span data-ttu-id="a97f9-116">**Událost `DataBound`** vytvoří obslužnou rutinu události pro příslušnou událost `DataBound`, která se aktivuje poté, co byla data svázána s každou položkou (pro ovládací prvek GridView, že se jednalo o událost `RowDataBound`; u prvku DataList a v případě opakování je `ItemDataBound` událost).</span><span class="sxs-lookup"><span data-stu-id="a97f9-116">**The `DataBound` event** create an event handler for the appropriate `DataBound` event, which fires after the data has been bound to each item (for the GridView it was the `RowDataBound` event; for the DataList and Repeater it is the `ItemDataBound` event).</span></span> <span data-ttu-id="a97f9-117">V této obslužné rutině události lze pouze prověřit data a naformátovat provedené rozhodnutí.</span><span class="sxs-lookup"><span data-stu-id="a97f9-117">In that event handler, the data just bound can be examined and formatting decisions made.</span></span> <span data-ttu-id="a97f9-118">Tuto techniku jsme zkoumali ve [vlastním formátování na základě kurzu dat](../custom-formatting/custom-formatting-based-upon-data-vb.md) .</span><span class="sxs-lookup"><span data-stu-id="a97f9-118">We examined this technique in the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-vb.md) tutorial.</span></span>
- <span data-ttu-id="a97f9-119">**Formátování funkcí v šablonách** při použití vlastností TemplateField v ovládacím prvku DetailsView nebo GridView nebo šabloně v ovládacím prvku FormView můžeme přidat funkci formátování do třídy ASP.NET stránky s kódem na pozadí, vrstvy obchodní logiky nebo jakékoli jiné knihovny tříd, která je přístupná z webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="a97f9-119">**Formatting Functions in Templates** when using TemplateFields in the DetailsView or GridView controls, or a template in the FormView control, we can add a formatting function to the ASP.NET page s code-behind class, the Business Logic Layer, or any other class library that is accessible from the web application.</span></span> <span data-ttu-id="a97f9-120">Tato funkce formátování může přijmout libovolný počet vstupních parametrů, ale musí vrátit kód HTML, který se má vykreslit v šabloně.</span><span class="sxs-lookup"><span data-stu-id="a97f9-120">This formatting function can accept an arbitrary number of input parameters, but must return the HTML to render in the template.</span></span> <span data-ttu-id="a97f9-121">Funkce formátování byly nejprve přezkoumány v kurzu [použití templatefields v ovládacím prvku GridView](../custom-formatting/using-templatefields-in-the-gridview-control-vb.md) .</span><span class="sxs-lookup"><span data-stu-id="a97f9-121">Formatting functions were first examined in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-vb.md) tutorial.</span></span>

<span data-ttu-id="a97f9-122">Obě tyto techniky formátování jsou k dispozici společně s ovládacími prvky DataList a Repeater.</span><span class="sxs-lookup"><span data-stu-id="a97f9-122">Both of these formatting techniques are available with the DataList and Repeater controls.</span></span> <span data-ttu-id="a97f9-123">V tomto kurzu budeme procházet příklady pomocí obou postupů pro oba ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="a97f9-123">In this tutorial we'll step through examples using both techniques for both controls.</span></span>

## <a name="using-theitemdataboundevent-handler"></a><span data-ttu-id="a97f9-124">Použití obslužné rutiny události`ItemDataBound`</span><span class="sxs-lookup"><span data-stu-id="a97f9-124">Using the`ItemDataBound`Event Handler</span></span>

<span data-ttu-id="a97f9-125">Když jsou data svázána s ovládacím prvkem DataList, buď z ovládacího prvku zdroje dat, nebo prostřednictvím programově přiřazují data do vlastnosti `DataSource` ovládacího prvku a voláním jeho metody `DataBind()`, aktivuje se událost DataList s `DataBinding`, zdroj dat se zobrazí ve výčtu a každý datový záznam je svázán s prvkem DataList.</span><span class="sxs-lookup"><span data-stu-id="a97f9-125">When data is bound to a DataList, either from a data source control or through programmatically assigning data to the control s `DataSource` property and calling its `DataBind()` method, the DataList s `DataBinding` event fires, the data source enumerated, and each data record is bound to the DataList.</span></span> <span data-ttu-id="a97f9-126">Pro každý záznam ve zdroji dat vytvoří prvek DataList objekt [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) , který je následně svázán s aktuálním záznamem.</span><span class="sxs-lookup"><span data-stu-id="a97f9-126">For each record in the data source, the DataList creates a [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) object that is then bound to the current record.</span></span> <span data-ttu-id="a97f9-127">Během tohoto procesu DataList vyvolá dvě události:</span><span class="sxs-lookup"><span data-stu-id="a97f9-127">During this process, the DataList raises two events:</span></span>

- <span data-ttu-id="a97f9-128">**`ItemCreated`** aktivovaná po vytvoření `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="a97f9-128">**`ItemCreated`** fires after the `DataListItem` has been created</span></span>
- <span data-ttu-id="a97f9-129">**`ItemDataBound`** aktivuje se po vazbě aktuálního záznamu na `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="a97f9-129">**`ItemDataBound`** fires after the current record has been bound to the `DataListItem`</span></span>

<span data-ttu-id="a97f9-130">Následující kroky popisují proces vytváření datových vazeb pro ovládací prvek DataList.</span><span class="sxs-lookup"><span data-stu-id="a97f9-130">The following steps outline the data binding process for the DataList control.</span></span>

1. <span data-ttu-id="a97f9-131">[Událost`DataBinding`](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) DataList se aktivuje.</span><span class="sxs-lookup"><span data-stu-id="a97f9-131">The DataList s [`DataBinding` event](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) fires</span></span>
2. <span data-ttu-id="a97f9-132">Data jsou svázána s ovládacím prvky DataList</span><span class="sxs-lookup"><span data-stu-id="a97f9-132">The data is bound to the DataList</span></span>  
  
   <span data-ttu-id="a97f9-133">Pro každý záznam ve zdroji dat</span><span class="sxs-lookup"><span data-stu-id="a97f9-133">For each record in the data source</span></span> 

    1. <span data-ttu-id="a97f9-134">Vytvoření objektu `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="a97f9-134">Create a `DataListItem` object</span></span>
    2. <span data-ttu-id="a97f9-135">Vyvolat [událost`ItemCreated`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span><span class="sxs-lookup"><span data-stu-id="a97f9-135">Fire the [`ItemCreated` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span></span>
    3. <span data-ttu-id="a97f9-136">Navázání záznamu na `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="a97f9-136">Bind the record to the `DataListItem`</span></span>
    4. <span data-ttu-id="a97f9-137">Vyvolat [událost`ItemDataBound`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span><span class="sxs-lookup"><span data-stu-id="a97f9-137">Fire the [`ItemDataBound` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span></span>
    5. <span data-ttu-id="a97f9-138">Přidání `DataListItem` do kolekce `Items`</span><span class="sxs-lookup"><span data-stu-id="a97f9-138">Add the `DataListItem` to the `Items` collection</span></span>

<span data-ttu-id="a97f9-139">Při vázání dat k ovládacímu prvku Repeater postupuje přes přesně stejné pořadí kroků.</span><span class="sxs-lookup"><span data-stu-id="a97f9-139">When binding data to the Repeater control, it progresses through the exact same sequence of steps.</span></span> <span data-ttu-id="a97f9-140">Jediným rozdílem je, že se místo vytvoření instancí `DataListItem` používá Repeater [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span><span class="sxs-lookup"><span data-stu-id="a97f9-140">The only difference is that instead of `DataListItem` instances being created, the Repeater uses [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span></span>

> [!NOTE]
> <span data-ttu-id="a97f9-141">Čtečka bystří mohla zaznamenat mírnou anomálii mezi sekvencí kroků, které se zobrazí, když jsou prvky DataList a Repeater svázány s daty versus při vázání prvku GridView na data.</span><span class="sxs-lookup"><span data-stu-id="a97f9-141">The astute reader may have noticed a slight anomaly between the sequence of steps that transpire when the DataList and Repeater are bound to data versus when the GridView is bound to data.</span></span> <span data-ttu-id="a97f9-142">Na konci procesu vytváření datových vazeb prvek GridView Vyvolá událost `DataBound`; Nicméně ovládací prvek DataList ani Repeater takové události neexistují.</span><span class="sxs-lookup"><span data-stu-id="a97f9-142">At the tail end of the data binding process, the GridView raises the `DataBound` event; however, neither the DataList nor Repeater control have such an event.</span></span> <span data-ttu-id="a97f9-143">Důvodem je to, že ovládací prvky DataList a Repeater byly vytvořeny zpátky v časovém limitu ASP.NET 1. x před tím, než se vzorek obslužné rutiny události před a po úrovni stala běžným.</span><span class="sxs-lookup"><span data-stu-id="a97f9-143">This is because the DataList and Repeater controls were created back in the ASP.NET 1.x timeframe, before the pre- and post-level event handler pattern had become common.</span></span>

<span data-ttu-id="a97f9-144">Podobně jako u prvku GridView, jedna možnost pro formátování na základě dat je vytvořit obslužnou rutinu události pro událost `ItemDataBound`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-144">Like with the GridView, one option for formatting based on the data is to create an event handler for the `ItemDataBound` event.</span></span> <span data-ttu-id="a97f9-145">Tato obslužná rutina události by zkontrolovala data, která byla právě svázána s `DataListItem` nebo `RepeaterItem` a mají vliv na formátování ovládacího prvku podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="a97f9-145">This event handler would inspect the data that had just been bound to the `DataListItem` or `RepeaterItem` and affect the formatting of the control as needed.</span></span>

<span data-ttu-id="a97f9-146">U ovládacího prvku DataList lze formátování změn pro celou položku implementovat pomocí vlastností souvisejících s `DataListItem` s, které zahrnují standardní `Font`, `ForeColor`, `BackColor`, `CssClass`a tak dále.</span><span class="sxs-lookup"><span data-stu-id="a97f9-146">For the DataList control, formatting changes for the entire item can be implemented using the `DataListItem` s style-related properties, which include the standard `Font`, `ForeColor`, `BackColor`, `CssClass`, and so on.</span></span> <span data-ttu-id="a97f9-147">Abychom ovlivnili formátování konkrétního webového ovládacího prvku v rámci šablony DataList s, potřebujeme programově přistupovat k těmto webovým ovládacím prvkům a upravovat jejich styly.</span><span class="sxs-lookup"><span data-stu-id="a97f9-147">To affect the formatting of particular Web controls within the DataList s template, we need to programmatically access and modify the style of those Web controls.</span></span> <span data-ttu-id="a97f9-148">Zjistili jsme, jak to udělat zpátky ve *vlastním formátování na základě kurzu dat* .</span><span class="sxs-lookup"><span data-stu-id="a97f9-148">We saw how to accomplish this back in the *Custom Formatting Based Upon Data* tutorial.</span></span> <span data-ttu-id="a97f9-149">Stejně jako ovládací prvek Repeater, třída `RepeaterItem` nemá žádné vlastnosti související se styly; Proto všechny změny stylu související se stylem `RepeaterItem` v obslužné rutině události `ItemDataBound` musí být provedeny programově při přístupu k webovým ovládacím prvkům a jejich aktualizace v rámci šablony.</span><span class="sxs-lookup"><span data-stu-id="a97f9-149">Like the Repeater control, the `RepeaterItem` class has no style-related properties; therefore, all style-related changes made to a `RepeaterItem` in the `ItemDataBound` event handler must be done by programmatically accessing and updating Web controls within the template.</span></span>

<span data-ttu-id="a97f9-150">Vzhledem k tomu, že je způsob formátování `ItemDataBound` pro prvky DataList a Repeat prakticky identický, náš příklad se soustředí na použití prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="a97f9-150">Since the `ItemDataBound` formatting technique for the DataList and Repeater are virtually identical, our example will focus on using the DataList.</span></span>

## <a name="step-1-displaying-product-information-in-the-datalist"></a><span data-ttu-id="a97f9-151">Krok 1: zobrazení informací o produktu v prvku DataList</span><span class="sxs-lookup"><span data-stu-id="a97f9-151">Step 1: Displaying Product Information in the DataList</span></span>

<span data-ttu-id="a97f9-152">Než se obáváme formátování, nechte nejdřív vytvořit stránku, která používá DataList k zobrazení informací o produktu.</span><span class="sxs-lookup"><span data-stu-id="a97f9-152">Before we worry about the formatting, let s first create a page that uses a DataList to display product information.</span></span> <span data-ttu-id="a97f9-153">V [předchozím kurzu](displaying-data-with-the-datalist-and-repeater-controls-vb.md) jsme vytvořili prvek DataList, jehož `ItemTemplate` zobrazuje každý název produktu, kategorii, dodavatele, množství na jednotku a cenu.</span><span class="sxs-lookup"><span data-stu-id="a97f9-153">In the [previous tutorial](displaying-data-with-the-datalist-and-repeater-controls-vb.md) we created a DataList whose `ItemTemplate` displayed each product s name, category, supplier, quantity per unit, and price.</span></span> <span data-ttu-id="a97f9-154">Tuto funkci teď můžete opakovat v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="a97f9-154">Let s repeat this functionality here in this tutorial.</span></span> <span data-ttu-id="a97f9-155">K tomuto účelu můžete buď znovu vytvořit DataList a jeho prvek ObjectDataSource od začátku, nebo můžete zkopírovat tyto ovládací prvky ze stránky vytvořené v předchozím kurzu (`Basics.aspx`) a vložit je na stránku tohoto kurzu (`Formatting.aspx`).</span><span class="sxs-lookup"><span data-stu-id="a97f9-155">To accomplish this, you can either recreate the DataList and its ObjectDataSource from scratch, or you can copy over those controls from the page created in the previous tutorial (`Basics.aspx`) and paste them into the page for this tutorial (`Formatting.aspx`).</span></span>

<span data-ttu-id="a97f9-156">Po replikaci funkcí DataList a ObjectDataSource z `Basics.aspx` do `Formatting.aspx`chvíli počkejte, aby se změnila vlastnost `ID` prvku DataList s `DataList1` na výstižnější `ItemDataBoundFormattingExample`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-156">Once you have replicated the DataList and ObjectDataSource functionality from `Basics.aspx` into `Formatting.aspx`, take a moment to change the DataList s `ID` property from `DataList1` to a more descriptive `ItemDataBoundFormattingExample`.</span></span> <span data-ttu-id="a97f9-157">Dále Zobrazte prvek DataList v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="a97f9-157">Next, view the DataList in a browser.</span></span> <span data-ttu-id="a97f9-158">Jak ukazuje obrázek 1, jediný rozdíl formátování mezi jednotlivými produkty je to, že barvy pozadí se liší.</span><span class="sxs-lookup"><span data-stu-id="a97f9-158">As Figure 1 shows, the only formatting difference between each product is that the background color alternates.</span></span>

<span data-ttu-id="a97f9-159">[![jsou produkty uvedeny v ovládacím prvku DataList](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a97f9-159">[![The Products are Listed in the DataList Control](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image1.png)</span></span>

<span data-ttu-id="a97f9-160">**Obrázek 1**: produkty jsou uvedeny v ovládacím prvku DataList ([kliknutím zobrazíte obrázek v plné velikosti](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image3.png)).</span><span class="sxs-lookup"><span data-stu-id="a97f9-160">**Figure 1**: The Products are Listed in the DataList Control ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image3.png))</span></span>

<span data-ttu-id="a97f9-161">Pro tento kurz si naformátujte prvek DataList tak, že všechny produkty s cenou menší než $20,00 budou mít název a bude zvýrazněna žlutá cena.</span><span class="sxs-lookup"><span data-stu-id="a97f9-161">For this tutorial, let s format the DataList such that any products with a price less than $20.00 will have both its name and unit price highlighted yellow.</span></span>

## <a name="step-2-programmatically-determining-the-value-of-the-data-in-the-itemdatabound-event-handler"></a><span data-ttu-id="a97f9-162">Krok 2: určení hodnoty dat v obslužné rutině události ItemDataBound prostřednictvím kódu programu</span><span class="sxs-lookup"><span data-stu-id="a97f9-162">Step 2: Programmatically Determining the Value of the Data in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="a97f9-163">Vzhledem k tomu, že se vlastní formátování používá jenom u produktů s cenou $20,00, musí být schopné určit každou cenu produktu.</span><span class="sxs-lookup"><span data-stu-id="a97f9-163">Since only those products with a price under $20.00 will have the custom formatting applied, we must be able to determine each product s price.</span></span> <span data-ttu-id="a97f9-164">Při vázání dat k prvku DataList vytvoří prvek DataList záznamy ve zdroji dat a pro každý záznam vytvoří instanci `DataListItem` a naváže záznam zdroje dat k `DataListItem`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-164">When binding data to a DataList, the DataList enumerates the records in its data source and, for each record, creates a `DataListItem` instance, binding the data source record to the `DataListItem`.</span></span> <span data-ttu-id="a97f9-165">Po vazbě konkrétního záznamu s objektem `DataListItem` je vyvolána událost DataList s `ItemDataBound`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-165">After the particular record s data has been bound to the current `DataListItem` object, the DataList s `ItemDataBound` event is fired.</span></span> <span data-ttu-id="a97f9-166">Pro tuto událost můžeme vytvořit obslužnou rutinu události pro kontrolu hodnot dat pro aktuální `DataListItem` a na základě těchto hodnot udělat změny formátování, které jsou potřeba.</span><span class="sxs-lookup"><span data-stu-id="a97f9-166">We can create an event handler for this event to inspect the data values for the current `DataListItem` and, based upon those values, make any formatting changes necessary.</span></span>

<span data-ttu-id="a97f9-167">Vytvořte událost `ItemDataBound` pro prvek DataList a přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="a97f9-167">Create an `ItemDataBound` event for the DataList and add the following code:</span></span>

[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample1.vb)]

<span data-ttu-id="a97f9-168">I když je koncept a sémantika v rámci obslužné rutiny události `ItemDataBound` DataList, stejná jako ta, kterou používá obslužná rutina události `RowDataBound` GridView s, ve *vlastním formátování na základě kurzu dat* , syntaxe se mírně liší.</span><span class="sxs-lookup"><span data-stu-id="a97f9-168">While the concept and semantics behind the DataList s `ItemDataBound` event handler are the same as those used by the GridView s `RowDataBound` event handler in the *Custom Formatting Based Upon Data* tutorial, the syntax differs slightly.</span></span> <span data-ttu-id="a97f9-169">Při aktivaci události `ItemDataBound` je `DataListItem` pouze vázaný na data předána do odpovídající obslužné rutiny události prostřednictvím `e.Item` (namísto `e.Row`, jako u obslužné rutiny události prvku GridView s `RowDataBound`).</span><span class="sxs-lookup"><span data-stu-id="a97f9-169">When the `ItemDataBound` event fires, the `DataListItem` just bound to data is passed into corresponding event handler via `e.Item` (instead of `e.Row`, as with the GridView s `RowDataBound` event handler).</span></span> <span data-ttu-id="a97f9-170">Obslužná rutina události `ItemDataBound` DataList se aktivuje pro *každý* řádek přidaný do prvku DataList, včetně řádků záhlaví, řádků zápatí a oddělovacích řádků.</span><span class="sxs-lookup"><span data-stu-id="a97f9-170">The DataList s `ItemDataBound` event handler fires for *each* row added to the DataList, including header rows, footer rows, and separator rows.</span></span> <span data-ttu-id="a97f9-171">Informace o produktu jsou však vázány pouze na řádky dat.</span><span class="sxs-lookup"><span data-stu-id="a97f9-171">However, the product information is only bound to the data rows.</span></span> <span data-ttu-id="a97f9-172">Proto při použití události `ItemDataBound` ke kontrole dat vázaných na prvek DataList musíme nejdřív zkontrolovat, že budeme znovu pracovat s datovou položkou.</span><span class="sxs-lookup"><span data-stu-id="a97f9-172">Therefore, when using the `ItemDataBound` event to inspect the data bound to the DataList, we need to first ensure that we re working with a data item.</span></span> <span data-ttu-id="a97f9-173">Můžete to provést tak, že zkontrolujete [vlastnost`ItemType`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx)`DataListItem` s, která může mít jednu z [následujících osmi hodnot](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span><span class="sxs-lookup"><span data-stu-id="a97f9-173">This can be accomplished by checking the `DataListItem` s [`ItemType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx), which can have one of [the following eight values](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span></span>

- `AlternatingItem`
- `EditItem`
- `Footer`
- `Header`
- `Item`
- `Pager`
- `SelectedItem`
- `Separator`

<span data-ttu-id="a97f9-174">`Item` i `AlternatingItem``DataListItem` s strukturu datové položky DataList s.</span><span class="sxs-lookup"><span data-stu-id="a97f9-174">Both `Item` and `AlternatingItem``DataListItem` s makeup the DataList s data items.</span></span> <span data-ttu-id="a97f9-175">Za předpokladu, že provedeme `Item` nebo `AlternatingItem`, přistupujeme ke skutečné instanci `ProductsRow`, která byla svázána s aktuálním `DataListItem`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-175">Assuming we re working with an `Item` or `AlternatingItem`, we access the actual `ProductsRow` instance that was bound to the current `DataListItem`.</span></span> <span data-ttu-id="a97f9-176">Vlastnost `DataListItem` s [`DataItem`](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) obsahuje odkaz na objekt `DataRowView`, jehož vlastnost `Row` poskytuje odkaz na skutečný objekt `ProductsRow`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-176">The `DataListItem` s [`DataItem` property](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) contains a reference to the `DataRowView` object, whose `Row` property provides a reference to the actual `ProductsRow` object.</span></span>

<span data-ttu-id="a97f9-177">Potom zkontrolujeme vlastnost `ProductsRow` instance s `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-177">Next, we check the `ProductsRow` instance s `UnitPrice` property.</span></span> <span data-ttu-id="a97f9-178">Vzhledem k tomu, že pole `UnitPrice` tabulky produktů umožňuje `NULL` hodnoty, před pokusem o přístup k vlastnosti `UnitPrice` byste nejprve měli zjistit, zda má `NULL` hodnotu pomocí metody `IsUnitPriceNull()`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-178">Since the Products table s `UnitPrice` field allows `NULL` values, before attempting to access the `UnitPrice` property we should first check to see if it has a `NULL` value using the `IsUnitPriceNull()` method.</span></span> <span data-ttu-id="a97f9-179">Pokud hodnota `UnitPrice` není `NULL`, zkontrolujeme, jestli je méně než $20,00.</span><span class="sxs-lookup"><span data-stu-id="a97f9-179">If the `UnitPrice` value is not `NULL`, we then check to see if it s less than $20.00.</span></span> <span data-ttu-id="a97f9-180">Pokud je to ve skutečnosti $20,00, je nutné použít vlastní formátování.</span><span class="sxs-lookup"><span data-stu-id="a97f9-180">If it is indeed under $20.00, we then need to apply the custom formatting.</span></span>

## <a name="step-3-highlighting-the-product-s-name-and-price"></a><span data-ttu-id="a97f9-181">Krok 3: zvýraznění názvu a ceny produktu</span><span class="sxs-lookup"><span data-stu-id="a97f9-181">Step 3: Highlighting the Product s Name and Price</span></span>

<span data-ttu-id="a97f9-182">Jakmile zjistíte, že cena za produkt je menší než $20,00, vše zůstává pro zdůraznění jejího názvu a ceny.</span><span class="sxs-lookup"><span data-stu-id="a97f9-182">Once we know that a product s price is less than $20.00, all that remains is to highlight its name and price.</span></span> <span data-ttu-id="a97f9-183">Abychom to mohli udělat, musíte nejdřív programově odkazovat na ovládací prvky popisku v `ItemTemplate`, které zobrazují název a cenu produktu.</span><span class="sxs-lookup"><span data-stu-id="a97f9-183">To accomplish this, we must first programmatically reference the Label controls in the `ItemTemplate` that display the product s name and price.</span></span> <span data-ttu-id="a97f9-184">V dalším kroku je potřeba, aby se zobrazila žlutá pozadí.</span><span class="sxs-lookup"><span data-stu-id="a97f9-184">Next, we need to have them display a yellow background.</span></span> <span data-ttu-id="a97f9-185">Tyto informace o formátování lze použít přímou úpravou popisků `BackColor` vlastností (`LabelID.BackColor = Color.Yellow`); v ideálním případě by se měly všechny otázky související s displejem vyjádřit prostřednictvím kaskádových šablon stylů.</span><span class="sxs-lookup"><span data-stu-id="a97f9-185">This formatting information can be applied by directly modifying the Labels `BackColor` properties (`LabelID.BackColor = Color.Yellow`); ideally, though, all display-related matters should be expressed through cascading stylesheets.</span></span> <span data-ttu-id="a97f9-186">Ve skutečnosti už máme šablonu stylů, která poskytuje požadované formátování definované v `Styles.css` - `AffordablePriceEmphasis`, která byla vytvořena a diskutována ve *vlastním formátování na základě kurzu data* .</span><span class="sxs-lookup"><span data-stu-id="a97f9-186">In fact, we already have a stylesheet that provides the desired formatting defined in `Styles.css` - `AffordablePriceEmphasis`, which was created and discussed in the *Custom Formatting Based Upon Data* tutorial.</span></span>

<span data-ttu-id="a97f9-187">Chcete-li použít formátování, jednoduše nastavte ovládací prvky pro dva popisky `CssClass` vlastnosti na `AffordablePriceEmphasis`, jak je znázorněno v následujícím kódu:</span><span class="sxs-lookup"><span data-stu-id="a97f9-187">To apply the formatting, simply set the two Label Web controls `CssClass` properties to `AffordablePriceEmphasis`, as shown in the following code:</span></span>

[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample2.vb)]

<span data-ttu-id="a97f9-188">Po dokončení obslužné rutiny události `ItemDataBound` znovu navštivte stránku `Formatting.aspx` v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="a97f9-188">With the `ItemDataBound` event handler completed, revisit the `Formatting.aspx` page in a browser.</span></span> <span data-ttu-id="a97f9-189">Jak ukazuje obrázek 2, tyto produkty s cenou v $20,00 mají své jméno i cenu zvýrazněnou.</span><span class="sxs-lookup"><span data-stu-id="a97f9-189">As Figure 2 illustrates, those products with a price under $20.00 have both their name and price highlighted.</span></span>

<span data-ttu-id="a97f9-190">[![jsou tyto produkty méně než $20,00 zvýrazněny.](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a97f9-190">[![Those Products Less than $20.00 are Highlighted](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image4.png)</span></span>

<span data-ttu-id="a97f9-191">**Obrázek 2**: zvýrazní se tyto produkty menší než $20,00 ([kliknutím zobrazíte obrázek v plné velikosti).](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="a97f9-191">**Figure 2**: Those Products Less than $20.00 are Highlighted ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image6.png))</span></span>

> [!NOTE]
> <span data-ttu-id="a97f9-192">Vzhledem k tomu, že je prvek DataList vykreslen jako `<table>`HTML, mají jeho `DataListItem` instance vlastnosti související se styly, které lze nastavit tak, aby pro celou položku použili konkrétní styl.</span><span class="sxs-lookup"><span data-stu-id="a97f9-192">Since the DataList is rendered as an HTML `<table>`, its `DataListItem` instances have style-related properties that can be set to apply a specific style to the entire item.</span></span> <span data-ttu-id="a97f9-193">Pokud jsme například chtěli zdůraznit *celou* položku žlutou, pokud její cena byla menší než $20,00, mohli bychom nahradit kód, na který odkazuje popisky, a nastavit jejich `CssClass` vlastnosti pomocí následujícího řádku kódu: `e.Item.CssClass = "AffordablePriceEmphasis"` (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="a97f9-193">For example, if we wanted to highlight the *entire* item yellow when its price was less than $20.00, we could have replaced the code that referenced the Labels and set their `CssClass` properties with the following line of code: `e.Item.CssClass = "AffordablePriceEmphasis"` (see Figure 3).</span></span>

<span data-ttu-id="a97f9-194">`RepeaterItem` s, které tvoří ovládací prvek Repeater, ale nenabízejí takové vlastnosti na úrovni stylu.</span><span class="sxs-lookup"><span data-stu-id="a97f9-194">The `RepeaterItem` s that make up the Repeater control, however, don t offer such style-level properties.</span></span> <span data-ttu-id="a97f9-195">Proto použití vlastního formátování na Repeater vyžaduje použití vlastností stylu pro webové ovládací prvky v rámci šablon Repeater, stejně jako na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="a97f9-195">Therefore, applying custom formatting to the Repeater requires the application of style properties to the Web controls within the Repeater s templates, just like we did in Figure 2.</span></span>

<span data-ttu-id="a97f9-196">[![je pro produkty pod položkou $20,00 zvýrazněna celá položka produktu](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a97f9-196">[![The Entire Product Item is Highlighted for Products Under $20.00](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image7.png)</span></span>

<span data-ttu-id="a97f9-197">**Obrázek 3**: pro produkty pod $20,00 se zvýrazní celá položka produktu ([kliknutím zobrazíte obrázek v plné velikosti).](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a97f9-197">**Figure 3**: The Entire Product Item is Highlighted for Products Under $20.00 ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image9.png))</span></span>

## <a name="using-formatting-functions-from-within-the-template"></a><span data-ttu-id="a97f9-198">Použití funkcí formátování v rámci šablony</span><span class="sxs-lookup"><span data-stu-id="a97f9-198">Using Formatting Functions from Within the Template</span></span>

<span data-ttu-id="a97f9-199">V kurzu *použití templatefields v kurzu ovládacího prvku GridView* jsme viděli, jak použít funkci formátování v rámci prvku GridView TemplateField k použití vlastního formátování na základě dat svázaných s řádky GridView.</span><span class="sxs-lookup"><span data-stu-id="a97f9-199">In the *Using TemplateFields in the GridView Control* tutorial we saw how to use a formatting function within a GridView TemplateField to apply custom formatting based upon the data bound to the GridView s rows.</span></span> <span data-ttu-id="a97f9-200">Funkce formátování je metoda, kterou lze vyvolat ze šablony a vrátí kód HTML, který má být vygenerován na svém místě.</span><span class="sxs-lookup"><span data-stu-id="a97f9-200">A formatting function is a method that can be invoked from a template and returns the HTML to be emitted in its place.</span></span> <span data-ttu-id="a97f9-201">Funkce formátování se mohou nacházet ve třídě ASP.NET stránky s kódem na pozadí nebo může být centralizovaná do souborů třídy ve složce `App_Code` nebo v samostatném projektu knihovny tříd.</span><span class="sxs-lookup"><span data-stu-id="a97f9-201">Formatting functions can reside in the ASP.NET page s code-behind class or can be centralized into class files in the `App_Code` folder or in a separate Class Library project.</span></span> <span data-ttu-id="a97f9-202">Přesunutí funkce formátování mimo třídu ASP.NET stránky s kódem na pozadí je ideální, pokud plánujete použití stejné funkce formátování na více stránkách ASP.NET nebo v jiných ASP.NET webových aplikacích.</span><span class="sxs-lookup"><span data-stu-id="a97f9-202">Moving the formatting function out of the ASP.NET page s code-behind class is ideal if you plan on using the same formatting function in multiple ASP.NET pages or in other ASP.NET web applications.</span></span>

<span data-ttu-id="a97f9-203">Aby bylo možné předvést funkce formátování, obsahují informace o produktu text [UKONČENo] vedle názvu produktu, pokud je ukončen.</span><span class="sxs-lookup"><span data-stu-id="a97f9-203">To demonstrate formatting functions, let s have the product information include the text [DISCONTINUED] next to the product s name if it s discontinued.</span></span> <span data-ttu-id="a97f9-204">Také je možné nechat zvýrazněnou cenu žlutou, pokud je menší než $20,00 (jako v příkladu obslužné rutiny události `ItemDataBound`). Pokud je cena $20,00 nebo vyšší, nezobrazuje se vám skutečná cena, ale místo toho je třeba zavolat na cenovou nabídku.</span><span class="sxs-lookup"><span data-stu-id="a97f9-204">Also, let s have the price highlighted yellow if it s less than $20.00 (as we did in the `ItemDataBound` event handler example); if the price is $20.00 or higher, let s not display the actual price, but instead the text, Please call for a price quote.</span></span> <span data-ttu-id="a97f9-205">Obrázek 4 znázorňuje snímek obrazovky se seznamem produktů, u kterých se tato pravidla formátování aplikují.</span><span class="sxs-lookup"><span data-stu-id="a97f9-205">Figure 4 shows a screen shot of the products listing with these formatting rules applied.</span></span>

<span data-ttu-id="a97f9-206">[![u drahých produktů se cena nahradí textem, zavolá se na cenovou nabídku.](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a97f9-206">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image10.png)</span></span>

<span data-ttu-id="a97f9-207">**Obrázek 4**: u drahých produktů je cena nahrazena textem, volá se za cenu nabídky ([kliknutím zobrazíte obrázek v plné velikosti).](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="a97f9-207">**Figure 4**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image12.png))</span></span>

## <a name="step-1-create-the-formatting-functions"></a><span data-ttu-id="a97f9-208">Krok 1: vytvoření funkcí formátování</span><span class="sxs-lookup"><span data-stu-id="a97f9-208">Step 1: Create the Formatting Functions</span></span>

<span data-ttu-id="a97f9-209">V tomto příkladu potřebujeme dvě funkce formátování, jednu, která zobrazuje název produktu spolu s textem [UKONČENo], pokud je to potřeba, a další, který zobrazí zvýrazněnou cenu, pokud je menší než $20,00, nebo text, zavolejte na cenovou nabídku jinak.</span><span class="sxs-lookup"><span data-stu-id="a97f9-209">For this example we need two formatting functions, one that displays the product name along with the text [DISCONTINUED], if needed, and another that displays either a highlighted price if it s less than $20.00, or the text, Please call for a price quote otherwise.</span></span> <span data-ttu-id="a97f9-210">Umožňuje vytvořit tyto funkce ve třídě ASP.NET stránky s kódem na pozadí a pojmenovat je `DisplayProductNameAndDiscontinuedStatus` a `DisplayPrice`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-210">Let s create these functions in the ASP.NET page s code-behind class and name them `DisplayProductNameAndDiscontinuedStatus` and `DisplayPrice`.</span></span> <span data-ttu-id="a97f9-211">Obě metody musí vrátit kód HTML, který se má vykreslit jako řetězec, a obě musí být označené jako `Protected` (nebo `Public`), aby je bylo možné vyvolat z části s deklarativní syntaxí stránky ASP.NET Page.</span><span class="sxs-lookup"><span data-stu-id="a97f9-211">Both methods need to return the HTML to render as a string and both need to be marked `Protected` (or `Public`) in order to be invoked from the ASP.NET page s declarative syntax portion.</span></span> <span data-ttu-id="a97f9-212">Kód těchto dvou metod je následující:</span><span class="sxs-lookup"><span data-stu-id="a97f9-212">The code for these two methods follows:</span></span>

[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample3.vb)]

<span data-ttu-id="a97f9-213">Všimněte si, že metoda `DisplayProductNameAndDiscontinuedStatus` přijímá hodnoty datových polí `productName` a `discontinued` jako skalární hodnoty, zatímco metoda `DisplayPrice` akceptuje `ProductsRow` instanci (spíše než `unitPrice` skalární hodnota).</span><span class="sxs-lookup"><span data-stu-id="a97f9-213">Note that the `DisplayProductNameAndDiscontinuedStatus` method accepts the values of the `productName` and `discontinued` data fields as scalar values, whereas the `DisplayPrice` method accepts a `ProductsRow` instance (rather than a `unitPrice` scalar value).</span></span> <span data-ttu-id="a97f9-214">Bude fungovat buď přístup. Pokud však funkce formátování pracuje se skalárními hodnotami, které mohou obsahovat databázové `NULL` hodnoty (například `UnitPrice`; ani `ProductName` ani `Discontinued` Allow `NULL` Values), musí být při zpracování těchto skalárních vstupů provedena zvláštní péče.</span><span class="sxs-lookup"><span data-stu-id="a97f9-214">Either approach will work; however, if the formatting function is working with scalar values that can contain database `NULL` values (such as `UnitPrice`; neither `ProductName` nor `Discontinued` allow `NULL` values), special care must be taken in handling these scalar inputs.</span></span>

<span data-ttu-id="a97f9-215">Konkrétně musí být vstupní parametr typu `Object`, protože příchozí hodnota může být `DBNull` instance namísto očekávaného datového typu.</span><span class="sxs-lookup"><span data-stu-id="a97f9-215">In particular, the input parameter must be of type `Object` since the incoming value might be a `DBNull` instance instead of the expected data type.</span></span> <span data-ttu-id="a97f9-216">Kromě toho je nutné provést kontrolu, aby bylo možné určit, zda je hodnota `NULL` databáze hodnota.</span><span class="sxs-lookup"><span data-stu-id="a97f9-216">Additionally, a check must be made to determine whether or not the incoming value is a database `NULL` value.</span></span> <span data-ttu-id="a97f9-217">To znamená, že pokud jsme chtěli, aby `DisplayPrice` metoda přijmout tuto cenu jako skalární hodnotu, je potřeba použít následující kód:</span><span class="sxs-lookup"><span data-stu-id="a97f9-217">That is, if we wanted the `DisplayPrice` method to accept the price as a scalar value, we d have to use the following code:</span></span>

[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample4.vb)]

<span data-ttu-id="a97f9-218">Všimněte si, že vstupní parametr `unitPrice` je typu `Object` a že došlo k úpravě podmíněného příkazu, aby bylo možné zjistit, zda `unitPrice` `DBNull` nebo nikoli.</span><span class="sxs-lookup"><span data-stu-id="a97f9-218">Note that the `unitPrice` input parameter is of type `Object` and that the conditional statement has been modified to ascertain if `unitPrice` is `DBNull` or not.</span></span> <span data-ttu-id="a97f9-219">Navíc vzhledem k tomu, že vstupní parametr `unitPrice` je předán jako `Object`, musí být přetypování na desítkovou hodnotu.</span><span class="sxs-lookup"><span data-stu-id="a97f9-219">Furthermore, since the `unitPrice` input parameter is passed in as an `Object`, it must be cast to a decimal value.</span></span>

## <a name="step-2-calling-the-formatting-function-from-the-datalist-s-itemtemplate"></a><span data-ttu-id="a97f9-220">Krok 2: volání funkce formátování z prvku DataList s funkcí ItemTemplate</span><span class="sxs-lookup"><span data-stu-id="a97f9-220">Step 2: Calling the Formatting Function from the DataList s ItemTemplate</span></span>

<span data-ttu-id="a97f9-221">Díky funkcím formátování přidaným do naší třídy ASP.NET stránky s kódem na pozadí vše, co zbývá, je vyvolat tyto funkce formátování z prvku DataList s `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-221">With the formatting functions added to our ASP.NET page s code-behind class, all that remains is to invoke these formatting functions from the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="a97f9-222">Chcete-li volat funkci formátování ze šablony, umístěte volání funkce v rámci syntaxe datové vazby:</span><span class="sxs-lookup"><span data-stu-id="a97f9-222">To call a formatting function from a template, place the function call within the databinding syntax:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample5.aspx)]

<span data-ttu-id="a97f9-223">V ovládacím prvku DataList s `ItemTemplate` webový ovládací prvek `ProductNameLabel` Label aktuálně zobrazuje název produktu přiřazením jeho vlastnosti `Text` výsledku `<%# Eval("ProductName") %>`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-223">In the DataList s `ItemTemplate` the `ProductNameLabel` Label Web control currently displays the product s name by assigning its `Text` property the result of `<%# Eval("ProductName") %>`.</span></span> <span data-ttu-id="a97f9-224">Aby se zobrazil název a text [UKONČENo], v případě potřeby aktualizujte deklarativní syntaxi tak, aby místo toho přiřadí vlastnost `Text` hodnotu `DisplayProductNameAndDiscontinuedStatus` metody.</span><span class="sxs-lookup"><span data-stu-id="a97f9-224">In order to have it display the name plus the text [DISCONTINUED], if needed, update the declarative syntax so that it instead assigns the `Text` property the value of the `DisplayProductNameAndDiscontinuedStatus` method.</span></span> <span data-ttu-id="a97f9-225">V takovém případě je nutné předat název produktu a ukončené hodnoty pomocí syntaxe `Eval("columnName")`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-225">When doing so, we must pass in the product s name and discontinued values using the `Eval("columnName")` syntax.</span></span> <span data-ttu-id="a97f9-226">`Eval` vrací hodnotu typu `Object`, ale metoda `DisplayProductNameAndDiscontinuedStatus` očekává vstupní parametry typu `String` a `Boolean`; Proto je nutné přetypovat hodnoty vrácené metodou `Eval` na očekávané typy vstupních parametrů, například takto:</span><span class="sxs-lookup"><span data-stu-id="a97f9-226">`Eval` returns a value of type `Object`, but the `DisplayProductNameAndDiscontinuedStatus` method expects input parameters of type `String` and `Boolean`; therefore, we must cast the values returned by the `Eval` method to the expected input parameter types, like so:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample6.aspx)]

<span data-ttu-id="a97f9-227">Chcete-li zobrazit cenu, můžeme jednoduše nastavit vlastnost `UnitPriceLabel` popisek s `Text` na hodnotu vrácenou metodou `DisplayPrice`, stejně jako jsme provedli pro zobrazení názvu produktu a [ukončen] text.</span><span class="sxs-lookup"><span data-stu-id="a97f9-227">To display the price, we can simply set the `UnitPriceLabel` Label s `Text` property to the value returned by the `DisplayPrice` method, just like we did for displaying the product s name and [DISCONTINUED] text.</span></span> <span data-ttu-id="a97f9-228">Místo předání v `UnitPrice` jako skalární vstupní parametr je však místo toho předána celá `ProductsRow` instance:</span><span class="sxs-lookup"><span data-stu-id="a97f9-228">However, instead of passing in the `UnitPrice` as a scalar input parameter, we instead pass in the entire `ProductsRow` instance:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample7.aspx)]

<span data-ttu-id="a97f9-229">Díky volání funkcí formátování si chvíli počkejte, než se zobrazí náš průběh v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="a97f9-229">With the calls to the formatting functions in place, take a moment to view our progress in a browser.</span></span> <span data-ttu-id="a97f9-230">Vaše obrazovka by měla vypadat podobně jako na obrázku 5, s vyřazenými produkty, včetně textu [VYŘAZENo], a náklady na více než $20,00, jejichž cena se nahradila textem, zavolejte na cenovou nabídku.</span><span class="sxs-lookup"><span data-stu-id="a97f9-230">Your screen should look similar to Figure 5, with the discontinued products including the text [DISCONTINUED] and those products costing more than $20.00 having their price replaced with the text Please call for a price quote .</span></span>

<span data-ttu-id="a97f9-231">[![u drahých produktů se cena nahradí textem, zavolá se na cenovou nabídku.](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a97f9-231">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image13.png)</span></span>

<span data-ttu-id="a97f9-232">**Obrázek 5**: u drahých produktů je cena nahrazena textem, volá se za cenu nabídky ([kliknutím zobrazíte obrázek v plné velikosti).](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="a97f9-232">**Figure 5**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image15.png))</span></span>

## <a name="summary"></a><span data-ttu-id="a97f9-233">Přehled</span><span class="sxs-lookup"><span data-stu-id="a97f9-233">Summary</span></span>

<span data-ttu-id="a97f9-234">Formátování obsahu ovládacího prvku DataList nebo Repeater v závislosti na datech lze provést pomocí dvou technik.</span><span class="sxs-lookup"><span data-stu-id="a97f9-234">Formatting the contents of a DataList or Repeater control based upon the data can be accomplished using two techniques.</span></span> <span data-ttu-id="a97f9-235">Prvním postupem je vytvořit obslužnou rutinu události pro událost `ItemDataBound`, která se aktivuje, když se každý záznam ve zdroji dat váže k novému `DataListItem` nebo `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="a97f9-235">The first technique is to create an event handler for the `ItemDataBound` event, which fires as each record in the data source is bound to a new `DataListItem` or `RepeaterItem`.</span></span> <span data-ttu-id="a97f9-236">V obslužné rutině události `ItemDataBound` lze zkontrolovat data aktuální položky, a poté lze použít formátování na obsah šablony nebo pro `DataListItem` na celou položku samotnou.</span><span class="sxs-lookup"><span data-stu-id="a97f9-236">In the `ItemDataBound` event handler, the current item s data can be examined and then formatting can be applied to the contents of the template or, for `DataListItem` s, to the entire item itself.</span></span>

<span data-ttu-id="a97f9-237">Případně lze vlastní formátování realizovat prostřednictvím funkcí formátování.</span><span class="sxs-lookup"><span data-stu-id="a97f9-237">Alternatively, custom formatting can be realized through formatting functions.</span></span> <span data-ttu-id="a97f9-238">Funkce formátování je metoda, kterou lze vyvolat z šablon DataList nebo Repeater s, které vrátí kód HTML pro vygenerování na svém místě.</span><span class="sxs-lookup"><span data-stu-id="a97f9-238">A formatting function is a method that can be invoked from the DataList or Repeater s templates that returns the HTML to emit in its place.</span></span> <span data-ttu-id="a97f9-239">KÓD HTML vrácený funkcí formátování se často určuje podle hodnot svázaných s aktuální položkou.</span><span class="sxs-lookup"><span data-stu-id="a97f9-239">Often, the HTML returned by a formatting function is determined by the values being bound to the current item.</span></span> <span data-ttu-id="a97f9-240">Tyto hodnoty lze předat do funkce formátování, buď jako skalární hodnoty, nebo předáním celého objektu vázaného na položku (například instance `ProductsRow`).</span><span class="sxs-lookup"><span data-stu-id="a97f9-240">These values can be passed into the formatting function, either as scalar values or by passing in the entire object being bound to the item (such as the `ProductsRow` instance).</span></span>

<span data-ttu-id="a97f9-241">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="a97f9-241">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a97f9-242">O autorovi</span><span class="sxs-lookup"><span data-stu-id="a97f9-242">About the Author</span></span>

<span data-ttu-id="a97f9-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="a97f9-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a97f9-244">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="a97f9-244">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a97f9-245">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a97f9-245">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a97f9-246">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a97f9-246">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a97f9-247">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a97f9-247">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a97f9-248">Zvláštní díky</span><span class="sxs-lookup"><span data-stu-id="a97f9-248">Special Thanks To</span></span>

<span data-ttu-id="a97f9-249">Tato řada kurzů byla přezkoumána mnoha užitečnými kontrolory.</span><span class="sxs-lookup"><span data-stu-id="a97f9-249">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a97f9-250">Kontroloři vedoucích k tomuto kurzu byli Yaakov Ellis, Randy Schmidt a Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="a97f9-250">Lead reviewers for this tutorial were Yaakov Ellis, Randy Schmidt, and Liz Shulok.</span></span> <span data-ttu-id="a97f9-251">Uvažujete o přezkoumání mých nadcházejících článků na webu MSDN?</span><span class="sxs-lookup"><span data-stu-id="a97f9-251">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a97f9-252">Pokud ano, vyřaďte mi řádek na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a97f9-252">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a97f9-253">[Předchozí](displaying-data-with-the-datalist-and-repeater-controls-vb.md)
> [Další](showing-multiple-records-per-row-with-the-datalist-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="a97f9-253">[Previous](displaying-data-with-the-datalist-and-repeater-controls-vb.md)
[Next](showing-multiple-records-per-row-with-the-datalist-control-vb.md)</span></span>
