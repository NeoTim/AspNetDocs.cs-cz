---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
title: Filtrování seznamu a podrobností pomocí ovládacího prvkem DropDownListC#() | Microsoft Docs
author: rick-anderson
description: V tomto kurzu se dozvíte, jak zobrazit hlavní záznamy v ovládacím prvku DropDownList a podrobnosti o vybrané položce seznamu v prvku GridView.
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 53e659cc-eefb-40c1-a1dc-559481c99443
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
msc.type: authoredcontent
ms.openlocfilehash: 3ec549f9da7a2b3a021e77827f0039e6ae60b5c5
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78528817"
---
# <a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="46d9a-103">Filtrování hlavních záznamů / podrobností ovládacím prvkem DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="46d9a-103">Master/Detail Filtering With a DropDownList (C#)</span></span>

<span data-ttu-id="46d9a-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="46d9a-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="46d9a-105">[Stáhnout ukázkovou aplikaci](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) nebo [Stáhnout PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="46d9a-105">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span></span>

> <span data-ttu-id="46d9a-106">V tomto kurzu se dozvíte, jak zobrazit hlavní záznamy v ovládacím prvku DropDownList a podrobnosti o vybrané položce seznamu v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="46d9a-106">In this tutorial we'll see how to display the master records in a DropDownList control and the details of the selected list item in a GridView.</span></span>

## <a name="introduction"></a><span data-ttu-id="46d9a-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="46d9a-107">Introduction</span></span>

<span data-ttu-id="46d9a-108">Běžným typem sestavy je *Sestava hlavní a podrobnosti*, ve které sestava začíná zobrazením některých sad "hlavních" záznamů.</span><span class="sxs-lookup"><span data-stu-id="46d9a-108">A common type of report is the *master/detail report*, in which the report begins by showing some set of "master" records.</span></span> <span data-ttu-id="46d9a-109">Uživatel pak může přejít k podrobnostem jednoho ze vzorových záznamů, takže zobrazí podrobnosti o tomto hlavním záznamu.</span><span class="sxs-lookup"><span data-stu-id="46d9a-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="46d9a-110">Hlavní a podrobné sestavy jsou ideální volbou pro vizualizaci vztahů 1: n, jako je sestava, která zobrazuje všechny kategorie a umožňuje uživateli vybrat konkrétní kategorii a zobrazit její přidružené produkty.</span><span class="sxs-lookup"><span data-stu-id="46d9a-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships, such as a report showing all of the categories and then allowing a user to select a particular category and display its associated products.</span></span> <span data-ttu-id="46d9a-111">Sestavy hlavní/podrobnosti jsou navíc užitečné pro zobrazení podrobných informací z zvláště "nejrůznějších" tabulek (ty, které mají mnoho sloupců).</span><span class="sxs-lookup"><span data-stu-id="46d9a-111">Additionally, master/detail reports are useful for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="46d9a-112">Například "hlavní" úroveň sestavy hlavní/podrobnosti může zobrazit pouze název produktu a jednotkovou cenu produktů v databázi a přechodem na určitý produkt by se zobrazila další pole produktu (kategorie, dodavatel, množství na jednotku atd.).</span><span class="sxs-lookup"><span data-stu-id="46d9a-112">For example, the "master" level of a master/detail report might show just the product name and unit price of the products in the database, and drilling down into a particular product would show the additional product fields (category, supplier, quantity per unit, and so on).</span></span>

<span data-ttu-id="46d9a-113">Existuje mnoho způsobů, jak lze implementovat sestavu hlavní/podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="46d9a-113">There are many ways with which a master/detail report can be implemented.</span></span> <span data-ttu-id="46d9a-114">Přes toto a další tři kurzy se podíváme na nejrůznější sestavy hlavní/podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="46d9a-114">Over this and the next three tutorials we'll look at a variety of master/detail reports.</span></span> <span data-ttu-id="46d9a-115">V tomto kurzu se dozvíte, jak zobrazit hlavní záznamy v [ovládacím prvku DropDownList](https://msdn.microsoft.com/library/dtx91y0z.aspx) a podrobnosti o vybrané položce seznamu v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="46d9a-115">In this tutorial we'll see how to display the master records in a [DropDownList control](https://msdn.microsoft.com/library/dtx91y0z.aspx) and the details of the selected list item in a GridView.</span></span> <span data-ttu-id="46d9a-116">Konkrétně Sestava hlavní a podrobnosti tohoto kurzu zobrazí seznam kategorií a informací o produktu.</span><span class="sxs-lookup"><span data-stu-id="46d9a-116">In particular, this tutorial's master/detail report will list category and product information.</span></span>

## <a name="step-1-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="46d9a-117">Krok 1: zobrazení kategorií v DropDownList</span><span class="sxs-lookup"><span data-stu-id="46d9a-117">Step 1: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="46d9a-118">V naší sestavě Master/Detail se zobrazí seznam kategorií v DropDownList a na stránce v prvku GridView se zobrazí níže zobrazené produkty vybrané položky seznamu.</span><span class="sxs-lookup"><span data-stu-id="46d9a-118">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a GridView.</span></span> <span data-ttu-id="46d9a-119">První úkol je před námi a pak má mít kategorie zobrazené v DropDownList.</span><span class="sxs-lookup"><span data-stu-id="46d9a-119">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="46d9a-120">Otevřete stránku `FilterByDropDownList.aspx` ve složce `Filtering`, přetáhněte objekt DropDownList z panelu nástrojů na Návrhář stránky a nastavte jeho vlastnost `ID` na `Categories`.</span><span class="sxs-lookup"><span data-stu-id="46d9a-120">Open the `FilterByDropDownList.aspx` page in the `Filtering` folder, drag on a DropDownList from the Toolbox onto the page's designer, and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="46d9a-121">Potom klikněte na odkaz zvolit zdroj dat z inteligentní značky DropDownList.</span><span class="sxs-lookup"><span data-stu-id="46d9a-121">Next, click on the Choose Data Source link from the DropDownList's smart tag.</span></span> <span data-ttu-id="46d9a-122">Tím se zobrazí Průvodce konfigurací zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="46d9a-122">This will display the Data Source Configuration wizard.</span></span>

<span data-ttu-id="46d9a-123">[![určení zdroje dat ovládacího prvku DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-123">[![Specify the DropDownList's Data Source](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span></span>

<span data-ttu-id="46d9a-124">**Obrázek 1**: určení zdroje dat DropDownList ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="46d9a-124">**Figure 1**: Specify the DropDownList's Data Source ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span></span>

<span data-ttu-id="46d9a-125">Vyberte, chcete-li přidat nový prvek ObjectDataSource s názvem `CategoriesDataSource`, který vyvolá metodu `GetCategories()` `CategoriesBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="46d9a-125">Choose to add a new ObjectDataSource named `CategoriesDataSource` that invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span>

<span data-ttu-id="46d9a-126">[![přidat nový prvek ObjectDataSource s názvem CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-126">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span></span>

<span data-ttu-id="46d9a-127">**Obrázek 2**: Přidání nového prvku ObjectDataSource s názvem `CategoriesDataSource` ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="46d9a-127">**Figure 2**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span></span>

<span data-ttu-id="46d9a-128">[![zvolit použití třídy CategoriesBLL](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span></span>

<span data-ttu-id="46d9a-129">**Obrázek 3**: vyberte, pokud chcete použít třídu `CategoriesBLL` ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-129">**Figure 3**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span></span>

<span data-ttu-id="46d9a-130">[![nakonfigurovat prvek ObjectDataSource pro použití metody GetCategories ()](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span></span>

<span data-ttu-id="46d9a-131">**Obrázek 4**: Konfigurace prvku ObjectDataSource pro použití metody `GetCategories()` ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="46d9a-131">**Figure 4**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span></span>

<span data-ttu-id="46d9a-132">Po nakonfigurování prvku ObjectDataSource je stále potřeba určit, jaké pole zdroje dat by se mělo zobrazit v DropDownList a který má být přidružen jako hodnota pro položku seznamu.</span><span class="sxs-lookup"><span data-stu-id="46d9a-132">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in DropDownList and which one should be associated as the value for the list item.</span></span> <span data-ttu-id="46d9a-133">Má pole `CategoryName` jako hodnotu zobrazení a `CategoryID` jako hodnotu pro každou položku seznamu.</span><span class="sxs-lookup"><span data-stu-id="46d9a-133">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="46d9a-134">[![mají DropDownList zobrazit pole CategoryName a jako hodnotu použít CategoryID.](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span></span>

<span data-ttu-id="46d9a-135">**Obrázek 5**: DropDownList zobrazí pole `CategoryName` a jako hodnotu použije `CategoryID` ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-135">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span></span>

<span data-ttu-id="46d9a-136">V tuto chvíli máme ovládací prvek DropDownList, který je naplněný záznamy z `Categories` tabulky (vše bylo dokončeno přibližně po dobu šesti sekund).</span><span class="sxs-lookup"><span data-stu-id="46d9a-136">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="46d9a-137">Obrázek 6 znázorňuje náš průběh, pokud je zobrazený v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="46d9a-137">Figure 6 shows our progress thus far when viewed through a browser.</span></span>

<span data-ttu-id="46d9a-138">[![rozevíracího seznamu pro aktuální kategorie](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-138">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span></span>

<span data-ttu-id="46d9a-139">**Obrázek 6**: rozevírací seznam pro aktuální kategorie ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="46d9a-139">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span></span>

## <a name="step-2-adding-the-products-gridview"></a><span data-ttu-id="46d9a-140">Krok 2: Přidání prvku GridView pro produkty</span><span class="sxs-lookup"><span data-stu-id="46d9a-140">Step 2: Adding the Products GridView</span></span>

<span data-ttu-id="46d9a-141">Poslední krok v naší sestavě hlavní/podrobnosti je seznam produktů přidružených k vybrané kategorii.</span><span class="sxs-lookup"><span data-stu-id="46d9a-141">That last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="46d9a-142">K tomu je nutné přidat prvek GridView na stránku a vytvořit nový prvek ObjectDataSource s názvem `productsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="46d9a-142">To accomplish this, add a GridView to the page and create a new ObjectDataSource named `productsDataSource`.</span></span> <span data-ttu-id="46d9a-143">Mít ovládací prvek `productsDataSource` Odvrácená data z metody `GetProductsByCategoryID(categoryID)` `ProductsBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="46d9a-143">Have the `productsDataSource` control cull its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="46d9a-144">[![vybrat metodu GetProductsByCategoryID (KódKategorie)](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-144">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span></span>

<span data-ttu-id="46d9a-145">**Obrázek 7**: vyberte metodu `GetProductsByCategoryID(categoryID)` ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png)).</span><span class="sxs-lookup"><span data-stu-id="46d9a-145">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span></span>

<span data-ttu-id="46d9a-146">Po zvolení této metody Průvodce ObjectDataSource zobrazí výzvu k zadání hodnoty parametru *`categoryID`* metody.</span><span class="sxs-lookup"><span data-stu-id="46d9a-146">After choosing this method, the ObjectDataSource wizard prompts us for the value for the method's *`categoryID`* parameter.</span></span> <span data-ttu-id="46d9a-147">Chcete-li použít hodnotu vybrané `categories` položku DropDownList, nastavte zdroj parametru jako ovládací prvek a vlastnosti ControlID k `Categories`.</span><span class="sxs-lookup"><span data-stu-id="46d9a-147">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>

<span data-ttu-id="46d9a-148">[![nastavit parametr categoryID na hodnotu kategorie DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-148">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span></span>

<span data-ttu-id="46d9a-149">**Obrázek 8**: nastavte parametr *`categoryID`* na hodnotu `Categories` DropDownList ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-149">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span></span>

<span data-ttu-id="46d9a-150">Chvíli si Projděte náš pokrok v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="46d9a-150">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="46d9a-151">Při první návštěvě stránky budou tyto produkty patřit do vybrané kategorie (nápoje) (jak je znázorněno na obrázku 9), ale změna ovládacího prvkem DropDownList neaktualizuje data.</span><span class="sxs-lookup"><span data-stu-id="46d9a-151">When first visiting the page, those products belong to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="46d9a-152">Je to proto, že k tomu, aby se prvek GridView mohl aktualizovat, musí dojít k postbacku.</span><span class="sxs-lookup"><span data-stu-id="46d9a-152">This is because a postback must occur for the GridView to update.</span></span> <span data-ttu-id="46d9a-153">K tomu máme dvě možnosti (ani to, co nevyžaduje psaní kódu):</span><span class="sxs-lookup"><span data-stu-id="46d9a-153">To accomplish this we have two options (neither of which requires writing any code):</span></span>

- <span data-ttu-id="46d9a-154">Nastavte[vlastnost AutoPostBack](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx) **kategorie ovládacího prvku DropDownList** **na hodnotu true.**</span><span class="sxs-lookup"><span data-stu-id="46d9a-154">**Set the categories DropDownList's**[AutoPostBack property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**to True.**</span></span> <span data-ttu-id="46d9a-155">(Můžete to provést tak, že zkontrolujete možnost Povolit AutoPostBack v inteligentní značce DropDownList.) Tím se aktivuje postback, kdykoli uživatel změní vybranou položku DropDownList.</span><span class="sxs-lookup"><span data-stu-id="46d9a-155">(You can accomplish this by checking the Enable AutoPostBack option in the DropDownList's smart tag.) This will trigger a postback whenever the DropDownList's selected item is changed by the user.</span></span> <span data-ttu-id="46d9a-156">Proto když uživatel vybere novou kategorii z ovládacího prvku DropDownList, vystavení zpětného volání bude následovat a komponenta GridView bude aktualizována s produkty nově vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="46d9a-156">Therefore, when the user selects a new category from the DropDownList a postback will ensue and the GridView will be updated with the products for the newly selected category.</span></span> <span data-ttu-id="46d9a-157">(Jedná se o přístup, který jsem v tomto kurzu použili.)</span><span class="sxs-lookup"><span data-stu-id="46d9a-157">(This is the approach I've used in this tutorial.)</span></span>
- <span data-ttu-id="46d9a-158">**Přidejte webové ovládací prvky tlačítka vedle ovládacího prvku DropDownList.**</span><span class="sxs-lookup"><span data-stu-id="46d9a-158">**Add a Button Web control next to the DropDownList.**</span></span> <span data-ttu-id="46d9a-159">Nastavte jeho vlastnost `Text` na hodnotu aktualizovat nebo podobným způsobem.</span><span class="sxs-lookup"><span data-stu-id="46d9a-159">Set its `Text` property to Refresh or something similar.</span></span> <span data-ttu-id="46d9a-160">S tímto přístupem bude uživatel muset vybrat novou kategorii a pak kliknout na tlačítko.</span><span class="sxs-lookup"><span data-stu-id="46d9a-160">With this approach, the user will need to select a new category and then click the Button.</span></span> <span data-ttu-id="46d9a-161">Kliknutím na tlačítko dojde k odeslání zpětného volání a aktualizaci prvku GridView, aby vybral seznam produktů vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="46d9a-161">Clicking the Button will cause a postback and update the GridView to list those products of the selected category.</span></span>

<span data-ttu-id="46d9a-162">Obrázky 9 a 10 ilustrují sestavu hlavní/podrobnosti v akci.</span><span class="sxs-lookup"><span data-stu-id="46d9a-162">Figures 9 and 10 illustrate the master/detail report in action.</span></span>

<span data-ttu-id="46d9a-163">[![při první návštěvě stránky se zobrazí nápojové produkty.](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-163">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span></span>

<span data-ttu-id="46d9a-164">**Obrázek 9**: když poprvé navštívíte stránku, zobrazí se nápojové produkty ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png)).</span><span class="sxs-lookup"><span data-stu-id="46d9a-164">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span></span>

<span data-ttu-id="46d9a-165">[![výběru nového produktu (vytvořeného) automaticky způsobí PostBack, aktualizaci prvku GridView.](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-165">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span></span>

<span data-ttu-id="46d9a-166">**Obrázek 10**: výběr nového produktu (vytvořeného) automaticky způsobí postback, aktualizaci prvku GridView ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png)).</span><span class="sxs-lookup"><span data-stu-id="46d9a-166">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span></span>

## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="46d9a-167">Přidání položky seznamu "--zvolit kategorii"</span><span class="sxs-lookup"><span data-stu-id="46d9a-167">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="46d9a-168">Při první návštěvě `FilterByDropDownList.aspx` stránky je ve výchozím nastavení vybrána položka první položka seznamu (nápoje) kategorie, která zobrazuje nápoje v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="46d9a-168">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the GridView.</span></span> <span data-ttu-id="46d9a-169">Místo toho, aby se zobrazovaly výrobky první kategorie, můžeme místo toho mít vybranou položku DropDownList, která říká něco, jako je například, a zvolit kategorii--.</span><span class="sxs-lookup"><span data-stu-id="46d9a-169">Rather than showing the first category's products, we may want to instead have a DropDownList item selected that says something like, "-- Choose a Category --".</span></span>

<span data-ttu-id="46d9a-170">Chcete-li přidat novou položku seznamu do ovládacího prvků DropDownList, přejděte na okno Vlastnosti a klikněte na tlačítko se třemi tečkami ve vlastnosti `Items`.</span><span class="sxs-lookup"><span data-stu-id="46d9a-170">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="46d9a-171">Přidejte novou položku seznamu s `Text` "--zvolit kategorii--" a `Value` `-1`.</span><span class="sxs-lookup"><span data-stu-id="46d9a-171">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `-1`.</span></span>

<span data-ttu-id="46d9a-172">[![přidání a výběr kategorie--vyberte položku seznamu.](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-172">[![Add a -- Choose a Category -- List Item](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span></span>

<span data-ttu-id="46d9a-173">**Obrázek 11**: Přidání a výběr kategorie – seznam položek ([kliknutím zobrazíte obrázek v plné velikosti](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="46d9a-173">**Figure 11**: Add a -- Choose a Category -- List Item ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span></span>

<span data-ttu-id="46d9a-174">Alternativně můžete přidat položku seznamu přidáním následujícího kódu do ovládacího prvkem DropDownList:</span><span class="sxs-lookup"><span data-stu-id="46d9a-174">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample1.aspx)]

<span data-ttu-id="46d9a-175">Kromě toho je potřeba nastavit `AppendDataBoundItems` ovládacího prvku DropDownList na hodnotu true, protože pokud jsou kategorie svázány s ovládacím prvkem DropDownList z prvku ObjectDataSource, budou přepsány jakékoli ručně přidané položky seznamu, pokud `AppendDataBoundItems` není true.</span><span class="sxs-lookup"><span data-stu-id="46d9a-175">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to True because when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items if `AppendDataBoundItems` isn't True.</span></span>

![Nastavte vlastnost AppendDataBoundItems na hodnotu true.](master-detail-filtering-with-a-dropdownlist-cs/_static/image34.png)

<span data-ttu-id="46d9a-177">**Obrázek 12**: nastavte vlastnost `AppendDataBoundItems` na hodnotu true.</span><span class="sxs-lookup"><span data-stu-id="46d9a-177">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>

<span data-ttu-id="46d9a-178">Po těchto změnách se při první návštěvě stránky vybere možnost--zvolit kategorii – a nezobrazí se žádné produkty.</span><span class="sxs-lookup"><span data-stu-id="46d9a-178">After these changes, when first visiting the page the "-- Choose a Category --" option is selected and no products are displayed.</span></span>

<span data-ttu-id="46d9a-179">[![na počátečním načtení stránky nejsou zobrazeny žádné produkty.](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-179">[![On the Initial Page Load No Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span></span>

<span data-ttu-id="46d9a-180">**Obrázek 13**: na počátečním načtení stránky nejsou zobrazeny žádné produkty ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-180">**Figure 13**: On the Initial Page Load No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span></span>

<span data-ttu-id="46d9a-181">Důvod, proč se nezobrazují žádné produkty, pokud je vybrána položka "--zvolit kategorii--" položka seznamu, protože její hodnota je `-1` a v databázi nejsou žádné produkty s `CategoryID` `-1`.</span><span class="sxs-lookup"><span data-stu-id="46d9a-181">The reason no products are displayed when because the "-- Choose a Category --" list item is selected is because its value is `-1` and there are no products in the database with a `CategoryID` of `-1`.</span></span> <span data-ttu-id="46d9a-182">Pokud se jedná o požadované chování, jste v tomto okamžiku hotovi!</span><span class="sxs-lookup"><span data-stu-id="46d9a-182">If this is the behavior you want then you're done at this point!</span></span> <span data-ttu-id="46d9a-183">Pokud však chcete zobrazit *všechny* kategorie, když je vybrána položka seznamu "--zvolit kategorii--", vraťte se do třídy `ProductsBLL` a upravte metodu `GetProductsByCategoryID(categoryID)` tak, aby vyvolala metodu `GetProducts()`, pokud předaný parametr *`categoryID`* je menší než nula:</span><span class="sxs-lookup"><span data-stu-id="46d9a-183">If, however, you want to display *all* of the categories when the "-- Choose a Category --" list item is selected, return to the `ProductsBLL` class and customize the `GetProductsByCategoryID(categoryID)` method so that it invokes the `GetProducts()` method if the passed in *`categoryID`* parameter is less than zero:</span></span>

[!code-csharp[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample2.cs)]

<span data-ttu-id="46d9a-184">Postup, který se tady používá, je podobný přístupu, který jsme použili k zobrazení všech dodavatelů zpátky v kurzu [deklarativních parametrů](../basic-reporting/declarative-parameters-cs.md) , i když v tomto příkladu používáme hodnotu `-1` k označení toho, že všechny záznamy by se měly načíst na rozdíl od `null`.</span><span class="sxs-lookup"><span data-stu-id="46d9a-184">The technique used here is similar to the approach we used to display all suppliers back in the [Declarative Parameters](../basic-reporting/declarative-parameters-cs.md) tutorial, although for this example we're using a value of `-1` to indicate that all records should be retrieved as opposed to `null`.</span></span> <span data-ttu-id="46d9a-185">Důvodem je, že parametr *`categoryID`* metody `GetProductsByCategoryID(categoryID)` očekává, že předaná celočíselná hodnota, která je v kurzu deklarativních parametrů, přešla do vstupního parametru řetězce.</span><span class="sxs-lookup"><span data-stu-id="46d9a-185">This is because the *`categoryID`* parameter of the `GetProductsByCategoryID(categoryID)` method expects as integer value passed in, whereas in the Declarative Parameters tutorial we were passing in a string input parameter.</span></span>

<span data-ttu-id="46d9a-186">Obrázek 14 ukazuje snímek obrazovky `FilterByDropDownList.aspx`, když je vybrána možnost--zvolit kategorii--.</span><span class="sxs-lookup"><span data-stu-id="46d9a-186">Figure 14 shows a screen shot of `FilterByDropDownList.aspx` when the "-- Choose a Category --" option is selected.</span></span> <span data-ttu-id="46d9a-187">Tady se zobrazí všechny produkty ve výchozím nastavení a uživatel může zúžit zobrazení výběrem konkrétní kategorie.</span><span class="sxs-lookup"><span data-stu-id="46d9a-187">Here, all of the products are displayed by default, and the user can narrow the display by choosing a specific category.</span></span>

<span data-ttu-id="46d9a-188">[![všechny produkty jsou teď uvedené ve výchozím nastavení.](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-188">[![All of the Products are Now Listed By Default](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span></span>

<span data-ttu-id="46d9a-189">**Obrázek 14**: všechny produkty jsou teď uvedené ve výchozím nastavení ([kliknutím zobrazíte obrázek v plné velikosti).](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="46d9a-189">**Figure 14**: All of the Products are Now Listed By Default ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span></span>

## <a name="summary"></a><span data-ttu-id="46d9a-190">Souhrn</span><span class="sxs-lookup"><span data-stu-id="46d9a-190">Summary</span></span>

<span data-ttu-id="46d9a-191">Při zobrazení hierarchicky souvisejících dat často pomáhá prezentovat data pomocí hlavních a podrobných sestav, od kterých může uživatel začít perusing data z horní části hierarchie a přejít k podrobnostem.</span><span class="sxs-lookup"><span data-stu-id="46d9a-191">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="46d9a-192">V tomto kurzu jsme prozkoumali vytvoření jednoduché sestavy hlavní/podrobnosti zobrazující produkty vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="46d9a-192">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="46d9a-193">To bylo provedeno pomocí ovládacího prvku DropDownList pro seznam kategorií a GridView pro produkty patřící do vybrané kategorie.</span><span class="sxs-lookup"><span data-stu-id="46d9a-193">This was accomplished by using a DropDownList for the list of categories and a GridView for the products belonging to the selected category.</span></span>

<span data-ttu-id="46d9a-194">V [dalším kurzu](master-detail-filtering-with-two-dropdownlists-cs.md) budeme postupně přebírat rozhraní DropDownList pomocí dvou ovládacích prvků DropDownList.</span><span class="sxs-lookup"><span data-stu-id="46d9a-194">In the [next tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) we'll take the DropDownList interface one step further, using two DropDownLists.</span></span>

<span data-ttu-id="46d9a-195">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="46d9a-195">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="46d9a-196">O autorovi</span><span class="sxs-lookup"><span data-stu-id="46d9a-196">About the Author</span></span>

<span data-ttu-id="46d9a-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="46d9a-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="46d9a-198">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="46d9a-198">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="46d9a-199">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="46d9a-199">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="46d9a-200">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="46d9a-200">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="46d9a-201">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="46d9a-201">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="46d9a-202">Next</span><span class="sxs-lookup"><span data-stu-id="46d9a-202">Next</span></span>](master-detail-filtering-with-two-dropdownlists-cs.md)
