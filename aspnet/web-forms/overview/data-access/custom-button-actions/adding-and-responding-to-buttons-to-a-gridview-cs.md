---
uid: web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
title: Přidání tlačítek do ovládacího prvku GridView (C#) a reakce na ně | Microsoft Docs
author: rick-anderson
description: V tomto kurzu se podíváme na postup, jak přidat vlastní tlačítka jak k šabloně, tak k polím ovládacího prvku GridView nebo DetailsView. Konkrétně pří...
ms.author: riande
ms.date: 09/13/2006
ms.assetid: 128fdb5f-4c5e-42b5-b485-f3aee90a8e38
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
msc.type: authoredcontent
ms.openlocfilehash: 5c87386e4fe2c53b39162071689f2522dcc6c7ac
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78549642"
---
# <a name="adding-and-responding-to-buttons-to-a-gridview-c"></a><span data-ttu-id="317cb-104">Přidání tlačítek do ovládacího prvku GridView a reakce na ně (C#)</span><span class="sxs-lookup"><span data-stu-id="317cb-104">Adding and Responding to Buttons to a GridView (C#)</span></span>

<span data-ttu-id="317cb-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="317cb-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="317cb-106">[Stáhnout ukázkovou aplikaci](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) nebo [Stáhnout PDF](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="317cb-106">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) or [Download PDF](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span></span>

> <span data-ttu-id="317cb-107">V tomto kurzu se podíváme na postup, jak přidat vlastní tlačítka jak k šabloně, tak k polím ovládacího prvku GridView nebo DetailsView.</span><span class="sxs-lookup"><span data-stu-id="317cb-107">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="317cb-108">Konkrétně sestavíme rozhraní, které má FormView, který umožňuje uživateli stránkovat prostřednictvím dodavatelů.</span><span class="sxs-lookup"><span data-stu-id="317cb-108">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span>

## <a name="introduction"></a><span data-ttu-id="317cb-109">Úvod</span><span class="sxs-lookup"><span data-stu-id="317cb-109">Introduction</span></span>

<span data-ttu-id="317cb-110">I když mnoho scénářů vytváření sestav zahrnuje přístup k datům sestavy jen pro čtení, není neobvyklá sestava, která by zahrnovala možnost provádět akce na základě zobrazených dat.</span><span class="sxs-lookup"><span data-stu-id="317cb-110">While many reporting scenarios involve read-only access to the report data, it's not uncommon for reports to include the ability to perform actions based upon the data displayed.</span></span> <span data-ttu-id="317cb-111">Obvykle se jedná o přidání webového ovládacího prvku tlačítko, LinkButton nebo obrázkové s každým záznamem zobrazeným v sestavě, který po kliknutí způsobí postback a vyvolá nějaký kód na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="317cb-111">Typically this involved adding a Button, LinkButton, or ImageButton Web control with each record displayed in the report that, when clicked, causes a postback and invokes some server-side code.</span></span> <span data-ttu-id="317cb-112">Nejčastějším příkladem je úpravy a odstranění dat na základě záznamu.</span><span class="sxs-lookup"><span data-stu-id="317cb-112">Editing and deleting the data on a record-by-record basis is the most common example.</span></span> <span data-ttu-id="317cb-113">Vzhledem k tomu, že jsme zjistili, že jsme začali s [přehledem vkládání, aktualizace a odstraňování dat](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) , jsou úpravy a odstraňování tak běžné, že ovládací prvky GridView, DetailsView a FormView můžou tyto funkce podporovat, aniž by bylo potřeba psát jediný řádek kódu.</span><span class="sxs-lookup"><span data-stu-id="317cb-113">In fact, as we saw starting with the [Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, editing and deleting is so common that the GridView, DetailsView, and FormView controls can support such functionality without the need for writing a single line of code.</span></span>

<span data-ttu-id="317cb-114">Kromě tlačítek upravit a odstranit mohou ovládací prvky GridView, DetailsView a FormView obsahovat také tlačítka, LinkButtons nebo ImageButtons, které po kliknutí vyplní vlastní logiku na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="317cb-114">In addition to Edit and Delete buttons, the GridView, DetailsView, and FormView controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="317cb-115">V tomto kurzu se podíváme na postup, jak přidat vlastní tlačítka jak k šabloně, tak k polím ovládacího prvku GridView nebo DetailsView.</span><span class="sxs-lookup"><span data-stu-id="317cb-115">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="317cb-116">Konkrétně sestavíme rozhraní, které má FormView, který umožňuje uživateli stránkovat prostřednictvím dodavatelů.</span><span class="sxs-lookup"><span data-stu-id="317cb-116">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span> <span data-ttu-id="317cb-117">Pro daného dodavatele bude třída FormView zobrazovat informace o dodavateli spolu s webovým ovládacím prvkem tlačítko, který při kliknutí na něj označí všechny přidružené produkty jako ukončené.</span><span class="sxs-lookup"><span data-stu-id="317cb-117">For a given supplier, the FormView will show information about the supplier along with a Button Web control that, if clicked, will mark all of their associated products as discontinued.</span></span> <span data-ttu-id="317cb-118">Kromě toho GridView zobrazí seznam produktů poskytovaných vybraným dodavatelem, přičemž každý řádek obsahuje tlačítka zvýšení ceny a slevy, které po kliknutí vyvolají nebo sníží `UnitPrice` produktu o 10% (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="317cb-118">Additionally, a GridView lists those products provided by the selected supplier, with each row containing Increase Price and Discount Price Buttons that, if clicked, raise or reduce the product's `UnitPrice` by 10% (see Figure 1).</span></span>

<span data-ttu-id="317cb-119">[![FormView i GridView obsahují tlačítka, která provádějí vlastní akce.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-119">[![Both the FormView and GridView Contain Buttons That Perform Custom Actions](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span></span>

<span data-ttu-id="317cb-120">**Obrázek 1**: třída FormView a GridView obsahují tlačítka, která provádějí vlastní akce ([kliknutím zobrazíte obrázek v plné velikosti).](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-120">**Figure 1**: Both the FormView and GridView Contain Buttons That Perform Custom Actions ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span></span>

## <a name="step-1-adding-the-button-tutorial-web-pages"></a><span data-ttu-id="317cb-121">Krok 1: Přidání webových stránek s výukou k tlačítkům</span><span class="sxs-lookup"><span data-stu-id="317cb-121">Step 1: Adding the Button Tutorial Web Pages</span></span>

<span data-ttu-id="317cb-122">Předtím, než se podíváme na postup, jak přidat vlastní tlačítka, nejdřív si vybereme chvilku, abychom vytvořili stránky ASP.NET v našem projektu webu, který budeme potřebovat pro tento kurz.</span><span class="sxs-lookup"><span data-stu-id="317cb-122">Before we look at how to add a custom buttons, let's first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="317cb-123">Začněte přidáním nové složky s názvem `CustomButtons`.</span><span class="sxs-lookup"><span data-stu-id="317cb-123">Start by adding a new folder named `CustomButtons`.</span></span> <span data-ttu-id="317cb-124">Dále přidejte do této složky následující dvě ASP.NET stránky a nezapomeňte přidružit jednotlivé stránky k hlavní stránce `Site.master`:</span><span class="sxs-lookup"><span data-stu-id="317cb-124">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`

![Přidejte stránky ASP.NET pro vlastní kurzy související s tlačítky.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image4.png)

<span data-ttu-id="317cb-126">**Obrázek 2**: přidejte stránky ASP.NET pro vlastní kurzy související s tlačítky.</span><span class="sxs-lookup"><span data-stu-id="317cb-126">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>

<span data-ttu-id="317cb-127">Podobně jako v ostatních složkách `Default.aspx` ve složce `CustomButtons` vypíše kurzy v části.</span><span class="sxs-lookup"><span data-stu-id="317cb-127">Like in the other folders, `Default.aspx` in the `CustomButtons` folder will list the tutorials in its section.</span></span> <span data-ttu-id="317cb-128">Zajistěte, aby tato funkce poskytovala `SectionLevelTutorialListing.ascx` uživatelský ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="317cb-128">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="317cb-129">Proto tento uživatelský ovládací prvek přidejte do `Default.aspx` tím, že ho přetáhnete z Průzkumník řešení na zobrazení Návrh stránky.</span><span class="sxs-lookup"><span data-stu-id="317cb-129">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page's Design view.</span></span>

<span data-ttu-id="317cb-130">[![přidat uživatelský ovládací prvek SectionLevelTutorialListing. ascx do default. aspx](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-130">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span></span>

<span data-ttu-id="317cb-131">**Obrázek 3**: Přidání uživatelského ovládacího prvku `SectionLevelTutorialListing.ascx` do `Default.aspx` ([kliknutím zobrazíte obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="317cb-131">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span></span>

<span data-ttu-id="317cb-132">Nakonec přidejte stránky jako položky do souboru `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="317cb-132">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="317cb-133">Konkrétně přidejte následující značku po stránkování a řazení `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="317cb-133">Specifically, add the following markup after the Paging and Sorting `<siteMapNode>`:</span></span>

[!code-xml[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample1.xml)]

<span data-ttu-id="317cb-134">Po aktualizaci `Web.sitemap`chvíli počkejte, než se zobrazí web kurzy prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="317cb-134">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="317cb-135">Nabídka na levé straně teď obsahuje položky pro kurzy pro úpravy, vkládání a odstraňování.</span><span class="sxs-lookup"><span data-stu-id="317cb-135">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![Mapa webu teď obsahuje položku pro úvodní kurz pro vlastní tlačítka.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image8.png)

<span data-ttu-id="317cb-137">**Obrázek 4**: Mapa webu teď obsahuje položku kurzu pro vlastní tlačítka.</span><span class="sxs-lookup"><span data-stu-id="317cb-137">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>

## <a name="step-2-adding-a-formview-that-lists-the-suppliers"></a><span data-ttu-id="317cb-138">Krok 2: Přidání třídy FormView se seznamem dodavatelů</span><span class="sxs-lookup"><span data-stu-id="317cb-138">Step 2: Adding a FormView that Lists the Suppliers</span></span>

<span data-ttu-id="317cb-139">Pojďme začít s tímto kurzem přidáním třídy FormView, která uvádí seznam dodavatelů.</span><span class="sxs-lookup"><span data-stu-id="317cb-139">Let's get started with this tutorial by adding the FormView that lists the suppliers.</span></span> <span data-ttu-id="317cb-140">Jak je popsáno v úvodu, tato třída FormView umožní uživateli stránkovat prostřednictvím dodavatelů a zobrazuje produkty poskytované dodavatelem v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-140">As discussed in the Introduction, this FormView will allow the user to page through the suppliers, showing the products provided by the supplier in a GridView.</span></span> <span data-ttu-id="317cb-141">Kromě toho bude tato třída FormView obsahovat tlačítko, které při kliknutí označí všechny produkty dodavatele jako vyřazené.</span><span class="sxs-lookup"><span data-stu-id="317cb-141">Additionally, this FormView will include a Button that, when clicked, will mark all of the supplier's products as discontinued.</span></span> <span data-ttu-id="317cb-142">Předtím, než se budeme věnovat dodržovali přidáním vlastního tlačítka na FormView, pojďme nejdřív vytvořit FormView, aby se zobrazily informace o dodavateli.</span><span class="sxs-lookup"><span data-stu-id="317cb-142">Before we concern ourselves with adding the custom button to the FormView, let's first just create the FormView so that it displays the supplier information.</span></span>

<span data-ttu-id="317cb-143">Začněte tím, že otevřete stránku `CustomButtons.aspx` ve složce `CustomButtons`.</span><span class="sxs-lookup"><span data-stu-id="317cb-143">Start by opening the `CustomButtons.aspx` page in the `CustomButtons` folder.</span></span> <span data-ttu-id="317cb-144">Přidejte na stránku FormView přetažením z panelu nástrojů do návrháře a nastavte jeho vlastnost `ID` na hodnotu `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="317cb-144">Add a FormView to the page by dragging it from the Toolbox onto the Designer and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="317cb-145">Z inteligentní značky FormView se můžete rozhodnout pro vytvoření nového prvku ObjectDataSource s názvem `SuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="317cb-145">From the FormView's smart tag, opt to create a new ObjectDataSource named `SuppliersDataSource`.</span></span>

<span data-ttu-id="317cb-146">[![vytvořit nový prvek ObjectDataSource s názvem SuppliersDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-146">[![Create a New ObjectDataSource Named SuppliersDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span></span>

<span data-ttu-id="317cb-147">**Obrázek 5**: vytvoření nového prvku ObjectDataSource s názvem `SuppliersDataSource` ([kliknutím zobrazíte obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="317cb-147">**Figure 5**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span></span>

<span data-ttu-id="317cb-148">Nakonfigurujte tento nový prvek ObjectDataSource tak, aby se dotazoval z metody `GetSuppliers()` `SuppliersBLL` třídy (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="317cb-148">Configure this new ObjectDataSource such that it queries from the `SuppliersBLL` class's `GetSuppliers()` method (see Figure 6).</span></span> <span data-ttu-id="317cb-149">Vzhledem k tomu, že tato třída FormView neposkytuje rozhraní pro aktualizaci informací o dodavatelích, vyberte v rozevíracím seznamu na kartě aktualizace možnost (žádná).</span><span class="sxs-lookup"><span data-stu-id="317cb-149">Since this FormView does not provide an interface for updating the supplier information, select the (None) option from the drop-down list in the UPDATE tab.</span></span>

<span data-ttu-id="317cb-150">[![nakonfigurovat zdroj dat tak, aby používal metodu SuppliersBLL třídy s getdodavatelé ()](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-150">[![Configure the Data Source to use the SuppliersBLL Class s GetSuppliers() Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span></span>

<span data-ttu-id="317cb-151">**Obrázek 6**: Konfigurace zdroje dat pro použití metody `GetSuppliers()` `SuppliersBLL` třídy ([kliknutím zobrazíte obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="317cb-151">**Figure 6**: Configure the Data Source to use the `SuppliersBLL` Class's `GetSuppliers()` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span></span>

<span data-ttu-id="317cb-152">Po nakonfigurování prvku ObjectDataSource bude aplikace Visual Studio generovat `InsertItemTemplate`, `EditItemTemplate`a `ItemTemplate` pro FormView.</span><span class="sxs-lookup"><span data-stu-id="317cb-152">After configuring the ObjectDataSource, Visual Studio will generate an `InsertItemTemplate`, `EditItemTemplate`, and `ItemTemplate` for the FormView.</span></span> <span data-ttu-id="317cb-153">Odeberte `InsertItemTemplate` a `EditItemTemplate` a upravte `ItemTemplate` tak, aby se zobrazil pouze název společnosti dodavatele a telefonní číslo.</span><span class="sxs-lookup"><span data-stu-id="317cb-153">Remove the `InsertItemTemplate` and `EditItemTemplate` and modify the `ItemTemplate` so that it displays just the supplier's company name and phone number.</span></span> <span data-ttu-id="317cb-154">Nakonec zapněte podporu stránkování pro FormView zaškrtnutím políčka Povolit stránkování z jeho inteligentní značky (nebo nastavením jeho vlastnosti `AllowPaging` na `True`).</span><span class="sxs-lookup"><span data-stu-id="317cb-154">Finally, turn on paging support for the FormView by checking the Enable Paging checkbox from its smart tag (or by setting its `AllowPaging` property to `True`).</span></span> <span data-ttu-id="317cb-155">Po těchto změnách by deklarativní označení stránky mělo vypadat podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="317cb-155">After these changes your page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample2.aspx)]

<span data-ttu-id="317cb-156">Obrázek 7 zobrazuje stránku CustomButtons. aspx při prohlížení v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="317cb-156">Figure 7 shows the CustomButtons.aspx page when viewed through a browser.</span></span>

<span data-ttu-id="317cb-157">[![ve třídě FormView jsou uvedena pole CompanyName a Phone z aktuálně vybraného dodavatele.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-157">[![The FormView Lists the CompanyName and Phone Fields from the Currently Selected Supplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span></span>

<span data-ttu-id="317cb-158">**Obrázek 7**: třída FormView vypisuje pole `CompanyName` a `Phone` z aktuálně vybraného dodavatele ([kliknutím zobrazíte obrázek v plné velikosti).](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-158">**Figure 7**: The FormView Lists the `CompanyName` and `Phone` Fields from the Currently Selected Supplier ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span></span>

## <a name="step-3-adding-a-gridview-that-lists-the-selected-suppliers-products"></a><span data-ttu-id="317cb-159">Krok 3: Přidání prvku GridView se seznamem produktů vybraných dodavatelů</span><span class="sxs-lookup"><span data-stu-id="317cb-159">Step 3: Adding a GridView that Lists the Selected Supplier's Products</span></span>

<span data-ttu-id="317cb-160">Předtím, než přidáte do šablony třídy FormView tlačítko ukončit všechny produkty, nejprve přidáme prvek GridView pod objektem FormView, který obsahuje seznam produktů poskytovaných vybraným dodavatelem.</span><span class="sxs-lookup"><span data-stu-id="317cb-160">Before we add the Discontinue All Products Button to the FormView's template, let's first add a GridView beneath the FormView that lists the products provided by the selected supplier.</span></span> <span data-ttu-id="317cb-161">Chcete-li toho dosáhnout, přidejte prvek GridView na stránku, nastavte jeho vlastnost `ID` na `SuppliersProducts`a přidejte nový prvek ObjectDataSource s názvem `SuppliersProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="317cb-161">To accomplish this, add a GridView to the page, set its `ID` property to `SuppliersProducts`, and add a new ObjectDataSource named `SuppliersProductsDataSource`.</span></span>

<span data-ttu-id="317cb-162">[![vytvořit nový prvek ObjectDataSource s názvem SuppliersProductsDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-162">[![Create a New ObjectDataSource Named SuppliersProductsDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span></span>

<span data-ttu-id="317cb-163">**Obrázek 8**: vytvoření nového prvku ObjectDataSource s názvem `SuppliersProductsDataSource` ([kliknutím zobrazíte obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="317cb-163">**Figure 8**: Create a New ObjectDataSource Named `SuppliersProductsDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span></span>

<span data-ttu-id="317cb-164">Nakonfigurujte tuto ObjectDataSource tak, aby používala metodu `GetProductsBySupplierID(supplierID)` třídy ProductsBLL (viz obrázek 9).</span><span class="sxs-lookup"><span data-stu-id="317cb-164">Configure this ObjectDataSource to use the ProductsBLL class's `GetProductsBySupplierID(supplierID)` method (see Figure 9).</span></span> <span data-ttu-id="317cb-165">I když tento prvek GridView umožní úpravu ceny produktu, nepoužije integrované úpravy nebo odstranění funkcí z prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-165">While this GridView will allow for a product's price to be adjusted, it won't be using the built-in editing or deleting features from the GridView.</span></span> <span data-ttu-id="317cb-166">Proto můžeme rozevírací seznam nastavit na (žádný) pro karty aktualizace, vložení a odstranění prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="317cb-166">Therefore, we can set the drop-down list to (None) for the ObjectDataSource's UPDATE, INSERT, and DELETE tabs.</span></span>

<span data-ttu-id="317cb-167">[![nakonfigurovat zdroj dat tak, aby používal metodu ProductsBLL třídy s GetProductsBySupplierID (KódDodavatele)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-167">[![Configure the Data Source to use the ProductsBLL Class s GetProductsBySupplierID(supplierID) Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span></span>

<span data-ttu-id="317cb-168">**Obrázek 9**: Konfigurace zdroje dat pro použití metody `GetProductsBySupplierID(supplierID)` `ProductsBLL` třídy ([kliknutím zobrazíte obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="317cb-168">**Figure 9**: Configure the Data Source to use the `ProductsBLL` Class's `GetProductsBySupplierID(supplierID)` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span></span>

<span data-ttu-id="317cb-169">Vzhledem k tomu, že metoda `GetProductsBySupplierID(supplierID)` přijímá vstupní parametr, průvodce ObjectDataSource zobrazí výzvu pro zdroj této hodnoty parametru.</span><span class="sxs-lookup"><span data-stu-id="317cb-169">Since the `GetProductsBySupplierID(supplierID)` method accepts an input parameter, the ObjectDataSource wizard prompts us for the source of this parameter value.</span></span> <span data-ttu-id="317cb-170">Chcete-li předat `SupplierID` hodnotu ze třídy FormView, nastavte rozevírací seznam zdroj parametru na hodnotu Control a rozevírací seznam ControlID na `Suppliers` (ID třídy FormView vytvořené v kroku 2).</span><span class="sxs-lookup"><span data-stu-id="317cb-170">To pass in the `SupplierID` value from the FormView, set the Parameter source drop-down list to Control and the ControlID drop-down list to `Suppliers` (the ID of the FormView created in Step 2).</span></span>

<span data-ttu-id="317cb-171">[![označuje, že parametr KódDodavatele by měl pocházet z ovládacího prvku dodavatelé FormView.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-171">[![Indicate that the supplierID Parameter Should Come from the Suppliers FormView Control](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span></span>

<span data-ttu-id="317cb-172">**Obrázek 10**: Určete, že parametr *`supplierID`* by měl pocházet z ovládacího prvku `Suppliers` FormView ([kliknutím zobrazíte obrázek v plné velikosti).](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-172">**Figure 10**: Indicate that the *`supplierID`* Parameter Should Come from the `Suppliers` FormView Control ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span></span>

<span data-ttu-id="317cb-173">Po dokončení průvodce ObjectDataSource bude ovládací prvek GridView obsahovat vlastnost BoundField nebo třídě CheckBoxField podporována pro každé z datových polí produktu.</span><span class="sxs-lookup"><span data-stu-id="317cb-173">After completing the ObjectDataSource wizard, the GridView will contain a BoundField or CheckBoxField for each of the product's data fields.</span></span> <span data-ttu-id="317cb-174">Pojďme to zkrátit, aby se zobrazily pouze `ProductName` a `UnitPrice` BoundFields spolu s `Discontinued` třídě CheckBoxField podporována; Navíc naformátujte `UnitPrice` vlastnost BoundField tak, aby byl jeho text formátován jako měna.</span><span class="sxs-lookup"><span data-stu-id="317cb-174">Let's trim this down to show just the `ProductName` and `UnitPrice` BoundFields along with the `Discontinued` CheckBoxField; furthermore, let's format the `UnitPrice` BoundField such that its text is formatted as a currency.</span></span> <span data-ttu-id="317cb-175">Vaše GridView a `SuppliersProductsDataSource` deklarativní značky ObjectDataSource by měly vypadat podobně jako v následujícím kódu:</span><span class="sxs-lookup"><span data-stu-id="317cb-175">Your GridView and `SuppliersProductsDataSource` ObjectDataSource's declarative markup should look similar to the following markup:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample3.aspx)]

<span data-ttu-id="317cb-176">V tomto okamžiku náš kurz zobrazí sestavu hlavní/podrobnosti, která umožňuje uživateli vybrat ze třídy FormView v horní části a zobrazit produkty poskytované tímto dodavatelem v dolní části prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-176">At this point our tutorial displays a master/details report, allowing the user to pick a supplier from the FormView at the top and to view the products provided by that supplier through the GridView at the bottom.</span></span> <span data-ttu-id="317cb-177">Obrázek 11 znázorňuje snímek obrazovky této stránky při výběru dodavatele Tokio Traders ze třídy FormView.</span><span class="sxs-lookup"><span data-stu-id="317cb-177">Figure 11 shows a screen shot of this page when selecting the Tokyo Traders supplier from the FormView.</span></span>

<span data-ttu-id="317cb-178">[![vybrané produkty dodavatele se zobrazí v prvku GridView.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-178">[![The Selected Supplier s Products are Displayed in the GridView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span></span>

<span data-ttu-id="317cb-179">**Obrázek 11**: produkty vybraného dodavatele se zobrazí v prvku GridView ([kliknutím zobrazíte obrázek v plné velikosti).](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-179">**Figure 11**: The Selected Supplier's Products are Displayed in the GridView ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span></span>

## <a name="step-4-creating-dal-and-bll-methods-to-discontinue-all-products-for-a-supplier"></a><span data-ttu-id="317cb-180">Krok 4: vytvoření metod DAL a knihoven BLL pro oddálení všech produktů pro dodavatele</span><span class="sxs-lookup"><span data-stu-id="317cb-180">Step 4: Creating DAL and BLL Methods to Discontinue All Products for a Supplier</span></span>

<span data-ttu-id="317cb-181">Před přidáním tlačítka do třídy FormView, který po kliknutí vypustí všechny produkty dodavatele, musíme nejdřív přidat metodu do DAL i do knihoven BLL, které tuto akci provádí.</span><span class="sxs-lookup"><span data-stu-id="317cb-181">Before we can add a Button to the FormView that, when clicked, discontinues all of the supplier's products, we first need to add a method to both the DAL and BLL that performs this action.</span></span> <span data-ttu-id="317cb-182">Konkrétně tato metoda bude pojmenována `DiscontinueAllProductsForSupplier(supplierID)`.</span><span class="sxs-lookup"><span data-stu-id="317cb-182">In particular, this method will be named `DiscontinueAllProductsForSupplier(supplierID)`.</span></span> <span data-ttu-id="317cb-183">Po kliknutí na tlačítko FormView vyvoláme tuto metodu ve vrstvě obchodní logiky, která předává `SupplierID`vybraného dodavatele; KNIHOVEN BLL pak zavolá do odpovídající metody vrstvy přístupu k datům, která vydá příkaz `UPDATE` do databáze, která ukončí produkty zadaného dodavatele.</span><span class="sxs-lookup"><span data-stu-id="317cb-183">When the FormView's Button is clicked, we'll invoke this method in the Business Logic Layer, passing in the selected supplier's `SupplierID`; the BLL will then call down to the corresponding Data Access Layer method, which will issue an `UPDATE` statement to the database that discontinues the specified supplier's products.</span></span>

<span data-ttu-id="317cb-184">Jak jsme udělali v předchozích kurzech, použijeme k tomu nejnižší přístup, počínaje vytvořením metody DAL, potom metodou knihoven BLL a nakonec implementací funkcí na stránce ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="317cb-184">As we have done in our previous tutorials, we'll use a bottom-up approach, starting with creating the DAL method, then the BLL method, and finally implementing the functionality in the ASP.NET page.</span></span> <span data-ttu-id="317cb-185">Otevřete `Northwind.xsd` typovou datovou sadu ve složce `App_Code/DAL` a přidejte do `ProductsTableAdapter` novou metodu (klikněte pravým tlačítkem na `ProductsTableAdapter` a vyberte Přidat dotaz).</span><span class="sxs-lookup"><span data-stu-id="317cb-185">Open the `Northwind.xsd` Typed DataSet in the `App_Code/DAL` folder and add a new method to the `ProductsTableAdapter` (right-click on the `ProductsTableAdapter` and choose Add Query).</span></span> <span data-ttu-id="317cb-186">Provedete to tak, že zobrazíte Průvodce konfigurací dotazu TableAdapter, který nás provede procesem přidání nové metody.</span><span class="sxs-lookup"><span data-stu-id="317cb-186">Doing so will bring up the TableAdapter Query Configuration wizard, which walks us through the process of adding the new method.</span></span> <span data-ttu-id="317cb-187">Začněte tím, že určíte, že metoda DAL použije příkaz SQL ad-hoc.</span><span class="sxs-lookup"><span data-stu-id="317cb-187">Start by indicating that our DAL method will use an ad-hoc SQL statement.</span></span>

<span data-ttu-id="317cb-188">[![vytvořit metodu DAL pomocí příkazu SQL ad hoc](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-188">[![Create the DAL Method Using an Ad-Hoc SQL Statement](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span></span>

<span data-ttu-id="317cb-189">**Obrázek 12**: vytvoření metody dal pomocí ad-hoc příkazu SQL ([kliknutím zobrazíte obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="317cb-189">**Figure 12**: Create the DAL Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span></span>

<span data-ttu-id="317cb-190">V dalším kroku vás průvodce vyzve k zadání typu dotazu, který se má vytvořit.</span><span class="sxs-lookup"><span data-stu-id="317cb-190">Next, the wizard prompts us as to what type of query to create.</span></span> <span data-ttu-id="317cb-191">Vzhledem k tomu, že metoda `DiscontinueAllProductsForSupplier(supplierID)` bude muset aktualizovat `Products` databázovou tabulku, nastaví `Discontinued` pole na hodnotu 1 pro všechny produkty poskytované zadaným *`supplierID`* , musíme vytvořit dotaz, který aktualizuje data.</span><span class="sxs-lookup"><span data-stu-id="317cb-191">Since the `DiscontinueAllProductsForSupplier(supplierID)` method will need to update the `Products` database table, setting the `Discontinued` field to 1 for all products provided by the specified *`supplierID`*, we need to create a query that updates data.</span></span>

<span data-ttu-id="317cb-192">[![zvolit typ dotazu UPDATE](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-192">[![Choose the UPDATE Query Type](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span></span>

<span data-ttu-id="317cb-193">**Obrázek 13**: Vyberte typ dotazu Update ([kliknutím zobrazíte obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png)).</span><span class="sxs-lookup"><span data-stu-id="317cb-193">**Figure 13**: Choose the UPDATE Query Type ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span></span>

<span data-ttu-id="317cb-194">Další obrazovka průvodce poskytuje existující příkaz `UPDATE` TableAdapter, který aktualizuje všechna pole definovaná v `Products` DataTable.</span><span class="sxs-lookup"><span data-stu-id="317cb-194">The next wizard screen provides the TableAdapter's existing `UPDATE` statement, which updates each of the fields defined in the `Products` DataTable.</span></span> <span data-ttu-id="317cb-195">Nahraďte tento text dotazu následujícím příkazem:</span><span class="sxs-lookup"><span data-stu-id="317cb-195">Replace this query text with the following statement:</span></span>

[!code-sql[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample4.sql)]

<span data-ttu-id="317cb-196">Po zadání tohoto dotazu a kliknutí na tlačítko Další se zobrazí poslední obrazovka průvodce s názvem nové metody použít `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="317cb-196">After entering this query and clicking Next, the last wizard screen asks for the new method's name use `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="317cb-197">Průvodce dokončíte kliknutím na tlačítko Dokončit.</span><span class="sxs-lookup"><span data-stu-id="317cb-197">Complete the wizard by clicking the Finish button.</span></span> <span data-ttu-id="317cb-198">Po návratu do návrháře DataSet by se měla zobrazit nová metoda v `ProductsTableAdapter` s názvem `DiscontinueAllProductsForSupplier(@SupplierID)`.</span><span class="sxs-lookup"><span data-stu-id="317cb-198">Upon returning to the DataSet Designer you should see a new method in the `ProductsTableAdapter` named `DiscontinueAllProductsForSupplier(@SupplierID)`.</span></span>

<span data-ttu-id="317cb-199">[![název nové metody DAL DiscontinueAllProductsForSupplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-199">[![Name the New DAL Method DiscontinueAllProductsForSupplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span></span>

<span data-ttu-id="317cb-200">**Obrázek 14**: pojmenování nové metody dal `DiscontinueAllProductsForSupplier` ([kliknutím zobrazíte obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="317cb-200">**Figure 14**: Name the New DAL Method `DiscontinueAllProductsForSupplier` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span></span>

<span data-ttu-id="317cb-201">S metodou `DiscontinueAllProductsForSupplier(supplierID)` vytvořenou ve vrstvě přístupu k datům je náš další úkol vytvoření metody `DiscontinueAllProductsForSupplier(supplierID)` ve vrstvě obchodní logiky.</span><span class="sxs-lookup"><span data-stu-id="317cb-201">With the `DiscontinueAllProductsForSupplier(supplierID)` method created in the Data Access Layer, our next task is to create the `DiscontinueAllProductsForSupplier(supplierID)` method in the Business Logic Layer.</span></span> <span data-ttu-id="317cb-202">Chcete-li to provést, otevřete soubor třídy `ProductsBLL` a přidejte následující:</span><span class="sxs-lookup"><span data-stu-id="317cb-202">To accomplish this, open the `ProductsBLL` class file and add the following:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample5.cs)]

<span data-ttu-id="317cb-203">Tato metoda jednoduše volá metodu `DiscontinueAllProductsForSupplier(supplierID)` v hodnotě DAL a předává se do poskytnuté *`supplierID`* hodnoty parametru.</span><span class="sxs-lookup"><span data-stu-id="317cb-203">This method simply calls down to the `DiscontinueAllProductsForSupplier(supplierID)` method in the DAL, passing along the provided *`supplierID`* parameter value.</span></span> <span data-ttu-id="317cb-204">Pokud existovala nějaká obchodní pravidla, která za určitých okolností mají za následek, že produkty dodavatele mají za následek nedodržení, měla by být tato pravidla implementována v knihoven BLL.</span><span class="sxs-lookup"><span data-stu-id="317cb-204">If there were any business rules that only allowed a supplier's products to be discontinued under certain circumstances, those rules should be implemented here, in the BLL.</span></span>

> [!NOTE]
> <span data-ttu-id="317cb-205">Na rozdíl od přetížení `UpdateProduct` ve třídě `ProductsBLL` nezahrnuje signatura metody `DiscontinueAllProductsForSupplier(supplierID)` atribut `DataObjectMethodAttribute` (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span><span class="sxs-lookup"><span data-stu-id="317cb-205">Unlike the `UpdateProduct` overloads in the `ProductsBLL` class, the `DiscontinueAllProductsForSupplier(supplierID)` method signature does not include the `DataObjectMethodAttribute` attribute (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span></span> <span data-ttu-id="317cb-206">To vylučuje metodu `DiscontinueAllProductsForSupplier(supplierID)` z rozevíracího seznamu Průvodce konfigurací zdroje dat v prvku ObjectDataSource na kartě aktualizace. Jsem tento atribut vynechal, protože budeme volat metodu `DiscontinueAllProductsForSupplier(supplierID)` přímo z obslužné rutiny události na naší stránce ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="317cb-206">This precludes the `DiscontinueAllProductsForSupplier(supplierID)` method from the ObjectDataSource's Configure Data Source wizard's drop-down list in the UPDATE tab. I ve omitted this attribute because we'll be calling the `DiscontinueAllProductsForSupplier(supplierID)` method directly from an event handler in our ASP.NET page.</span></span>

## <a name="step-5-adding-a-discontinue-all-products-button-to-the-formview"></a><span data-ttu-id="317cb-207">Krok 5: Přidání tlačítka ukončit všechny produkty do třídy FormView</span><span class="sxs-lookup"><span data-stu-id="317cb-207">Step 5: Adding a Discontinue All Products Button to the FormView</span></span>

<span data-ttu-id="317cb-208">V případě, že je v knihoven BLL a DAL k dis`DiscontinueAllProductsForSupplier(supplierID)` metoda a DAL, je posledním krokem pro přidání možnosti pro ukončení všech produktů pro vybraného dodavatele Přidání webového ovládacího prvku tlačítko do `ItemTemplate`FormView.</span><span class="sxs-lookup"><span data-stu-id="317cb-208">With the `DiscontinueAllProductsForSupplier(supplierID)` method in the BLL and DAL complete, the final step for adding the ability to discontinue all products for the selected supplier is to add a Button Web control to the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="317cb-209">Přidáme toto tlačítko pod telefonním číslem dodavatele s textem tlačítka, vynechá všechny produkty a `ID` hodnotu vlastnosti `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="317cb-209">Let's add such a Button below the supplier's phone number with the button text, Discontinue All Products and an `ID` property value of `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="317cb-210">Toto webové ovládací prvky můžete přidat prostřednictvím návrháře kliknutím na odkaz Upravit šablony v inteligentní značce třídy FormView (viz obrázek 15) nebo přímo prostřednictvím deklarativní syntaxe.</span><span class="sxs-lookup"><span data-stu-id="317cb-210">You can add this Button Web control through the Designer by clicking on the Edit Templates link in the FormView's smart tag (see Figure 15), or directly through the declarative syntax.</span></span>

<span data-ttu-id="317cb-211">[![přidání webového ovládacího prvku tlačítko ukončit všechny produkty do třídy FormView s ItemTemplate](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-211">[![Add a Discontinue All Products Button Web Control to the FormView s ItemTemplate](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span></span>

<span data-ttu-id="317cb-212">**Obrázek 15**: Přidání webového ovládacího prvku tlačítko ukončit všechny produkty do `ItemTemplate` FormView ([kliknutím zobrazíte obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span><span class="sxs-lookup"><span data-stu-id="317cb-212">**Figure 15**: Add a Discontinue All Products Button Web Control to the FormView's `ItemTemplate` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span></span>

<span data-ttu-id="317cb-213">Když na tlačítko klikne uživatel, který navštíví stránku, vystavuje se postback a aktivuje se [`ItemCommand` událost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) třídy FormView.</span><span class="sxs-lookup"><span data-stu-id="317cb-213">When the Button is clicked by a user visiting the page, a postback ensues and the FormView's [`ItemCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) fires.</span></span> <span data-ttu-id="317cb-214">Chcete-li spustit vlastní kód jako odpověď na toto tlačítko, můžeme vytvořit obslužnou rutinu události pro tuto událost.</span><span class="sxs-lookup"><span data-stu-id="317cb-214">To execute custom code in response to this Button being clicked, we can create an event handler for this event.</span></span> <span data-ttu-id="317cb-215">Seznamte se i v případě, že událost `ItemCommand` *aktivuje při každém* kliknutí na tlačítko, LinkButton nebo webový ovládací prvek obrázkové ve třídě FormView.</span><span class="sxs-lookup"><span data-stu-id="317cb-215">Understand, though, that the `ItemCommand` event fires whenever *any* Button, LinkButton, or ImageButton Web control is clicked within the FormView.</span></span> <span data-ttu-id="317cb-216">To znamená, že když se uživatel přesune z jedné stránky na jinou ve třídě FormView, aktivuje se `ItemCommand` událost; stejné, když uživatel klikne na nové, upravit nebo odstranit ve třídě FormView, která podporuje vložení, aktualizaci nebo odstranění.</span><span class="sxs-lookup"><span data-stu-id="317cb-216">That means that when the user moves from one page to another in the FormView, the `ItemCommand` event fires; same thing when the user clicks New, Edit, or Delete in a FormView that supports inserting, updating, or deleting.</span></span>

<span data-ttu-id="317cb-217">Vzhledem k tomu, že se `ItemCommand` aktivuje bez ohledu na to, na jaké tlačítko jste klikli, potřebuje v obslužné rutině události, abyste zjistili, jestli jste klikli na tlačítko ukončit všechny produkty, nebo jestli se jednalo o nějaké jiné tlačítko.</span><span class="sxs-lookup"><span data-stu-id="317cb-217">Since the `ItemCommand` fires regardless of what button is clicked, in the event handler we need a way to determine if the Discontinue All Products Button was clicked or if it was some other button.</span></span> <span data-ttu-id="317cb-218">K tomu můžeme nastavit vlastnost `CommandName` webového ovládacího prvku tlačítko na určitou identifikační hodnotu.</span><span class="sxs-lookup"><span data-stu-id="317cb-218">To accomplish this, we can set the Button Web control's `CommandName` property to some identifying value.</span></span> <span data-ttu-id="317cb-219">Po kliknutí na tlačítko se tato hodnota `CommandName` předává do obslužné rutiny události `ItemCommand` a umožňuje nám určit, zda bylo tlačítko ukončit všechny produkty kliknuto na tlačítko.</span><span class="sxs-lookup"><span data-stu-id="317cb-219">When the Button is clicked, this `CommandName` value is passed into the `ItemCommand` event handler, enabling us to determine whether the Discontinue All Products Button was the button clicked.</span></span> <span data-ttu-id="317cb-220">Nastavte vlastnost `CommandName` tlačítka pro všechny produkty na hodnotu DiscontinueProducts.</span><span class="sxs-lookup"><span data-stu-id="317cb-220">Set the Discontinue All Products Button's `CommandName` property to DiscontinueProducts .</span></span>

<span data-ttu-id="317cb-221">Nakonec použijeme dialogové okno pro potvrzení na straně klienta, které zajistí, že uživatel bude chtít, aby produkt vybraným dodavatelem nepokračoval.</span><span class="sxs-lookup"><span data-stu-id="317cb-221">Finally, let's use a client-side confirm dialog box to ensure that the user really wants to discontinue the selected supplier's products.</span></span> <span data-ttu-id="317cb-222">Vzhledem k tomu, že jsme [při odstraňování kurzu viděli potvrzení na straně klienta](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) , můžete to provést pomocí bitu JavaScriptu.</span><span class="sxs-lookup"><span data-stu-id="317cb-222">As we saw in the [Adding Client-Side Confirmation When Deleting](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) tutorial, this can be accomplished with a bit of JavaScript.</span></span> <span data-ttu-id="317cb-223">Konkrétně nastavte vlastnost OnClientClick webového ovládacího prvku tlačítko na hodnotu `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span><span class="sxs-lookup"><span data-stu-id="317cb-223">In particular, set the Button Web control's OnClientClick property to `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span></span>

<span data-ttu-id="317cb-224">Po provedení těchto změn by deklarativní syntaxe třídy FormView vypadala takto:</span><span class="sxs-lookup"><span data-stu-id="317cb-224">After making these changes, the FormView's declarative syntax should look like the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample6.aspx)]

<span data-ttu-id="317cb-225">Dále vytvořte obslužnou rutinu události pro událost `ItemCommand` třídy FormView.</span><span class="sxs-lookup"><span data-stu-id="317cb-225">Next, create an event handler for the FormView's `ItemCommand` event.</span></span> <span data-ttu-id="317cb-226">V této obslužné rutině je třeba nejprve určit, zda bylo stisknuto tlačítko ukončit všechny produkty.</span><span class="sxs-lookup"><span data-stu-id="317cb-226">In this event handler we need to first determine whether the Discontinue All Products Button was clicked.</span></span> <span data-ttu-id="317cb-227">Pokud ano, chceme vytvořit instanci třídy `ProductsBLL` a vyvolat svoji `DiscontinueAllProductsForSupplier(supplierID)` metodu, která předává `SupplierID` vybrané třídy FormView:</span><span class="sxs-lookup"><span data-stu-id="317cb-227">If so, we want to create an instance of the `ProductsBLL` class and invoke its `DiscontinueAllProductsForSupplier(supplierID)` method, passing in the `SupplierID` of the selected FormView:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample7.cs)]

<span data-ttu-id="317cb-228">Všimněte si, že `SupplierID` aktuálně vybraného dodavatele ve třídě FormView lze použít [vlastnost`SelectedValue`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx)třídy FormView.</span><span class="sxs-lookup"><span data-stu-id="317cb-228">Note that the `SupplierID` of the current selected supplier in the FormView can be accessed using the FormView's [`SelectedValue` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span></span> <span data-ttu-id="317cb-229">Vlastnost `SelectedValue` vrací první hodnotu datového klíče pro záznam, který se zobrazuje ve třídě FormView.</span><span class="sxs-lookup"><span data-stu-id="317cb-229">The `SelectedValue` property returns the first data key value for the record being displayed in the FormView.</span></span> <span data-ttu-id="317cb-230">[Vlastnost`DataKeyNames`](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx)třídy FormView, která označuje datová pole, ze kterých jsou načteny hodnoty datových klíčů, byla automaticky nastavena na `SupplierID` sadou Visual Studio při svázání prvku ObjectDataSource s nástrojem FormView zpět v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="317cb-230">The FormView's [`DataKeyNames` property](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), which indicates the data fields from which the data key values are pulled from, was automatically set to `SupplierID` by Visual Studio when binding the ObjectDataSource to the FormView back in Step 2.</span></span>

<span data-ttu-id="317cb-231">Když je vytvořená obslužná rutina události `ItemCommand`, chvíli otestujte stránku.</span><span class="sxs-lookup"><span data-stu-id="317cb-231">With the `ItemCommand` event handler created, take a moment to test out the page.</span></span> <span data-ttu-id="317cb-232">Přejděte na dodavatele Cooperativa de quesos "Las Cabras (je to pátý dodavatel ve třídě FormView pro mě).</span><span class="sxs-lookup"><span data-stu-id="317cb-232">Browse to the Cooperativa de Quesos 'Las Cabras' supplier (it's the fifth supplier in the FormView for me).</span></span> <span data-ttu-id="317cb-233">Tento dodavatel poskytuje dva produkty, queso Cabrales a Queso Manchego La PAStore, *které nejsou* ukončeny.</span><span class="sxs-lookup"><span data-stu-id="317cb-233">This supplier provides two products, Queso Cabrales and Queso Manchego La Pastora, both of which are *not* discontinued.</span></span>

<span data-ttu-id="317cb-234">Představte si, že Cooperativa de quesos "Las Cabras" zmizela z podnikání, takže jeho produkty mají být ukončeny.</span><span class="sxs-lookup"><span data-stu-id="317cb-234">Imagine that Cooperativa de Quesos 'Las Cabras' has gone out of business and therefore its products are to be discontinued.</span></span> <span data-ttu-id="317cb-235">Klikněte na tlačítko ukončit všechny produkty.</span><span class="sxs-lookup"><span data-stu-id="317cb-235">Click the Discontinue All Products Button.</span></span> <span data-ttu-id="317cb-236">Zobrazí se dialogové okno pro potvrzení na straně klienta (viz obrázek 16).</span><span class="sxs-lookup"><span data-stu-id="317cb-236">This will display the client-side confirm dialog box (see Figure 16).</span></span>

<span data-ttu-id="317cb-237">[![Cooperativa de quesos Las Cabras nabízí dva aktivní produkty](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-237">[![Cooperativa de Quesos Las Cabras Supplies Two Active Products](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span></span>

<span data-ttu-id="317cb-238">**Obrázek 16**: Cooperativa de quesos Las Cabras nabízí dva aktivní produkty ([kliknutím zobrazíte obrázek v plné velikosti).](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-238">**Figure 16**: Cooperativa de Quesos Las Cabras Supplies Two Active Products ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span></span>

<span data-ttu-id="317cb-239">Pokud kliknete na tlačítko OK v dialogovém okně potvrzení na straně klienta, bude odesílání formuláře pokračovat, což způsobí postback, ve kterém bude vyvolána událost `ItemCommand` třídy FormView.</span><span class="sxs-lookup"><span data-stu-id="317cb-239">If you click OK in the client-side confirm dialog box, the form submission will proceed, causing a postback in which the FormView's `ItemCommand` event will fire.</span></span> <span data-ttu-id="317cb-240">Obslužná rutina události, kterou jsme vytvořili, se pak spustí, vyvolá metodu `DiscontinueAllProductsForSupplier(supplierID)` a nepokračuje v produktech queso Cabrales a Queso Manchego La PAStore.</span><span class="sxs-lookup"><span data-stu-id="317cb-240">The event handler we created will then execute, invoking the `DiscontinueAllProductsForSupplier(supplierID)` method and discontinuing both the Queso Cabrales and Queso Manchego La Pastora products.</span></span>

<span data-ttu-id="317cb-241">Pokud jste zakázali stav zobrazení prvku GridView, je prvek GridView při každém zpětném odeslání svázán s podkladovým úložištěm dat, a proto bude okamžitě aktualizován, aby odrážel, že tyto dva produkty jsou nyní ukončeny (viz obrázek 17).</span><span class="sxs-lookup"><span data-stu-id="317cb-241">If you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect that these two products are now discontinued (see Figure 17).</span></span> <span data-ttu-id="317cb-242">Pokud však v prvku GridView není zakázán stav zobrazení, budete muset po provedení této změny ručně znovu vytvořit vazby dat na prvek GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-242">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="317cb-243">K tomuto účelu jednoduše zavolejte metodu `DataBind()` prvku GridView ihned po vyvolání metody `DiscontinueAllProductsForSupplier(supplierID)`.</span><span class="sxs-lookup"><span data-stu-id="317cb-243">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `DiscontinueAllProductsForSupplier(supplierID)` method.</span></span>

<span data-ttu-id="317cb-244">[![po kliknutí na tlačítko ukončit všechny produkty se odpovídajícím způsobem aktualizují produkty dodavatele.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-244">[![After Clicking the Discontinue All Products Button, the Supplier s Products are Updated Accordingly](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span></span>

<span data-ttu-id="317cb-245">**Obrázek 17**: po kliknutí na tlačítko ukončit všechny produkty se odpovídajícím způsobem aktualizují produkty dodavatele ([kliknutím zobrazíte obrázek v plné velikosti](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png)).</span><span class="sxs-lookup"><span data-stu-id="317cb-245">**Figure 17**: After Clicking the Discontinue All Products Button, the Supplier's Products are Updated Accordingly ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span></span>

## <a name="step-6-creating-an-updateproduct-overload-in-the-business-logic-layer-for-adjusting-a-products-price"></a><span data-ttu-id="317cb-246">Krok 6: vytvoření přetížení UpdateProduct ve vrstvě obchodní logiky pro úpravu ceny produktu</span><span class="sxs-lookup"><span data-stu-id="317cb-246">Step 6: Creating an UpdateProduct Overload in the Business Logic Layer for Adjusting a Product's Price</span></span>

<span data-ttu-id="317cb-247">Podobně jako u tlačítka ukončit všechny produkty ve třídě FormView, aby bylo možné přidat tlačítka pro zvýšení a snížení ceny pro produkt v prvku GridView, je nutné nejprve přidat příslušnou vrstvu pro přístup k datům a metody vrstvy obchodní logiky.</span><span class="sxs-lookup"><span data-stu-id="317cb-247">Like with the Discontinue All Products Button in the FormView, in order to add buttons for increasing and decreasing the price for a product in the GridView we need to first add the appropriate Data Access Layer and Business Logic Layer methods.</span></span> <span data-ttu-id="317cb-248">Vzhledem k tomu, že už máme metodu, která aktualizuje jeden řádek produktu na DAL, můžeme tyto funkce poskytnout vytvořením nového přetížení pro metodu `UpdateProduct` v knihoven BLL.</span><span class="sxs-lookup"><span data-stu-id="317cb-248">Since we already have a method that updates a single product row in the DAL, we can provide such functionality by creating a new overload for the `UpdateProduct` method in the BLL.</span></span>

<span data-ttu-id="317cb-249">Naše starší `UpdateProduct` přetížení povedla v některé kombinaci polí produktu jako skalárních vstupních hodnot a pak aktualizovala pouze ta pole pro zadaný produkt.</span><span class="sxs-lookup"><span data-stu-id="317cb-249">Our past `UpdateProduct` overloads have taken in some combination of product fields as scalar input values and have then updated just those fields for the specified product.</span></span> <span data-ttu-id="317cb-250">Pro toto přetížení se mírně liší od tohoto standardu a místo toho se předává `ProductID` a procento, podle kterého se `UnitPrice` (na rozdíl od předání v novém upravený `UnitPrice` sám).</span><span class="sxs-lookup"><span data-stu-id="317cb-250">For this overload we'll vary slightly from this standard and instead pass in the product's `ProductID` and the percentage by which to adjust the `UnitPrice` (as opposed to passing in the new, adjusted `UnitPrice` itself).</span></span> <span data-ttu-id="317cb-251">Tento přístup zjednodušuje kód, který potřebujeme pro zápis do třídy ASP.NET stránky s kódem na pozadí, protože nemusíme bother s určením `UnitPrice`aktuálního produktu.</span><span class="sxs-lookup"><span data-stu-id="317cb-251">This approach will simplify the code we need to write in the ASP.NET page code-behind class, since we don't have to bother with determining the current product's `UnitPrice`.</span></span>

<span data-ttu-id="317cb-252">`UpdateProduct` přetížení tohoto kurzu vidíte níže:</span><span class="sxs-lookup"><span data-stu-id="317cb-252">The `UpdateProduct` overload for this tutorial is shown below:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample8.cs)]

<span data-ttu-id="317cb-253">Toto přetížení načte informace o zadaném produktu prostřednictvím metody `GetProductByProductID(productID)` DAL.</span><span class="sxs-lookup"><span data-stu-id="317cb-253">This overload retrieves information about the specified product through the DAL's `GetProductByProductID(productID)` method.</span></span> <span data-ttu-id="317cb-254">Pak zkontroluje, jestli je `UnitPrice` produktu přiřazená `NULL` hodnota databáze.</span><span class="sxs-lookup"><span data-stu-id="317cb-254">It then checks to see whether the product's `UnitPrice` is assigned a database `NULL` value.</span></span> <span data-ttu-id="317cb-255">V takovém případě je cena ponechána beze změny.</span><span class="sxs-lookup"><span data-stu-id="317cb-255">If it is, the price is left unaltered.</span></span> <span data-ttu-id="317cb-256">Pokud však existuje hodnota `UnitPrice`, která není`NULL`, metoda aktualizuje `UnitPrice` produktu pomocí zadaného procenta (`unitPriceAdjustmentPercent`).</span><span class="sxs-lookup"><span data-stu-id="317cb-256">If, however, there is a non-`NULL` `UnitPrice` value, the method updates the product's `UnitPrice` by the specified percent (`unitPriceAdjustmentPercent`).</span></span>

## <a name="step-7-adding-the-increase-and-decrease-buttons-to-the-gridview"></a><span data-ttu-id="317cb-257">Krok 7: Přidání tlačítek zvětšit a zmenšit do prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-257">Step 7: Adding the Increase and Decrease Buttons to the GridView</span></span>

<span data-ttu-id="317cb-258">Prvek GridView (a DetailsView) se skládá z kolekce polí.</span><span class="sxs-lookup"><span data-stu-id="317cb-258">The GridView (and DetailsView) are both made up of a collection of fields.</span></span> <span data-ttu-id="317cb-259">Kromě BoundFields, CheckBoxFields a TemplateFields ASP.NET zahrnuje ButtonField, což znamená, že jako název napovídá, vykreslí jako sloupec s tlačítkem, LinkButton nebo obrázkové pro každý řádek.</span><span class="sxs-lookup"><span data-stu-id="317cb-259">In addition to BoundFields, CheckBoxFields, and TemplateFields, ASP.NET includes the ButtonField, which, as its name implies, renders as a column with a Button, LinkButton, or ImageButton for each row.</span></span> <span data-ttu-id="317cb-260">Podobně jako u třídy FormView, kliknutí na *jakékoli* tlačítko v rámci tlačítek stránkování ovládacího prvku GridView, tlačítka upravit nebo odstranit, tlačítka řazení a tak v důsledku způsobí postback a vyvolá [událost`RowCommand`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-260">Similar to the FormView, clicking *any* button within the GridView paging buttons, Edit or Delete buttons, sorting buttons, and so on causes a postback and raises the GridView's [`RowCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span></span>

<span data-ttu-id="317cb-261">ButtonField má vlastnost `CommandName`, která přiřadí zadanou hodnotu každému tlačítku `CommandName` vlastností.</span><span class="sxs-lookup"><span data-stu-id="317cb-261">The ButtonField has a `CommandName` property that assigns the specified value to each of its Buttons `CommandName` properties.</span></span> <span data-ttu-id="317cb-262">Podobně jako u třídy FormView je hodnota `CommandName` používána obslužnou rutinou události `RowCommand` k určení, na které tlačítko bylo kliknuto.</span><span class="sxs-lookup"><span data-stu-id="317cb-262">Like with the FormView, the `CommandName` value is used by the `RowCommand` event handler to determine which button was clicked.</span></span>

<span data-ttu-id="317cb-263">Pojďme do prvku GridView přidat dvě nové ButtonFields, jednu s textem tlačítka + 10% a druhou s textovou cenou – 10%.</span><span class="sxs-lookup"><span data-stu-id="317cb-263">Let's add two new ButtonFields to the GridView, one with a button text Price +10% and the other with the text Price -10%.</span></span> <span data-ttu-id="317cb-264">Chcete-li přidat tyto ButtonFields, klikněte na odkaz Upravit sloupce z inteligentní značky GridView, vyberte typ pole ButtonField ze seznamu v levém horním rohu a klikněte na tlačítko Přidat.</span><span class="sxs-lookup"><span data-stu-id="317cb-264">To add these ButtonFields, click on the Edit Columns link from the GridView's smart tag, select the ButtonField field type from the list in the upper left and click the Add button.</span></span>

![Přidání dvou ButtonFields do prvku GridView.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image48.png)

<span data-ttu-id="317cb-266">**Obrázek 18**: přidání dvou ButtonFields do prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-266">**Figure 18**: Add Two ButtonFields to the GridView</span></span>

<span data-ttu-id="317cb-267">Přesuňte dva ButtonFields tak, aby se zobrazily jako první dvě pole GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-267">Move the two ButtonFields so that they appear as the first two GridView fields.</span></span> <span data-ttu-id="317cb-268">V dalším kroku nastavte vlastnosti `Text` těchto dvou ButtonFields na Price + 10% a Price 10% a `CommandName` vlastnosti na IncreasePrice a DecreasePrice, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="317cb-268">Next, set the `Text` properties of these two ButtonFields to Price +10% and Price -10% and the `CommandName` properties to IncreasePrice and DecreasePrice, respectively.</span></span> <span data-ttu-id="317cb-269">Ve výchozím nastavení vykreslí ButtonField svůj sloupec tlačítek jako LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="317cb-269">By default, a ButtonField renders its column of buttons as LinkButtons.</span></span> <span data-ttu-id="317cb-270">To však může být změněno prostřednictvím [vlastnosti`ButtonType`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx)ButtonField.</span><span class="sxs-lookup"><span data-stu-id="317cb-270">This can be changed, however, through the ButtonField's [`ButtonType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span></span> <span data-ttu-id="317cb-271">Pojďme mít tyto dva ButtonFieldsy vykreslené jako běžná nabízená tlačítka; Proto nastavte vlastnost `ButtonType` na hodnotu `Button`.</span><span class="sxs-lookup"><span data-stu-id="317cb-271">Let's have these two ButtonFields rendered as regular push buttons; therefore, set the `ButtonType` property to `Button`.</span></span> <span data-ttu-id="317cb-272">Obrázek 19: po provedení těchto změn se zobrazí dialogové okno pole. Následuje deklarativní označení ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-272">Figure 19 shows the Fields dialog box after these changes have been made; following that is the GridView's declarative markup.</span></span>

![Konfigurace vlastností ButtonFields text, Command a ButtonType](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image49.png)

<span data-ttu-id="317cb-274">**Obrázek 19**: Konfigurace vlastností ButtonFields `Text`, `CommandName`a `ButtonType`</span><span class="sxs-lookup"><span data-stu-id="317cb-274">**Figure 19**: Configure the ButtonFields `Text`, `CommandName`, and `ButtonType` Properties</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample9.aspx)]

<span data-ttu-id="317cb-275">Pomocí těchto ButtonFields vytvořených je posledním krokem vytvoření obslužné rutiny události pro událost `RowCommand` prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-275">With these ButtonFields created, the final step is to create an event handler for the GridView's `RowCommand` event.</span></span> <span data-ttu-id="317cb-276">Tato obslužná rutina události, je-li vyvolána, protože došlo ke kliknutí na tlačítko cena + 10% nebo cena-10%, musí určit `ProductID` řádku, pod kterým bylo tlačítko kliknuto, a poté vyvolat `UpdateProduct` metodu `ProductsBLL` třídy, a přitom předat příslušné `UnitPrice` procentuální úpravu společně s `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="317cb-276">This event handler, if fired because either the Price +10% or Price -10% buttons were clicked, needs to determine the `ProductID` for the row whose button was clicked and then invoke the `ProductsBLL` class's `UpdateProduct` method, passing in the appropriate `UnitPrice` percentage adjustment along with the `ProductID`.</span></span> <span data-ttu-id="317cb-277">Následující kód provádí tyto úlohy:</span><span class="sxs-lookup"><span data-stu-id="317cb-277">The following code performs these tasks:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample10.cs)]

<span data-ttu-id="317cb-278">Aby bylo možné určit `ProductID` řádku, jehož cena + 10% nebo tlačítko Price 10% bylo kliknuto, musíme se obrátit na kolekci `DataKeys` prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-278">In order to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we need to consult the GridView's `DataKeys` collection.</span></span> <span data-ttu-id="317cb-279">V této kolekci jsou uloženy hodnoty polí určených vlastností `DataKeyNames` pro každý řádek prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-279">This collection holds the values of the fields specified in the `DataKeyNames` property for each GridView row.</span></span> <span data-ttu-id="317cb-280">Vzhledem k tomu, že vlastnost `DataKeyNames` prvku GridView byla nastavena na hodnotu ProductID sadou Visual Studio při vázání prvku ObjectDataSource na prvek GridView, `DataKeys(rowIndex).Value` poskytuje `ProductID` pro zadaný *RowIndex*.</span><span class="sxs-lookup"><span data-stu-id="317cb-280">Since the GridView's `DataKeyNames` property was set to ProductID by Visual Studio when binding the ObjectDataSource to the GridView, `DataKeys(rowIndex).Value` provides the `ProductID` for the specified *rowIndex*.</span></span>

<span data-ttu-id="317cb-281">ButtonField automaticky předává do *RowIndex* řádku, na jehož tlačítko jste klikli pomocí parametru `e.CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="317cb-281">The ButtonField automatically passes in the *rowIndex* of the row whose button was clicked through the `e.CommandArgument` parameter.</span></span> <span data-ttu-id="317cb-282">Proto pro určení `ProductID` řádku, jehož cena + 10% nebo tlačítko Price 10% bylo kliknuto, používáme: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span><span class="sxs-lookup"><span data-stu-id="317cb-282">Therefore, to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we use: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span></span>

<span data-ttu-id="317cb-283">Stejně jako u tlačítka ukončit všechny produkty, pokud jste zakázali stav zobrazení prvku GridView, je prvek GridView při každém zpětném odeslání svázán s podkladovým úložištěm dat, a proto bude okamžitě aktualizován, aby odrážel změnu ceny, ke které dojde kliknutím jedno z tlačítek.</span><span class="sxs-lookup"><span data-stu-id="317cb-283">As with the Discontinue All Products button, if you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect a price change that occurs from clicking either of the buttons.</span></span> <span data-ttu-id="317cb-284">Pokud však v prvku GridView není zakázán stav zobrazení, budete muset po provedení této změny ručně znovu vytvořit vazby dat na prvek GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-284">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="317cb-285">K tomuto účelu jednoduše zavolejte metodu `DataBind()` prvku GridView ihned po vyvolání metody `UpdateProduct`.</span><span class="sxs-lookup"><span data-stu-id="317cb-285">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `UpdateProduct` method.</span></span>

<span data-ttu-id="317cb-286">Obrázek 20 zobrazuje stránku při prohlížení produktů poskytovaných Homesteadem Grandma Kelly.</span><span class="sxs-lookup"><span data-stu-id="317cb-286">Figure 20 shows the page when viewing the products provided by Grandma Kelly's Homestead.</span></span> <span data-ttu-id="317cb-287">Obrázek 21 zobrazuje výsledky po kliknutí na tlačítko ceny + 10% dvakrát pro Boysenberry rozprostření Grandma a pro Northwoods Cranberry omáčka tlačítko Price-10%.</span><span class="sxs-lookup"><span data-stu-id="317cb-287">Figure 21 shows the results after the Price +10% button has been clicked twice for Grandma's Boysenberry Spread and the Price -10% button once for Northwoods Cranberry Sauce.</span></span>

<span data-ttu-id="317cb-288">[![obsahuje tlačítko Price + 10% a cena-10%](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-288">[![The GridView Includes Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span></span>

<span data-ttu-id="317cb-289">**Obrázek 20**: tlačítka pro GridView obsahuje cenu + 10% a cenu-10% ([kliknutím zobrazíte obrázek v plné velikosti).](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-289">**Figure 20**: The GridView Includes Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span></span>

<span data-ttu-id="317cb-290">[![ceny za první a třetí produkt byly aktualizovány prostřednictvím tlačítek ceny + 10% a cena-10%.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-290">[![The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span></span>

<span data-ttu-id="317cb-291">**Obrázek 21**: ceny za první a třetí produkt byly aktualizovány prostřednictvím tlačítek Price + 10% a Price 10% ([kliknutím zobrazíte obrázek v plné velikosti).](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="317cb-291">**Figure 21**: The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span></span>

> [!NOTE]
> <span data-ttu-id="317cb-292">Prvky GridView (a DetailsView) mohou mít také tlačítka, LinkButtons nebo ImageButtons přidané do jejich TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="317cb-292">The GridView (and DetailsView) can also have Buttons, LinkButtons, or ImageButtons added to their TemplateFields.</span></span> <span data-ttu-id="317cb-293">Stejně jako u vlastnost BoundField, tato tlačítka při kliknutí způsobí vyvolání zpětného volání a vyvolává událost `RowCommand` prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-293">As with the BoundField, these Buttons, when clicked, will induce a postback, raising the GridView's `RowCommand` event.</span></span> <span data-ttu-id="317cb-294">Při přidávání tlačítek v poli TemplateField se ale `CommandArgument` tlačítka automaticky nenastaví na index řádku, protože se používá ButtonFields.</span><span class="sxs-lookup"><span data-stu-id="317cb-294">When adding buttons in a TemplateField, however, the Button's `CommandArgument` is not automatically set to the index of the row as it is when using ButtonFields.</span></span> <span data-ttu-id="317cb-295">Pokud potřebujete určit index řádku tlačítka, které bylo kliknuto v rámci obslužné rutiny události `RowCommand`, je nutné ručně nastavit vlastnost `CommandArgument` tlačítka v jeho deklarativní syntaxi v elementu TemplateField pomocí kódu, jako je:</span><span class="sxs-lookup"><span data-stu-id="317cb-295">If you need to determine the row index of the button that was clicked within the `RowCommand` event handler, you'll need to manually set the Button's `CommandArgument` property in its declarative syntax within the TemplateField, using code like:</span></span>  
> <span data-ttu-id="317cb-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span><span class="sxs-lookup"><span data-stu-id="317cb-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span></span>

## <a name="summary"></a><span data-ttu-id="317cb-297">Souhrn</span><span class="sxs-lookup"><span data-stu-id="317cb-297">Summary</span></span>

<span data-ttu-id="317cb-298">Všechny ovládací prvky GridView, DetailsView a FormView mohou zahrnovat tlačítka, LinkButtons nebo ImageButtons.</span><span class="sxs-lookup"><span data-stu-id="317cb-298">The GridView, DetailsView, and FormView controls all can include Buttons, LinkButtons, or ImageButtons.</span></span> <span data-ttu-id="317cb-299">Taková tlačítka, když je kliknuto, způsobují zpětné odeslání a vyvolávají událost `ItemCommand` v ovládacích prvcích FormView a DetailsView `RowCommand` a v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="317cb-299">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event in the FormView and DetailsView controls and the `RowCommand` event in the GridView.</span></span> <span data-ttu-id="317cb-300">Tato webová ovládací prvky obsahují integrovanou funkci pro zpracování běžných akcí souvisejících s příkazy, jako je například odstraňování nebo úpravy záznamů.</span><span class="sxs-lookup"><span data-stu-id="317cb-300">These data Web controls have built-in functionality to handle common command-related actions, such as deleting or editing records.</span></span> <span data-ttu-id="317cb-301">Můžete ale také použít tlačítka, která při kliknutí reagují na vlastní vlastní kód.</span><span class="sxs-lookup"><span data-stu-id="317cb-301">However, we can also use buttons that, when clicked, respond with executing our own custom code.</span></span>

<span data-ttu-id="317cb-302">K tomu musíme vytvořit obslužnou rutinu události pro událost `ItemCommand` nebo `RowCommand`.</span><span class="sxs-lookup"><span data-stu-id="317cb-302">To accomplish this, we need to create an event handler for the `ItemCommand` or `RowCommand` event.</span></span> <span data-ttu-id="317cb-303">V této obslužné rutině události nejdřív zkontrolujeme hodnotu příchozího `CommandName` a určíte, na které tlačítko se kliknulo, a pak se provede vhodná vlastní akce.</span><span class="sxs-lookup"><span data-stu-id="317cb-303">In this event handler we first check the incoming `CommandName` value to determine which button was clicked and then take appropriate custom action.</span></span> <span data-ttu-id="317cb-304">V tomto kurzu jsme viděli, jak používat tlačítka a ButtonFields k tomu, aby všechny produkty pro zadaného dodavatele nepokračovaly, nebo zvýšili nebo snížili cenu určitého produktu o 10%.</span><span class="sxs-lookup"><span data-stu-id="317cb-304">In this tutorial we saw how to use buttons and ButtonFields to discontinue all products for a specified supplier or to increase or decrease the price of a particular product by 10%.</span></span>

<span data-ttu-id="317cb-305">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="317cb-305">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="317cb-306">O autorovi</span><span class="sxs-lookup"><span data-stu-id="317cb-306">About the Author</span></span>

<span data-ttu-id="317cb-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="317cb-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="317cb-308">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="317cb-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="317cb-309">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="317cb-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="317cb-310">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="317cb-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="317cb-311">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="317cb-311">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="317cb-312">Next</span><span class="sxs-lookup"><span data-stu-id="317cb-312">Next</span></span>](adding-and-responding-to-buttons-to-a-gridview-vb.md)
