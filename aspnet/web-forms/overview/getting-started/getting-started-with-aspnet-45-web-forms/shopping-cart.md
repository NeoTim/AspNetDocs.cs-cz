---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
title: Nákupní košík | Microsoft Docs
author: Erikre
description: V této sérii kurzů se seznámíte se základy vytváření aplikací webových formulářů ASP.NET pomocí ASP.NET 4,5 a Microsoft Visual Studio Express 2013 pro My...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 6898c601-6c31-432f-8388-e6843f8a17cb
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
msc.type: authoredcontent
ms.openlocfilehash: d3b619ebd9448d30857ffbaf17fd245b1d54a662
ms.sourcegitcommit: 88fc80e3f65aebdf61ec9414810ddbc31c543f04
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/22/2020
ms.locfileid: "76519294"
---
# <a name="shopping-cart"></a><span data-ttu-id="91d60-103">Nákupní košík</span><span class="sxs-lookup"><span data-stu-id="91d60-103">Shopping Cart</span></span>

<span data-ttu-id="91d60-104">od [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="91d60-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="91d60-105">[Stáhnout vzorový projekt Wingtip Toys (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) nebo [Stáhnout elektronickou knihu (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="91d60-105">[Download Wingtip Toys Sample Project (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="91d60-106">V této sérii kurzů se naučíte základy vytváření webových formulářů ASP.NET pomocí ASP.NET 4,5 a Microsoft Visual Studio Express 2013 pro web.</span><span class="sxs-lookup"><span data-stu-id="91d60-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="91d60-107">K dispozici je Visual Studio 2013 [projekt se C# zdrojovým kódem](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) , který se doprovází v této sérii kurzů.</span><span class="sxs-lookup"><span data-stu-id="91d60-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>

<span data-ttu-id="91d60-108">Tento kurz popisuje obchodní logiku potřebnou k přidání nákupního košíku do ukázkové ASP.NET webové formuláře Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="91d60-108">This tutorial describes the business logic required to add a shopping cart to the Wingtip Toys sample ASP.NET Web Forms application.</span></span> <span data-ttu-id="91d60-109">Tento kurz sestaví na předchozím kurzu "zobrazení datových položek a podrobností" a je součástí série kurzů Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="91d60-109">This tutorial builds on the previous tutorial "Display Data Items and Details" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="91d60-110">Po dokončení tohoto kurzu budou uživatelé ukázkové aplikace moci přidávat, odebírat a upravovat produkty v jejich nákupním košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-110">When you've completed this tutorial, the users of your sample app will be able to add, remove, and modify the products in their shopping cart.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="91d60-111">Naučíte se:</span><span class="sxs-lookup"><span data-stu-id="91d60-111">What you'll learn:</span></span>

1. <span data-ttu-id="91d60-112">Jak vytvořit nákupní košík pro webovou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="91d60-112">How to create a shopping cart for the web application.</span></span>
2. <span data-ttu-id="91d60-113">Jak uživatelům povolit přidávání položek do nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-113">How to enable users to add items to the shopping cart.</span></span>
3. <span data-ttu-id="91d60-114">Postup přidání ovládacího prvku [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) pro zobrazení podrobností o nákupních košíkech</span><span class="sxs-lookup"><span data-stu-id="91d60-114">How to add a [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control to display shopping cart details.</span></span>
4. <span data-ttu-id="91d60-115">Jak vypočítat a zobrazit celkovou částku objednávky</span><span class="sxs-lookup"><span data-stu-id="91d60-115">How to calculate and display the order total.</span></span>
5. <span data-ttu-id="91d60-116">Postup odebrání a aktualizace položek nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-116">How to remove and update items in the shopping cart.</span></span>
6. <span data-ttu-id="91d60-117">Zahrnutí čítače nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-117">How to include a shopping cart counter.</span></span>

## <a name="code-features-in-this-tutorial"></a><span data-ttu-id="91d60-118">Funkce kódu v tomto kurzu:</span><span class="sxs-lookup"><span data-stu-id="91d60-118">Code features in this tutorial:</span></span>

1. <span data-ttu-id="91d60-119">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="91d60-119">Entity Framework Code First</span></span>
2. <span data-ttu-id="91d60-120">Datové poznámky</span><span class="sxs-lookup"><span data-stu-id="91d60-120">Data Annotations</span></span>
3. <span data-ttu-id="91d60-121">Ovládací prvky dat silného typu</span><span class="sxs-lookup"><span data-stu-id="91d60-121">Strongly typed data controls</span></span>
4. <span data-ttu-id="91d60-122">Vazby modelu</span><span class="sxs-lookup"><span data-stu-id="91d60-122">Model binding</span></span>

## <a name="creating-a-shopping-cart"></a><span data-ttu-id="91d60-123">Vytvoření nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-123">Creating a Shopping Cart</span></span>

<span data-ttu-id="91d60-124">Dříve v této sérii kurzů jste přidali stránky a kód pro zobrazení dat produktu z databáze.</span><span class="sxs-lookup"><span data-stu-id="91d60-124">Earlier in this tutorial series, you added pages and code to view product data from a database.</span></span> <span data-ttu-id="91d60-125">V tomto kurzu vytvoříte nákupní košík, ve kterém budete spravovat produkty, které si uživatelé chtějí koupit.</span><span class="sxs-lookup"><span data-stu-id="91d60-125">In this tutorial, you'll create a shopping cart to manage the products that users are interested in buying.</span></span> <span data-ttu-id="91d60-126">Uživatelé budou moci procházet a přidávat položky do nákupního košíku i v případě, že nejsou registrováni nebo přihlášeni.</span><span class="sxs-lookup"><span data-stu-id="91d60-126">Users will be able to browse and add items to the shopping cart even if they are not registered or logged in.</span></span> <span data-ttu-id="91d60-127">Pokud chcete spravovat přístup k nákupnímu košíku, přiřadíte uživatelům jedinečné `ID` pomocí globálně jedinečného identifikátoru (GUID), když uživatel poprvé přistupuje k nákupnímu košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-127">To manage shopping cart access, you will assign users a unique `ID` using a globally unique identifier (GUID) when the user accesses the shopping cart for the first time.</span></span> <span data-ttu-id="91d60-128">Tuto `ID` uložíte pomocí stavu relace ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="91d60-128">You'll store this `ID` using the ASP.NET Session state.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="91d60-129">Stav relace ASP.NET je vhodným místem pro ukládání informací specifických pro uživatele, jejichž platnost vyprší poté, co uživatel opustí Web.</span><span class="sxs-lookup"><span data-stu-id="91d60-129">The ASP.NET Session state is a convenient place to store user-specific information which will expire after the user leaves the site.</span></span> <span data-ttu-id="91d60-130">I když zneužití stavu relace může mít dopad na výkon na větších lokalitách, je vhodné při demonstračních účely využít stav relace.</span><span class="sxs-lookup"><span data-stu-id="91d60-130">While misuse of session state can have performance implications on larger sites, light use of session state works well for demonstration purposes.</span></span> <span data-ttu-id="91d60-131">Vzorový projekt Wingtip Toys ukazuje, jak používat stav relace bez externího poskytovatele, kde je stav relace uložen v procesu na webovém serveru, který je hostitelem lokality.</span><span class="sxs-lookup"><span data-stu-id="91d60-131">The Wingtip Toys sample project shows how to use session state without an external provider, where session state is stored in-process on the web server hosting the site.</span></span> <span data-ttu-id="91d60-132">U větších webů, které poskytují více instancí aplikace nebo pro lokality, které spouštějí více instancí aplikace na různých serverech, zvažte použití **Windows Azure cache Service**.</span><span class="sxs-lookup"><span data-stu-id="91d60-132">For larger sites that provide multiple instances of an application or for sites that run multiple instances of an application on different servers, consider using **Windows Azure Cache Service**.</span></span> <span data-ttu-id="91d60-133">Tato Cache Service poskytuje distribuovanou službu pro ukládání do mezipaměti, která je externě na webu, a řeší potíže s používáním stavu relace v rámci procesu.</span><span class="sxs-lookup"><span data-stu-id="91d60-133">This Cache Service provides a distributed caching service that is external to the web site and solves the problem of using in-process session state.</span></span> <span data-ttu-id="91d60-134">Další informace najdete v tématu [použití stavu relace ASP.NET s weby Windows Azure](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span><span class="sxs-lookup"><span data-stu-id="91d60-134">For more information see, [How to Use ASP.NET Session State with Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span></span>

### <a name="add-cartitem-as-a-model-class"></a><span data-ttu-id="91d60-135">Přidání CartItem jako třídy modelu</span><span class="sxs-lookup"><span data-stu-id="91d60-135">Add CartItem as a Model Class</span></span>

<span data-ttu-id="91d60-136">Dříve v této sérii kurzů jste definovali schéma pro kategorii a data produktu vytvořením tříd `Category` a `Product` ve složce *modely* .</span><span class="sxs-lookup"><span data-stu-id="91d60-136">Earlier in this tutorial series, you defined the schema for the category and product data by creating the `Category` and `Product` classes in the *Models* folder.</span></span> <span data-ttu-id="91d60-137">Nyní přidejte novou třídu k definování schématu pro nákupní košík.</span><span class="sxs-lookup"><span data-stu-id="91d60-137">Now, add a new class to define the schema for the shopping cart.</span></span> <span data-ttu-id="91d60-138">Později v tomto kurzu přidáte třídu, která bude zpracovávat přístup k datům `CartItem` tabulce.</span><span class="sxs-lookup"><span data-stu-id="91d60-138">Later in this tutorial, you will add a class to handle data access to the `CartItem` table.</span></span> <span data-ttu-id="91d60-139">Tato třída poskytne obchodní logiku pro přidání, odebrání a aktualizaci položek v nákupním košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-139">This class will provide the business logic to add, remove, and update items in the shopping cart.</span></span>

1. <span data-ttu-id="91d60-140">Klikněte pravým tlačítkem na složku *modely* a vyberte **Přidat** -&gt; **Nová položka**.</span><span class="sxs-lookup"><span data-stu-id="91d60-140">Right-click the *Models* folder and select **Add** -&gt; **New Item**.</span></span> 

    ![Nákupní košík – nová položka](shopping-cart/_static/image1.png)
2. <span data-ttu-id="91d60-142">**Přidat novou položku** se zobrazí dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="91d60-142">The **Add New Item** dialog box is displayed.</span></span> <span data-ttu-id="91d60-143">Vyberte **kód**a pak vyberte **Třída**.</span><span class="sxs-lookup"><span data-stu-id="91d60-143">Select **Code**, and then select **Class**.</span></span> 

    ![Nákupní košík – dialogové okno Přidat novou položku](shopping-cart/_static/image2.png)
3. <span data-ttu-id="91d60-145">Pojmenujte tuto novou třídu *CartItem.cs*.</span><span class="sxs-lookup"><span data-stu-id="91d60-145">Name this new class *CartItem.cs*.</span></span>
4. <span data-ttu-id="91d60-146">Klikněte na tlačítko **Add** (Přidat).</span><span class="sxs-lookup"><span data-stu-id="91d60-146">Click **Add**.</span></span>  
   <span data-ttu-id="91d60-147">V editoru se zobrazí nový soubor třídy.</span><span class="sxs-lookup"><span data-stu-id="91d60-147">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="91d60-148">Nahraďte výchozí kód následujícím kódem:</span><span class="sxs-lookup"><span data-stu-id="91d60-148">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample1.cs)]

<span data-ttu-id="91d60-149">Třída `CartItem` obsahuje schéma, které definuje jednotlivé produkty, které uživatel přidá do nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-149">The `CartItem` class contains the schema that will define each product a user adds to the shopping cart.</span></span> <span data-ttu-id="91d60-150">Tato třída je podobná ostatním třídám schématu, které jste vytvořili dříve v této sérii kurzů.</span><span class="sxs-lookup"><span data-stu-id="91d60-150">This class is similar to the other schema classes you created earlier in this tutorial series.</span></span> <span data-ttu-id="91d60-151">Podle konvence Entity Framework Code First očekává, že bude primární klíč pro `CartItem` tabulka buď `CartItemId`, nebo `ID`.</span><span class="sxs-lookup"><span data-stu-id="91d60-151">By convention, Entity Framework Code First expects that the primary key for the `CartItem` table will be either `CartItemId` or `ID`.</span></span> <span data-ttu-id="91d60-152">Nicméně kód přepisuje výchozí chování pomocí atributu `[Key]` anotace dat.</span><span class="sxs-lookup"><span data-stu-id="91d60-152">However, the code overrides the default behavior by using the data annotation `[Key]` attribute.</span></span> <span data-ttu-id="91d60-153">Atribut `Key` vlastnosti ItemId určuje, že vlastnost `ItemID` je primární klíč.</span><span class="sxs-lookup"><span data-stu-id="91d60-153">The `Key` attribute of the ItemId property specifies that the `ItemID` property is the primary key.</span></span>

<span data-ttu-id="91d60-154">Vlastnost `CartId` určuje `ID` uživatele, který je přidružen k položce k nákupu.</span><span class="sxs-lookup"><span data-stu-id="91d60-154">The `CartId` property specifies the `ID` of the user that is associated with the item to purchase.</span></span> <span data-ttu-id="91d60-155">Přidáte kód pro vytvoření tohoto uživatele `ID`, když uživatel přistupuje k nákupnímu košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-155">You'll add code to create this user `ID` when the user accesses the shopping cart.</span></span> <span data-ttu-id="91d60-156">Tento `ID` bude také uložen jako proměnná relace ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="91d60-156">This `ID` will also be stored as an ASP.NET Session variable.</span></span>

### <a name="update-the-product-context"></a><span data-ttu-id="91d60-157">Aktualizace kontextu produktu</span><span class="sxs-lookup"><span data-stu-id="91d60-157">Update the Product Context</span></span>

<span data-ttu-id="91d60-158">Kromě přidání třídy `CartItem` budete muset aktualizovat třídu kontextu databáze, která spravuje třídy entit a která poskytuje přístup k datům databáze.</span><span class="sxs-lookup"><span data-stu-id="91d60-158">In addition to adding the `CartItem` class, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="91d60-159">K tomu přidáte nově vytvořenou třídu `CartItem` modelu do `ProductContext` třídy.</span><span class="sxs-lookup"><span data-stu-id="91d60-159">To do this, you will add the newly created `CartItem` model class to the `ProductContext` class.</span></span>

1. <span data-ttu-id="91d60-160">V **Průzkumník řešení**vyhledejte a otevřete soubor *ProductContext.cs* ve složce *modely* .</span><span class="sxs-lookup"><span data-stu-id="91d60-160">In **Solution Explorer**, find and open the *ProductContext.cs* file in the *Models* folder.</span></span>
2. <span data-ttu-id="91d60-161">Do souboru *ProductContext.cs* přidejte zvýrazněný kód následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="91d60-161">Add the highlighted code to the *ProductContext.cs* file as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample2.cs?highlight=14)]

<span data-ttu-id="91d60-162">Jak bylo zmíněno dříve v této sérii kurzů, kód v souboru *ProductContext.cs* přidá obor názvů `System.Data.Entity`, abyste měli přístup ke všem základním funkcím Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="91d60-162">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="91d60-163">Tato funkce zahrnuje možnost dotazování, vkládání, aktualizaci a odstraňování dat pomocí objektů se silnými typy.</span><span class="sxs-lookup"><span data-stu-id="91d60-163">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="91d60-164">Třída `ProductContext` přidává přístup k nově přidané třídě `CartItem` modelu.</span><span class="sxs-lookup"><span data-stu-id="91d60-164">The `ProductContext` class adds access to the newly added `CartItem` model class.</span></span>

### <a name="managing-the-shopping-cart-business-logic"></a><span data-ttu-id="91d60-165">Správa obchodní logiky nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-165">Managing the Shopping Cart Business Logic</span></span>

<span data-ttu-id="91d60-166">V dalším kroku vytvoříte třídu `ShoppingCart` v nové složce *logiky* .</span><span class="sxs-lookup"><span data-stu-id="91d60-166">Next, you'll create the `ShoppingCart` class in a new *Logic* folder.</span></span> <span data-ttu-id="91d60-167">Třída `ShoppingCart` zpracovává přístup k datům `CartItem` tabulce.</span><span class="sxs-lookup"><span data-stu-id="91d60-167">The `ShoppingCart` class handles data access to the `CartItem` table.</span></span> <span data-ttu-id="91d60-168">Třída bude také obsahovat obchodní logiku pro přidání, odebrání a aktualizaci položek nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-168">The class will also include the business logic to add, remove, and update items in the shopping cart.</span></span>

<span data-ttu-id="91d60-169">Logika nákupního košíku, kterou budete přidávat, bude obsahovat funkce pro správu následujících akcí:</span><span class="sxs-lookup"><span data-stu-id="91d60-169">The shopping cart logic that you will add will contain the functionality to manage the following actions:</span></span>

1. <span data-ttu-id="91d60-170">Přidávání položek do nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-170">Adding items to the shopping cart</span></span>
2. <span data-ttu-id="91d60-171">Odebírání položek z nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-171">Removing items from the shopping cart</span></span>
3. <span data-ttu-id="91d60-172">Získání ID nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-172">Getting the shopping cart ID</span></span>
4. <span data-ttu-id="91d60-173">Načítání položek z nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-173">Retrieving items from the shopping cart</span></span>
5. <span data-ttu-id="91d60-174">Celkové množství všech položek nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-174">Totaling the amount of all the shopping cart items</span></span>
6. <span data-ttu-id="91d60-175">Aktualizace dat nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-175">Updating the shopping cart data</span></span>

<span data-ttu-id="91d60-176">Stránka nákupního košíku (*ShoppingCart. aspx*) a třída nákupního košíku se společně použijí pro přístup k datům nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-176">A shopping cart page (*ShoppingCart.aspx*) and the shopping cart class will be used together to access shopping cart data.</span></span> <span data-ttu-id="91d60-177">Na stránce nákupní košík se zobrazí všechny položky, které uživatel přidá do nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-177">The shopping cart page will display all the items the user adds to the shopping cart.</span></span> <span data-ttu-id="91d60-178">Kromě stránky nákupní košíku a třídy vytvoříte stránku (*AddToCart. aspx*) pro přidání produktů do nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-178">Besides the shopping cart page and class, you'll create a page (*AddToCart.aspx*) to add products to the shopping cart.</span></span> <span data-ttu-id="91d60-179">Do této stránky také přidáte kód na stránku *ProductList. aspx* a na stránku *ProductDetails. aspx* , která bude obsahovat odkaz na stránku *AddToCart. aspx* , aby uživatel mohl přidat produkty do nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-179">You will also add code to the *ProductList.aspx* page and the *ProductDetails.aspx* page that will provide a link to the *AddToCart.aspx* page, so that the user can add products to the shopping cart.</span></span>

<span data-ttu-id="91d60-180">Následující diagram znázorňuje základní proces, který nastane, když uživatel přidá produkt do nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-180">The following diagram shows the basic process that occurs when the user adds a product to the shopping cart.</span></span>

![Nákupní košík – přidání do nákupního košíku](shopping-cart/_static/image3.png)

<span data-ttu-id="91d60-182">Když uživatel klikne na odkaz **Přidat do košíku** na stránce *ProductList. aspx* nebo na stránce *ProductDetails. aspx* , aplikace přejde na stránku *AddToCart. aspx* a automaticky se zobrazí na stránku *ShoppingCart. aspx* .</span><span class="sxs-lookup"><span data-stu-id="91d60-182">When the user clicks the **Add To Cart** link on either the *ProductList.aspx* page or the *ProductDetails.aspx* page, the application will navigate to the *AddToCart.aspx* page and then automatically to the *ShoppingCart.aspx* page.</span></span> <span data-ttu-id="91d60-183">Na stránce *AddToCart. aspx* se přidá produkt Select do nákupního košíku voláním metody ve třídě ShoppingCart.</span><span class="sxs-lookup"><span data-stu-id="91d60-183">The *AddToCart.aspx* page will add the select product to the shopping cart by calling a method in the ShoppingCart class.</span></span> <span data-ttu-id="91d60-184">Na stránce *ShoppingCart. aspx* se zobrazí produkty, které byly přidány do nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-184">The *ShoppingCart.aspx* page will display the products that have been added to the shopping cart.</span></span>

#### <a name="creating-the-shopping-cart-class"></a><span data-ttu-id="91d60-185">Vytvoření třídy nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-185">Creating the Shopping Cart Class</span></span>

<span data-ttu-id="91d60-186">Třída `ShoppingCart` bude přidána do samostatné složky v aplikaci, takže bude jasné rozlišení mezi modelem (složkou modelů), stránkami (kořenovou složkou) a logikou (složka logiky).</span><span class="sxs-lookup"><span data-stu-id="91d60-186">The `ShoppingCart` class will be added to a separate folder in the application so that there will be a clear distinction between the model (Models folder), the pages (root folder) and the logic (Logic folder).</span></span>

1. <span data-ttu-id="91d60-187">V **Průzkumník řešení**klikněte pravým tlačítkem myši na projekt **WingtipToys**a vyberte **Přidat**-&gt;**Nová složka**.</span><span class="sxs-lookup"><span data-stu-id="91d60-187">In **Solution Explorer**, right-click the **WingtipToys**project and select **Add**-&gt;**New Folder**.</span></span> <span data-ttu-id="91d60-188">Pojmenujte novou *logiku*složky.</span><span class="sxs-lookup"><span data-stu-id="91d60-188">Name the new folder *Logic*.</span></span>
2. <span data-ttu-id="91d60-189">Klikněte pravým tlačítkem na složku *Logic* a pak vyberte **Přidat** -&gt; **Nová položka**.</span><span class="sxs-lookup"><span data-stu-id="91d60-189">Right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>
3. <span data-ttu-id="91d60-190">Přidejte nový soubor třídy s názvem *ShoppingCartActions.cs*.</span><span class="sxs-lookup"><span data-stu-id="91d60-190">Add a new class file named *ShoppingCartActions.cs*.</span></span>
4. <span data-ttu-id="91d60-191">Nahraďte výchozí kód následujícím kódem:</span><span class="sxs-lookup"><span data-stu-id="91d60-191">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample3.cs)]

<span data-ttu-id="91d60-192">Metoda `AddToCart` umožňuje, aby jednotlivé produkty byly zahrnuté do nákupního košíku na základě `ID`produktu.</span><span class="sxs-lookup"><span data-stu-id="91d60-192">The `AddToCart` method enables individual products to be included in the shopping cart based on the product `ID`.</span></span> <span data-ttu-id="91d60-193">Produkt se přidá do košíku, nebo pokud košík již obsahuje položku pro daný produkt, zvýší se množství.</span><span class="sxs-lookup"><span data-stu-id="91d60-193">The product is added to the cart, or if the cart already contains an item for that product, the quantity is incremented.</span></span>

<span data-ttu-id="91d60-194">Metoda `GetCartId` vrátí `ID` košíku pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="91d60-194">The `GetCartId` method returns the cart `ID` for the user.</span></span> <span data-ttu-id="91d60-195">`ID` vozíku se používá ke sledování položek, které má uživatel v nákupním košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-195">The cart `ID` is used to track the items that a user has in their shopping cart.</span></span> <span data-ttu-id="91d60-196">Pokud uživatel nemá existující `ID`košíku, vytvoří se pro ně nový košík `ID`.</span><span class="sxs-lookup"><span data-stu-id="91d60-196">If the user does not have an existing cart `ID`, a new cart `ID` is created for them.</span></span> <span data-ttu-id="91d60-197">Pokud je uživatel přihlášený jako registrovaný uživatel, `ID` vozíku se nastaví na své uživatelské jméno.</span><span class="sxs-lookup"><span data-stu-id="91d60-197">If the user is signed in as a registered user, the cart `ID` is set to their user name.</span></span> <span data-ttu-id="91d60-198">Pokud ale uživatel není přihlášený, `ID` vozíku se nastaví na jedinečnou hodnotu (identifikátor GUID).</span><span class="sxs-lookup"><span data-stu-id="91d60-198">However, if the user is not signed in, the cart `ID` is set to a unique value (a GUID).</span></span> <span data-ttu-id="91d60-199">Identifikátor GUID zajišťuje, že pro každého uživatele je na základě relace vytvořen pouze jeden vozík.</span><span class="sxs-lookup"><span data-stu-id="91d60-199">A GUID ensures that only one cart is created for each user, based on session.</span></span>

<span data-ttu-id="91d60-200">Metoda `GetCartItems` vrátí seznam položek nákupního košíku pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="91d60-200">The `GetCartItems` method returns a list of shopping cart items for the user.</span></span> <span data-ttu-id="91d60-201">Později v tomto kurzu uvidíte, že se vazba modelu používá k zobrazení položek košíku v nákupním košíku pomocí metody `GetCartItems`.</span><span class="sxs-lookup"><span data-stu-id="91d60-201">Later in this tutorial, you will see that model binding is used to display the cart items in the shopping cart using the `GetCartItems` method.</span></span>

### <a name="creating-the-add-to-cart-functionality"></a><span data-ttu-id="91d60-202">Vytvoření funkce pro přidání do košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-202">Creating the Add-To-Cart Functionality</span></span>

<span data-ttu-id="91d60-203">Jak bylo zmíněno dříve, vytvoříte stránku zpracování s názvem *AddToCart. aspx* , která bude použita k přidání nových produktů do nákupního košíku uživatele.</span><span class="sxs-lookup"><span data-stu-id="91d60-203">As mentioned earlier, you will create a processing page named *AddToCart.aspx* that will be used to add new products to the shopping cart of the user.</span></span> <span data-ttu-id="91d60-204">Tato stránka vyvolá metodu `AddToCart` ve třídě `ShoppingCart`, kterou jste právě vytvořili.</span><span class="sxs-lookup"><span data-stu-id="91d60-204">This page will call the `AddToCart` method in the `ShoppingCart` class that you just created.</span></span> <span data-ttu-id="91d60-205">Na stránce *AddToCart. aspx* se očekává, že se do ní předává produkt `ID`.</span><span class="sxs-lookup"><span data-stu-id="91d60-205">The *AddToCart.aspx* page will expect that a product `ID` is passed to it.</span></span> <span data-ttu-id="91d60-206">Tento produkt `ID` bude použit při volání metody `AddToCart` ve třídě `ShoppingCart`.</span><span class="sxs-lookup"><span data-stu-id="91d60-206">This product `ID` will be used when calling the `AddToCart` method in the `ShoppingCart` class.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="91d60-207">Budete upravovat kód na pozadí (*AddToCart.aspx.cs*) pro tuto stránku, nikoli uživatelské rozhraní stránky (*AddToCart. aspx*).</span><span class="sxs-lookup"><span data-stu-id="91d60-207">You will be modifying the code-behind (*AddToCart.aspx.cs*) for this page, not the page UI (*AddToCart.aspx*).</span></span>

#### <a name="to-create-the-add-to-cart-functionality"></a><span data-ttu-id="91d60-208">Postup vytvoření funkce přidání do košíku:</span><span class="sxs-lookup"><span data-stu-id="91d60-208">To create the Add-To-Cart functionality:</span></span>

1. <span data-ttu-id="91d60-209">V **Průzkumník řešení**klikněte pravým tlačítkem myši na projekt **WingtipToys**a klikněte na **Přidat** -&gt; **novou položku**.</span><span class="sxs-lookup"><span data-stu-id="91d60-209">In **Solution Explorer**, right-click the **WingtipToys**project, click **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="91d60-210">**Přidat novou položku** se zobrazí dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="91d60-210">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="91d60-211">Přidejte standardní novou stránku (webový formulář) do aplikace s názvem *AddToCart. aspx*.</span><span class="sxs-lookup"><span data-stu-id="91d60-211">Add a standard new page (Web Form) to the application named *AddToCart.aspx*.</span></span> 

    ![Nákupní košík – přidat webový formulář](shopping-cart/_static/image4.png)
3. <span data-ttu-id="91d60-213">V **Průzkumník řešení**klikněte pravým tlačítkem na stránku *AddToCart. aspx* a pak klikněte na **Zobrazit kód**.</span><span class="sxs-lookup"><span data-stu-id="91d60-213">In **Solution Explorer**, right-click the *AddToCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="91d60-214">Soubor kódu na pozadí *AddToCart.aspx.cs* se otevře v editoru.</span><span class="sxs-lookup"><span data-stu-id="91d60-214">The *AddToCart.aspx.cs* code-behind file is opened in the editor.</span></span>
4. <span data-ttu-id="91d60-215">Nahraďte existující kód v *AddToCart.aspx.cs* kódu za následující:</span><span class="sxs-lookup"><span data-stu-id="91d60-215">Replace the existing code in the *AddToCart.aspx.cs* code-behind with the following:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample4.cs)]

<span data-ttu-id="91d60-216">Po načtení stránky *AddToCart. aspx* se produkt `ID` načte z řetězce dotazu.</span><span class="sxs-lookup"><span data-stu-id="91d60-216">When the *AddToCart.aspx* page is loaded, the product `ID` is retrieved from the query string.</span></span> <span data-ttu-id="91d60-217">Dále je vytvořena instance třídy nákupního košíku, která se používá k volání metody `AddToCart`, kterou jste přidali dříve v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="91d60-217">Next, an instance of the shopping cart class is created and used to call the `AddToCart` method that you added earlier in this tutorial.</span></span> <span data-ttu-id="91d60-218">Metoda `AddToCart` obsažená v souboru *ShoppingCartActions.cs* obsahuje logiku pro přidání vybraného produktu do nákupního košíku nebo zvýšení množství produktu vybraného produktu.</span><span class="sxs-lookup"><span data-stu-id="91d60-218">The `AddToCart` method, contained in the *ShoppingCartActions.cs* file, includes the logic to add the selected product to the shopping cart or increment the product quantity of the selected product.</span></span> <span data-ttu-id="91d60-219">Pokud produkt nebyl přidán do nákupního košíku, produkt se přidá do tabulky `CartItem` databáze.</span><span class="sxs-lookup"><span data-stu-id="91d60-219">If the product hasn't been added to the shopping cart, the product is added to the `CartItem` table of the database.</span></span> <span data-ttu-id="91d60-220">Pokud produkt již byl do nákupního košíku přidán a uživatel přidá další položku stejného produktu, množství produktů se zvýší v `CartItem` tabulce.</span><span class="sxs-lookup"><span data-stu-id="91d60-220">If the product has already been added to the shopping cart and the user adds an additional item of the same product, the product quantity is incremented in the `CartItem` table.</span></span> <span data-ttu-id="91d60-221">Nakonec se stránka přesměrovává zpátky na stránku *ShoppingCart. aspx* , kterou přidáte v dalším kroku, kde uživatel uvidí aktualizovaný seznam položek na vozíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-221">Finally, the page redirects back to the *ShoppingCart.aspx* page that you'll add in the next step, where the user sees an updated list of items in the cart.</span></span>

<span data-ttu-id="91d60-222">Jak už jsme uvedli, uživatel `ID` slouží k identifikaci produktů, které jsou přidružené ke konkrétnímu uživateli.</span><span class="sxs-lookup"><span data-stu-id="91d60-222">As previously mentioned, a user `ID` is used to identify the products that are associated with a specific user.</span></span> <span data-ttu-id="91d60-223">Tato `ID` se přidá do řádku v tabulce `CartItem` pokaždé, když uživatel přidá produkt do nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-223">This `ID` is added to a row in the `CartItem` table each time the user adds a product to the shopping cart.</span></span>

### <a name="creating-the-shopping-cart-ui"></a><span data-ttu-id="91d60-224">Vytvoření uživatelského rozhraní nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-224">Creating the Shopping Cart UI</span></span>

<span data-ttu-id="91d60-225">Na stránce *ShoppingCart. aspx* se zobrazí produkty, které uživatel přidal do nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-225">The *ShoppingCart.aspx* page will display the products that the user has added to their shopping cart.</span></span> <span data-ttu-id="91d60-226">Bude také poskytovat možnost přidávat, odebírat a aktualizovat položky v nákupním košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-226">It will also provide the ability to add, remove and update items in the shopping cart.</span></span>

1. <span data-ttu-id="91d60-227">V **Průzkumník řešení**klikněte pravým tlačítkem myši na **WingtipToys**, klikněte na **Přidat** -&gt; **novou položku**.</span><span class="sxs-lookup"><span data-stu-id="91d60-227">In **Solution Explorer**, right-click **WingtipToys**, click **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="91d60-228">**Přidat novou položku** se zobrazí dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="91d60-228">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="91d60-229">Přidejte novou stránku (webový formulář), která obsahuje stránku předlohy, výběrem možnosti **webový formulář pomocí stránky předlohy**.</span><span class="sxs-lookup"><span data-stu-id="91d60-229">Add a new page (Web Form) that includes a master page by selecting **Web Form using Master Page**.</span></span> <span data-ttu-id="91d60-230">Pojmenujte novou stránku *ShoppingCart. aspx*.</span><span class="sxs-lookup"><span data-stu-id="91d60-230">Name the new page *ShoppingCart.aspx*.</span></span>
3. <span data-ttu-id="91d60-231">Vyberte **site. Master** a připojte stránku předlohy k nově vytvořené stránce *aspx* .</span><span class="sxs-lookup"><span data-stu-id="91d60-231">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span>
4. <span data-ttu-id="91d60-232">Na stránce *ShoppingCart. aspx* nahraďte existující kód následujícím kódem:</span><span class="sxs-lookup"><span data-stu-id="91d60-232">In the *ShoppingCart.aspx* page, replace the existing markup with the following markup:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample5.aspx)]

<span data-ttu-id="91d60-233">Stránka *ShoppingCart. aspx* obsahuje ovládací prvek **GridView** s názvem `CartList`.</span><span class="sxs-lookup"><span data-stu-id="91d60-233">The *ShoppingCart.aspx* page includes a **GridView** control named `CartList`.</span></span> <span data-ttu-id="91d60-234">Tento ovládací prvek používá vazbu modelu pro svázání dat nákupního košíku z databáze k ovládacímu prvku **GridView** .</span><span class="sxs-lookup"><span data-stu-id="91d60-234">This control uses model binding to bind the shopping cart data from the database to the **GridView** control.</span></span> <span data-ttu-id="91d60-235">Když nastavíte vlastnost `ItemType` ovládacího prvku **GridView** , je výraz vazby dat `Item` k dispozici v označení ovládacího prvku a ovládací prvek se bude silného typu.</span><span class="sxs-lookup"><span data-stu-id="91d60-235">When you set the `ItemType` property of the **GridView** control, the data-binding expression `Item` is available in the markup of the control and the control becomes strongly typed.</span></span> <span data-ttu-id="91d60-236">Jak bylo zmíněno dříve v této sérii kurzů, můžete vybrat Podrobnosti objektu `Item` pomocí technologie IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="91d60-236">As mentioned earlier in this tutorial series, you can select details of the `Item` object using IntelliSense.</span></span> <span data-ttu-id="91d60-237">Chcete-li nakonfigurovat ovládací prvek data na použití vazby modelu pro výběr dat, nastavte vlastnost `SelectMethod` ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="91d60-237">To configure a data control to use model binding to select data, you set the `SelectMethod` property of the control.</span></span> <span data-ttu-id="91d60-238">Ve výše uvedeném kódu nastavíte `SelectMethod` k použití metody GetShoppingCartItems, která vrací seznam objektů `CartItem`.</span><span class="sxs-lookup"><span data-stu-id="91d60-238">In the markup above, you set the `SelectMethod` to use the GetShoppingCartItems method which returns a list of `CartItem` objects.</span></span> <span data-ttu-id="91d60-239">Ovládací prvek **GridView** data volá metodu v příslušnou dobu životního cyklu stránky a automaticky vytvoří vazby vrácených dat.</span><span class="sxs-lookup"><span data-stu-id="91d60-239">The **GridView** data control calls the method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="91d60-240">Metoda `GetShoppingCartItems` musí být stále přidána.</span><span class="sxs-lookup"><span data-stu-id="91d60-240">The `GetShoppingCartItems` method must still be added.</span></span>

#### <a name="retrieving-the-shopping-cart-items"></a><span data-ttu-id="91d60-241">Načítání položek nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-241">Retrieving the Shopping Cart Items</span></span>

<span data-ttu-id="91d60-242">Dále přidáte kód do *ShoppingCart.aspx.cs* kódu na pozadí pro načtení a naplnění uživatelského rozhraní nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-242">Next, you add code to the *ShoppingCart.aspx.cs* code-behind to retrieve and populate the Shopping Cart UI.</span></span>

1. <span data-ttu-id="91d60-243">V **Průzkumník řešení**klikněte pravým tlačítkem na stránku *ShoppingCart. aspx* a pak klikněte na **Zobrazit kód**.</span><span class="sxs-lookup"><span data-stu-id="91d60-243">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="91d60-244">Soubor kódu na pozadí *ShoppingCart.aspx.cs* se otevře v editoru.</span><span class="sxs-lookup"><span data-stu-id="91d60-244">The *ShoppingCart.aspx.cs* code-behind file is opened in the editor.</span></span>
2. <span data-ttu-id="91d60-245">Existující kód nahraďte následujícím kódem:</span><span class="sxs-lookup"><span data-stu-id="91d60-245">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample6.cs)]

<span data-ttu-id="91d60-246">Jak je uvedeno výše, `GridView` ovládací prvek dat volá metodu `GetShoppingCartItems` v příslušnou dobu životního cyklu stránky a automaticky vytvoří vazby vrácených dat.</span><span class="sxs-lookup"><span data-stu-id="91d60-246">As mentioned above, the `GridView` data control calls the `GetShoppingCartItems` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="91d60-247">Metoda `GetShoppingCartItems` vytvoří instanci objektu `ShoppingCartActions`.</span><span class="sxs-lookup"><span data-stu-id="91d60-247">The `GetShoppingCartItems` method creates an instance of the `ShoppingCartActions` object.</span></span> <span data-ttu-id="91d60-248">Potom kód používá tuto instanci k vrácení položek na vozíku voláním metody `GetCartItems`.</span><span class="sxs-lookup"><span data-stu-id="91d60-248">Then, the code uses that instance to return the items in the cart by calling the `GetCartItems` method.</span></span>

### <a name="adding-products-to-the-shopping-cart"></a><span data-ttu-id="91d60-249">Přidání produktů do nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-249">Adding Products to the Shopping Cart</span></span>

<span data-ttu-id="91d60-250">Když se zobrazí stránka *ProductList. aspx* nebo *ProductDetails. aspx* , uživatel bude moct produkt přidat do nákupního košíku pomocí odkazu.</span><span class="sxs-lookup"><span data-stu-id="91d60-250">When either the *ProductList.aspx* or the *ProductDetails.aspx* page is displayed, the user will be able to add the product to the shopping cart using a link.</span></span> <span data-ttu-id="91d60-251">Když kliknete na odkaz, aplikace přejde na stránku zpracování s názvem *AddToCart. aspx*.</span><span class="sxs-lookup"><span data-stu-id="91d60-251">When they click the link, the application navigates to the processing page named *AddToCart.aspx*.</span></span> <span data-ttu-id="91d60-252">Na stránce *AddToCart. aspx* bude volána metoda `AddToCart` ve třídě `ShoppingCart`, kterou jste přidali dříve v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="91d60-252">The *AddToCart.aspx* page will call the `AddToCart` method in the `ShoppingCart` class that you added earlier in this tutorial.</span></span>

<span data-ttu-id="91d60-253">Nyní přidáte odkaz **Přidat do košíku** na stránku *ProductList. aspx* a na stránku *ProductDetails. aspx* .</span><span class="sxs-lookup"><span data-stu-id="91d60-253">Now, you'll add an **Add to Cart** link to both the *ProductList.aspx* page and the *ProductDetails.aspx* page.</span></span> <span data-ttu-id="91d60-254">Tento odkaz bude zahrnovat produkt `ID` načtený z databáze.</span><span class="sxs-lookup"><span data-stu-id="91d60-254">This link will include the product `ID` that is retrieved from the database.</span></span>

1. <span data-ttu-id="91d60-255">V **Průzkumník řešení**vyhledejte a otevřete stránku s názvem *ProductList. aspx*.</span><span class="sxs-lookup"><span data-stu-id="91d60-255">In **Solution Explorer**, find and open the page named *ProductList.aspx*.</span></span>
2. <span data-ttu-id="91d60-256">Přidejte kód zvýrazněný žlutě na stránku *ProductList. aspx* , aby se celá stránka zobrazila takto:</span><span class="sxs-lookup"><span data-stu-id="91d60-256">Add the markup highlighted in yellow to the *ProductList.aspx* page so that the entire page appears as follows:</span></span>  

    [!code-aspx[Main](shopping-cart/samples/sample7.aspx?highlight=50-54)]

### <a name="testing-the-shopping-cart"></a><span data-ttu-id="91d60-257">Testování nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-257">Testing the Shopping Cart</span></span>

<span data-ttu-id="91d60-258">Spusťte aplikaci, abyste viděli, jak do nákupního košíku přidat produkty.</span><span class="sxs-lookup"><span data-stu-id="91d60-258">Run the application to see how you add products to the shopping cart.</span></span>

1. <span data-ttu-id="91d60-259">Stisknutím klávesy **F5** spusťte aplikaci.</span><span class="sxs-lookup"><span data-stu-id="91d60-259">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="91d60-260">Poté, co projekt znovu vytvoří databázi, otevře se prohlížeč a zobrazí se stránka *Default. aspx* .</span><span class="sxs-lookup"><span data-stu-id="91d60-260">After the project recreates the database, the browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="91d60-261">V nabídce navigace v kategorii vyberte osobní **automobily** .</span><span class="sxs-lookup"><span data-stu-id="91d60-261">Select **Cars** from the category navigation menu.</span></span>  
 <span data-ttu-id="91d60-262">Zobrazí se stránka *ProductList. aspx* se zobrazením pouze produktů obsažených v kategorii "auta".</span><span class="sxs-lookup"><span data-stu-id="91d60-262">The *ProductList.aspx* page is displayed showing only products included in the "Cars" category.</span></span> 

    ![Nákupní košík – automobily](shopping-cart/_static/image5.png)
3. <span data-ttu-id="91d60-264">Klikněte na odkaz **Přidat do košíku** vedle prvního produktu uvedeného v seznamu (převoditelné auto).</span><span class="sxs-lookup"><span data-stu-id="91d60-264">Click the **Add to Cart** link next to the first product listed (the convertible car).</span></span>   
 <span data-ttu-id="91d60-265">Zobrazí se stránka *ShoppingCart. aspx* zobrazující výběr v nákupním košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-265">The *ShoppingCart.aspx* page is displayed, showing the selection in your shopping cart.</span></span> 

    ![Nákupní košík – košík](shopping-cart/_static/image6.png)
4. <span data-ttu-id="91d60-267">Kliknutím na možnost **roviny** z navigační nabídky Kategorie zobrazte další produkty.</span><span class="sxs-lookup"><span data-stu-id="91d60-267">View additional products by selecting **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="91d60-268">Klikněte na odkaz **Přidat do košíku** vedle prvního produktu v seznamu.</span><span class="sxs-lookup"><span data-stu-id="91d60-268">Click the **Add to Cart** link next to the first product listed.</span></span>  
 <span data-ttu-id="91d60-269">Zobrazí se stránka *ShoppingCart. aspx* s další položkou.</span><span class="sxs-lookup"><span data-stu-id="91d60-269">The *ShoppingCart.aspx* page is displayed with the additional item.</span></span>
6. <span data-ttu-id="91d60-270">Zavřete prohlížeč.</span><span class="sxs-lookup"><span data-stu-id="91d60-270">Close the browser.</span></span>

### <a name="calculating-and-displaying-the-order-total"></a><span data-ttu-id="91d60-271">Výpočet a zobrazení součtu objednávky</span><span class="sxs-lookup"><span data-stu-id="91d60-271">Calculating and Displaying the Order Total</span></span>

<span data-ttu-id="91d60-272">Kromě přidávání produktů do nákupního košíku přidáte do `ShoppingCart` třídy metodu `GetTotal` a na stránce nákupní košíku se zobrazí celková velikost objednávky.</span><span class="sxs-lookup"><span data-stu-id="91d60-272">In addition to adding products to the shopping cart, you will add a `GetTotal` method to the `ShoppingCart` class and display the total order amount in the shopping cart page.</span></span>

1. <span data-ttu-id="91d60-273">V **Průzkumník řešení**otevřete soubor *ShoppingCartActions.cs* ve složce *Logic* .</span><span class="sxs-lookup"><span data-stu-id="91d60-273">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="91d60-274">Přidejte následující metodu `GetTotal` zvýrazněnou žlutou do `ShoppingCart` třídy, aby se třída zobrazila takto:</span><span class="sxs-lookup"><span data-stu-id="91d60-274">Add the following `GetTotal` method highlighted in yellow to the `ShoppingCart` class, so that the class appears as follows:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample8.cs?highlight=85-97)]

<span data-ttu-id="91d60-275">Nejprve metoda `GetTotal` získá ID nákupního košíku pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="91d60-275">First, the `GetTotal` method gets the ID of the shopping cart for the user.</span></span> <span data-ttu-id="91d60-276">Pak metoda získá součet vozíku vynásobením ceny produktu množstvím produktů pro každý produkt uvedený na vozíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-276">Then the method gets the cart total by multiplying the product price by the product quantity for each product listed in the cart.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="91d60-277">Výše uvedený kód používá typ s možnou hodnotou null "`int?`".</span><span class="sxs-lookup"><span data-stu-id="91d60-277">The above code uses the nullable type "`int?`".</span></span> <span data-ttu-id="91d60-278">Typy s možnou hodnotou null mohou představovat všechny hodnoty nadřazeného typu a také hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="91d60-278">Nullable types can represent all the values of an underlying type, and also as a null value.</span></span> <span data-ttu-id="91d60-279">Další informace najdete v tématu [použití typů s možnou hodnotou null](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="91d60-279">For more information see, [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span></span>

### <a name="modify-the-shopping-cart-display"></a><span data-ttu-id="91d60-280">Upravit zobrazení nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-280">Modify the Shopping Cart Display</span></span>

<span data-ttu-id="91d60-281">Dále upravíte kód pro stránku *ShoppingCart. aspx* pro volání metody `GetTotal` a po načtení stránky se zobrazí celkem na stránce *ShoppingCart. aspx* .</span><span class="sxs-lookup"><span data-stu-id="91d60-281">Next you'll modify the code for the *ShoppingCart.aspx* page to call the `GetTotal` method and display that total on the *ShoppingCart.aspx* page when the page loads.</span></span>

1. <span data-ttu-id="91d60-282">V **Průzkumník řešení**klikněte pravým tlačítkem na stránku *ShoppingCart. aspx* a vyberte **Zobrazit kód**.</span><span class="sxs-lookup"><span data-stu-id="91d60-282">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and select **View Code**.</span></span>
2. <span data-ttu-id="91d60-283">V souboru *ShoppingCart.aspx.cs* aktualizujte obslužnou rutinu `Page_Load` přidáním následujícího kódu zvýrazněného žlutě:</span><span class="sxs-lookup"><span data-stu-id="91d60-283">In the *ShoppingCart.aspx.cs* file, update the `Page_Load` handler by adding the following code highlighted in yellow:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample9.cs?highlight=16-31)]

<span data-ttu-id="91d60-284">Když se načte stránka *ShoppingCart. aspx* , načte se objekt nákupního košíku a potom se vyplní celková hodnota nákupního košíku voláním metody `GetTotal` třídy `ShoppingCart`.</span><span class="sxs-lookup"><span data-stu-id="91d60-284">When the *ShoppingCart.aspx* page loads, it loads the shopping cart object and then retrieves the shopping cart total by calling the `GetTotal` method of the `ShoppingCart` class.</span></span> <span data-ttu-id="91d60-285">Pokud je nákupní košík prázdný, zobrazí se zpráva s tímto efektem.</span><span class="sxs-lookup"><span data-stu-id="91d60-285">If the shopping cart is empty, a message to that effect is displayed.</span></span>

### <a name="testing-the-shopping-cart-total"></a><span data-ttu-id="91d60-286">Testování celkových nákupních košíků</span><span class="sxs-lookup"><span data-stu-id="91d60-286">Testing the Shopping Cart Total</span></span>

<span data-ttu-id="91d60-287">Spusťte aplikaci hned, abyste viděli, jak do nákupního košíku nemůžete přidávat jenom produkt, ale můžete zobrazit celkové množství nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-287">Run the application now to see how you can not only add a product to the shopping cart, but you can see the shopping cart total.</span></span>

1. <span data-ttu-id="91d60-288">Stisknutím klávesy **F5** spusťte aplikaci.</span><span class="sxs-lookup"><span data-stu-id="91d60-288">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="91d60-289">V prohlížeči se otevře a zobrazí stránka *Default. aspx* .</span><span class="sxs-lookup"><span data-stu-id="91d60-289">The browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="91d60-290">V nabídce navigace v kategorii vyberte osobní **automobily** .</span><span class="sxs-lookup"><span data-stu-id="91d60-290">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="91d60-291">Klikněte na odkaz **Přidat do košíku** vedle prvního produktu.</span><span class="sxs-lookup"><span data-stu-id="91d60-291">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="91d60-292">Zobrazí se stránka *ShoppingCart. aspx* s celkovým pořadím.</span><span class="sxs-lookup"><span data-stu-id="91d60-292">The *ShoppingCart.aspx* page is displayed with the order total.</span></span> 

    ![Nákupní košík – celková částka na košíku](shopping-cart/_static/image7.png)
4. <span data-ttu-id="91d60-294">Přidejte k vozíku některé další produkty (například rovinu).</span><span class="sxs-lookup"><span data-stu-id="91d60-294">Add some other products (for example, a plane) to the cart.</span></span>
5. <span data-ttu-id="91d60-295">Zobrazí se stránka *ShoppingCart. aspx* s aktualizovaným součtem pro všechny produkty, které jste přidali.</span><span class="sxs-lookup"><span data-stu-id="91d60-295">The *ShoppingCart.aspx* page is displayed with an updated total for all the products you've added.</span></span> 

    ![Nákupní košík – několik produktů](shopping-cart/_static/image8.png)
6. <span data-ttu-id="91d60-297">Ukončení spuštěné aplikace zavřením okna prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="91d60-297">Stop the running app by closing the browser window.</span></span>

### <a name="adding-update-and-checkout-buttons-to-the-shopping-cart"></a><span data-ttu-id="91d60-298">Přidání tlačítek aktualizace a rezervace do nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-298">Adding Update and Checkout Buttons to the Shopping Cart</span></span>

<span data-ttu-id="91d60-299">Pokud chcete uživatelům dovolit, aby si nákupní košík změnili, přidejte na stránku nákupní košíku tlačítko **aktualizace** a tlačítko pro **rezervaci** .</span><span class="sxs-lookup"><span data-stu-id="91d60-299">To allow the users to modify the shopping cart, you'll add an **Update** button and a **Checkout** button to the shopping cart page.</span></span> <span data-ttu-id="91d60-300">Tlačítko pro **rezervaci** se nepoužívá až do pozdějšího použití v této sérii kurzů.</span><span class="sxs-lookup"><span data-stu-id="91d60-300">The **Checkout** button is not used until later in this tutorial series.</span></span>

1. <span data-ttu-id="91d60-301">V **Průzkumník řešení**otevřete stránku *ShoppingCart. aspx* v kořenovém adresáři projektu webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="91d60-301">In **Solution Explorer**, open the *ShoppingCart.aspx* page in the root of the web application project.</span></span>
2. <span data-ttu-id="91d60-302">Chcete-li přidat tlačítko **aktualizace** a tlačítko pro **rezervaci** na stránku *ShoppingCart. aspx* , přidejte kód zvýrazněný žlutě k existujícímu kódu, jak je znázorněno v následujícím kódu:</span><span class="sxs-lookup"><span data-stu-id="91d60-302">To add the **Update** button and the **Checkout** button to the *ShoppingCart.aspx* page, add the markup highlighted in yellow to the existing markup, as shown in the following code:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample10.aspx?highlight=36-45)]

<span data-ttu-id="91d60-303">Když uživatel klikne na tlačítko **aktualizovat** , bude volána obslužná rutina události `UpdateBtn_Click`.</span><span class="sxs-lookup"><span data-stu-id="91d60-303">When the user clicks the **Update** button, the `UpdateBtn_Click` event handler will be called.</span></span> <span data-ttu-id="91d60-304">Tato obslužná rutina události bude volat kód, který přidáte v dalším kroku.</span><span class="sxs-lookup"><span data-stu-id="91d60-304">This event handler will call the code that you'll add in the next step.</span></span>

<span data-ttu-id="91d60-305">Dále můžete aktualizovat kód obsažený v souboru *ShoppingCart.aspx.cs* tak, aby procházely přes položky košíku, a volat `RemoveItem` a `UpdateItem` metody.</span><span class="sxs-lookup"><span data-stu-id="91d60-305">Next, you can update the code contained in the *ShoppingCart.aspx.cs* file to loop through the cart items and call the `RemoveItem` and `UpdateItem` methods.</span></span>

1. <span data-ttu-id="91d60-306">V **Průzkumník řešení**otevřete soubor *ShoppingCart.aspx.cs* v kořenovém adresáři projektu webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="91d60-306">In **Solution Explorer**, open the *ShoppingCart.aspx.cs* file in the root of the web application project.</span></span>
2. <span data-ttu-id="91d60-307">Přidejte následující části kódu zvýrazněné žlutě do souboru *ShoppingCart.aspx.cs* :</span><span class="sxs-lookup"><span data-stu-id="91d60-307">Add the following code sections highlighted in yellow to the *ShoppingCart.aspx.cs* file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample11.cs?highlight=9-11,33,44-89)]

<span data-ttu-id="91d60-308">Když uživatel klikne na stránku *ShoppingCart. aspx* na tlačítko **aktualizovat** , zavolá se metoda UpdateCartItems.</span><span class="sxs-lookup"><span data-stu-id="91d60-308">When the user clicks the **Update** button on the *ShoppingCart.aspx* page, the UpdateCartItems method is called.</span></span> <span data-ttu-id="91d60-309">Metoda UpdateCartItems načte aktualizované hodnoty pro každou položku v nákupním košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-309">The UpdateCartItems method gets the updated values for each item in the shopping cart.</span></span> <span data-ttu-id="91d60-310">Metoda UpdateCartItems pak volá metodu `UpdateShoppingCartDatabase` (přidáno a vysvětlena v dalším kroku), aby buď přidala nebo odebrala položky z nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-310">Then, the UpdateCartItems method calls the `UpdateShoppingCartDatabase` method (added and explained in the next step) to either add or remove items from the shopping cart.</span></span> <span data-ttu-id="91d60-311">Po aktualizaci databáze tak, aby odrážela aktualizace nákupního košíku, se ovládací prvek **GridView** aktualizuje na stránce nákupního košíku voláním metody `DataBind` pro **prvek GridView**.</span><span class="sxs-lookup"><span data-stu-id="91d60-311">Once the database has been updated to reflect the updates to the shopping cart, the **GridView** control is updated on the shopping cart page by calling the `DataBind` method for the **GridView**.</span></span> <span data-ttu-id="91d60-312">Celková částka objednávky na stránce nákupního košíku se také aktualizuje tak, aby odrážela aktualizovaný seznam položek.</span><span class="sxs-lookup"><span data-stu-id="91d60-312">Also, the total order amount on the shopping cart page is updated to reflect the updated list of items.</span></span>

### <a name="updating-and-removing-shopping-cart-items"></a><span data-ttu-id="91d60-313">Aktualizace a odebírání položek nákupních košíků</span><span class="sxs-lookup"><span data-stu-id="91d60-313">Updating and Removing Shopping Cart Items</span></span>

<span data-ttu-id="91d60-314">Na stránce *ShoppingCart. aspx* vidíte ovládací prvky, které byly přidány pro aktualizaci množství položky a odebrání položky.</span><span class="sxs-lookup"><span data-stu-id="91d60-314">On the *ShoppingCart.aspx* page, you can see controls have been added for updating the quantity of an item and removing an item.</span></span> <span data-ttu-id="91d60-315">Nyní přidejte kód, který zajistí fungování těchto ovládacích prvků.</span><span class="sxs-lookup"><span data-stu-id="91d60-315">Now, add the code that will make these controls work.</span></span>

1. <span data-ttu-id="91d60-316">V **Průzkumník řešení**otevřete soubor *ShoppingCartActions.cs* ve složce *Logic* .</span><span class="sxs-lookup"><span data-stu-id="91d60-316">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="91d60-317">Přidejte následující kód zvýrazněný žlutě do souboru třídy *ShoppingCartActions.cs* :</span><span class="sxs-lookup"><span data-stu-id="91d60-317">Add the following code highlighted in yellow to the *ShoppingCartActions.cs* class file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample12.cs?highlight=99-213)]

<span data-ttu-id="91d60-318">Metoda `UpdateShoppingCartDatabase` volaná z metody `UpdateCartItems` na stránce *ShoppingCart.aspx.cs* obsahuje logiku pro aktualizaci nebo odebrání položek z nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-318">The `UpdateShoppingCartDatabase` method, called from the `UpdateCartItems` method on the *ShoppingCart.aspx.cs* page, contains the logic to either update or remove items from the shopping cart.</span></span> <span data-ttu-id="91d60-319">Metoda `UpdateShoppingCartDatabase` prochází všechny řádky v seznamu nákupních košíků.</span><span class="sxs-lookup"><span data-stu-id="91d60-319">The `UpdateShoppingCartDatabase` method iterates through all the rows within the shopping cart list.</span></span> <span data-ttu-id="91d60-320">Pokud byla položka nákupního košíku označena k odebrání nebo je množství menší než jedna, je volána metoda `RemoveItem`.</span><span class="sxs-lookup"><span data-stu-id="91d60-320">If a shopping cart item has been marked to be removed, or the quantity is less than one, the `RemoveItem` method is called.</span></span> <span data-ttu-id="91d60-321">V opačném případě je v případě, že je volána metoda `UpdateItem`, kontrolována položka nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-321">Otherwise, the shopping cart item is checked for updates when the `UpdateItem` method is called.</span></span> <span data-ttu-id="91d60-322">Po odebrání nebo aktualizaci položky nákupního košíku se uloží změny databáze.</span><span class="sxs-lookup"><span data-stu-id="91d60-322">After the shopping cart item has been removed or updated, the database changes are saved.</span></span>

<span data-ttu-id="91d60-323">Struktura `ShoppingCartUpdates` slouží k uložení všech položek nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-323">The `ShoppingCartUpdates` structure is used to hold all the shopping cart items.</span></span> <span data-ttu-id="91d60-324">Metoda `UpdateShoppingCartDatabase` používá strukturu `ShoppingCartUpdates` k určení, jestli je potřeba aktualizovat nebo odebrat některou z položek.</span><span class="sxs-lookup"><span data-stu-id="91d60-324">The `UpdateShoppingCartDatabase` method uses the `ShoppingCartUpdates` structure to determine if any of the items need to be updated or removed.</span></span>

<span data-ttu-id="91d60-325">V dalším kurzu vymažete nákupní košík po zakoupení produktů pomocí metody `EmptyCart`.</span><span class="sxs-lookup"><span data-stu-id="91d60-325">In the next tutorial, you will use the `EmptyCart` method to clear the shopping cart after purchasing products.</span></span> <span data-ttu-id="91d60-326">Zatím ale použijete metodu `GetCount`, kterou jste právě přidali do souboru *ShoppingCartActions.cs* , abyste zjistili, kolik položek je na nákupním košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-326">But for now, you will use the `GetCount` method that you just added to the *ShoppingCartActions.cs* file to determine how many items are in the shopping cart.</span></span>

### <a name="adding-a-shopping-cart-counter"></a><span data-ttu-id="91d60-327">Přidání čítače nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-327">Adding a Shopping Cart Counter</span></span>

<span data-ttu-id="91d60-328">Chcete-li uživateli dovolit zobrazit celkový počet položek v nákupním košíku, přidáte čítač do stránky *Web. Master* .</span><span class="sxs-lookup"><span data-stu-id="91d60-328">To allow the user to view the total number of items in the shopping cart, you will add a counter to the *Site.Master* page.</span></span> <span data-ttu-id="91d60-329">Tento čítač bude také fungovat jako odkaz na nákupní košík.</span><span class="sxs-lookup"><span data-stu-id="91d60-329">This counter will also act as a link to the shopping cart.</span></span>

1. <span data-ttu-id="91d60-330">V **Průzkumník řešení**otevřete stránku *Web. Master* .</span><span class="sxs-lookup"><span data-stu-id="91d60-330">In **Solution Explorer**, open the *Site.Master* page.</span></span>
2. <span data-ttu-id="91d60-331">Upravte kód přidáním propojení čítače nákupního košíku, jak je znázorněno žlutě do navigační oblasti, takže se zobrazí takto:</span><span class="sxs-lookup"><span data-stu-id="91d60-331">Modify the markup by adding the shopping cart counter link as shown in yellow to the navigation section so it appears as follows:</span></span>  

    [!code-html[Main](shopping-cart/samples/sample13.html?highlight=6)]
3. <span data-ttu-id="91d60-332">Dále aktualizujte kód na pozadí souboru *site.Master.cs* tak, že přidáte kód zvýrazněný žlutě, jak je znázorněno níže:</span><span class="sxs-lookup"><span data-stu-id="91d60-332">Next, update the code-behind of the *Site.Master.cs* file by adding the code highlighted in yellow as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample14.cs?highlight=11,77-84)]

<span data-ttu-id="91d60-333">Předtím, než se stránka vykreslí jako HTML, vyvolá se událost `Page_PreRender`.</span><span class="sxs-lookup"><span data-stu-id="91d60-333">Before the page is rendered as HTML, the `Page_PreRender` event is raised.</span></span> <span data-ttu-id="91d60-334">V obslužné rutině `Page_PreRender` je celkový počet nákupních košíků určen voláním metody `GetCount`.</span><span class="sxs-lookup"><span data-stu-id="91d60-334">In the `Page_PreRender` handler, the total count of the shopping cart is determined by calling the `GetCount` method.</span></span> <span data-ttu-id="91d60-335">Vrácená hodnota je přidána do rozsahu `cartCount` zahrnutého v označení stránky *site. Master* .</span><span class="sxs-lookup"><span data-stu-id="91d60-335">The returned value is added to the `cartCount` span included in the markup of the *Site.Master* page.</span></span> <span data-ttu-id="91d60-336">Značky `<span>` umožňují správné vykreslení vnitřních prvků.</span><span class="sxs-lookup"><span data-stu-id="91d60-336">The `<span>` tags enables the inner elements to be properly rendered.</span></span> <span data-ttu-id="91d60-337">Po zobrazení libovolné stránky webu se zobrazí celková hodnota nákupního košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-337">When any page of the site is displayed, the shopping cart total will be displayed.</span></span> <span data-ttu-id="91d60-338">Uživatel také může kliknutím na součet nákupního košíku Zobrazit nákupní košík.</span><span class="sxs-lookup"><span data-stu-id="91d60-338">The user can also click the shopping cart total to display the shopping cart.</span></span>

## <a name="testing-the-completed-shopping-cart"></a><span data-ttu-id="91d60-339">Testování dokončeného nákupního košíku</span><span class="sxs-lookup"><span data-stu-id="91d60-339">Testing the Completed Shopping Cart</span></span>

<span data-ttu-id="91d60-340">Aplikaci teď můžete spustit, abyste viděli, jak můžete přidat, odstranit a aktualizovat položky v nákupním košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-340">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="91d60-341">Celkové náklady na nákupní košík se projeví na všech položkách v nákupním košíku.</span><span class="sxs-lookup"><span data-stu-id="91d60-341">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="91d60-342">Stisknutím klávesy **F5** spusťte aplikaci.</span><span class="sxs-lookup"><span data-stu-id="91d60-342">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="91d60-343">Prohlížeč otevře a zobrazí stránku *Default. aspx* .</span><span class="sxs-lookup"><span data-stu-id="91d60-343">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="91d60-344">V nabídce navigace v kategorii vyberte osobní **automobily** .</span><span class="sxs-lookup"><span data-stu-id="91d60-344">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="91d60-345">Klikněte na odkaz **Přidat do košíku** vedle prvního produktu.</span><span class="sxs-lookup"><span data-stu-id="91d60-345">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="91d60-346">Zobrazí se stránka *ShoppingCart. aspx* s celkovým pořadím.</span><span class="sxs-lookup"><span data-stu-id="91d60-346">The *ShoppingCart.aspx* page is displayed with the order total.</span></span>
4. <span data-ttu-id="91d60-347">V nabídce navigace v kategorii vyberte **roviny** .</span><span class="sxs-lookup"><span data-stu-id="91d60-347">Select **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="91d60-348">Klikněte na odkaz **Přidat do košíku** vedle prvního produktu.</span><span class="sxs-lookup"><span data-stu-id="91d60-348">Click the **Add To Cart** link next to the first product.</span></span>
6. <span data-ttu-id="91d60-349">Nastavte množství první položky v nákupním košíku na hodnotu 3 a zaškrtněte políčko **Odebrat položku** u druhé položky.<a id="a"></a></span><span class="sxs-lookup"><span data-stu-id="91d60-349">Set the quantity of the first item in the shopping cart to 3 and select the **Remove Item** check box of the second item.<a id="a"></a></span></span>
7. <span data-ttu-id="91d60-350">Kliknutím na tlačítko **aktualizovat** aktualizujete stránku nákupní košík a zobrazí se celková objednávka.</span><span class="sxs-lookup"><span data-stu-id="91d60-350">Click the **Update** button to update the shopping cart page and display the new order total.</span></span> 

    ![Nákupní košík – aktualizace košíku](shopping-cart/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="91d60-352">Přehled</span><span class="sxs-lookup"><span data-stu-id="91d60-352">Summary</span></span>

<span data-ttu-id="91d60-353">V tomto kurzu jste vytvořili nákupní košík pro ukázkovou aplikaci Wingtip Toys Web Forms.</span><span class="sxs-lookup"><span data-stu-id="91d60-353">In this tutorial, you have created a shopping cart for the Wingtip Toys Web Forms sample application.</span></span> <span data-ttu-id="91d60-354">V tomto kurzu jste použili Entity Framework Code First, datové poznámky, ovládací prvky silného typu dat a vazby modelu.</span><span class="sxs-lookup"><span data-stu-id="91d60-354">During this tutorial you have used Entity Framework Code First, data annotations, strongly typed data controls, and model binding.</span></span>

<span data-ttu-id="91d60-355">Nákupní košík podporuje přidávání, odstraňování a aktualizaci položek, které uživatel vybral k nákupu.</span><span class="sxs-lookup"><span data-stu-id="91d60-355">The shopping cart supports adding, deleting, and updating items that the user has selected for purchase.</span></span> <span data-ttu-id="91d60-356">Kromě implementace funkce nákupního košíku jste zjistili, jak zobrazit položky nákupního košíku v ovládacím prvku **GridView** a vypočítat celkové pořadí.</span><span class="sxs-lookup"><span data-stu-id="91d60-356">In addition to implementing the shopping cart functionality, you have learned how to display shopping cart items in a **GridView** control and calculate the order total.</span></span>

<span data-ttu-id="91d60-357">Abyste porozuměli tomu, jak popsané funkce fungují v reálné obchodní aplikaci, můžete si prohlédnout příklad [NopCommerce](https://github.com/nopSolutions/nopCommerce) nákupního košíku založeného na ASP.NET na bázi open source elektronického obchodování.</span><span class="sxs-lookup"><span data-stu-id="91d60-357">In order to understand how the described functionality works in a real business application, you can view the example of [nopCommerce](https://github.com/nopSolutions/nopCommerce) - ASP.NET based open source eCommerce shopping cart.</span></span> <span data-ttu-id="91d60-358">Původně byly postaveny na webových formulářích a za roky, které jste přesunuli do MVC a teď ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="91d60-358">Originally, it was built on Web Forms and over the years it moved to MVC and now to ASP.NET Core.</span></span>

## <a name="addition-information"></a><span data-ttu-id="91d60-359">Informace o přidání</span><span class="sxs-lookup"><span data-stu-id="91d60-359">Addition Information</span></span>

[<span data-ttu-id="91d60-360">Přehled stavu relace ASP.NET</span><span class="sxs-lookup"><span data-stu-id="91d60-360">ASP.NET Session State Overview</span></span>](https://msdn.microsoft.com/library/ms178581.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="91d60-361">[Předchozí](display_data_items_and_details.md)
> [Další](checkout-and-payment-with-paypal.md)</span><span class="sxs-lookup"><span data-stu-id="91d60-361">[Previous](display_data_items_and_details.md)
[Next](checkout-and-payment-with-paypal.md)</span></span>
