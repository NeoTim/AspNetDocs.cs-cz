---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments
title: Nasazení členství v databázových rolích do testovacího prostředí | Dokumentace Microsoftu
author: jrjlee
description: Toto téma popisuje, jak přidat uživatelské účty do databázových rolí jako součást nasazení řešení do testovacího prostředí. Když nasadíte řešení obsahující...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 9b2af539-7ad9-47aa-b66e-873bd9906e79
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments
msc.type: authoredcontent
ms.openlocfilehash: fd0914ed62a280fea290b9f1b150fc25c8ed6d40
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/09/2019
ms.locfileid: "59385329"
---
# <a name="deploying-database-role-memberships-to-test-environments"></a><span data-ttu-id="b0e1c-104">Nasazení členství v databázových rolích do testovacího prostředí</span><span class="sxs-lookup"><span data-stu-id="b0e1c-104">Deploying Database Role Memberships to Test Environments</span></span>

<span data-ttu-id="b0e1c-105">podle [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="b0e1c-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="b0e1c-106">Stáhnout PDF</span><span class="sxs-lookup"><span data-stu-id="b0e1c-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="b0e1c-107">Toto téma popisuje, jak přidat uživatelské účty do databázových rolí jako součást nasazení řešení do testovacího prostředí.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-107">This topic describes how to add user accounts to database roles as part of a solution deployment to a test environment.</span></span>
> 
> <span data-ttu-id="b0e1c-108">Když nasadíte řešení obsahující databázový projekt do testovací nebo produkční prostředí, obvykle nechcete pro vývojáře k automatizaci přidání uživatelských účtů do databázové role.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-108">When you deploy a solution containing a database project to a staging or production environment, you typically don't want the developer to automate the addition of user accounts to database roles.</span></span> <span data-ttu-id="b0e1c-109">Ve většině případů vývojář nepoznáte uživatelské účty, které je potřeba přidat do které databázových rolí a tyto požadavky může kdykoli změnit.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-109">In most cases, the developer won't know which user accounts need to be added to which database roles, and these requirements could change at any time.</span></span> <span data-ttu-id="b0e1c-110">Při nasazení řešení obsahujícího projekt databáze na vývojovém nebo testovacím prostředí, situace se však obvykle raději liší:</span><span class="sxs-lookup"><span data-stu-id="b0e1c-110">However, when you deploy a solution containing a database project to a development or test environment, the situation is usually rather different:</span></span>
> 
> - <span data-ttu-id="b0e1c-111">Vývojáři obvykle znovu nasadí řešení v pravidelných intervalech, často několikrát za den.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-111">The developer typically re-deploys the solution on a regular basis, often several times a day.</span></span>
> - <span data-ttu-id="b0e1c-112">Databáze je obvykle znovu vytvořena při každém nasazení, což znamená, že uživatelé databáze musí být vytvořen a přidán do role po každém nasazení.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-112">The database is typically re-created on every deployment, which means that database users must be created and added to roles after every deployment.</span></span>
> - <span data-ttu-id="b0e1c-113">Vývojáři obvykle má plnou kontrolu nad cílové vývojové nebo testovací prostředí.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-113">The developer typically has full control over the target development or test environment.</span></span>
> 
> <span data-ttu-id="b0e1c-114">V tomto scénáři je často výhodné a automaticky vytvořte uživatele databáze s členstvím v databázových rolích přiřadit jako součást procesu nasazení.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-114">In this scenario, it's often beneficial to automatically create database users and assign database role memberships as part of the deployment process.</span></span>
> 
> <span data-ttu-id="b0e1c-115">Klíčovým faktorem je, že tuto operaci musí být podmíněné podle cílového prostředí.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-115">The key factor is that this operation needs to be conditional based on the target environment.</span></span> <span data-ttu-id="b0e1c-116">Pokud nasazení provádíte pracovní nebo produkční prostředí, budete chtít tuto operaci přeskočit.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-116">If you're deploying to a staging or a production environment, you want to skip the operation.</span></span> <span data-ttu-id="b0e1c-117">Pokud nasazení provádíte do vývojář nebo testovacího prostředí, budete chtít nasadit členství v rolích bez dalšího zásahu.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-117">If you're deploying to a developer or test environment, you want to deploy role memberships without further intervention.</span></span> <span data-ttu-id="b0e1c-118">Toto téma popisuje jeden z přístupů, které můžete použít k řešení těchto problémů.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-118">This topic describes one approach you can use to address this challenge.</span></span>


<span data-ttu-id="b0e1c-119">Toto téma je součástí série kurzů podle požadavků na nasazení enterprise fiktivní společnosti s názvem společnosti Fabrikam, Inc. V této sérii kurzů používá ukázkové řešení&#x2014; [řešení Správce kontaktů](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;představující webovou aplikaci s realistické úroveň složitosti, včetně aplikace ASP.NET MVC 3, komunikace Windows Služba Foundation (WCF) a databázový projekt.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-119">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="b0e1c-120">Metody nasazení v srdci těchto kurzů je založen na rozdělení přístupu soubor projektu je popsáno v [vysvětlení souboru projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md), ve které je řízena procesem sestavení dva soubory projektu&#x2014;jeden obsahující pokyny, které platí pro všechny cílové prostředí a jeden obsahuje nastavení pro konkrétní prostředí sestavení a nasazení pro sestavení.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-120">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="b0e1c-121">V okamžiku sestavení souboru projektu specifických pro prostředí se sloučí do souboru projektu bez ohledu na prostředí a vytvoří kompletní sadu pokynů sestavení.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-121">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="b0e1c-122">Přehled úloh</span><span class="sxs-lookup"><span data-stu-id="b0e1c-122">Task Overview</span></span>

<span data-ttu-id="b0e1c-123">Toto téma předpokládá, že:</span><span class="sxs-lookup"><span data-stu-id="b0e1c-123">This topic assumes that:</span></span>

- <span data-ttu-id="b0e1c-124">Použít rozdělení projektu souboru přístup k nasazení řešení, jak je popsáno v [vysvětlení souboru projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="b0e1c-124">You use the split project file approach to solution deployment, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="b0e1c-125">Volání VSDBCMD ze souboru projektu k nasazení projektu databáze, jak je popsáno v [Principy procesu sestavení](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="b0e1c-125">You call VSDBCMD from the project file to deploy your database project, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="b0e1c-126">Vytvoření uživatelů databáze a přiřazení členství v rolích při nasazení projektu databáze do testovacího prostředí, bude nutné:</span><span class="sxs-lookup"><span data-stu-id="b0e1c-126">To create database users and assign role memberships when you deploy a database project to a test environment, you'll need to:</span></span>

- <span data-ttu-id="b0e1c-127">Vytvořte skript Transact Structured Query Language (Transact-SQL), který provede změny nezbytné databáze.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-127">Create a Transact Structured Query Language (Transact-SQL) script that makes the necessary database changes.</span></span>
- <span data-ttu-id="b0e1c-128">Vytvořte cíl Microsoft Build Engine (MSBuild), který používá nástroje sqlcmd.exe spusťte skript SQL.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-128">Create a Microsoft Build Engine (MSBuild) target that uses the sqlcmd.exe utility to run the SQL script.</span></span>
- <span data-ttu-id="b0e1c-129">Konfigurovat soubory projektu, který má být vyvolán cíl při nasazení řešení do testovacího prostředí.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-129">Configure your project files to invoke the target when you're deploying your solution to a test environment.</span></span>

<span data-ttu-id="b0e1c-130">Postup pro každý z těchto postupů se zobrazí v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-130">This topic will show you how to perform each of these procedures.</span></span>

## <a name="scripting-the-database-role-memberships"></a><span data-ttu-id="b0e1c-131">Skriptování členství Role databáze</span><span class="sxs-lookup"><span data-stu-id="b0e1c-131">Scripting the Database Role Memberships</span></span>

<span data-ttu-id="b0e1c-132">Vytvoříte třeba skript Transact-SQL v mnoha různými způsoby, a na libovolném místě zvolíte.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-132">You can create a Transact-SQL script in a lot of different ways, and in any location you choose.</span></span> <span data-ttu-id="b0e1c-133">Nejjednodušší způsob je postup vytvoření skriptu v rámci vašeho řešení v sadě Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-133">The easiest approach is to create the script within your solution in Visual Studio 2010.</span></span>

**<span data-ttu-id="b0e1c-134">Chcete-li vytvořit skript SQL</span><span class="sxs-lookup"><span data-stu-id="b0e1c-134">To create a SQL script</span></span>**

1. <span data-ttu-id="b0e1c-135">V **Průzkumníka řešení** okna, rozbalte uzel projektu databáze.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-135">In the **Solution Explorer** window, expand your database project node.</span></span>
2. <span data-ttu-id="b0e1c-136">Klikněte pravým tlačítkem **skripty** složku, přejděte na **přidat**a potom klikněte na **novou složku**.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-136">Right-click the **Scripts** folder, point to **Add**, and then click **New Folder**.</span></span>
3. <span data-ttu-id="b0e1c-137">Typ **Test** jako název složky a potom stiskněte klávesu Enter.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-137">Type **Test** as the folder name, and then press Enter.</span></span>
4. <span data-ttu-id="b0e1c-138">Klikněte pravým tlačítkem na **testovací** složku, přejděte na příkaz **přidat**a potom klikněte na tlačítko **skript**.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-138">Right-click the **Test** folder, point to **Add**, and then click **Script**.</span></span>
5. <span data-ttu-id="b0e1c-139">V **přidat novou položku** dialogové okno pole, dejte smysluplný název vašeho skriptu (například **AddRoleMemberships.sql**) a potom klikněte na tlačítko **přidat**.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-139">In the **Add New Item** dialog box, give your script a meaningful name (for example, **AddRoleMemberships.sql**), and then click **Add**.</span></span>

    ![](deploying-database-role-memberships-to-test-environments/_static/image1.png)
6. <span data-ttu-id="b0e1c-140">V *AddRoleMemberships.sql* přidejte příkazů jazyka Transact-SQL, který:</span><span class="sxs-lookup"><span data-stu-id="b0e1c-140">In the *AddRoleMemberships.sql* file, add Transact-SQL statements that:</span></span>

    1. <span data-ttu-id="b0e1c-141">Vytvořte uživatele databáze pro přihlášení serveru SQL Server, který bude přístup k databázi.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-141">Create a database user for the SQL Server login that will access your database.</span></span>
    2. <span data-ttu-id="b0e1c-142">Přidejte uživatele databáze do rolí databáze.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-142">Add the database user to any required database roles.</span></span>
7. <span data-ttu-id="b0e1c-143">Soubor by měl vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="b0e1c-143">The file should resemble this:</span></span>

    [!code-sql[Main](deploying-database-role-memberships-to-test-environments/samples/sample1.sql)]
8. <span data-ttu-id="b0e1c-144">Uložte soubor.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-144">Save the file.</span></span>

## <a name="executing-the-script-on-the-target-database"></a><span data-ttu-id="b0e1c-145">Spuštění skriptu na cílové databázi</span><span class="sxs-lookup"><span data-stu-id="b0e1c-145">Executing the Script on the Target Database</span></span>

<span data-ttu-id="b0e1c-146">V ideálním případě by spustíte všechny požadované skripty jazyka Transact-SQL jako součást skriptu po nasazení při nasazení projektu databáze.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-146">Ideally, you'd run any required Transact-SQL scripts as part of a post-deployment script when you deploy your database project.</span></span> <span data-ttu-id="b0e1c-147">Skripty po nasazení není však umožňují spouštět logiky podmíněně na základě konfigurace řešení nebo vlastností sestavení.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-147">However, post-deployment scripts don't allow you to execute logic conditionally based on solution configurations or build properties.</span></span> <span data-ttu-id="b0e1c-148">Alternativou je spuštění skriptů SQL přímo ze souboru projektu MSBuild, tak, že vytvoříte **cílové** element, který provede příkaz sqlcmd.exe.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-148">The alternative is to run your SQL scripts directly from the MSBuild project file, by creating a **Target** element that executes a sqlcmd.exe command.</span></span> <span data-ttu-id="b0e1c-149">Použijte tento příkaz pro spuštění skriptu na cílové databázi:</span><span class="sxs-lookup"><span data-stu-id="b0e1c-149">You can use this command to run your script on the target database:</span></span>


[!code-console[Main](deploying-database-role-memberships-to-test-environments/samples/sample2.cmd)]


> [!NOTE]
> <span data-ttu-id="b0e1c-150">Další informace o možnostech příkazového řádku sqlcmd najdete v tématu [Nástroj sqlcmd](https://msdn.microsoft.com/library/ms162773.aspx).</span><span class="sxs-lookup"><span data-stu-id="b0e1c-150">For more information on sqlcmd command-line options, see [sqlcmd Utility](https://msdn.microsoft.com/library/ms162773.aspx).</span></span>


<span data-ttu-id="b0e1c-151">Před vložením tento příkaz v cíli MSBuild, je potřeba zvážit, za jakých podmínek chcete skript ke spuštění:</span><span class="sxs-lookup"><span data-stu-id="b0e1c-151">Before you embed this command in an MSBuild target, you need to consider under what conditions you want the script to run:</span></span>

- <span data-ttu-id="b0e1c-152">Cílová databáze musí existovat před změnou jeho členství v rolích.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-152">The target database must exist before you change its role memberships.</span></span> <span data-ttu-id="b0e1c-153">V důsledku toho je potřeba spustit tento skript *po* nasazení databáze.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-153">As such, you need to run this script *after* the database deployment.</span></span>
- <span data-ttu-id="b0e1c-154">Je potřeba zahrnout podmínku tak, aby skript se spustí pouze pro testovací prostředí.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-154">You need to include a condition so that the script is only executed for test environments.</span></span>
- <span data-ttu-id="b0e1c-155">Pokud používáte nasazení "what if"&#x2014;jinými slovy, pokud jste generování skriptů nasazení ale nejsou ve skutečnosti spouštěním&#x2014;byste neměli spouštět skript SQL.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-155">If you're running a "what if" deployment&#x2014;in other words, if you're generating deployment scripts but not actually running them&#x2014;you shouldn't run the SQL script.</span></span>

<span data-ttu-id="b0e1c-156">Pokud používáte přístup soubor projektu rozdělit podle [vysvětlení souboru projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md), jak je ukázáno v ukázkovém řešení Správce kontaktů, můžete rozdělit pokynů sestavení vašeho skriptu SQL takto:</span><span class="sxs-lookup"><span data-stu-id="b0e1c-156">If you're using the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), as demonstrated by the Contact Manager sample solution, you can split the build instructions for your SQL script like this:</span></span>

- <span data-ttu-id="b0e1c-157">Veškeré požadované vlastnosti specifické pro prostředí, spolu s vlastností, která určuje, jestli se má nasadit oprávnění, by měly patřit v souboru projektu specifických pro prostředí (například *Env Dev.proj*).</span><span class="sxs-lookup"><span data-stu-id="b0e1c-157">Any required environment-specific properties, together with the property that determines whether to deploy permissions, should go in the environment-specific project file (for example, *Env-Dev.proj*).</span></span>
- <span data-ttu-id="b0e1c-158">Cíl nástroje MSBuild, společně s všechny vlastnosti, které nedojde ke změně mezi prostředími cíl by měl přejít v souboru projektu univerzální (například *Publish.proj*).</span><span class="sxs-lookup"><span data-stu-id="b0e1c-158">The MSBuild target itself, together with any properties that will not change between destination environments, should go in the universal project file (for example, *Publish.proj*).</span></span>

<span data-ttu-id="b0e1c-159">V souboru projektu specifických pro prostředí musíte zadat název databázového serveru, název cílové databáze a logická vlastnost, která umožňuje uživatelům určit, jestli se má nasadit členství v rolích.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-159">In the environment-specific project file, you need to define the database server name, the target database name, and a Boolean property that lets the user specify whether to deploy role memberships.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample3.xml)]


<span data-ttu-id="b0e1c-160">V souboru projektu univerzální budete muset zadat umístění sqlcmd spustitelný soubor a umístění, které chcete spustit skript jazyka SQL.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-160">In the universal project file, you need to provide the location of the sqlcmd executable and the location of the SQL script you want to run.</span></span> <span data-ttu-id="b0e1c-161">Tyto vlastnosti zůstane stejný bez ohledu na cílovém prostředí.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-161">These properties will remain the same regardless of the destination environment.</span></span> <span data-ttu-id="b0e1c-162">Je také potřeba vytvořit cíl nástroje MSBuild k provedení příkazu sqlcmd.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-162">You also need to create an MSBuild target to execute the sqlcmd command.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample4.xml)]


<span data-ttu-id="b0e1c-163">Všimněte si, přidejte umístění testovaného sqlcmd spustitelného souboru jako statická vlastnost, protože to může být užitečné další cíle.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-163">Notice that you add the location of the sqlcmd executable as a static property, as this could be useful to other targets.</span></span> <span data-ttu-id="b0e1c-164">Naproti tomu definujete umístění skriptu SQL a syntaxe příkazu sqlcmd jako dynamických vlastností v cíli, jako nebudou požadované předtím, než je cíl proveden.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-164">In contrast, you define the location of your SQL script and the syntax of the sqlcmd command as dynamic properties within the target, as they will not be required before the target is executed.</span></span> <span data-ttu-id="b0e1c-165">V takovém případě **DeployTestDBPermissions** cíl bude spuštěn pouze pokud jsou splněny tyto podmínky:</span><span class="sxs-lookup"><span data-stu-id="b0e1c-165">In this case, the **DeployTestDBPermissions** target will only be executed if these conditions are met:</span></span>

- <span data-ttu-id="b0e1c-166">**DeployTestDBRoleMemberships** je nastavena na **true**.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-166">The **DeployTestDBRoleMemberships** property is set to **true**.</span></span>
- <span data-ttu-id="b0e1c-167">Nebyl zadán uživatel **WhatIf = true** příznak.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-167">The user hasn't specified a **WhatIf=true** flag.</span></span>

<span data-ttu-id="b0e1c-168">Nakonec se nezapomeňte vyvolat cíl.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-168">Finally, don't forget to invoke the target.</span></span> <span data-ttu-id="b0e1c-169">V *Publish.proj* souboru, provedete tak, že přidáte do seznamu závislostí pro výchozí cíl **FullPublish** cíl.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-169">In the *Publish.proj* file, you can do this by adding the target to the dependency list for the default **FullPublish** target.</span></span> <span data-ttu-id="b0e1c-170">Je potřeba zajistit, aby **DeployTestDBPermissions** target není spuštěn až **PublishDbPackages** byl cíl spuštěn.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-170">You need to ensure that the **DeployTestDBPermissions** target is not executed until the **PublishDbPackages** target has been executed.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample5.xml)]


## <a name="conclusion"></a><span data-ttu-id="b0e1c-171">Závěr</span><span class="sxs-lookup"><span data-stu-id="b0e1c-171">Conclusion</span></span>

<span data-ttu-id="b0e1c-172">Toto téma popisuje jeden ze způsobů, ve kterém můžete přidat databázové uživatele a členství v rolích jako akci po nasazení při nasazení projektu databáze.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-172">This topic described one way in which you can add database users and role memberships as a post-deployment action when you deploy a database project.</span></span> <span data-ttu-id="b0e1c-173">To je obvykle užitečné, když budete pravidelně znovu vytvořit databázi v testovacím prostředí, ale je obvykle třeba zabránit, při nasazování databází do pracovní nebo produkční prostředí.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-173">This is typically useful when you regularly re-create a database in a test environment, but it should usually be avoided when you deploy databases to staging or production environments.</span></span> <span data-ttu-id="b0e1c-174">V důsledku toho se ujistěte, že používáte nezbytné podmíněnou logiku tak, aby databáze uživatele a členství v rolích se vytvoří pouze v případě je to vhodné.</span><span class="sxs-lookup"><span data-stu-id="b0e1c-174">As such, you should ensure that you use the necessary conditional logic so that database users and role memberships are only created when it's appropriate to do so.</span></span>

## <a name="further-reading"></a><span data-ttu-id="b0e1c-175">Další čtení</span><span class="sxs-lookup"><span data-stu-id="b0e1c-175">Further Reading</span></span>

<span data-ttu-id="b0e1c-176">Další informace o použití VSDBCMD nasazení databázových projektů, naleznete v tématu [nasazení databázové projekty](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="b0e1c-176">For more information on using VSDBCMD to deploy database projects, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="b0e1c-177">Pokyny k přizpůsobení nasazené databáze pro jiné cílové prostředí najdete v tématu [přizpůsobení nasazené databáze pro více prostředí](customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="b0e1c-177">For guidance on customizing database deployments for different target environments, see [Customizing Database Deployments for Multiple Environments](customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="b0e1c-178">Další informace o používání vlastní soubory projektu MSBuild k řízení procesu nasazení najdete v tématu [vysvětlení souboru projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md) a [Principy procesu sestavení](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="b0e1c-178">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="b0e1c-179">Další informace o možnostech příkazového řádku sqlcmd najdete v tématu [Nástroj sqlcmd](https://msdn.microsoft.com/library/ms162773.aspx).</span><span class="sxs-lookup"><span data-stu-id="b0e1c-179">For more information on sqlcmd command-line options, see [sqlcmd Utility](https://msdn.microsoft.com/library/ms162773.aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b0e1c-180">[Předchozí](customizing-database-deployments-for-multiple-environments.md)
> [další](deploying-membership-databases-to-enterprise-environments.md)</span><span class="sxs-lookup"><span data-stu-id="b0e1c-180">[Previous](customizing-database-deployments-for-multiple-environments.md)
[Next](deploying-membership-databases-to-enterprise-environments.md)</span></span>
