---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: Nasazení databází členství do podnikových prostředí | Dokumentace Microsoftu
author: jrjlee
description: Toto téma vysvětluje klíčové aspekty a výzvy, které je potřeba vyřešit při zřízení databáze služby aplikace technologie ASP.NET (Další běžné...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: 50f49af502b75aa5ad52756a76a5e7340aca53f7
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/06/2019
ms.locfileid: "65131951"
---
# <a name="deploying-membership-databases-to-enterprise-environments"></a><span data-ttu-id="b87e9-103">Nasazení databází členství do podnikových prostředí</span><span class="sxs-lookup"><span data-stu-id="b87e9-103">Deploying Membership Databases to Enterprise Environments</span></span>

<span data-ttu-id="b87e9-104">podle [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="b87e9-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="b87e9-105">Stáhnout PDF</span><span class="sxs-lookup"><span data-stu-id="b87e9-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="b87e9-106">Toto téma vysvětluje klíčové aspekty a problémy, které že je potřeba vyřešit při zřízení aplikace ASP.NET služby databáze (více obvykle označuje jako databáze členství) v testovacím, přípravném nebo produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="b87e9-106">This topic explains the key considerations and challenges you'll need to overcome when you provision ASP.NET application services databases (more commonly referred to as membership databases) in test, staging, or production environments.</span></span> <span data-ttu-id="b87e9-107">Popisuje také přístupů, které vám umožní splnit tyto výzvy.</span><span class="sxs-lookup"><span data-stu-id="b87e9-107">It also describes approaches you can use to meet these challenges.</span></span>

<span data-ttu-id="b87e9-108">Toto téma je součástí série kurzů podle požadavků na nasazení enterprise fiktivní společnosti s názvem společnosti Fabrikam, Inc. V této sérii kurzů používá ukázkové řešení&#x2014; [řešení Správce kontaktů](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;představující webovou aplikaci s realistické úroveň složitosti, včetně aplikace ASP.NET MVC 3, komunikace Windows Služba Foundation (WCF) a databázový projekt.</span><span class="sxs-lookup"><span data-stu-id="b87e9-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="b87e9-109">Metody nasazení v srdci těchto kurzů je založen na rozdělení přístupu soubor projektu je popsáno v [vysvětlení souboru projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md), ve které je řízena procesem sestavení dva soubory projektu&#x2014;jeden obsahující pokyny, které platí pro všechny cílové prostředí a jeden obsahuje nastavení pro konkrétní prostředí sestavení a nasazení pro sestavení.</span><span class="sxs-lookup"><span data-stu-id="b87e9-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="b87e9-110">V okamžiku sestavení souboru projektu specifických pro prostředí se sloučí do souboru projektu bez ohledu na prostředí a vytvoří kompletní sadu pokynů sestavení.</span><span class="sxs-lookup"><span data-stu-id="b87e9-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a><span data-ttu-id="b87e9-111">Co jsou problémy při nasazení databáze členství?</span><span class="sxs-lookup"><span data-stu-id="b87e9-111">What Are the Issues When You Deploy a Membership Database?</span></span>

<span data-ttu-id="b87e9-112">Ve většině případů navrhnout strategie nasazení pro databázi, první věc, kterou je potřeba zvážit při jaká data chcete nasadit.</span><span class="sxs-lookup"><span data-stu-id="b87e9-112">In most cases, when you devise a deployment strategy for a database, the first thing you need to consider is what data you want to deploy.</span></span> <span data-ttu-id="b87e9-113">V prostředí vývoj nebo testování můžete chtít nasadit dat účtu uživatele k usnadnění rychlé a jednoduché testování.</span><span class="sxs-lookup"><span data-stu-id="b87e9-113">In a development or test environment, you might want to deploy user account data to facilitate quick and easy testing.</span></span> <span data-ttu-id="b87e9-114">V testovací nebo produkční prostředí je velmi pravděpodobné, že chcete nasadit dat účtu uživatele.</span><span class="sxs-lookup"><span data-stu-id="b87e9-114">In a staging or production environment, it's very unlikely that you'd want to deploy user account data.</span></span>

<span data-ttu-id="b87e9-115">Bohužel databází členství technologie ASP.NET představují některé konkrétní běžné problémy, které lépe rozhodnout mnohem složitější:</span><span class="sxs-lookup"><span data-stu-id="b87e9-115">Unfortunately, ASP.NET membership databases introduce some specific challenges that make this decision a lot more complex:</span></span>

- <span data-ttu-id="b87e9-116">Nasazení pouze se schématy ponechá databázi členství v nefunkčním stavu.</span><span class="sxs-lookup"><span data-stu-id="b87e9-116">A schema-only deployment will leave the membership database in a non-operational state.</span></span> <span data-ttu-id="b87e9-117">Důvodem je, že databáze členství zahrnuje některé konfigurační data (v **aspnet\_SchemaVersions** tabulky), která vyžaduje databázi mohl fungovat.</span><span class="sxs-lookup"><span data-stu-id="b87e9-117">This is because the membership database includes some configuration data (in the **aspnet\_SchemaVersions** table) that the database requires in order to function.</span></span> <span data-ttu-id="b87e9-118">V důsledku toho pokud provádíte nasazení jen schéma databáze členství aby bylo možné vyloučit dat účtu uživatele, bude potřeba spustit skript po nasazení můžete přidat data základní konfigurace.</span><span class="sxs-lookup"><span data-stu-id="b87e9-118">As such, if you perform a schema-only deployment of your membership database in order to exclude user account data, you'll need to run a post-deployment script to add the essential configuration data.</span></span>
- <span data-ttu-id="b87e9-119">V závislosti na konfiguraci databáze členství může zprostředkovatel členství použít klíč počítače můžete šifrovat hesla a uložit je v databázi.</span><span class="sxs-lookup"><span data-stu-id="b87e9-119">Depending on how your membership database is configured, the membership provider may use the machine key to encrypt passwords and store them in the database.</span></span> <span data-ttu-id="b87e9-120">V takovém případě dat účtu uživatele, které nasazujete s databází už nepůjdou použít na cílovém serveru.</span><span class="sxs-lookup"><span data-stu-id="b87e9-120">In this case, any user account data you deploy with the database will become unusable on the destination server.</span></span> <span data-ttu-id="b87e9-121">Z tohoto důvodu nasazení dat účtu uživatele není podporováno.</span><span class="sxs-lookup"><span data-stu-id="b87e9-121">For this reason, deploying user account data is not a supported scenario.</span></span>

## <a name="choosing-a-membership-database-strategy"></a><span data-ttu-id="b87e9-122">Výběr strategie databáze členství</span><span class="sxs-lookup"><span data-stu-id="b87e9-122">Choosing a Membership Database Strategy</span></span>

<span data-ttu-id="b87e9-123">Když zvolíte, jak zřídit databáze členství v podnikovém prostředí serveru, použijte tyto pokyny:</span><span class="sxs-lookup"><span data-stu-id="b87e9-123">Use these guidelines when you choose how to provision a membership database in an enterprise server environment:</span></span>

- <span data-ttu-id="b87e9-124">Kdykoli je to možné, nenasazujte databáze členství.</span><span class="sxs-lookup"><span data-stu-id="b87e9-124">Wherever possible, do not deploy membership databases.</span></span> <span data-ttu-id="b87e9-125">Místo toho vytvořte databázi členství ručně na cílovém serveru databáze.</span><span class="sxs-lookup"><span data-stu-id="b87e9-125">Instead, create the membership database manually on the target database server.</span></span> <span data-ttu-id="b87e9-126">Pokud jste nepřizpůsobili schéma databáze členství, můžete jednoduše vytvořit nový na místě v cílovém pomocí [nástroj pro registraci serveru SQL technologie ASP.NET (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="b87e9-126">If you haven't customized your membership database schema, you can simply create a new one in situ at the destination using the [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span>
- <span data-ttu-id="b87e9-127">Pokud nemáte žádnou možnost, ale chcete-li nasadit databázi členství&#x2014;například, pokud jste provedli rozsáhlé změny schématu databáze&#x2014;byste měli provést nasazení jen schéma databáze členství pro vyloučení dat účtu uživatele a pak Spusťte skript po nasazení můžete přidat všechny požadované konfigurace.</span><span class="sxs-lookup"><span data-stu-id="b87e9-127">If you have no option but to deploy a membership database&#x2014;for example, if you've made extensive modifications to the database schema&#x2014;you should perform a schema-only deployment of the membership database, to exclude user account data, and then run a post-deployment script to add any required configuration data.</span></span> <span data-ttu-id="b87e9-128">Široký pokyny najdete v těchto přístupů v [jak: Nasazení databáze členství technologie ASP.NET bez zahrnutí uživatelské účty](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="b87e9-128">You can find broad guidance on these approaches in [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

<span data-ttu-id="b87e9-129">Je důležité nezapomenout, že *schéma databáze členství by mohla být poměrně statické*.</span><span class="sxs-lookup"><span data-stu-id="b87e9-129">It's important to remember that *the schema of your membership database is likely to be fairly static*.</span></span> <span data-ttu-id="b87e9-130">I když jste přizpůsobili databáze členství, je pravděpodobné, že je potřeba aktualizovat schéma v pravidelných intervalech&#x2014;nepůjde změnit s stejně často jako kód v webovou aplikaci nebo projekt databáze.</span><span class="sxs-lookup"><span data-stu-id="b87e9-130">Even if you've customized the membership database, it's unlikely that you'll need to update the schema on a regular basis&#x2014;it's not going to change with the same frequency as the code in a web application or a database project.</span></span> <span data-ttu-id="b87e9-131">Jako takové neměli byste potřebovat zahrnout všechny procesy nasazování automatických nebo krokování databáze členství.</span><span class="sxs-lookup"><span data-stu-id="b87e9-131">As such, you shouldn't need to include the membership database in any automated or single-step deployment processes.</span></span>

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a><span data-ttu-id="b87e9-132">Pomocí VSDBCMD, a aktualizovat schéma databáze členství</span><span class="sxs-lookup"><span data-stu-id="b87e9-132">Using VSDBCMD to Update a Membership Database Schema</span></span>

<span data-ttu-id="b87e9-133">Pokud změníte strukturu databáze členství po prvním nasazení, nemusí chtít použít nástroj pro nasazení Internetové informační služby (IIS) webu (nasazení webu) k opětovnému nasazení databáze.</span><span class="sxs-lookup"><span data-stu-id="b87e9-133">If you modify the structure of your membership database after your first deployment, you may not want to use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to redeploy the database.</span></span> <span data-ttu-id="b87e9-134">Funkce nasazení databází v nasazení webu nezahrnuje schopnost zajistit rozdílové aktualizace do cílové databáze&#x2014;místo toho musíte Webdeploy vyřadit a znovu vytvořit databázi.</span><span class="sxs-lookup"><span data-stu-id="b87e9-134">The database deployment functionality in Web Deploy doesn't include the capability to make differential updates to a destination database&#x2014;instead, Web Deploy must drop and re-create the database.</span></span> <span data-ttu-id="b87e9-135">To znamená, že ztratíte žádná existující účet data uživatelů, což je obvykle nežádoucí v přípravném nebo produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="b87e9-135">This means that you lose any existing user account data, which is typically undesirable in staging or production environments.</span></span>

<span data-ttu-id="b87e9-136">Alternativou je použití nástroje VSDBCMD aktualizovat schéma cílové databáze.</span><span class="sxs-lookup"><span data-stu-id="b87e9-136">The alternative is to use the VSDBCMD utility to update the schema of your destination database.</span></span> <span data-ttu-id="b87e9-137">VSDBCMD obsahuje dvě důležité funkce.</span><span class="sxs-lookup"><span data-stu-id="b87e9-137">VSDBCMD includes two important capabilities.</span></span> <span data-ttu-id="b87e9-138">Nejprve ho můžete importovat schéma z existující databáze do souboru .dbschema.</span><span class="sxs-lookup"><span data-stu-id="b87e9-138">First, it can import the schema of an existing database into a .dbschema file.</span></span> <span data-ttu-id="b87e9-139">Za druhé je možné nasadit .dbschema souboru k existující databázi jako rozdílové aktualizace, což znamená, že umožňuje pouze změny požaduje, aby aktuální cílovou databázi a neztratila žádná data.</span><span class="sxs-lookup"><span data-stu-id="b87e9-139">Second, it can deploy a .dbschema file to an existing database as a differential update, which means that it only makes the changes required to bring the target database up to date and you don't lose any data.</span></span>

<span data-ttu-id="b87e9-140">Postup vysoké úrovně můžete aktualizovat schéma databáze členství:</span><span class="sxs-lookup"><span data-stu-id="b87e9-140">You can use these high-level steps to update a membership database schema:</span></span>

1. <span data-ttu-id="b87e9-141">Použít VSDBCMD **Import** akce pro generování .dbschema soubor pro zdrojové databáze členství.</span><span class="sxs-lookup"><span data-stu-id="b87e9-141">Use the VSDBCMD **Import** action to generate a .dbschema file for your source membership database.</span></span> <span data-ttu-id="b87e9-142">Tento postup je popsaný v [jak: Importovat schéma z příkazového řádku](https://msdn.microsoft.com/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="b87e9-142">This procedure is described in [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span>
2. <span data-ttu-id="b87e9-143">Použít VSDBCMD **nasadit** akce k nasazení souboru .dbschema na vaše cílové databáze členství.</span><span class="sxs-lookup"><span data-stu-id="b87e9-143">Use the VSDBCMD **Deploy** action to deploy the .dbschema file to your destination membership database.</span></span> <span data-ttu-id="b87e9-144">Tento postup je popsaný v [Reference k příkazovému řádku pro VSDBCMD. Soubor EXE (nasazení a Import schématu)](https://msdn.microsoft.com/library/dd193283.aspx).</span><span class="sxs-lookup"><span data-stu-id="b87e9-144">This procedure is described in [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="b87e9-145">Závěr</span><span class="sxs-lookup"><span data-stu-id="b87e9-145">Conclusion</span></span>

<span data-ttu-id="b87e9-146">Toto téma popisuje některé výzvy, které mohou nastat, když je potřeba zřídit databáze členství technologie ASP.NET v různých cílových prostředích.</span><span class="sxs-lookup"><span data-stu-id="b87e9-146">This topic described some of the challenges you may face when you need to provision ASP.NET membership databases in various target environments.</span></span> <span data-ttu-id="b87e9-147">Zejména vysvětlit, proč nasazení pouze se schématy ponechá databázi členství v nefunkčním stavu a proč nasazení dat účtu uživatele se nepodporuje.</span><span class="sxs-lookup"><span data-stu-id="b87e9-147">In particular, it explained why schema-only deployments will leave the membership database in a non-operational state and why deploying user account data is not supported.</span></span> <span data-ttu-id="b87e9-148">Téma také uvedené pokyny o tom, jak zřizovat, nasazovat a aktualizovat členství databáze v různých scénářích.</span><span class="sxs-lookup"><span data-stu-id="b87e9-148">The topic also presented guidance on how to provision, deploy, and update membership databases in different scenarios.</span></span>

## <a name="further-reading"></a><span data-ttu-id="b87e9-149">Další čtení</span><span class="sxs-lookup"><span data-stu-id="b87e9-149">Further Reading</span></span>

<span data-ttu-id="b87e9-150">Další pokyny a příklady, jak používat VSDBCMD najdete v tématu [Reference k příkazovému řádku pro VSDBCMD. Soubor EXE (nasazení a Import schématu)](https://msdn.microsoft.com/library/dd193283.aspx) a [jak: Importovat schéma z příkazového řádku](https://msdn.microsoft.com/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="b87e9-150">For more guidance and examples of how to use VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span> <span data-ttu-id="b87e9-151">Další informace o používání aspnet\_regsql.exe k vytváření databází členství, naleznete v tématu [nástroj pro registraci serveru SQL technologie ASP.NET (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="b87e9-151">For more information on using aspnet\_regsql.exe to create membership databases, see [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span> <span data-ttu-id="b87e9-152">Obecnější informace o nasazení databází členství najdete v tématu [jak: Nasazení databáze členství technologie ASP.NET bez zahrnutí uživatelské účty](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="b87e9-152">For more general guidance on deploying membership databases, see [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b87e9-153">[Předchozí](deploying-database-role-memberships-to-test-environments.md)
> [další](excluding-files-and-folders-from-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="b87e9-153">[Previous](deploying-database-role-memberships-to-test-environments.md)
[Next](excluding-files-and-folders-from-deployment.md)</span></span>
