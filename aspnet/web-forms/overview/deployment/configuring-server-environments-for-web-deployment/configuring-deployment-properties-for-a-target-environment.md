---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: Konfigurace vlastností nasazení pro cílové prostředí | Microsoft Docs
author: jrjlee
description: Toto téma popisuje, jak nakonfigurovat vlastnosti specifické pro prostředí za účelem nasazení ukázkového řešení Contact Manageru do konkrétního cílového prostředí...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: 9742be7d718384c1b108d5f2c0c43e8e8d4fe8a9
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78636442"
---
# <a name="configuring-deployment-properties-for-a-target-environment"></a>Konfigurace vlastností nasazeného cílového prostředí

od [Jason Novák](https://github.com/jrjlee)

[Stáhnout PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> Toto téma popisuje, jak nakonfigurovat vlastnosti specifické pro prostředí, aby bylo možné nasadit ukázkové řešení Contact Manageru do konkrétního cílového prostředí.

Toto téma je součástí série kurzů založených na požadavcích podnikového nasazení fiktivní společnosti s názvem Fabrikam, Inc. Tato série kurzů používá ukázkové řešení&#x2014;, pomocí kterého řešení [](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) &#x2014;správce kontaktů představuje webovou aplikaci s realistickou úrovní složitosti, včetně aplikace ASP.NET MVC 3, služby Windows Communication Foundation (WCF) a databázového projektu.

Metoda nasazení na srdce těchto výukových programů je založena na způsobu sestavení rozděleného projektu popsaných v tématu [Principy procesu sestavení](../web-deployment-in-the-enterprise/understanding-the-build-process.md), ve kterém je proces sestavení řízen dvěma soubory&#x2014;projektu jeden, který obsahuje pokyny pro sestavení, které platí pro každé cílové prostředí, a jedno obsahující nastavení sestavení a nasazení specifické pro prostředí. V době sestavení je soubor projektu specifický pro prostředí sloučen do souboru projektu prostředí – nezávislá a vytvoří kompletní sadu instrukcí pro sestavení.

## <a name="process-overview"></a>Přehled procesu

Soubor projektu, který budete používat k sestavení a nasazení řešení Contact Manager, je rozdělen do dvou fyzických souborů:

- Ten, který obsahuje nastavení a pokyny pro univerzální sestavení (soubor *Publish. proj* ).
- Ten, který obsahuje nastavení sestavení specifické pro prostředí (*ENV-dev. proj*, *ENV-Stage. proj atd.* ).

V době sestavování se odpovídající soubor projektu specifický pro prostředí sloučí do souboru Universal *Publish. proj* a vytvoří kompletní sadu instrukcí pro sestavení. Nasazení můžete nakonfigurovat na konkrétní cílová prostředí tím, že vytvoříte nebo upravíte soubory projektu specifické pro prostředí s nastavením, které popisují vlastní scénář nasazení.

Spousta těchto hodnot se určuje podle toho, jak je vaše cílové&#x2014;prostředí nakonfigurováno zejména v případě, že váš cílový webový server je nakonfigurován tak, aby používal službu Web Deployment Agent Service (vzdálený Agent) nebo obslužnou rutinu nasazení webu. Další informace o těchto přístupů a pokyny k výběru správného přístupu pro vlastní prostředí najdete v tématu [Volba správného přístupu k nasazení webu](choosing-the-right-approach-to-web-deployment.md).

[Scénář správce kontaktů](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) vyžaduje dva soubory projektu specifické pro prostředí:

- Nasazení do testovacího prostředí pro vývojáře (*ENV-dev. proj*). Vývojové prostředí pro vývojáře je nakonfigurované tak, aby přijímalo vzdálená nasazení pomocí vzdáleného agenta, jak je popsáno v tématu [scénář: konfigurace testovacího prostředí pro nasazení webu](scenario-configuring-a-test-environment-for-web-deployment.md). Tento soubor musí poskytovat adresu koncového bodu vzdáleného agenta a také nastavení specifická pro umístění, jako jsou připojovací řetězce a koncové body služby.
- Nasazení do přípravného prostředí (*ENV-Stage. proj*). Pracovní prostředí je nakonfigurované tak, aby přijímalo vzdálená nasazení pomocí obslužné rutiny Nasazení webu, jak je popsáno v tématu [scénář: Konfigurace přípravného prostředí pro nasazení webu](scenario-configuring-a-staging-environment-for-web-deployment.md). Tento soubor musí poskytovat adresu koncového bodu obslužné rutiny Nasazení webu a také nastavení specifická pro umístění, jako jsou připojovací řetězce a koncové body služby.

Je důležité si uvědomit, že nastavení, které nakonfigurujete v souboru projektu konkrétního prostředí, neovlivní místo toho obsah samotného&#x2014;webového balíčku, řídí způsob nasazení balíčku a informace o tom, jaké hodnoty parametrů jsou při extrakci balíčku k dispozici. Webový balíček importujete do produkčního prostředí ručně, jak je popsáno v části [scénář: Konfigurace produkčního prostředí pro nasazení webu](scenario-configuring-a-production-environment-for-web-deployment.md) a [Ruční instalace webových balíčků](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), takže nezáleží na tom, jaká nastavení jste použili v souboru projektu specifického pro prostředí při vygenerování balíčku. Správce služby Internetová informační služba (IIS) vás po importu balíčku vyzve k zadání parametrizovaných hodnot, jako jsou připojovací řetězce a koncové body služby.

K nasazení řešení Contact Manageru do vlastního cílového prostředí můžete tento soubor přizpůsobit nebo ho použít jako šablonu a vytvořit vlastní soubor.

**Konfigurace nastavení nasazení specifických pro konkrétní prostředí pro řešení Správce kontaktů**

1. Otevřete řešení ContactManager-WCF v aplikaci Visual Studio 2010.
2. V okně **Průzkumník řešení** rozbalte složku **publikovat** , rozbalte složku **EnvConfig** a dvakrát klikněte na položku **env. dev. proj**.

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. Hodnoty vlastností v souboru *. proj pro vývoj ENV* nahraďte správnými hodnotami pro vlastní testovací prostředí.

    > [!NOTE]
    > Tabulka, která následuje tento postup, poskytuje další informace o každé z těchto vlastností.
4. Uložte svou práci a pak zavřete soubor *ENV-dev. proj* .

## <a name="choosing-the-right-deployment-properties"></a>Výběr správných vlastností nasazení

Tato tabulka popisuje účel jednotlivých vlastností v ukázkovém souboru projektu specifického pro prostředí, *ENV-dev. proj*a poskytuje některé doprovodné materiály k hodnotám, které byste měli poskytnout.

|                                                        Název vlastnosti                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Podrobnosti                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              <strong>MSDeployComputerName</strong> Název cílového webového serveru nebo koncového bodu služby.               |                                                                                                                                                                                                                                              Pokud nasazujete do služby Remote Agent na cílovém webovém serveru, můžete zadat název cílového počítače (například <strong>TESTWEB1</strong> nebo <strong>TESTWEB1.fabrikam.NET</strong>), nebo můžete zadat koncový bod vzdáleného agenta (například `http://TESTWEB1/MSDEPLOYAGENTSERVICE`). Nasazení funguje v každém případě stejným způsobem. Pokud nasazujete do obslužné rutiny Nasazení webu na cílovém webovém serveru, měli byste zadat koncový bod služby a zahrnout název webu IIS jako parametr řetězce dotazu (například `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).                                                                                                                                                                                                                                              |
|         <strong>MSDeployAuth</strong> Metoda, kterou Nasazení webu použít k ověření na vzdáleném počítači.          |                                                                                                                                                                                                                          To by mělo být nastavené na <strong>NTLM</strong> nebo <strong>Basic</strong>. Pokud nasazujete do obslužné rutiny Nasazení webu, použijete <strong>protokol NTLM</strong> , pokud nasazujete do služby Remote Agent a <strong>Basic</strong> . Pokud používáte základní ověřování, musíte také zadat uživatelské jméno a heslo, které má nástroj pro nasazení webu služby IIS (Nasazení webu) zosobnit, aby bylo možné provést nasazení. V tomto příkladu jsou tyto hodnoty poskytovány prostřednictvím vlastností <strong>MSDeployUsername</strong> a <strong>MSDeployPassword</strong> . Pokud používáte ověřování NTLM, můžete tyto vlastnosti vynechat nebo je nechat prázdné.                                                                                                                                                                                                                          |
| <strong>MSDeployUsername</strong> Pokud použijete základní ověřování, Nasazení webu tento účet použít na vzdáleném počítači.  |                                                                                                                                                                                                                                                                                                                                                                                                                       To by mělo mít formu <em>\*username</em> * (například <strong>FABRIKAM\matt</strong>). Tato hodnota se používá pouze v případě, že zadáte základní ověřování. Pokud používáte ověřování NTLM, může být vlastnost vynechána. Pokud je zadána hodnota, bude ignorována.                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <strong>MSDeployPassword</strong> Použijete-li základní ověřování, Nasazení webu bude toto heslo používat na vzdáleném počítači. |                                                                                                                                                                                                                                                                                                                                                                                                                    Toto je heslo pro uživatelský účet, který jste zadali ve vlastnosti <strong>MSDeployUsername</strong> . Tato hodnota se používá pouze v případě, že zadáte základní ověřování. Pokud používáte ověřování NTLM, může být vlastnost vynechána. Pokud je zadána hodnota, bude ignorována.                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     <strong>ContactManagerIisPath</strong> Cesta služby IIS, na které chcete nasadit aplikaci MVC správce kontaktů.     |                                                                                                                                                                                                                                                                                                                                                                        Mělo by se jednat o cestu, která se zobrazí ve Správci služby IIS, ve formě [<em>název webu IIS</em>]/[název<em>webové</em><em>aplikace</em>]. Nezapomeňte, že web IIS musí existovat před nasazením aplikace. Pokud jste například vytvořili web služby IIS s názvem DemoSite, mohli byste zadat cestu služby IIS pro aplikaci MVC jako DemoSite/ContactManager.                                                                                                                                                                                                                                                                                                                                                                        |
|   <strong>ContactManagerServiceIisPath</strong> Cesta služby IIS, na které chcete nasadit službu WCF Contact Manager.    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Pokud jste například vytvořili web služby IIS s názvem DemoSite, mohli byste zadat cestu služby WCF pro službu WCF jako <strong>DemoSite/ContactManagerService</strong>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                  <strong>ContactManagerTargetUrl</strong> Adresa URL, na které je možné dosáhnout služby WCF.                   |                                                                                                                                                     Tato akce bude mít formu [<em>kořenová adresa URL webu IIS</em>]/[<em>název aplikace služby</em>]/[<em>koncový bod služby</em>]. Pokud jste například vytvořili web služby IIS na portu 85, adresa URL by měla podobu `http://localhost:85/ContactManagerService/ContactService.svc`. Pamatujte, že aplikace MVC a služba WCF jsou nasazeny na stejný server. V důsledku toho je tato adresa URL dostupná jenom z počítače, na kterém je nainstalovaná. Z tohoto důvodu je vhodnější místo názvu počítače nebo hlavičky hostitele v adrese URL používat localhost nebo IP adresu. Použijete-li název počítače nebo hlavičku hostitele, funkce zabezpečení [kontroly zpětné smyčky](https://go.microsoft.com/?linkid=9805131) ve službě IIS může adresu URL blokovat a vracet chybu <strong>HTTP 401,1 – Neautorizováno</strong> .                                                                                                                                                     |
|                  <strong>CmDatabaseConnectionString</strong> Připojovací řetězec pro databázový server.                  | Připojovací řetězec určuje jak přihlašovací údaje, které bude VSDBCMD používat pro kontaktování databázového serveru, a vytvoření databáze a přihlašovací údaje, které fond aplikací webového serveru použije pro kontaktování databázového serveru a interakci s databází. V podstatě máte dvě možnosti. Můžete zadat <strong>Integrated Security = true</strong>. v takovém případě se používá integrované ověřování systému Windows: <strong>data source = TESTDB1; Integrated Security = true</strong> v tomto případě bude databáze vytvořena pomocí pověření uživatele, který spouští spustitelný soubor VSDBCMD, a aplikace bude přistupovat k databázi pomocí identity účtu počítače webového serveru. Případně můžete zadat uživatelské jméno a heslo účtu SQL Server. V tomto případě se přihlašovací údaje SQL Server používají VSDBCMD k vytvoření databáze a fondu aplikací pro interakci s databází: <strong>data source = TESTDB1; ID uživatele = ASqlUser; Password = PA $ $w 0rd</strong> postupy v tomto tématu předpokládají, že budete používat integrované ověřování systému Windows. |
|        <strong>CmTargetDatabase</strong> Název, který chcete databázi poskytnout, vytvoříte na databázovém serveru.        |                                                                                                                                                                                                                                                                                                                                                                                                                                                     Hodnota, kterou zde zadáte, se přidá do příkazu VSDBCMD jako parametr. Používá se také k vytvoření úplného připojovacího řetězce, který může fond aplikací na webovém serveru použít k interakci s databází.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

Tyto příklady vám ukážou, jak můžete tyto vlastnosti nakonfigurovat pro konkrétní scénáře nasazení.

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a>Příklad 1&#x2014;nasazení na službu vzdáleného agenta

V tomto příkladu:

- Nasazujete do služby Remote Agent v TESTWEB1.
- Řídíte Nasazení webu, že se má používat ověřování NTLM. Nasazení webu se spustí s použitím přihlašovacích údajů, které jste použili k vyvolání Microsoft Build Engine (MSBuild).
- Pomocí integrovaného ověřování nasadíte databázi **ContactManager** do TESTDB1. Databáze bude nasazena s použitím přihlašovacích údajů, které jste použili k vyvolání nástroje MSBuild.

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]

### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a>Příklad 2&#x2014;nasazení na koncový bod obslužné rutiny nasazení webu

V tomto příkladu:

- Nasazujete do koncového bodu služby obslužné rutiny Nasazení webu v STAGEWEB1.
- Řídíte Nasazení webu, že se má používat základní ověřování.
- Určujete, že Nasazení webu by měl zosobnit účet FABRIKAM\stagingdeployer na vzdáleném počítači.
- Pomocí ověřování SQL Server nasadíte databázi **ContactManager** do STAGEDB1.

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]

## <a name="conclusion"></a>Závěr

V tuto chvíli jsou soubory projektu plně nakonfigurované pro sestavení a nasazení řešení Contact Manageru do jednoho nebo více cílových prostředí.

Chcete-li použít tyto soubory projektu jako součást jednoduchého a opakujícího se procesu nasazení, je nutné spustit soubor *Publish. proj* pomocí nástroje MSBuild a předat do umístění soubor projektu specifický pro prostředí jako parametr. Můžete to udělat různými způsoby:

- Přehled nástroje MSBuild a Úvod do vlastních souborů projektu naleznete v tématu [Principy souboru projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md).
- Informace o tom, jak formulovat příkaz MSBuild, který spouští vaše vlastní soubory projektu, najdete v tématu [nasazení webových balíčků](../web-deployment-in-the-enterprise/deploying-web-packages.md).
- Informace o tom, jak začlenit příkazy nástroje MSBuild do souboru příkazů pro jedno a opakující se nasazení, naleznete v tématu [Vytvoření a spuštění souboru příkazů nasazení](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).
- Informace o tom, jak spustit vlastní soubory projektu z týmového sestavení, naleznete v tématu [Vytvoření definice sestavení, která podporuje nasazení](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).

> [!div class="step-by-step"]
> [Předchozí](creating-a-server-farm-with-the-web-farm-framework.md)
