---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file
title: Vysvětlení souboru projektu | Dokumentace Microsoftu
author: jrjlee
description: Soubory projektu Microsoft Build Engine (MSBuild) leží v srdci procesu sestavení a nasazení. Toto téma začíná koncepční přehled nástroje MSBuild...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 07978d9d-341c-4524-bcba-62976f390f77
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file
msc.type: authoredcontent
ms.openlocfilehash: f57d7597a1454a53f5e87b4d69eee8ec8972e37c
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/06/2019
ms.locfileid: "65121934"
---
# <a name="understanding-the-project-file"></a><span data-ttu-id="21b71-104">Vysvětlení souboru projektu</span><span class="sxs-lookup"><span data-stu-id="21b71-104">Understanding the Project File</span></span>

<span data-ttu-id="21b71-105">podle [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="21b71-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="21b71-106">Stáhnout PDF</span><span class="sxs-lookup"><span data-stu-id="21b71-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="21b71-107">Soubory projektu Microsoft Build Engine (MSBuild) leží v srdci procesu sestavení a nasazení.</span><span class="sxs-lookup"><span data-stu-id="21b71-107">Microsoft Build Engine (MSBuild) project files lie at the heart of the build and deployment process.</span></span> <span data-ttu-id="21b71-108">Toto téma začíná koncepční přehled nástroje MSBuild a soubor projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-108">This topic starts with a conceptual overview of MSBuild and the project file.</span></span> <span data-ttu-id="21b71-109">Popisuje klíčové komponenty, které budete setkat při práci se soubory projektu, a funguje příklad toho, jak můžete soubory projektu nasazení reálné aplikace.</span><span class="sxs-lookup"><span data-stu-id="21b71-109">It describes the key components you'll come across when you work with project files, and it works through an example of how you can use project files to deploy real-world applications.</span></span>
> 
> <span data-ttu-id="21b71-110">Co se dozvíte:</span><span class="sxs-lookup"><span data-stu-id="21b71-110">What you'll learn:</span></span>
> 
> - <span data-ttu-id="21b71-111">Jak nástroj MSBuild používá soubory projektu MSBuild k sestavení projektů.</span><span class="sxs-lookup"><span data-stu-id="21b71-111">How MSBuild uses MSBuild project files to build projects.</span></span>
> - <span data-ttu-id="21b71-112">Jak se dá integrovat nástroj MSBuild s technologií nasazení, jako je nástroj pro nasazení Internetové informační služby (IIS) webu (nasazení webu).</span><span class="sxs-lookup"><span data-stu-id="21b71-112">How MSBuild integrates with deployment technologies, like the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span>
> - <span data-ttu-id="21b71-113">Jak pochopit klíčové komponenty souboru projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-113">How to understand the key components of a project file.</span></span>
> - <span data-ttu-id="21b71-114">Jak vytvářet a nasazovat komplexní aplikace můžete soubory projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-114">How you can use project files to build and deploy complex applications.</span></span>

## <a name="msbuild-and-the-project-file"></a><span data-ttu-id="21b71-115">Nástroj MSBuild a soubor projektu</span><span class="sxs-lookup"><span data-stu-id="21b71-115">MSBuild and the Project File</span></span>

<span data-ttu-id="21b71-116">Při vytváření a sestavovat řešení v sadě Visual Studio, Visual Studio používá MSBuild k sestavení každý projekt ve vašem řešení.</span><span class="sxs-lookup"><span data-stu-id="21b71-116">When you create and build solutions in Visual Studio, Visual Studio uses MSBuild to build each project in your solution.</span></span> <span data-ttu-id="21b71-117">Každý projekt sady Visual Studio obsahuje soubor projektu nástroje MSBuild s příponou souboru odpovídající typu projektu&#x2014;například C# projektu (.csproj), Visual Basic.NET projektu (.vbproj) nebo projektu databáze (.dbproj).</span><span class="sxs-lookup"><span data-stu-id="21b71-117">Every Visual Studio project includes an MSBuild project file, with a file extension that reflects the type of project&#x2014;for example, a C# project (.csproj), a Visual Basic.NET project (.vbproj), or a database project (.dbproj).</span></span> <span data-ttu-id="21b71-118">Aby bylo možné sestavit projekt, MSBuild musí zpracovat soubor projektu, který je přidružený k projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-118">In order to build a project, MSBuild must process the project file associated with the project.</span></span> <span data-ttu-id="21b71-119">Soubor projektu je dokument XML, který obsahuje všechny informace a pokyny, že nástroj MSBuild potřebuje, aby sestavení projektu, jako je obsah, který chcete zahrnout, požadavky na platformu, informace o verzi, webového serveru nebo nastavení databázového serveru a úkoly, které se musí provádět.</span><span class="sxs-lookup"><span data-stu-id="21b71-119">The project file is an XML document that contains all the information and instructions that MSBuild needs in order to build your project, like the content to include, the platform requirements, versioning information, web server or database server settings, and the tasks that must be performed.</span></span>

<span data-ttu-id="21b71-120">Soubory projektu MSBuild jsou založeny na [schématu MSBuild XML](https://msdn.microsoft.com/library/5dy88c2e.aspx), a díky tomu proces sestavení je zcela otevřený a transparentní.</span><span class="sxs-lookup"><span data-stu-id="21b71-120">MSBuild project files are based on the [MSBuild XML schema](https://msdn.microsoft.com/library/5dy88c2e.aspx), and as a result the build process is entirely open and transparent.</span></span> <span data-ttu-id="21b71-121">Kromě toho není nutné k instalaci sady Visual Studio, aby bylo možné používat stroji MSBuild engine&#x2014;spustitelný soubor MSBuild.exe je součástí rozhraní .NET Framework, a můžete ji spustit z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="21b71-121">In addition, you don't need to install Visual Studio in order to use the MSBuild engine&#x2014;the MSBuild.exe executable is part of the .NET Framework, and you can run it from a command prompt.</span></span> <span data-ttu-id="21b71-122">Jako vývojář můžete si vytvořit své vlastní soubory projektu MSBuild pomocí schématu XML nástroje MSBuild, a stanovit propracované a detailní kontrolu nad jak jsou vaše projekty sestavíte a nasadíte.</span><span class="sxs-lookup"><span data-stu-id="21b71-122">As a developer, you can craft your own MSBuild project files, using the MSBuild XML schema, to impose sophisticated and fine-grained control over how your projects are built and deployed.</span></span> <span data-ttu-id="21b71-123">Tyto soubory vlastních projektů pracovat přesně stejně jako soubory projektu, které sada Visual Studio vygeneruje automaticky.</span><span class="sxs-lookup"><span data-stu-id="21b71-123">These custom project files work in exactly the same way as the project files that Visual Studio generates automatically.</span></span>

> [!NOTE]
> <span data-ttu-id="21b71-124">Soubory projektu MSBuild můžete použít také ke službě Team Build v Team Foundation Server (TFS).</span><span class="sxs-lookup"><span data-stu-id="21b71-124">You can also use MSBuild project files with the Team Build service in Team Foundation Server (TFS).</span></span> <span data-ttu-id="21b71-125">Soubory projektu ve scénářích kontinuální integrace (CI) můžete například použít k automatizaci nasazení do testovacího prostředí, když nového kódu se změnami.</span><span class="sxs-lookup"><span data-stu-id="21b71-125">For example, you can use project files in continuous integration (CI) scenarios to automate deployment to a test environment when new code is checked in.</span></span> <span data-ttu-id="21b71-126">Další informace najdete v tématu [konfigurace serveru Team Foundation Server pro nasazení webu pomocí automatizované](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="21b71-126">For more information, see [Configuring Team Foundation Server for Automated Web Deployment](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span></span>

### <a name="project-file-naming-conventions"></a><span data-ttu-id="21b71-127">Soubor projektu zásady vytváření názvů</span><span class="sxs-lookup"><span data-stu-id="21b71-127">Project File Naming Conventions</span></span>

<span data-ttu-id="21b71-128">Při vytváření souborů projektu, můžete použít libovolnou příponou, který rádi používáte.</span><span class="sxs-lookup"><span data-stu-id="21b71-128">When you create your own project files, you can use any file extension you like.</span></span> <span data-ttu-id="21b71-129">Usnadnění řešení ostatním uživatelům pochopit, by měly tyto běžné konvence použít:</span><span class="sxs-lookup"><span data-stu-id="21b71-129">However, to make your solutions easier for others to understand, you should use these common conventions:</span></span>

- <span data-ttu-id="21b71-130">Při vytváření souboru projektu, který sestavuje projekty, pomocí rozšíření souborů .proj.</span><span class="sxs-lookup"><span data-stu-id="21b71-130">Use the .proj extension when you create a project file that builds projects.</span></span>
- <span data-ttu-id="21b71-131">Použití rozšíření .targets, při vytváření souboru projektu opakovaně použitelné pro import do jiných souborů projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-131">Use the .targets extension when you create a reusable project file to import into other project files.</span></span> <span data-ttu-id="21b71-132">Soubory s příponou .targets obvykle nesestavujte všechno sami, jednoduše obsahují pokyny, které lze importovat do souborů .proj souborů.</span><span class="sxs-lookup"><span data-stu-id="21b71-132">Files with a .targets extension typically don't build anything themselves, they simply contain instructions that you can import into your .proj files.</span></span>

### <a name="integration-with-deployment-technologies"></a><span data-ttu-id="21b71-133">Integrace s technologií nasazení</span><span class="sxs-lookup"><span data-stu-id="21b71-133">Integration with Deployment Technologies</span></span>

<span data-ttu-id="21b71-134">Pokud už máte s projekty webových aplikací v sadě Visual Studio 2010, jako jsou webové aplikace ASP.NET a webových aplikacích ASP.NET MVC, budete vědět, že tyto projekty obsahují integrovanou podporu pro balení a nasazení webové aplikace na cílovém prostředí.</span><span class="sxs-lookup"><span data-stu-id="21b71-134">If you've worked with web application projects in Visual Studio 2010, like ASP.NET web applications and ASP.NET MVC web applications, you'll know that these projects include built-in support for packaging and deploying the web application to a target environment.</span></span> <span data-ttu-id="21b71-135">**Vlastnosti** stránky pro tyto projekty obsahují **balení/publikování webu** a **balení/publikování kódu SQL** karty, které vám umožní nakonfigurovat jak součástí vaší aplikace se zabalit a nasadit.</span><span class="sxs-lookup"><span data-stu-id="21b71-135">The **Properties** pages for these projects include **Package/Publish Web** and **Package/Publish SQL** tabs that you can use to configure how the components of your application are packaged and deployed.</span></span> <span data-ttu-id="21b71-136">To ukazuje **balení/publikování webu** kartu:</span><span class="sxs-lookup"><span data-stu-id="21b71-136">This shows the **Package/Publish Web** tab:</span></span>

![](understanding-the-project-file/_static/image1.png)

<span data-ttu-id="21b71-137">Základní technologie za tyto funkce se označuje jako Web Publishing kanálu (WPP).</span><span class="sxs-lookup"><span data-stu-id="21b71-137">The underlying technology behind these capabilities is known as the Web Publishing Pipeline (WPP).</span></span> <span data-ttu-id="21b71-138">WPP v podstatě přináší MSBuild a [Webdeploy](https://go.microsoft.com/?linkid=9805122) dohromady a poskytují kompletní proces sestavení, balení a nasazování pro webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="21b71-138">The WPP essentially brings MSBuild and [Web Deploy](https://go.microsoft.com/?linkid=9805122) together to provide a complete build, package, and deployment process for your web applications.</span></span>

<span data-ttu-id="21b71-139">Dobrou zprávou je, že můžete využít výhod integrace body, které poskytuje WPP při vytváření vlastních projektů soubory pro webové projekty.</span><span class="sxs-lookup"><span data-stu-id="21b71-139">The good news is that you can take advantage of the integration points that the WPP provides when you create custom project files for web projects.</span></span> <span data-ttu-id="21b71-140">V souboru projektu, který vám umožní sestavovat projekty, vytvořit balíčky webového nasazení a instalaci těchto balíčků ve vzdálených serverů pomocí jednoho projektu souborové služby a jedním voláním metody MSBuild může obsahovat pokyny k nasazení.</span><span class="sxs-lookup"><span data-stu-id="21b71-140">You can include deployment instructions in your project file, which allows you to build your projects, create web deployment packages, and install these packages on remote servers through a single project file and a single call to MSBuild.</span></span> <span data-ttu-id="21b71-141">Další spustitelné soubory můžete také volat jako součást procesu sestavení.</span><span class="sxs-lookup"><span data-stu-id="21b71-141">You can also call any other executables as part of your build process.</span></span> <span data-ttu-id="21b71-142">Můžete například spustit nástroj příkazového řádku VSDBCMD.exe nasazení databáze ze souboru schématu.</span><span class="sxs-lookup"><span data-stu-id="21b71-142">For example, you can run the VSDBCMD.exe command-line tool to deploy a database from a schema file.</span></span> <span data-ttu-id="21b71-143">V průběhu tohoto tématu uvidíte, jak můžete využít tyto funkce pro splnění požadavků vašich podnikových scénářích nasazení.</span><span class="sxs-lookup"><span data-stu-id="21b71-143">Over the course of this topic, you'll see how you can take advantage of these capabilities to meet the requirements of your enterprise deployment scenarios.</span></span>

> [!NOTE]
> <span data-ttu-id="21b71-144">Další informace o tom, jak funguje proces nasazení webových aplikací najdete v tématu [ASP.NET Web Application Project Deployment Overview](https://msdn.microsoft.com/library/dd394698.aspx).</span><span class="sxs-lookup"><span data-stu-id="21b71-144">For more information on how the web application deployment process works, see [ASP.NET Web Application Project Deployment Overview](https://msdn.microsoft.com/library/dd394698.aspx).</span></span>

## <a name="the-anatomy-of-a-project-file"></a><span data-ttu-id="21b71-145">Anatomie souboru projektu</span><span class="sxs-lookup"><span data-stu-id="21b71-145">The Anatomy of a Project File</span></span>

<span data-ttu-id="21b71-146">Předtím, než se podíváte na proces sestavení podrobněji, je vhodné trvá několik minut se seznámit s základní strukturu souboru projektu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="21b71-146">Before you look at the build process in more detail, it's worth taking a few moments to familiarize yourself with the basic structure of an MSBuild project file.</span></span> <span data-ttu-id="21b71-147">Tato část obsahuje přehled běžných prvky, které se můžete setkat při zobrazit, upravit nebo vytvořit soubor projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-147">This section provides an overview of the more common elements that you'll encounter when you review, edit, or create a project file.</span></span> <span data-ttu-id="21b71-148">Konkrétně se dozvíte:</span><span class="sxs-lookup"><span data-stu-id="21b71-148">In particular, you'll learn:</span></span>

- <span data-ttu-id="21b71-149">Jak používat *vlastnosti* ke správě proměnné pro proces sestavení.</span><span class="sxs-lookup"><span data-stu-id="21b71-149">How to use *properties* to manage variables for the build process.</span></span>
- <span data-ttu-id="21b71-150">Jak používat *položky* k identifikaci vstupy do procesu sestavení, jako jsou soubory kódu.</span><span class="sxs-lookup"><span data-stu-id="21b71-150">How to use *items* to identify the inputs to the build process, like code files.</span></span>
- <span data-ttu-id="21b71-151">Jak používat *cíle* a *úlohy* pokyny spuštění nástroje MSBuild, pomocí *vlastnosti* a *položky* definovaný jinde v soubor projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-151">How to use *targets* and *tasks* to provide execution instructions to MSBuild, using *properties* and *items* defined elsewhere in the project file.</span></span>

<span data-ttu-id="21b71-152">To znázorňuje vztah mezi klíčové prvky v souboru projektu MSBuild:</span><span class="sxs-lookup"><span data-stu-id="21b71-152">This shows the relationship between the key elements in an MSBuild project file:</span></span>

![](understanding-the-project-file/_static/image2.png)

### <a name="the-project-element"></a><span data-ttu-id="21b71-153">Element projektu</span><span class="sxs-lookup"><span data-stu-id="21b71-153">The Project Element</span></span>

<span data-ttu-id="21b71-154">[Projektu](https://msdn.microsoft.com/library/bcxfsh87.aspx) prvek je kořenovým prvkem každého souboru projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-154">The [Project](https://msdn.microsoft.com/library/bcxfsh87.aspx) element is the root element of every project file.</span></span> <span data-ttu-id="21b71-155">Kromě identifikace schéma XML pro soubor projektu **projektu** element můžete zahrnout atributů k určení vstupní body procesu sestavení.</span><span class="sxs-lookup"><span data-stu-id="21b71-155">In addition to identifying the XML schema for the project file, the **Project** element can include attributes to specify the entry points for the build process.</span></span> <span data-ttu-id="21b71-156">Například v [ukázkové řešení Správce kontaktů](the-contact-manager-solution.md), *Publish.proj* souboru Určuje, že sestavení spustit voláním cíl s názvem **FullPublish**.</span><span class="sxs-lookup"><span data-stu-id="21b71-156">For example, in the [Contact Manager sample solution](the-contact-manager-solution.md), the *Publish.proj* file specifies that the build should start by calling the target named **FullPublish**.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample1.xml)]

### <a name="properties-and-conditions"></a><span data-ttu-id="21b71-157">Vlastnosti a podmínky</span><span class="sxs-lookup"><span data-stu-id="21b71-157">Properties and Conditions</span></span>

<span data-ttu-id="21b71-158">Soubor projektu je obvykle potřeba poskytují velké množství informací, aby bylo možné úspěšně sestavit a nasadit vaše projekty různé softwarové součásti.</span><span class="sxs-lookup"><span data-stu-id="21b71-158">A project file typically needs to provide lots of different pieces of information in order to successfully build and deploy your projects.</span></span> <span data-ttu-id="21b71-159">Tyto údaje by mohla obsahovat názvy serverů, připojovací řetězce, pověření, konfigurace sestavení, zdrojových a cílových cest k souborům a další informace, které chcete zahrnout podporující přizpůsobení.</span><span class="sxs-lookup"><span data-stu-id="21b71-159">These pieces of information could include server names, connection strings, credentials, build configurations, source and destination file paths, and any other information you want to include to support customization.</span></span> <span data-ttu-id="21b71-160">V souboru projektu, musí být vlastnosti definované v rámci [PropertyGroup](https://msdn.microsoft.com/library/t4w159bs.aspx) elementu.</span><span class="sxs-lookup"><span data-stu-id="21b71-160">In a project file, properties must be defined within a [PropertyGroup](https://msdn.microsoft.com/library/t4w159bs.aspx) element.</span></span> <span data-ttu-id="21b71-161">Vlastnosti nástroje MSBuild obsahovat páry klíč hodnota.</span><span class="sxs-lookup"><span data-stu-id="21b71-161">MSBuild properties consist of key-value pairs.</span></span> <span data-ttu-id="21b71-162">V rámci **PropertyGroup** elementu, název elementu definuje klíč vlastnosti a obsah elementu, který definuje hodnoty vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="21b71-162">Within the **PropertyGroup** element, the element name defines the property key and the content of the element defines the property value.</span></span> <span data-ttu-id="21b71-163">Například můžete definovat vlastnosti s názvem **ServerName** a **ConnectionString** k ukládání statických serveru název a připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="21b71-163">For example, you could define properties named **ServerName** and **ConnectionString** to store a static server name and connection string.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample2.xml)]

<span data-ttu-id="21b71-164">Pokud chcete načíst hodnotu vlastnosti, použijte formát \*\*$(***PropertyName***) \*\**.*</span><span class="sxs-lookup"><span data-stu-id="21b71-164">To retrieve a property value, you use the format \**$(***PropertyName***)\*\*\*.*</span></span> <span data-ttu-id="21b71-165">Například pro načtení hodnoty **ServerName** vlastnost, zadali byste:</span><span class="sxs-lookup"><span data-stu-id="21b71-165">For example, to retrieve the value of the **ServerName** property, you would type:</span></span>

[!code-powershell[Main](understanding-the-project-file/samples/sample3.ps1)]

> [!NOTE]
> <span data-ttu-id="21b71-166">Zobrazí se vám příklady toho, jak a kdy použít hodnoty vlastností dále v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="21b71-166">You'll see examples of how and when to use property values later in this topic.</span></span>

<span data-ttu-id="21b71-167">Vložení informací o jako statických vlastností v souboru projektu není vždy ideální přistupovat ke správě procesu sestavení.</span><span class="sxs-lookup"><span data-stu-id="21b71-167">Embedding information as static properties in a project file is not always the ideal approach to managing the build process.</span></span> <span data-ttu-id="21b71-168">V možných scénářů budete chtít získat informace z jiných zdrojů nebo umožněte uživateli zadat informace z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="21b71-168">In a lot of scenarios, you'll want to obtain the information from other sources or empower the user to provide the information from the command prompt.</span></span> <span data-ttu-id="21b71-169">Nástroj MSBuild umožňuje zadat jakoukoli hodnotu vlastnosti jako parametr příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="21b71-169">MSBuild allows you to specify any property value as a command-line parameter.</span></span> <span data-ttu-id="21b71-170">Například může uživatel zadat hodnotu pro **ServerName** když uživatel spustí z příkazového řádku MSBuild.exe.</span><span class="sxs-lookup"><span data-stu-id="21b71-170">For example, the user could provide a value for **ServerName** when he or she runs MSBuild.exe from the command line.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample4.cmd)]

> [!NOTE]
> <span data-ttu-id="21b71-171">Další informace o argumenty a přepínače, můžete použít s MSBuild.exe, naleznete v tématu [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span><span class="sxs-lookup"><span data-stu-id="21b71-171">For more information on the arguments and switches you can use with MSBuild.exe, see [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>

<span data-ttu-id="21b71-172">Podle stejné syntaxe vlastnost slouží k získání hodnot proměnných prostředí a předdefinovaných projektových vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="21b71-172">You can use the same property syntax to obtain the values of environment variables and built-in project properties.</span></span> <span data-ttu-id="21b71-173">Mnoho běžně používaných vlastností jsou definovány pro vás, můžete si je v souborech projektu zahrnutím odpovídající parametr název.</span><span class="sxs-lookup"><span data-stu-id="21b71-173">Lots of commonly used properties are defined for you, and you can use them in your project files by including the relevant parameter name.</span></span> <span data-ttu-id="21b71-174">Například chcete-li načíst aktuální platforma pro projektovou&#x2014;například **x86** nebo **AnyCpu**&#x2014;můžete zahrnout **$(Platform)** odkaz na vlastnost v váš soubor projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-174">For example, to retrieve the current project platform&#x2014;for example, **x86** or **AnyCpu**&#x2014;you can include the **$(Platform)** property reference in your project file.</span></span> <span data-ttu-id="21b71-175">Další informace najdete v tématu [Macros for Build Commands and Properties](https://msdn.microsoft.com/library/c02as0cs.aspx), [obecné vlastnosti projektu nástroje MSBuild](https://msdn.microsoft.com/library/bb629394.aspx), a [rezervované vlastnosti](https://msdn.microsoft.com/library/ms164309.aspx).</span><span class="sxs-lookup"><span data-stu-id="21b71-175">For more information, see [Macros for Build Commands and Properties](https://msdn.microsoft.com/library/c02as0cs.aspx), [Common MSBuild Project Properties](https://msdn.microsoft.com/library/bb629394.aspx), and [Reserved Properties](https://msdn.microsoft.com/library/ms164309.aspx).</span></span>

<span data-ttu-id="21b71-176">Vlastnosti jsou často používá ve spojení s *podmínky*.</span><span class="sxs-lookup"><span data-stu-id="21b71-176">Properties are often used in conjunction with *conditions*.</span></span> <span data-ttu-id="21b71-177">Podpora většinu prvků MSBuild **podmínku** atribut, který vám umožní zadat kritéria, podle kterých by se měl vyhodnotit MSBuild elementu.</span><span class="sxs-lookup"><span data-stu-id="21b71-177">Most MSBuild elements support the **Condition** attribute, which lets you specify the criteria upon which MSBuild should evaluate the element.</span></span> <span data-ttu-id="21b71-178">Zvažte například tuto definici vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="21b71-178">For example, consider this property definition:</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample5.xml)]

<span data-ttu-id="21b71-179">Když nástroj MSBuild zpracovává tuto definici vlastnosti, ji nejprve zkontroluje, jestli **$(OutputRoot)** hodnota vlastnosti je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="21b71-179">When MSBuild processes this property definition, it first checks to see whether an **$(OutputRoot)** property value is available.</span></span> <span data-ttu-id="21b71-180">Pokud hodnota vlastnosti je prázdná&#x2014;jinými slovy, uživatel neposkytl hodnotu pro tuto vlastnost&#x2014;bude podmínka vyhodnocena jako **true** a hodnota vlastnosti je nastavená na **... \Publish\Out**. Pokud uživatel zadal hodnotu pro tuto vlastnost, bude podmínka vyhodnocena jako **false** a hodnota statickou vlastnost se nepoužívá.</span><span class="sxs-lookup"><span data-stu-id="21b71-180">If the property value is blank&#x2014;in other words, the user hasn't provided a value for this property&#x2014;the condition evaluates to **true** and the property value is set to **..\Publish\Out**. If the user has provided a value for this property, the condition evaluates to **false** and the static property value is not used.</span></span>

<span data-ttu-id="21b71-181">Další informace o různých způsobech, ve kterém můžete zadat podmínky najdete v tématu [podmínky nástroje MSBuild](https://msdn.microsoft.com/library/7szfhaft.aspx).</span><span class="sxs-lookup"><span data-stu-id="21b71-181">For more information on the different ways in which you can specify conditions, see [MSBuild Conditions](https://msdn.microsoft.com/library/7szfhaft.aspx).</span></span>

### <a name="items-and-item-groups"></a><span data-ttu-id="21b71-182">Položky a skupiny položek</span><span class="sxs-lookup"><span data-stu-id="21b71-182">Items and Item Groups</span></span>

<span data-ttu-id="21b71-183">Jednou z důležitých rolí soubor projektu je definování vstupy do procesu sestavení.</span><span class="sxs-lookup"><span data-stu-id="21b71-183">One of the important roles of the project file is to define the inputs to the build process.</span></span> <span data-ttu-id="21b71-184">Obvykle tyto vstupy jsou soubory&#x2014;kódu souborů, konfigurační soubory, soubory příkazů a všechny další soubory, které potřebujete ke zpracování nebo kopírovat jako součást procesu sestavení.</span><span class="sxs-lookup"><span data-stu-id="21b71-184">Typically, these inputs are files&#x2014;code files, configuration files, command files, and any other files that you need to process or copy as part of the build process.</span></span> <span data-ttu-id="21b71-185">Ve schématu projektu nástroje MSBuild, jsou reprezentovány tyto vstupy [položky](https://msdn.microsoft.com/library/ms164283.aspx) elementy.</span><span class="sxs-lookup"><span data-stu-id="21b71-185">In the MSBuild project schema, these inputs are represented by [Item](https://msdn.microsoft.com/library/ms164283.aspx) elements.</span></span> <span data-ttu-id="21b71-186">V souboru projektu, musí být položky definované v rámci [ItemGroup](https://msdn.microsoft.com/library/646dk05y.aspx) elementu.</span><span class="sxs-lookup"><span data-stu-id="21b71-186">In a project file, items must be defined within an [ItemGroup](https://msdn.microsoft.com/library/646dk05y.aspx) element.</span></span> <span data-ttu-id="21b71-187">Stejně jako **vlastnost** prvků, třeba název **položky** element libovolně.</span><span class="sxs-lookup"><span data-stu-id="21b71-187">Just like **Property** elements, you can name an **Item** element however you like.</span></span> <span data-ttu-id="21b71-188">Nicméně je nutné zadat **zahrnout** atribut k identifikaci souboru nebo zástupný znak, který představuje položku.</span><span class="sxs-lookup"><span data-stu-id="21b71-188">However, you must specify an **Include** attribute to identify the file or wildcard that the item represents.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample6.xml)]

<span data-ttu-id="21b71-189">Podle určení více podmínek vyhledávání **položky** elementy se stejným názvem, efektivní vytváření pojmenovaný seznam prostředků.</span><span class="sxs-lookup"><span data-stu-id="21b71-189">By specifying multiple **Item** elements with the same name, you're effectively creating a named list of resources.</span></span> <span data-ttu-id="21b71-190">Podívat se do jednoho ze souborů projektu, které sada Visual Studio vytvoří je dobrým způsobem, jak to můžete vidět v akci.</span><span class="sxs-lookup"><span data-stu-id="21b71-190">A good way to see this in action is to take a look inside one of the project files that Visual Studio creates.</span></span> <span data-ttu-id="21b71-191">Například *ContactManager.Mvc.csproj* soubor v ukázkovém řešení obsahuje velké množství položek skupin, každou s několika stejně jako s názvem **položky** elementy.</span><span class="sxs-lookup"><span data-stu-id="21b71-191">For example, the *ContactManager.Mvc.csproj* file in the sample solution includes a lot of item groups, each with several identically named **Item** elements.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample7.xml)]

<span data-ttu-id="21b71-192">Tímto způsobem soubor projektu je mu dát pokyn k vytvoření seznamu souborů, které musí být zpracovány stejně jako&#x2014; **odkaz** seznam obsahuje sestavení, která musí být splněné pro úspěšné sestavení  **Kompilace** seznam obsahuje soubory kódu, které musí být kompilovány, a **obsahu** seznam obsahuje prostředky, které musí být zkopírován beze změny.</span><span class="sxs-lookup"><span data-stu-id="21b71-192">In this way, the project file is instructing MSBuild to construct lists of files that need to be processed in the same way&#x2014;the **Reference** list includes assemblies that must be in place for a successful build, the **Compile** list includes code files that must be compiled, and the **Content** list includes resources that must be copied unaltered.</span></span> <span data-ttu-id="21b71-193">Podíváme se na tom, jak proces sestavení odkazuje na a používá tyto položky později v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="21b71-193">We'll look at how the build process references and uses these items later in this topic.</span></span>

<span data-ttu-id="21b71-194">Může také obsahovat prvky položky [itemmetadata –](https://msdn.microsoft.com/library/ms164284.aspx) podřízené prvky.</span><span class="sxs-lookup"><span data-stu-id="21b71-194">Item elements can also include [ItemMetadata](https://msdn.microsoft.com/library/ms164284.aspx) child elements.</span></span> <span data-ttu-id="21b71-195">Tyto jsou páry klíč hodnota definované uživatelem a v podstatě představují vlastnosti, které jsou specifické pro danou položku.</span><span class="sxs-lookup"><span data-stu-id="21b71-195">These are user-defined key-value pairs and essentially represent properties that are specific to that item.</span></span> <span data-ttu-id="21b71-196">Například velké množství **kompilaci** obsahovat prvky položky v souboru projektu **DependentUpon** podřízené prvky.</span><span class="sxs-lookup"><span data-stu-id="21b71-196">For example, a lot of the **Compile** item elements in the project file include **DependentUpon** child elements.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample8.xml)]

> [!NOTE]
> <span data-ttu-id="21b71-197">Kromě metadata položky vytvořené uživatelem jsou přiřazeny všechny položky při vytváření různých běžná metadata.</span><span class="sxs-lookup"><span data-stu-id="21b71-197">In addition to user-created item metadata, all items are assigned various common metadata on creation.</span></span> <span data-ttu-id="21b71-198">Další informace najdete v tématu [Metadata známé položky](https://msdn.microsoft.com/library/ms164313.aspx).</span><span class="sxs-lookup"><span data-stu-id="21b71-198">For more information, see [Well-known Item Metadata](https://msdn.microsoft.com/library/ms164313.aspx).</span></span>

<span data-ttu-id="21b71-199">Můžete vytvořit **ItemGroup** elementů v rámci na kořenové úrovni **projektu** element nebo v rámci konkrétní **cílové** elementy.</span><span class="sxs-lookup"><span data-stu-id="21b71-199">You can create **ItemGroup** elements within the root-level **Project** element or within specific **Target** elements.</span></span> <span data-ttu-id="21b71-200">**ItemGroup** prvky také podporují **podmínku** atributy, které umožňuje přizpůsobit vstupy do procesu sestavení podle podmínek, jako je konfigurace projektu nebo platformu.</span><span class="sxs-lookup"><span data-stu-id="21b71-200">**ItemGroup** elements also support **Condition** attributes, which lets you tailor the inputs to the build process according to conditions like the project configuration or platform.</span></span>

### <a name="targets-and-tasks"></a><span data-ttu-id="21b71-201">Cíle a úlohy</span><span class="sxs-lookup"><span data-stu-id="21b71-201">Targets and Tasks</span></span>

<span data-ttu-id="21b71-202">Ve schématu MSBuild [úloh](https://msdn.microsoft.com/library/77f2hx1s.aspx) element představuje jednotlivý build instrukce (nebo úloh).</span><span class="sxs-lookup"><span data-stu-id="21b71-202">In the MSBuild schema, a [Task](https://msdn.microsoft.com/library/77f2hx1s.aspx) element represents an individual build instruction (or task).</span></span> <span data-ttu-id="21b71-203">Nástroj MSBuild obsahuje velké množství předdefinované úlohy.</span><span class="sxs-lookup"><span data-stu-id="21b71-203">MSBuild includes a multitude of predefined tasks.</span></span> <span data-ttu-id="21b71-204">Příklad:</span><span class="sxs-lookup"><span data-stu-id="21b71-204">For example:</span></span>

- <span data-ttu-id="21b71-205">**Kopírování** úloha zkopíruje soubory do nového umístění.</span><span class="sxs-lookup"><span data-stu-id="21b71-205">The **Copy** task copies files to a new location.</span></span>
- <span data-ttu-id="21b71-206">**Csc** úloha vyvolá kompilátor Visual C#.</span><span class="sxs-lookup"><span data-stu-id="21b71-206">The **Csc** task invokes the Visual C# compiler.</span></span>
- <span data-ttu-id="21b71-207">**Vbc –** úloha vyvolá kompilátor jazyka Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="21b71-207">The **Vbc** task invokes the Visual Basic compiler.</span></span>
- <span data-ttu-id="21b71-208">**Exec** úkol spustí zadaný program.</span><span class="sxs-lookup"><span data-stu-id="21b71-208">The **Exec** task runs a specified program.</span></span>
- <span data-ttu-id="21b71-209">**Zpráva** úkolu zapíše zprávu do protokolovací nástroj.</span><span class="sxs-lookup"><span data-stu-id="21b71-209">The **Message** task writes a message to a logger.</span></span>

> [!NOTE]
> <span data-ttu-id="21b71-210">Úplné podrobnosti úlohy, které jsou dostupné ihned najdete v tématu [– referenční dokumentace úlohy nástroje MSBuild](https://msdn.microsoft.com/library/7z253716.aspx).</span><span class="sxs-lookup"><span data-stu-id="21b71-210">For full details of the tasks that are available out of the box, see [MSBuild Task Reference](https://msdn.microsoft.com/library/7z253716.aspx).</span></span> <span data-ttu-id="21b71-211">Další informace o úlohách, včetně vytváření vlastních úloh, naleznete v tématu [úlohy nástroje MSBuild](https://msdn.microsoft.com/library/ms171466.aspx).</span><span class="sxs-lookup"><span data-stu-id="21b71-211">For more information on tasks, including how to create your own custom tasks, see [MSBuild Tasks](https://msdn.microsoft.com/library/ms171466.aspx).</span></span>

<span data-ttu-id="21b71-212">Úlohy musí být vždy obsažen v rámci [cílové](https://msdn.microsoft.com/library/t50z2hka.aspx) elementy.</span><span class="sxs-lookup"><span data-stu-id="21b71-212">Tasks must always be contained within [Target](https://msdn.microsoft.com/library/t50z2hka.aspx) elements.</span></span> <span data-ttu-id="21b71-213">A **cílové** prvek je sada jeden nebo více úkolů, které jsou spouštěny postupně, a soubor projektu může obsahovat více cílů.</span><span class="sxs-lookup"><span data-stu-id="21b71-213">A **Target** element is a set of one or more tasks that are executed sequentially, and a project file can contain multiple targets.</span></span> <span data-ttu-id="21b71-214">Pokud chcete spustit úlohu nebo sadu úloh, vyvoláte cíl, který je obsahuje.</span><span class="sxs-lookup"><span data-stu-id="21b71-214">When you want to run a task, or a set of tasks, you invoke the target that contains them.</span></span> <span data-ttu-id="21b71-215">Předpokládejme například, že máte jednoduchý projekt soubor, který zaznamená zprávu.</span><span class="sxs-lookup"><span data-stu-id="21b71-215">For example, suppose you have a simple project file that logs a message.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample9.xml)]

<span data-ttu-id="21b71-216">Cíle z příkazového řádku lze vyvolat pomocí **/t** přepínač k určení cíle.</span><span class="sxs-lookup"><span data-stu-id="21b71-216">You can invoke the target from the command line, by using the **/t** switch to specify the target.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample10.cmd)]

<span data-ttu-id="21b71-217">Alternativně můžete přidat **defaulttargets –** atribut **projektu** element, chcete-li určit cíle, které chcete vyvolat.</span><span class="sxs-lookup"><span data-stu-id="21b71-217">Alternatively, you can add a **DefaultTargets** attribute to the **Project** element, to specify the targets that you want to invoke.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample11.xml)]

<span data-ttu-id="21b71-218">V takovém případě není nutné zadat cíl z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="21b71-218">In this case, you don't need to specify the target from the command line.</span></span> <span data-ttu-id="21b71-219">Můžete jednoduše zadat soubor projektu, a vyvolá MSBuild **FullPublish** cílové za vás.</span><span class="sxs-lookup"><span data-stu-id="21b71-219">You can simply specify the project file, and MSBuild will invoke the **FullPublish** target for you.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample12.cmd)]

<span data-ttu-id="21b71-220">Cíle a úlohy může obsahovat **podmínku** atributy.</span><span class="sxs-lookup"><span data-stu-id="21b71-220">Both targets and tasks can include **Condition** attributes.</span></span> <span data-ttu-id="21b71-221">V důsledku toho můžete vynechat celý cíle nebo jednotlivé úlohy, pokud jsou splněny určité podmínky.</span><span class="sxs-lookup"><span data-stu-id="21b71-221">As such, you can choose to omit entire targets or individual tasks if certain conditions are met.</span></span>

<span data-ttu-id="21b71-222">Obecně řečeno při vytváření užitečných úlohy a cíle, musíte odkazovat na vlastnosti a položky, které jste definovali jinde v souboru projektu:</span><span class="sxs-lookup"><span data-stu-id="21b71-222">Generally speaking, when you create useful tasks and targets, you'll need to refer to the properties and items that you've defined elsewhere in the project file:</span></span>

- <span data-ttu-id="21b71-223">Pokud chcete použít hodnotu vlastnosti, zadejte **$(***PropertyName***)**, kde *PropertyName* je název **vlastnost** element nebo název parametr.</span><span class="sxs-lookup"><span data-stu-id="21b71-223">To use a property value, type **$(***PropertyName***)**, where *PropertyName* is the name of the **Property** element or the name of the parameter.</span></span>
- <span data-ttu-id="21b71-224">Chcete-li použít položku, zadejte **@(***ItemName***)**, kde *ItemName* je název **položky** elementu.</span><span class="sxs-lookup"><span data-stu-id="21b71-224">To use an item, type **@(***ItemName***)**, where *ItemName* is the name of the **Item** element.</span></span>

> [!NOTE]
> <span data-ttu-id="21b71-225">Mějte na paměti, že pokud vytvoříte více položek se stejným názvem, které sestavujete seznamu.</span><span class="sxs-lookup"><span data-stu-id="21b71-225">Remember that if you create multiple items with the same name, you're building a list.</span></span> <span data-ttu-id="21b71-226">Naopak pokud vytvoříte více vlastností se stejným názvem, poslední hodnota vlastnosti je poskytnout přepíše jakékoli předchozí vlastnosti se stejným názvem&#x2014;vlastnost může obsahovat pouze jednu hodnotu.</span><span class="sxs-lookup"><span data-stu-id="21b71-226">In contrast, if you create multiple properties with the same name, the last property value you provide will overwrite any previous properties with the same name&#x2014;a property can only contain a single value.</span></span>

<span data-ttu-id="21b71-227">Například v *Publish.proj* soubor v ukázkovém řešení, podívejte se na **BuildProjects** cíl.</span><span class="sxs-lookup"><span data-stu-id="21b71-227">For example, in the *Publish.proj* file in the sample solution, take a look at the **BuildProjects** target.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample13.xml)]

<span data-ttu-id="21b71-228">V této ukázce můžete sledovat tyto klíčové body:</span><span class="sxs-lookup"><span data-stu-id="21b71-228">In this sample, you can observe these key points:</span></span>

- <span data-ttu-id="21b71-229">Pokud **BuildingInTeamBuild** je zadán parametr a má hodnotu **true**, budou spuštěny žádné úlohy uvnitř tohoto cíle.</span><span class="sxs-lookup"><span data-stu-id="21b71-229">If the **BuildingInTeamBuild** parameter is specified and has a value of **true**, none of the tasks within this target will be executed.</span></span>
- <span data-ttu-id="21b71-230">Cíl obsahuje jednu instanci [MSBuild](https://msdn.microsoft.com/library/z7f65y0d.aspx) úloh.</span><span class="sxs-lookup"><span data-stu-id="21b71-230">The target contains a single instance of the [MSBuild](https://msdn.microsoft.com/library/z7f65y0d.aspx) task.</span></span> <span data-ttu-id="21b71-231">Tato úloha umožňuje vytvářet jiné projekty MSBuild.</span><span class="sxs-lookup"><span data-stu-id="21b71-231">This task lets you build other MSBuild projects.</span></span>
- <span data-ttu-id="21b71-232">**ProjectsToBuild** položky je předán úkolu.</span><span class="sxs-lookup"><span data-stu-id="21b71-232">The **ProjectsToBuild** item is passed to the task.</span></span> <span data-ttu-id="21b71-233">Tato položka by mohly představovat seznam souborů projektu nebo řešení, všechny určené **ProjectsToBuild** položky elementů v rámci skupiny položek.</span><span class="sxs-lookup"><span data-stu-id="21b71-233">This item could represent a list of project or solution files, all defined by **ProjectsToBuild** item elements within an item group.</span></span> <span data-ttu-id="21b71-234">V takovém případě **ProjectsToBuild** položka odkazuje na soubor jediného řešení.</span><span class="sxs-lookup"><span data-stu-id="21b71-234">In this case, the **ProjectsToBuild** item refers to a single solution file.</span></span>

    [!code-xml[Main](understanding-the-project-file/samples/sample14.xml)]
- <span data-ttu-id="21b71-235">Hodnoty vlastností, které jsou předány **MSBuild** úloh zahrnují parametry s názvem **OutputRoot** a **konfigurace**.</span><span class="sxs-lookup"><span data-stu-id="21b71-235">The property values passed to the **MSBuild** task include parameters named **OutputRoot** and **Configuration**.</span></span> <span data-ttu-id="21b71-236">Tyto vlastnosti se nastaví hodnoty parametrů, pokud jsou k dispozici, nebo hodnoty statickou vlastnost Pokud tomu tak není.</span><span class="sxs-lookup"><span data-stu-id="21b71-236">These are set to parameter values if they are provided, or static property values if they are not.</span></span>

    [!code-xml[Main](understanding-the-project-file/samples/sample15.xml)]

<span data-ttu-id="21b71-237">Můžete také zjistit, který **MSBuild** úloha vyvolá cíl s názvem **sestavení**.</span><span class="sxs-lookup"><span data-stu-id="21b71-237">You can also see that the **MSBuild** task invokes a target named **Build**.</span></span> <span data-ttu-id="21b71-238">Toto je jeden z několika předdefinovaných cílů, které hojně používají soubory projektu sady Visual Studio a jsou k dispozici ve vašich vlastních projektů souborech, jako je třeba **sestavení**, **Vyčistit**, **znovu sestavit**, a **publikovat**.</span><span class="sxs-lookup"><span data-stu-id="21b71-238">This is one of several built-in targets that are widely used in Visual Studio project files and are available to you in your custom project files, like **Build**, **Clean**, **Rebuild**, and **Publish**.</span></span> <span data-ttu-id="21b71-239">Získáte další informace o použití cíle a úlohy pro řízení procesu sestavení a o **MSBuild** úkolů zejména dále v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="21b71-239">You'll learn more about using targets and tasks to control the build process, and about the **MSBuild** task in particular, later in this topic.</span></span>

> [!NOTE]
> <span data-ttu-id="21b71-240">Další informace o cílech naleznete v tématu [cíle nástroje MSBuild](https://msdn.microsoft.com/library/ms171462.aspx).</span><span class="sxs-lookup"><span data-stu-id="21b71-240">For more information on targets, see [MSBuild Targets](https://msdn.microsoft.com/library/ms171462.aspx).</span></span>

## <a name="splitting-project-files-to-support-multiple-environments"></a><span data-ttu-id="21b71-241">Rozdělení souborů projektu pro podporu více prostředí</span><span class="sxs-lookup"><span data-stu-id="21b71-241">Splitting Project Files to Support Multiple Environments</span></span>

<span data-ttu-id="21b71-242">Předpokládejme, že chcete nasadit řešení do různých prostředí, jako produkční prostředí, testovací servery a pracovní platformy.</span><span class="sxs-lookup"><span data-stu-id="21b71-242">Suppose you want to be able to deploy a solution to multiple environments, like test servers, staging platforms, and production environments.</span></span> <span data-ttu-id="21b71-243">Konfigurace může podstatně liší mezi těmito prostředími&#x2014;ne jenom z hlediska názvy serverů, připojovací řetězce a tak dále, ale také potenciálně z hlediska přihlašovací údaje, nastavení zabezpečení a spoustu dalších faktorů.</span><span class="sxs-lookup"><span data-stu-id="21b71-243">The configuration may vary substantially between these environments&#x2014;not just in terms of server names, connection strings, and so on, but also potentially in terms of credentials, security settings, and lots of other factors.</span></span> <span data-ttu-id="21b71-244">Pokud je potřeba pravidelně to provést, není ve skutečnosti účelné upravit víc vlastností v souboru projektu pokaždé, když přejdete cílovém prostředí.</span><span class="sxs-lookup"><span data-stu-id="21b71-244">If you need to do this regularly, it's not really expedient to edit multiple properties in your project file every time you switch the target environment.</span></span> <span data-ttu-id="21b71-245">Ani to není ideální řešení tak, aby vyžadovala nekonečné seznam hodnot vlastností do procesu sestavení.</span><span class="sxs-lookup"><span data-stu-id="21b71-245">Nor is it an ideal solution to require an endless list of property values to be provided to the build process.</span></span>

<span data-ttu-id="21b71-246">Naštěstí se o alternativu.</span><span class="sxs-lookup"><span data-stu-id="21b71-246">Fortunately there is an alternative.</span></span> <span data-ttu-id="21b71-247">Nástroj MSBuild umožňuje rozdělit konfigurace sestavení ve více souborech projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-247">MSBuild lets you split your build configuration across multiple project files.</span></span> <span data-ttu-id="21b71-248">Pokud chcete zobrazit, jak to funguje, v ukázkovém řešení, Všimněte si, že existují dva soubory vlastních projektů:</span><span class="sxs-lookup"><span data-stu-id="21b71-248">To see how this works, in the sample solution, notice that there are two custom project files:</span></span>

- <span data-ttu-id="21b71-249">*Publish.proj*, který obsahuje vlastnosti, položky, a cíle, které jsou společné pro všechna prostředí.</span><span class="sxs-lookup"><span data-stu-id="21b71-249">*Publish.proj*, which contains properties, items, and targets that are common to all environments.</span></span>
- <span data-ttu-id="21b71-250">*Env Dev.proj*, který obsahuje vlastnosti, které jsou specifické pro prostředí pro vývojáře.</span><span class="sxs-lookup"><span data-stu-id="21b71-250">*Env-Dev.proj*, which contains properties that are specific to a developer environment.</span></span>

<span data-ttu-id="21b71-251">Nyní Všimněte si, že *Publish.proj* soubor obsahuje [Import](https://msdn.microsoft.com/library/92x05xfs.aspx) element bezprostředně pod otevírání **projektu** značky.</span><span class="sxs-lookup"><span data-stu-id="21b71-251">Now notice that the *Publish.proj* file includes an [Import](https://msdn.microsoft.com/library/92x05xfs.aspx) element, immediately beneath the opening **Project** tag.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample16.xml)]

<span data-ttu-id="21b71-252">**Importovat** element slouží k importu obsahu souboru jiného souboru projektu nástroje MSBuild do aktuálního souboru projektu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="21b71-252">The **Import** element is used to import the contents of another MSBuild project file into the current MSBuild project file.</span></span> <span data-ttu-id="21b71-253">V takovém případě **TargetEnvPropsFile** parametr obsahuje název souboru projektu, které chcete importovat.</span><span class="sxs-lookup"><span data-stu-id="21b71-253">In this case, the **TargetEnvPropsFile** parameter provides the filename of the project file you want to import.</span></span> <span data-ttu-id="21b71-254">Můžete zadat hodnotu pro tento parametr při spuštění nástroje MSBuild.</span><span class="sxs-lookup"><span data-stu-id="21b71-254">You can provide a value for this parameter when you run MSBuild.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample17.cmd)]

<span data-ttu-id="21b71-255">To efektivně sloučí obsah těchto dvou souborů do jediného souboru projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-255">This effectively merges the contents of the two files into a single project file.</span></span> <span data-ttu-id="21b71-256">Tento přístup můžete vytvořit jeden projekt soubor, který obsahuje konfigurace univerzální sestavení a více souborů doplňující projekt obsahující vlastnosti specifické pro prostředí.</span><span class="sxs-lookup"><span data-stu-id="21b71-256">Using this approach, you can create one project file containing your universal build configuration and multiple supplementary project files containing environment-specific properties.</span></span> <span data-ttu-id="21b71-257">V důsledku toho jednoduše spuštění příkazu s hodnotou jiné parametr vám umožní nasazení řešení do různých prostředí.</span><span class="sxs-lookup"><span data-stu-id="21b71-257">As a result, simply running a command with a different parameter value lets you deploy your solution to a different environment.</span></span>

![](understanding-the-project-file/_static/image3.png)

<span data-ttu-id="21b71-258">Rozdělení souborů projektu tímto způsobem je vhodné provést.</span><span class="sxs-lookup"><span data-stu-id="21b71-258">Splitting your project files in this way is a good practice to follow.</span></span> <span data-ttu-id="21b71-259">Umožňuje vývojářům nasadit do různých prostředí pomocí jediného příkazu při vyloučení duplicitních vlastností univerzální sestavení ve více souborech projektu.</span><span class="sxs-lookup"><span data-stu-id="21b71-259">It allows developers to deploy to multiple environments by running a single command, while avoiding the duplication of universal build properties across multiple project files.</span></span>

> [!NOTE]
> <span data-ttu-id="21b71-260">Pokyny k přizpůsobení souborů projektu specifických pro prostředí pro prostředí serveru, naleznete v tématu [konfigurace vlastnosti nasazení pro cílové prostředí](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="21b71-260">For guidance on how to customize the environment-specific project files for your own server environments, see [Configuring Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="21b71-261">Závěr</span><span class="sxs-lookup"><span data-stu-id="21b71-261">Conclusion</span></span>

<span data-ttu-id="21b71-262">Toto téma poskytuje obecný úvod do souborů projektu MSBuild a vysvětlení, jak můžete vytvořit vlastní soubory k řízení procesu sestavení.</span><span class="sxs-lookup"><span data-stu-id="21b71-262">This topic provided a general introduction to MSBuild project files and explained how you can create your own custom project files to control the build process.</span></span> <span data-ttu-id="21b71-263">Také představila koncept rozdělení soubory projektu do univerzální sestavení pokyny a vlastnosti specifické pro prostředí sestavení, které umožňují snadno vytvářet a nasazovat projekty do více cílů.</span><span class="sxs-lookup"><span data-stu-id="21b71-263">It also introduced the concept of splitting project files into universal build instructions and environment-specific build properties, to make it easy to build and deploy projects to multiple destinations.</span></span>

<span data-ttu-id="21b71-264">Dalším tématu s názvem [Principy procesu sestavení](understanding-the-build-process.md), poskytuje lepší přehled o použití soubory projektu do ovládacího prvku sestavení a nasazení můžete procházením až po nasazení řešení s realistické úroveň složitosti.</span><span class="sxs-lookup"><span data-stu-id="21b71-264">The next topic, [Understanding the Build Process](understanding-the-build-process.md), provides more insight into how you can use project files to control build and deployment by walking you through the deployment of a solution with a realistic level of complexity.</span></span>

## <a name="further-reading"></a><span data-ttu-id="21b71-265">Další čtení</span><span class="sxs-lookup"><span data-stu-id="21b71-265">Further Reading</span></span>

<span data-ttu-id="21b71-266">Podrobnější Úvod do souborů projektu a WPP najdete v tématu [uvnitř the Microsoft Build Engine: Pomocí nástroje MSBuild a Team Foundation Build](http://amzn.com/0735645248) Sayed Ibrahim Hashimi a William Bartholomew, ISBN: 978-0-7356-4524-0.</span><span class="sxs-lookup"><span data-stu-id="21b71-266">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="21b71-267">[Předchozí](setting-up-the-contact-manager-solution.md)
> [další](understanding-the-build-process.md)</span><span class="sxs-lookup"><span data-stu-id="21b71-267">[Previous](setting-up-the-contact-manager-solution.md)
[Next](understanding-the-build-process.md)</span></span>
