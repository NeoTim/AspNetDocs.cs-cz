---
uid: web-forms/overview/older-versions-security/introduction/an-overview-of-forms-authentication-cs
title: Přehled ověřování prostřednictvím formulářů (C#) | Microsoft Docs
author: rick-anderson
description: Vytváření vlastních tras
ms.author: riande
ms.date: 01/14/2008
ms.assetid: de2d65b9-aadc-42ba-abe1-4e87e66521a0
msc.legacyurl: /web-forms/overview/older-versions-security/introduction/an-overview-of-forms-authentication-cs
msc.type: authoredcontent
ms.openlocfilehash: 009c3f84e00d648ede4a15e530ceac2d23e01eec
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78546429"
---
# <a name="an-overview-of-forms-authentication-c"></a><span data-ttu-id="4d9bf-103">Přehled ověřování prostřednictvím formulářů (C#)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-103">An Overview of Forms Authentication (C#)</span></span>

<span data-ttu-id="4d9bf-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="4d9bf-105">[Stažení kódu](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/ASPNET_Security_Tutorial_02_CS.zip) nebo [stažení PDF](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial02_FormsAuth_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-105">[Download Code](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/ASPNET_Security_Tutorial_02_CS.zip) or [Download PDF](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial02_FormsAuth_cs.pdf)</span></span>

> <span data-ttu-id="4d9bf-106">V tomto kurzu se od pouhého diskuze k implementaci změní. Konkrétně se podíváme na implementaci ověřování formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-106">In this tutorial we will turn from mere discussion to implementation; in particular, we will look at implementing forms authentication.</span></span> <span data-ttu-id="4d9bf-107">Webová aplikace, kterou začneme sestavovat v tomto kurzu, bude i nadále postavená v dalších kurzech, protože se přesunuje z jednoduchých ověřování pomocí formulářů na členství a role.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-107">The web application we start constructing in this tutorial will continue to be built upon in subsequent tutorials, as we move from simple forms authentication to membership and roles.</span></span>
> 
> <span data-ttu-id="4d9bf-108">Další informace o tomto tématu najdete v tomto videu: [použití ověřování Basic Forms v ASP.NET](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-108">Please see this video for more information on this topic: [Using Basic Forms Authentication in ASP.NET](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md).</span></span>

## <a name="introduction"></a><span data-ttu-id="4d9bf-109">Úvod</span><span class="sxs-lookup"><span data-stu-id="4d9bf-109">Introduction</span></span>

<span data-ttu-id="4d9bf-110">V [předchozím kurzu](security-basics-and-asp-net-support-cs.md) jsme probrali různé možnosti ověřování, autorizace a uživatelského účtu, které poskytuje ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-110">In the [preceding tutorial](security-basics-and-asp-net-support-cs.md) we discussed the various authentication, authorization, and user account options provided by ASP.NET.</span></span> <span data-ttu-id="4d9bf-111">V tomto kurzu se od pouhého diskuze k implementaci změní. Konkrétně se podíváme na implementaci ověřování formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-111">In this tutorial we will turn from mere discussion to implementation; in particular, we will look at implementing forms authentication.</span></span> <span data-ttu-id="4d9bf-112">Webová aplikace, kterou začneme sestavovat v tomto kurzu, bude i nadále postavená v dalších kurzech, protože se přesunuje z jednoduchých ověřování pomocí formulářů na členství a role.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-112">The web application we start constructing in this tutorial will continue to be built upon in subsequent tutorials, as we move from simple forms authentication to membership and roles.</span></span>

<span data-ttu-id="4d9bf-113">Tento kurz začíná podrobnějším pohledem na pracovní postup ověřování pomocí formulářů, které jsme provedli v předchozím kurzu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-113">This tutorial begins with an in-depth look at the forms authentication workflow, a topic we touched upon in the previous tutorial.</span></span> <span data-ttu-id="4d9bf-114">V tomto případě vytvoříme web ASP.NET, který vám umožní vydemo koncepty ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-114">Following that, we will create an ASP.NET website through which to demo the concepts of forms authentication.</span></span> <span data-ttu-id="4d9bf-115">Dále nakonfigurujeme lokalitu, aby používala ověřování pomocí formulářů, vytvořili jednoduchou přihlašovací stránku a zjistili, jak určit, jestli je uživatel ověřený, a pokud ano, uživatelské jméno, se kterým se přihlásilo.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-115">Next, we will configure the site to use forms authentication, create a simple login page, and see how to determine, in code, whether a user is authenticated and, if so, the username they logged in with.</span></span>

<span data-ttu-id="4d9bf-116">Porozumění pracovnímu postupu ověřování pomocí formulářů, jeho povolení ve webové aplikaci a vytváření přihlašovacích a odhlašovacích stránek jsou všechny důležité kroky při vytváření ASP.NET aplikace, která podporuje uživatelské účty a ověřuje uživatele prostřednictvím webové stránky.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-116">Understanding the forms authentication workflow, enabling it in a web application, and creating the login and logoff pages are all vital steps in building an ASP.NET application that supports user accounts and authenticates users through a web page.</span></span> <span data-ttu-id="4d9bf-117">Z tohoto důvodu jsou k dispozici tyto kurzy – a protože již máte zkušenosti s konfigurací ověřování pomocí formulářů v minulých projektech, doporučujeme, abyste tento kurz nastavili v plném rozsahu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-117">Because of this – and because these tutorials build upon one another - I would encourage you to work through this tutorial in full before moving on to the next one even if you already have had experience configuring forms authentication in past projects.</span></span>

## <a name="understanding-the-forms-authentication-workflow"></a><span data-ttu-id="4d9bf-118">Princip pracovního postupu ověřování formulářů</span><span class="sxs-lookup"><span data-stu-id="4d9bf-118">Understanding the Forms Authentication Workflow</span></span>

<span data-ttu-id="4d9bf-119">Když modul runtime ASP.NET zpracuje požadavek na prostředek ASP.NET, například stránku ASP.NET nebo webovou službu ASP.NET, požadavek během svého životního cyklu vyvolá několik událostí.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-119">When the ASP.NET runtime processes a request for an ASP.NET resource, such as an ASP.NET page or ASP.NET Web service, the request raises a number of events during its lifecycle.</span></span> <span data-ttu-id="4d9bf-120">Na začátku a na konci žádosti byly vyvolány události, které se vyvolaly při ověřování a autorizaci žádosti, událost vyvolaná v případě neošetřené výjimky a tak dále.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-120">There are events raised at the very beginning and very end of the request, ones raised when the request is being authenticated and authorized, an event raised in the case of an unhandled exception, and so forth.</span></span> <span data-ttu-id="4d9bf-121">Chcete-li zobrazit úplný seznam událostí, přečtěte si [události objektu HttpApplication](https://msdn.microsoft.com/library/system.web.httpapplication_events.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-121">To see a complete listing of the events, refer to the [HttpApplication object's events](https://msdn.microsoft.com/library/system.web.httpapplication_events.aspx).</span></span>

<span data-ttu-id="4d9bf-122">*Moduly HTTP* jsou spravované třídy, jejichž kód je spuštěn v reakci na konkrétní událost v životním cyklu žádosti.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-122">*HTTP Modules* are managed classes whose code is executed in response to a particular event in the request lifecycle.</span></span> <span data-ttu-id="4d9bf-123">ASP.NET se dodává s několika moduly HTTP, které provádějí zásadní úlohy na pozadí.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-123">ASP.NET ships with a number of HTTP Modules that perform essential tasks behind the scenes.</span></span> <span data-ttu-id="4d9bf-124">Dva předdefinované moduly HTTP, které jsou obzvláště relevantní pro naši diskuzi:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-124">Two built-in HTTP Modules that are especially relevant to our discussion are:</span></span>

- <span data-ttu-id="4d9bf-125">**[`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx)** – ověřuje uživatele pomocí kontrolního lístku pro formuláře, který je obvykle zahrnutý v kolekci souborů cookie uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-125">**[`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx)** – authenticates the user by inspecting the forms authentication ticket, which is typically included in the user's cookies collection.</span></span> <span data-ttu-id="4d9bf-126">Pokud neexistují žádné ověřovací lístky formulářů, uživatel je anonymní.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-126">If no forms authentication ticket is present, the user is anonymous.</span></span>
- <span data-ttu-id="4d9bf-127">**[`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)** – určuje, jestli má aktuální uživatel autorizaci pro přístup k požadované adrese URL.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-127">**[`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)** – determines whether or not the current user is authorized to access the requested URL.</span></span> <span data-ttu-id="4d9bf-128">Tento modul určí autoritu tím, že se pojednáním s autorizačními pravidly zadanými v konfiguračních souborech aplikace.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-128">This module determines the authority by consulting the authorization rules specified in the application's configuration files.</span></span> <span data-ttu-id="4d9bf-129">ASP.NET také zahrnuje [`FileAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx) , který určuje autoritu v rámci konzultací s požadovanými seznamy řízení přístupu (ACL) souborů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-129">ASP.NET also includes the [`FileAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx) that determines authority by consulting the requested file(s) ACLs.</span></span>

<span data-ttu-id="4d9bf-130">`FormsAuthenticationModule` se pokusí ověřit uživatele před spuštěním `UrlAuthorizationModule` (a `FileAuthorizationModule`).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-130">The `FormsAuthenticationModule` attempts to authenticate the user prior to the `UrlAuthorizationModule` (and `FileAuthorizationModule`) executing.</span></span> <span data-ttu-id="4d9bf-131">Pokud uživatel, který vytváří požadavek, nemá oprávnění k přístupu k požadovanému prostředku, modul autorizace žádost ukončí a vrátí [neautorizovaný stav HTTP 401](http://www.checkupdown.com/status/E401.html) .</span><span class="sxs-lookup"><span data-stu-id="4d9bf-131">If the user making the request is not authorized to access the requested resource, the authorization module terminates the request and returns an [HTTP 401 Unauthorized](http://www.checkupdown.com/status/E401.html) status.</span></span> <span data-ttu-id="4d9bf-132">Ve scénářích ověřování systému Windows se do prohlížeče vrátí stav HTTP 401.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-132">In Windows authentication scenarios, the HTTP 401 status is returned to the browser.</span></span> <span data-ttu-id="4d9bf-133">Tento stavový kód způsobí, že v prohlížeči se uživateli zobrazí výzva k zadání přihlašovacích údajů prostřednictvím modálního dialogového okna.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-133">This status code causes the browser to prompt the user for their credentials via a modal dialog box.</span></span> <span data-ttu-id="4d9bf-134">Při ověřování pomocí formulářů se ale stav neautorizovaného protokolu HTTP 401 nikdy neposílá do prohlížeče, protože FormsAuthenticationModule zjistí tento stav a změní ho tak, aby místo toho přesměroval uživatele na přihlašovací stránku (přes stav [přesměrování HTTP 302](http://www.checkupdown.com/status/E302.html) ).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-134">With forms authentication, however, the HTTP 401 Unauthorized status is never sent to the browser because the FormsAuthenticationModule detects this status and modifies it to redirect the user to the login page instead (via an [HTTP 302 Redirect](http://www.checkupdown.com/status/E302.html) status).</span></span>

<span data-ttu-id="4d9bf-135">Zodpovědnost na přihlašovací stránce slouží k určení, jestli jsou přihlašovací údaje uživatele platné, a pokud ano, vytvoří lístek pro ověřování pomocí formulářů a přesměruje uživatele zpátky na stránku, na kterou se pokoušel navštívit.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-135">The login page's responsibility is to determine if the user's credentials are valid and, if so, to create a forms authentication ticket and redirect the user back to the page they were attempting to visit.</span></span> <span data-ttu-id="4d9bf-136">Ověřovací lístek je součástí dalších požadavků na stránky na webu, které `FormsAuthenticationModule` používá k identifikaci uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-136">The authentication ticket is included in subsequent requests to the pages on the website, which the `FormsAuthenticationModule` uses to identify the user.</span></span>

![Pracovní postup ověřování formulářů](an-overview-of-forms-authentication-cs/_static/image1.png)

<span data-ttu-id="4d9bf-138">**Obrázek 1**: pracovní postup ověřování formulářů</span><span class="sxs-lookup"><span data-stu-id="4d9bf-138">**Figure 1**: The Forms Authentication Workflow</span></span>

### <a name="remembering-the-authentication-ticket-across-page-visits"></a><span data-ttu-id="4d9bf-139">Zapamatování ověřovacího lístku v rámci stránkových návštěv</span><span class="sxs-lookup"><span data-stu-id="4d9bf-139">Remembering the Authentication Ticket Across Page Visits</span></span>

<span data-ttu-id="4d9bf-140">Po přihlášení musí být lístek ověřování formulářů odeslán zpět na webový server na každý požadavek, aby uživatel zůstal přihlášený při procházení webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-140">After logging in, the forms authentication ticket must be sent back to the web server on each request so that the user remains logged in as they browse the site.</span></span> <span data-ttu-id="4d9bf-141">To se obvykle provádí umístěním ověřovacího lístku do kolekce souborů cookie uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-141">This is typically accomplished by placing the authentication ticket in the user's cookies collection.</span></span> <span data-ttu-id="4d9bf-142">[Soubory cookie](http://en.wikipedia.org/wiki/HTTP_cookie) jsou malé textové soubory, které se nacházejí v počítači uživatele a jsou přenášeny do hlaviček protokolu HTTP na každém požadavku na web, který soubor cookie vytvořil.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-142">[Cookies](http://en.wikipedia.org/wiki/HTTP_cookie) are small text files that reside on the user's computer and are transmitted in the HTTP headers on each request to the website that created the cookie.</span></span> <span data-ttu-id="4d9bf-143">Proto po vytvoření lístku pro ověřování pomocí formulářů a jeho uložení do souborů cookie prohlížeče Každá následná návštěva tohoto webu odešle ověřovací lístek spolu s požadavkem, čímž uživatele identifikuje.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-143">Therefore, once the forms authentication ticket has been created and stored in the browser's cookies, each subsequent visit to that site sends the authentication ticket along with the request, thereby identifying the user.</span></span>

<span data-ttu-id="4d9bf-144">Jedním z aspektů souborů cookie je vypršení platnosti, což je datum a čas, kdy prohlížeč zahodí soubor cookie.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-144">One aspect of cookies is their expiration, which is the date and time at which the browser discards the cookie.</span></span> <span data-ttu-id="4d9bf-145">Když vyprší platnost souboru cookie pro ověřování formulářů, uživatel už nemůže být ověřený a stane se z něj anonymní.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-145">When the forms authentication cookie expires, the user can no longer be authenticated and therefore become anonymous.</span></span> <span data-ttu-id="4d9bf-146">Když se uživatel navštíví z veřejného terminálu, je pravděpodobné, že budou chtít, aby ověřovací lístek vypršel při zavření prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-146">When a user is visiting from a public terminal, chances are they want their authentication ticket to expire when they close their browser.</span></span> <span data-ttu-id="4d9bf-147">Při návštěvě z domova ale stejný uživatel může chtít, aby byl ověřovací lístek zapamatovatný v prohlížeči, aby se nemusel znovu přihlašovat při každé návštěvě webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-147">When visiting from home, however, that same user might want the authentication ticket to be remembered across browser restarts so that they do not have to re-log in each time they visit the site.</span></span> <span data-ttu-id="4d9bf-148">Toto rozhodnutí často provádí uživatel ve formě zaškrtávacího políčka "zapamatovat mě" na přihlašovací stránce.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-148">This decision is often made by the user in the form of a "Remember me" checkbox on the login page.</span></span> <span data-ttu-id="4d9bf-149">V kroku 3 se podíváme na to, jak na přihlašovací stránce implementovat zaškrtávací políčko zapamatovatelné.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-149">In Step 3 we will examine how to implement a "Remember me" checkbox in the login page.</span></span> <span data-ttu-id="4d9bf-150">V následujícím kurzu se podrobně řeší nastavení časového limitu ověřovacího lístku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-150">The following tutorial addresses the authentication ticket timeout settings in detail.</span></span>

> [!NOTE]
> <span data-ttu-id="4d9bf-151">Je možné, že uživatelský agent použitý k přihlášení k webu nemusí podporovat soubory cookie.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-151">It is possible that the user agent used to log on to the website may not support cookies.</span></span> <span data-ttu-id="4d9bf-152">V takovém případě může ASP.NET použít lístky pro ověřování pomocí formulářů cookie.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-152">In such a case, ASP.NET can use cookieless forms authentication tickets.</span></span> <span data-ttu-id="4d9bf-153">V tomto režimu je ověřovací lístek zakódovaný do adresy URL.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-153">In this mode, the authentication ticket is encoded into the URL.</span></span> <span data-ttu-id="4d9bf-154">Podíváme se, když se použijí ověřovací lístky cookie a jak se vytvářejí a spravují v dalším kurzu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-154">We will look at when cookieless authentication tickets are used and how they are created and managed in the next tutorial.</span></span>

### <a name="the-scope-of-forms-authentication"></a><span data-ttu-id="4d9bf-155">Rozsah ověřování formulářů</span><span class="sxs-lookup"><span data-stu-id="4d9bf-155">The Scope of Forms Authentication</span></span>

<span data-ttu-id="4d9bf-156">`FormsAuthenticationModule` je spravovaný kód, který je součástí modulu runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-156">The `FormsAuthenticationModule` is managed code that is part of the ASP.NET runtime.</span></span> <span data-ttu-id="4d9bf-157">Před verzí 7 webového serveru [Internetová informační služba](https://www.iis.net/) od Microsoftu existovala odlišná bariéra mezi KANÁLEM HTTP služby IIS a kanálem běhového prostředí ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-157">Prior to version 7 of Microsoft's [Internet Information Services (IIS)](https://www.iis.net/) web server, there was a distinct barrier between IIS's HTTP pipeline and the ASP.NET runtime's pipeline.</span></span> <span data-ttu-id="4d9bf-158">V krátkém případě se v IIS 6 a starších verzích `FormsAuthenticationModule` spouští jenom v případě, že je žádost delegovaná z IIS na modul runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-158">In short, in IIS 6 and earlier, the `FormsAuthenticationModule` only executes when a request is delegated from IIS to the ASP.NET runtime.</span></span> <span data-ttu-id="4d9bf-159">Ve výchozím nastavení služba IIS zpracovává samotný statický obsah, jako jsou stránky HTML a soubory CSS a obrázky – a při požadavku na stránku s příponou. aspx,. asmx nebo. ashx jenom vypnul požadavky na modul runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-159">By default, IIS processes static content itself – like HTML pages and CSS and image files – and only hands off requests to the ASP.NET runtime when a page with an extension of .aspx, .asmx, or .ashx is requested.</span></span>

<span data-ttu-id="4d9bf-160">Služba IIS 7 ale umožňuje integrované kanály IIS a ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-160">IIS 7, however, allows for integrated IIS and ASP.NET pipelines.</span></span> <span data-ttu-id="4d9bf-161">S několika konfiguračními nastaveními můžete nastavit IIS 7, aby se FormsAuthenticationModule pro *všechny* požadavky.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-161">With a few configuration settings you can setup IIS 7 to invoke the FormsAuthenticationModule for *all* requests.</span></span> <span data-ttu-id="4d9bf-162">Kromě toho se službou IIS 7 můžete definovat autorizační pravidla URL pro soubory libovolného typu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-162">Furthermore, with IIS 7 you can define URL authorization rules for files of any type.</span></span> <span data-ttu-id="4d9bf-163">Další informace najdete v tématu [změny mezi VERZEMI IIS6 a IIS7 Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/changes-in-security-between-iis-60-and-iis-7-and-above), [zabezpečení webové platformy](https://www.iis.net/learn/get-started/whats-new-in-iis-7/iis7-and-above-security-improvements)a [principem ověřování adres URL v IIS7](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-163">For more information, see [Changes Between IIS6 and IIS7 Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/changes-in-security-between-iis-60-and-iis-7-and-above), [Your Web Platform Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/iis7-and-above-security-improvements), and [Understanding IIS7 URL Authorization](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization).</span></span>

<span data-ttu-id="4d9bf-164">Velký příběh ve verzích starších než IIS 7 můžete k ochraně prostředků zpracovávaných modulem runtime ASP.NET použít jenom ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-164">Long story short, in versions prior to IIS 7, you can only use forms authentication to protect resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="4d9bf-165">Podobně platí, že autorizační pravidla URL se aplikují jenom na prostředky zpracovávané modulem runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-165">Likewise, URL authorization rules are only applied to resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="4d9bf-166">Ale u služby IIS 7 je možné integrovat FormsAuthenticationModule a UrlAuthorizationModule do kanálu HTTP služby IIS, což rozšiřuje tuto funkci na všechny požadavky.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-166">But with IIS 7 it is possible to integrate the FormsAuthenticationModule and UrlAuthorizationModule into IIS's HTTP pipeline, thereby extending this functionality to all requests.</span></span>

## <a name="step-1-creating-an-aspnet-website-for-this-tutorial-series"></a><span data-ttu-id="4d9bf-167">Krok 1: vytvoření webu ASP.NET pro tuto řadu kurzů</span><span class="sxs-lookup"><span data-stu-id="4d9bf-167">Step 1: Creating an ASP.NET Website for this Tutorial Series</span></span>

<span data-ttu-id="4d9bf-168">Aby bylo možné oslovit nejširší možnou cílovou skupinu, bude web ASP.NET sestaven v celé řadě a bude vytvořen s bezplatnou verzí sady Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/)společnosti Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-168">In order to reach the widest possible audience, the ASP.NET website we will be building throughout this series will be created with Microsoft's free version of Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/).</span></span> <span data-ttu-id="4d9bf-169">V databázi [edice Microsoft SQL Server 2005 Express](https://msdn.microsoft.com/sql/Aa336346.aspx) budeme implementovat úložiště `SqlMembershipProvider` uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-169">We will implement the `SqlMembershipProvider` user store in a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database.</span></span> <span data-ttu-id="4d9bf-170">Pokud používáte sadu Visual Studio 2005 nebo jinou edici sady Visual Studio 2008 nebo SQL Server, nedělejte si starosti – tyto kroky budou téměř totožné a jakékoli netriviální rozdíly budou nahlášeny.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-170">If you are using Visual Studio 2005 or a different edition of Visual Studio 2008 or SQL Server, don't worry - the steps will be nearly identical and any non-trivial differences will be pointed out.</span></span>

> [!NOTE]
> <span data-ttu-id="4d9bf-171">Ukázková webová aplikace použitá v každém kurzu je k dispozici jako soubor ke stažení.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-171">The demo web application used in each tutorial is available as a download.</span></span> <span data-ttu-id="4d9bf-172">Tuto aplikaci ke stažení jsme vytvořili pomocí aplikace Visual Web Developer 2008 cílené pro .NET Framework verze 3,5.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-172">This downloadable application was created with Visual Web Developer 2008 targeted for the .NET Framework version 3.5.</span></span> <span data-ttu-id="4d9bf-173">Vzhledem k tomu, že je aplikace cílena na rozhraní .NET 3,5, soubor Web. config obsahuje další konfigurační prvky specifické pro 3,5.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-173">Since the application is targeted for .NET 3.5, its Web.config file includes additional, 3.5-specific configuration elements.</span></span> <span data-ttu-id="4d9bf-174">Dlouhý příběh – Pokud jste ještě v počítači nainstalovali .NET 3,5, nebude webová aplikace ke stažení fungovat, aniž byste nejdřív odebrali značku 3,5 ze souboru Web. config.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-174">Long story short, if you have yet to install .NET 3.5 on your computer then the downloadable web application will not work without first removing the 3.5-specific markup from Web.config.</span></span>

<span data-ttu-id="4d9bf-175">Než budeme moct nakonfigurovat ověřování prostřednictvím formulářů, musíme nejdřív potřebovat web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-175">Before we can configure forms authentication, we first need an ASP.NET website.</span></span> <span data-ttu-id="4d9bf-176">Začněte vytvořením nového webu ASP.NET založeného na systému souborů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-176">Start by creating a new file system-based ASP.NET website.</span></span> <span data-ttu-id="4d9bf-177">Chcete-li to provést, spusťte Visual Web Developer a pak přejděte do nabídky soubor a zvolte možnost Nový web a zobrazí se dialogové okno Nový web.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-177">To accomplish this, launch Visual Web Developer and then go to the File menu and choose New Web Site, displaying the New Web Site dialog box.</span></span> <span data-ttu-id="4d9bf-178">Vyberte šablonu webu ASP.NET, nastavte rozevírací seznam umístění na systém souborů, vyberte složku, kam chcete umístit web, a nastavte jazyk na C#.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-178">Choose the ASP.NET Web Site template, set the Location drop-down list to File System, choose a folder to place the web site, and set the language to C#.</span></span> <span data-ttu-id="4d9bf-179">Tím se vytvoří nový web s výchozí stránkou. aspx ASP.NET, datovou složkou aplikace\_a souborem Web. config.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-179">This will create a new web site with a Default.aspx ASP.NET page, an App\_Data folder, and a Web.config file.</span></span>

> [!NOTE]
> <span data-ttu-id="4d9bf-180">Visual Studio podporuje dva režimy řízení projektů: projekty webu a projekty webových aplikací.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-180">Visual Studio supports two modes of project management: Web Site Projects and Web Application Projects.</span></span> <span data-ttu-id="4d9bf-181">Webové projekty neobsahují soubor projektu, zatímco projekty webové aplikace napodobují architekturu projektu v aplikaci Visual Studio .NET 2002/2003 – obsahují soubor projektu a zkompiluje zdrojový kód projektu do jednoho sestavení, které je umístěno ve složce/bin.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-181">Web Site Projects lack a project file, whereas Web Application Projects mimic the project architecture in Visual Studio .NET 2002/2003 – they include a project file and compile the project's source code into a single assembly, which is placed in the /bin folder.</span></span> <span data-ttu-id="4d9bf-182">Visual Studio 2005 zpočátku podporuje jenom webové projekty, i když se model projektu webové aplikace znovu představil s aktualizací Service Pack 1. Visual Studio 2008 nabízí jak modely projektu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-182">Visual Studio 2005 initially only supported Web Site Projects, although the Web Application Project model was reintroduced with Service Pack 1; Visual Studio 2008 offers both project models.</span></span> <span data-ttu-id="4d9bf-183">Edice Visual Web Developer 2005 a 2008 však podporují pouze projekty webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-183">The Visual Web Developer 2005 and 2008 editions, however, only support Web Site Projects.</span></span> <span data-ttu-id="4d9bf-184">Použijem model projektu webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-184">I will be using the Web Site Project model.</span></span> <span data-ttu-id="4d9bf-185">Pokud používáte jinou edici než Express a chcete místo toho použít [model projektu webové aplikace](https://msdn.microsoft.com/library/aa730880%28vs.80%29.aspx) , můžete to udělat, ale mějte na paměti, že mezi tím, co vidíte na obrazovce, a kroky, které je nutné vzít v těchto kurzech, může dojít k nějakým rozporům.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-185">If you are using a non-Express edition and want to use the [Web Application Project model](https://msdn.microsoft.com/library/aa730880%28vs.80%29.aspx) instead, feel free to do so but be aware that there may be some discrepancies between what you see on your screen and the steps you must take versus the screen shots shown and instructions provided in these tutorials.</span></span>

<span data-ttu-id="4d9bf-186">[![vytvoření nového webu založeného na systému souborů](an-overview-of-forms-authentication-cs/_static/image3.png)](an-overview-of-forms-authentication-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-186">[![Create a New File System-Based Web Site](an-overview-of-forms-authentication-cs/_static/image3.png)](an-overview-of-forms-authentication-cs/_static/image2.png)</span></span>

<span data-ttu-id="4d9bf-187">**Obrázek 2**: vytvoření nového webu založeného na systému souborů ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-forms-authentication-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="4d9bf-187">**Figure 2**: Create a New File System-Based Web Site ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image4.png))</span></span>

### <a name="adding-a-master-page"></a><span data-ttu-id="4d9bf-188">Přidání stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="4d9bf-188">Adding a Master Page</span></span>

<span data-ttu-id="4d9bf-189">Dále do kořenového adresáře s názvem site. Master přidejte novou hlavní stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-189">Next, add a new Master Page to the site in the root directory named Site.master.</span></span> <span data-ttu-id="4d9bf-190">[Stránky předlohy](https://msdn.microsoft.com/library/wtxbf3hh.aspx) umožňují vývojáři stránky definovat šablonu pro lokalitu, která může být použita na ASP.NET stránky.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-190">[Master pages](https://msdn.microsoft.com/library/wtxbf3hh.aspx) enable a page developer to define a site-wide template that can be applied to ASP.NET pages.</span></span> <span data-ttu-id="4d9bf-191">Hlavní výhodou hlavních stránek je, že celkový vzhled webu může být definován v jednom umístění, což usnadňuje aktualizaci a vylepšení rozložení webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-191">The main benefit of master pages is that the site's overall appearance can be defined in a single location, thereby making it easy to update or tweak the site's layout.</span></span>

<span data-ttu-id="4d9bf-192">[![přidat hlavní stránku s názvem site. Master na web](an-overview-of-forms-authentication-cs/_static/image6.png)](an-overview-of-forms-authentication-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-192">[![Add a Master Page Named Site.master to the Website](an-overview-of-forms-authentication-cs/_static/image6.png)](an-overview-of-forms-authentication-cs/_static/image5.png)</span></span>

<span data-ttu-id="4d9bf-193">**Obrázek 3**: Přidejte hlavní stránku s názvem site. Master na web ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-forms-authentication-cs/_static/image7.png)).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-193">**Figure 3**: Add a Master Page Named Site.master to the Website ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image7.png))</span></span>

<span data-ttu-id="4d9bf-194">Na stránce předlohy definujte rozložení stránky na úrovni webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-194">Define the site-wide page layout here in the master page.</span></span> <span data-ttu-id="4d9bf-195">Můžete použít zobrazení Návrh a přidat libovolné rozložení nebo webové ovládací prvky, které potřebujete, nebo můžete ručně přidat značky v zobrazení zdroje.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-195">You can use the Design view and add whatever Layout or Web controls you need, or you can manually add the markup by hand in the Source view.</span></span> <span data-ttu-id="4d9bf-196">Rozčleněním rozložení stránky předlohy je napodobované rozložení používané v *[rámci práce s daty v řadě kurzů ASP.NET 2,0](../../data-access/index.md)* (viz obrázek 4).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-196">I structured my master page's layout to mimic the layout used in my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series (see Figure 4).</span></span> <span data-ttu-id="4d9bf-197">Stránka předlohy používá [kaskádové šablony stylů](http://www.w3schools.com/css/default.asp) pro umisťování a styly s nastaveními CSS definovanými v souboru Style. CSS (který je zahrnutý v tomto kurzu ke stažení).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-197">The master page uses [cascading style sheets](http://www.w3schools.com/css/default.asp) for positioning and styles with the CSS settings defined in the file Style.css (which is included in this tutorial's associated download).</span></span> <span data-ttu-id="4d9bf-198">I když nemůžete říct od značky níže, jsou definována pravidla šablony stylů CSS tak, aby byl obsah navigace &lt;div&gt;je naprosto umístěný tak, aby se zobrazil vlevo a měla pevnou šířku 200 pixelů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-198">While you cannot tell from the markup shown below, the CSS rules are defined such that the navigation &lt;div&gt;'s content is absolutely positioned so that it appears on the left and has a fixed width of 200 pixels.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample1.aspx)]

<span data-ttu-id="4d9bf-199">Stránka předlohy definuje rozložení statické stránky i oblasti, které lze upravit pomocí stránek ASP.NET, které používají stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-199">A master page defines both the static page layout and the regions that can be edited by the ASP.NET pages that use the master page.</span></span> <span data-ttu-id="4d9bf-200">Tyto upravitelné oblasti obsahu jsou označeny ovládacím prvkem `ContentPlaceHolder`, který se může zobrazit v obsahu &lt;div&gt;.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-200">These content editable regions are indicated by the `ContentPlaceHolder` control, which can be seen within the content &lt;div&gt;.</span></span> <span data-ttu-id="4d9bf-201">Naše stránka předlohy obsahuje jeden `ContentPlaceHolder` (MainContent), ale stránka předlohy může mít několik prvků ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-201">Our master page has a single `ContentPlaceHolder` (MainContent), but master page's may have multiple ContentPlaceHolders.</span></span>

<span data-ttu-id="4d9bf-202">Pomocí značky uvedeného výše se přepíná na zobrazení Návrh zobrazuje rozložení stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-202">With the markup entered above, switching to the Design view shows the master page's layout.</span></span> <span data-ttu-id="4d9bf-203">Všechny stránky ASP.NET, které používají tuto stránku předlohy, budou mít jednotné rozložení s možností zadat značku `MainContent` oblasti.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-203">Any ASP.NET pages that use this master page will have this uniform layout, with the ability to specify the markup for the `MainContent` region.</span></span>

<span data-ttu-id="4d9bf-204">[![stránku předlohy při prohlížení v návrhovém zobrazení](an-overview-of-forms-authentication-cs/_static/image9.png)](an-overview-of-forms-authentication-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-204">[![The Master Page, When Viewed Through the Design View](an-overview-of-forms-authentication-cs/_static/image9.png)](an-overview-of-forms-authentication-cs/_static/image8.png)</span></span>

<span data-ttu-id="4d9bf-205">**Obrázek 4**: stránka předloha při zobrazení v návrhovém zobrazení ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-forms-authentication-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="4d9bf-205">**Figure 4**: The Master Page, When Viewed Through the Design View ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image10.png))</span></span>

### <a name="creating-content-pages"></a><span data-ttu-id="4d9bf-206">Vytváření stránek obsahu</span><span class="sxs-lookup"><span data-stu-id="4d9bf-206">Creating Content Pages</span></span>

<span data-ttu-id="4d9bf-207">V tomto okamžiku máme stránku Default. aspx na našem webu, ale nepoužíváme tu stránku předlohy, kterou jsme právě vytvořili.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-207">At this point we have a Default.aspx page in our website, but it does not use the master page we just created.</span></span> <span data-ttu-id="4d9bf-208">I když je možné manipulovat s deklarativním označením webové stránky, aby používala stránku předlohy, pokud stránka ještě neobsahuje žádný obsah, je snazší ji jednoduše odstranit a znovu přidat do projektu a zadat hlavní stránku, která se má použít.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-208">While it is possible to manipulate the declarative markup of a web page to use a master page, if the page doesn't contain any content yet it is easier to just delete the page and re-add it to the project, specifying the master page to use.</span></span> <span data-ttu-id="4d9bf-209">Proto začněte odstraněním default. aspx z projektu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-209">Therefore, start by deleting Default.aspx from the project.</span></span>

<span data-ttu-id="4d9bf-210">Potom klikněte pravým tlačítkem myši na název projektu v Průzkumník řešení a vyberte možnost Přidat nový webový formulář s názvem default. aspx.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-210">Next, right-click on the project name in the Solution Explorer and choose to add a new Web Form named Default.aspx.</span></span> <span data-ttu-id="4d9bf-211">Tentokrát zaškrtněte políčko "vybrat hlavní stránku" a ze seznamu zvolte stránku předloha lokality. Master.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-211">This time, check the "Select master page" checkbox and choose the Site.master master page from the list.</span></span>

<span data-ttu-id="4d9bf-212">[![přidat novou stránku Default. aspx, která umožňuje výběr stránky předlohy](an-overview-of-forms-authentication-cs/_static/image12.png)](an-overview-of-forms-authentication-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-212">[![Add a New Default.aspx Page Choosing to Select a Master Page](an-overview-of-forms-authentication-cs/_static/image12.png)](an-overview-of-forms-authentication-cs/_static/image11.png)</span></span>

<span data-ttu-id="4d9bf-213">**Obrázek 5**: přidejte novou stránku Default. aspx, kterou zvolíte pro výběr stránky předlohy ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-forms-authentication-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-213">**Figure 5**: Add a New Default.aspx Page Choosing to Select a Master Page ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image13.png))</span></span>

![Použití stránky předlohy Web. Master](an-overview-of-forms-authentication-cs/_static/image14.png)

<span data-ttu-id="4d9bf-215">**Obrázek 6**: použití hlavní stránky site. Master</span><span class="sxs-lookup"><span data-stu-id="4d9bf-215">**Figure 6**: Use the Site.master Master Page</span></span>

> [!NOTE]
> <span data-ttu-id="4d9bf-216">Pokud používáte model projektu webové aplikace, dialogové okno Přidat novou položku nezahrnuje zaškrtávací políčko vybrat hlavní stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-216">If you are using the Web Application Project Model the Add New Item dialog box does not include a "Select master page" checkbox.</span></span> <span data-ttu-id="4d9bf-217">Místo toho je nutné přidat položku typu formulář webového obsahu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-217">Instead, you need to add an item of type "Web Content Form."</span></span> <span data-ttu-id="4d9bf-218">Po výběru možnosti formulář webového obsahu a kliknutí na tlačítko Přidat se v aplikaci Visual Studio zobrazí stejné dialogové okno pro výběr předlohy zobrazené na obrázku 6.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-218">After choosing the "Web Content Form" option and clicking Add, Visual Studio will display the same Select a Master dialog box shown in Figure 6.</span></span>

<span data-ttu-id="4d9bf-219">Nové deklarativní označení stránky default. aspx zahrnuje pouze direktivu @Page určující cestu k souboru hlavní stránky a ovládací prvek obsahu pro MainContent ContentPlaceHolder stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-219">The new Default.aspx page's declarative markup includes just a @Page directive specifying the path to the master page file and a Content control for the master page's MainContent ContentPlaceHolder.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample2.aspx)]

<span data-ttu-id="4d9bf-220">Prozatím ponechejte default. aspx prázdnou.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-220">For now, leave Default.aspx empty.</span></span> <span data-ttu-id="4d9bf-221">Později v tomto kurzu se vrátíme k přidání obsahu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-221">We will return to it later in this tutorial to add content.</span></span>

> [!NOTE]
> <span data-ttu-id="4d9bf-222">Naše stránka předlohy obsahuje oddíl nabídky nebo nějaké jiné navigační rozhraní.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-222">Our master page includes a section for a menu or some other navigation interface.</span></span> <span data-ttu-id="4d9bf-223">V budoucím kurzu vytvoříme takové rozhraní.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-223">We will create such an interface in a future tutorial.</span></span>

## <a name="step-2-enabling-forms-authentication"></a><span data-ttu-id="4d9bf-224">Krok 2: povolení ověřování formulářů</span><span class="sxs-lookup"><span data-stu-id="4d9bf-224">Step 2: Enabling Forms Authentication</span></span>

<span data-ttu-id="4d9bf-225">Při vytvoření webu ASP.NET je dalším úkolem povolit ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-225">With the ASP.NET website created, our next task is to enable forms authentication.</span></span> <span data-ttu-id="4d9bf-226">Konfigurace ověřování aplikace je určena prostřednictvím [elementu`<authentication>`](https://msdn.microsoft.com/library/532aee0e.aspx) v souboru Web. config. Element `<authentication>` obsahuje jeden atribut s názvem Mode, který určuje model ověřování používaný aplikací.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-226">The application's authentication configuration is specified through the [`<authentication>` element](https://msdn.microsoft.com/library/532aee0e.aspx) in Web.config. The `<authentication>` element contains a single attribute named mode that specifies the authentication model used by the application.</span></span> <span data-ttu-id="4d9bf-227">Tento atribut může mít jednu z následujících čtyř hodnot:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-227">This attribute can have one of the following four values:</span></span>

- <span data-ttu-id="4d9bf-228">**Windows** – jak je popsáno v předchozím kurzu, když aplikace používá ověřování systému Windows, je to zodpovědnost webového serveru za účelem ověření návštěvníka a obvykle se provádí prostřednictvím základního ověřování systému Windows, Digest nebo integrovaného ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-228">**Windows** – as discussed in the preceding tutorial, when an application uses Windows authentication it is the web server's responsibility to authenticate the visitor, and this is usually done through Basic, Digest, or Integrated Windows authentication.</span></span>
- <span data-ttu-id="4d9bf-229">**Formuláře**– uživatelé se ověřují prostřednictvím formuláře na webové stránce.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-229">**Forms**– users are authenticated via a form on a web page.</span></span>
- <span data-ttu-id="4d9bf-230">**Passport**– uživatelé se ověřují pomocí sítě služby Passport společnosti Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-230">**Passport**– users are authenticated using Microsoft's Passport Network.</span></span>
- <span data-ttu-id="4d9bf-231">**Žádné**– nepoužívá se žádný ověřovací model; Všichni návštěvníci jsou anonymní.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-231">**None**– no authentication model is used; all visitors are anonymous.</span></span>

<span data-ttu-id="4d9bf-232">Ve výchozím nastavení používají aplikace ASP.NET ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-232">By default, ASP.NET applications use Windows authentication.</span></span> <span data-ttu-id="4d9bf-233">Chcete-li změnit typ ověřování na ověřování typu Forms, je nutné upravit atribut mode elementu `<authentication>` na Forms.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-233">To change the authentication type to forms authentication, then, we need to modify the `<authentication>` element's mode attribute to Forms.</span></span>

<span data-ttu-id="4d9bf-234">Pokud projekt ještě neobsahuje soubor Web. config, přidejte jej nyní kliknutím pravým tlačítkem myši na název projektu v Průzkumník řešení, zvolíte příkaz Přidat novou položku a poté přidáte konfigurační soubor webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-234">If your project does not yet contain a Web.config file, add one now by right-clicking on the project name in the Solution Explorer, choosing Add New Item, and then adding a Web Configuration file.</span></span>

<span data-ttu-id="4d9bf-235">[![Pokud projekt ještě neobsahuje Web. config, přidejte ho teď](an-overview-of-forms-authentication-cs/_static/image16.png)](an-overview-of-forms-authentication-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-235">[![If Your Project Does Not Yet Include Web.config, Add It Now](an-overview-of-forms-authentication-cs/_static/image16.png)](an-overview-of-forms-authentication-cs/_static/image15.png)</span></span>

<span data-ttu-id="4d9bf-236">**Obrázek 7**: Pokud projekt ještě neobsahuje Web. config, přidejte ho hned ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-forms-authentication-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-236">**Figure 7**: If Your Project Does Not Yet Include Web.config, Add It Now ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image17.png))</span></span>

<span data-ttu-id="4d9bf-237">Dále vyhledejte prvek `<authentication>` a aktualizujte ho, aby bylo možné používat ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-237">Next, locate the `<authentication>` element and update it to use forms authentication.</span></span> <span data-ttu-id="4d9bf-238">Po této změně by kód souboru Web. config měl vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-238">After this change, your Web.config file's markup should look similar to the following:</span></span>

[!code-xml[Main](an-overview-of-forms-authentication-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="4d9bf-239">Vzhledem k tomu, že web. config je soubor XML, je důležité velká a malá písmena.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-239">Since Web.config is an XML file, casing is important.</span></span> <span data-ttu-id="4d9bf-240">Ujistěte se, že jste nastavili atribut Mode na Forms s velkým písmenem "F".</span><span class="sxs-lookup"><span data-stu-id="4d9bf-240">Make sure that you set the mode attribute to Forms, with a capital "F".</span></span> <span data-ttu-id="4d9bf-241">Pokud používáte jiná velká a malá písmena, například "Forms", obdržíte chybu konfigurace při návštěvě webu prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-241">If you use a different casing, such as "forms", you'll receive a configuration error when visiting the site through a browser.</span></span>

<span data-ttu-id="4d9bf-242">Element `<authentication>` může volitelně zahrnovat `<forms>` podřízený prvek, který obsahuje nastavení specifická pro ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-242">The `<authentication>` element may optionally include a `<forms>` child element that contains forms authentication-specific settings.</span></span> <span data-ttu-id="4d9bf-243">Teď používáme jenom výchozí nastavení ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-243">For now, let's just use the default forms authentication settings.</span></span> <span data-ttu-id="4d9bf-244">V dalším kurzu budeme prozkoumat `<forms>` podřízený element podrobněji.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-244">We will explore the `<forms>` child element in more detail in the next tutorial.</span></span>

## <a name="step-3-building-the-login-page"></a><span data-ttu-id="4d9bf-245">Krok 3: vytvoření přihlašovací stránky</span><span class="sxs-lookup"><span data-stu-id="4d9bf-245">Step 3: Building the Login Page</span></span>

<span data-ttu-id="4d9bf-246">Aby bylo možné podporovat ověřování pomocí formulářů, náš web potřebuje přihlašovací stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-246">In order to support forms authentication our website needs a login page.</span></span> <span data-ttu-id="4d9bf-247">Jak je popsáno v části princip pracovního postupu pro ověřování pomocí formulářů, `FormsAuthenticationModule` automaticky přesměruje uživatele na přihlašovací stránku, pokud se pokusí získat přístup ke stránce, které nemají oprávnění k zobrazení.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-247">As discussed in the "Understanding the Forms Authentication Workflow" section, the `FormsAuthenticationModule` will automatically redirect the user to the login page if they attempt to access a page that they are not authorized to view.</span></span> <span data-ttu-id="4d9bf-248">K dispozici jsou také ASP.NET webové ovládací prvky, které zobrazí odkaz na přihlašovací stránku pro anonymní uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-248">There are also ASP.NET Web controls that will display a link to the login page to anonymous users.</span></span> <span data-ttu-id="4d9bf-249">Tím begs otázku "Jaká je adresa URL přihlašovací stránky?"</span><span class="sxs-lookup"><span data-stu-id="4d9bf-249">This begs the question, "What is the URL of the login page?"</span></span>

<span data-ttu-id="4d9bf-250">Ve výchozím nastavení systém ověřování pomocí formulářů očekává, že přihlašovací stránka bude pojmenována Login. aspx a umístí se do kořenového adresáře webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-250">By default, the forms authentication system expects the login page to be named Login.aspx and placed in the root directory of the web application.</span></span> <span data-ttu-id="4d9bf-251">Pokud chcete použít jinou adresu URL přihlašovací stránky, můžete to udělat tak, že ji zadáte v souboru Web. config. V dalším kurzu se dozvíte, jak to udělat.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-251">If you want to use a different login page URL, you can do so by specifying it in Web.config. We will see how to do this in the subsequent tutorial.</span></span>

<span data-ttu-id="4d9bf-252">Přihlašovací stránka má tři zodpovědnosti:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-252">The login page has three responsibilities:</span></span>

1. <span data-ttu-id="4d9bf-253">Zadejte rozhraní, které návštěvníkovi umožňuje zadat své přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-253">Provide an interface that allows the visitor to enter their credentials.</span></span>
2. <span data-ttu-id="4d9bf-254">Určete, jestli jsou odeslaná pověření platná.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-254">Determine if the submitted credentials are valid.</span></span>
3. <span data-ttu-id="4d9bf-255">Přihlaste se k uživateli vytvořením lístku pro ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-255">"Log in" the user by creating the forms authentication ticket.</span></span>

### <a name="creating-the-login-pages-user-interface"></a><span data-ttu-id="4d9bf-256">Vytvoření uživatelského rozhraní přihlašovací stránky</span><span class="sxs-lookup"><span data-stu-id="4d9bf-256">Creating the Login Page's User Interface</span></span>

<span data-ttu-id="4d9bf-257">Pojďme začít s prvním úkolem.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-257">Let's get started with the first task.</span></span> <span data-ttu-id="4d9bf-258">Přidejte novou stránku ASP.NET do kořenového adresáře lokality s názvem Login. aspx a přidružte ji k hlavní stránce site. Master.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-258">Add a new ASP.NET page to the site's root directory named Login.aspx and associate it with the Site.master master page.</span></span>

<span data-ttu-id="4d9bf-259">[![přidat novou stránku ASP.NET s názvem Login. aspx](an-overview-of-forms-authentication-cs/_static/image19.png)](an-overview-of-forms-authentication-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-259">[![Add a New ASP.NET Page Named Login.aspx](an-overview-of-forms-authentication-cs/_static/image19.png)](an-overview-of-forms-authentication-cs/_static/image18.png)</span></span>

<span data-ttu-id="4d9bf-260">**Obrázek 8**: přidejte novou stránku ASP.NET s názvem Login. aspx ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-forms-authentication-cs/_static/image20.png)).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-260">**Figure 8**: Add a New ASP.NET Page Named Login.aspx ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image20.png))</span></span>

<span data-ttu-id="4d9bf-261">Typické rozhraní přihlašovací stránky se skládá ze dvou textových polí – jednu pro jméno uživatele, jednu pro heslo – a tlačítko pro odeslání formuláře.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-261">The typical login page interface consists of two textboxes – one for the user's name, one for their password – and a button to submit the form.</span></span> <span data-ttu-id="4d9bf-262">Websites často obsahují zaškrtávací políčko "zapamatovatelné", které pokud je zaškrtnuto, uchovává výsledný ověřovací lístek v rámci restartování prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-262">Websites oftentimes include a "Remember me" checkbox that, if checked, persists the resulting authentication ticket across browser restarts.</span></span>

<span data-ttu-id="4d9bf-263">Přidejte dvě textová pole do souboru Login. aspx a nastavte jejich `ID` vlastnosti na uživatelské jméno a heslo (v uvedeném pořadí).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-263">Add two TextBoxes to Login.aspx and set their `ID` properties to UserName and Password, respectively.</span></span> <span data-ttu-id="4d9bf-264">Nastavte také vlastnost `TextMode` hesla na heslo.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-264">Also set Password's `TextMode` property to Password.</span></span> <span data-ttu-id="4d9bf-265">Dále přidejte ovládací prvek CheckBox, nastavením jeho `ID` vlastností na RememberMe a jeho vlastnost `Text` na "zapamatování".</span><span class="sxs-lookup"><span data-stu-id="4d9bf-265">Next, add a CheckBox control, setting its `ID` property to RememberMe and its `Text` property to "Remember Me".</span></span> <span data-ttu-id="4d9bf-266">Za tímto účelem přidejte tlačítko s názvem LoginButton, jehož vlastnost `Text` je nastavena na "login".</span><span class="sxs-lookup"><span data-stu-id="4d9bf-266">Following that, add a Button named LoginButton whose `Text` property is set to "Login".</span></span> <span data-ttu-id="4d9bf-267">A nakonec přidejte ovládací prvek web Label a nastavte jeho vlastnost `ID` na InvalidCredentialsMessage, jeho vlastnost `Text` na "uživatelské jméno nebo heslo je neplatné.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-267">And finally, add a Label Web control and set its `ID` property to InvalidCredentialsMessage, its `Text` property to "Your username or password is invalid.</span></span> <span data-ttu-id="4d9bf-268">Zkuste to prosím znovu. ", jeho vlastnost `ForeColor` na červenou a vlastnost `Visible` na false.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-268">Please try again.", its `ForeColor` property to Red, and its `Visible` property to False.</span></span>

<span data-ttu-id="4d9bf-269">V tuto chvíli by vaše obrazovka měla vypadat podobně jako snímek obrazovky na obrázku 9 a deklarativní syntaxe stránky by měla vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-269">At this point your screen should look similar to the screen shot in Figure 9, and your page's declarative syntax should like the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample4.aspx)]

<span data-ttu-id="4d9bf-270">[![přihlašovací stránka obsahuje dvě textová pole, zaškrtávací políčko, tlačítko a popisek.](an-overview-of-forms-authentication-cs/_static/image22.png)](an-overview-of-forms-authentication-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-270">[![The Login Page Contains Two TextBoxes, a CheckBox, a Button, and a Label](an-overview-of-forms-authentication-cs/_static/image22.png)](an-overview-of-forms-authentication-cs/_static/image21.png)</span></span>

<span data-ttu-id="4d9bf-271">**Obrázek 9**: přihlašovací stránka obsahuje dvě textová pole, zaškrtávací políčko, tlačítko a popisek ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-forms-authentication-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-271">**Figure 9**: The Login Page Contains Two TextBoxes, a CheckBox, a Button, and a Label ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image23.png))</span></span>

<span data-ttu-id="4d9bf-272">Nakonec vytvořte obslužnou rutinu události pro událost kliknutí LoginButton.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-272">Finally, create an event handler for the LoginButton's Click event.</span></span> <span data-ttu-id="4d9bf-273">V Návrháři stačí dvakrát kliknout na ovládací prvek tlačítko a vytvořit tuto obslužnou rutinu události.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-273">From the Designer, simply double-click the Button control to create this event handler.</span></span>

### <a name="determining-if-the-supplied-credentials-are-valid"></a><span data-ttu-id="4d9bf-274">Určení, zda jsou zadaná pověření platná</span><span class="sxs-lookup"><span data-stu-id="4d9bf-274">Determining If the Supplied Credentials are Valid</span></span>

<span data-ttu-id="4d9bf-275">Nyní je nutné implementovat úlohu 2 v obslužné rutině události kliknutí na tlačítko – určete, zda jsou zadaná pověření platná.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-275">We now need to implement task 2 in the Button's Click event handler – determining whether the supplied credentials are valid.</span></span> <span data-ttu-id="4d9bf-276">Aby to bylo možné, musí být úložiště uživatele, které obsahuje všechna pověření uživatelů, aby bylo možné určit, jestli zadané přihlašovací údaje odpovídají všem známým přihlašovacím údajům.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-276">In order to do this there needs to be a user store that holds all of the users' credentials so that we can determine if the supplied credentials match up with any known credentials.</span></span>

<span data-ttu-id="4d9bf-277">Před ASP.NET 2,0 byly vývojáři odpovědni za implementaci jejich vlastních uživatelských úložišť a psaní kódu pro ověření zadaných přihlašovacích údajů proti obchodu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-277">Prior to ASP.NET 2.0, developers were responsible for implementing both their own user stores and writing the code to validate the supplied credentials against the store.</span></span> <span data-ttu-id="4d9bf-278">Většina vývojářů implementuje úložiště uživatele v databázi a vytvoří tabulku s názvem uživatelé se sloupci, jako je uživatelské jméno, heslo, E-mail, LastLoginDate a tak dále.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-278">Most developers would implement the user store in a database, creating a table named Users with columns like UserName, Password, Email, LastLoginDate, and so forth.</span></span> <span data-ttu-id="4d9bf-279">Tato tabulka bude mít jeden záznam na uživatelský účet.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-279">This table, then, would have one record per user account.</span></span> <span data-ttu-id="4d9bf-280">Ověření přihlašovacích údajů zadaných uživatelem by vyžadovalo dotazování databáze na odpovídající uživatelské jméno a pak zajisti, že heslo v databázi odpovídá zadanému heslu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-280">Verifying a user's supplied credentials would involve querying the database for a matching username and then ensuring that the password in the database corresponded to the supplied password.</span></span>

<span data-ttu-id="4d9bf-281">S ASP.NET 2,0 by měli vývojáři použít jednoho poskytovatele členství pro správu úložiště uživatelů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-281">With ASP.NET 2.0, developers should use one of the Membership providers to manage the user store.</span></span> <span data-ttu-id="4d9bf-282">V této sérii kurzů budeme používat SqlMembershipProvider, který používá databázi SQL Server pro úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-282">In this tutorial series we will be using the SqlMembershipProvider, which uses a SQL Server database for the user store.</span></span> <span data-ttu-id="4d9bf-283">Při použití SqlMembershipProvider musíme implementovat konkrétní schéma databáze, které zahrnuje tabulky, zobrazení a uložené procedury očekávané zprostředkovatelem.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-283">When using the SqlMembershipProvider we need to implement a specific database schema that includes the tables, views, and stored procedures expected by the provider.</span></span> <span data-ttu-id="4d9bf-284">Podíváme se, jak toto schéma implementovat v rámci ***vytváření schématu členství v SQL Server*** kurzu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-284">We will examine how to implement this schema in the ***Creating the Membership Schema in SQL Server*** tutorial.</span></span> <span data-ttu-id="4d9bf-285">Se zprostředkovatelem členství na místě je ověření přihlašovacích údajů uživatele jednoduché jako volání [metody ValidateUser (*username*, *Password*)](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx) [třídy členství](https://msdn.microsoft.com/library/system.web.security.membership.aspx), která vrací logickou hodnotu označující, zda je kombinace *uživatelského jména* a *hesla* k displatnosti.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-285">With the Membership provider in place, validating the user's credentials is as simple as calling the [Membership class](https://msdn.microsoft.com/library/system.web.security.membership.aspx)'s [ValidateUser(*username*, *password*) method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx), which returns a Boolean value indicating whether the validity of the *username* and *password* combination.</span></span> <span data-ttu-id="4d9bf-286">Prohlížíme si, že ještě jsme neimplementovali úložiště uživatelů SqlMembershipProvider, ale v tuto chvíli nemůžeme použít metodu ValidateUser třídy členství.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-286">Seeing as we have not yet implemented the SqlMembershipProvider's user store, we cannot use the Membership class's ValidateUser method at this time.</span></span>

<span data-ttu-id="4d9bf-287">Místo toho, abyste si vybrali vlastní tabulku databáze vlastní uživatelé (která by byla zastaralá, jakmile jsme implementovali SqlMembershipProvider), pojďme místo toho zadat platné přihlašovací údaje v rámci samotné přihlašovací stránky.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-287">Rather than take the time to build our own custom Users database table (which would be obsolete once we implemented the SqlMembershipProvider), let's instead hard-code the valid credentials within the login page itself.</span></span> <span data-ttu-id="4d9bf-288">Do obslužné rutiny události kliknutí na LoginButton přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-288">In the LoginButton's Click event handler, add the following code:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample5.cs)]

<span data-ttu-id="4d9bf-289">Jak vidíte, existují tři platné uživatelské účty – Scott, Jisun a Sam – a všechny tři mají stejné heslo ("heslo").</span><span class="sxs-lookup"><span data-stu-id="4d9bf-289">As you can see, there are three valid user accounts – Scott, Jisun, and Sam – and all three have the same password ("password").</span></span> <span data-ttu-id="4d9bf-290">Kód zachází pomocí polí uživatelé a hesla, kde se shodují platné uživatelské jméno a heslo.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-290">The code loops through the users and passwords arrays looking for a valid username and password match.</span></span> <span data-ttu-id="4d9bf-291">Pokud jsou uživatelské jméno i heslo platné, musíme uživatele přihlašovat a pak je přesměrovat na příslušnou stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-291">If both the username and password are valid, we need to login the user and then redirect them to the appropriate page.</span></span> <span data-ttu-id="4d9bf-292">Pokud pověření nejsou platná, zobrazí se popisek InvalidCredentialsMessage.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-292">If the credentials are invalid, then we display the InvalidCredentialsMessage Label.</span></span>

<span data-ttu-id="4d9bf-293">Když uživatel zadá platné přihlašovací údaje, uvedli jsme, že jsou pak přesměrováni na příslušnou stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-293">When a user enters valid credentials, I mentioned that they are then redirected to the "appropriate page."</span></span> <span data-ttu-id="4d9bf-294">Jakou stránku i to je vhodné?</span><span class="sxs-lookup"><span data-stu-id="4d9bf-294">What is the appropriate page, though?</span></span> <span data-ttu-id="4d9bf-295">Odvolá se, když uživatel navštíví stránku, které nemají oprávnění k zobrazení, FormsAuthenticationModule je automaticky přesměruje na přihlašovací stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-295">Recall that when a user visits a page they are not authorized to view, the FormsAuthenticationModule automatically redirects them to the login page.</span></span> <span data-ttu-id="4d9bf-296">V takovém případě zahrnuje požadovanou adresu URL v řetězci QueryString prostřednictvím parametru ReturnUrl.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-296">In doing so, it includes the requested URL in the querystring via the ReturnUrl parameter.</span></span> <span data-ttu-id="4d9bf-297">To znamená, že pokud se uživatel pokusil navštívit ProtectedPage. aspx a že k tomu nebyli oprávněni, FormsAuthenticationModule je přesměruje na:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-297">That is, if a user attempted to visit ProtectedPage.aspx, and they were not authorized to do so, the FormsAuthenticationModule would redirect them to:</span></span>

<span data-ttu-id="4d9bf-298">Login.aspx?ReturnUrl=ProtectedPage.aspx</span><span class="sxs-lookup"><span data-stu-id="4d9bf-298">Login.aspx?ReturnUrl=ProtectedPage.aspx</span></span>

<span data-ttu-id="4d9bf-299">Po úspěšném přihlášení by uživatel měl být přesměrován zpět na ProtectedPage. aspx.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-299">Upon successfully logging in, the user should be redirected back to ProtectedPage.aspx.</span></span> <span data-ttu-id="4d9bf-300">Případně můžou uživatelé navštívit přihlašovací stránku na vlastní Volition.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-300">Alternatively, users may visit the login page on their own volition.</span></span> <span data-ttu-id="4d9bf-301">V takovém případě se po přihlášení uživatele musí odeslat na stránku Default. aspx kořenové složky.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-301">In that case, after logging in the user they should be sent to the root folder's Default.aspx page.</span></span>

### <a name="logging-in-the-user"></a><span data-ttu-id="4d9bf-302">Přihlášení uživatele</span><span class="sxs-lookup"><span data-stu-id="4d9bf-302">Logging In the User</span></span>

<span data-ttu-id="4d9bf-303">Za předpokladu, že zadané přihlašovací údaje jsou platné, musíme vytvořit lístek ověřování pomocí formulářů, a tím přihlašovat uživatele k webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-303">Assuming that the supplied credentials are valid, we need to create a forms authentication ticket, thereby logging in the user to the site.</span></span> <span data-ttu-id="4d9bf-304">[Třída FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthentication.aspx) v [oboru názvů System. Web. Security](https://msdn.microsoft.com/library/system.web.security.aspx) poskytuje metody pro přihlašování a odhlašování uživatelů prostřednictvím systému ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-304">The [FormsAuthentication class](https://msdn.microsoft.com/library/system.web.security.formsauthentication.aspx) in the [System.Web.Security namespace](https://msdn.microsoft.com/library/system.web.security.aspx) provides assorted methods for logging in and logging out users via the forms authentication system.</span></span> <span data-ttu-id="4d9bf-305">I když existuje několik metod ve třídě FormsAuthentication, zajímá Vás tři tyto situaci:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-305">While there are several methods in the FormsAuthentication class, the three we are interested in at this juncture are:</span></span>

- <span data-ttu-id="4d9bf-306">[GetAuthCookie (*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.getauthcookie.aspx) – vytvoří lístek pro ověřování pomocí formulářů pro zadané jméno *uživatele*.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-306">[GetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.getauthcookie.aspx) – creates a forms authentication ticket for the supplied name *username*.</span></span> <span data-ttu-id="4d9bf-307">Dále tato metoda vytvoří a vrátí objekt HttpCookie, který obsahuje obsah ověřovacího lístku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-307">Next, this method creates and returns an HttpCookie object that holds the contents of the authentication ticket.</span></span> <span data-ttu-id="4d9bf-308">Pokud má *persistCookie* hodnotu true, vytvoří se trvalý soubor cookie.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-308">If *persistCookie* is true, a persistent cookie is created.</span></span>
- <span data-ttu-id="4d9bf-309">[SetAuthCookie (*username*; *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) – zavolá metodu GetAuthCookie (*username*, *persistCookie*), která vygeneruje soubor cookie pro ověřování formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-309">[SetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) – calls the GetAuthCookie(*username*, *persistCookie*) method to generate the forms authentication cookie.</span></span> <span data-ttu-id="4d9bf-310">Tato metoda pak přidá soubor cookie vrácený GetAuthCookie do kolekce cookies (předpokládá se, že se používá ověřování pomocí formulářů založených na souborech cookie). jinak tato metoda volá interní třídu, která zpracovává logiku lístku bez souborů cookie).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-310">This method then adds the cookie returned by GetAuthCookie to the Cookies collection (assuming cookies-based forms authentication is being used; otherwise, this method calls an internal class that handles the cookieless ticket logic).</span></span>
- <span data-ttu-id="4d9bf-311">[RedirectFromLoginPage (*username*; *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.redirectfromloginpage.aspx) – Tato metoda volá SetAuthCookie (*username*, *persistCookie*) a pak přesměruje uživatele na příslušnou stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-311">[RedirectFromLoginPage(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.redirectfromloginpage.aspx) – this method calls SetAuthCookie(*username*, *persistCookie*), and then redirects the user to the appropriate page.</span></span>

<span data-ttu-id="4d9bf-312">GetAuthCookie je užitečné v případě, že před zápisem souboru cookie do kolekce souborů cookie potřebujete změnit ověřovací lístek.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-312">GetAuthCookie is handy when you need to modify the authentication ticket before writing the cookie out to the Cookies collection.</span></span> <span data-ttu-id="4d9bf-313">SetAuthCookie je užitečné, pokud chcete vytvořit ověřovací lístek pro formuláře a přidat ho do kolekce souborů cookie, ale nechcete uživatele přesměrovat na příslušnou stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-313">SetAuthCookie is useful if you want to create the forms authentication ticket and add it to the Cookies collection, but do not want to redirect the user to the appropriate page.</span></span> <span data-ttu-id="4d9bf-314">Možná byste je chtěli ponechat na přihlašovací stránce nebo je odeslat na jinou stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-314">Perhaps you want to keep them on the login page or send them to some alternate page.</span></span>

<span data-ttu-id="4d9bf-315">Vzhledem k tomu, že chceme uživatele přihlašovat a přesměrovat je na příslušnou stránku, použijte RedirectFromLoginPage.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-315">Since we want to log in the user and redirect them to the appropriate page, let's use RedirectFromLoginPage.</span></span> <span data-ttu-id="4d9bf-316">Aktualizujte obslužnou rutinu události kliknutí na LoginButton a nahraďte dva řádky TODO s komentářem následujícím řádkem kódu:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-316">Update the LoginButton's Click event handler, replacing the two commented TODO lines with the following line of code:</span></span>

<span data-ttu-id="4d9bf-317">FormsAuthentication.RedirectFromLoginPage(UserName.Text, RememberMe.Checked);</span><span class="sxs-lookup"><span data-stu-id="4d9bf-317">FormsAuthentication.RedirectFromLoginPage(UserName.Text, RememberMe.Checked);</span></span>

<span data-ttu-id="4d9bf-318">Při vytváření lístku pro ověřování pomocí formulářů použijeme vlastnost text uživatelského jména pro parametr *username* lístku Forms pro ověřování a zaškrtnuté políčko RememberMe pro parametr *persistCookie* .</span><span class="sxs-lookup"><span data-stu-id="4d9bf-318">When creating the forms authentication ticket we use the UserName TextBox's Text property for the forms authentication ticket *username* parameter, and the checked state of the RememberMe CheckBox for the *persistCookie* parameter.</span></span>

<span data-ttu-id="4d9bf-319">Přihlašovací stránku otestujete tak, že ji navštívíte v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-319">To test the login page, visit it in a browser.</span></span> <span data-ttu-id="4d9bf-320">Začněte zadáním neplatných přihlašovacích údajů, jako je například uživatelské jméno "ne" a heslo "nesprávného".</span><span class="sxs-lookup"><span data-stu-id="4d9bf-320">Start by entering invalid credentials, such as a username of "Nope" and a password of "wrong".</span></span> <span data-ttu-id="4d9bf-321">Po kliknutí na tlačítko pro přihlášení dojde k postbacku a zobrazí se popisek InvalidCredentialsMessage.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-321">Upon clicking the Login button a postback will occur and the InvalidCredentialsMessage Label will be displayed.</span></span>

<span data-ttu-id="4d9bf-322">[![popisek InvalidCredentialsMessage se zobrazí při zadání neplatných přihlašovacích údajů.](an-overview-of-forms-authentication-cs/_static/image25.png)](an-overview-of-forms-authentication-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-322">[![The InvalidCredentialsMessage Label is Displayed When Entering Invalid Credentials](an-overview-of-forms-authentication-cs/_static/image25.png)](an-overview-of-forms-authentication-cs/_static/image24.png)</span></span>

<span data-ttu-id="4d9bf-323">**Obrázek 10**: popisek InvalidCredentialsMessage se zobrazí při zadání neplatných přihlašovacích údajů ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-forms-authentication-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-323">**Figure 10**: The InvalidCredentialsMessage Label is Displayed When Entering Invalid Credentials ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image26.png))</span></span>

<span data-ttu-id="4d9bf-324">Potom zadejte platné přihlašovací údaje a klikněte na tlačítko pro přihlášení.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-324">Next, enter valid credentials and click the Login button.</span></span> <span data-ttu-id="4d9bf-325">Tentokrát dojde k tomu, že se vytvoří lístek pro ověřování pomocí formulářů a automaticky se přesměruje zpátky na Default. aspx.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-325">This time when the postback occurs a forms authentication ticket is created and you are automatically redirected back to Default.aspx.</span></span> <span data-ttu-id="4d9bf-326">V tuto chvíli jste se přihlásili k webu, přestože neexistují žádná vizuální upozornění k tomu, abyste označili, že jste právě přihlášení.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-326">At this point you have logged in to the website, although there are no visual cues to indicate that you are currently logged in.</span></span> <span data-ttu-id="4d9bf-327">V kroku 4 se dozvíte, jak programově určit, jestli je uživatel přihlášený, a jak identifikovat uživatele, který stránku navštívil.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-327">In Step 4 we will see how to programmatically determine whether a user is logged in or not as well as how to identify the user visiting the page.</span></span>

<span data-ttu-id="4d9bf-328">Krok 5 prověřuje techniky pro protokolování uživatele z webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-328">Step 5 examines techniques for logging a user out of the website.</span></span>

### <a name="securing-the-login-page"></a><span data-ttu-id="4d9bf-329">Zabezpečení přihlašovací stránky</span><span class="sxs-lookup"><span data-stu-id="4d9bf-329">Securing the Login Page</span></span>

<span data-ttu-id="4d9bf-330">Když uživatel zadá své přihlašovací údaje a odešle formulář přihlašovací stránky, přihlašovací údaje – včetně jejího hesla – budou přenášeny přes Internet na webový server v *prostém textu*.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-330">When the user enters her credentials and submits the login page form, the credentials – including her password – are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="4d9bf-331">To znamená, že uživatelské jméno a heslo může sledovat jakýkoli počítačový podvodník, který bude sledovat síťový provoz.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-331">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="4d9bf-332">Aby k tomu nedocházelo, je nezbytné šifrovat síťový provoz pomocí [protokolu SSL (Secure Socket Layer)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-332">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="4d9bf-333">Tím se zajistí, že přihlašovací údaje (stejně jako kód HTML celé stránky) budou šifrovány od okamžiku, kdy prohlížeč opustí, dokud je webový server neobdrží.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-333">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>

<span data-ttu-id="4d9bf-334">Pokud váš web neobsahuje citlivé informace, budete na přihlašovací stránce potřebovat jenom SSL a na dalších stránkách, kde by se heslo uživatele jinak poslalo přes drát v prostém textu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-334">Unless your website contains sensitive information, you will only need to use SSL on the login page and on other pages where the user's password would otherwise be sent over the wire in plain text.</span></span> <span data-ttu-id="4d9bf-335">Nemusíte se starat o zabezpečení lístku pro ověřování pomocí formulářů, protože ve výchozím nastavení je šifrovaný i digitálně podepsaný (aby se zabránilo manipulaci).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-335">You do not need to worry about securing the forms authentication ticket since, by default, it is both encrypted and digitally signed (to prevent tampering).</span></span> <span data-ttu-id="4d9bf-336">Podrobnější diskuzi o zabezpečení lístku ověřování pomocí formulářů najdete v následujícím kurzu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-336">A more thorough discussion on forms authentication ticket security is presented in the following tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="4d9bf-337">Mnohé finanční a lékařské weby jsou nakonfigurovány na používání protokolu SSL na *všech* stránkách přístupných pro ověřené uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-337">Many financial and medical websites are configured to use SSL on *all* pages accessible to authenticated users.</span></span> <span data-ttu-id="4d9bf-338">Pokud vytváříte takový web, můžete nakonfigurovat systém ověřování pomocí formulářů, aby se ověřovací lístek pro formuláře přenesl jenom přes zabezpečené připojení.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-338">If you are building such a website you can configure the forms authentication system so that the forms authentication ticket is only transmitted over a secure connection.</span></span> <span data-ttu-id="4d9bf-339">V dalším kurzu se podíváme na různé možnosti konfigurace ověřování formulářů, *[konfiguraci ověřování formulářů a Pokročilá témata](forms-authentication-configuration-and-advanced-topics-cs.md)* .</span><span class="sxs-lookup"><span data-stu-id="4d9bf-339">We will look at the various forms authentication configuration options in the next tutorial, *[Forms Authentication Configuration and Advanced Topics](forms-authentication-configuration-and-advanced-topics-cs.md)*.</span></span>

## <a name="step-4-detecting-authenticated-visitors-and-determining-their-identity"></a><span data-ttu-id="4d9bf-340">Krok 4: zjištění ověřených návštěvníků a určení jejich identity</span><span class="sxs-lookup"><span data-stu-id="4d9bf-340">Step 4: Detecting Authenticated Visitors and Determining Their Identity</span></span>

<span data-ttu-id="4d9bf-341">V tuto chvíli jsme povolili ověřování pomocí formulářů a vytvořili přihlašovací stránku základní, ale ještě jsme prozkoumali, jak můžeme určit, jestli je uživatel ověřený nebo anonymní.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-341">At this point we have enabled forms authentication and created a rudimentary login page, but we have yet to examine how we can determine whether a user is authenticated or anonymous.</span></span> <span data-ttu-id="4d9bf-342">V některých scénářích můžeme zobrazit různá data nebo informace v závislosti na tom, jestli se stránka zobrazuje na stránce ověřeného nebo anonymního uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-342">In certain scenarios we may wish to display different data or information depending on whether an authenticated or anonymous user is visiting the page.</span></span> <span data-ttu-id="4d9bf-343">Kromě toho často potřebuje znát identitu ověřeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-343">Moreover, we oftentimes need to know the identity of the authenticated user.</span></span>

<span data-ttu-id="4d9bf-344">Pojďme rozrozšiřovat stávající stránku Default. aspx a tyto techniky ilustrovat.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-344">Let's augment the existing Default.aspx page to illustrate these techniques.</span></span> <span data-ttu-id="4d9bf-345">V části default. aspx přidejte dva ovládací prvky panelu, jednu s názvem AuthenticatedMessagePanel a další s názvem AnonymousMessagePanel.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-345">In Default.aspx add two Panel controls, one named AuthenticatedMessagePanel and another named AnonymousMessagePanel.</span></span> <span data-ttu-id="4d9bf-346">Do prvního panelu přidejte ovládací prvek popisek s názvem WelcomeBackMessage.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-346">Add a Label control named WelcomeBackMessage in the first Panel.</span></span> <span data-ttu-id="4d9bf-347">Na druhém panelu přidejte ovládací prvek hypertextový odkaz, nastavte jeho vlastnost text na "přihlásit se" a jeho vlastnost NavigateUrl na ~/Login.aspx.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-347">In the second Panel add a HyperLink control, set its Text property to "Log In" and its NavigateUrl property to "~/Login.aspx".</span></span> <span data-ttu-id="4d9bf-348">V tomto okamžiku by deklarativní označení pro default. aspx mělo vypadat podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-348">At this point the declarative markup for Default.aspx should look similar to the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample6.aspx)]

<span data-ttu-id="4d9bf-349">Jak už jste to vyodhadli teď, tady je postup, jak zobrazit AuthenticatedMessagePanel jenom pro ověřené návštěvníky a jenom AnonymousMessagePanel pro anonymní návštěvníky.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-349">As you have probably guessed by now, the idea here is to display just the AuthenticatedMessagePanel to authenticated visitors and just the AnonymousMessagePanel to anonymous visitors.</span></span> <span data-ttu-id="4d9bf-350">Abychom to dosáhli, je potřeba nastavit tyto viditelné vlastnosti panelů v závislosti na tom, jestli je uživatel přihlášený nebo ne.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-350">To accomplish this we need to set these Panels' Visible properties depending on whether the user is logged in or not.</span></span>

<span data-ttu-id="4d9bf-351">[Vlastnost Request. neověřovaného](https://msdn.microsoft.com/library/system.web.httprequest.isauthenticated.aspx) vrátí logickou hodnotu, která označuje, zda byla žádost ověřena.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-351">The [Request.IsAuthenticated property](https://msdn.microsoft.com/library/system.web.httprequest.isauthenticated.aspx) returns a Boolean value indicating whether the request has been authenticated.</span></span> <span data-ttu-id="4d9bf-352">Do stránky\_načíst kód obslužné rutiny události zadejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-352">Enter the following code into the Page\_Load event handler code:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample7.cs)]

<span data-ttu-id="4d9bf-353">S tímto kódem přejděte na stránku Default. aspx přes prohlížeč.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-353">With this code in place, visit Default.aspx through a browser.</span></span> <span data-ttu-id="4d9bf-354">Za předpokladu, že jste se ještě přihlásili, se zobrazí odkaz na přihlašovací stránku (viz obrázek 11).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-354">Assuming that you have yet to log in, you will see a link to the login page (see Figure 11).</span></span> <span data-ttu-id="4d9bf-355">Klikněte na tento odkaz a přihlaste se k webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-355">Click this link and log in to the site.</span></span> <span data-ttu-id="4d9bf-356">Jak jsme viděli v kroku 3, po zadání přihlašovacích údajů se vrátíte na Default. aspx, ale tentokrát na stránce se zobrazí zpráva "Vítejte zpátky!".</span><span class="sxs-lookup"><span data-stu-id="4d9bf-356">As we saw in Step 3, after entering your credentials you will be returned to Default.aspx, but this time the page shows the "Welcome back!"</span></span> <span data-ttu-id="4d9bf-357">zpráva (viz obrázek 12).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-357">message (see Figure 12).</span></span>

![Při anonymním navštívení se zobrazí odkaz Přihlásit se.](an-overview-of-forms-authentication-cs/_static/image27.png)

<span data-ttu-id="4d9bf-359">**Obrázek 11**: při anonymní návštěvě se zobrazí odkaz Přihlásit se.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-359">**Figure 11**: When Visiting Anonymously, a Log In Link is Displayed</span></span>

![Ověření uživatelé se zobrazí](an-overview-of-forms-authentication-cs/_static/image28.png)

<span data-ttu-id="4d9bf-361">**Obrázek 12**: u ověřených uživatelů se zobrazí zpráva "Vítejte zpátky!".</span><span class="sxs-lookup"><span data-stu-id="4d9bf-361">**Figure 12**: Authenticated Users are Shown the "Welcome back!"</span></span> <span data-ttu-id="4d9bf-362">Zpráva</span><span class="sxs-lookup"><span data-stu-id="4d9bf-362">Message</span></span>

<span data-ttu-id="4d9bf-363">Identitu aktuálně přihlášeného uživatele můžeme určit prostřednictvím [Vlastnosti uživatele](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx) [HttpContext objektu](https://msdn.microsoft.com/library/system.web.httpcontext.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-363">We can determine the currently logged on user's identity via the [HttpContext object](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [User property](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx).</span></span> <span data-ttu-id="4d9bf-364">Objekt HttpContext reprezentuje informace o aktuálním požadavku a je domovkou pro takové běžné ASP.NET objekty jako odpověď, požadavek a relace mimo jiné.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-364">The HttpContext object represents information about the current request, and is the home for such common ASP.NET objects as Response, Request, and Session, among others.</span></span> <span data-ttu-id="4d9bf-365">Vlastnost User představuje kontext zabezpečení aktuální žádosti HTTP a implementuje [rozhraní IPrincipal](https://msdn.microsoft.com/library/system.security.principal.iprincipal.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-365">The User property represents the security context of the current HTTP request and implements the [IPrincipal interface](https://msdn.microsoft.com/library/system.security.principal.iprincipal.aspx).</span></span>

<span data-ttu-id="4d9bf-366">Vlastnost User je nastavena vlastností FormsAuthenticationModule.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-366">The User property is set by the FormsAuthenticationModule.</span></span> <span data-ttu-id="4d9bf-367">Konkrétně Pokud FormsAuthenticationModule nalezne v příchozím požadavku lístek ověřování pomocí formulářů, vytvoří nový objekt GenericPrincipal a přiřadí ho k vlastnosti User.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-367">Specifically, when the FormsAuthenticationModule finds a forms authentication ticket in the incoming request, it creates a new GenericPrincipal object and assigns it to the User property.</span></span>

<span data-ttu-id="4d9bf-368">Objekty zabezpečení (například GenericPrincipal) poskytují informace o identitě uživatele a rolích, ke kterým patří.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-368">Principal objects (like GenericPrincipal) provide information on the user's identity and the roles to which they belong.</span></span> <span data-ttu-id="4d9bf-369">Rozhraní IPrincipal definuje dva členy:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-369">The IPrincipal interface defines two members:</span></span>

- <span data-ttu-id="4d9bf-370">[IsInRole (*roleName*)](https://msdn.microsoft.com/library/system.security.principal.iprincipal.isinrole.aspx) – metoda, která vrací logickou hodnotu udávající, zda objekt zabezpečení patří do zadané role.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-370">[IsInRole(*roleName*)](https://msdn.microsoft.com/library/system.security.principal.iprincipal.isinrole.aspx) – a method that returns a Boolean value indicating if the principal belongs to the specified role.</span></span>
- <span data-ttu-id="4d9bf-371">[Identity](https://msdn.microsoft.com/library/system.security.principal.iprincipal.identity.aspx) – vlastnost, která vrací objekt, který implementuje [rozhraní IIdentity](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-371">[Identity](https://msdn.microsoft.com/library/system.security.principal.iprincipal.identity.aspx) – a property that returns an object that implements the [IIdentity interface](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx).</span></span> <span data-ttu-id="4d9bf-372">Rozhraní IIdentity definuje tři vlastnosti: [AuthenticationType](https://msdn.microsoft.com/library/system.security.principal.iidentity.authenticationtype.aspx), [Authenticated](https://msdn.microsoft.com/library/system.security.principal.iidentity.isauthenticated.aspx)a [Name](https://msdn.microsoft.com/library/system.security.principal.iidentity.name.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-372">The IIdentity interface defines three properties: [AuthenticationType](https://msdn.microsoft.com/library/system.security.principal.iidentity.authenticationtype.aspx), [IsAuthenticated](https://msdn.microsoft.com/library/system.security.principal.iidentity.isauthenticated.aspx), and [Name](https://msdn.microsoft.com/library/system.security.principal.iidentity.name.aspx).</span></span>

<span data-ttu-id="4d9bf-373">Název aktuálního návštěvníka můžeme určit pomocí následujícího kódu:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-373">We can determine the name of the current visitor using the following code:</span></span>

<span data-ttu-id="4d9bf-374">String currentUsersName = User.Identity.Name;</span><span class="sxs-lookup"><span data-stu-id="4d9bf-374">string currentUsersName = User.Identity.Name;</span></span>

<span data-ttu-id="4d9bf-375">Při použití ověřování pomocí formulářů se vytvoří [objekt FormsIdentity](https://msdn.microsoft.com/library/system.web.security.formsidentity.aspx) pro vlastnost identity GenericPrincipal.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-375">When using forms authentication, a [FormsIdentity object](https://msdn.microsoft.com/library/system.web.security.formsidentity.aspx) is created for the GenericPrincipal's Identity property.</span></span> <span data-ttu-id="4d9bf-376">Třída FormsIdentity vždy vrátí řetězec "Forms" pro jeho vlastnost AuthenticationType a hodnotu true pro jeho vlastnost Authenticated.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-376">The FormsIdentity class always returns the string "Forms" for its AuthenticationType property and true for its IsAuthenticated property.</span></span> <span data-ttu-id="4d9bf-377">Vlastnost Name vrací uživatelské jméno zadané při vytváření ověřovacího lístku formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-377">The Name property returns the username specified when creating the forms authentication ticket.</span></span> <span data-ttu-id="4d9bf-378">Kromě těchto tří vlastností FormsIdentity zahrnuje přístup k základnímu ověřovacímu lístku prostřednictvím jeho [vlastnosti lístku](https://msdn.microsoft.com/library/system.web.security.formsidentity.ticket.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-378">In addition to these three properties, FormsIdentity includes access to the underlying authentication ticket via its [Ticket property](https://msdn.microsoft.com/library/system.web.security.formsidentity.ticket.aspx).</span></span> <span data-ttu-id="4d9bf-379">Vlastnost lístku vrací objekt typu [FormsAuthenticationTicket](https://msdn.microsoft.com/library/system.web.security.formsauthenticationticket.aspx), který má vlastnosti, jako je například vypršení platnosti, trvalá, IssueDate, název a tak dále.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-379">The Ticket property returns an object of type [FormsAuthenticationTicket](https://msdn.microsoft.com/library/system.web.security.formsauthenticationticket.aspx), which has properties like Expiration, IsPersistent, IssueDate, Name, and so on.</span></span>

<span data-ttu-id="4d9bf-380">Důležitým bodem, který je třeba vzít tady, je, že parametr *username* zadaný v FormsAuthentication. GetAuthCookie (*username*, *PersistCookie*), FormsAuthentication. SetAuthCookie (*username*, *persistCookie*) a FormsAuthentication. RedirectFromLoginPage (*username*, *persistCookie*) je stejná hodnota vrácená User.identity.Name.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-380">The important point to take away here is that the *username* parameter specified in the FormsAuthentication.GetAuthCookie(*username*, *persistCookie*), FormsAuthentication.SetAuthCookie(*username*, *persistCookie*), and FormsAuthentication.RedirectFromLoginPage(*username*, *persistCookie*) methods is the same value returned by User.Identity.Name.</span></span> <span data-ttu-id="4d9bf-381">Ověřovací lístek vytvořený těmito metodami je navíc k dispozici přetypování User. identity na objekt FormsIdentity a následným přístupem k vlastnosti lístku:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-381">Moreover, the authentication ticket created by these methods is available by casting User.Identity to a FormsIdentity object and then accessing the Ticket property:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample8.cs)]

<span data-ttu-id="4d9bf-382">Pojďme na Default. aspx poskytnout přizpůsobenější zprávu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-382">Let's provide a more personalized message in Default.aspx.</span></span> <span data-ttu-id="4d9bf-383">Aktualizujte obslužnou rutinu události stránky\_načíst, aby vlastnost text popisku WelcomeBackMessage přiřadila řetězec "Vítejte zpět, *username*!".</span><span class="sxs-lookup"><span data-stu-id="4d9bf-383">Update the Page\_Load event handler so that the WelcomeBackMessage Label's Text property is assigned the string "Welcome back, *username*!"</span></span>

<span data-ttu-id="4d9bf-384">WelcomeBackMessage. text = "Vítejte zpět," + User.Identity.Name + "!";</span><span class="sxs-lookup"><span data-stu-id="4d9bf-384">WelcomeBackMessage.Text = "Welcome back, " + User.Identity.Name + "!";</span></span>

<span data-ttu-id="4d9bf-385">Obrázek 13 znázorňuje účinek této úpravy (když se přihlašujete jako uživatel Scott).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-385">Figure 13 shows the effect of this modification (when logging in as user Scott).</span></span>

![Uvítací zpráva obsahuje jméno aktuálně přihlášeného uživatele.](an-overview-of-forms-authentication-cs/_static/image29.png)

<span data-ttu-id="4d9bf-387">**Obrázek 13**: uvítací zpráva obsahuje jméno aktuálně přihlášeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-387">**Figure 13**: The Welcome Message Includes the Currently Logged In User's Name</span></span>

### <a name="using-the-loginview-and-loginname-controls"></a><span data-ttu-id="4d9bf-388">Použití ovládacích prvků LoginView a LoginName</span><span class="sxs-lookup"><span data-stu-id="4d9bf-388">Using the LoginView and LoginName Controls</span></span>

<span data-ttu-id="4d9bf-389">Běžným požadavkem je zobrazení jiného obsahu pro ověřené a anonymní uživatele. Takže se zobrazuje jméno aktuálně přihlášeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-389">Displaying different content to authenticated and anonymous users is a common requirement; so is displaying the name of the currently logged on user.</span></span> <span data-ttu-id="4d9bf-390">Z tohoto důvodu zahrnuje ASP.NET dva webové ovládací prvky, které poskytují stejné funkce jako na obrázku 13, ale bez nutnosti napsat jediný řádek kódu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-390">For that reason, ASP.NET includes two Web controls that provide the same functionality shown in Figure 13, but without the need to write a single line of code.</span></span>

<span data-ttu-id="4d9bf-391">[Ovládací prvek LoginView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) je webový ovládací prvek založený na šabloně, který usnadňuje zobrazení různých dat ověřeným a anonymním uživatelům.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-391">The [LoginView control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) is a template-based Web control that makes it easy to display different data to authenticated and anonymous users.</span></span> <span data-ttu-id="4d9bf-392">LoginView obsahuje dvě předdefinované šablony:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-392">The LoginView includes two predefined templates:</span></span>

- <span data-ttu-id="4d9bf-393">AnonymousTemplate – libovolný kód přidaný do této šablony se zobrazí pouze anonymním návštěvníkům.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-393">AnonymousTemplate – any markup added to this template is only displayed to anonymous visitors.</span></span>
- <span data-ttu-id="4d9bf-394">LoggedInTemplate – kód této šablony je zobrazen pouze ověřeným uživatelům.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-394">LoggedInTemplate – this template's markup is shown only to authenticated users.</span></span>

<span data-ttu-id="4d9bf-395">Pojďme přidat ovládací prvek LoginView na stránku předlohy našeho webu site. Master.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-395">Let's add the LoginView control to our site's master page, Site.master.</span></span> <span data-ttu-id="4d9bf-396">Namísto přidání pouze ovládacího prvku LoginView přidáváme jak nový ovládací prvek ContentPlaceHolder, tak ovládací prvek LoginView v rámci tohoto nového prvku ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-396">Rather than adding just the LoginView control, though, let's add both a new ContentPlaceHolder control and then put the LoginView control within that new ContentPlaceHolder.</span></span> <span data-ttu-id="4d9bf-397">Odůvodnění tohoto rozhodnutí se brzy ukáže.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-397">The rationale for this decision will become apparent shortly.</span></span>

> [!NOTE]
> <span data-ttu-id="4d9bf-398">Kromě AnonymousTemplate a LoggedInTemplate může ovládací prvek LoginView zahrnovat šablony pro konkrétní role.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-398">In addition to the AnonymousTemplate and LoggedInTemplate, the LoginView control can include role-specific templates.</span></span> <span data-ttu-id="4d9bf-399">Šablony specifické pro role zobrazují pouze označení uživatelům patřícím do zadané role.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-399">Role-specific templates show markup only to those users that belong to a specified role.</span></span> <span data-ttu-id="4d9bf-400">V budoucím kurzu prověříme funkce založené na rolích ovládacího prvku LoginView.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-400">We will examine the role-based features of the LoginView control in a future tutorial.</span></span>

<span data-ttu-id="4d9bf-401">Začněte přidáním prvku ContentPlaceHolder s názvem LoginContent do stránky předlohy v navigačním &lt;elementu div&gt;.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-401">Start by adding a ContentPlaceHolder named LoginContent into the master page within the navigation &lt;div&gt; element.</span></span> <span data-ttu-id="4d9bf-402">Můžete jednoduše přetáhnout ovládací prvek ContentPlaceHolder z panelu nástrojů do zobrazení zdroje a umístit výslednou značku přímo nad nabídku TODO:... textové.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-402">You can simply drag a ContentPlaceHolder control from the Toolbox onto the Source view, placing the resulting markup right above the "TODO: Menu will go here…" text.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample9.aspx)]

<span data-ttu-id="4d9bf-403">Dále přidejte ovládací prvek LoginView do prvku LoginContent ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-403">Next, add a LoginView control within the LoginContent ContentPlaceHolder.</span></span> <span data-ttu-id="4d9bf-404">Obsah umístěný do ovládacích prvků ContentPlaceHolder stránky předlohy se považuje za *výchozí obsah* prvku ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-404">Content placed into the master page's ContentPlaceHolder controls are considered *default content* for the ContentPlaceHolder.</span></span> <span data-ttu-id="4d9bf-405">To znamená, že stránky ASP.NET, které používají tuto stránku předlohy, mohou pro každý prvek ContentPlaceHolder zadat vlastní obsah nebo použít výchozí obsah stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-405">That is, ASP.NET pages that use this master page can specify their own content for each ContentPlaceHolder or use the master page's default content.</span></span>

<span data-ttu-id="4d9bf-406">Prvek LoginView a jiné ovládací prvky související s přihlášením jsou umístěny na kartě Login (přihlášení) panelu nástrojů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-406">The LoginView and other login-related controls are located in the Toolbox's Login tab.</span></span>

![Ovládací prvek LoginView v sadě nástrojů](an-overview-of-forms-authentication-cs/_static/image30.png)

<span data-ttu-id="4d9bf-408">**Obrázek 14**: ovládací prvek LoginView v sadě nástrojů</span><span class="sxs-lookup"><span data-stu-id="4d9bf-408">**Figure 14**: The LoginView Control in the Toolbox</span></span>

<span data-ttu-id="4d9bf-409">Dále přidejte dva &lt;br/&gt; prvky ihned za ovládací prvek LoginView, ale ještě v prvku ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-409">Next, add two &lt;br /&gt; elements immediately after the LoginView control, but still within the ContentPlaceHolder.</span></span> <span data-ttu-id="4d9bf-410">V tuto chvíli by značky &lt;div&gt; elementu měly vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-410">At this point, the navigation &lt;div&gt; element's markup should look like the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample10.aspx)]

<span data-ttu-id="4d9bf-411">Šablony prvku LoginView lze definovat z návrháře nebo deklarativní značky.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-411">The LoginView's templates can be defined from the Designer or the declarative markup.</span></span> <span data-ttu-id="4d9bf-412">V návrháři aplikace Visual Studio rozbalte inteligentní značku LoginView, která obsahuje seznam nakonfigurovaných šablon v rozevíracím seznamu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-412">From Visual Studio's Designer, expand the LoginView's smart tag, which lists the configured templates in a drop-down list.</span></span> <span data-ttu-id="4d9bf-413">Do AnonymousTemplate zadejte text "Hello, cizí". Dále přidejte ovládací prvek hypertextový odkaz a nastavte jeho text a vlastnosti NavigateUrl na "přihlásit se" a "~/login.aspx" v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-413">Type in the text "Hello, stranger" into the AnonymousTemplate; next, add a HyperLink control and set its Text and NavigateUrl properties to "Log In" and "~/Login.aspx", respectively.</span></span>

<span data-ttu-id="4d9bf-414">Po nakonfigurování AnonymousTemplate přepněte na LoggedInTemplate a zadejte text "Vítejte zpátky".</span><span class="sxs-lookup"><span data-stu-id="4d9bf-414">After configuring the AnonymousTemplate, switch to the LoggedInTemplate and enter the text, "Welcome back, ".</span></span> <span data-ttu-id="4d9bf-415">Pak přetáhněte ovládací prvek LoginName ze sady nástrojů na LoggedInTemplate a umístěte ho hned za text "Vítejte zpátky".</span><span class="sxs-lookup"><span data-stu-id="4d9bf-415">Then drag a LoginName control from the Toolbox into the LoggedInTemplate, placing it immediately after the "Welcome back, " text.</span></span> <span data-ttu-id="4d9bf-416">[Ovládací prvek LoginName](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginname.aspx), jak má název, zobrazuje název aktuálně přihlášeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-416">The [LoginName control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginname.aspx), as its name implies, displays the name of the currently logged in user.</span></span> <span data-ttu-id="4d9bf-417">Interně, ovládací prvek LoginName jednoduše vytvoří výstup vlastnosti User.Identity.Name.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-417">Internally, the LoginName control simply outputs the User.Identity.Name property</span></span>

<span data-ttu-id="4d9bf-418">Po provedení těchto dodatků do šablon ovládacího prvku LoginView by značky měly vypadat podobně jako následující:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-418">After making these additions to the LoginView's templates, the markup should look similar to the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample11.aspx)]

<span data-ttu-id="4d9bf-419">S tímto přidáním na stránku hlavního serveru. Master se na každé stránce na našem webu zobrazí jiná zpráva v závislosti na tom, jestli je uživatel ověřený.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-419">With this addition to the Site.master master page, each page in our website will display a different message depending on whether the user is authenticated.</span></span> <span data-ttu-id="4d9bf-420">Obrázek 15 ukazuje stránku Default. aspx při návštěvě prohlížeče uživatelem Jisun.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-420">Figure 15 shows the Default.aspx page when visited through a browser by user Jisun.</span></span> <span data-ttu-id="4d9bf-421">Zpráva "Vítejte zpět, Jisun" se opakuje dvakrát: jednou v navigační oblasti hlavní stránky na levé straně (prostřednictvím ovládacího prvku LoginView, který jsme právě přidali), a jednou v oblasti obsahu default. aspx (přes ovládací prvky panelů a programová logika).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-421">The "Welcome back, Jisun" message is repeated twice: once in the master page's navigation section on the left (via the LoginView control we just added) and once in the Default.aspx's content area (via Panel controls and programmatic logic).</span></span>

![Ovládací prvek LoginView zobrazuje](an-overview-of-forms-authentication-cs/_static/image31.png)

<span data-ttu-id="4d9bf-423">**Obrázek 15**: ovládací prvek LoginView zobrazuje "welcome back, Jisun".</span><span class="sxs-lookup"><span data-stu-id="4d9bf-423">**Figure 15**: The LoginView Control Displays "Welcome back, Jisun."</span></span>

<span data-ttu-id="4d9bf-424">Vzhledem k tomu, že jsme přidali LoginView do stránky předlohy, může se objevit na každé stránce na našem webu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-424">Because we added the LoginView to the master page, it can appear in every page on our site.</span></span> <span data-ttu-id="4d9bf-425">Mohou však být webové stránky, kde nechci zobrazit tuto zprávu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-425">However, there may be web pages where we don't want to show this message.</span></span> <span data-ttu-id="4d9bf-426">Takovou stránkou je přihlašovací stránka, protože odkaz na přihlašovací stránku se tam vykoná.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-426">One such page is the login page, since a link to the login page seems out of place there.</span></span> <span data-ttu-id="4d9bf-427">Vzhledem k tomu, že jsme ovládací prvek LoginView umístili do prvku ContentPlaceHolder na stránce předlohy, můžeme tento výchozí kód přepsat na naší stránce obsahu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-427">Since we placed the LoginView control in a ContentPlaceHolder in the master page, we can override this default markup in our content page.</span></span> <span data-ttu-id="4d9bf-428">Otevřete Login. aspx a pokračujte v návrháři.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-428">Open Login.aspx and go to the Designer.</span></span> <span data-ttu-id="4d9bf-429">Vzhledem k tomu, že jsme nedefinovali explicitně ovládací prvek obsahu v Login. aspx pro LoginContent ContentPlaceHolder na stránce předlohy, přihlašovací stránka zobrazí pro tento prvek ContentPlaceHolder výchozí označení stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-429">Since we have not explicitly defined a Content control in Login.aspx for the LoginContent ContentPlaceHolder in the master page, the login page will show the master page's default markup for this ContentPlaceHolder.</span></span> <span data-ttu-id="4d9bf-430">Můžete to vidět prostřednictvím návrháře – LoginContent ContentPlaceHolder zobrazuje výchozí kód (ovládací prvek LoginView).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-430">You can see this through the Designer – the LoginContent ContentPlaceHolder shows the default markup (the LoginView control).</span></span>

<span data-ttu-id="4d9bf-431">[![přihlašovací stránka zobrazuje výchozí obsah pro LoginContent ContentPlaceHolder stránky předlohy.](an-overview-of-forms-authentication-cs/_static/image33.png)](an-overview-of-forms-authentication-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-431">[![The Login Page Shows the Default Content for the Master Page's LoginContent ContentPlaceHolder](an-overview-of-forms-authentication-cs/_static/image33.png)](an-overview-of-forms-authentication-cs/_static/image32.png)</span></span>

<span data-ttu-id="4d9bf-432">**Obrázek 16**: přihlašovací stránka zobrazuje výchozí obsah pro LoginContent ContentPlaceHolder stránky předlohy ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-forms-authentication-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-432">**Figure 16**: The Login Page Shows the Default Content for the Master Page's LoginContent ContentPlaceHolder ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image34.png))</span></span>

<span data-ttu-id="4d9bf-433">Chcete-li přepsat výchozí označení pro LoginContent ContentPlaceHolder, jednoduše klikněte pravým tlačítkem myši na oblast v návrháři a v místní nabídce vyberte možnost vytvořit vlastní obsah.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-433">To override the default markup for the LoginContent ContentPlaceHolder, simply right-click on the region in the Designer and choose the Create Custom Content option from the context menu.</span></span> <span data-ttu-id="4d9bf-434">(Při použití sady Visual Studio 2008 obsahuje ovládací prvek ContentPlaceHolder inteligentní značku, která, pokud je vybrána, nabízí stejnou možnost.) Tím se do značek stránky přidá nový ovládací prvek obsahu, který nám umožní definovat vlastní obsah pro tuto stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-434">(When using Visual Studio 2008 the ContentPlaceHolder includes a smart tag that, when selected, offers the same option.) This adds a new Content control to the page's markup and thereby allows us to define custom content for this page.</span></span> <span data-ttu-id="4d9bf-435">Sem můžete přidat vlastní zprávu, jako je například "Přihlaste se...", ale nechte tuto položku prázdnou.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-435">You could add a custom message here, such as "Please log in…", but let's just leave this blank.</span></span>

> [!NOTE]
> <span data-ttu-id="4d9bf-436">V aplikaci Visual Studio 2005 vytvoření vlastního obsahu vytvoří na stránce ASP.NET prázdný ovládací prvek obsahu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-436">In Visual Studio 2005, creating custom content creates an empty Content control in the ASP.NET page.</span></span> <span data-ttu-id="4d9bf-437">V aplikaci Visual Studio 2008 však vytváření vlastního obsahu kopíruje výchozí obsah stránky předlohy do nově vytvořeného ovládacího prvku obsahu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-437">In Visual Studio 2008, however, creating custom content copies the master page's default content into the newly created Content control.</span></span> <span data-ttu-id="4d9bf-438">Pokud používáte Visual Studio 2008, potom po vytvoření nového ovládacího prvku obsahu nezapomeňte vymazat obsah zkopírovaný ze stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-438">If you are using Visual Studio 2008, then, after creating the new Content control make sure to clear out the content copied over from the master page.</span></span>

<span data-ttu-id="4d9bf-439">Obrázek 17: po provedení této změny se v prohlížeči zobrazí stránka Login. aspx.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-439">Figure 17 shows the Login.aspx page when visited from a browser after making this change.</span></span> <span data-ttu-id="4d9bf-440">Všimněte si, že při návštěvě default. aspx není v levé navigační &lt;zpráva "Hello, cizí" ani "Vítejte zpátky", *uživatelské jméno*&gt;.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-440">Note that there is no "Hello, stranger" or "Welcome back, *username*" message in the left navigation &lt;div&gt; as there is when visiting Default.aspx.</span></span>

<span data-ttu-id="4d9bf-441">[![přihlašovací stránka skryje výchozí značku LoginContent ContentPlaceHolder.](an-overview-of-forms-authentication-cs/_static/image36.png)](an-overview-of-forms-authentication-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-441">[![The Login Page Hides the Default LoginContent ContentPlaceHolder's Markup](an-overview-of-forms-authentication-cs/_static/image36.png)](an-overview-of-forms-authentication-cs/_static/image35.png)</span></span>

<span data-ttu-id="4d9bf-442">**Obrázek 17**: přihlašovací stránka skryje výchozí značku LoginContent ContentPlaceHolder ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-forms-authentication-cs/_static/image37.png)).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-442">**Figure 17**: The Login Page Hides the Default LoginContent ContentPlaceHolder's Markup ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image37.png))</span></span>

## <a name="step-5-logging-out"></a><span data-ttu-id="4d9bf-443">Krok 5: odhlášení</span><span class="sxs-lookup"><span data-stu-id="4d9bf-443">Step 5: Logging Out</span></span>

<span data-ttu-id="4d9bf-444">V kroku 3 jsme se vyhledali na stránce vytvoření přihlašovací stránky pro přihlášení uživatele k webu, ale ještě jsme viděli, jak se uživatele odhlásili. Kromě metod pro protokolování uživatele v nástroji třída FormsAuthentication poskytuje také [metodu pro odhlášení](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-444">In Step 3 we looked at building a login page to log a user in to the site, but we have yet to see how to log a user out. In addition to methods for logging a user in, the FormsAuthentication class also provides a [SignOut method](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx).</span></span> <span data-ttu-id="4d9bf-445">Metoda odhlašování jednoduše zničí lístek ověřování formulářů, čímž uživatele odhlásí mimo lokalitu.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-445">The SignOut method simply destroys the forms authentication ticket, thereby logging the user out of the site.</span></span>

<span data-ttu-id="4d9bf-446">Odkaz na odhlášení je taková společná funkce, kterou ASP.NET obsahuje ovládací prvek specificky navržený pro odhlášení uživatele. [Ovládací prvek ovládací stavu přihlášení](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginstatus.aspx) zobrazí přihlašovací údaje LinkButton nebo "logout" LinkButton v závislosti na stavu ověřování uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-446">Offering a log out link is such a common feature that ASP.NET includes a control specifically designed to log a user out. The [LoginStatus control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginstatus.aspx) displays either a "Login" LinkButton or a "Logout" LinkButton, depending on the user's authentication status.</span></span> <span data-ttu-id="4d9bf-447">"Přihlašovací" LinkButton se vykreslí pro anonymní uživatele, zatímco "odhlašovací" odkaz se zobrazí ověřeným uživatelům.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-447">A "Login" LinkButton is rendered for anonymous users, whereas a "Logout" LinkButton is displayed to authenticated users.</span></span> <span data-ttu-id="4d9bf-448">Text pro "login" a "odhlašovací" adresu je možné nakonfigurovat prostřednictvím vlastností LoginText a LogoutTextu ovládací stavu přihlášení.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-448">The text for the "Login" and "Logout" LinkButtons can be configured via the LoginStatus's LoginText and LogoutText properties.</span></span>

<span data-ttu-id="4d9bf-449">Kliknutím na "přihlašování" přizpůsobíte postback, ze kterého je na přihlašovací stránce vystaveno přesměrování.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-449">Clicking the "Login" LinkButton causes a postback, from which a redirect is issued to the login page.</span></span> <span data-ttu-id="4d9bf-450">Kliknutím na "odhlašovací" odkaz způsobí, že ovládací prvek ovládací stavu přihlášení vyvolá metodu FormsAuthentication. schvalování a pak přesměruje uživatele na stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-450">Clicking the "Logout" LinkButton causes the LoginStatus control to invoke the FormsAuthentication.SignOff method and then redirects the user to a page.</span></span> <span data-ttu-id="4d9bf-451">Stránka odhlášeného uživatele se přesměruje na záviset na vlastnosti LogoutAction, která se dá přiřadit jedné ze tří následujících hodnot:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-451">The page the logged off user is redirected to depends on the LogoutAction property, which can be assigned to one of the three following values:</span></span>

- <span data-ttu-id="4d9bf-452">Aktualizovat – výchozí nastavení; přesměruje uživatele na stránku, na kterou právě navštívili.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-452">Refresh – the default; redirects the user to the page they were just visiting.</span></span> <span data-ttu-id="4d9bf-453">Pokud stránka, na které jste právě navštívili, nepovoluje anonymní uživatele, bude FormsAuthenticationModule automaticky přesměrovat uživatele na přihlašovací stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-453">If the page they were just visiting does not allow anonymous users, then the FormsAuthenticationModule will automatically redirect the user to the login page.</span></span>

<span data-ttu-id="4d9bf-454">Je možné, že budete zajímá, proč se zde přesměrování provádí.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-454">You may be curious as to why a redirect is performed here.</span></span> <span data-ttu-id="4d9bf-455">Pokud uživatel chce zůstat na stejné stránce, proč nutnost explicitního přesměrování?</span><span class="sxs-lookup"><span data-stu-id="4d9bf-455">If the user wants to remain on the same page, why the need for the explicit redirect?</span></span> <span data-ttu-id="4d9bf-456">Důvodem je, že když se klikne na odkaz "odhlásit", uživatel má stále lístek ověřování formulářů ve svých kolekcích souborů cookie.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-456">The reason is because when the "Logoff" LinkButton is clicked, the user still has the forms authentication ticket in their cookies collection.</span></span> <span data-ttu-id="4d9bf-457">V důsledku toho je požadavek na postback ověřený požadavek.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-457">Consequently, the postback request is an authenticated request.</span></span> <span data-ttu-id="4d9bf-458">Ovládací prvek ovládací stavu přihlášení volá metodu odhlašování, ale k tomu dojde poté, co FormsAuthenticationModule uživatele ověřuje.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-458">The LoginStatus control calls the SignOut method, but that happens after the FormsAuthenticationModule has authenticated the user.</span></span> <span data-ttu-id="4d9bf-459">Explicitní přesměrování proto způsobí, že prohlížeč tuto stránku znovu vyžádá.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-459">Therefore, an explicit redirect causes the browser to re-request the page.</span></span> <span data-ttu-id="4d9bf-460">V době, kdy prohlížeč znovu požádá o stránku, byl odebrán lístek ověřování pomocí formulářů, a proto je příchozí požadavek anonymní.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-460">By the time the browser re-requests the page, the forms authentication ticket has been removed and therefore the incoming request is anonymous.</span></span>

- <span data-ttu-id="4d9bf-461">Přesměrování – uživatel je přesměrován na adresu URL určenou vlastností LogoutPageUrl ovládací stavu přihlášení.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-461">Redirect – the user is redirected to the URL specified by the LoginStatus's LogoutPageUrl property.</span></span>
- <span data-ttu-id="4d9bf-462">RedirectToLoginPage – uživatel je přesměrován na přihlašovací stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-462">RedirectToLoginPage – the user is redirected to the login page.</span></span>

<span data-ttu-id="4d9bf-463">Pojďme do stránky předlohy přidat ovládací prvek ovládací stavu přihlášení a nakonfigurovat ho tak, aby používal možnost přesměrování k odeslání uživatele na stránku, která zobrazuje zprávu potvrzující, že byla odhlášena. Začněte vytvořením stránky v kořenovém adresáři s názvem logout. aspx.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-463">Let's add a LoginStatus control to the master page and configure it to use the Redirect option to send the user to a page that displays a message confirming that they have been signed out. Start by creating a page in the root directory named Logout.aspx.</span></span> <span data-ttu-id="4d9bf-464">Nezapomeňte tuto stránku přidružit k webu. Hlavní stránka předlohy.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-464">Don't forget to associate this page with the Site.master master page.</span></span> <span data-ttu-id="4d9bf-465">Dále zadejte zprávu do značky stránky vysvětlující uživateli, že se odhlásili.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-465">Next, enter a message in the page's markup explaining to the user that they have been logged out.</span></span>

<span data-ttu-id="4d9bf-466">Potom se vraťte na stránku předlohy site. Master a přidejte ovládací prvek ovládací stavu přihlášení pod prvek LoginView v LoginContent ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-466">Next, return to the Site.master master page and add a LoginStatus control beneath the LoginView in the LoginContent ContentPlaceHolder.</span></span> <span data-ttu-id="4d9bf-467">Nastavte vlastnost LogoutAction ovládacího prvku ovládací stavu přihlášení na redirect a jeho vlastnost LogoutPageUrl na ~/logout.aspx.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-467">Set the LoginStatus control's LogoutAction property to Redirect and its LogoutPageUrl property to "~/Logout.aspx".</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample12.aspx)]

<span data-ttu-id="4d9bf-468">Vzhledem k tomu, že ovládací stavu přihlášení je mimo ovládací prvek LoginView, bude zobrazen pro anonymní i ověřené uživatele, ale to je v pořádku, protože ovládací stavu přihlášení správně zobrazuje "přihlašovací" nebo "odhlašovací" LinkButton.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-468">Since the LoginStatus is outside of the LoginView control, it will appear for both anonymous and authenticated users, but that's OK because the LoginStatus will correctly display a "Login" or "Logout" LinkButton.</span></span> <span data-ttu-id="4d9bf-469">Při přidání ovládacího prvku ovládací stavu přihlášení je hypertextový odkaz "přihlásit" v AnonymousTemplate nadbytečný, takže ho odeberte.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-469">With the addition of the LoginStatus control, the "Log In" HyperLink in the AnonymousTemplate is superfluous, so remove it.</span></span>

<span data-ttu-id="4d9bf-470">Obrázek 18: při návštěvě Jisun se zobrazí default. aspx.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-470">Figure 18 shows Default.aspx when Jisun visits.</span></span> <span data-ttu-id="4d9bf-471">Všimněte si, že v levém sloupci se zobrazí zpráva "Vítejte zpět, Jisun" spolu s odkazem pro odhlášení. Kliknutím na položku Odhlásit odkaz dojde k odeslání zpětného volání, odhlásí Jisun ze systému a poté přesměruje na odhlašovací. aspx.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-471">Note that the left column displays the message, "Welcome back, Jisun" along with a link to log out. Clicking the log out LinkButton causes a postback, signs Jisun out of the system, and then redirects her to Logout.aspx.</span></span> <span data-ttu-id="4d9bf-472">Jak ukazuje obrázek 19, v době, kdy se Jisun dostane k odhlášení. aspx, se již odhlásil a je proto anonymní.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-472">As Figure 19 shows, by the time Jisun reaches Logout.aspx she has already been signed out and is therefore anonymous.</span></span> <span data-ttu-id="4d9bf-473">Proto v levém sloupci se zobrazí text "Vítejte, cizí" a odkaz na přihlašovací stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-473">Consequently, the left column shows the text "Welcome, stranger" and a link to the login page.</span></span>

<span data-ttu-id="4d9bf-474">[![default. aspx zobrazí](an-overview-of-forms-authentication-cs/_static/image39.png)](an-overview-of-forms-authentication-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-474">[![Default.aspx Shows](an-overview-of-forms-authentication-cs/_static/image39.png)](an-overview-of-forms-authentication-cs/_static/image38.png)</span></span>

<span data-ttu-id="4d9bf-475">**Obrázek 18**: Default. aspx zobrazuje "úvodní back-Jisun" spolu s "odhlašovacím" odkazem ([kliknutím zobrazíte obrázek v plné velikosti).](an-overview-of-forms-authentication-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-475">**Figure 18**: Default.aspx Shows "Welcome Back, Jisun" Along with a "Logout" LinkButton ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image40.png))</span></span>

<span data-ttu-id="4d9bf-476">[![se odhlašovací. aspx zobrazuje](an-overview-of-forms-authentication-cs/_static/image42.png)](an-overview-of-forms-authentication-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-476">[![Logout.aspx Shows](an-overview-of-forms-authentication-cs/_static/image42.png)](an-overview-of-forms-authentication-cs/_static/image41.png)</span></span>

<span data-ttu-id="4d9bf-477">**Obrázek 19**: odhlášení. aspx zobrazuje "Vítejte, cizí" spolu s "přihlašovacím" odkazem ([kliknutím zobrazíte obrázek v plné velikosti](an-overview-of-forms-authentication-cs/_static/image43.png)).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-477">**Figure 19**: Logout.aspx Shows "Welcome, stranger" Along with a "Login" LinkButton ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image43.png))</span></span>

> [!NOTE]
> <span data-ttu-id="4d9bf-478">Doporučujeme, abyste si na stránce odhlašovací. aspx přizpůsobili, abyste skryli LoginContent ContentPlaceHolder (jako jsme to v kroku 4 pro Login. aspx).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-478">I encourage you to customize the Logout.aspx page to hide the master page's LoginContent ContentPlaceHolder (like we did for Login.aspx in Step 4).</span></span> <span data-ttu-id="4d9bf-479">Důvodem je, že "přihlašovací" LinkButton vykreslený ovládacím prvkem ovládací stavu přihlášení (ten, který je pod "Hello, cizí") pošle uživateli přihlašovací stránku, která předá aktuální adresu URL v parametru QueryString ReturnUrl.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-479">The reason is because the "Login" LinkButton rendered by the LoginStatus control (the one beneath "Hello, stranger") sends the user to the login page passing the current URL in the ReturnUrl querystring parameter.</span></span> <span data-ttu-id="4d9bf-480">Krátce, pokud uživatel, který se odhlásil, klikne na odkaz "přihlašování k ovládací stavu přihlášení" a pak se přihlásí, bude přesměrován zpět na logout. aspx, což by mohlo snadno Zaměňujte uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-480">In short, if a user who has logged out clicks this LoginStatus's "Login" LinkButton, and then logs in, they will be redirected back to Logout.aspx, which could easily confuse the user.</span></span>

## <a name="summary"></a><span data-ttu-id="4d9bf-481">Souhrn</span><span class="sxs-lookup"><span data-stu-id="4d9bf-481">Summary</span></span>

<span data-ttu-id="4d9bf-482">V tomto kurzu jsme začali s přezkoumáním pracovního postupu ověřování pomocí formulářů a pak v aplikaci ASP.NET implementovat ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-482">In this tutorial we started with an examination of the forms authentication workflow and then turned to implementing forms authentication in an ASP.NET application.</span></span> <span data-ttu-id="4d9bf-483">Ověřování pomocí formulářů používá FormsAuthenticationModule, která má dvě zodpovědnosti: identifikace uživatelů na základě lístku pro ověřování pomocí formulářů a přesměrování neautorizovaných uživatelů na přihlašovací stránku.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-483">Forms authentication is powered by the FormsAuthenticationModule, which has two responsibilities: identifying users based on their forms authentication ticket, and redirecting unauthorized users to the login page.</span></span>

<span data-ttu-id="4d9bf-484">Třída FormsAuthentication .NET Framework zahrnuje metody pro vytváření, kontrolu a odebírání lístků pro ověřování formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-484">The .NET Framework's FormsAuthentication class includes methods for creating, inspecting, and removing forms authentication tickets.</span></span> <span data-ttu-id="4d9bf-485">Vlastnost Request. neověřovaného objektu a uživatele poskytuje další programovou podporu pro určení, zda je požadavek ověřený, a informace o identitě uživatele.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-485">The Request.IsAuthenticated property and User object provide additional programmatic support for determining whether a request is authenticated and information about the user's identity.</span></span> <span data-ttu-id="4d9bf-486">K dispozici jsou také webové ovládací prvky LoginView, ovládací stavu přihlášení a LoginName, které vývojářům poskytují rychlý a bezplatný kód pro provádění mnoha běžných úloh souvisejících s přihlášením.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-486">There are also the LoginView, LoginStatus, and LoginName Web controls, which give developers a quick, code-free way for performing many common login-related tasks.</span></span> <span data-ttu-id="4d9bf-487">Tyto a další webové ovládací prvky související s přihlašovacími údaji prověříme podrobněji v budoucích kurzech.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-487">We will examine these and other login-related Web controls in greater detail in future tutorials.</span></span>

<span data-ttu-id="4d9bf-488">V tomto kurzu jsme získali přehled možností ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-488">This tutorial provided a cursory overview of forms authentication.</span></span> <span data-ttu-id="4d9bf-489">Nepovedlo se prozkoumat možnosti konfigurace, podívejte se, jak lístky pro ověřování formulářů cookie fungují, nebo prozkoumat, jak ASP.NET chrání obsah ověřovacího lístku pro formuláře.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-489">We did not examine the assorted configuration options, look at how cookieless forms authentication tickets work, or explore how ASP.NET protects the contents of the forms authentication ticket.</span></span> <span data-ttu-id="4d9bf-490">V [dalším kurzu](forms-authentication-configuration-and-advanced-topics-cs.md)budeme diskutovat o těchto tématech a dalších.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-490">We will discuss these topics and more in the [next tutorial](forms-authentication-configuration-and-advanced-topics-cs.md).</span></span>

<span data-ttu-id="4d9bf-491">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="4d9bf-491">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="4d9bf-492">Další čtení</span><span class="sxs-lookup"><span data-stu-id="4d9bf-492">Further Reading</span></span>

<span data-ttu-id="4d9bf-493">Další informace o tématech popsaných v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="4d9bf-493">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="4d9bf-494">Změny mezi službami IIS6 a IIS7 Security</span><span class="sxs-lookup"><span data-stu-id="4d9bf-494">Changes Between IIS6 and IIS7 Security</span></span>](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/Changes-between-IIS6-and-IIS7-Security)
- [<span data-ttu-id="4d9bf-495">Přihlašovací ovládací prvky ASP.NET</span><span class="sxs-lookup"><span data-stu-id="4d9bf-495">Login ASP.NET Controls</span></span>](https://msdn.microsoft.com/library/d51ttbhx.aspx)
- <span data-ttu-id="4d9bf-496">[Professional ASP.NET 2,0 zabezpečení, členství a Správa rolí](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ISBN: 978-0-7645-9698-8)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-496">[Professional ASP.NET 2.0 Security, Membership, and Role Management](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ISBN: 978-0-7645-9698-8)</span></span>
- [<span data-ttu-id="4d9bf-497">Element `<authentication>`</span><span class="sxs-lookup"><span data-stu-id="4d9bf-497">The `<authentication>` Element</span></span>](https://msdn.microsoft.com/library/532aee0e.aspx)
- [<span data-ttu-id="4d9bf-498">Element `<forms>` pro `<authentication>`</span><span class="sxs-lookup"><span data-stu-id="4d9bf-498">The `<forms>` Element for `<authentication>`</span></span>](https://msdn.microsoft.com/library/1d3t3c61.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="4d9bf-499">Výukové video o tématech obsažených v tomto kurzu</span><span class="sxs-lookup"><span data-stu-id="4d9bf-499">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="4d9bf-500">Použití ověřování založeného na základních formulářích v ASP.NET</span><span class="sxs-lookup"><span data-stu-id="4d9bf-500">Using Basic Forms Authentication in ASP.NET</span></span>](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md)

## <a name="about-the-author"></a><span data-ttu-id="4d9bf-501">O autorovi</span><span class="sxs-lookup"><span data-stu-id="4d9bf-501">About the Author</span></span>

<span data-ttu-id="4d9bf-502">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor 7 ASP/ASP. NET Books a zakladatel of [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-502">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="4d9bf-503">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-503">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="4d9bf-504">Nejnovější kniha je [*Sams naučit se ASP.NET 2,0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-504">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="4d9bf-505">Dá se získat na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-505">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="4d9bf-506">nebo prostřednictvím svého blogu, který najdete na adrese [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="4d9bf-506">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="4d9bf-507">Zvláštní díky...</span><span class="sxs-lookup"><span data-stu-id="4d9bf-507">Special Thanks To…</span></span>

<span data-ttu-id="4d9bf-508">Tato řada kurzů byla přezkoumána mnoha užitečnými kontrolory.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-508">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="4d9bf-509">Vedoucí recenzent pro tento kurz byl tento kurz zkontrolován řadou užitečných revidujících.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-509">Lead reviewer for this tutorial was This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="4d9bf-510">Kontroloři vedoucí pro tento kurz zahrnují Alicja Maziarz, John Suru a Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="4d9bf-510">Lead reviewers for this tutorial include Alicja Maziarz, John Suru, and Teresa Murphy.</span></span> <span data-ttu-id="4d9bf-511">Uvažujete o přezkoumání mých nadcházejících článků na webu MSDN?</span><span class="sxs-lookup"><span data-stu-id="4d9bf-511">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="4d9bf-512">Pokud ano, vyřaďte mi řádek na [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-512">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4d9bf-513">[Předchozí](security-basics-and-asp-net-support-cs.md)
> [Další](forms-authentication-configuration-and-advanced-topics-cs.md)</span><span class="sxs-lookup"><span data-stu-id="4d9bf-513">[Previous](security-basics-and-asp-net-support-cs.md)
[Next](forms-authentication-configuration-and-advanced-topics-cs.md)</span></span>
