---
uid: web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
title: Vytvoření rozhraní pro výběr jednoho uživatelského účtu z mnoha (C#) | Dokumentace Microsoftu
author: rick-anderson
description: V tomto kurzu vytvoříme uživatelského rozhraní pomocí mřížky stránkovaného, filtrování. Zejména našeho uživatelského rozhraní se skládají z řady z LinkButtons pro...
ms.author: riande
ms.date: 04/01/2008
ms.assetid: 9e4e687c-b4ec-434f-a4ef-edb0b8f365e4
msc.legacyurl: /web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
msc.type: authoredcontent
ms.openlocfilehash: ede2bf737464fde47e304e23255349599c1ea663
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 05/06/2019
ms.locfileid: "65116290"
---
# <a name="building-an-interface-to-select-one-user-account-from-many-c"></a><span data-ttu-id="a0885-104">Vytvoření rozhraní pro výběr jednoho uživatelského účtu z mnoha (C#)</span><span class="sxs-lookup"><span data-stu-id="a0885-104">Building an Interface to Select One User Account from Many (C#)</span></span>

<span data-ttu-id="a0885-105">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a0885-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a0885-106">[Stáhněte si kód](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) nebo [stahovat PDF](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="a0885-106">[Download Code](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) or [Download PDF](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)</span></span>

> <span data-ttu-id="a0885-107">V tomto kurzu vytvoříme uživatelského rozhraní pomocí mřížky stránkovaného, filtrování.</span><span class="sxs-lookup"><span data-stu-id="a0885-107">In this tutorial we will build a user interface with a paged, filterable grid.</span></span> <span data-ttu-id="a0885-108">Zejména našeho uživatelského rozhraní bude skládat z řady LinkButtons pro filtrování výsledků podle počáteční písmeno uživatelské jméno a ovládacího prvku GridView, zobrazíte odpovídající uživatelé.</span><span class="sxs-lookup"><span data-stu-id="a0885-108">In particular, our user interface will consist of a series of LinkButtons for filtering the results based on the starting letter of the username, and a GridView control to show the matching users.</span></span> <span data-ttu-id="a0885-109">Začneme obsahující všechny uživatelské účty v GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-109">We'll start by listing all of the user accounts in a GridView.</span></span> <span data-ttu-id="a0885-110">Pak v kroku 3, přidáme filtr LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="a0885-110">Then, in Step 3, we will add the filter LinkButtons.</span></span> <span data-ttu-id="a0885-111">Krok 4 zjistí stránkování filtrované výsledky.</span><span class="sxs-lookup"><span data-stu-id="a0885-111">Step 4 looks at paging the filtered results.</span></span> <span data-ttu-id="a0885-112">Rozhraní vytvořený v kroky 2 až 4 se použije v dalších kurzech k provádění úloh správy pro konkrétní uživatelský účet.</span><span class="sxs-lookup"><span data-stu-id="a0885-112">The interface constructed in Steps 2 through 4 will be used in the subsequent tutorials to perform administrative tasks for a particular user account.</span></span>

## <a name="introduction"></a><span data-ttu-id="a0885-113">Úvod</span><span class="sxs-lookup"><span data-stu-id="a0885-113">Introduction</span></span>

<span data-ttu-id="a0885-114">V <a id="_msoanchor_1"> </a> [ *přiřazení rolí uživatelům* ](../roles/assigning-roles-to-users-cs.md) kurzu jsme vytvořili základní rozhraní pro správce zajišťující vyberte uživatele a spravovat své role.</span><span class="sxs-lookup"><span data-stu-id="a0885-114">In the <a id="_msoanchor_1"></a>[*Assigning Roles to Users*](../roles/assigning-roles-to-users-cs.md) tutorial, we created a rudimentary interface for an administrator to select a user and manage her roles.</span></span> <span data-ttu-id="a0885-115">Konkrétně rozhraní zobrazí správce se rozevírací seznam všech uživatelů.</span><span class="sxs-lookup"><span data-stu-id="a0885-115">Specifically, the interface presented the administrator with a drop-down list of all of the users.</span></span> <span data-ttu-id="a0885-116">Toto rozhraní je vhodný, pokud existují, ale s deseti uživatelské účty, ale nepraktické pro weby se stovkami nebo tisícovkami účtů.</span><span class="sxs-lookup"><span data-stu-id="a0885-116">Such an interface is suitable when there are but a dozen or so user accounts, but is unwieldy for sites with hundreds or thousands of accounts.</span></span> <span data-ttu-id="a0885-117">Stránkovaná, filtrovatelné grid je vhodnější uživatelského rozhraní pro weby s velké uživatelské základny.</span><span class="sxs-lookup"><span data-stu-id="a0885-117">A paged, filterable grid is more suitable user interface for websites with large user bases.</span></span>

<span data-ttu-id="a0885-118">V tomto kurzu vytvoříme uživatelské rozhraní.</span><span class="sxs-lookup"><span data-stu-id="a0885-118">In this tutorial we will build such a user interface.</span></span> <span data-ttu-id="a0885-119">Zejména našeho uživatelského rozhraní bude skládat z řady LinkButtons pro filtrování výsledků podle počáteční písmeno uživatelské jméno a ovládacího prvku GridView, zobrazíte odpovídající uživatelé.</span><span class="sxs-lookup"><span data-stu-id="a0885-119">In particular, our user interface will consist of a series of LinkButtons for filtering the results based on the starting letter of the username, and a GridView control to show the matching users.</span></span> <span data-ttu-id="a0885-120">Začneme obsahující všechny uživatelské účty v GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-120">We'll start by listing all of the user accounts in a GridView.</span></span> <span data-ttu-id="a0885-121">Pak v kroku 3, přidáme filtr LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="a0885-121">Then, in Step 3, we will add the filter LinkButtons.</span></span> <span data-ttu-id="a0885-122">Krok 4 zjistí stránkování filtrované výsledky.</span><span class="sxs-lookup"><span data-stu-id="a0885-122">Step 4 looks at paging the filtered results.</span></span> <span data-ttu-id="a0885-123">Rozhraní vytvořený v kroky 2 až 4 se použije v dalších kurzech k provádění úloh správy pro konkrétní uživatelský účet.</span><span class="sxs-lookup"><span data-stu-id="a0885-123">The interface constructed in Steps 2 through 4 will be used in the subsequent tutorials to perform administrative tasks for a particular user account.</span></span>

<span data-ttu-id="a0885-124">Pusťme se do práce!</span><span class="sxs-lookup"><span data-stu-id="a0885-124">Let's get started!</span></span>

## <a name="step-1-adding-new-aspnet-pages"></a><span data-ttu-id="a0885-125">Krok 1: Přidání nové stránky ASP.NET</span><span class="sxs-lookup"><span data-stu-id="a0885-125">Step 1: Adding New ASP.NET Pages</span></span>

<span data-ttu-id="a0885-126">V tomto kurzu a další dvě jsme se zkoumání různých funkcí souvisejících s správy a možnosti.</span><span class="sxs-lookup"><span data-stu-id="a0885-126">In this tutorial and the next two we will be examining various administration-related functions and capabilities.</span></span> <span data-ttu-id="a0885-127">Potřebujeme sérii stránek ASP.NET k implementaci témata prozkoumat v rámci těchto kurzů.</span><span class="sxs-lookup"><span data-stu-id="a0885-127">We will need a series of ASP.NET pages to implement the topics examined throughout these tutorials.</span></span> <span data-ttu-id="a0885-128">Pojďme vytvořit tyto stránky a aktualizaci mapy webu.</span><span class="sxs-lookup"><span data-stu-id="a0885-128">Let's create these pages and update the site map.</span></span>

<span data-ttu-id="a0885-129">Začněte tím, že vytvoříte novou složku v projektu s názvem `Administration`.</span><span class="sxs-lookup"><span data-stu-id="a0885-129">Start by creating a new folder in the project named `Administration`.</span></span> <span data-ttu-id="a0885-130">V dalším kroku přidejte dvě nové stránky ASP.NET do složky, propojení s každou stránku `Site.master` stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="a0885-130">Next, add two new ASP.NET pages to the folder, linking each page with the `Site.master` master page.</span></span> <span data-ttu-id="a0885-131">Název stránky:</span><span class="sxs-lookup"><span data-stu-id="a0885-131">Name the pages:</span></span>

- `ManageUsers.aspx`
- `UserInformation.aspx`

<span data-ttu-id="a0885-132">Přidat do kořenového adresáře webu také dvě stránky: `ChangePassword.aspx` a `RecoverPassword.aspx`.</span><span class="sxs-lookup"><span data-stu-id="a0885-132">Also add two pages to the website's root directory: `ChangePassword.aspx` and `RecoverPassword.aspx`.</span></span>

<span data-ttu-id="a0885-133">Tyto čtyři stránky, v tomto okamžiku má dva ovládací prvky obsahu, jeden pro každou z prvků ContentPlaceHolder na hlavní stránce: `MainContent` a `LoginContent`.</span><span class="sxs-lookup"><span data-stu-id="a0885-133">These four pages should, at this point, have two Content controls, one for each of the master page's ContentPlaceHolders: `MainContent` and `LoginContent`.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample1.aspx)]

<span data-ttu-id="a0885-134">Má být zobrazena na hlavní stránce výchozí značky `LoginContent` ContentPlaceHolder pro tyto stránky.</span><span class="sxs-lookup"><span data-stu-id="a0885-134">We want to show the master page's default markup for the `LoginContent` ContentPlaceHolder for these pages.</span></span> <span data-ttu-id="a0885-135">Proto odebrat deklarativní `Content2` ovládacího prvku obsahu.</span><span class="sxs-lookup"><span data-stu-id="a0885-135">Therefore, remove the declarative markup for the `Content2` Content control.</span></span> <span data-ttu-id="a0885-136">Až to uděláte, na stránkách značek by měl obsahovat pouze jeden ovládací prvek obsahu.</span><span class="sxs-lookup"><span data-stu-id="a0885-136">After doing so, the pages' markup should contain just one Content control.</span></span>

<span data-ttu-id="a0885-137">Stránky technologie ASP.NET v `Administration` složky jsou určené výhradně pro administrativní uživatelé.</span><span class="sxs-lookup"><span data-stu-id="a0885-137">The ASP.NET pages in the `Administration` folder are intended solely for administrative users.</span></span> <span data-ttu-id="a0885-138">Přidali jsme do systému v roli správce <a id="_msoanchor_2"> </a> [ *vytváření a Správa rolí* ](../roles/creating-and-managing-roles-cs.md) kurz; omezit přístup na tyto dvě stránky do této role.</span><span class="sxs-lookup"><span data-stu-id="a0885-138">We added an Administrators role to the system in the <a id="_msoanchor_2"></a>[*Creating and Managing Roles*](../roles/creating-and-managing-roles-cs.md) tutorial; restrict access to these two pages to this role.</span></span> <span data-ttu-id="a0885-139">Chcete-li to provést, přidejte `Web.config` do souboru `Administration` složky a nakonfigurovat jeho `<authorization>` element připouštějí uživatelé v roli správce a zakázat všechny ostatní.</span><span class="sxs-lookup"><span data-stu-id="a0885-139">To accomplish this, add a `Web.config` file to the `Administration` folder and configure its `<authorization>` element to admit users in the Administrators role and to deny all others.</span></span>

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample2.xml)]

<span data-ttu-id="a0885-140">Průzkumník řešení vašeho projektu v tomto okamžiku by měl vypadat podobně jako obrazovky je vidět na obrázku 1.</span><span class="sxs-lookup"><span data-stu-id="a0885-140">At this point your project's Solution Explorer should look similar to the screen shot shown in Figure 1.</span></span>

<span data-ttu-id="a0885-141">[![Čtyři nové stránky a v souboru Web.config se přidaly na web](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a0885-141">[![Four New Pages and a Web.config File Have Been Added to the Website](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)</span></span>

<span data-ttu-id="a0885-142">**Obrázek 1**: Čtyři nové stránky a `Web.config` soubor byly přidány k webu ([kliknutím ji zobrazíte obrázek v plné velikosti](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a0885-142">**Figure 1**: Four New Pages and a `Web.config` File Have Been Added to the Website  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))</span></span>

<span data-ttu-id="a0885-143">Nakonec aktualizujte mapy webu (`Web.sitemap`) zahrnout položku pro `ManageUsers.aspx` stránky.</span><span class="sxs-lookup"><span data-stu-id="a0885-143">Finally, update the site map (`Web.sitemap`) to include an entry to the `ManageUsers.aspx` page.</span></span> <span data-ttu-id="a0885-144">Přidejte následující kód XML po `<siteMapNode>` jsme přidali kurzy role.</span><span class="sxs-lookup"><span data-stu-id="a0885-144">Add the following XML after the `<siteMapNode>` we added for the Roles tutorials.</span></span>

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample3.xml)]

<span data-ttu-id="a0885-145">Pomocí mapy webu, aktualizovat přejděte na web prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="a0885-145">With the site map updated, visit the site through a browser.</span></span> <span data-ttu-id="a0885-146">Jak je vidět na obrázku 2, navigaci na levé straně teď obsahuje položky pro správu kurzy.</span><span class="sxs-lookup"><span data-stu-id="a0885-146">As Figure 2 shows, the navigation on the left now includes items for the Administration tutorials.</span></span>

<span data-ttu-id="a0885-147">[![Mapa webu obsahuje uzel s názvem Správa uživatelů](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a0885-147">[![The Site Map Includes a Node Titled User Administration](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)</span></span>

<span data-ttu-id="a0885-148">**Obrázek 2**: Mapa webu obsahuje uzel s názvem Správa uživatelů ([kliknutím ji zobrazíte obrázek v plné velikosti](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a0885-148">**Figure 2**: The Site Map Includes a Node Titled User Administration  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))</span></span>

## <a name="step-2-listing-all-user-accounts-in-a-gridview"></a><span data-ttu-id="a0885-149">Krok 2: Výpis všech uživatelských účtů v GridView</span><span class="sxs-lookup"><span data-stu-id="a0885-149">Step 2: Listing All User Accounts in a GridView</span></span>

<span data-ttu-id="a0885-150">Naším cílem end pro účely tohoto kurzu je vytvoření stránkované, filtrování mřížky, přes který může správce vybrat uživatelský účet ke správě.</span><span class="sxs-lookup"><span data-stu-id="a0885-150">Our end goal for this tutorial is to create a paged, filterable grid through which an administrator can select a user account to manage.</span></span> <span data-ttu-id="a0885-151">Začněme tím, že výpis *všechny* uživatelů v GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-151">Let's start by listing *all* users in a GridView.</span></span> <span data-ttu-id="a0885-152">Po jejím dokončení přidáme filtrování a stránkování rozhraní a funkce.</span><span class="sxs-lookup"><span data-stu-id="a0885-152">Once this is complete, we will add the filtering and paging interfaces and functionality.</span></span>

<span data-ttu-id="a0885-153">Otevřít `ManageUsers.aspx` stránku `Administration` složky a přidejte prvku GridView, nastavení jeho `ID` k `UserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="a0885-153">Open the `ManageUsers.aspx` page in the `Administration` folder and add a GridView, setting its `ID` to `UserAccounts`.</span></span> <span data-ttu-id="a0885-154">Za chvíli jsme psát kód k vytvoření vazby sadu uživatelských účtů pomocí ovládacího prvku GridView `Membership` třídy `GetAllUsers` metody.</span><span class="sxs-lookup"><span data-stu-id="a0885-154">In a moment, we will write code to bind the set of user accounts to the GridView using the `Membership` class's `GetAllUsers` method.</span></span> <span data-ttu-id="a0885-155">Jak je popsáno v předchozích kurzech, vrátí metoda GetAllUsers `MembershipUserCollection` objekt, což je kolekce z `MembershipUser` objekty.</span><span class="sxs-lookup"><span data-stu-id="a0885-155">As discussed in earlier tutorials, the GetAllUsers method returns a `MembershipUserCollection` object, which is a collection of `MembershipUser` objects.</span></span> <span data-ttu-id="a0885-156">Každý `MembershipUser` v kolekci obsahuje vlastnosti, jako je `UserName`, `Email`, `IsApproved`, a tak dále.</span><span class="sxs-lookup"><span data-stu-id="a0885-156">Each `MembershipUser` in the collection includes properties like `UserName`, `Email`, `IsApproved`, and so on.</span></span>

<span data-ttu-id="a0885-157">Pokud chcete zobrazit informace o požadované uživatelském účtu v prvku GridView, nastavte prvku GridView `AutoGenerateColumns` vlastnost na hodnotu False a přidejte BoundFields pro `UserName`, `Email`, a `Comment` vlastnosti a CheckBoxFields pro `IsApproved`, `IsLockedOut`, a `IsOnline` vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="a0885-157">In order to display the desired user account information in the GridView, set the GridView's `AutoGenerateColumns` property to False and add BoundFields for the `UserName`, `Email`, and `Comment` properties and CheckBoxFields for the `IsApproved`, `IsLockedOut`, and `IsOnline` properties.</span></span> <span data-ttu-id="a0885-158">Tuto konfiguraci můžete použít prostřednictvím ovládacího prvku deklarativní nebo dialogového okna pole.</span><span class="sxs-lookup"><span data-stu-id="a0885-158">This configuration can be applied through the control's declarative markup or via the Fields dialog box.</span></span> <span data-ttu-id="a0885-159">Obrázek 3 ukazuje snímek obrazovky pole poté, co bylo zrušeno na zaškrtávací políčko automaticky generovat pole a BoundFields a CheckBoxFields jsme přidali a nakonfigurovali dialogové okno.</span><span class="sxs-lookup"><span data-stu-id="a0885-159">Figure 3 shows a screen shot of the Fields dialog box after the Auto-generate fields checkbox has been unchecked and the BoundFields and CheckBoxFields have been added and configured.</span></span>

<span data-ttu-id="a0885-160">[![Přidejte tři BoundFields a tři CheckBoxFields do prvku GridView.](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a0885-160">[![Add Three BoundFields and Three CheckBoxFields to the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)</span></span>

<span data-ttu-id="a0885-161">**Obrázek 3**: Přidejte tři BoundFields a tři CheckBoxFields do prvku GridView ([kliknutím ji zobrazíte obrázek v plné velikosti](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a0885-161">**Figure 3**: Add Three BoundFields and Three CheckBoxFields to the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))</span></span>

<span data-ttu-id="a0885-162">Po dokončení konfigurace vašeho ovládacího prvku GridView, ujistěte se, že jeho deklarativním označení vypadá přibližně takto:</span><span class="sxs-lookup"><span data-stu-id="a0885-162">After configuring your GridView, ensure that its declarative markup resembles the following:</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample4.aspx)]

<span data-ttu-id="a0885-163">Dále musíme napsat kód, který váže uživatelské účty do prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-163">Next, we need to write code that binds the user accounts to the GridView.</span></span> <span data-ttu-id="a0885-164">Vytvořit metodu s názvem `BindUserAccounts` k provedení této úlohy a pak volejte jej z `Page_Load` obslužné rutiny události při první návštěvě stránky.</span><span class="sxs-lookup"><span data-stu-id="a0885-164">Create a method named `BindUserAccounts` to perform this task and then call it from the `Page_Load` event handler on the first page visit.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample5.cs)]

<span data-ttu-id="a0885-165">Za chvíli testovací stránka prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="a0885-165">Take a moment to test the page through a browser.</span></span> <span data-ttu-id="a0885-166">Obrázek 4 ukazuje, `UserAccounts` GridView obsahuje uživatelské jméno, e-mailovou adresu a další relevantní účtu informace pro všechny uživatele v systému.</span><span class="sxs-lookup"><span data-stu-id="a0885-166">As Figure 4 shows, the `UserAccounts` GridView lists the username, email address, and other pertinent account information for all users in the system.</span></span>

<span data-ttu-id="a0885-167">[![Uživatelské účty vypisují v prvku GridView.](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a0885-167">[![The User Accounts are Listed in the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)</span></span>

<span data-ttu-id="a0885-168">**Obrázek 4**: Uživatelské účty vypisují v prvku GridView ([kliknutím ji zobrazíte obrázek v plné velikosti](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a0885-168">**Figure 4**: The User Accounts are Listed in the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))</span></span>

## <a name="step-3-filtering-the-results-by-the-first-letter-of-the-username"></a><span data-ttu-id="a0885-169">Krok 3: Filtrování výsledků podle první písmeno uživatelského jména</span><span class="sxs-lookup"><span data-stu-id="a0885-169">Step 3: Filtering the Results by the First Letter of the Username</span></span>

<span data-ttu-id="a0885-170">Aktuálně `UserAccounts` GridView ukazuje *všechny* uživatelských účtů.</span><span class="sxs-lookup"><span data-stu-id="a0885-170">Currently the `UserAccounts` GridView shows *all* of the user accounts.</span></span> <span data-ttu-id="a0885-171">Pro moduly websites se stovkami nebo tisícovkami uživatelských účtů je nutné tento uživatel moct rychle Zredukovat zobrazené účty.</span><span class="sxs-lookup"><span data-stu-id="a0885-171">For websites with hundreds or thousands of user accounts, it is imperative that user be able to quickly pare down the displayed accounts.</span></span> <span data-ttu-id="a0885-172">To lze provést přidáním filtrování LinkButtons na stránku.</span><span class="sxs-lookup"><span data-stu-id="a0885-172">This can be accomplished by adding filtering LinkButtons to the page.</span></span> <span data-ttu-id="a0885-173">Přidejme 27 LinkButtons na stránku: jednu s názvem všechny spolu s jeden odkazem (LinkButton) pro každé písmeno abecedy.</span><span class="sxs-lookup"><span data-stu-id="a0885-173">Let's add 27 LinkButtons to the page: one titled All along with one LinkButton for each letter of the alphabet.</span></span> <span data-ttu-id="a0885-174">Návštěvník klikne všechny odkazem (LinkButton), prvku GridView zobrazí všechny uživatele.</span><span class="sxs-lookup"><span data-stu-id="a0885-174">If a visitor clicks the All LinkButton, the GridView will show all of the users.</span></span> <span data-ttu-id="a0885-175">Pokud kliknou určitým písmenem, zobrazí se pouze uživatelé, jejichž uživatelské jméno začíná vybrané písmeno.</span><span class="sxs-lookup"><span data-stu-id="a0885-175">If they click a particular letter, only those users whose username starts with the selected letter will be displayed.</span></span>

<span data-ttu-id="a0885-176">Naše první úloha je přidání 27 ovládací prvky odkazem (LinkButton).</span><span class="sxs-lookup"><span data-stu-id="a0885-176">Our first task is to add the 27 LinkButton controls.</span></span> <span data-ttu-id="a0885-177">Jednou z možností je vytvořit 27 LinkButtons deklarativně, postupně po jednom.</span><span class="sxs-lookup"><span data-stu-id="a0885-177">One option would be to create the 27 LinkButtons declaratively, one at a time.</span></span> <span data-ttu-id="a0885-178">Flexibilnější přístupem je použití prvku opakovače s `ItemTemplate` , který vykreslí odkazem (LinkButton) a potom sváže Repeater jako možnosti filtrování `string` pole.</span><span class="sxs-lookup"><span data-stu-id="a0885-178">A more flexible approach is to use a Repeater control with an `ItemTemplate` that renders a LinkButton and then binds the filtering options to the Repeater as a `string` array.</span></span>

<span data-ttu-id="a0885-179">Začněte tím, že přidání ovládacím prvkem Repeater na stránku výše `UserAccounts` ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-179">Start by adding a Repeater control to the page above the `UserAccounts` GridView.</span></span> <span data-ttu-id="a0885-180">Nastavte Repeater `ID` vlastnost `FilteringUI`.</span><span class="sxs-lookup"><span data-stu-id="a0885-180">Set the Repeater's `ID` property to `FilteringUI`.</span></span> <span data-ttu-id="a0885-181">Konfigurace šablon Repeateru tak, aby jeho `ItemTemplate` vykreslí odkazem (LinkButton) jehož `Text` a `CommandName` vlastnosti je vázána na aktuální prvek pole.</span><span class="sxs-lookup"><span data-stu-id="a0885-181">Configure the Repeater's templates so that its `ItemTemplate` renders a LinkButton whose `Text` and `CommandName` properties are bound to the current array element.</span></span> <span data-ttu-id="a0885-182">Jak jsme viděli v <a id="_msoanchor_3"> </a> [ *přiřazení rolí uživatelům* ](../roles/assigning-roles-to-users-cs.md) výukový program, můžete to udělat pomocí `Container.DataItem` Syntaxe datové vazby.</span><span class="sxs-lookup"><span data-stu-id="a0885-182">As we saw in the <a id="_msoanchor_3"></a>[*Assigning Roles to Users*](../roles/assigning-roles-to-users-cs.md) tutorial, this can be accomplished using the `Container.DataItem` databinding syntax.</span></span> <span data-ttu-id="a0885-183">Použít Repeater `SeparatorTemplate` zobrazíte svislé čáry mezi každého odkazu.</span><span class="sxs-lookup"><span data-stu-id="a0885-183">Use the Repeater's `SeparatorTemplate` to display a vertical line between each link.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample6.aspx)]

<span data-ttu-id="a0885-184">K naplnění této opakovače s požadovanými možnostmi filtrování, vytvořit metodu s názvem `BindFilteringUI`.</span><span class="sxs-lookup"><span data-stu-id="a0885-184">To populate this Repeater with the desired filtering options, create a method named `BindFilteringUI`.</span></span> <span data-ttu-id="a0885-185">Nezapomeňte volat tuto metodu z `Page_Load` obslužné rutiny události na prvním načtením stránky.</span><span class="sxs-lookup"><span data-stu-id="a0885-185">Be sure to call this method from the `Page_Load` event handler on the first page load.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample7.cs)]

<span data-ttu-id="a0885-186">Tato metoda určuje možnosti filtrování jako prvky `string` pole `filterOptions`.</span><span class="sxs-lookup"><span data-stu-id="a0885-186">This method specifies the filtering options as elements in the `string` array `filterOptions`.</span></span> <span data-ttu-id="a0885-187">Pro každý prvek v poli Opakovači vykreslí prvek LinkButton s jeho `Text` a `CommandName` vlastnosti přiřazená hodnota elementu pole.</span><span class="sxs-lookup"><span data-stu-id="a0885-187">For each element in the array, the Repeater will render a LinkButton with its `Text` and `CommandName` properties assigned to the value of the array element.</span></span>

<span data-ttu-id="a0885-188">Obrázek 5 ukazuje, `ManageUsers.aspx` stránce při prohlížení prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="a0885-188">Figure 5 shows the `ManageUsers.aspx` page when viewed through a browser.</span></span>

<span data-ttu-id="a0885-189">[![Opakovači uvádí 27 filtrování LinkButtons](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a0885-189">[![The Repeater Lists 27 Filtering LinkButtons](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)</span></span>

<span data-ttu-id="a0885-190">**Obrázek 5**: Repeater uvádí 27 filtrování LinkButtons ([kliknutím ji zobrazíte obrázek v plné velikosti](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="a0885-190">**Figure 5**: The Repeater Lists 27 Filtering LinkButtons  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))</span></span>

> [!NOTE]
> <span data-ttu-id="a0885-191">Uživatelská jména, může začínat libovolný znak, včetně čísla a interpunkční znaménka.</span><span class="sxs-lookup"><span data-stu-id="a0885-191">Usernames may start with any character, including numbers and punctuation.</span></span> <span data-ttu-id="a0885-192">Chcete-li zobrazit tyto účty, bude správce muset použít možnost všechny odkazem (LinkButton).</span><span class="sxs-lookup"><span data-stu-id="a0885-192">In order to view these accounts, the administrator will have to use the All LinkButton option.</span></span> <span data-ttu-id="a0885-193">Alternativně můžete přidat odkazem (LinkButton) se vraťte všechny uživatelské účty, které začínat číslicí.</span><span class="sxs-lookup"><span data-stu-id="a0885-193">Alternatively, you could add a LinkButton to return all user accounts that start with a number.</span></span> <span data-ttu-id="a0885-194">Můžu ponechte toto cvičení pro čtečku.</span><span class="sxs-lookup"><span data-stu-id="a0885-194">I leave this as an exercise for the reader.</span></span>

<span data-ttu-id="a0885-195">Kliknutím na některý z filtrování LinkButtons vyvolá zpětné volání a vyvolá Repeateru `ItemCommand` události, ale není žádná změna v mřížce, protože jsme ještě na psaní jakéhokoli kódu k filtrování výsledků.</span><span class="sxs-lookup"><span data-stu-id="a0885-195">Clicking any of the filtering LinkButtons causes a postback and raises the Repeater's `ItemCommand` event, but there's no change in the grid because we've yet to write any code to filter the results.</span></span> <span data-ttu-id="a0885-196">`Membership` Obsahuje třídy [ `FindUsersByName` metoda](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) , která vrací tyto uživatelské účty, jejichž uživatelské jméno odpovídá zadanému vyhledávacímu vzoru.</span><span class="sxs-lookup"><span data-stu-id="a0885-196">The `Membership` class includes a [`FindUsersByName` method](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) that returns those user accounts whose username matches a specified search pattern.</span></span> <span data-ttu-id="a0885-197">Můžeme použít tuto metodu pro načtení pouze tyto uživatelské účty, jejichž uživatelská jména začínají písmenem určený `CommandName` z filtrované odkazem (LinkButton), který bylo kliknuto.</span><span class="sxs-lookup"><span data-stu-id="a0885-197">We can use this method to retrieve just those user accounts whose usernames start with the letter specified by the `CommandName` of the filtered LinkButton that was clicked.</span></span>

<span data-ttu-id="a0885-198">Začněte tím, že aktualizace `ManageUser.aspx` třídy stránky kódu tak, že obsahují vlastnost s názvem `UsernameToMatch`.</span><span class="sxs-lookup"><span data-stu-id="a0885-198">Start by updating the `ManageUser.aspx` page's code-behind class so that it includes a property named `UsernameToMatch`.</span></span> <span data-ttu-id="a0885-199">Tato vlastnost se uchovávají napříč postbacků řetězec filtru uživatelské jméno:</span><span class="sxs-lookup"><span data-stu-id="a0885-199">This property persists the username filter string across postbacks:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample8.cs)]

<span data-ttu-id="a0885-200">`UsernameToMatch` Jeho hodnota je přiřazen do vlastnosti se ukládají `ViewState` kolekce pomocí klíče UsernameToMatch.</span><span class="sxs-lookup"><span data-stu-id="a0885-200">The `UsernameToMatch` property stores its value it is assigned into the `ViewState` collection using the key UsernameToMatch.</span></span> <span data-ttu-id="a0885-201">Pokud je hodnota této vlastnosti pro čtení, zkontroluje, zda existuje hodnota v `ViewState` kolekce; v opačném případě ji vrátí výchozí hodnotu, prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="a0885-201">When this property's value is read, it checks to see if a value exists in the `ViewState` collection; if not, it returns the default value, an empty string.</span></span> <span data-ttu-id="a0885-202">`UsernameToMatch` Vlastnost vykazuje běžným vzorem, a to uložením hodnotu tak, aby postbacků jsou trvalé změny vlastnosti stavu zobrazení.</span><span class="sxs-lookup"><span data-stu-id="a0885-202">The `UsernameToMatch` property exhibits a common pattern, namely persisting a value to view state so that any changes to the property are persisted across postbacks.</span></span> <span data-ttu-id="a0885-203">Další informace o tomto vzoru, najdete v článku [stav zobrazení ASP.NET Principy](https://msdn.microsoft.com/library/ms972976.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0885-203">For more information on this pattern, read [Understanding ASP.NET View State](https://msdn.microsoft.com/library/ms972976.aspx).</span></span>

<span data-ttu-id="a0885-204">Dále, aktualizujte `BindUserAccounts` metoda takže místo volání `Membership.GetAllUsers`, volá `Membership.FindUsersByName`a předejte hodnotu `UsernameToMatch` vlastnost připojená se zástupným znakem SQL %.</span><span class="sxs-lookup"><span data-stu-id="a0885-204">Next, update the `BindUserAccounts` method so that instead of calling `Membership.GetAllUsers`, it calls `Membership.FindUsersByName`, passing in the value of the `UsernameToMatch` property appended with the SQL wildcard character, %.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample9.cs)]

<span data-ttu-id="a0885-205">Pouze uživatelé, jejichž uživatelské jméno začíná písmeno A zobrazit, nastavte `UsernameToMatch` vlastnost na objekt a poté zavolá `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="a0885-205">To display just those users whose username starts with the letter A, set the `UsernameToMatch` property to A and then call `BindUserAccounts`.</span></span> <span data-ttu-id="a0885-206">Výsledkem by volání `Membership.FindUsersByName("A%")`, která vrátí všechny uživatele, uživatelské jméno začíná a podobně se vraťte *všechny* uživatele, přiřazovat prázdného řetězce `UsernameToMatch` vlastnost tak, aby `BindUserAccounts` bude – metoda vyvolání `Membership.FindUsersByName("%")`, a tím vrátí všechny uživatelské účty.</span><span class="sxs-lookup"><span data-stu-id="a0885-206">This would result in a call to `Membership.FindUsersByName("A%")`, which will return all users whose username starts with A. Likewise, to return *all* users, assign an empty string to the `UsernameToMatch` property so that the `BindUserAccounts` method will invoke `Membership.FindUsersByName("%")`, thereby returning all user accounts.</span></span>

<span data-ttu-id="a0885-207">Vytvořte obslužnou rutinu události pro Repeater `ItemCommand` událostí.</span><span class="sxs-lookup"><span data-stu-id="a0885-207">Create an event handler for the Repeater's `ItemCommand` event.</span></span> <span data-ttu-id="a0885-208">Tato událost je vyvolána pokaždé, když se jeden z filtrů LinkButtons dojde ke kliknutí na; je jí předán na kliknutí na prvek LinkButton `CommandName` hodnotu prostřednictvím `RepeaterCommandEventArgs` objektu.</span><span class="sxs-lookup"><span data-stu-id="a0885-208">This event is raised whenever one of the filter LinkButtons is clicked; it is passed the clicked LinkButton's `CommandName` value through the `RepeaterCommandEventArgs` object.</span></span> <span data-ttu-id="a0885-209">Musíme odpovídající hodnotu přiřadit `UsernameToMatch` vlastnost a poté zavolejte `BindUserAccounts` metody.</span><span class="sxs-lookup"><span data-stu-id="a0885-209">We need to assign the appropriate value to the `UsernameToMatch` property and then call the `BindUserAccounts` method.</span></span> <span data-ttu-id="a0885-210">Pokud `CommandName` je vše, přiřaďte prázdného řetězce `UsernameToMatch` tak, aby se zobrazují všechny uživatelské účty.</span><span class="sxs-lookup"><span data-stu-id="a0885-210">If the `CommandName` is All, assign an empty string to `UsernameToMatch` so that all user accounts are displayed.</span></span> <span data-ttu-id="a0885-211">V opačném případě přiřadit `CommandName` hodnota, která se `UsernameToMatch`.</span><span class="sxs-lookup"><span data-stu-id="a0885-211">Otherwise, assign the `CommandName` value to `UsernameToMatch`.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample10.cs)]

<span data-ttu-id="a0885-212">S tímto kódem na místě otestujte si moct funkce filtrování.</span><span class="sxs-lookup"><span data-stu-id="a0885-212">With this code in place, test out the filtering functionality.</span></span> <span data-ttu-id="a0885-213">Při první návštěvě stránky, se zobrazují všechny uživatelské účty (vrátit zpět k obrázek 5).</span><span class="sxs-lookup"><span data-stu-id="a0885-213">When the page is first visited, all user accounts are displayed (refer back to Figure 5).</span></span> <span data-ttu-id="a0885-214">Kliknutí na prvek LinkButton A vyvolá zpětné volání a vyfiltruje výsledky, pouze uživatelské účty, které začínají na A zobrazení.</span><span class="sxs-lookup"><span data-stu-id="a0885-214">Clicking the A LinkButton causes a postback and filters the results, displaying only those user accounts that start with A .</span></span>

<span data-ttu-id="a0885-215">[![Pomocí filtrování LinkButtons můžete zobrazit tyto uživatele, jejichž uživatelské jméno začíná určitým písmenem](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="a0885-215">[![Use the Filtering LinkButtons to Display those Users Whose Username Starts with a Certain Letter](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)</span></span>

<span data-ttu-id="a0885-216">**Obrázek 6**: Pomocí filtrování LinkButtons můžete zobrazit tyto uživatele jejichž uživatelské jméno začíná písmenem některých ([kliknutím ji zobrazíte obrázek v plné velikosti](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="a0885-216">**Figure 6**: Use the Filtering LinkButtons to Display those Users Whose Username Starts with a Certain Letter  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))</span></span>

## <a name="step-4-updating-the-gridview-to-use-paging"></a><span data-ttu-id="a0885-217">Krok 4: Aktualizace pomocí stránkování prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-217">Step 4: Updating the GridView to Use Paging</span></span>

<span data-ttu-id="a0885-218">GridView je zobrazen v obrázcích 5 a 6 obsahuje seznam všech záznamů vrácených z `FindUsersByName` metody.</span><span class="sxs-lookup"><span data-stu-id="a0885-218">The GridView shown in Figures 5 and 6 lists all of the records returned from the `FindUsersByName` method.</span></span> <span data-ttu-id="a0885-219">Pokud existují stovky nebo tisíce uživatelské účty to může vést k přetížení informace při zobrazení všech účtů (stejně jako v případě při kliknutí na všechny odkazem (LinkButton), nebo když zpočátku na stránce).</span><span class="sxs-lookup"><span data-stu-id="a0885-219">If there are hundreds or thousands of user accounts this can lead to information overload when viewing all of the accounts (as is the case when clicking the All LinkButton or when initially visiting the page).</span></span> <span data-ttu-id="a0885-220">Chcete-li k dispozici jsou uživatelské účty ve více spravovatelných blocích, nakonfigurujeme prvku GridView. Chcete-li zobrazit 10 uživatelských účtů najednou.</span><span class="sxs-lookup"><span data-stu-id="a0885-220">To help present the user accounts in more manageable chunks, let's configure the GridView to display 10 user accounts at a time.</span></span>

<span data-ttu-id="a0885-221">Ovládací prvek GridView nabízí dva typy stránkování:</span><span class="sxs-lookup"><span data-stu-id="a0885-221">The GridView control offers two types of paging:</span></span>

- <span data-ttu-id="a0885-222">**Výchozí stránkování** – snadno se implementuje, ale neefektivní.</span><span class="sxs-lookup"><span data-stu-id="a0885-222">**Default paging** - easy to implement, but inefficient.</span></span> <span data-ttu-id="a0885-223">Řečeno v kostce, s výchozí stránkování prvku GridView očekává *všechny* záznamů z jeho datového zdroje.</span><span class="sxs-lookup"><span data-stu-id="a0885-223">In a nutshell, with default paging the GridView expects *all* of the records from its data source.</span></span> <span data-ttu-id="a0885-224">Potom pouze zobrazí odpovídající stránku záznamy.</span><span class="sxs-lookup"><span data-stu-id="a0885-224">It then only displays the appropriate page of records.</span></span>
- <span data-ttu-id="a0885-225">**Vlastní stránkování** -vyžaduje více práce na implementaci, ale je mnohem efektivnější než výchozí stránkování, protože s vlastní stránkování dat zdroje vrátí pouze přesnou sadu záznamů pro zobrazení.</span><span class="sxs-lookup"><span data-stu-id="a0885-225">**Custom paging** - requires more work to implement, but is more efficient than default paging because with custom paging the data source returns only the precise set of records to display.</span></span>

<span data-ttu-id="a0885-226">Při procházení tisíc záznamů, může být poměrně podstatné rozdíly ve výkonnosti mezi výchozí a vlastní stránkování.</span><span class="sxs-lookup"><span data-stu-id="a0885-226">The performance difference between default and custom paging can be quite substantial when paging through thousands of records.</span></span> <span data-ttu-id="a0885-227">Vzhledem k tomu, že vytváříme může toto rozhraní předpokladu, že se stovkami nebo tisícovkami objektů uživatelské účty, použijeme vlastní stránkování.</span><span class="sxs-lookup"><span data-stu-id="a0885-227">Because we are building this interface assuming that there may be hundreds or thousands of user accounts, let's use custom paging.</span></span>

> [!NOTE]
> <span data-ttu-id="a0885-228">Podrobnější informace o rozdílech mezi výchozí a vlastní stránkování, jakož i výzvy při implementaci vlastní stránkování, najdete v tématu [efektivně stránkování prostřednictvím velkých objemů dat](https://asp.net/learn/data-access/tutorial-25-cs.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0885-228">For a more thorough discussion on the differences between default and custom paging, as well as the challenges involved in implementing custom paging, refer to [Efficiently Paging Through Large Amounts of Data](https://asp.net/learn/data-access/tutorial-25-cs.aspx).</span></span> <span data-ttu-id="a0885-229">Analýzy výkonu rozdílu mezi výchozí a vlastní stránkování, naleznete v tématu [vlastní stránkování v ASP.NET s SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0885-229">For some analysis of the performance difference between default and custom paging, see [Custom Paging in ASP.NET with SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).</span></span>

<span data-ttu-id="a0885-230">Chcete-li implementovat vlastní stránkování, potřebujeme některé mechanismus, podle kterého chcete získat přesné podmnožinu záznamů se zobrazuje v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-230">To implement custom paging we first need some mechanism by which to retrieve the precise subset of records being displayed by the GridView.</span></span> <span data-ttu-id="a0885-231">Dobrou zprávou je, že `Membership` třídy `FindUsersByName` metoda má přetížení, která umožňuje určit index stránky a velikost stránky a vrátí pouze uživatelské účty, které spadají do tohoto rozsahu záznamů.</span><span class="sxs-lookup"><span data-stu-id="a0885-231">The good news is that the `Membership` class's `FindUsersByName` method has an overload that allows us to specify the page index and page size, and returns only those user accounts that fall within that range of records.</span></span>

<span data-ttu-id="a0885-232">Konkrétně se toto přetížení má následující podpis: [ `FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)` ](https://msdn.microsoft.com/library/fa5st8b2.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0885-232">In particular, this overload has the following signature: [`FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)`](https://msdn.microsoft.com/library/fa5st8b2.aspx).</span></span>

<span data-ttu-id="a0885-233">*PageIndex* parametr určuje stránce uživatelské účty k vrácení; *pageSize* označuje, kolik záznamů se má zobrazit na stránce.</span><span class="sxs-lookup"><span data-stu-id="a0885-233">The *pageIndex* parameter specifies the page of user accounts to return; *pageSize* indicates how many records to display per page.</span></span> <span data-ttu-id="a0885-234">*TotalRecords* parametr je `out` parametr, který vrátí počet celkový počet uživatelských účtů do úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="a0885-234">The *totalRecords* parameter is an `out` parameter that returns the number of total user accounts in the user store.</span></span>

> [!NOTE]
> <span data-ttu-id="a0885-235">Data vrácená `FindUsersByName` je seřazený podle uživatelského jména; kritéria řazení nejde přizpůsobit.</span><span class="sxs-lookup"><span data-stu-id="a0885-235">The data returned by `FindUsersByName` is sorted by username; the sort criteria cannot be customized.</span></span>

<span data-ttu-id="a0885-236">Využívat vlastní stránkování, ale pouze při vázání na ovládací prvek ObjectDataSource, je možné nakonfigurovat prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-236">The GridView can be configured to utilize custom paging, but only when bound to an ObjectDataSource control.</span></span> <span data-ttu-id="a0885-237">Pro ovládací prvek ObjectDataSource implementovat vlastní stránkování, vyžaduje dvě metody: ten, který je předán index počátečního řádku a maximální počet záznamů, které chcete zobrazit, a vrátí přesné podmnožinu záznamů, které spadají do rozsahu; a metodu, která vrátí celkový počet záznamů stránkování prostřednictvím.</span><span class="sxs-lookup"><span data-stu-id="a0885-237">For the ObjectDataSource control to implement custom paging, it requires two methods: one that is passed a start row index and the maximum number of records to display, and returns the precise subset of records that fall within that span; and a method that returns the total number of records being paged through.</span></span> <span data-ttu-id="a0885-238">`FindUsersByName` Přetížení přijímá index stránky a velikost stránky a vrátí celkový počet záznamů prostřednictvím `out` parametru.</span><span class="sxs-lookup"><span data-stu-id="a0885-238">The `FindUsersByName` overload accepts a page index and page size, and returns the total number of records through an `out` parameter.</span></span> <span data-ttu-id="a0885-239">Proto je nesoulad rozhraní.</span><span class="sxs-lookup"><span data-stu-id="a0885-239">So there is an interface mismatch here.</span></span>

<span data-ttu-id="a0885-240">Jednou z možností je vytvořit třídu proxy, která vystavuje rozhraní ObjectDataSource očekává, že a interně volá `FindUsersByName` metody.</span><span class="sxs-lookup"><span data-stu-id="a0885-240">One option would be to create a proxy class that exposes the interface the ObjectDataSource expects, and then internally calls the `FindUsersByName` method.</span></span> <span data-ttu-id="a0885-241">Další možnost – a jeden že pro účely tohoto článku použijeme – je vytvořit vlastní rozhraní stránkování, který budete používat namísto integrovaných rozhraní stránkování prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-241">Another option - and the one we'll use for this article - is to create our own paging interface and use that instead of the GridView's built-in paging interface.</span></span>

### <a name="creating-a-first-previous-next-last-paging-interface"></a><span data-ttu-id="a0885-242">Vytvoření první, předchozí, v dalším kroku naposledy rozhraní stránkování</span><span class="sxs-lookup"><span data-stu-id="a0885-242">Creating a First, Previous, Next, Last Paging Interface</span></span>

<span data-ttu-id="a0885-243">První, Previous, další a poslední LinkButtons Vytvořme rozhraní stránkování.</span><span class="sxs-lookup"><span data-stu-id="a0885-243">Let's build a paging interface with First, Previous, Next, and Last LinkButtons.</span></span> <span data-ttu-id="a0885-244">Na první prvek LinkButton, po kliknutí na přenese uživatele na první stránku dat, zatímco předchozí ho vrátit na předchozí stránku.</span><span class="sxs-lookup"><span data-stu-id="a0885-244">The First LinkButton, when clicked, will take the user to the first page of data, whereas Previous will return him to the previous page.</span></span> <span data-ttu-id="a0885-245">Podobně další a poslední přesune uživatele na další a poslední stránky, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="a0885-245">Likewise, Next and Last will move the user to the next and last page, respectively.</span></span> <span data-ttu-id="a0885-246">Přidejte čtyři ovládací prvky odkazem (LinkButton) pod `UserAccounts` ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-246">Add the four LinkButton controls beneath the `UserAccounts` GridView.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample11.aspx)]

<span data-ttu-id="a0885-247">Dále vytvořte obslužnou rutinu události pro každou na prvek LinkButton `Click` události.</span><span class="sxs-lookup"><span data-stu-id="a0885-247">Next, create an event handler for each of the LinkButton's `Click` events.</span></span>

<span data-ttu-id="a0885-248">Obrázek 7 znázorňuje čtyři LinkButtons při prohlížení prostřednictvím vizuálního návrhu Web pro vývojáře.</span><span class="sxs-lookup"><span data-stu-id="a0885-248">Figure 7 shows the four LinkButtons when viewed through the Visual Web Developer Design view.</span></span>

<span data-ttu-id="a0885-249">[![Dále přidejte první, předchozí, a naposledy LinkButtons pod prvku GridView.](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="a0885-249">[![Add First, Previous, Next, and Last LinkButtons Beneath the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)</span></span>

<span data-ttu-id="a0885-250">**Obrázek 7**: Nejprve přidat předchozí a další, poslední LinkButtons pod prvku GridView ([kliknutím ji zobrazíte obrázek v plné velikosti](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="a0885-250">**Figure 7**: Add First, Previous, Next, and Last LinkButtons Beneath the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))</span></span>

### <a name="keeping-track-of-the-current-page-index"></a><span data-ttu-id="a0885-251">Udržování přehledu o Index aktuální stránky</span><span class="sxs-lookup"><span data-stu-id="a0885-251">Keeping Track of the Current Page Index</span></span>

<span data-ttu-id="a0885-252">Když první uživatel navštíví `ManageUsers.aspx` stránky nebo kliknutí jeden z filtrování tlačítek, chceme zobrazit první stránku dat v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-252">When a user first visits the `ManageUsers.aspx` page or clicks one of the filtering buttons, we want to display the first page of data in the GridView.</span></span> <span data-ttu-id="a0885-253">Po kliknutí na jednu z navigační LinkButtons, ale potřebujeme aktualizovat index stránky.</span><span class="sxs-lookup"><span data-stu-id="a0885-253">When the user clicks one of the navigation LinkButtons, however, we need to update the page index.</span></span> <span data-ttu-id="a0885-254">Udržovat index stránky a počet záznamů zobrazených na stránce, přidejte následující dvě vlastnosti do třídy modelu code-behind na stránce:</span><span class="sxs-lookup"><span data-stu-id="a0885-254">To maintain the page index and the number of records to display per page, add the following two properties to the page's code-behind class:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample12.cs)]

<span data-ttu-id="a0885-255">Podobně jako `UsernameToMatch` vlastnost, `PageIndex` vlastnost nevyřeší jeho hodnotu na zobrazení stavu.</span><span class="sxs-lookup"><span data-stu-id="a0885-255">Like the `UsernameToMatch` property, the `PageIndex` property persists its value to view state.</span></span> <span data-ttu-id="a0885-256">Jen pro čtení `PageSize` vlastnost vrací hodnotu pevně zakódované, 10.</span><span class="sxs-lookup"><span data-stu-id="a0885-256">The read-only `PageSize` property returns a hard-coded value, 10.</span></span> <span data-ttu-id="a0885-257">Můžu pozvání zúčastněným čtečky aktualizovat tuto vlastnost používat stejný vzor jako `PageIndex`a potom k posílení `ManageUsers.aspx` stránce tak, aby osoba na stránce můžete zadat, kolik uživatelských účtů zobrazených na stránce.</span><span class="sxs-lookup"><span data-stu-id="a0885-257">I invite the interested reader to update this property to use the same pattern as `PageIndex`, and then to augment the `ManageUsers.aspx` page such that the person visiting the page can specify how many user accounts to display per page.</span></span>

### <a name="retrieving-just-the-current-pages-records-updating-the-page-index-and-enabling-and-disabling-the-paging-interface-linkbuttons"></a><span data-ttu-id="a0885-258">Načítání pouze aktuální stránku záznamy, aktualizuje se Index stránky a povolení a zakázání LinkButtons stránkovacího rozhraní</span><span class="sxs-lookup"><span data-stu-id="a0885-258">Retrieving Just the Current Page's Records, Updating the Page Index, and Enabling and Disabling the Paging Interface LinkButtons</span></span>

<span data-ttu-id="a0885-259">Pomocí rozhraní stránkování na místě a `PageIndex` a `PageSize` přidat vlastnosti jsme připraveni na aktualizaci `BindUserAccounts` metodu tak, že používá odpovídající `FindUsersByName` přetížení.</span><span class="sxs-lookup"><span data-stu-id="a0885-259">With the paging interface in place and the `PageIndex` and `PageSize` properties added, we are ready to update the `BindUserAccounts` method so that it uses the appropriate `FindUsersByName` overload.</span></span> <span data-ttu-id="a0885-260">Kromě toho jsme musí být tato metoda povolí nebo zakáže rozhraní stránkování v závislosti na tom, jaké stránky se zobrazí.</span><span class="sxs-lookup"><span data-stu-id="a0885-260">Additionally, we need to have this method enable or disable the paging interface depending on what page is being displayed.</span></span> <span data-ttu-id="a0885-261">Při prohlížení na první stránce data, by mělo být zakázáno první a předchozí odkazy; Dále a poslední je třeba zakázat při prohlížení poslední stránky.</span><span class="sxs-lookup"><span data-stu-id="a0885-261">When viewing the first page of data, the First and Previous links should be disabled; Next and Last should be disabled when viewing the last page.</span></span>

<span data-ttu-id="a0885-262">Aktualizace `BindUserAccounts` metodu s následujícím kódem:</span><span class="sxs-lookup"><span data-stu-id="a0885-262">Update the `BindUserAccounts` method with the following code:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample13.cs)]

<span data-ttu-id="a0885-263">Všimněte si, že celkový počet záznamů stránkování prostřednictvím je určeno poslední parametr `FindUsersByName` metody.</span><span class="sxs-lookup"><span data-stu-id="a0885-263">Note that the total number of records being paged through is determined by the last parameter of the `FindUsersByName` method.</span></span> <span data-ttu-id="a0885-264">Jde `out` parametrů, takže musíme nejprve deklarujte proměnnou pro uchování tuto hodnotu (`totalRecords`) a potom prefix `out` – klíčové slovo.</span><span class="sxs-lookup"><span data-stu-id="a0885-264">This is an `out` parameter, so we need to first declare a variable to hold this value (`totalRecords`) and then prefix it with the `out` keyword.</span></span>

<span data-ttu-id="a0885-265">Poté, co vrátí zadanou stránku uživatelské účty, čtyři LinkButtons jsou zapnutá nebo vypnutá, v závislosti na tom, zda je na první nebo poslední stránku dat zobrazení.</span><span class="sxs-lookup"><span data-stu-id="a0885-265">After the specified page of user accounts are returned, the four LinkButtons are either enabled or disabled, depending on whether the first or last page of data is being viewed.</span></span>

<span data-ttu-id="a0885-266">Posledním krokem je napsat kód pro čtyři LinkButtons `Click` obslužných rutin událostí.</span><span class="sxs-lookup"><span data-stu-id="a0885-266">The last step is to write the code for the four LinkButtons' `Click` event handlers.</span></span> <span data-ttu-id="a0885-267">Tyto obslužné rutiny událostí, musíte si aktualizovat `PageIndex` vlastnost a poté znovu připojit data, která mají GridView prostřednictvím volání `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="a0885-267">These event handlers need to update the `PageIndex` property and then rebind the data to the GridView via a call to `BindUserAccounts`.</span></span> <span data-ttu-id="a0885-268">První, předchozí a další obslužné rutiny událostí jsou velmi jednoduché.</span><span class="sxs-lookup"><span data-stu-id="a0885-268">The First, Previous, and Next event handlers are very simple.</span></span> <span data-ttu-id="a0885-269">`Click` Obslužné rutiny události pro poslední odkazem (LinkButton), ale o něco složitější protože potřebujeme k určení, kolik záznamů se zobrazuje aby bylo možné zjistit poslední index stránky.</span><span class="sxs-lookup"><span data-stu-id="a0885-269">The `Click` event handler for the Last LinkButton, however, is a bit more complex because we need to determine how many records are being displayed in order to determine the last page index.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample14.cs)]

<span data-ttu-id="a0885-270">Obrázky 8 a 9 zobrazit rozhraní vlastní stránkování v akci.</span><span class="sxs-lookup"><span data-stu-id="a0885-270">Figures 8 and 9 show the custom paging interface in action.</span></span> <span data-ttu-id="a0885-271">Obrázek 8 ukazuje `ManageUsers.aspx` stránce při prohlížení na první stránku dat pro všechny uživatelské účty.</span><span class="sxs-lookup"><span data-stu-id="a0885-271">Figure 8 shows the `ManageUsers.aspx` page when viewing the first page of data for all user accounts.</span></span> <span data-ttu-id="a0885-272">Všimněte si, že se zobrazují jenom 10 13 účtů.</span><span class="sxs-lookup"><span data-stu-id="a0885-272">Note that only 10 of the 13 accounts are displayed.</span></span> <span data-ttu-id="a0885-273">Kliknutím na odkaz Další nebo poslední vyvolá zpětné volání, aktualizace `PageIndex` 1 a vytvoří vazbu na druhé stránce uživatelské účty do mřížky (viz obrázek 9).</span><span class="sxs-lookup"><span data-stu-id="a0885-273">Clicking the Next or Last link causes a postback, updates the `PageIndex` to 1, and binds the second page of user accounts to the grid (see Figure 9).</span></span>

<span data-ttu-id="a0885-274">[![Prvních 10 uživatelské účty se zobrazí.](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="a0885-274">[![The First 10 User Accounts are Displayed](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)</span></span>

<span data-ttu-id="a0885-275">**Obrázek 8**: Prvních 10 uživatelské účty se zobrazí ([kliknutím ji zobrazíte obrázek v plné velikosti](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="a0885-275">**Figure 8**: The First 10 User Accounts are Displayed  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))</span></span>

<span data-ttu-id="a0885-276">[![Kliknutím na následující odkaz zobrazí na druhé stránce uživatelské účty](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="a0885-276">[![Clicking the Next Link Displays the Second Page of User Accounts](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)</span></span>

<span data-ttu-id="a0885-277">**Obrázek 9**: Kliknutím na odkaz na další zobrazí druhou stránku uživatelských účtů ([kliknutím ji zobrazíte obrázek v plné velikosti](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="a0885-277">**Figure 9**: Clicking the Next Link Displays the Second Page of User Accounts  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))</span></span>

## <a name="summary"></a><span data-ttu-id="a0885-278">Souhrn</span><span class="sxs-lookup"><span data-stu-id="a0885-278">Summary</span></span>

<span data-ttu-id="a0885-279">Správci často potřebují vyberte uživatele ze seznamu účtů.</span><span class="sxs-lookup"><span data-stu-id="a0885-279">Administrators often need to select a user from the list of accounts.</span></span> <span data-ttu-id="a0885-280">V předchozích kurzech zvažovali jsme i pomocí rozevíracího seznamu vyplní s uživateli, ale nejsou adekvátní i tento přístup.</span><span class="sxs-lookup"><span data-stu-id="a0885-280">In previous tutorials we looked at using a drop-down list populated with the users, but this approach does not scale well.</span></span> <span data-ttu-id="a0885-281">V tomto kurzu Prozkoumali jsme lepší alternativou: filtrovatelné rozhraní, jejichž výsledky jsou zobrazeny v stránkovaného ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a0885-281">In this tutorial we explored a better alternative: a filterable interface whose results are displayed in a paged GridView.</span></span> <span data-ttu-id="a0885-282">Pomocí tohoto uživatelského rozhraní správci můžete rychle a efektivně najděte a vyberte jeden uživatelský účet mezi tisíců.</span><span class="sxs-lookup"><span data-stu-id="a0885-282">With this user interface, administrators can quickly and efficiently locate and select one user account among thousands.</span></span>

<span data-ttu-id="a0885-283">Všechno nejlepší programování!</span><span class="sxs-lookup"><span data-stu-id="a0885-283">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="a0885-284">Další čtení</span><span class="sxs-lookup"><span data-stu-id="a0885-284">Further Reading</span></span>

<span data-ttu-id="a0885-285">Další informace o tématech, které jsou popsané v tomto kurzu najdete na následujících odkazech:</span><span class="sxs-lookup"><span data-stu-id="a0885-285">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="a0885-286">Vlastní stránkování v ASP.NET s využitím SQL serveru 2005</span><span class="sxs-lookup"><span data-stu-id="a0885-286">Custom Paging in ASP.NET with SQL Server 2005</span></span>](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx)
- [<span data-ttu-id="a0885-287">Účinné stránkování velkých objemů dat</span><span class="sxs-lookup"><span data-stu-id="a0885-287">Efficiently Paging Through Large Amounts of Data</span></span>](https://asp.net/learn/data-access/tutorial-25-cs.aspx)
- [<span data-ttu-id="a0885-288">Vlastní nástroj pro správu webu se zajištěním provozu</span><span class="sxs-lookup"><span data-stu-id="a0885-288">Rolling Your Own Website Administration Tool</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)

### <a name="about-the-author"></a><span data-ttu-id="a0885-289">O autorovi</span><span class="sxs-lookup"><span data-stu-id="a0885-289">About the Author</span></span>

<span data-ttu-id="a0885-290">Scott Meisnerová, Autor více ASP/ASP.NET knih a zakladatelem 4GuysFromRolla.com, má pracovali Microsoft webových technologiích od roku 1998.</span><span class="sxs-lookup"><span data-stu-id="a0885-290">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a0885-291">Scott funguje jako nezávislý konzultant, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="a0885-291">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a0885-292">Jeho nejnovější knihy  *[Edice nakladatelství Sams naučit sami ASP.NET 2.0 za 24 hodin](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="a0885-292">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="a0885-293">Scott může být dostupný na adrese [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) nebo prostřednictvím na svém blogu [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="a0885-293">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="a0885-294">Speciální k</span><span class="sxs-lookup"><span data-stu-id="a0885-294">Special Thanks To</span></span>

<span data-ttu-id="a0885-295">V této sérii kurzů byl recenzován uživatelem mnoho užitečných revidující.</span><span class="sxs-lookup"><span data-stu-id="a0885-295">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a0885-296">Vedoucí kontrolor pro účely tohoto kurzu byla Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="a0885-296">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="a0885-297">Zajímat téma Moje nadcházejících článcích MSDN?</span><span class="sxs-lookup"><span data-stu-id="a0885-297">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a0885-298">Pokud ano, vyřaďte mě řádek na [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a0885-298">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="a0885-299">Next</span><span class="sxs-lookup"><span data-stu-id="a0885-299">Next</span></span>](recovering-and-changing-passwords-cs.md)
