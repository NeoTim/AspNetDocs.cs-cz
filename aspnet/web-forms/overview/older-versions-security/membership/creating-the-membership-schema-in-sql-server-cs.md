---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
title: Vytvoření schématu členství v SQL Server (C#) | Microsoft Docs
author: rick-anderson
description: Tento kurz začíná zkoumáním technik pro přidání potřebného schématu do databáze, aby bylo možné používat SqlMembershipProvider. Po připojení k síti Wi...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: b4ac129d-1b8e-41ca-a38f-9b19d7c7bb0e
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
msc.type: authoredcontent
ms.openlocfilehash: 8160c422d7a20b7c6954f960e73d5d59f7b90a5f
ms.sourcegitcommit: 4e6d586faadbe4d9ef27122f86335ec9385134af
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/28/2020
ms.locfileid: "89044737"
---
# <a name="creating-the-membership-schema-in-sql-server-c"></a><span data-ttu-id="86b34-104">Vytvoření schématu členství v SQL Serveru (C#)</span><span class="sxs-lookup"><span data-stu-id="86b34-104">Creating the Membership Schema in SQL Server (C#)</span></span>

<span data-ttu-id="86b34-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="86b34-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="86b34-106">[Stažení kódu](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) nebo [stažení PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="86b34-106">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span></span>

> <span data-ttu-id="86b34-107">Tento kurz začíná zkoumáním technik pro přidání potřebného schématu do databáze, aby bylo možné používat SqlMembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="86b34-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="86b34-108">V tomto případě probereme klíčové tabulky ve schématu a podíváme se na jejich účel a důležitost.</span><span class="sxs-lookup"><span data-stu-id="86b34-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="86b34-109">V tomto kurzu se dozvíte, jak říct aplikaci ASP.NET, kterou by měl poskytovatel členství použít.</span><span class="sxs-lookup"><span data-stu-id="86b34-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

## <a name="introduction"></a><span data-ttu-id="86b34-110">Úvod</span><span class="sxs-lookup"><span data-stu-id="86b34-110">Introduction</span></span>

<span data-ttu-id="86b34-111">Předchozí dva kurzy byly zkontrolovány pomocí ověřování pomocí formulářů k identifikaci návštěvníků webu.</span><span class="sxs-lookup"><span data-stu-id="86b34-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="86b34-112">Architektura pro ověřování pomocí formulářů umožňuje vývojářům snadno přihlašovat uživatele do webu a zapamatovat si je na stránkách přes použití ověřovacích lístků.</span><span class="sxs-lookup"><span data-stu-id="86b34-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="86b34-113">`FormsAuthentication`Třída obsahuje metody pro vygenerování lístku a jeho přidání do souborů cookie návštěvníka.</span><span class="sxs-lookup"><span data-stu-id="86b34-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="86b34-114">`FormsAuthenticationModule`Ověří všechny příchozí požadavky a pro ně s platným ověřovacím lístkem vytvoří a přidruží `GenericPrincipal` `FormsIdentity` objekt a s aktuální žádostí.</span><span class="sxs-lookup"><span data-stu-id="86b34-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="86b34-115">Ověřování pomocí formulářů je pouze mechanismus pro udělení ověřovacího lístku návštěvníkovi při přihlášení a v následných požadavcích na analýzu tohoto lístku za účelem určení identity uživatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="86b34-116">Aby webová aplikace podporovala uživatelské účty, stále musíme implementovat uživatelské úložiště a přidat funkce pro ověření přihlašovacích údajů, registraci nových uživatelů a nesčetných dalších úloh souvisejících s uživatelským účtem.</span><span class="sxs-lookup"><span data-stu-id="86b34-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="86b34-117">Před ASP.NET 2,0 byly vývojáři na vidlici pro implementaci všech úkolů souvisejících s uživatelským účtem.</span><span class="sxs-lookup"><span data-stu-id="86b34-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="86b34-118">Naštěstí tým ASP.NET tyto nedostatky rozpoznal a zavedl rámec členství v ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="86b34-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="86b34-119">Rozhraní členství je sada tříd v .NET Framework, které poskytují programové rozhraní pro provádění úloh souvisejících s uživatelským účtem.</span><span class="sxs-lookup"><span data-stu-id="86b34-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="86b34-120">Tato architektura je sestavená základem [modelem poskytovatele](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), který vývojářům umožňuje připojit přizpůsobenou implementaci do standardizovaného rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="86b34-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="86b34-121">Jak je popsáno v <a id="Tutorial1"></a> kurzu [*Základy zabezpečení a ASP.NET Support*](../introduction/security-basics-and-asp-net-support-cs.md) , .NET Framework se dodává se dvěma integrovanými zprostředkovateli členství: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) a [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx) .</span><span class="sxs-lookup"><span data-stu-id="86b34-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-cs.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="86b34-122">V takovém případě `SqlMembershipProvider` používá databáze Microsoft SQL Server jako úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="86b34-123">Aby bylo možné tohoto poskytovatele použít v aplikaci, musíme poskytovatelem sdělit, jakou databázi použít jako úložiště.</span><span class="sxs-lookup"><span data-stu-id="86b34-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="86b34-124">Jak je možné si představit, `SqlMembershipProvider` očekává, že databáze úložiště uživatelů má některé databázové tabulky, zobrazení a uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="86b34-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="86b34-125">Musíme do vybrané databáze přidat toto očekávané schéma.</span><span class="sxs-lookup"><span data-stu-id="86b34-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="86b34-126">Tento kurz začíná zkoumáním technik pro přidání potřebného schématu do databáze nástroje, aby bylo možné použít `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="86b34-127">V tomto případě probereme klíčové tabulky ve schématu a podíváme se na jejich účel a důležitost.</span><span class="sxs-lookup"><span data-stu-id="86b34-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="86b34-128">V tomto kurzu se dozvíte, jak říct aplikaci ASP.NET, kterou by měl poskytovatel členství použít.</span><span class="sxs-lookup"><span data-stu-id="86b34-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="86b34-129">Pusťme se do toho.</span><span class="sxs-lookup"><span data-stu-id="86b34-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="86b34-130">Krok 1: rozhodnutí, kam umístit úložiště uživatele</span><span class="sxs-lookup"><span data-stu-id="86b34-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="86b34-131">Data aplikace ASP.NET se běžně ukládají v několika tabulkách v databázi.</span><span class="sxs-lookup"><span data-stu-id="86b34-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="86b34-132">Při implementaci `SqlMembershipProvider` schématu databáze se musíte rozhodnout, jestli se má schéma členství umístit do stejné databáze jako data aplikace nebo do alternativní databáze.</span><span class="sxs-lookup"><span data-stu-id="86b34-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="86b34-133">Doporučujeme vyhledat schéma členství ve stejné databázi jako data aplikace z následujících důvodů:</span><span class="sxs-lookup"><span data-stu-id="86b34-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="86b34-134">**Udržovatelnost** ' aplikace, jejíž data jsou zapouzdřená v jedné databázi, je snazší pochopit, udržovat a nasazovat než aplikace, která má dvě samostatné databáze.</span><span class="sxs-lookup"><span data-stu-id="86b34-134">**Maintainability** ' an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="86b34-135">**Relační integrita** ' tím, že vyhledáte tabulky související s členstvím ve stejné databázi jako tabulky aplikace, je možné stanovit [omezení cizího klíče](http://en.wikipedia.org/wiki/Foreign_key) mezi primárními klíči v tabulkách souvisejících s členstvím a souvisejícími tabulkami aplikací.</span><span class="sxs-lookup"><span data-stu-id="86b34-135">**Relational Integrity** ' by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="86b34-136">Oddělit úložiště uživatele a data aplikací do samostatných databází dává smysl jenom v případě, že máte více aplikací, které jednotlivé databáze využívají samostatně, ale potřebují sdílet běžné uživatelské úložiště.</span><span class="sxs-lookup"><span data-stu-id="86b34-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="86b34-137">Vytvoření databáze</span><span class="sxs-lookup"><span data-stu-id="86b34-137">Creating a Database</span></span>

<span data-ttu-id="86b34-138">Aplikace, kterou jsme sestavili, protože druhý kurz ještě nevyžadoval databázi.</span><span class="sxs-lookup"><span data-stu-id="86b34-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="86b34-139">Pro úložiště uživatelů to ale budeme potřebovat.</span><span class="sxs-lookup"><span data-stu-id="86b34-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="86b34-140">Pojďme ho vytvořit a potom do něj přidat schéma vyžadované `SqlMembershipProvider` zprostředkovatelem (viz krok 2).</span><span class="sxs-lookup"><span data-stu-id="86b34-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="86b34-141">V této sérii kurzů budeme k ukládání tabulek aplikací a schématu používat databázi [edice Microsoft SQL Server 2005 Express](https://msdn.microsoft.com/sql/Aa336346.aspx) `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="86b34-142">Toto rozhodnutí bylo provedeno ze dvou důvodů: první z důvodu jeho nákladu zdarma – edice Express je nejužitečnější verze SQL Server 2005; druhý SQL Server 2005 Express Edition databáze je možné umístit přímo do složky webové aplikace a `App_Data` tím učinit cinch k zabalení databáze a webové aplikace společně v jednom souboru zip a k jejímu opětovnému nasazení bez jakýchkoli zvláštních instrukcí pro instalaci nebo možností konfigurace.</span><span class="sxs-lookup"><span data-stu-id="86b34-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="86b34-143">Pokud byste chtěli postupovat s použitím SQL Server verze non-Express edice, je to klidně.</span><span class="sxs-lookup"><span data-stu-id="86b34-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="86b34-144">Postup je prakticky identický.</span><span class="sxs-lookup"><span data-stu-id="86b34-144">The steps are virtually identical.</span></span> <span data-ttu-id="86b34-145">`SqlMembershipProvider`Schéma bude fungovat s libovolnou verzí Microsoft SQL Server 2000 a.</span><span class="sxs-lookup"><span data-stu-id="86b34-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>

<span data-ttu-id="86b34-146">V Průzkumník řešení klikněte pravým tlačítkem myši na `App_Data` složku a vyberte možnost Přidat novou položku.</span><span class="sxs-lookup"><span data-stu-id="86b34-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="86b34-147">(Pokud v projektu nevidíte `App_Data` složku, klikněte pravým tlačítkem myši na projekt v Průzkumník řešení, vyberte Přidat složku ASP.NET a vyberte `App_Data` .) V dialogovém okně Přidat novou položku vyberte možnost Přidat novou SQL Database s názvem `SecurityTutorials.mdf` .</span><span class="sxs-lookup"><span data-stu-id="86b34-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="86b34-148">V tomto kurzu přidáme `SqlMembershipProvider` schéma do této databáze. v dalších kurzech vytvoříme další tabulky pro zachycení dat aplikace.</span><span class="sxs-lookup"><span data-stu-id="86b34-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>

<span data-ttu-id="86b34-149">[![Přidat nový SQL Database s názvem databáze SecurityTutorials. mdf do složky App_Data](creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)</span></span>

<span data-ttu-id="86b34-150">**Obrázek 1**: přidání nové SQL Database s názvem `SecurityTutorials.mdf` databáze do `App_Data` složky ([kliknutím zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="86b34-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))</span></span>

<span data-ttu-id="86b34-151">Přidání databáze do složky se `App_Data` automaticky zahrne do zobrazení Průzkumníka databáze.</span><span class="sxs-lookup"><span data-stu-id="86b34-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="86b34-152">(Ve verzi aplikace Visual Studio, která není edice Express, se Průzkumník databáze nazývá Průzkumník serveru.) Přejít do Průzkumníka databáze a rozšířit právě přidanou `SecurityTutorials` databázi.</span><span class="sxs-lookup"><span data-stu-id="86b34-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="86b34-153">Pokud nevidíte Průzkumník databáze na obrazovce, přejděte do nabídky Zobrazit a zvolte Průzkumník databáze nebo stiskněte kombinaci kláves CTRL + ALT + S.</span><span class="sxs-lookup"><span data-stu-id="86b34-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="86b34-154">Jak ukazuje obrázek 2, `SecurityTutorials` je databáze prázdná – neobsahuje žádné tabulky, žádná zobrazení a žádné uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="86b34-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>

<span data-ttu-id="86b34-155">[![Databáze SecurityTutorials je aktuálně prázdná.](creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)</span></span>

<span data-ttu-id="86b34-156">**Obrázek 2**: `SecurityTutorials` databáze je aktuálně prázdná ([kliknutím zobrazíte obrázek v plné velikosti).](creating-the-membership-schema-in-sql-server-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image6.png))</span></span>

## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="86b34-157">Krok 2: přidání `SqlMembershipProvider` schématu do databáze</span><span class="sxs-lookup"><span data-stu-id="86b34-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="86b34-158">`SqlMembershipProvider`Vyžaduje, aby byla v databázi úložiště uživatelů nainstalována konkrétní sada tabulek, zobrazení a uložených procedur.</span><span class="sxs-lookup"><span data-stu-id="86b34-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="86b34-159">Tyto požadované objekty databáze je možné přidat pomocí [ `aspnet_regsql.exe` nástroje](https://msdn.microsoft.com/library/ms229862.aspx).</span><span class="sxs-lookup"><span data-stu-id="86b34-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="86b34-160">Tento soubor je umístěn ve `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` složce.</span><span class="sxs-lookup"><span data-stu-id="86b34-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="86b34-161">`aspnet_regsql.exe`Nástroj nabízí jak funkci příkazového řádku, tak grafické uživatelské rozhraní.</span><span class="sxs-lookup"><span data-stu-id="86b34-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="86b34-162">Grafické rozhraní je uživatelsky přívětivější a podíváme se v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="86b34-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="86b34-163">Rozhraní příkazového řádku je užitečné v případě, že přidání `SqlMembershipProvider` schématu musí být automatizováno, například ve skriptech sestavení nebo v automatizovaných testovacích scénářích.</span><span class="sxs-lookup"><span data-stu-id="86b34-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>

<span data-ttu-id="86b34-164">`aspnet_regsql.exe`Nástroj se používá k přidání nebo odebrání *ASP.NET aplikačních služeb* do zadané databáze SQL Server.</span><span class="sxs-lookup"><span data-stu-id="86b34-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="86b34-165">Služba ASP.NET Application Services zahrnuje schémata pro `SqlMembershipProvider` a `SqlRoleProvider` spolu se schématy pro poskytovatele založené na SQL pro jiné architektury ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="86b34-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="86b34-166">K nástroji musíme poskytnout dvě bity informací `aspnet_regsql.exe` :</span><span class="sxs-lookup"><span data-stu-id="86b34-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="86b34-167">Zda chceme přidat nebo odebrat aplikační služby a</span><span class="sxs-lookup"><span data-stu-id="86b34-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="86b34-168">Databáze, ze které se má přidat nebo odebrat schéma služby Application Services</span><span class="sxs-lookup"><span data-stu-id="86b34-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="86b34-169">Při zobrazení výzvy k použití databáze `aspnet_regsql.exe` vás nástroj vyzve k zadání názvu serveru, na kterém je databáze umístěna, pověření zabezpečení pro připojení k databázi a názvu databáze.</span><span class="sxs-lookup"><span data-stu-id="86b34-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="86b34-170">Pokud používáte SQL Server bez verze Express, měli byste již znát tyto informace, protože se jedná o stejné informace, které je nutné poskytnout prostřednictvím připojovacího řetězce při práci s databází prostřednictvím webové stránky ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="86b34-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="86b34-171">Určení názvu serveru a databáze při použití databáze SQL Server 2005 Express Edition ve `App_Data` složce se ale trochu zabývají.</span><span class="sxs-lookup"><span data-stu-id="86b34-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="86b34-172">V následující části je jasné, jak zadat název serveru a databáze pro databázi SQL Server 2005 Express Edition do `App_Data` složky.</span><span class="sxs-lookup"><span data-stu-id="86b34-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="86b34-173">Pokud nepoužíváte SQL Server 2005 Express Edition bez obav, můžete přeskočit k části instalace Aplikační služby.</span><span class="sxs-lookup"><span data-stu-id="86b34-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theapp_datafolder"></a><span data-ttu-id="86b34-174">Určení názvu serveru a databáze pro databázi SQL Server 2005 Express Edition ve `App_Data` složce</span><span class="sxs-lookup"><span data-stu-id="86b34-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="86b34-175">Aby bylo možné použít `aspnet_regsql.exe` nástroj, musíme znát název serveru a databáze.</span><span class="sxs-lookup"><span data-stu-id="86b34-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="86b34-176">Název serveru je `localhost\InstanceName` .</span><span class="sxs-lookup"><span data-stu-id="86b34-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="86b34-177">Nejpravděpodobněji je *instance* `SQLExpress` .</span><span class="sxs-lookup"><span data-stu-id="86b34-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="86b34-178">Pokud jste však nainstalovali SQL Server 2005 Express Edition ručně (to znamená, že jste ho při instalaci sady Visual Studio nenainstalovali automaticky), je možné, že jste vybrali jiný název instance.</span><span class="sxs-lookup"><span data-stu-id="86b34-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="86b34-179">Název databáze je bitová trickier, která se má určit.</span><span class="sxs-lookup"><span data-stu-id="86b34-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="86b34-180">Databáze ve `App_Data` složce mají obvykle název databáze, který obsahuje [globálně jedinečný identifikátor](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) spolu s cestou k databázovému souboru.</span><span class="sxs-lookup"><span data-stu-id="86b34-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="86b34-181">Aby bylo možné přidat schéma služby Application Services přes, je nutné určit název této databáze `aspnet_regsql.exe` .</span><span class="sxs-lookup"><span data-stu-id="86b34-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="86b34-182">Nejjednodušší způsob, jak zjistit název databáze, je prozkoumávat ji pomocí SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="86b34-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="86b34-183">SQL Server Management Studio poskytuje grafické rozhraní pro správu databází SQL Server 2005, ale nedodává se s edicí Express verze SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="86b34-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="86b34-184">Dobrá zpráva je, že si [můžete stáhnout](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) bezplatnou verzi Express SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="86b34-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="86b34-185">Pokud máte na počítači nainstalovanou verzi SQL Server 2005, která není edice Express Express, je pravděpodobně nainstalovaná plná verze Management Studio.</span><span class="sxs-lookup"><span data-stu-id="86b34-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="86b34-186">Pomocí úplné verze můžete určit název databáze podle stejných kroků, jak je uvedeno níže pro edici Express.</span><span class="sxs-lookup"><span data-stu-id="86b34-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>

<span data-ttu-id="86b34-187">Začněte zavřením sady Visual Studio, abyste zajistili, že všechny zámky, které Visual Studio zaručí v souboru databáze, se zavřou.</span><span class="sxs-lookup"><span data-stu-id="86b34-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="86b34-188">Dále spusťte SQL Server Management Studio a připojte se k `localhost\InstanceName` databázi pro SQL Server 2005 Express Edition.</span><span class="sxs-lookup"><span data-stu-id="86b34-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="86b34-189">Jak bylo uvedeno dříve, je pravděpodobné, že je název instance `SQLExpress` .</span><span class="sxs-lookup"><span data-stu-id="86b34-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="86b34-190">Jako možnost ověřování vyberte ověřování systému Windows.</span><span class="sxs-lookup"><span data-stu-id="86b34-190">For the Authentication option, select Windows Authentication.</span></span>

<span data-ttu-id="86b34-191">[![Připojit k instanci SQL Server 2005 Express Edition](creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)</span></span>

<span data-ttu-id="86b34-192">**Obrázek 3**: Připojte se k instanci SQL Server 2005 Express Edition ([kliknutím zobrazíte obrázek v plné velikosti).](creating-the-membership-schema-in-sql-server-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image9.png))</span></span>

<span data-ttu-id="86b34-193">Po připojení k instanci SQL Server 2005 Express Edition Management Studio zobrazí složky pro databáze, nastavení zabezpečení, objekty serveru atd.</span><span class="sxs-lookup"><span data-stu-id="86b34-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="86b34-194">Pokud rozbalíte kartu databáze, zjistíte, že `SecurityTutorials.mdf` databáze není *not* zaregistrovaná v instanci databáze. je potřeba nejdřív připojit databázi.</span><span class="sxs-lookup"><span data-stu-id="86b34-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="86b34-195">Klikněte pravým tlačítkem na složku databáze a v místní nabídce vyberte připojit.</span><span class="sxs-lookup"><span data-stu-id="86b34-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="86b34-196">Tím se zobrazí dialogové okno připojit databáze.</span><span class="sxs-lookup"><span data-stu-id="86b34-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="86b34-197">Odsud klikněte na tlačítko Přidat, přejděte do `SecurityTutorials.mdf` databáze a klikněte na tlačítko OK.</span><span class="sxs-lookup"><span data-stu-id="86b34-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="86b34-198">Obrázek 4: po výběru databáze se zobrazí dialogové okno připojit databáze `SecurityTutorials.mdf` .</span><span class="sxs-lookup"><span data-stu-id="86b34-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="86b34-199">Po úspěšném připojení databáze se na obrázku 5 zobrazuje Průzkumník objektů Management Studio.</span><span class="sxs-lookup"><span data-stu-id="86b34-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>

<span data-ttu-id="86b34-200">[![Připojení databáze SecurityTutorials. mdf](creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)</span></span>

<span data-ttu-id="86b34-201">**Obrázek 4**: připojení `SecurityTutorials.mdf` databáze ([kliknutím zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="86b34-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))</span></span>

<span data-ttu-id="86b34-202">[![Databáze SecurityTutorials. mdf se zobrazí ve složce databáze.](creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)</span></span>

<span data-ttu-id="86b34-203">**Obrázek 5**: `SecurityTutorials.mdf` databáze se zobrazí ve složce databáze ([kliknutím zobrazíte obrázek v plné velikosti).](creating-the-membership-schema-in-sql-server-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image15.png))</span></span>

<span data-ttu-id="86b34-204">Jak ukazuje obrázek 5, `SecurityTutorials.mdf` má databáze spíše abstruse název.</span><span class="sxs-lookup"><span data-stu-id="86b34-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="86b34-205">Pojďme změnit na srozumitelnější (a jednodušší typ) názvu.</span><span class="sxs-lookup"><span data-stu-id="86b34-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="86b34-206">Klikněte pravým tlačítkem na databázi, v místní nabídce vyberte Přejmenovat a přejmenujte ji `SecurityTutorialsDatabase` .</span><span class="sxs-lookup"><span data-stu-id="86b34-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="86b34-207">Tento název souboru se nezmění, stačí pouze název, který databáze používá k identifikaci SQL Server.</span><span class="sxs-lookup"><span data-stu-id="86b34-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>

<span data-ttu-id="86b34-208">[![Přejmenujte databázi na SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)</span></span>

<span data-ttu-id="86b34-209">**Obrázek 6**: Přejmenování databáze na `SecurityTutorialsDatabase` ([kliknutím zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="86b34-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))</span></span>

<span data-ttu-id="86b34-210">V tomto okamžiku víme, že název serveru a databáze pro `SecurityTutorials.mdf` soubor databáze: `localhost\InstanceName` a v `SecurityTutorialsDatabase` uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="86b34-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="86b34-211">Nyní jsme připraveni nainstalovat aplikační služby prostřednictvím tohoto `aspnet_regsql.exe` nástroje.</span><span class="sxs-lookup"><span data-stu-id="86b34-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="86b34-212">Instalace Aplikační služby</span><span class="sxs-lookup"><span data-stu-id="86b34-212">Installing the Application Services</span></span>

<span data-ttu-id="86b34-213">Chcete-li spustit `aspnet_regsql.exe` nástroj, přejděte do nabídky Start a klikněte na příkaz Spustit.</span><span class="sxs-lookup"><span data-stu-id="86b34-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="86b34-214">`%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe`Do textového pole zadejte a klikněte na OK.</span><span class="sxs-lookup"><span data-stu-id="86b34-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="86b34-215">Případně můžete použít Průzkumníka Windows k přechodu k podrobnostem do příslušné složky a dvakrát kliknout na `aspnet_regsql.exe` soubor.</span><span class="sxs-lookup"><span data-stu-id="86b34-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="86b34-216">Při obou přístupech dojde k rozhledání stejných výsledků.</span><span class="sxs-lookup"><span data-stu-id="86b34-216">Either approach will net the same results.</span></span>

<span data-ttu-id="86b34-217">Spuštění `aspnet_regsql.exe` nástroje bez argumentů příkazového řádku spustí grafické uživatelské rozhraní průvodce ASP.NET SQL Server Setup.</span><span class="sxs-lookup"><span data-stu-id="86b34-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="86b34-218">Průvodce usnadňuje přidání nebo odebrání aplikačních služeb ASP.NET v zadané databázi.</span><span class="sxs-lookup"><span data-stu-id="86b34-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="86b34-219">První obrazovka průvodce, zobrazená na obrázku 7, popisuje účel tohoto nástroje.</span><span class="sxs-lookup"><span data-stu-id="86b34-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>

<span data-ttu-id="86b34-220">[![Pomocí Průvodce instalací SQL Server ASP.NET můžete přidat schéma členství.](creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)</span></span>

<span data-ttu-id="86b34-221">**Obrázek 7**: pomocí průvodce instalací SQL Server ASP.NET můžete přidat schéma členství ([kliknutím zobrazíte obrázek v plné velikosti).](creating-the-membership-schema-in-sql-server-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image21.png))</span></span>

<span data-ttu-id="86b34-222">Druhý krok v Průvodci vás zeptá, jestli chceme přidat aplikační služby nebo je odebrat.</span><span class="sxs-lookup"><span data-stu-id="86b34-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="86b34-223">Vzhledem k tomu, že chceme přidat tabulky, zobrazení a uložené procedury, které jsou nezbytné pro `SqlMembershipProvider` , vyberte možnost konfigurace SQL Server pro aplikační služby.</span><span class="sxs-lookup"><span data-stu-id="86b34-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="86b34-224">Pokud později chcete toto schéma z databáze odebrat, spusťte tohoto průvodce znovu, ale místo toho vyberte možnost odebrat informace o službě aplikace z existující databáze.</span><span class="sxs-lookup"><span data-stu-id="86b34-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>

<span data-ttu-id="86b34-225">[![Vyberte možnost konfigurovat SQL Server pro Aplikační služby](creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)</span></span>

<span data-ttu-id="86b34-226">**Obrázek 8**: vyberte možnost konfigurovat SQL Server pro aplikační služby ([kliknutím zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-cs/_static/image24.png)).</span><span class="sxs-lookup"><span data-stu-id="86b34-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image24.png))</span></span>

<span data-ttu-id="86b34-227">Třetí krok vás vyzve k zadání informací o databázi: název serveru, ověřovací informace a název databáze.</span><span class="sxs-lookup"><span data-stu-id="86b34-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="86b34-228">Pokud jste spolu s tímto kurzem pojmenovali a Přidali jste `SecurityTutorials.mdf` databázi do, `App_Data` připojili ji k `localhost\InstanceName` a přejmenovali ji na `SecurityTutorialsDatabase` , pak použijte následující hodnoty:</span><span class="sxs-lookup"><span data-stu-id="86b34-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="86b34-229">WebServer `localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="86b34-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="86b34-230">Ověřování systému Windows</span><span class="sxs-lookup"><span data-stu-id="86b34-230">Windows authentication</span></span>
- <span data-ttu-id="86b34-231">Databáze `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="86b34-231">Database: `SecurityTutorialsDatabase`</span></span>

<span data-ttu-id="86b34-232">[![Zadejte informace o databázi.](creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)</span></span>

<span data-ttu-id="86b34-233">**Obrázek 9**: zadání informací o databázi ([kliknutím zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="86b34-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))</span></span>

<span data-ttu-id="86b34-234">Po zadání informací o databázi klikněte na další.</span><span class="sxs-lookup"><span data-stu-id="86b34-234">After entering the database information, click Next.</span></span> <span data-ttu-id="86b34-235">Poslední krok shrnuje kroky, které se provedou.</span><span class="sxs-lookup"><span data-stu-id="86b34-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="86b34-236">Kliknutím na tlačítko Další nainstalujte aplikační služby a pak dokončete průvodce.</span><span class="sxs-lookup"><span data-stu-id="86b34-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="86b34-237">Pokud jste použili Management Studio k připojení databáze a přejmenování souboru databáze, nezapomeňte před znovu otevřením sady Visual Studio odpojit databázi a zavřít Management Studio.</span><span class="sxs-lookup"><span data-stu-id="86b34-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="86b34-238">Databázi odpojíte tak `SecurityTutorialsDatabase` , že kliknete pravým tlačítkem na název databáze a v nabídce úlohy zvolíte odpojit.</span><span class="sxs-lookup"><span data-stu-id="86b34-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>

<span data-ttu-id="86b34-239">Po dokončení průvodce se vraťte do sady Visual Studio a přejděte do Průzkumníka databáze.</span><span class="sxs-lookup"><span data-stu-id="86b34-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="86b34-240">Rozbalte složku tabulky.</span><span class="sxs-lookup"><span data-stu-id="86b34-240">Expand the Tables folder.</span></span> <span data-ttu-id="86b34-241">Měla by se zobrazit řada tabulek, jejichž názvy začínají předponou `aspnet_` .</span><span class="sxs-lookup"><span data-stu-id="86b34-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="86b34-242">Podobně je možné najít řadu zobrazení a uložených procedur ve složkách zobrazení a uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="86b34-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="86b34-243">Tyto databázové objekty tvoří schéma služby Application Services.</span><span class="sxs-lookup"><span data-stu-id="86b34-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="86b34-244">V kroku 3 prověříme objekty databáze pro členství a pro konkrétní role.</span><span class="sxs-lookup"><span data-stu-id="86b34-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>

<span data-ttu-id="86b34-245">[![Do databáze se přidala celá řada tabulek, zobrazení a uložených procedur.](creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)</span></span>

<span data-ttu-id="86b34-246">**Obrázek 10**: do databáze se přidala celá řada tabulek, zobrazení a uložených procedur ([kliknutím zobrazíte obrázek v plné velikosti).](creating-the-membership-schema-in-sql-server-cs/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="86b34-247">`aspnet_regsql.exe`Grafické uživatelské rozhraní nástroje nainstaluje celé schéma služby Application Services.</span><span class="sxs-lookup"><span data-stu-id="86b34-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="86b34-248">Ale při provádění `aspnet_regsql.exe` z příkazového řádku můžete určit, jaké konkrétní součásti aplikačních služeb nainstalovat (nebo odebrat).</span><span class="sxs-lookup"><span data-stu-id="86b34-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="86b34-249">Proto pokud chcete přidat pouze tabulky, zobrazení a uložené procedury, které jsou nezbytné pro `SqlMembershipProvider` `SqlRoleProvider` poskytovatele a, spusťte `aspnet_regsql.exe` z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="86b34-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="86b34-250">Alternativně můžete ručně spustit vhodnou podmnožinu rutin T-SQL Create Scripts, kterou používá `aspnet_regsql.exe` .</span><span class="sxs-lookup"><span data-stu-id="86b34-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="86b34-251">Tyto skripty se nachází ve `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` složce s názvy, jako jsou,,, `InstallCommon.sql` `InstallMembership.sql` `InstallRoles.sql` `InstallProfile.sql` , `InstallSqlState.sql` a tak dále.</span><span class="sxs-lookup"><span data-stu-id="86b34-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`,`InstallMembership.sql`,`InstallRoles.sql`, `InstallProfile.sql`,`InstallSqlState.sql`, and so on.</span></span>

<span data-ttu-id="86b34-252">V tuto chvíli jsme vytvořili databázové objekty, které potřebuje `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="86b34-253">Stále ale musíme instruovat rámec členství, který by měl používat `SqlMembershipProvider` (vs, říkáme `ActiveDirectoryMembershipProvider` ) a který `SqlMembershipProvider` by měl `SecurityTutorials` databázi používat.</span><span class="sxs-lookup"><span data-stu-id="86b34-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="86b34-254">Podíváme se na to, jak určit poskytovatele, který se má použít, a jak přizpůsobit nastavení vybraného poskytovatele v kroku 4.</span><span class="sxs-lookup"><span data-stu-id="86b34-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="86b34-255">Nejdřív se podíváme na objekty databáze, které jste právě vytvořili.</span><span class="sxs-lookup"><span data-stu-id="86b34-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="86b34-256">Krok 3: Prohlédněte si základní tabulky schématu</span><span class="sxs-lookup"><span data-stu-id="86b34-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="86b34-257">Při práci s architekturou členství a rolí v aplikaci ASP.NET jsou podrobnosti implementace zapouzdřeny zprostředkovatelem.</span><span class="sxs-lookup"><span data-stu-id="86b34-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="86b34-258">V budoucích kurzech se s těmito rozhraními přihlásíme prostřednictvím .NET Framework `Membership` a `Roles` tříd.</span><span class="sxs-lookup"><span data-stu-id="86b34-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="86b34-259">Pokud používáte tato rozhraní API na vysoké úrovni, nemusíte se v dodržovali s podrobnostmi na nízké úrovni, jako jsou třeba dotazy, které jsou spouštěny nebo které tabulky upravují `SqlMembershipProvider` a `SqlRoleProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="86b34-260">V tomto případě jsme mohli bez obav použít rámec členství a rolí, aniž byste prozkoumali schéma databáze vytvořené v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="86b34-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="86b34-261">Při vytváření tabulek pro ukládání aplikačních dat ale můžeme potřebovat vytvořit entity, které se vztahují na uživatele nebo role.</span><span class="sxs-lookup"><span data-stu-id="86b34-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="86b34-262">Pomáhá znát `SqlMembershipProvider` `SqlRoleProvider` schémata a při určování omezení cizího klíče mezi tabulkami dat aplikace a tabulkami vytvořenými v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="86b34-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="86b34-263">Kromě toho může být někdy nutné použít rozhraní s uživateli a rolemi role přímo na úrovni databáze (místo přes `Membership` `Roles` třídy nebo).</span><span class="sxs-lookup"><span data-stu-id="86b34-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="86b34-264">Rozdělení uživatelského úložiště do aplikací</span><span class="sxs-lookup"><span data-stu-id="86b34-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="86b34-265">Rozhraní pro členství a role jsou navržena tak, aby bylo možné sdílet jediné úložiště uživatelů a rolí mezi mnoha různými aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="86b34-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="86b34-266">Aplikace ASP.NET, která používá rámec členství nebo rolí, musí určovat, který oddíl aplikace se má použít.</span><span class="sxs-lookup"><span data-stu-id="86b34-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="86b34-267">V krátkém případě může více webových aplikací používat stejné úložiště uživatelů a rolí.</span><span class="sxs-lookup"><span data-stu-id="86b34-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="86b34-268">Obrázek 11 znázorňuje úložiště uživatelů a rolí, která jsou rozdělená na tři aplikace: HRSite, CustomerSite a SalesSite.</span><span class="sxs-lookup"><span data-stu-id="86b34-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="86b34-269">Každá z těchto tří webových aplikací má své vlastní jedinečné uživatele a role, ale všechny fyzicky ukládají informace o uživatelských účtech a rolích ve stejných databázových tabulkách.</span><span class="sxs-lookup"><span data-stu-id="86b34-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>

<span data-ttu-id="86b34-270">[![Uživatelské účty můžou být rozdělené mezi několik aplikací.](creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)</span></span>

<span data-ttu-id="86b34-271">**Obrázek 11**: uživatelské účty můžou být rozdělené mezi více aplikací ([kliknutím zobrazíte obrázek v plné velikosti).](creating-the-membership-schema-in-sql-server-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="86b34-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image33.png))</span></span>

<span data-ttu-id="86b34-272">V `aspnet_Applications` tabulce jsou tyto oddíly definovány.</span><span class="sxs-lookup"><span data-stu-id="86b34-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="86b34-273">Každá aplikace, která používá databázi k ukládání informací o uživatelském účtu, je reprezentována řádkem v této tabulce.</span><span class="sxs-lookup"><span data-stu-id="86b34-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="86b34-274">`aspnet_Applications`Tabulka obsahuje čtyři sloupce: `ApplicationId` , `ApplicationName` , `LoweredApplicationName` a `Description` .</span><span class="sxs-lookup"><span data-stu-id="86b34-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.</span></span> <span data-ttu-id="86b34-275">`ApplicationId` je typu [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) a je primární klíč tabulky; `ApplicationName` poskytuje jedinečný popisný název pro každou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="86b34-275">`ApplicationId` is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="86b34-276">Ostatní tabulky vztahující se k členství a rolím odkazují zpátky na `ApplicationId` pole v `aspnet_Applications` .</span><span class="sxs-lookup"><span data-stu-id="86b34-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="86b34-277">Například `aspnet_Users` tabulka, která obsahuje záznam pro každý uživatelský účet, má `ApplicationId` pole cizího klíče; Ditto pro `aspnet_Roles` tabulku.</span><span class="sxs-lookup"><span data-stu-id="86b34-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="86b34-278">`ApplicationId`Pole v těchto tabulkách určuje oddíl aplikace, ke kterému patří uživatelský účet nebo role.</span><span class="sxs-lookup"><span data-stu-id="86b34-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="86b34-279">Ukládání informací o uživatelském účtu</span><span class="sxs-lookup"><span data-stu-id="86b34-279">Storing User Account Information</span></span>

<span data-ttu-id="86b34-280">Informace o uživatelském účtu jsou umístěné ve dvou tabulkách: `aspnet_Users` a `aspnet_Membership` .</span><span class="sxs-lookup"><span data-stu-id="86b34-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="86b34-281">`aspnet_Users`Tabulka obsahuje pole, která obsahují základní informace o uživatelském účtu.</span><span class="sxs-lookup"><span data-stu-id="86b34-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="86b34-282">Tři nejvíce relevantní sloupce jsou:</span><span class="sxs-lookup"><span data-stu-id="86b34-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="86b34-283">`UserId` je primární klíč (a typu `uniqueidentifier` ).</span><span class="sxs-lookup"><span data-stu-id="86b34-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="86b34-284">`UserName` je typu `nvarchar(256)` a společně s heslem, tvoří přihlašovací údaje uživatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="86b34-285">(Heslo uživatele je uloženo v `aspnet_Membership` tabulce.) `ApplicationId` propojí uživatelský účet s konkrétní aplikací v nástroji `aspnet_Applications` .</span><span class="sxs-lookup"><span data-stu-id="86b34-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="86b34-286">Na sloupcích a je složené [ `UNIQUE` omezení](https://msdn.microsoft.com/library/ms191166.aspx) `UserName` `ApplicationId` .</span><span class="sxs-lookup"><span data-stu-id="86b34-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="86b34-287">Tím je zajištěno, že v dané aplikaci je každé uživatelské jméno jedinečné, ale umožňuje použití stejného typu `UserName` v různých aplikacích.</span><span class="sxs-lookup"><span data-stu-id="86b34-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="86b34-288">`aspnet_Membership`Tabulka obsahuje další informace o uživatelském účtu, například heslo, e-mailovou adresu, poslední datum a čas přihlášení a tak dále.</span><span class="sxs-lookup"><span data-stu-id="86b34-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="86b34-289">Mezi záznamy v tabulkách a se vyskytuje jedna souvislost `aspnet_Users` `aspnet_Membership` .</span><span class="sxs-lookup"><span data-stu-id="86b34-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="86b34-290">Tento vztah je zajištěný `UserId` polem v `aspnet_Membership` , které slouží jako primární klíč tabulky.</span><span class="sxs-lookup"><span data-stu-id="86b34-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="86b34-291">Podobně jako v `aspnet_Users` tabulce `aspnet_Membership` obsahuje `ApplicationId` pole, které spojuje tyto informace s konkrétním oddílem aplikace.</span><span class="sxs-lookup"><span data-stu-id="86b34-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="86b34-292">Zabezpečení hesel</span><span class="sxs-lookup"><span data-stu-id="86b34-292">Securing Passwords</span></span>

<span data-ttu-id="86b34-293">Informace o heslech jsou uloženy v `aspnet_Membership` tabulce.</span><span class="sxs-lookup"><span data-stu-id="86b34-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="86b34-294">`SqlMembershipProvider`Umožňuje ukládat hesla v databázi pomocí jedné z následujících tří postupů:</span><span class="sxs-lookup"><span data-stu-id="86b34-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="86b34-295">**Clear** – heslo je uloženo v databázi jako prostý text.</span><span class="sxs-lookup"><span data-stu-id="86b34-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="86b34-296">Tuto možnost rozhodně neodrazí.</span><span class="sxs-lookup"><span data-stu-id="86b34-296">I strongly discourage using this option.</span></span> <span data-ttu-id="86b34-297">Pokud je databáze ohrožená hackerem, který vyhledává zadní vrátka nebo Disgruntled zaměstnanec, který má přístup k databázi, jsou k dispozici pouze pověření jednotlivých uživatelů.</span><span class="sxs-lookup"><span data-stu-id="86b34-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="86b34-298">**Hash** – hesla se používají pomocí jednosměrného algoritmu hash a náhodně generované hodnoty Salt.</span><span class="sxs-lookup"><span data-stu-id="86b34-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="86b34-299">Tato hodnota hash (spolu s hodnotou Salt) je uložená v databázi.</span><span class="sxs-lookup"><span data-stu-id="86b34-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="86b34-300">**Šifrované** – zašifrovaná verze hesla je uložená v databázi.</span><span class="sxs-lookup"><span data-stu-id="86b34-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="86b34-301">Použitá technika úložiště hesla závisí na `SqlMembershipProvider` nastaveních uvedených v `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="86b34-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="86b34-302">Podíváme se na přizpůsobení `SqlMembershipProvider` nastavení v kroku 4.</span><span class="sxs-lookup"><span data-stu-id="86b34-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="86b34-303">Výchozím chováním je uložení hodnoty hash hesla.</span><span class="sxs-lookup"><span data-stu-id="86b34-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="86b34-304">Sloupce zodpovědné za uložení hesla jsou `Password` , `PasswordFormat` a `PasswordSalt` .</span><span class="sxs-lookup"><span data-stu-id="86b34-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="86b34-305">`PasswordFormat` je pole typu, `int` jehož hodnota označuje techniku použitou pro uložení hesla: 0 pro Clear; 1 pro hodnotu Hashed; 2 pro šifrování.</span><span class="sxs-lookup"><span data-stu-id="86b34-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="86b34-306">`PasswordSalt` je přiřazen náhodně vygenerovaný řetězec bez ohledu na použitou techniku úložiště hesla; hodnota `PasswordSalt` se používá jenom v případě, že se počítá hodnota hash hesla.</span><span class="sxs-lookup"><span data-stu-id="86b34-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="86b34-307">Nakonec `Password` sloupec obsahuje skutečná data o heslech, jedná se o heslo s prostým textem, hodnotu hash hesla nebo šifrované heslo.</span><span class="sxs-lookup"><span data-stu-id="86b34-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="86b34-308">Tabulka 1 znázorňuje, jaké tři sloupce můžou vypadat jako u různých technik úložiště při ukládání hesla MySecret!</span><span class="sxs-lookup"><span data-stu-id="86b34-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="86b34-309">.</span><span class="sxs-lookup"><span data-stu-id="86b34-309">.</span></span>

| <span data-ttu-id="86b34-310">**O3a techniky úložiště &lt; \_ \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="86b34-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="86b34-311">**Heslo &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="86b34-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="86b34-312">**PasswordFormat &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="86b34-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="86b34-313">**PasswordSalt &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="86b34-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="86b34-314">Vymazat</span><span class="sxs-lookup"><span data-stu-id="86b34-314">Clear</span></span> | <span data-ttu-id="86b34-315">MySecret!</span><span class="sxs-lookup"><span data-stu-id="86b34-315">MySecret!</span></span> | <span data-ttu-id="86b34-316">0</span><span class="sxs-lookup"><span data-stu-id="86b34-316">0</span></span> | <span data-ttu-id="86b34-317">tTnkPlesqissc2y2SMEygA = =</span><span class="sxs-lookup"><span data-stu-id="86b34-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="86b34-318">Rozdělí</span><span class="sxs-lookup"><span data-stu-id="86b34-318">Hashed</span></span> | <span data-ttu-id="86b34-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM =</span><span class="sxs-lookup"><span data-stu-id="86b34-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="86b34-320">1</span><span class="sxs-lookup"><span data-stu-id="86b34-320">1</span></span> | <span data-ttu-id="86b34-321">wFgjUfhdUFOCKQiI61vtiQ = =</span><span class="sxs-lookup"><span data-stu-id="86b34-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="86b34-322">Šifrované</span><span class="sxs-lookup"><span data-stu-id="86b34-322">Encrypted</span></span> | <span data-ttu-id="86b34-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="86b34-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="86b34-324">2</span><span class="sxs-lookup"><span data-stu-id="86b34-324">2</span></span> | <span data-ttu-id="86b34-325">LSRzhGS/AA/oqAXGLHJNBw = =</span><span class="sxs-lookup"><span data-stu-id="86b34-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="86b34-326">**Tabulka 1**: příklad hodnot polí souvisejících s heslem při ukládání hesla MySecret!</span><span class="sxs-lookup"><span data-stu-id="86b34-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="86b34-327">Konkrétní šifrování nebo algoritmus hash, který používá, `SqlMembershipProvider` je určen nastavením v `<machineKey>` elementu.</span><span class="sxs-lookup"><span data-stu-id="86b34-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="86b34-328">Tento prvek konfigurace jsme probrali v kroku 3 <a id="Tutorial3"></a> kurzu [*Konfigurace ověřování formulářů a Pokročilá témata*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="86b34-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) tutorial.</span></span>

### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="86b34-329">Ukládání rolí a přidružení rolí</span><span class="sxs-lookup"><span data-stu-id="86b34-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="86b34-330">Rozhraní role umožňují vývojářům definovat sadu rolí a určit, co uživatelé patří k rolím.</span><span class="sxs-lookup"><span data-stu-id="86b34-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="86b34-331">Tyto informace jsou zachyceny v databázi prostřednictvím dvou tabulek: `aspnet_Roles` a `aspnet_UsersInRoles` .</span><span class="sxs-lookup"><span data-stu-id="86b34-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="86b34-332">Každý záznam v `aspnet_Roles` tabulce představuje roli pro konkrétní aplikaci.</span><span class="sxs-lookup"><span data-stu-id="86b34-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="86b34-333">Podobně jako u `aspnet_Users` tabulky `aspnet_Roles` má tabulka tři sloupce, které jsou relevantní pro naši diskuzi:</span><span class="sxs-lookup"><span data-stu-id="86b34-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="86b34-334">`RoleId` je primární klíč (a typu `uniqueidentifier` ).</span><span class="sxs-lookup"><span data-stu-id="86b34-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="86b34-335">`RoleName` je typu `nvarchar(256)` .</span><span class="sxs-lookup"><span data-stu-id="86b34-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="86b34-336">A `ApplicationId` propojí uživatelský účet s konkrétní aplikací v nástroji `aspnet_Applications` .</span><span class="sxs-lookup"><span data-stu-id="86b34-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="86b34-337">Ve `UNIQUE` sloupcích a je složené omezení `RoleName` `ApplicationId` , které zajišťuje, že v dané aplikaci je název každé role jedinečný.</span><span class="sxs-lookup"><span data-stu-id="86b34-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="86b34-338">Tato `aspnet_UsersInRoles` tabulka slouží jako mapování mezi uživateli a rolemi.</span><span class="sxs-lookup"><span data-stu-id="86b34-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="86b34-339">Existují pouze dva sloupce – `UserId` a `RoleId` společně tvoří složený primární klíč.</span><span class="sxs-lookup"><span data-stu-id="86b34-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="86b34-340">Krok 4: určení poskytovatele a přizpůsobení jeho nastavení</span><span class="sxs-lookup"><span data-stu-id="86b34-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="86b34-341">Všechny architektury, které podporují model poskytovatele – jako jsou například rozhraní pro členství a role – neobsahují detaily implementace samy a místo toho deleguje tuto zodpovědnost na třídu poskytovatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="86b34-342">V případě rozhraní členství `Membership` definuje Třída rozhraní API pro správu uživatelských účtů, ale nekomunikuje přímo s žádným uživatelským úložištěm.</span><span class="sxs-lookup"><span data-stu-id="86b34-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="86b34-343">Místo toho `Membership` metody třídy předají požadavek nakonfigurovanému poskytovateli – budeme používat `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="86b34-344">Když vyvoláme jednu z metod ve `Membership` třídě, jak rozhraní členství zná, aby bylo volání delegováno `SqlMembershipProvider` ?</span><span class="sxs-lookup"><span data-stu-id="86b34-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="86b34-345">`Membership`Třída má [ `Providers` vlastnost](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) , která obsahuje odkaz na všechny třídy registrovaných zprostředkovatelů, které jsou k dispozici pro použití v rámci architektury členství.</span><span class="sxs-lookup"><span data-stu-id="86b34-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="86b34-346">Každý registrovaný zprostředkovatel má přidružené jméno a typ.</span><span class="sxs-lookup"><span data-stu-id="86b34-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="86b34-347">Název nabízí uživatelsky přívětivý způsob, jak odkazovat na konkrétního poskytovatele v `Providers` kolekci, zatímco typ identifikuje třídu poskytovatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="86b34-348">Každý registrovaný zprostředkovatel navíc může obsahovat nastavení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="86b34-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="86b34-349">Nastavení konfigurace pro rámec členství zahrnuje `passwordFormat` a `requiresUniqueEmail` , mezi mnoho dalších.</span><span class="sxs-lookup"><span data-stu-id="86b34-349">Configuration settings for the Membership framework include `passwordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="86b34-350">Úplný seznam konfiguračních nastavení používaných nástrojem najdete v tabulce 2 `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="86b34-351">`Providers`Obsah vlastnosti se určuje prostřednictvím nastavení konfigurace webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="86b34-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="86b34-352">Ve výchozím nastavení mají všechny webové aplikace poskytovatele s názvem `AspNetSqlMembershipProvider` typu `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="86b34-353">Tento výchozí zprostředkovatel členství je zaregistrován v `machine.config` (umístěný v `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)` :</span><span class="sxs-lookup"><span data-stu-id="86b34-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)`:</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample1.xml)]

<span data-ttu-id="86b34-354">Jak ukazuje kód uvedený výše, [ `<membership>` prvek](https://msdn.microsoft.com/library/1b9hw62f.aspx) definuje nastavení konfigurace pro rozhraní členství, zatímco [ `<providers>` podřízený prvek](https://msdn.microsoft.com/library/6d4936ht.aspx) určuje registrované zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="86b34-355">Poskytovatelé mohou být přidáni nebo odebráni pomocí [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) prvků nebo; pomocí [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) elementu odebrat všechny aktuálně registrované zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="86b34-356">Jak ukazuje kód uvedený výše, `machine.config` přidá poskytovatele s názvem `AspNetSqlMembershipProvider` typu `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="86b34-357">Kromě `name` `type` atributů a `<add>` obsahuje element atributy, které definují hodnoty pro různá nastavení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="86b34-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="86b34-358">Tabulka 2 obsahuje seznam dostupných `SqlMembershipProvider` nastavení konfigurace spolu s popisem každého z nich.</span><span class="sxs-lookup"><span data-stu-id="86b34-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="86b34-359">Všechny výchozí hodnoty zaznamenané v tabulce 2 odkazují na výchozí hodnoty definované ve `SqlMembershipProvider` třídě.</span><span class="sxs-lookup"><span data-stu-id="86b34-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="86b34-360">Všimněte si, že ne všechna nastavení konfigurace v nástroji `AspNetSqlMembershipProvider` odpovídají výchozím hodnotám `SqlMembershipProvider` třídy.</span><span class="sxs-lookup"><span data-stu-id="86b34-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="86b34-361">Pokud není například zadáno ve zprostředkovateli členství, je `requiresUniqueEmail` výchozí nastavení nastaveno na hodnotu true.</span><span class="sxs-lookup"><span data-stu-id="86b34-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="86b34-362">Nicméně `AspNetSqlMembershipProvider` přepíše tuto výchozí hodnotu explicitním zadáním hodnoty `false` .</span><span class="sxs-lookup"><span data-stu-id="86b34-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>

| <span data-ttu-id="86b34-363">**Nastavení &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="86b34-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="86b34-364">**Popis &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="86b34-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="86b34-365">Odvolání, že rozhraní členství umožňuje rozdělit jednotlivé úložiště uživatelů na oddíly mezi více aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="86b34-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="86b34-366">Toto nastavení označuje název oddílu aplikace používaného poskytovatelem členství.</span><span class="sxs-lookup"><span data-stu-id="86b34-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="86b34-367">Pokud tato hodnota není explicitně zadána, je nastavena za běhu na hodnotu pro virtuální kořenovou cestu aplikace.</span><span class="sxs-lookup"><span data-stu-id="86b34-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="86b34-368">Určuje hodnotu časového limitu příkazu SQL (v sekundách).</span><span class="sxs-lookup"><span data-stu-id="86b34-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="86b34-369">Výchozí hodnota je 30.</span><span class="sxs-lookup"><span data-stu-id="86b34-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="86b34-370">Název připojovacího řetězce v `<connectionStrings>` elementu, který se má použít pro připojení k databázi úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="86b34-371">Tato hodnota se vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="86b34-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="86b34-372">Poskytuje uživatelsky přívětivý popis zaregistrovaného poskytovatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="86b34-373">Určuje, jestli uživatelé můžou načítat zapomenuté heslo.</span><span class="sxs-lookup"><span data-stu-id="86b34-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="86b34-374">Výchozí hodnota je `false`.</span><span class="sxs-lookup"><span data-stu-id="86b34-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="86b34-375">Určuje, jestli uživatelé můžou resetovat svoje heslo.</span><span class="sxs-lookup"><span data-stu-id="86b34-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="86b34-376">Výchozí hodnota je `true` .</span><span class="sxs-lookup"><span data-stu-id="86b34-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="86b34-377">Maximální počet neúspěšných pokusů o přihlášení, které se můžou vyskytnout pro daného uživatele během zadaného období, `passwordAttemptWindow` než se uživatel zamkne. Výchozí hodnota je 5.</span><span class="sxs-lookup"><span data-stu-id="86b34-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="86b34-378">Minimální počet nealfanumerických znaků, které se musí objevit v uživatelském hesle.</span><span class="sxs-lookup"><span data-stu-id="86b34-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="86b34-379">Tato hodnota musí být v rozmezí od 0 do 128. Výchozí hodnota je 1.</span><span class="sxs-lookup"><span data-stu-id="86b34-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="86b34-380">Minimální počet znaků vyžadovaných v hesle.</span><span class="sxs-lookup"><span data-stu-id="86b34-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="86b34-381">Tato hodnota musí být v rozmezí od 0 do 128. Výchozí hodnota je 7.</span><span class="sxs-lookup"><span data-stu-id="86b34-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="86b34-382">Název zaregistrovaného poskytovatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-382">The name of the registered provider.</span></span> <span data-ttu-id="86b34-383">Tato hodnota se vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="86b34-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="86b34-384">Počet minut, během kterých jsou sledovány neúspěšné pokusy o přihlášení</span><span class="sxs-lookup"><span data-stu-id="86b34-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="86b34-385">Pokud uživatel `maxInvalidPasswordAttempts` do tohoto zadaného okna zadá neplatné přihlašovací údaje, budou uzamčeny. Výchozí hodnota je 10.</span><span class="sxs-lookup"><span data-stu-id="86b34-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="86b34-386">Formát úložiště hesla: `Clear` , `Hashed` nebo `Encrypted` .</span><span class="sxs-lookup"><span data-stu-id="86b34-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="86b34-387">Výchozí formát je `Hashed`.</span><span class="sxs-lookup"><span data-stu-id="86b34-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="86b34-388">Pokud je tento regulární výraz k dispozici, slouží k vyhodnocení síly vybraného hesla uživatele při vytváření nového účtu nebo při změně hesla.</span><span class="sxs-lookup"><span data-stu-id="86b34-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="86b34-389">Výchozí hodnota je prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="86b34-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="86b34-390">Určuje, jestli uživatel musí při načítání nebo resetování hesla odpovědět na jeho bezpečnostní otázku.</span><span class="sxs-lookup"><span data-stu-id="86b34-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="86b34-391">Výchozí hodnota je `true`.</span><span class="sxs-lookup"><span data-stu-id="86b34-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="86b34-392">Uvádí, zda všechny uživatelské účty v daném oddílu aplikace musí mít jedinečnou e-mailovou adresu.</span><span class="sxs-lookup"><span data-stu-id="86b34-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="86b34-393">Výchozí hodnota je `true`.</span><span class="sxs-lookup"><span data-stu-id="86b34-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="86b34-394">Určuje typ poskytovatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-394">Specifies the type of the provider.</span></span> <span data-ttu-id="86b34-395">Tato hodnota se vyžaduje.</span><span class="sxs-lookup"><span data-stu-id="86b34-395">This value is required.</span></span> |

<span data-ttu-id="86b34-396">**Tabulka 2**: nastavení členství a `SqlMembershipProvider` konfigurací</span><span class="sxs-lookup"><span data-stu-id="86b34-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="86b34-397">Kromě `AspNetSqlMembershipProvider` toho mohou být jiní poskytovatelé členství zaregistrovaní na základě aplikace tak, že do souboru přidají podobný kód `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="86b34-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="86b34-398">Architektura rolí funguje v podstatě stejným způsobem: je k dispozici výchozí registrovaný zprostředkovatel rolí v nástroji `machine.config` a zaregistrovaná zprostředkovatelé mohou být přizpůsobeni na základě aplikace v nástroji `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="86b34-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="86b34-399">V budoucím kurzu podíváme se na podrobné informace o architektuře rolí a o konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="86b34-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>

### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="86b34-400">Přizpůsobení `SqlMembershipProvider` nastavení</span><span class="sxs-lookup"><span data-stu-id="86b34-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="86b34-401">Výchozí `SqlMembershipProvider` ( `AspNetSqlMembershipProvider` ) má svůj `connectionStringName` atribut nastavený na `LocalSqlServer` .</span><span class="sxs-lookup"><span data-stu-id="86b34-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="86b34-402">Podobně jako u `AspNetSqlMembershipProvider` poskytovatele je název připojovacího řetězce `LocalSqlServer` definován v `machine.config` .</span><span class="sxs-lookup"><span data-stu-id="86b34-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample2.xml)]

<span data-ttu-id="86b34-403">Jak vidíte, tento připojovací řetězec definuje databázi edice SQL 2005 Express v umístění | DataDirectory | Aspnetdb. mdf '.</span><span class="sxs-lookup"><span data-stu-id="86b34-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf'.</span></span> <span data-ttu-id="86b34-404">Řetězec | Adresář DataDirectory | se převede za běhu tak, aby odkazovala na `~/App_Data/` adresář, a tak cestu k databázi | DataDirectory | Aspnetdb. mdf "se překládá na `~/App_Data` / `aspnet.mdf` .</span><span class="sxs-lookup"><span data-stu-id="86b34-404">The string |DataDirectory| is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf" translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="86b34-405">Pokud v souboru aplikace neurčíme žádné informace o poskytovateli členství `Web.config` , aplikace použije výchozího registrovaného poskytovatele členství `AspNetSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="86b34-406">Pokud `~/App_Data/aspnet.mdf` databáze neexistuje, modul runtime ASP.NET ho automaticky vytvoří a přidá schéma služby Application Services.</span><span class="sxs-lookup"><span data-stu-id="86b34-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="86b34-407">Nechce ale používat `aspnet.mdf` databázi. místo toho chceme použít databázi, kterou `SecurityTutorials.mdf` jsme vytvořili v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="86b34-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="86b34-408">Tuto úpravu lze provést jedním ze dvou způsobů:</span><span class="sxs-lookup"><span data-stu-id="86b34-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="86b34-409"><strong>Zadejte hodnotu pro</strong> <strong>`LocalSqlServer`</strong> <strong>název připojovacího řetězce v</strong> <strong>`Web.config`</strong> <strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="86b34-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="86b34-410">Přepsáním `LocalSqlServer` hodnoty názvu připojovacího řetězce v `Web.config` můžete použít výchozího registrovaného poskytovatele členství ( `AspNetSqlMembershipProvider` ) a správně pracovat s `SecurityTutorials.mdf` databází.</span><span class="sxs-lookup"><span data-stu-id="86b34-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="86b34-411">Tento přístup je v případě, že se jedná o obsah s nastavením konfigurace specifikovaným, v pořádku `AspNetSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="86b34-412">Další informace o této technice najdete v příspěvku na blogu [Scott Guthrie](https://weblogs.asp.net/scottgu/), [konfigurace ASP.NET 2,0 Aplikační služby pro použití SQL Server 2000 nebo SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span><span class="sxs-lookup"><span data-stu-id="86b34-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="86b34-413"><strong>Přidat nového registrovaného poskytovatele typu</strong> <strong>`SqlMembershipProvider`</strong> <strong>a nakonfigurujte</strong> <strong>`connectionStringName`</strong> <strong>nastavení, které odkazuje</strong> <strong>`SecurityTutorials.mdf`</strong> na <strong>databáze.</strong></span><span class="sxs-lookup"><span data-stu-id="86b34-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="86b34-414">Tento přístup je užitečný ve scénářích, kdy chcete kromě připojovacího řetězce databáze upravit i další vlastnosti konfigurace.</span><span class="sxs-lookup"><span data-stu-id="86b34-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="86b34-415">V mých vlastních projektech tento přístup vždycky používám z důvodu jeho flexibility a čitelnosti.</span><span class="sxs-lookup"><span data-stu-id="86b34-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="86b34-416">Předtím, než můžeme přidat nového registrovaného poskytovatele, který odkazuje na `SecurityTutorials.mdf` databázi, musíme nejdřív přidat odpovídající hodnotu připojovacího řetězce v `<connectionStrings>` části v tématu `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="86b34-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="86b34-417">Následující kód přidá nový připojovací řetězec s názvem `SecurityTutorialsConnectionString` , který odkazuje na `SecurityTutorials.mdf` databázi SQL Server 2005 Express Edition ve `App_Data` složce.</span><span class="sxs-lookup"><span data-stu-id="86b34-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="86b34-418">Pokud používáte alternativní databázový soubor, podle potřeby aktualizujte připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="86b34-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="86b34-419">Další informace o vytváření správného připojovacího řetězce najdete v tématu [connectionStrings.com](http://www.connectionstrings.com/).</span><span class="sxs-lookup"><span data-stu-id="86b34-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="86b34-420">Dále přidejte do souboru následující označení konfigurace členství `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="86b34-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="86b34-421">Tento kód zaregistruje nového poskytovatele s názvem `SecurityTutorialsSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample4.xml)]

<span data-ttu-id="86b34-422">Kromě registrace `SecurityTutorialsSqlMembershipProvider` poskytovatele je výše uvedený kód definován `SecurityTutorialsSqlMembershipProvider` jako výchozí zprostředkovatel (prostřednictvím `defaultProvider` atributu v `<membership>` elementu).</span><span class="sxs-lookup"><span data-stu-id="86b34-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="86b34-423">Odvolání, že rozhraní členství může mít více registrovaných zprostředkovatelů.</span><span class="sxs-lookup"><span data-stu-id="86b34-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="86b34-424">Vzhledem k tomu `AspNetSqlMembershipProvider` , že je zaregistrován jako první zprostředkovatel v nástroji `machine.config` , slouží jako výchozí zprostředkovatel, pokud neurčíte jinak.</span><span class="sxs-lookup"><span data-stu-id="86b34-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="86b34-425">V současné době má naše aplikace dva registrované zprostředkovatele: `AspNetSqlMembershipProvider` a `SecurityTutorialsSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="86b34-426">Před registrací zprostředkovatele však `SecurityTutorialsSqlMembershipProvider` můžeme vymazal všechny dříve registrované poskytovatele přidáním [ `<clear />` prvku](https://msdn.microsoft.com/library/t062y6yc.aspx) bezprostředně před náš `<add>` element.</span><span class="sxs-lookup"><span data-stu-id="86b34-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="86b34-427">Tím se vymaže `AspNetSqlMembershipProvider` ze seznamu registrovaných zprostředkovatelů, což znamená, že se jedná o `SecurityTutorialsSqlMembershipProvider` jediného registrovaného poskytovatele členství.</span><span class="sxs-lookup"><span data-stu-id="86b34-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="86b34-428">Pokud jsme použili tento přístup, nemuseli byste označit `SecurityTutorialsSqlMembershipProvider` jako výchozího zprostředkovatele, protože by to byl jediný registrovaný poskytovatel členství.</span><span class="sxs-lookup"><span data-stu-id="86b34-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="86b34-429">Další informace o použití nástroje `<clear />` najdete v tématu [použití `<clear />` při přidávání zprostředkovatelů](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span><span class="sxs-lookup"><span data-stu-id="86b34-429">For more information on using `<clear />`, see [Using `<clear />` When Adding Providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="86b34-430">Všimněte si, `SecurityTutorialsSqlMembershipProvider` že `connectionStringName` Nastavení 's odkazuje na název právě přidávaného `SecurityTutorialsConnectionString` připojovacího řetězce a že jeho `applicationName` nastavení bylo nastaveno na hodnotu SecurityTutorials.</span><span class="sxs-lookup"><span data-stu-id="86b34-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="86b34-431">Nastavení je navíc `requiresUniqueEmail` nastavené na `true` .</span><span class="sxs-lookup"><span data-stu-id="86b34-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="86b34-432">Všechny ostatní možnosti konfigurace se shodují s hodnotami v `AspNetSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="86b34-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="86b34-433">Pokud chcete, můžete tady dělat jakékoli změny konfigurace.</span><span class="sxs-lookup"><span data-stu-id="86b34-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="86b34-434">Například můžete zvýšit sílu hesla vyžadováním dvou než alfanumerických znaků místo jednoho nebo zvýšením délky hesla na osm znaků namísto sedmi.</span><span class="sxs-lookup"><span data-stu-id="86b34-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="86b34-435">Odvolání, že rozhraní členství umožňuje rozdělit jednotlivé úložiště uživatelů na oddíly mezi více aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="86b34-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="86b34-436">Nastavení poskytovatele členství `applicationName` Určuje, jaká aplikace poskytovatel používá při práci s úložištěm uživatele.</span><span class="sxs-lookup"><span data-stu-id="86b34-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="86b34-437">Je důležité, abyste explicitně nastavili hodnotu pro `applicationName` nastavení konfigurace, protože pokud `applicationName` není explicitně nastavená, přiřadí se k virtuální kořenové cestě webové aplikace za běhu.</span><span class="sxs-lookup"><span data-stu-id="86b34-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="86b34-438">To funguje, pokud se nemění virtuální kořenová cesta aplikace, ale pokud přesunete aplikaci na jinou cestu, `applicationName` změní se také nastavení.</span><span class="sxs-lookup"><span data-stu-id="86b34-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="86b34-439">Pokud k tomu dojde, zprostředkovatel členství začne pracovat s jiným oddílem aplikace, než se dřív používal.</span><span class="sxs-lookup"><span data-stu-id="86b34-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="86b34-440">Uživatelské účty vytvořené před přesunem se budou nacházet v jiném oddílu aplikace a uživatelé se už nebudou moct k lokalitě přihlašovat.</span><span class="sxs-lookup"><span data-stu-id="86b34-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="86b34-441">Podrobnější diskusi k této problematice najdete v tématu [vždy nastavte `applicationName` vlastnost při konfiguraci členství ASP.NET 2,0 a jiných poskytovatelů](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="86b34-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers](https://weblogs.asp.net/scottgu/443634).</span></span>

## <a name="summary"></a><span data-ttu-id="86b34-442">Souhrn</span><span class="sxs-lookup"><span data-stu-id="86b34-442">Summary</span></span>

<span data-ttu-id="86b34-443">V tuto chvíli máme databázi s nakonfigurovanými aplikačními službami ( `SecurityTutorials.mdf` ) a nakonfigurovali jsme naši webovou aplikaci tak, aby rozhraní členství používalo `SecurityTutorialsSqlMembershipProvider` poskytovatele, kterého jsme právě zaregistrovali.</span><span class="sxs-lookup"><span data-stu-id="86b34-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="86b34-444">Tento registrovaný zprostředkovatel je typu `SqlMembershipProvider` a má `connectionStringName` nastaven na příslušný připojovací řetězec ( `SecurityTutorialsConnectionString` ) a jeho `applicationName` hodnotu explicitně nastavuje.</span><span class="sxs-lookup"><span data-stu-id="86b34-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="86b34-445">Nyní jsme připraveni použít rozhraní pro členství z naší aplikace.</span><span class="sxs-lookup"><span data-stu-id="86b34-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="86b34-446">V dalším kurzu podíváme se, jak vytvořit nové uživatelské účty.</span><span class="sxs-lookup"><span data-stu-id="86b34-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="86b34-447">Po prozkoumání ověření uživatelů, provádění ověřování na základě uživatelů a ukládání dalších informací souvisejících s uživatelem do databáze.</span><span class="sxs-lookup"><span data-stu-id="86b34-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="86b34-448">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="86b34-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="86b34-449">Další materiály</span><span class="sxs-lookup"><span data-stu-id="86b34-449">Further Reading</span></span>

<span data-ttu-id="86b34-450">Další informace o tématech popsaných v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="86b34-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="86b34-451">Vždy nastavit `applicationName` vlastnost při konfiguraci členství ASP.NET 2,0 a jiných poskytovatelů</span><span class="sxs-lookup"><span data-stu-id="86b34-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="86b34-452">Konfigurace ASP.NET 2,0 Aplikační služby pro použití SQL Server 2000 nebo SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="86b34-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="86b34-453">Stáhnout SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="86b34-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="86b34-454">Zkoumání členství, rolí a profilů v ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="86b34-454">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="86b34-455">`<add>`Element pro poskytovatele pro členství</span><span class="sxs-lookup"><span data-stu-id="86b34-455">The `<add>` Element for Providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="86b34-456">`<membership>`Element</span><span class="sxs-lookup"><span data-stu-id="86b34-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="86b34-457">`<providers>`Element pro členství</span><span class="sxs-lookup"><span data-stu-id="86b34-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="86b34-458">Použití `<clear />` při přidávání zprostředkovatelů</span><span class="sxs-lookup"><span data-stu-id="86b34-458">Using `<clear />` When Adding Providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="86b34-459">Práce přímo s `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="86b34-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="86b34-460">Výukové video o tématech obsažených v tomto kurzu</span><span class="sxs-lookup"><span data-stu-id="86b34-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="86b34-461">Principy členství v ASP.NET</span><span class="sxs-lookup"><span data-stu-id="86b34-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="86b34-462">Konfigurace SQL kvůli spolupráci se schématy členství</span><span class="sxs-lookup"><span data-stu-id="86b34-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="86b34-463">Změna nastavení členství ve výchozím schématu členství</span><span class="sxs-lookup"><span data-stu-id="86b34-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="86b34-464">O autorovi</span><span class="sxs-lookup"><span data-stu-id="86b34-464">About the Author</span></span>

<span data-ttu-id="86b34-465">Scott Mitchell, autor několika stránek ASP/ASP. NET Books a zakladatel of 4GuysFromRolla.com, pracoval s webovými technologiemi Microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="86b34-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="86b34-466">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="86b34-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="86b34-467">Nejnovější kniha je *[Sams naučit se ASP.NET 2,0 za 24 hodin](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="86b34-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="86b34-468">Scott se dá kontaktovat na [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) blogu nebo přes jeho blog na adrese [http://ScottOnWriting.NET](http://scottonwriting.net/) .</span><span class="sxs-lookup"><span data-stu-id="86b34-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="86b34-469">Zvláštní díky</span><span class="sxs-lookup"><span data-stu-id="86b34-469">Special Thanks To</span></span>

<span data-ttu-id="86b34-470">Tato řada kurzů byla přezkoumána mnoha užitečnými kontrolory.</span><span class="sxs-lookup"><span data-stu-id="86b34-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="86b34-471">Kontrolor pro tento kurz byl Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="86b34-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="86b34-472">Uvažujete o přezkoumání mých nadcházejících článků na webu MSDN?</span><span class="sxs-lookup"><span data-stu-id="86b34-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="86b34-473">Pokud ano, umístěte mi čáru na [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com) .</span><span class="sxs-lookup"><span data-stu-id="86b34-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="86b34-474">Další</span><span class="sxs-lookup"><span data-stu-id="86b34-474">Next</span></span>](creating-user-accounts-cs.md)
