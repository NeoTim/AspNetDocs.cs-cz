---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-vb
title: Konfigurace produkční webové aplikace pro použití provozní databáze (VB) | Microsoft Docs
author: rick-anderson
description: Jak je popsáno v předchozích kurzech, není neobvyklé, aby se konfigurační informace lišily mezi vývojovým a produkčním prostředím. Toto je ES...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: a64a7aa0-6608-449e-83bf-1ef8cceee504
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-vb
msc.type: authoredcontent
ms.openlocfilehash: 7fe4f545a76992ad687827af447d9a9e95bea73f
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/28/2019
ms.locfileid: "74633694"
---
# <a name="configuring-the-production-web-application-to-use-the-production-database-vb"></a><span data-ttu-id="09ca3-104">Konfigurace produkční webové aplikace pro použití produkční databáze (VB)</span><span class="sxs-lookup"><span data-stu-id="09ca3-104">Configuring the Production Web Application to Use the Production Database (VB)</span></span>

<span data-ttu-id="09ca3-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="09ca3-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="09ca3-106">[Stažení kódu](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_VB.zip) nebo [stažení PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="09ca3-106">[Download Code](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_VB.zip) or [Download PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_vb.pdf)</span></span>

> <span data-ttu-id="09ca3-107">Jak je popsáno v předchozích kurzech, není neobvyklé, aby se konfigurační informace lišily mezi vývojovým a produkčním prostředím.</span><span class="sxs-lookup"><span data-stu-id="09ca3-107">As discussed in earlier tutorials, it is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="09ca3-108">To platí zejména pro webové aplikace řízené daty, protože databázové připojovací řetězce se mezi vývojovým a produkčním prostředím liší.</span><span class="sxs-lookup"><span data-stu-id="09ca3-108">This is especially true for data-driven web applications, as the database connection strings differ between the development and production environments.</span></span> <span data-ttu-id="09ca3-109">V tomto kurzu se seznámíte s možnostmi konfigurace produkčního prostředí tak, aby obsahovalo příslušný připojovací řetězec podrobněji.</span><span class="sxs-lookup"><span data-stu-id="09ca3-109">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>

## <a name="introduction"></a><span data-ttu-id="09ca3-110">Úvod</span><span class="sxs-lookup"><span data-stu-id="09ca3-110">Introduction</span></span>

<span data-ttu-id="09ca3-111">Datově řízené webové aplikace obvykle používají jinou databázi při vývoji, než je v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="09ca3-111">Data-driven web applications usually use a different database when in development than when in production.</span></span> <span data-ttu-id="09ca3-112">V případě aplikací hostovaných poskytovatelem webového hostitele a v místním prostředí se vývojová databáze obvykle nachází v počítači s vývojářem s a provozní databáze je hostována na databázovém serveru v zařízení společnosti pro hostování webu.</span><span class="sxs-lookup"><span data-stu-id="09ca3-112">For applications hosted by a web host provider and developed locally, the development database typically resides on the developer s computer while the production database is hosted on a database server at the web hosting company s facility.</span></span> <span data-ttu-id="09ca3-113">Nasazení webové aplikace řízené daty zahrnuje kopírování vývojové databáze na provozní server databáze.</span><span class="sxs-lookup"><span data-stu-id="09ca3-113">Deploying a data-driven web application entails copying the development database to the production database server.</span></span> <span data-ttu-id="09ca3-114">V předchozím kurzu jsme se podívali na způsoby, jak tento krok provést.</span><span class="sxs-lookup"><span data-stu-id="09ca3-114">In the previous tutorial we looked at ways to accomplish this step.</span></span>

<span data-ttu-id="09ca3-115">Webová aplikace používá informace v *připojovacím řetězci* k navázání spojení s databází.</span><span class="sxs-lookup"><span data-stu-id="09ca3-115">The web application uses the information in a *connection string* to establish a connection with the database.</span></span> <span data-ttu-id="09ca3-116">Připojovací řetězec, který je obvykle uložen v `Web.config`, určuje název databázového serveru, název databáze, kontext zabezpečení a další informace.</span><span class="sxs-lookup"><span data-stu-id="09ca3-116">The connection string, which is typically stored in `Web.config`, specifies the database server name, the name of the database, the security context, and other information.</span></span> <span data-ttu-id="09ca3-117">Vzhledem k tomu, že databáze používaná webovou aplikací závisí na tom, jestli je webová aplikace spuštěná ve vývojovém nebo produkčním prostředí, připojovací řetězce se musí mezi těmito dvěma prostředími lišit.</span><span class="sxs-lookup"><span data-stu-id="09ca3-117">Because the database used by the web application depends on whether the web application is running in the development or production environments, the connection strings must differ between the two environments.</span></span>

<span data-ttu-id="09ca3-118">Informace o konfiguraci se mezi vývojovým a produkčním prostředím neobvykle liší.</span><span class="sxs-lookup"><span data-stu-id="09ca3-118">It is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="09ca3-119">*Běžné rozdíly v konfiguraci mezi výukovým a produkčním* kurzem popisuje techniky pro udržování oddělených konfiguračních informací mezi těmito dvěma prostředími a také stručnou diskusi o připojovacích řetězcích databáze.</span><span class="sxs-lookup"><span data-stu-id="09ca3-119">The *Common Configuration Differences Between Development and Production* tutorial discussed techniques for maintaining separate configuration information between these two environments, as well as a brief discussion on database connection strings.</span></span> <span data-ttu-id="09ca3-120">V tomto kurzu se seznámíte s možnostmi konfigurace produkčního prostředí tak, aby obsahovalo příslušný připojovací řetězec podrobněji.</span><span class="sxs-lookup"><span data-stu-id="09ca3-120">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>

## <a name="examining-the-connection-string-information"></a><span data-ttu-id="09ca3-121">Prozkoumání informací o připojovacím řetězci</span><span class="sxs-lookup"><span data-stu-id="09ca3-121">Examining the Connection String Information</span></span>

<span data-ttu-id="09ca3-122">Připojovací řetězec používaný v knize recenze webové aplikace je uložený v konfiguračním souboru aplikace s `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="09ca3-122">The connection string used by the Book Reviews web application is stored in the application s configuration file, `Web.config`.</span></span> <span data-ttu-id="09ca3-123">`Web.config` obsahuje speciální část pro ukládání připojovacích řetězců, aptly s názvem [&lt;connectionstrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span><span class="sxs-lookup"><span data-stu-id="09ca3-123">`Web.config` includes a special section for storing connection strings, aptly named [&lt;connectionStrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span></span> <span data-ttu-id="09ca3-124">Soubor `Web.config` pro web recenze knih má v této části definovaný jeden připojovací řetězec s názvem `ReviewsConnectionString`:</span><span class="sxs-lookup"><span data-stu-id="09ca3-124">The `Web.config` file for the Book Reviews website has one connection string defined in this section named `ReviewsConnectionString`:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample1.xml)]

<span data-ttu-id="09ca3-125">Připojovací řetězec – zdroj dat = .\SQLEXPRESS; AttachDbFilename = | DataDirectory | \Reviews.mdf; Integrated Security = true; User Instance = true – se skládá z řady možností a hodnot s páry možnosti/hodnota oddělenými středníkem a každou možností a hodnotou oddělenou rovnítkem.</span><span class="sxs-lookup"><span data-stu-id="09ca3-125">The connection string - Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Reviews.mdf;Integrated Security=True;User Instance=True - is composed of a number of options and values, with option/value pairs delimited by a semicolon and each option and value delimited by an equals sign.</span></span> <span data-ttu-id="09ca3-126">V tomto připojovacím řetězci se používají čtyři možnosti:</span><span class="sxs-lookup"><span data-stu-id="09ca3-126">The four options used in this connection string are:</span></span>

- <span data-ttu-id="09ca3-127">`Data Source` – určuje umístění databázového serveru a název instance databázového serveru (pokud existuje).</span><span class="sxs-lookup"><span data-stu-id="09ca3-127">`Data Source` - specifies the location of the database server and the database server instance name (if any).</span></span> <span data-ttu-id="09ca3-128">Hodnota, `.\SQLEXPRESS`, je příkladem, kdy je k dispozici databázový server a název instance.</span><span class="sxs-lookup"><span data-stu-id="09ca3-128">The value, `.\SQLEXPRESS`, is an example where there is a database server and an instance name.</span></span> <span data-ttu-id="09ca3-129">Doba určuje, že databázový server je ve stejném počítači jako aplikace. název instance je `SQLEXPRESS`.</span><span class="sxs-lookup"><span data-stu-id="09ca3-129">The period specifies that the database server is on the same computer as the application; the instance name is `SQLEXPRESS`.</span></span>
- <span data-ttu-id="09ca3-130">`AttachDbFilename` – určuje umístění databázového souboru.</span><span class="sxs-lookup"><span data-stu-id="09ca3-130">`AttachDbFilename` - specifies the location of the database file.</span></span> <span data-ttu-id="09ca3-131">Hodnota obsahuje zástupný `|DataDirectory|`, který se přeloží na úplnou cestu složky `App_Data` aplikace za běhu.</span><span class="sxs-lookup"><span data-stu-id="09ca3-131">The value contains the placeholder `|DataDirectory|`, which is resolved to the full path of the application s `App_Data` folder at runtime.</span></span>
- <span data-ttu-id="09ca3-132">`Integrated Security` – logická hodnota, která označuje, jestli se má při připojování k databázi použít zadané uživatelské jméno nebo heslo, nebo přihlašovací údaje aktuálního účtu systému Windows (true).</span><span class="sxs-lookup"><span data-stu-id="09ca3-132">`Integrated Security` - a Boolean value that indicates whether to use a specified username/password when connecting to the database (false) or the current Windows account credentials (true).</span></span>
- <span data-ttu-id="09ca3-133">`User Instance` – možnost konfigurace specifická pro edice SQL Server Express, která označuje, jestli se mají v místním počítači připojovat a připojovat k databázi SQL Server Express edice, které se nepoužívají pro správu.</span><span class="sxs-lookup"><span data-stu-id="09ca3-133">`User Instance` - a configuration option specific to the SQL Server Express Editions that indicates whether to allow non-Administrative users on the local computer attach and connect to a SQL Server Express Edition database.</span></span> <span data-ttu-id="09ca3-134">Další informace o tomto nastavení najdete v tématu [SQL Server Express uživatelské instance](https://msdn.microsoft.com/library/ms254504.aspx) .</span><span class="sxs-lookup"><span data-stu-id="09ca3-134">See [SQL Server Express User Instances](https://msdn.microsoft.com/library/ms254504.aspx) for more information on this setting.</span></span>

<span data-ttu-id="09ca3-135">Možnosti povolujících připojovacích řetězců závisí na databázi, ke které se připojujete, a na použitém poskytovateli databáze [ADO.NET](http://ADO.NET) .</span><span class="sxs-lookup"><span data-stu-id="09ca3-135">The allowable connection string options depend on the database you are connecting to and the [ADO.NET](http://ADO.NET) database provider being used.</span></span> <span data-ttu-id="09ca3-136">Například připojovací řetězec pro připojení k databázi Microsoft SQL Server se liší od serveru používaného pro připojení k databázi Oracle.</span><span class="sxs-lookup"><span data-stu-id="09ca3-136">For example, the connection string for connecting to a Microsoft SQL Server database differs from that used to connect to an Oracle database.</span></span> <span data-ttu-id="09ca3-137">Podobně připojení k Microsoft SQL Server databázi pomocí poskytovatele SqlClient používá jiný připojovací řetězec než při použití zprostředkovatele OLE DB.</span><span class="sxs-lookup"><span data-stu-id="09ca3-137">Likewise, connecting to a Microsoft SQL Server database using the SqlClient provider uses a different connection string than when using the OLE-DB provider.</span></span>

<span data-ttu-id="09ca3-138">Připojovací řetězec databáze můžete vytvořit ručně s použitím webu, jako je [connectionStrings.com](http://www.connectionstrings.com/) jako prostředku, pro jaké možnosti jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="09ca3-138">You can build the database connection string by hand using a site like [ConnectionStrings.com](http://www.connectionstrings.com/) as a resource for what options are available.</span></span> <span data-ttu-id="09ca3-139">Jednodušším přístupem je však přidání databáze do Průzkumník serveru v aplikaci Visual Studio a následné připojení řetězce z okno Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="09ca3-139">However, an easier approach is to add the database to the Server Explorer in Visual Studio and then to grab the connection string from the Properties window.</span></span> <span data-ttu-id="09ca3-140">Tuto techniku použijte k sestavování připojovacího řetězce k provoznímu databázovému serveru.</span><span class="sxs-lookup"><span data-stu-id="09ca3-140">Let s use this latter technique for constructing the connection string to the production database server.</span></span>

<span data-ttu-id="09ca3-141">Otevřete Visual Studio a potom přejděte do okna Průzkumník serveru (ve Visual Web Developer se toto okno nazývá Průzkumník databáze).</span><span class="sxs-lookup"><span data-stu-id="09ca3-141">Open Visual Studio and then navigate to the Server Explorer window (in Visual Web Developer, this window is called Database Explorer).</span></span> <span data-ttu-id="09ca3-142">Klikněte pravým tlačítkem na možnost datová připojení a v místní nabídce vyberte možnost Přidat připojení.</span><span class="sxs-lookup"><span data-stu-id="09ca3-142">Right-click on the Data Connections option and choose the Add Connection option from the context menu.</span></span> <span data-ttu-id="09ca3-143">Tím se zobrazí Průvodce na obrázku 1.</span><span class="sxs-lookup"><span data-stu-id="09ca3-143">This brings up the wizard shown in Figure 1.</span></span> <span data-ttu-id="09ca3-144">Vyberte příslušný zdroj dat a klikněte na pokračovat.</span><span class="sxs-lookup"><span data-stu-id="09ca3-144">Choose the appropriate data source and click Continue.</span></span>

<span data-ttu-id="09ca3-145">[![vyberte, chcete-li přidat novou databázi do Průzkumník serveru](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="09ca3-145">[![Choose to Add a New Database to the Server Explorer](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image1.jpg)</span></span> 

<span data-ttu-id="09ca3-146">**Obrázek 1**: vyberte možnost Přidat novou databázi do Průzkumník serveru ([kliknutím zobrazíte obrázek v plné velikosti).](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image3.jpg)</span><span class="sxs-lookup"><span data-stu-id="09ca3-146">**Figure 1**: Choose to Add a New Database to the Server Explorer ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image3.jpg))</span></span>

<span data-ttu-id="09ca3-147">Dále zadejte různé informace o připojení databáze (viz obrázek 2).</span><span class="sxs-lookup"><span data-stu-id="09ca3-147">Next, specify the various database connection information (see Figure 2).</span></span> <span data-ttu-id="09ca3-148">Pokud jste se zaregistrovali ve vaší společnosti pro hostování webů, měli byste poskytnout informace o tom, jak se připojit k databázi – název databázového serveru, název databáze, uživatelské jméno a heslo, které se mají použít k připojení k databázi a tak dále.</span><span class="sxs-lookup"><span data-stu-id="09ca3-148">When you signed up with your web hosting company they should have provided information on how to connect to the database - the database server name, the database name, the username and password to use to connect to the database, and so on.</span></span> <span data-ttu-id="09ca3-149">Po zadání těchto informací kliknutím na tlačítko OK dokončete tohoto průvodce a přidejte databázi do Průzkumník serveru.</span><span class="sxs-lookup"><span data-stu-id="09ca3-149">After entering this information click OK to complete this wizard and to add the database to the Server Explorer.</span></span>

<span data-ttu-id="09ca3-150">[![zadat informace o připojení databáze](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="09ca3-150">[![Specify the Database Connection Information](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image4.jpg)</span></span> 

<span data-ttu-id="09ca3-151">**Obrázek 2**: zadání informací o připojení k databázi ([kliknutím zobrazíte obrázek v plné velikosti](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="09ca3-151">**Figure 2**: Specify the Database Connection Information ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image6.jpg))</span></span>

<span data-ttu-id="09ca3-152">Databáze produkčního prostředí by teď měla být uvedená v Průzkumník serveru.</span><span class="sxs-lookup"><span data-stu-id="09ca3-152">The production environment database should now be listed in the Server Explorer.</span></span> <span data-ttu-id="09ca3-153">Vyberte databázi z Průzkumník serveru a přejít na okno Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="09ca3-153">Select the database from the Server Explorer and go to the Properties window.</span></span> <span data-ttu-id="09ca3-154">V této části najdete vlastnost s názvem připojovací řetězec s připojovacím řetězcem databáze s.</span><span class="sxs-lookup"><span data-stu-id="09ca3-154">There you will find a property named Connection String with the database s connection string.</span></span> <span data-ttu-id="09ca3-155">Za předpokladu, že používáte databázi Microsoft SQL Server v produkčním prostředí a poskytovatel SqlClient by měl váš připojovací řetězec vypadat podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="09ca3-155">Assuming you are using a Microsoft SQL Server database on production and the SqlClient provider your connection string should look similar to the following:</span></span>

<span data-ttu-id="09ca3-156"><strong>Zdroj dat =<em>servername</em>; Počáteční katalog =<em>DatabaseName</em>; Zachovat informace o zabezpečení = pravda; ID uživatele =<em>uživatelské jméno</em>; Heslo =*heslo</strong>*</span><span class="sxs-lookup"><span data-stu-id="09ca3-156"><strong>Data Source=<em>serverName</em>; Initial Catalog=<em>databaseName</em>; Persist Security Info=True; User ID=<em>username</em>; Password=*password</strong>*</span></span>

<span data-ttu-id="09ca3-157">Kde *servername*, *DatabaseName*, *username*a *Password* jsou hodnoty pro název databázového serveru, název databáze a uživatelské jméno a heslo, které jste zadali vaší webovou hostitelskou společností.</span><span class="sxs-lookup"><span data-stu-id="09ca3-157">Where *serverName*, *databaseName*, *username*, and *password* are with the values for the database server name, the database name, and the username and password supplied to you by your web host company.</span></span>

## <a name="deploying-the-book-reviews-web-application"></a><span data-ttu-id="09ca3-158">Nasazení webové aplikace recenze knih</span><span class="sxs-lookup"><span data-stu-id="09ca3-158">Deploying the Book Reviews Web Application</span></span>

<span data-ttu-id="09ca3-159">Předchozí kurz se věnuje kopírování vývojové databáze do produkčního prostředí, ale nezkoumala jsme nasazení aplikace řízené daty.</span><span class="sxs-lookup"><span data-stu-id="09ca3-159">The preceding tutorial stepped through copying the development database to the production environment, but did not explore deploying the data-driven application.</span></span> <span data-ttu-id="09ca3-160">V tomto okamžiku provozní prostředí obsahuje databázi, ale používá verzi recenze aplikace se statickými recenzemi.</span><span class="sxs-lookup"><span data-stu-id="09ca3-160">At this point the production environment contains the database but is using the version of the Book Reviews application with static reviews.</span></span> <span data-ttu-id="09ca3-161">Musíme na provozní server nasadit novou aplikaci založenou na datech a aktualizované informace o konfiguraci.</span><span class="sxs-lookup"><span data-stu-id="09ca3-161">We need to deploy the new, data-driven application to the production server along with the updated configuration information.</span></span>

<span data-ttu-id="09ca3-162">Nasaďte aplikaci řízenou daty z vývojového prostředí do produkčního prostředí, chvíli počkejte.</span><span class="sxs-lookup"><span data-stu-id="09ca3-162">Take a moment to deploy the data-driven application from the development environment to production.</span></span> <span data-ttu-id="09ca3-163">Tento proces se podrobněji pokryl v předchozích kurzech.</span><span class="sxs-lookup"><span data-stu-id="09ca3-163">This process was covered in detail in previous tutorials.</span></span> <span data-ttu-id="09ca3-164">Pokud potřebujete aktualizační program, přečtěte si téma *nasazení webu pomocí klienta FTP* nebo *nasazení webu pomocí kurzů sady Visual Studio* .</span><span class="sxs-lookup"><span data-stu-id="09ca3-164">If you need a refresher, see the *Deploying Your Website Using an FTP Client* or the *Deploying Your Website Using Visual Studio* tutorials.</span></span> <span data-ttu-id="09ca3-165">Je potřeba zajistit, aby byl připojovací řetězec produkční databáze ten, který se používá v produkčním prostředí, což znamená, že musí být nasazený alternativní `Web.config` soubor.</span><span class="sxs-lookup"><span data-stu-id="09ca3-165">You will need to ensure that the production database connection string is the one used in the production environment, which means that an alternate `Web.config` file must be deployed.</span></span> <span data-ttu-id="09ca3-166">Konkrétně tento změněný `Web.config` prvek `<connectionStrings>` souboru musí obsahovat připojovací řetězec produkční databáze a měl by vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="09ca3-166">Specifically, this modified `Web.config` file s `<connectionStrings>` element needs to contain the production database connection string and should look similar to the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample2.xml)]

<span data-ttu-id="09ca3-167">Všimněte si, že připojovací řetězec v elementu `<connectionStrings>` se nazývá stejný (`ReviewsConnectionString`), ale nyní obsahuje připojovací řetězec provozní databáze namísto připojovacího řetězce vývojové databáze.</span><span class="sxs-lookup"><span data-stu-id="09ca3-167">Note that the connection string in the `<connectionStrings>` element is named the same (`ReviewsConnectionString`), but now contains the production database connection string instead of the development database connection string.</span></span>

<span data-ttu-id="09ca3-168">Pokud nemáte podrobnější pracovní postup nasazení, buď ručně upravte soubor `Web.config` tak, aby používal připojovací řetězec provozní databáze předtím, než se nasadí (zapamatuje se zpět na použití připojovacího řetězce pro vývojovou databázi), nebo Udržujte samostatný `Web.config` soubor s informacemi o konfiguraci produkčního prostředí, které se nahrají do provozního prostředí v rámci procesu nasazení.</span><span class="sxs-lookup"><span data-stu-id="09ca3-168">Unless you have a more formalized deployment workflow, either manually modify the `Web.config` file to use the production database connection string before deploying (remembering to revert it back to using the development database connection string afterwards) or maintain a separate `Web.config` file with the production environment configuration information that gets uploaded to the production environment as part of the deployment process.</span></span>

> [!NOTE]
> <span data-ttu-id="09ca3-169">Pokud omylem nasadíte `Web.config` soubor, který obsahuje připojovací řetězec pro vývojovou databázi, dojde k chybě, když se aplikace v produkčním prostředí pokusí připojit k databázi.</span><span class="sxs-lookup"><span data-stu-id="09ca3-169">If you accidentally deploy a `Web.config` file that contains the development database connection string then there will be an error when the application on production attempts to connect to the database.</span></span> <span data-ttu-id="09ca3-170">Tato chyba se projevuje jako `SqlException` se zprávou, že server nebyl nalezen nebo nebyl přístupný.</span><span class="sxs-lookup"><span data-stu-id="09ca3-170">This error manifests as a `SqlException` with a message reporting that the server was not found or was not accessible.</span></span>

<span data-ttu-id="09ca3-171">Po nasazení lokality do produkčního prostředí navštivte provozní web prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="09ca3-171">Once the site has been deployed to production, visit the production site through your browser.</span></span> <span data-ttu-id="09ca3-172">Měli byste vidět a využívat stejné uživatelské prostředí jako při místním spuštění aplikace řízené daty.</span><span class="sxs-lookup"><span data-stu-id="09ca3-172">You should see and enjoy the same user experience as when running the data-driven application locally.</span></span> <span data-ttu-id="09ca3-173">Když navštívíte web na produkčním webu, používá ho provozní databázový server, zatímco při návštěvě webu ve vývojovém prostředí se používá databáze ve vývoji.</span><span class="sxs-lookup"><span data-stu-id="09ca3-173">Of course when you visit the website on production the site is powered by the production database server, whereas visiting the website in the development environment uses the database in development.</span></span> <span data-ttu-id="09ca3-174">Obrázek 3 ukazuje, jak si na webu v produkčním prostředí *ASP.NET 3,5* na stránce s informacemi o tom, jak se na webu v provozním prostředí (adresa URL v adresním řádku prohlížeče) zobrazuje.</span><span class="sxs-lookup"><span data-stu-id="09ca3-174">Figure 3 shows the *Teach Yourself ASP.NET 3.5 in 24 Hours* review page from the website in the production environment (note the URL in the browser s Address bar).</span></span>

<span data-ttu-id="09ca3-175">[![aplikace řízená daty je teď k dispozici v produkčním prostředí.](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="09ca3-175">[![The Data-Driven Application is Now Available On Production!](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image7.jpg)</span></span> 

<span data-ttu-id="09ca3-176">**Obrázek 3**: aplikace řízená daty je teď k dispozici v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="09ca3-176">**Figure 3**: The Data-Driven Application is Now Available On Production!</span></span> <span data-ttu-id="09ca3-177">([Kliknutím zobrazíte obrázek v plné velikosti.](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="09ca3-177">([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image9.jpg))</span></span>

### <a name="storing-connection-strings-in-a-separate-configuration-file"></a><span data-ttu-id="09ca3-178">Ukládání připojovacích řetězců do samostatného konfiguračního souboru</span><span class="sxs-lookup"><span data-stu-id="09ca3-178">Storing Connection Strings in a Separate Configuration File</span></span>

<span data-ttu-id="09ca3-179">Běžnou technikou pro správu oddělených informací o konfiguraci vývojových a produkčních prostředí je mít dvě verze `Web.config`: jeden pro vývojové prostředí a jeden pro produkci.</span><span class="sxs-lookup"><span data-stu-id="09ca3-179">A common technique for maintaining separate configuration information on the development and production environments is to have two versions of the `Web.config`: one for the development environment and one for production.</span></span> <span data-ttu-id="09ca3-180">V době nasazení se dá odpovídající verze `Web.config` zkopírovat do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="09ca3-180">At deploy-time the appropriate `Web.config` version can be copied to the production environment.</span></span> <span data-ttu-id="09ca3-181">V ideálním případě bude tento proces automatizován jako součást pracovního postupu nasazení.</span><span class="sxs-lookup"><span data-stu-id="09ca3-181">Ideally, this process would be automated as part of the deployment workflow.</span></span>

<span data-ttu-id="09ca3-182">Místo udržování dvou samostatných souborů `Web.config` můžete volitelně zadat i přesnější rozdíly.</span><span class="sxs-lookup"><span data-stu-id="09ca3-182">Instead of maintaining two separate `Web.config` files you can, optionally, provide more granular differences.</span></span> <span data-ttu-id="09ca3-183">Prvky, které tvoří soubor `Web.config`, lze definovat v externích konfiguračních souborech, které jsou následně odkazovány v souboru `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="09ca3-183">The elements that make up the `Web.config` file can be defined in an external configuration files that are then referenced in the `Web.config` file.</span></span> <span data-ttu-id="09ca3-184">V kostce můžete mít jeden soubor `Web.config` pro obě prostředí, která odkazují na soubor databaseConnectionStrings. config, který by obsahoval připojovací řetězce používané aplikací a by byl pro každé prostředí jedinečný.</span><span class="sxs-lookup"><span data-stu-id="09ca3-184">In a nutshell you can have one `Web.config` file for both environments that references a databaseConnectionStrings.config file, which would contain the connection strings used by the application and would be unique for each environment.</span></span> <span data-ttu-id="09ca3-185">Zjistím, že rozdělující různé informace o konfiguraci do samostatných souborů poskytuje tidier a jednodušší soubor `Web.config` a podrobněji popisuje rozdíly v konfiguraci mezi vývojovým a produkčním prostředím.</span><span class="sxs-lookup"><span data-stu-id="09ca3-185">I find that separating the differing configuration information into separate files provides a tidier and simpler `Web.config` file and more clearly outlines the configuration differences between the development and production environments.</span></span>

<span data-ttu-id="09ca3-186">Chcete-li použít tuto techniku, Začněte vytvořením nové složky ve webové aplikaci s názvem `ConfigSections`.</span><span class="sxs-lookup"><span data-stu-id="09ca3-186">To use this technique, start by creating a new folder in the web application named `ConfigSections`.</span></span> <span data-ttu-id="09ca3-187">V dalším kroku přidejte do této nové složky s názvem databaseConnectionStrings. dev. config a databaseConnectionStrings. produkční. config dva soubory. Dále zkopírujte prvek `<connectionStrings>` z `Web.config` do souborů databaseConnectionStrings. dev. config a databaseConnectionStrings. produkční. config a pak upravte připojovací řetězec v souboru databaseConnectionStrings. produkčního. config tak, aby určoval připojovací řetězec provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="09ca3-187">Next, add two files to this new folder named databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config. Next, copy the `<connectionStrings>` element from `Web.config` into the databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files, and then modify the connection string in the databaseConnectionStrings.production.config file so that it specifies the production database connection string.</span></span> <span data-ttu-id="09ca3-188">Například soubor databaseConnectionStrings. dev. config by měl obsahovat pouze prvek `<connectionStrings>` s připojovacím řetězcem, který odkazuje na vývojovou databázi:</span><span class="sxs-lookup"><span data-stu-id="09ca3-188">For example, the databaseConnectionStrings.dev.config file should contain just the `<connectionStrings>` element with a connection string that references the development database:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample3.xml)]

<span data-ttu-id="09ca3-189">Podobně soubor databaseConnectionStrings. produkčního. config by měl obsahovat pouze prvek `<connectionStrings>`, ale ten, který má připojovací řetězec provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="09ca3-189">Similarly, the databaseConnectionStrings.production.config file should contain just a `<connectionStrings>` element, but one that has the production database connection string.</span></span>

<span data-ttu-id="09ca3-190">Vytvořte kopii souboru databaseConnectionStrings. dev. config a pojmenujte ho databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="09ca3-190">Make a copy of the databaseConnectionStrings.dev.config file and name it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="09ca3-191">Konfigurační soubor můžete pojmenovat jiným způsobem než databaseConnectionStrings. config, pokud chcete, například `connectionStrings.config` nebo `dbInfo.config`.</span><span class="sxs-lookup"><span data-stu-id="09ca3-191">You can name the configuration file something other than databaseConnectionStrings.config, if you d like, such as `connectionStrings.config` or `dbInfo.config`.</span></span> <span data-ttu-id="09ca3-192">Nezapomeňte ale pojmenovat soubor s příponou `.config` jako `.config` soubory ve výchozím nastavení nejsou obsluhovány modulem ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="09ca3-192">However, be sure to name the file with a `.config` extension as `.config` files are, by default, not served by the ASP.NET engine.</span></span> <span data-ttu-id="09ca3-193">Pokud zadáte název souboru něco jiného, například `connectionStrings.txt`, uživatel by mohl nasměrovat svůj prohlížeč na [www.yoursite.com/ConfigSettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) a zobrazit obsah souboru.</span><span class="sxs-lookup"><span data-stu-id="09ca3-193">If you name the file something else, like `connectionStrings.txt`, a user could point their browser to [www.yoursite.com/ConfigSettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) and view the contents of the file!</span></span>

<span data-ttu-id="09ca3-194">V tomto okamžiku by měla složka `ConfigSections` obsahovat tři soubory (viz obrázek 4).</span><span class="sxs-lookup"><span data-stu-id="09ca3-194">At this point the `ConfigSections` folder should contain three files (see Figure 4).</span></span> <span data-ttu-id="09ca3-195">Soubory databaseConnectionStrings. dev. config a databaseConnectionStrings. produkční. config obsahují připojovací řetězce pro vývojová a produkční prostředí, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="09ca3-195">The databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files contain the connection strings for the development and production environments, respectively.</span></span> <span data-ttu-id="09ca3-196">Soubor databaseConnectionStrings. config obsahuje informace připojovacího řetězce, který bude webová aplikace používat za běhu.</span><span class="sxs-lookup"><span data-stu-id="09ca3-196">The databaseConnectionStrings.config file contains the connection string information that will be used by the web application at runtime.</span></span> <span data-ttu-id="09ca3-197">V důsledku toho by soubor databaseConnectionStrings. config měl být stejný jako soubor databaseConnectionStrings. dev. config ve vývojovém prostředí, zatímco v produkčním souboru databaseConnectionStrings. config by měl být stejný jako databaseConnectionStrings. produkční. config.</span><span class="sxs-lookup"><span data-stu-id="09ca3-197">Consequently, the databaseConnectionStrings.config file should be identical to the databaseConnectionStrings.dev.config file in the development environment, whereas on production the databaseConnectionStrings.config file should be identical to databaseConnectionStrings.production.config.</span></span>

<span data-ttu-id="09ca3-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="09ca3-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image10.jpg)</span></span> 

<span data-ttu-id="09ca3-199">**Obrázek 4**: ConfigSections ([kliknutím zobrazíte obrázek v plné velikosti](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="09ca3-199">**Figure 4**: ConfigSections ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image12.jpg))</span></span>

<span data-ttu-id="09ca3-200">Teď je potřeba dát `Web.config`, aby pro své úložiště připojovacích řetězců používal soubor databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="09ca3-200">We now need to instruct `Web.config` to use the databaseConnectionStrings.config file for its connection string store.</span></span> <span data-ttu-id="09ca3-201">Otevřete `Web.config` a nahraďte existující prvek `<connectionStrings>` následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="09ca3-201">Open `Web.config` and replace the existing `<connectionStrings>` element with the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample4.xml)]

<span data-ttu-id="09ca3-202">Atribut `configSource` určuje fyzickou cestu relativní k souboru `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="09ca3-202">The `configSource` attribute specifies a physical path relative to the `Web.config` file.</span></span> <span data-ttu-id="09ca3-203">Pokud je soubor externí `.config` ve stejném adresáři jako `Web.config` pak nastavte tento atribut na název souboru `.config` souboru.</span><span class="sxs-lookup"><span data-stu-id="09ca3-203">If the external `.config` file is in the same directory as `Web.config` then set this attribute to the file name of the `.config` file.</span></span> <span data-ttu-id="09ca3-204">Pokud je v podadresáři, stejně jako v případě databaseConnectionStrings. config, určete podsložku pomocí zpětného lomítka pro vymezení názvu složky a souboru, jako je ConfigSections\databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="09ca3-204">If it s in a subdirectory, as is the case with databaseConnectionStrings.config, specify the subfolder using a backslash to delimit the folder and file names, like ConfigSections\databaseConnectionStrings.config.</span></span>

<span data-ttu-id="09ca3-205">V rámci této úpravy obsahují vývojové a produkční prostředí stejný soubor `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="09ca3-205">With this modification, the development and production environments contain the same `Web.config` file.</span></span> <span data-ttu-id="09ca3-206">Teď jediným rozdílem je soubor databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="09ca3-206">Now the only difference is the databaseConnectionStrings.config file.</span></span> <span data-ttu-id="09ca3-207">Zkopírujte soubor databaseConnectionStrings. produkční. config do produkčního prostředí a přejmenujte ho na databaseConnectionStrings. config. Pokud v budoucnu dojde ke změnám v připojovacím řetězci k produkční databázi, budete je muset udělat v souboru databaseConnectionStrings. produkční. config a pak ho nahrát do produkčního prostředí a přejmenovat ho na databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="09ca3-207">Copy the databaseConnectionStrings.production.config file to production and rename it to databaseConnectionStrings.config. If, in the future, there are changes to the production database connection string you will need to make them to the databaseConnectionStrings.production.config file and then upload that file to production, renaming it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="09ca3-208">Můžete zadat informace pro jakýkoli `Web.config` element v samostatném souboru a použít atribut `configSource` pro odkazování na tento soubor z `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="09ca3-208">You may specify the information for any `Web.config` element in a separate file and use the `configSource` attribute to reference that file from within `Web.config`.</span></span>

## <a name="summary"></a><span data-ttu-id="09ca3-209">Přehled</span><span class="sxs-lookup"><span data-stu-id="09ca3-209">Summary</span></span>

<span data-ttu-id="09ca3-210">Aplikace řízené daty obvykle používají různé databáze ve vývojovém a produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="09ca3-210">Data-driven applications usually use different databases in the development and production environments.</span></span> <span data-ttu-id="09ca3-211">V důsledku toho musí být připojovací řetězce databáze uložené v konfiguraci webové aplikace jedinečné pro každé prostředí.</span><span class="sxs-lookup"><span data-stu-id="09ca3-211">Consequently, the database connection strings stored in the web application s configuration must be unique per environment.</span></span> <span data-ttu-id="09ca3-212">V tomto kurzu jsme se podívali na to, jak určit připojovací řetězec provozní databáze a jak udržovat jedinečné informace o připojovacím řetězci v obou prostředích.</span><span class="sxs-lookup"><span data-stu-id="09ca3-212">In this tutorial we looked at how to determine the production database connection string and ways to maintain unique connection string information in the two environments.</span></span>

<span data-ttu-id="09ca3-213">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="09ca3-213">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="09ca3-214">Další čtení</span><span class="sxs-lookup"><span data-stu-id="09ca3-214">Further Reading</span></span>

<span data-ttu-id="09ca3-215">Další informace o tématech popsaných v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="09ca3-215">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="09ca3-216">Připojovací řetězce a konfigurační soubory</span><span class="sxs-lookup"><span data-stu-id="09ca3-216">Connection Strings and Configuration Files</span></span>](https://msdn.microsoft.com/library/ms254494.aspx)
- [<span data-ttu-id="09ca3-217">Informace o řetězcích konfigurace databáze @ ConnectionStrings.com</span><span class="sxs-lookup"><span data-stu-id="09ca3-217">Database Configuration Strings Information @ ConnectionStrings.com</span></span>](http://www.connectionstrings.com/)
- [<span data-ttu-id="09ca3-218">Přesunout nastavení ze souboru Web. config</span><span class="sxs-lookup"><span data-stu-id="09ca3-218">Move Settings Out of the Web.config File</span></span>](http://www.asp101.com/tips/index.asp?id=154)
- [<span data-ttu-id="09ca3-219">Technická dokumentace pro&gt; element &lt;connectionStrings</span><span class="sxs-lookup"><span data-stu-id="09ca3-219">Technical Documentation for the &lt;connectionStrings&gt; Element</span></span>](https://msdn.microsoft.com/library/bf7sd233.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="09ca3-220">[Předchozí](deploying-a-database-vb.md)
> [Další](configuring-a-website-that-uses-application-services-vb.md)</span><span class="sxs-lookup"><span data-stu-id="09ca3-220">[Previous](deploying-a-database-vb.md)
[Next](configuring-a-website-that-uses-application-services-vb.md)</span></span>
