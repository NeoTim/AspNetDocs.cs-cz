---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-vb
title: Strategie pro vývoj a nasazování databází (VB) | Microsoft Docs
author: rick-anderson
description: Při prvním nasazení aplikace řízené daty můžete do produkčního prostředí zkopírovat databázi ve vývojovém prostředí. B...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 07b8905d-78ac-4252-97fb-8675b3fb0bbf
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-vb
msc.type: authoredcontent
ms.openlocfilehash: 1ea4ade32fb05b9e69647ece7d1a4c400fe9fb21
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78546548"
---
# <a name="strategies-for-database-development-and-deployment-vb"></a><span data-ttu-id="43356-104">Strategie vývoje a nasazení databází (VB)</span><span class="sxs-lookup"><span data-stu-id="43356-104">Strategies for Database Development and Deployment (VB)</span></span>

<span data-ttu-id="43356-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="43356-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="43356-106">Stáhnout PDF</span><span class="sxs-lookup"><span data-stu-id="43356-106">Download PDF</span></span>](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial10_DBDevel_vb.pdf)

> <span data-ttu-id="43356-107">Při prvním nasazení aplikace řízené daty můžete do produkčního prostředí zkopírovat databázi ve vývojovém prostředí.</span><span class="sxs-lookup"><span data-stu-id="43356-107">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="43356-108">Ale při následném nasazení se skrytá kopie přepíše všechna data zadaná do provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-108">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="43356-109">Místo toho nasazení databáze zahrnuje použití změn provedených ve vývojových databázích od posledního nasazení do provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-109">Instead, deploying a database involves applying the changes made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="43356-110">Tento kurz prověřuje tyto výzvy a nabízí různé strategie, které vám pomohou s dechronické a používáním změn provedených v databázi od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="43356-110">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="introduction"></a><span data-ttu-id="43356-111">Úvod</span><span class="sxs-lookup"><span data-stu-id="43356-111">Introduction</span></span>

<span data-ttu-id="43356-112">Jak je popsáno v předchozích kurzech, nasazení aplikace ASP.NET zahrnuje kopírování relevantního obsahu z vývojového prostředí do provozního prostředí.</span><span class="sxs-lookup"><span data-stu-id="43356-112">As discussed in previous tutorials, deploying an ASP.NET application entails copying the pertinent content from the development environment to the production environment.</span></span> <span data-ttu-id="43356-113">Nasazení není jednorázová událost, ale místo toho, aby se nastavila při každém vydání nové verze softwaru, nebo když byly zjištěny nebo řešeny chyby nebo bezpečnostní otázky.</span><span class="sxs-lookup"><span data-stu-id="43356-113">Deployment is not a one-time event, but rather something that happens every time a new version of the software is released or when bugs or security concerns have been identified and addressed.</span></span> <span data-ttu-id="43356-114">Při kopírování stránek ASP.NET, obrázků, souborů JavaScriptu a dalších takových souborů do produkčního prostředí nemusíte se s tím, jak se tento soubor od posledního nasazení změnil.</span><span class="sxs-lookup"><span data-stu-id="43356-114">When copying ASP.NET pages, images, JavaScript files, and other such files to the production environment you do not need to concern yourself with how these file have been changed since the last deployment.</span></span> <span data-ttu-id="43356-115">Soubor můžete zkopírovat do produkčního prostředí a přepsat tak stávající obsah.</span><span class="sxs-lookup"><span data-stu-id="43356-115">You can blindly copy the file to production, overwriting the existing content.</span></span> <span data-ttu-id="43356-116">Tato jednoduchost se bohužel nerozšiřuje na nasazení databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-116">Unfortunately, this simplicity does not extend to deploying the database.</span></span>

<span data-ttu-id="43356-117">Při prvním nasazení aplikace řízené daty můžete do produkčního prostředí zkopírovat databázi ve vývojovém prostředí.</span><span class="sxs-lookup"><span data-stu-id="43356-117">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="43356-118">Ale při následném nasazení se skrytá kopie přepíše všechna data zadaná do provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-118">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="43356-119">Místo toho nasazení databáze zahrnuje použití *změn* provedených ve vývojových databázích od posledního nasazení do provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-119">Instead, deploying a database involves applying the *changes* made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="43356-120">Tento kurz prověřuje tyto výzvy a nabízí různé strategie, které vám pomohou s dechronické a používáním změn provedených v databázi od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="43356-120">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="the-challenges-of-deploying-a-database"></a><span data-ttu-id="43356-121">Výzvy k nasazení databáze</span><span class="sxs-lookup"><span data-stu-id="43356-121">The Challenges of Deploying a Database</span></span>

<span data-ttu-id="43356-122">Předtím, než byla aplikace řízená daty nasazena poprvé, existuje pouze jedna databáze, konkrétně databáze ve vývojovém prostředí, což je důvod, proč při prvním nasazení aplikace založené na datech zkopírovat databázi do vývojové prostředí v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="43356-122">Before a data-driven application has been deployed for the first time, there is only one database, namely the database in the development environment, which is why when deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="43356-123">Ale po nasazení aplikace jsou k dispozici dvě kopie databáze: jeden ve vývoji a jeden v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="43356-123">But once the application has been deployed there are two copies of the database: one in development and one in production.</span></span>

<span data-ttu-id="43356-124">Mezi nasazeními se může stát, že vývoj a provozní databáze nebudou synchronizovány. I když schéma produkční databáze s zůstane beze změny, schéma vývojové databáze s se může změnit při přidání nových funkcí.</span><span class="sxs-lookup"><span data-stu-id="43356-124">Between deployments the development and production databases can become out of sync. While the production database s schema remains unchanged, the development database s schema may change as new features are added.</span></span> <span data-ttu-id="43356-125">Je možné přidat nebo odebrat sloupce, tabulky, zobrazení nebo uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="43356-125">You might add or remove columns, tables, views, or stored procedures.</span></span> <span data-ttu-id="43356-126">Můžou být taky důležitá data, která se přidají do vývojové databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-126">There may also be important data that gets added to the development database.</span></span> <span data-ttu-id="43356-127">Mnoho aplikací řízených daty zahrnuje vyhledávací tabulky naplněné daty, která jsou pevně kódovaná, a specifická pro aplikace, která nejsou upravitelná uživatelem.</span><span class="sxs-lookup"><span data-stu-id="43356-127">Many data-driven applications include lookup tables populated with hard-coded, application-specific data that are not user-editable.</span></span> <span data-ttu-id="43356-128">Například web na aukci může mít rozevírací seznam s možnostmi, které popisují stav vydané položky, jako je nový, dobrý a věrný.</span><span class="sxs-lookup"><span data-stu-id="43356-128">For example, an auction website might have a drop-down list with choices that describe the condition of the item being auctioned: New, Like New, Good, and Fair.</span></span> <span data-ttu-id="43356-129">Místo toho, aby byly tyto možnosti pevně zapsány přímo v rozevíracím seznamu, je obvykle vhodnější umístit je do databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="43356-129">Rather than hard-coding these options directly in the drop-down list it is usually better to place them in a database table.</span></span> <span data-ttu-id="43356-130">Pokud během vývoje dojde k přidání nové podmínky s názvem nedostatečná, v případě nasazení aplikace se tento stejný záznam musí přidat do vyhledávací tabulky v provozní databázi.</span><span class="sxs-lookup"><span data-stu-id="43356-130">If, during development, a new condition named Poor is added to the table then when deploying the application this same record needs to be added to the lookup table in the production database.</span></span>

<span data-ttu-id="43356-131">V ideálním případě nasazení databáze zahrnuje kopírování databáze z vývoje do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="43356-131">Ideally, deploying the database would involve copying the database from development to production.</span></span> <span data-ttu-id="43356-132">Mějte ale na paměti, že Jakmile nasadíte aplikaci a obnovíte vývoj, provozní databáze se naplní skutečnými daty od skutečných uživatelů.</span><span class="sxs-lookup"><span data-stu-id="43356-132">But keep in mind that after you have deployed the application and resumed development, the production database is being populated with real data from real users.</span></span> <span data-ttu-id="43356-133">Proto pokud byste chtěli jednoduše zkopírovat databázi z vývoje do produkčního prostředí při dalším nasazení, přepíšete provozní databázi a ztratíte stávající data.</span><span class="sxs-lookup"><span data-stu-id="43356-133">Therefore, if you were to simply copy the database from development to production at the next deployment you would overwrite the production database and lose its existing data.</span></span> <span data-ttu-id="43356-134">Čistým výsledkem je, že nasazení databáze povaří, aby se projevily změny provedené v vývojové databázi od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="43356-134">The net result is that deploying the database boils down to applying the changes made to the development database since the last deployment.</span></span>

<span data-ttu-id="43356-135">Vzhledem k tomu, že nasazení databáze zahrnuje použití změn ve schématu a případně dat od posledního nasazení, je třeba zachovat historii změn (nebo určit v době nasazení), aby bylo možné tyto změny použít v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="43356-135">Because deploying a database involves applying the changes in the schema and, possibly, the data since the last deployment, a history of changes must be maintained (or determined at deploy-time) so that those changes can be applied on production.</span></span> <span data-ttu-id="43356-136">Existují různé techniky pro správu a používání změn v datovém modelu.</span><span class="sxs-lookup"><span data-stu-id="43356-136">There are a variety of techniques for managing and applying changes to the data model.</span></span>

### <a name="defining-the-baseline"></a><span data-ttu-id="43356-137">Definování standardních hodnot</span><span class="sxs-lookup"><span data-stu-id="43356-137">Defining the Baseline</span></span>

<span data-ttu-id="43356-138">Chcete-li zachovat změny v databázi aplikace, musíte mít nějaký počáteční stav, na který jsou změny aplikovány.</span><span class="sxs-lookup"><span data-stu-id="43356-138">To maintain the changes to your application s database you need to have some starting state, a baseline to which the changes are applied to.</span></span> <span data-ttu-id="43356-139">V jednom krajním případě by počáteční stav mohl být prázdná databáze bez tabulek, zobrazení nebo uložených procedur.</span><span class="sxs-lookup"><span data-stu-id="43356-139">At one extreme the starting state could be an empty database with no tables, views, or stored procedures.</span></span> <span data-ttu-id="43356-140">Výsledkem takového směrného plánu je velký protokol změn, protože musí zahrnovat vytváření všech tabulek databáze, zobrazení a uložených procedur spolu se všemi změnami provedenými po počátečním nasazení.</span><span class="sxs-lookup"><span data-stu-id="43356-140">Such a baseline results in a large change log because it must include the creation of all of the database s tables, views, and stored procedures along with any changes made after the initial deployment.</span></span> <span data-ttu-id="43356-141">Na druhém konci spektra můžete nastavit směrný plán jako verzi databáze, která je původně nasazena do provozního prostředí.</span><span class="sxs-lookup"><span data-stu-id="43356-141">At the other end of the spectrum you could set the baseline as the version of the database that is initially deployed to the production environment.</span></span> <span data-ttu-id="43356-142">Výsledkem této volby je mnohem menší protokol změn, protože obsahuje jenom změny, které se provedly v databázi po prvním nasazení.</span><span class="sxs-lookup"><span data-stu-id="43356-142">This choice results in a much smaller change log because it only includes the changes made to the database following the first deployment.</span></span> <span data-ttu-id="43356-143">Toto je přístup, který nejlépe vyberu.</span><span class="sxs-lookup"><span data-stu-id="43356-143">This is the approach I prefer.</span></span> <span data-ttu-id="43356-144">A samozřejmě můžete zvolit více uprostřed přístupu k cestám, definovat směrný plán jako určitý bod mezi počátečním vytvořením databáze a při prvním nasazení databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-144">And of course you can choose a more middle of the road approach, defining the baseline as some point between the initial creation of the database and when the database is first deployed.</span></span>

<span data-ttu-id="43356-145">Po zvolení standardních hodnot zvažte vygenerování skriptu SQL, který lze provést pro opětovné vytvoření základní verze.</span><span class="sxs-lookup"><span data-stu-id="43356-145">Once you have chosen a baseline consider generating a SQL script that can be executed to recreate the baseline version.</span></span> <span data-ttu-id="43356-146">Takový skript umožňuje rychle znovu vytvořit základní verzi databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-146">Such a script makes it possible to quickly recreate the baseline version of the database.</span></span> <span data-ttu-id="43356-147">Tato funkce je užitečná zejména ve větších projektech, kde může existovat více vývojářů pracujících na projektu nebo v dalších prostředích, jako je například testování nebo příprava, které potřebují svou vlastní kopii databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-147">This functionality is especially useful in larger projects, where there may be multiple developers working on the project or additional environments, such as testing or staging, that each need their own copy of the database.</span></span>

<span data-ttu-id="43356-148">K dispozici je celá řada nástrojů pro vygenerování skriptu SQL základní verze.</span><span class="sxs-lookup"><span data-stu-id="43356-148">There are a variety of tools at your disposal to generate a SQL script of the baseline version.</span></span> <span data-ttu-id="43356-149">Z SQL Server Management Studio (SSMS) můžete kliknout pravým tlačítkem na databázi, přejít do podnabídky úkoly a vybrat možnost Generovat skripty.</span><span class="sxs-lookup"><span data-stu-id="43356-149">From SQL Server Management Studio (SSMS) you can right-click on the database, go to the Tasks submenu, and choose the Generate Scripts option.</span></span> <span data-ttu-id="43356-150">Spustí se Průvodce skriptem, který vám dá pokyn vygenerovat soubor, který obsahuje příkazy SQL pro vytvoření objektů databáze s.</span><span class="sxs-lookup"><span data-stu-id="43356-150">This launches the Script Wizard, which you can instruct to generate a file that contains the SQL commands to create your database s objects.</span></span> <span data-ttu-id="43356-151">Další možností je Průvodce publikováním databáze, který může generovat příkazy SQL nejen vytvořit schéma databáze, ale také data v databázových tabulkách.</span><span class="sxs-lookup"><span data-stu-id="43356-151">Another option is the Database Publishing Wizard, which can generate the SQL commands to not only create the database schema, but also the data in the database tables.</span></span> <span data-ttu-id="43356-152">Průvodce publikováním databáze byl v kurzu *nasazení databáze* podrobněji přezkoumán.</span><span class="sxs-lookup"><span data-stu-id="43356-152">The Database Publishing Wizard was examined in detail back in the *Deploying a Database* tutorial.</span></span> <span data-ttu-id="43356-153">Bez ohledu na to, jaký nástroj používáte, byste měli mít na konci soubor skriptu, který můžete použít k opětovnému vytvoření základní verze vaší databáze, pokud by to bylo nutné.</span><span class="sxs-lookup"><span data-stu-id="43356-153">Regardless of what tool you use, in the end you should have a script file that you can use to recreate the baseline version of your database, should the need arise.</span></span>

## <a name="documenting-the-database-changes-in-prose"></a><span data-ttu-id="43356-154">Dokumentování změn databáze v prose</span><span class="sxs-lookup"><span data-stu-id="43356-154">Documenting the Database Changes in Prose</span></span>

<span data-ttu-id="43356-155">Nejjednodušší způsob, jak udržovat protokol změn v datovém modelu během fáze vývoje, je zaznamenat změny v prose.</span><span class="sxs-lookup"><span data-stu-id="43356-155">The simplest way to maintain a log of changes to the data model during the development phase is to record the changes in prose.</span></span> <span data-ttu-id="43356-156">Například pokud během vývoje již nasazené aplikace přidáte nový sloupec do tabulky `Employees`, odeberete sloupec z tabulky `Orders` a přidáte novou tabulku (`ProductCategories`), měli byste zachovat textový soubor nebo dokument aplikace Microsoft Word s následující historií:</span><span class="sxs-lookup"><span data-stu-id="43356-156">For example, if during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`), you would maintain a text file or Microsoft Word document with the following history:</span></span>

<a id="0.8_table01"></a>

| <span data-ttu-id="43356-157">**Datum změny**</span><span class="sxs-lookup"><span data-stu-id="43356-157">**Change Date**</span></span> | <span data-ttu-id="43356-158">**Změnit podrobnosti**</span><span class="sxs-lookup"><span data-stu-id="43356-158">**Change Details**</span></span> |
| --- | --- |
| <span data-ttu-id="43356-159">2009-02-03:</span><span class="sxs-lookup"><span data-stu-id="43356-159">2009-02-03:</span></span> | <span data-ttu-id="43356-160">Do tabulky `Employees` se přidaly sloupce `DepartmentID` (`int`, NOT NULL).</span><span class="sxs-lookup"><span data-stu-id="43356-160">Added column `DepartmentID` (`int`, NOT NULL) to the `Employees` table.</span></span> <span data-ttu-id="43356-161">Do `Employees.DepartmentID`se přidalo omezení cizího klíče z `Departments.DepartmentID`.</span><span class="sxs-lookup"><span data-stu-id="43356-161">Added a foreign key constraint from `Departments.DepartmentID` to `Employees.DepartmentID`.</span></span> |
| <span data-ttu-id="43356-162">2009-02-05:</span><span class="sxs-lookup"><span data-stu-id="43356-162">2009-02-05:</span></span> | <span data-ttu-id="43356-163">Z tabulky `Orders` byl odebrán `TotalWeight` sloupců.</span><span class="sxs-lookup"><span data-stu-id="43356-163">Removed column `TotalWeight` from the `Orders` table.</span></span> <span data-ttu-id="43356-164">Data již zachycená v přidružených záznamech `OrderDetails`.</span><span class="sxs-lookup"><span data-stu-id="43356-164">Data already captured in associated `OrderDetails` records.</span></span> |
| <span data-ttu-id="43356-165">2009-02-12:</span><span class="sxs-lookup"><span data-stu-id="43356-165">2009-02-12:</span></span> | <span data-ttu-id="43356-166">Vytvořila se tabulka `ProductCategories`.</span><span class="sxs-lookup"><span data-stu-id="43356-166">Created the `ProductCategories` table.</span></span> <span data-ttu-id="43356-167">Existují tři sloupce: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`) a `Active` (`bit`, `NOT NULL`).</span><span class="sxs-lookup"><span data-stu-id="43356-167">There are three columns: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`), and `Active` (`bit`, `NOT NULL`).</span></span> <span data-ttu-id="43356-168">Přidání omezení primárního klíče do `ProductCategoryID`a výchozí hodnota 1 pro `Active`.</span><span class="sxs-lookup"><span data-stu-id="43356-168">Added a primary key constraint to `ProductCategoryID`, and a default value of 1 to `Active`.</span></span> |

<span data-ttu-id="43356-169">Tento přístup má několik nevýhod.</span><span class="sxs-lookup"><span data-stu-id="43356-169">There are a number of drawbacks to this approach.</span></span> <span data-ttu-id="43356-170">Pro Starter neexistuje žádná doufám pro automatizaci.</span><span class="sxs-lookup"><span data-stu-id="43356-170">For starters, there is no hope for automation.</span></span> <span data-ttu-id="43356-171">Kdykoli je potřeba tyto změny použít pro databázi, například při nasazení aplikace, musí vývojář každou změnu ručně implementovat.</span><span class="sxs-lookup"><span data-stu-id="43356-171">Anytime these changes need to be applied to a database - such as when the application is deployed - a developer must manually implement each change, one at a time.</span></span> <span data-ttu-id="43356-172">Pokud navíc potřebujete znovu sestavit konkrétní verzi databáze ze směrného plánu pomocí protokolu změn, tak bude trvat více a více času, než se zvětší velikost protokolu.</span><span class="sxs-lookup"><span data-stu-id="43356-172">Moreover, if you need to reconstruct a particular version of the database from the baseline using the change log, doing so will take more and more time as the size of the log grows.</span></span> <span data-ttu-id="43356-173">Další nevýhodou této metody je, že přehlednost a úroveň podrobností každé položky protokolu změn jsou ponechány osobě, která změnu zaznamená.</span><span class="sxs-lookup"><span data-stu-id="43356-173">Another drawback to this method is that the clarity and level of detail of each change log entry is left to the person recording the change.</span></span> <span data-ttu-id="43356-174">V týmu s více vývojáři můžou být podrobnější, čitelnější nebo přesnější záznamy než jiné.</span><span class="sxs-lookup"><span data-stu-id="43356-174">In a team with multiple developers some may make more detailed, more readable, or more precise entries than others.</span></span> <span data-ttu-id="43356-175">Je také možné překlepy a další chyby při zadávání dat souvisejících s lidmi.</span><span class="sxs-lookup"><span data-stu-id="43356-175">Also, typos and other human-related data entry errors are possible.</span></span>

<span data-ttu-id="43356-176">Hlavní výhodou pro dokumentování změn databáze v prose je jednoduchost.</span><span class="sxs-lookup"><span data-stu-id="43356-176">The primary benefit of documenting the database changes in prose is simplicity.</span></span> <span data-ttu-id="43356-177">Nemusíte být obeznámeni se syntaxí SQL pro vytváření a změny databázových objektů.</span><span class="sxs-lookup"><span data-stu-id="43356-177">You don t need familiarity with the SQL syntax for creating and altering database objects.</span></span> <span data-ttu-id="43356-178">Místo toho můžete zaznamenávat změny v prose a implementovat je prostřednictvím grafického uživatelského rozhraní SQL Server Management Studio s.</span><span class="sxs-lookup"><span data-stu-id="43356-178">Instead, you can record the changes in prose and implement them through SQL Server Management Studio s graphical user interface.</span></span>

<span data-ttu-id="43356-179">Údržba protokolu změn v prose je, a to bez vysoké složitosti a nefunguje dobře s některými projekty, například s velkými rozsahy v oboru, mají časté změny v datovém modelu nebo obsahují více vývojářů.</span><span class="sxs-lookup"><span data-stu-id="43356-179">Maintaining your change log in prose is, admittedly, not very sophisticated and won't work well with certain projects, such as ones that are large in scope, have frequent changes to the data model, or involve multiple developers.</span></span> <span data-ttu-id="43356-180">Ale tento přístup byl znám dobře v malých projektech, které mají pouze příležitostné změny v datovém modelu a kde jediný vývojář nemá silné pozadí v syntaxi SQL pro vytváření a změny databázových objektů.</span><span class="sxs-lookup"><span data-stu-id="43356-180">But I have seen this approach work quite well in small, one-man projects that have only occasional changes to the data model and where the solo developer does not have a strong background in the SQL syntax for creating and altering database objects.</span></span>

> [!NOTE]
> <span data-ttu-id="43356-181">I když jsou informace v protokolu změn, technicky, jenom do doby nasazení, doporučujeme udržovat historii změn.</span><span class="sxs-lookup"><span data-stu-id="43356-181">While the information in the change log is, technically, only needed until deploy-time, I recommend keeping a history of changes.</span></span> <span data-ttu-id="43356-182">Místo toho, abyste zachovali jeden, stále rostoucí soubor protokolu změn, zvažte použití jiného souboru protokolu změn pro každou verzi databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-182">But rather than maintaining a single, ever growing change log file, consider having a different change log file for each database version.</span></span> <span data-ttu-id="43356-183">Obvykle budete chtít verzi databáze pokaždé nasadit.</span><span class="sxs-lookup"><span data-stu-id="43356-183">Typically you will want to version the database each time it is deployed.</span></span> <span data-ttu-id="43356-184">Když zachováte protokol změn protokolů, můžete od základů znovu vytvořit libovolnou verzi databáze spuštěním skriptů protokolu změn od verze 1 a pokračovat, dokud nedosáhnete verze, kterou potřebujete znovu vytvořit.</span><span class="sxs-lookup"><span data-stu-id="43356-184">By maintaining a log of change logs you can, starting from the baseline, recreate any database version by executing the change log scripts starting from version 1 and continuing until you reach the version you need to recreate.</span></span>

## <a name="recording-the-sql-change-statements"></a><span data-ttu-id="43356-185">Záznam příkazů SQL Change</span><span class="sxs-lookup"><span data-stu-id="43356-185">Recording the SQL Change Statements</span></span>

<span data-ttu-id="43356-186">Hlavní nevýhodou zachovávání protokolu změn v prose je nedostatečná automatizace.</span><span class="sxs-lookup"><span data-stu-id="43356-186">The primary drawback of maintaining the change log in prose is the lack of automation.</span></span> <span data-ttu-id="43356-187">V ideálním případě je implementace změn databáze do provozní databáze při nasazení tak snadné, když kliknete na tlačítko ke spuštění skriptu, nikoli ruční provedení seznamu pokynů.</span><span class="sxs-lookup"><span data-stu-id="43356-187">Ideally, implementing the database changes to the production database at deploy-time would be as easy as clicking a button to execute a script rather than having to manually perform a list of instructions.</span></span> <span data-ttu-id="43356-188">Tato automatizace je možná udržováním protokolu změn, který obsahuje tyto příkazy SQL, které se používají k změně datového modelu.</span><span class="sxs-lookup"><span data-stu-id="43356-188">Such automation is possible by maintaining a change log that contains those SQL commands used to alter the data model.</span></span>

<span data-ttu-id="43356-189">Syntaxe SQL obsahuje několik příkazů pro vytváření a úpravu různých databázových objektů.</span><span class="sxs-lookup"><span data-stu-id="43356-189">The SQL syntax includes a number of statements for creating and modifying various database objects.</span></span> <span data-ttu-id="43356-190">Například [*příkaz CREATE TABLE*](https://msdn.microsoft.com/library/ms174979.aspx)po spuštění vytvoří novou tabulku se zadanými sloupci a omezeními.</span><span class="sxs-lookup"><span data-stu-id="43356-190">For example, the [*CREATE TABLE statement*](https://msdn.microsoft.com/library/ms174979.aspx), when executed, creates a new table with the specified columns and constraints.</span></span> <span data-ttu-id="43356-191">[*Příkaz ALTER TABLE*](https://msdn.microsoft.com/library/ms190273.aspx) upraví existující tabulku, přidá, odebere nebo upraví její sloupce nebo omezení.</span><span class="sxs-lookup"><span data-stu-id="43356-191">The [*ALTER TABLE statement*](https://msdn.microsoft.com/library/ms190273.aspx) modifies an existing table, adding, removing, or modifying its columns or constraints.</span></span> <span data-ttu-id="43356-192">K dispozici jsou také příkazy pro vytváření, úpravy a vyřazení indexů, zobrazení, uživatelsky definovaných funkcí, uložených procedur, triggerů a dalších databázových objektů.</span><span class="sxs-lookup"><span data-stu-id="43356-192">There are also statements to create, modify, and drop indexes, views, user-defined functions, stored procedures, triggers, and other database objects.</span></span>

<span data-ttu-id="43356-193">V našem příkladu se vrátí obrázek, který během vývoje již nasazené aplikace přidáte nový sloupec do tabulky `Employees`, odeberete sloupec z tabulky `Orders` a přidáte novou tabulku (`ProductCategories`).</span><span class="sxs-lookup"><span data-stu-id="43356-193">Returning to our earlier example, image that during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`).</span></span> <span data-ttu-id="43356-194">Výsledkem takových akcí je soubor protokolu změn s následujícími příkazy SQL:</span><span class="sxs-lookup"><span data-stu-id="43356-194">Such actions would result in a change log file with the following SQL commands:</span></span>

[!code-sql[Main](strategies-for-database-development-and-deployment-vb/samples/sample1.sql)]

<span data-ttu-id="43356-195">Vložení těchto změn do provozní databáze při nasazení je operace jedním kliknutím: Open SQL Server Management Studio, připojte se k provozní databázi, otevřete nové okno dotazu, vložte obsah protokolu změn a kliknutím na Spustit spusťte skript.</span><span class="sxs-lookup"><span data-stu-id="43356-195">Pushing these changes to the production database at deploy-time is a one-click operation: open SQL Server Management Studio, connect to your production database, open a New Query window, paste the contents of the change log, and click Execute to run the script.</span></span>

## <a name="using-a-comparison-tool-to-synchronize-the-data-models"></a><span data-ttu-id="43356-196">Synchronizace datových modelů pomocí nástroje pro porovnání</span><span class="sxs-lookup"><span data-stu-id="43356-196">Using a Comparison Tool to Synchronize the Data Models</span></span>

<span data-ttu-id="43356-197">Dokumentování změn databáze v prose je jednoduché, ale implementace změn vyžaduje, aby vývojář provedl každou změnu v provozní databázi po druhém. dokumentování příkazů Change SQL implementuje tyto změny v provozní databázi tak snadno a rychle, jako když kliknete na tlačítko, ale vyžaduje učení a sestavování příkazů SQL a syntaxi pro vytváření a změny databázových objektů.</span><span class="sxs-lookup"><span data-stu-id="43356-197">Documenting database changes in prose is easy, but implementing the changes requires a developer to make each change on the production database one at a time; documenting the change SQL commands makes implementing those changes on the production database as easy and quick as clicking a button, but requires learning and mastering the SQL statements and syntax for creating and altering database objects.</span></span> <span data-ttu-id="43356-198">Nástroje pro porovnání databáze z obou přístupů nejlépe vyberou a vyhodí nejhorší.</span><span class="sxs-lookup"><span data-stu-id="43356-198">Database comparison tools take the best from both approaches and discard the worst.</span></span>

<span data-ttu-id="43356-199">Nástroj pro porovnání databáze porovnává schéma nebo data dvou databází a zobrazí souhrnnou sestavu s informacemi o tom, jak se databáze liší.</span><span class="sxs-lookup"><span data-stu-id="43356-199">A database comparison tool compares the schema or data of two databases and displays a summary report showing you how the databases differ.</span></span> <span data-ttu-id="43356-200">Pak můžete kliknutím na tlačítko vygenerovat příkazy SQL pro synchronizaci jednoho nebo více databázových objektů.</span><span class="sxs-lookup"><span data-stu-id="43356-200">Then, with the click of a button, you can generate the SQL commands for synchronizing one or more database objects.</span></span> <span data-ttu-id="43356-201">V kostce můžete použít nástroj pro porovnání databáze k porovnání databází vývoje a produkčního prostředí v době nasazení, což generuje soubor obsahující příkazy SQL, které při spuštění použijí změny ve schématu provozní databáze. zrcadlí schéma vývojové databáze s.</span><span class="sxs-lookup"><span data-stu-id="43356-201">In a nutshell, you can use a database comparison tool to compare the development and production databases at deploy-time, generating a file that contains the SQL commands that, when executed, will apply the changes to the production database s schema so that it mirrors the development database s schema.</span></span>

<span data-ttu-id="43356-202">Existuje řada nástrojů pro porovnání databází jiných výrobců, které nabízí mnoho různých dodavatelů.</span><span class="sxs-lookup"><span data-stu-id="43356-202">There are a variety of third-party database comparison tools offered by many different vendors.</span></span> <span data-ttu-id="43356-203">Jedním z těchto příkladů je [*SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), [*software červené brány*](http://www.red-gate.com/).</span><span class="sxs-lookup"><span data-stu-id="43356-203">One such example is [*SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), by [*Red Gate Software*](http://www.red-gate.com/).</span></span> <span data-ttu-id="43356-204">Podívejme se, jak pomocí porovnání SQL porovnat a synchronizovat schémata vývoje a produkčních databází.</span><span class="sxs-lookup"><span data-stu-id="43356-204">Let s walk through the process of using SQL Compare to compare and synchronize the development and production databases schemas.</span></span>

> [!NOTE]
> <span data-ttu-id="43356-205">V době psaní tohoto zápisu aktuální verze SQL Compare byla verze 7,1 s cenou Standard Edition $395.</span><span class="sxs-lookup"><span data-stu-id="43356-205">At the time of this writing the current version of SQL Compare was version 7.1, with the Standard Edition costing $395.</span></span> <span data-ttu-id="43356-206">Postup můžete sledovat stažením bezplatné 14 dní zkušební verze.</span><span class="sxs-lookup"><span data-stu-id="43356-206">You can follow along by downloading a free 14-day trial.</span></span>

<span data-ttu-id="43356-207">Po spuštění porovnávání SQL se otevře dialogové okno projekty porovnání, ve kterém se zobrazí uložené projekty porovnání SQL.</span><span class="sxs-lookup"><span data-stu-id="43356-207">When SQL Compare starts the Comparison Projects dialog box opens, showing the saved SQL Compare projects.</span></span> <span data-ttu-id="43356-208">Vytvoření nového projektu</span><span class="sxs-lookup"><span data-stu-id="43356-208">Create a new project.</span></span> <span data-ttu-id="43356-209">Tím se spustí Průvodce konfigurací projektu, který zobrazí výzvu k zadání informací o databázích, které se mají porovnat (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="43356-209">This launches the Project Configuration wizard, which prompts for information about the databases to compare (see Figure 1).</span></span> <span data-ttu-id="43356-210">Zadejte informace pro databáze pro vývoj a produkční prostředí.</span><span class="sxs-lookup"><span data-stu-id="43356-210">Enter the information for the development and production environment databases.</span></span>

<span data-ttu-id="43356-211">[![porovnání databází vývoje a výroby](strategies-for-database-development-and-deployment-vb/_static/image2.jpg)](strategies-for-database-development-and-deployment-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="43356-211">[![Compare the Development and Production Databases](strategies-for-database-development-and-deployment-vb/_static/image2.jpg)](strategies-for-database-development-and-deployment-vb/_static/image1.jpg)</span></span>

<span data-ttu-id="43356-212">**Obrázek 1**: porovnání databází vývoje a výroby ([kliknutím zobrazíte obrázek v plné velikosti](strategies-for-database-development-and-deployment-vb/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="43356-212">**Figure 1**: Compare the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image3.jpg))</span></span>

> [!NOTE]
> <span data-ttu-id="43356-213">Pokud vaše databáze vývojového prostředí je databázový soubor SQL Express edice ve složce `App_Data` na vašem webu, budete muset databázi zaregistrovat na databázovém serveru SQL Server Express, aby ji bylo možné vybrat v dialogovém okně na obrázku 1.</span><span class="sxs-lookup"><span data-stu-id="43356-213">If your development environment database is a SQL Express Edition database file in the `App_Data` folder of your website you will need to register the database in the SQL Server Express database server in order to select it from the dialog box shown in Figure 1.</span></span> <span data-ttu-id="43356-214">Nejjednodušší způsob, jak to provést, je otevřít SQL Server Management Studio (SSMS), připojit se k databázovému serveru SQL Server Express a připojit databázi.</span><span class="sxs-lookup"><span data-stu-id="43356-214">The easiest way to accomplish this is to open SQL Server Management Studio (SSMS), connect to the SQL Server Express database server, and attach the database.</span></span> <span data-ttu-id="43356-215">Pokud nemáte na svém počítači nainstalovanou SSMS, můžete si stáhnout a nainstalovat bezplatnou [*SQL Server 2008 Management Studio základní verzi*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span><span class="sxs-lookup"><span data-stu-id="43356-215">If you do not have SSMS installed on your computer you can download and install the free [*SQL Server 2008 Management Studio Basic version*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span></span>

<span data-ttu-id="43356-216">Kromě výběru databází, které se mají porovnat, můžete také na kartě Možnosti zadat řadu nastavení porovnání. Jednu z možností, kterou možná budete chtít zapnout, je "ignorovat omezení a názvy indexů".</span><span class="sxs-lookup"><span data-stu-id="43356-216">In addition to selecting the databases to compare, you can also specify a variety of comparison settings from the Options tab. One option you may want to turn on is the "Ignore constraint and index names."</span></span> <span data-ttu-id="43356-217">V předchozím kurzu jsme přidali objekty databáze Application Services do databází vývoje a výroby.</span><span class="sxs-lookup"><span data-stu-id="43356-217">Recall that in the preceding tutorial we added the application services database objects to the development and production databases.</span></span> <span data-ttu-id="43356-218">Pokud jste k vytvoření těchto objektů v provozní databázi použili nástroj `aspnet_regsql.exe`, zjistíte, že se názvy primárních a jedinečných omezení liší mezi vývojovými a provozními databázemi.</span><span class="sxs-lookup"><span data-stu-id="43356-218">If you used the `aspnet_regsql.exe` tool to create these objects on the production database then you will find that the primary key and unique constraint names differ between the development and production databases.</span></span> <span data-ttu-id="43356-219">V důsledku toho SQL Compare označí všechny tabulky aplikačních služeb tak, jak se liší.</span><span class="sxs-lookup"><span data-stu-id="43356-219">Consequently, SQL Compare will flag all of the application services tables as differing.</span></span> <span data-ttu-id="43356-220">Můžete buď nechat nezaškrtnuté políčko "ignorovat omezení a indexovat názvy" a synchronizovat názvy omezení, nebo pořídit porovnávání SQL pro ignorování těchto rozdílů.</span><span class="sxs-lookup"><span data-stu-id="43356-220">You can either leave the "Ignore constraint and index names" unchecked and synchronize the constraint names, or instruct SQL Compare to ignore these differences.</span></span>

<span data-ttu-id="43356-221">Po výběru databází k porovnání (a přezkoumání možností porovnání) klikněte na tlačítko Porovnat a spusťte porovnání.</span><span class="sxs-lookup"><span data-stu-id="43356-221">After selecting the databases to compare (and reviewing the comparison options), click the Compare Now button to begin the comparison.</span></span> <span data-ttu-id="43356-222">V průběhu několika dalších sekund SQL Compare prověřuje schémata dvou databází a vygeneruje sestavu, jak se liší.</span><span class="sxs-lookup"><span data-stu-id="43356-222">Over the next several seconds, SQL Compare examines the schemas of the two databases and generates a report of how they differ.</span></span> <span data-ttu-id="43356-223">Jsem záměrně změny v vývojové databázi, aby ukázaly, jak se tyto nesrovnalosti poznamenaly v rozhraní SQL Compare.</span><span class="sxs-lookup"><span data-stu-id="43356-223">I ve purposefully made some modifications to the development database to show how such discrepancies are noted in the SQL Compare interface.</span></span> <span data-ttu-id="43356-224">Jak ukazuje obrázek 2, přidám do tabulky `Authors` `BirthDate` sloupec, odebrali jste `ISBN` sloupec z tabulky `Books` a přidali jsme novou tabulku `Ratings`, která je určena k tomu, aby uživatelé navštívili tuto stránku jako počet zkontrolovaných knih.</span><span class="sxs-lookup"><span data-stu-id="43356-224">As Figure 2 shows, I ve added a `BirthDate` column to the `Authors` table, removed the `ISBN` column from the `Books` table, and added a new table, `Ratings`, which is meant to let users visiting the site rate the reviewed books.</span></span>

> [!NOTE]
> <span data-ttu-id="43356-225">Změny datového modelu provedené v tomto kurzu byly provedeny k ilustraci pomocí nástroje pro porovnání databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-225">The data model changes made in this tutorial were done to illustrate using a database comparison tool.</span></span> <span data-ttu-id="43356-226">Tyto změny v databázi nenajdete v budoucích kurzech.</span><span class="sxs-lookup"><span data-stu-id="43356-226">You will not find these changes in the database in future tutorials.</span></span>

<span data-ttu-id="43356-227">[![SQL Compare obsahuje rozdíly mezi vývojovým a provozním databázím.](strategies-for-database-development-and-deployment-vb/_static/image5.jpg)](strategies-for-database-development-and-deployment-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="43356-227">[![SQL Compare Lists the Differences Between the Development and Production Databases](strategies-for-database-development-and-deployment-vb/_static/image5.jpg)](strategies-for-database-development-and-deployment-vb/_static/image4.jpg)</span></span>

<span data-ttu-id="43356-228">**Obrázek 2**: SQL Compare obsahuje rozdíly mezi vývojovými a provozními databázemi ([kliknutím zobrazíte obrázek v plné velikosti).](strategies-for-database-development-and-deployment-vb/_static/image6.jpg)</span><span class="sxs-lookup"><span data-stu-id="43356-228">**Figure 2**: SQL Compare Lists the Differences Between the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image6.jpg))</span></span>

<span data-ttu-id="43356-229">SQL Compare rozděluje objekty databáze do skupin a rychle zobrazuje, jaké objekty existují v obou databázích, ale jsou odlišné, které objekty existují v jedné databázi, ale ne druhá, a které objekty jsou identické.</span><span class="sxs-lookup"><span data-stu-id="43356-229">SQL Compare breaks down the database objects into groups, quickly showing you what objects exist in both databases but are different, which objects exist in one database but not the other, and which objects are identical.</span></span> <span data-ttu-id="43356-230">Jak vidíte, existují dva objekty, které existují v obou databázích, ale jsou odlišné: `Authors` tabulce, která má sloupec přidán, a tabulce `Books`, která byla odstraněna.</span><span class="sxs-lookup"><span data-stu-id="43356-230">As you can see, there are two objects that exist in both databases but are different: the `Authors` table, which had a column added, and the `Books` table, which had one removed.</span></span> <span data-ttu-id="43356-231">Existuje jeden objekt, který existuje pouze ve vývojové databázi, konkrétně nově vytvořená `Ratings` tabulka.</span><span class="sxs-lookup"><span data-stu-id="43356-231">There is one object that exists only in the development database, namely the newly created `Ratings` table.</span></span> <span data-ttu-id="43356-232">A k dispozici jsou 117 objekty, které jsou v obou databázích identické.</span><span class="sxs-lookup"><span data-stu-id="43356-232">And there are 117 objects that are identical in both databases.</span></span>

<span data-ttu-id="43356-233">Výběr databázového objektu zobrazí okno rozdíly SQL, které ukazuje, jak se tyto objekty liší.</span><span class="sxs-lookup"><span data-stu-id="43356-233">Selecting a database object displays the SQL Differences window, which shows how these objects differ.</span></span> <span data-ttu-id="43356-234">Okno rozdíly v systému SQL zobrazené dole na obrázku 2 zvýrazní, že `Authors` tabulka ve vývojové databázi má sloupec `BirthDate`, který se nenachází v tabulce `Authors` v provozní databázi.</span><span class="sxs-lookup"><span data-stu-id="43356-234">The SQL Differences window, displayed at the bottom in Figure 2, highlights that the `Authors` table in the development database has the `BirthDate` column, which is not found in the `Authors` table on the production database.</span></span>

<span data-ttu-id="43356-235">Po kontrole rozdílů a výběru objektů, které chcete synchronizovat, je dalším krokem generování příkazů SQL potřebných k aktualizaci schématu provozní databáze, aby odpovídaly vývojové databázi.</span><span class="sxs-lookup"><span data-stu-id="43356-235">After reviewing the differences and selecting which objects you want to synchronize, the next step is to generate the SQL commands needed to update the production database s schema to match the development database.</span></span> <span data-ttu-id="43356-236">Toho je možné provést prostřednictvím Průvodce synchronizací.</span><span class="sxs-lookup"><span data-stu-id="43356-236">This is accomplished through the Synchronization Wizard.</span></span> <span data-ttu-id="43356-237">Průvodce synchronizací potvrdí, které objekty se mají synchronizovat, a shrnuje plán akcí (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="43356-237">The Synchronization Wizard confirms what objects to synchronize and summarizes the action plan (see Figure 3).</span></span> <span data-ttu-id="43356-238">Databáze můžete okamžitě synchronizovat nebo vygenerovat skript s příkazy SQL, které se dají spustit na vašem volném čase.</span><span class="sxs-lookup"><span data-stu-id="43356-238">You can synchronize the databases immediately or generate a script with the SQL commands that can be run at your leisure.</span></span>

<span data-ttu-id="43356-239">[![k synchronizaci schémat databází použít Průvodce synchronizací](strategies-for-database-development-and-deployment-vb/_static/image8.jpg)](strategies-for-database-development-and-deployment-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="43356-239">[![Use the Synchronization Wizard to Synchronize Your Databases Schemas](strategies-for-database-development-and-deployment-vb/_static/image8.jpg)](strategies-for-database-development-and-deployment-vb/_static/image7.jpg)</span></span>

<span data-ttu-id="43356-240">**Obrázek 3**: k synchronizaci schémat databází použijte Průvodce synchronizací ([kliknutím zobrazíte obrázek v plné velikosti).](strategies-for-database-development-and-deployment-vb/_static/image9.jpg)</span><span class="sxs-lookup"><span data-stu-id="43356-240">**Figure 3**: Use the Synchronization Wizard to Synchronize Your Databases Schemas ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image9.jpg))</span></span>

<span data-ttu-id="43356-241">Nástroje pro porovnání databáze, jako je třeba software Red hradlo s SQL Compare, provádějí změny ve schématu vývojové databáze do provozní databáze stejně snadno jako Point a kliknutí.</span><span class="sxs-lookup"><span data-stu-id="43356-241">Database comparison tools like Red Gate Software s SQL Compare make applying the changes to the development database schema to the production database as easy as point and click.</span></span>

> [!NOTE]
> <span data-ttu-id="43356-242">Porovnávání SQL porovnává a synchronizuje dvě *schémata*databází.</span><span class="sxs-lookup"><span data-stu-id="43356-242">SQL Compare compares and synchronizes two databases *schemas*.</span></span> <span data-ttu-id="43356-243">Bohužel data neporovnat a nesynchronizuje v rámci dvou tabulek databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-243">Unfortunately, it does not compare and synchronize the data within two databases tables.</span></span> <span data-ttu-id="43356-244">Software červené brány nabízí produkt s názvem [*porovnání dat SQL*](http://www.red-gate.com/products/SQL_Data_Compare/) , který porovnává a synchronizuje data mezi dvěma databázemi, ale jedná se o samostatný produkt z porovnání SQL a náklady jiné $395.</span><span class="sxs-lookup"><span data-stu-id="43356-244">Red Gate Software does offer a product named [*SQL Data Compare*](http://www.red-gate.com/products/SQL_Data_Compare/) that compares and synchronizes the data between two databases, but it is a separate product from SQL Compare and costs another $395.</span></span>

## <a name="taking-the-application-offline-during-deployment"></a><span data-ttu-id="43356-245">Přepnutí aplikace do režimu offline během nasazení</span><span class="sxs-lookup"><span data-stu-id="43356-245">Taking the Application Offline During Deployment</span></span>

<span data-ttu-id="43356-246">Jak jsme viděli v těchto kurzech, nasazení je proces, který zahrnuje několik kroků: kopírování stránek ASP.NET, stránek předlohy, souborů CSS, souborů JavaScriptu, obrázků a dalšího potřebného obsahu z vývojového prostředí do produkčního prostředí. hlediska v případě potřeby se kopírují konfigurační informace specifické pro produkční prostředí. a použití změn pro datový model od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="43356-246">As we ve seen throughout these tutorials, deployment is a process that involves multiple steps: copying the ASP.NET pages, master pages, CSS files, JavaScript files, images, and other necessary content from the development environment to the production environment; copying up the production environment-specific configuration information, if needed; and applying the changes to the data model since the last deployment.</span></span> <span data-ttu-id="43356-247">V závislosti na počtu souborů a složitosti vaší databáze můžou tyto kroky trvat několik sekund, než se dokončí.</span><span class="sxs-lookup"><span data-stu-id="43356-247">Depending on the number of files and the complexity of your database changes, these steps can take anywhere from a few seconds to several minutes to complete.</span></span> <span data-ttu-id="43356-248">Během tohoto okna je webová aplikace ve službě tokem a uživatelé, kteří navštíví web, můžou zaznamenat chyby nebo neočekávané chování.</span><span class="sxs-lookup"><span data-stu-id="43356-248">During this window the web application is in flux and users visiting the site may experience errors or unexpected behavior.</span></span>

<span data-ttu-id="43356-249">Při nasazení webu je nejlepší převést webovou aplikaci do stavu offline, dokud se nasazení nedokončí.</span><span class="sxs-lookup"><span data-stu-id="43356-249">When deploying a website it is best to take the web application "offline" until deployment has completed.</span></span> <span data-ttu-id="43356-250">Převedení aplikace do offline režimu (a její následné zálohování po dokončení procesu nasazení) je stejně snadné jako nahrání souboru a jeho odstranění.</span><span class="sxs-lookup"><span data-stu-id="43356-250">Taking the application offline (and bringing it back up once the deployment process has finished) is as easy as uploading a file and then deleting it.</span></span> <span data-ttu-id="43356-251">Od ASP.NET 2,0 přebírá pouhá přítomnost souboru s názvem `app_offline.htm` v kořenovém adresáři aplikace s celým webem "offline".</span><span class="sxs-lookup"><span data-stu-id="43356-251">Starting with ASP.NET 2.0, the mere presence of a file named `app_offline.htm` in the application s root directory takes the entire website "offline."</span></span> <span data-ttu-id="43356-252">Každý požadavek na stránku ASP.NET na dané lokalitě automaticky odpoví obsahem `app_offline.htm` souboru.</span><span class="sxs-lookup"><span data-stu-id="43356-252">Any request to an ASP.NET page on that site is automatically responded with the contents of the `app_offline.htm` file.</span></span> <span data-ttu-id="43356-253">Po odebrání tohoto souboru se aplikace vrátí zpět do režimu online.</span><span class="sxs-lookup"><span data-stu-id="43356-253">Once that file is removed, the application comes back online.</span></span>

<span data-ttu-id="43356-254">Převedení aplikace do režimu offline během nasazování je tak jednoduché jako nahrání souboru `app_offline.htm` do kořenového adresáře produkčního prostředí před zahájením procesu nasazení a jeho odstraněním (nebo přejmenováním na něco jiného) po dokončení nasazení.</span><span class="sxs-lookup"><span data-stu-id="43356-254">Taking an application offline during deployment, then, is as simple as uploading an `app_offline.htm` file to the production environment s root directory prior to beginning the deployment process and then deleting it (or renaming it to something else) once deployment is complete.</span></span> <span data-ttu-id="43356-255">Další informace o tomto postupu najdete v článku Jan Peterson s, který přebírá [*aplikaci ASP.NET v režimu offline*](http://www.15seconds.com/issue/061207.htm).</span><span class="sxs-lookup"><span data-stu-id="43356-255">For more information on this technique refer to John Peterson s article, Taking an [*ASP.NET Application Offline*](http://www.15seconds.com/issue/061207.htm).</span></span>

## <a name="summary"></a><span data-ttu-id="43356-256">Souhrn</span><span class="sxs-lookup"><span data-stu-id="43356-256">Summary</span></span>

<span data-ttu-id="43356-257">Hlavním problémem při nasazení aplikace řízené daty v průběhu nasazení databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-257">The main challenge in deploying a data-driven application centers around deploying the database.</span></span> <span data-ttu-id="43356-258">Vzhledem k tomu, že existují dvě verze databáze – jeden ve vývojovém prostředí a jeden v produkčním prostředí – tato dvě databázová schémata můžou být nesynchronizovaná, protože nové funkce se přidávají při vývoji.</span><span class="sxs-lookup"><span data-stu-id="43356-258">Because there are two versions of the database - one in the development environment and one in the production environment - these two databases schemas can become out of sync as new features are added in development.</span></span> <span data-ttu-id="43356-259">Co víc, protože provozní databáze, která se naplní skutečnými daty od reálných uživatelů, nemůžete přepsat provozní databázi upravenou vývojovou databází, třeba když nasadíte soubory, které tvoří aplikaci (stránky ASP.NET, soubory obrázků a tak dále).</span><span class="sxs-lookup"><span data-stu-id="43356-259">What s more, because the production database as being populated with real data from real users, you cannot overwrite the production database with the modified development database like you can when deploying the files that make up the application (the ASP.NET pages, image files, and so forth).</span></span> <span data-ttu-id="43356-260">Místo toho nasazení databáze zahrnuje implementaci přesné sady změn provedených ve vývojových databázích v provozní databázi od posledního nasazení.</span><span class="sxs-lookup"><span data-stu-id="43356-260">Instead, deploying a database entails implementing the precise set of changes made to the development database on the production database since the last deployment.</span></span>

<span data-ttu-id="43356-261">V tomto kurzu jste se podívali na tři techniky pro údržbu a používání protokolu změn databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-261">This tutorial looked at three techniques for maintaining and applying a log of database changes.</span></span> <span data-ttu-id="43356-262">Nejjednodušším přístupem je zaznamenat změny v prose.</span><span class="sxs-lookup"><span data-stu-id="43356-262">The simplest approach is to record the changes in prose.</span></span> <span data-ttu-id="43356-263">I když tento cílem provádí implementaci těchto změn v provozní databázi ručním procesem, nevyžaduje znalost příkazů SQL pro vytváření a změnu databázových objektů.</span><span class="sxs-lookup"><span data-stu-id="43356-263">While this tactic makes implementing these changes on the production database a manual process, it does not require knowledge of the SQL commands for creating and altering database objects.</span></span> <span data-ttu-id="43356-264">Propracovanější přístup a jeden, který je mnohem více palatable ve větších projektech nebo projektech s více vývojáři, je zaznamenat změny jako série příkazů SQL.</span><span class="sxs-lookup"><span data-stu-id="43356-264">A more sophisticated approach, and one that is much more palatable in larger projects or projects with multiple developers, is to record the changes as a series of SQL commands.</span></span> <span data-ttu-id="43356-265">To významně Hastens tyto změny do cílové databáze.</span><span class="sxs-lookup"><span data-stu-id="43356-265">This greatly hastens rolling out these changes to the target database.</span></span> <span data-ttu-id="43356-266">Nejlepší z obou přístupů lze dosáhnout pomocí nástroje pro porovnání databáze, jako je například porovnání softwaru Red hradlo s SQL.</span><span class="sxs-lookup"><span data-stu-id="43356-266">The best of both approaches can be achieved by using a database comparison tool, such as Red Gate Software s SQL Compare.</span></span>

<span data-ttu-id="43356-267">V tomto kurzu se uzavírá náš fokus na nasazení aplikace řízené daty.</span><span class="sxs-lookup"><span data-stu-id="43356-267">This tutorial concludes our focus on deploying a data-driven application.</span></span> <span data-ttu-id="43356-268">Další sada kurzů si vyhledá, jak reagovat na chyby v provozním prostředí.</span><span class="sxs-lookup"><span data-stu-id="43356-268">The next set of tutorials looks at how to respond to errors in the production environment.</span></span> <span data-ttu-id="43356-269">Podíváme se, jak místo žluté obrazovky smrti zobrazit přívětivou chybovou stránku.</span><span class="sxs-lookup"><span data-stu-id="43356-269">We'll look at how to display a friendly error page rather instead of the Yellow Screen of Death.</span></span> <span data-ttu-id="43356-270">Podíváme se na to, jak protokolovat chyby a podrobnosti a jak vás upozornit, když dojde k těmto chybám.</span><span class="sxs-lookup"><span data-stu-id="43356-270">And we'll see how to log the error s details and how to alert you when such errors occur.</span></span>

<span data-ttu-id="43356-271">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="43356-271">Happy Programming!</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="43356-272">[Předchozí](configuring-a-website-that-uses-application-services-vb.md)
> [Další](displaying-a-custom-error-page-vb.md)</span><span class="sxs-lookup"><span data-stu-id="43356-272">[Previous](configuring-a-website-that-uses-application-services-vb.md)
[Next](displaying-a-custom-error-page-vb.md)</span></span>
