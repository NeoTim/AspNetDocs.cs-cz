---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/displaying-a-custom-error-page-cs
title: Zobrazení vlastní chybové stránky (C#) | Microsoft Docs
author: rick-anderson
description: Co uživatel uvidí, když dojde k běhové chybě ve webové aplikaci v ASP.NET? Odpověď závisí na tom, jak je &lt; Konfigurace customErrors webu &gt; ....
ms.author: riande
ms.date: 06/09/2009
ms.assetid: cb061642-faf3-41b2-9372-69e13444d458
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/displaying-a-custom-error-page-cs
msc.type: authoredcontent
ms.openlocfilehash: 777948732690443d63f1fb2afd6f72a33a496c44
ms.sourcegitcommit: 0d583ed9253103f3e50b6d729276e667591cdd41
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/09/2020
ms.locfileid: "86211046"
---
# <a name="displaying-a-custom-error-page-c"></a><span data-ttu-id="0f5c4-104">Zobrazení vlastní chybové stránky (C#)</span><span class="sxs-lookup"><span data-stu-id="0f5c4-104">Displaying a Custom Error Page (C#)</span></span>

<span data-ttu-id="0f5c4-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="0f5c4-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="0f5c4-106">[Stažení kódu](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_11_CS.zip) nebo [stažení PDF](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial11_CustomErrors_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="0f5c4-106">[Download Code](https://download.microsoft.com/download/1/0/C/10CC829F-A808-4302-97D3-59989B8F9C01/ASPNET_Hosting_Tutorial_11_CS.zip) or [Download PDF](https://download.microsoft.com/download/5/C/5/5C57DB8C-5DEA-4B3A-92CA-4405544D313B/aspnet_tutorial11_CustomErrors_cs.pdf)</span></span>

> <span data-ttu-id="0f5c4-107">Co uživatel uvidí, když dojde k běhové chybě ve webové aplikaci v ASP.NET?</span><span class="sxs-lookup"><span data-stu-id="0f5c4-107">What does the user see when a runtime error occurs in an ASP.NET web application?</span></span> <span data-ttu-id="0f5c4-108">Odpověď závisí na tom, jak je &lt; Konfigurace customErrors webu &gt; .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-108">The answer depends on how the website's &lt;customErrors&gt; configuration.</span></span> <span data-ttu-id="0f5c4-109">Ve výchozím nastavení se uživatelům zobrazí nemonitorované žluté zobrazení, že došlo k chybě za běhu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-109">By default, users are shown an unsightly yellow screen proclaiming that a runtime error has occurred.</span></span> <span data-ttu-id="0f5c4-110">V tomto kurzu se dozvíte, jak přizpůsobit tato nastavení, aby se zobrazila vlastní chybová stránka aesthetically-přitažlivé, která odpovídá vzhledu a chování vašeho webu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-110">This tutorial shows how to customize these settings to display an aesthetically-pleasing custom error page that matches your site's look and feel.</span></span>

## <a name="introduction"></a><span data-ttu-id="0f5c4-111">Úvod</span><span class="sxs-lookup"><span data-stu-id="0f5c4-111">Introduction</span></span>

<span data-ttu-id="0f5c4-112">V ideálním světě by nedocházelo k žádným chybám za běhu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-112">In a perfect world there would be no run-time errors.</span></span> <span data-ttu-id="0f5c4-113">Programátoři by napsali kód s Nary chybou a robustním ověřováním vstupu uživatele a externí prostředky, jako jsou databázové servery a e-mailové servery, nikdy nepřešly do offline režimu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-113">Programmers would write code with nary a bug and with robust user input validation, and external resources like database servers and email servers would never go offline.</span></span> <span data-ttu-id="0f5c4-114">V průběhu realit je samozřejmě nevyhnutelné chyby.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-114">Of course, in reality errors are inevitable.</span></span> <span data-ttu-id="0f5c4-115">Třídy v .NET Framework signalizují chybu vyvoláním výjimky.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-115">The classes in the .NET Framework signal an error by throwing an exception.</span></span> <span data-ttu-id="0f5c4-116">Například volání metody Open objektu SqlConnection naváže připojení k databázi určené připojovacím řetězcem.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-116">For example, calling a SqlConnection object's Open method establishes a connection to the database specified by a connection string.</span></span> <span data-ttu-id="0f5c4-117">Pokud je však databáze mimo provoz nebo pokud jsou přihlašovací údaje v připojovacím řetězci neplatné, vyvolá metoda Open výjimku `SqlException` .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-117">However, if the database is down or if the credentials in the connection string are invalid then the Open method throws a `SqlException`.</span></span> <span data-ttu-id="0f5c4-118">Výjimky lze zpracovat pomocí `try/catch/finally` bloků.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-118">Exceptions can be handled by the use of `try/catch/finally` blocks.</span></span> <span data-ttu-id="0f5c4-119">Pokud kód v rámci `try` bloku vyvolá výjimku, řízení se převede na příslušný blok catch, kde se vývojář může pokusit o zotavení z chyby.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-119">If code within a `try` block throws an exception, control is transferred to the appropriate catch block where the developer can attempt to recover from the error.</span></span> <span data-ttu-id="0f5c4-120">Pokud neexistuje žádný odpovídající blok catch nebo pokud kód, který vyvolal výjimku, není v bloku try, výjimka percolates zásobník volání v hledání `try/catch/finally` bloků.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-120">If there is no matching catch block, or if the code that threw the exception is not in a try block, the exception percolates up the call stack in search of `try/catch/finally` blocks.</span></span>

<span data-ttu-id="0f5c4-121">Pokud se výjimka objeví v bublinách až po ASP.NET modulu runtime bez zpracování, je vyvolána [ `Error` událost](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx) [ `HttpApplication` třídy](https://msdn.microsoft.com/library/system.web.httpapplication.aspx)a zobrazí se nakonfigurovaná *chybová stránka* .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-121">If the exception bubbles all the way up to the ASP.NET runtime without being handled, the [`HttpApplication` class](https://msdn.microsoft.com/library/system.web.httpapplication.aspx)'s [`Error` event](https://msdn.microsoft.com/library/system.web.httpapplication.error.aspx) is raised and the configured *error page* is displayed.</span></span> <span data-ttu-id="0f5c4-122">Ve výchozím nastavení ASP.NET zobrazí chybovou stránku, na kterou se affectionately říká [žlutá obrazovka smrti](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death#Yellow) (YSOD).</span><span class="sxs-lookup"><span data-stu-id="0f5c4-122">By default, ASP.NET displays an error page that is affectionately referred to as the [Yellow Screen of Death](http://en.wikipedia.org/wiki/Yellow_Screen_of_Death#Yellow) (YSOD).</span></span> <span data-ttu-id="0f5c4-123">Existují dvě verze YSOD: jedna zobrazuje podrobnosti výjimky, trasování zásobníku a další informace, které jsou užitečné pro vývojáře s laděním aplikace (viz **Obrázek 1**); Druhá hodnota se jednoduše uvádí, že došlo k chybě za běhu (viz **Obrázek 2**).</span><span class="sxs-lookup"><span data-stu-id="0f5c4-123">There are two versions of the YSOD: one shows the exception details, a stack trace, and other information helpful to developers debugging the application (see **Figure 1**); the other simply states that there was a run-time error (see **Figure 2**).</span></span>

<span data-ttu-id="0f5c4-124">Podrobnosti o výjimce YSOD je poměrně užitečná pro vývojáře, kteří aplikaci ladí, ale zobrazuje YSOD pro koncové uživatele je směrové a neprofesionální.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-124">The exception details YSOD is quite helpful for developers debugging the application, but showing a YSOD to end users is tacky and unprofessional.</span></span> <span data-ttu-id="0f5c4-125">Místo toho je potřeba, aby se koncoví uživatelé převzali na chybovou stránku, která udržuje vzhled webu a má pocit, že se s tím postará prose popis situace.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-125">Instead, end users should be taken to an error page that maintains the site's look and feel with more user-friendly prose describing the situation.</span></span> <span data-ttu-id="0f5c4-126">Dobrá zpráva je, že vytvoření takové vlastní chybové stránky je poměrně snadné.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-126">The good news is that creating such a custom error page is quite easy.</span></span> <span data-ttu-id="0f5c4-127">Tento kurz začíná pohledem na ASP. Různé chybové stránky sítě.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-127">This tutorial starts with a look at ASP.NET's different error pages.</span></span> <span data-ttu-id="0f5c4-128">Pak ukazuje, jak nakonfigurovat webovou aplikaci tak, aby zobrazovala uživatele vlastní chybovou stránku na tváři chyby.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-128">It then shows how to configure the web application to show users a custom error page in the face of an error.</span></span>

### <a name="examining-the-three-types-of-error-pages"></a><span data-ttu-id="0f5c4-129">Prozkoumání tří typů chybových stránek</span><span class="sxs-lookup"><span data-stu-id="0f5c4-129">Examining the Three Types of Error Pages</span></span>

<span data-ttu-id="0f5c4-130">Pokud dojde k neošetřené výjimce v aplikaci ASP.NET, zobrazí se jeden ze tří typů chybových stránek:</span><span class="sxs-lookup"><span data-stu-id="0f5c4-130">When an unhandled exception arises in an ASP.NET application one of three types of error pages is displayed:</span></span>

- <span data-ttu-id="0f5c4-131">Podrobnosti výjimky žlutá obrazovka na chybové stránce smrti,</span><span class="sxs-lookup"><span data-stu-id="0f5c4-131">The Exception Details Yellow Screen of Death error page,</span></span>
- <span data-ttu-id="0f5c4-132">Chyba za běhu žlutá obrazovka chybové stránky smrti nebo</span><span class="sxs-lookup"><span data-stu-id="0f5c4-132">The Runtime Error Yellow Screen of Death error page, or</span></span>
- <span data-ttu-id="0f5c4-133">Vlastní chybová stránka</span><span class="sxs-lookup"><span data-stu-id="0f5c4-133">A custom error page</span></span>

<span data-ttu-id="0f5c4-134">Stránka s chybou, kterou vývojáři znají, je YSOD podrobnosti o výjimce.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-134">The error page developers are most familiar with is the Exception Details YSOD.</span></span> <span data-ttu-id="0f5c4-135">Ve výchozím nastavení se tato stránka zobrazuje uživatelům, kteří jsou místně navštíveni, a proto je stránka, která se zobrazí, když při testování webu ve vývojovém prostředí dojde k chybě.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-135">By default, this page is displayed to users who are visiting locally and therefore is the page that you see when an error occurs when testing the site in the development environment.</span></span> <span data-ttu-id="0f5c4-136">Jak je uvedeno, informace o výjimce YSOD poskytuje podrobnosti o výjimce – typ, zprávu a trasování zásobníku.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-136">As its name implies, the Exception Details YSOD provides details about the exception - the type, the message, and the stack trace.</span></span> <span data-ttu-id="0f5c4-137">Co více, pokud byla výjimka vyvolána kódem na pozadí vaší stránky ASP.NET a pokud je aplikace nakonfigurována pro ladění, pak podrobnosti o výjimce YSOD také zobrazí tento řádek kódu (a několik řádků kódu nad a pod ním).</span><span class="sxs-lookup"><span data-stu-id="0f5c4-137">What's more, if the exception was raised by code in your ASP.NET page's code-behind class and if the application is configured for debugging then the Exception Details YSOD will also show this line of code (and a few lines of code above and below it).</span></span>

<span data-ttu-id="0f5c4-138">**Obrázek 1** znázorňuje stránku podrobností o výjimce YSOD.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-138">**Figure 1** shows the Exception Details YSOD page.</span></span> <span data-ttu-id="0f5c4-139">Poznamenejte si adresu URL v okně Adresa prohlížeče: `http://localhost:62275/Genre.aspx?ID=foo` .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-139">Note the URL in the browser's address window: `http://localhost:62275/Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="0f5c4-140">Odvolá na `Genre.aspx` stránku seznam revizí knihy v konkrétním žánru.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-140">Recall that the `Genre.aspx` page lists the book reviews in a particular genre.</span></span> <span data-ttu-id="0f5c4-141">Vyžaduje, aby `GenreId` hodnota (a `uniqueidentifier` ) byla předána řetězcem QueryString; například příslušná adresa URL pro zobrazení fiktivních recenzí `Genre.aspx?ID=7683ab5d-4589-4f03-a139-1c26044d0146` .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-141">It requires that `GenreId` value (a `uniqueidentifier`) be passed through the querystring; for example, the appropriate URL to view the fiction reviews is `Genre.aspx?ID=7683ab5d-4589-4f03-a139-1c26044d0146`.</span></span> <span data-ttu-id="0f5c4-142">Pokud `uniqueidentifier` je hodnota bez hodnoty předána prostřednictvím řetězce dotazu (například "foo"), je vyvolána výjimka.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-142">If a non-`uniqueidentifier` value is passed in through the querystring (such as "foo") an exception is thrown.</span></span>

> [!NOTE]
> <span data-ttu-id="0f5c4-143">Chcete-li regenerovat tuto chybu v ukázkové webové aplikaci, která je k dispozici ke stažení, můžete buď přejít `Genre.aspx?ID=foo` přímo, nebo kliknout na odkaz "generovat chybu za běhu" v tématu `Default.aspx` .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-143">To reproduce this error in the demo web application available for download you can either visit `Genre.aspx?ID=foo` directly or click the "Generate a Runtime Error" link in `Default.aspx`.</span></span>

<span data-ttu-id="0f5c4-144">Všimněte si informací o výjimce prezentovaných na **obrázku 1**.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-144">Note the exception information presented in **Figure 1**.</span></span> <span data-ttu-id="0f5c4-145">Zpráva o výjimce, "převod se nezdařil při převodu ze znakového řetězce na typ uniqueidentifier" je přítomen v horní části stránky.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-145">The exception message, "Conversion failed when converting from a character string to uniqueidentifier" is present at the top of the page.</span></span> <span data-ttu-id="0f5c4-146">Typ výjimky, `System.Data.SqlClient.SqlException` , je uveden také.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-146">The type of the exception, `System.Data.SqlClient.SqlException`, is listed, as well.</span></span> <span data-ttu-id="0f5c4-147">K dispozici je také trasování zásobníku.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-147">There's also the stack trace.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image2.png)](displaying-a-custom-error-page-cs/_static/image1.png)

<span data-ttu-id="0f5c4-148">**Obrázek 1**: YSOD podrobnosti o výjimce obsahuje informace o výjimce.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-148">**Figure 1**: The Exception Details YSOD Includes Information About the Exception</span></span>  
 <span data-ttu-id="0f5c4-149">([Kliknutím zobrazíte obrázek v plné velikosti.](displaying-a-custom-error-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="0f5c4-149">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image3.png))</span></span>

<span data-ttu-id="0f5c4-150">Druhý typ YSOD je Běhová chyba YSOD a je zobrazen na **obrázku 2**.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-150">The other type of YSOD is the Runtime Error YSOD, and is shown in **Figure 2**.</span></span> <span data-ttu-id="0f5c4-151">Běhová chyba YSOD informuje návštěvníka, že došlo k chybě za běhu, ale nezahrnuje žádné informace o výjimce, která byla vyvolána.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-151">The Runtime Error YSOD informs the visitor that a run-time error has occurred, but it does not include any information about the exception that was thrown.</span></span> <span data-ttu-id="0f5c4-152">(Nicméně obsahuje pokyny k tomu, jak zobrazit podrobnosti o chybě úpravou `Web.config` souboru, který je součástí toho, co YSOD vypadá neprofesionálně.)</span><span class="sxs-lookup"><span data-stu-id="0f5c4-152">(It does, however, provide instructions on how to make the error details viewable by modifying the `Web.config` file, which is part of what makes such a YSOD look unprofessional.)</span></span>

<span data-ttu-id="0f5c4-153">Ve výchozím nastavení se chyba modulu runtime YSOD zobrazuje uživatelům, kteří se vzdáleně navštěvují (přes, jak je uvedeno v adrese http://www.yoursite.com) URL na adresním řádku prohlížeče na **obrázku 2**: `http://httpruntime.web703.discountasp.net/Genre.aspx?ID=foo` .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-153">By default, the Runtime Error YSOD is shown to users visiting remotely (through http://www.yoursite.com), as evidenced by the URL in the browser's Address bar in **Figure 2**: `http://httpruntime.web703.discountasp.net/Genre.aspx?ID=foo`.</span></span> <span data-ttu-id="0f5c4-154">K dispozici jsou dvě různé obrazovky YSOD, protože vývojáři mají zájem o informace o chybě, ale tyto informace by se neměly zobrazovat na živém webu, protože mohou odhalit potenciální slabá místa zabezpečení nebo jiné citlivé informace pro kohokoli, kdo navštívil web.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-154">The two different YSOD screens exist because developers are interested in knowing the error details, but such information should not be shown on a live site as it may reveal potential security vulnerabilities or other sensitive information to anyone who visits your site.</span></span>

> [!NOTE]
> <span data-ttu-id="0f5c4-155">Pokud používáte a používáte jako webového hostitele DiscountASP.NET, můžete si všimnout, že při návštěvě živého webu se nezobrazuje YSOD chyba modulu runtime.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-155">If you are following along and are using DiscountASP.NET as your web host, you may notice that the Runtime Error YSOD does not display when visiting the live site.</span></span> <span data-ttu-id="0f5c4-156">Důvodem je to, že DiscountASP.NET má své servery konfigurované tak, aby ve výchozím nastavení zobrazovaly podrobnosti o výjimce YSOD.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-156">This is because DiscountASP.NET has their servers configured to show the Exception Details YSOD by default.</span></span> <span data-ttu-id="0f5c4-157">Dobrá zpráva je, že toto výchozí chování můžete přepsat přidáním `<customErrors>` oddílu do `Web.config` souboru.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-157">The good news is that you can override this default behavior by adding a `<customErrors>` section to your `Web.config` file.</span></span> <span data-ttu-id="0f5c4-158">V části konfigurace, která chybová stránka se zobrazuje, se podrobně podíváme na `<customErrors>` část.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-158">The "Configuring Which Error Page is Displayed" section examines the `<customErrors>` section in detail.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image5.png)](displaying-a-custom-error-page-cs/_static/image4.png)

<span data-ttu-id="0f5c4-159">**Obrázek 2**: Běhová chyba YSOD neobsahuje žádné podrobnosti o chybě.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-159">**Figure 2**: The Runtime Error YSOD Does Not Include Any Error Details</span></span>  
 <span data-ttu-id="0f5c4-160">([Kliknutím zobrazíte obrázek v plné velikosti.](displaying-a-custom-error-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="0f5c4-160">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image6.png))</span></span>

<span data-ttu-id="0f5c4-161">Třetí typ chybové stránky je vlastní chybová stránka, která je webovou stránkou, kterou vytvoříte.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-161">The third type of error page is the custom error page, which is a web page that you create.</span></span> <span data-ttu-id="0f5c4-162">Výhodou vlastní chybové stránky je, že máte plnou kontrolu nad informacemi, které se zobrazí uživateli, spolu s jeho vzhledem a chováním stránky. vlastní chybová stránka může používat stejnou stránku předlohy a styly jako vaše jiné stránky.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-162">The benefit of a custom error page is that you have complete control over the information that is displayed to the user along with the page's look and feel; the custom error page can use the same master page and styles as your other pages.</span></span> <span data-ttu-id="0f5c4-163">Část "použití vlastní chybové stránky" vás provede vytvořením vlastní chybové stránky a její konfigurací, aby se zobrazila v případě neošetřené výjimky.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-163">The "Using a Custom Error Page" section walks through creating a custom error page and configuring it to display in the event of an unhandled exception.</span></span> <span data-ttu-id="0f5c4-164">**Obrázek 3** nabízí špičku vás zajímá této vlastní chybové stránky.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-164">**Figure 3** offers a sneak peak of this custom error page.</span></span> <span data-ttu-id="0f5c4-165">Jak vidíte, vzhled a chování chybové stránky je mnohem lepší než na žlutých obrazovkách smrti uvedených na obrázcích 1 a 2.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-165">As you can see, the look and feel of the error page is much more professional-looking than either of the Yellow Screens of Death shown in Figures 1 and 2.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image8.png)](displaying-a-custom-error-page-cs/_static/image7.png)

<span data-ttu-id="0f5c4-166">**Obrázek 3**: vlastní chybová stránka nabízí lépe přizpůsobený vzhled a chování.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-166">**Figure 3**: A Custom Error Page Offers a More Tailored Look and Feel</span></span>  
 <span data-ttu-id="0f5c4-167">([Kliknutím zobrazíte obrázek v plné velikosti.](displaying-a-custom-error-page-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="0f5c4-167">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image9.png))</span></span>

<span data-ttu-id="0f5c4-168">Chvíli počkejte, než zkontrolujete adresní řádek prohlížeče na **obrázku 3**.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-168">Take a moment to inspect the browser's Address bar in **Figure 3**.</span></span> <span data-ttu-id="0f5c4-169">Všimněte si, že se v adresním řádku zobrazuje adresa URL vlastní chybové stránky ( `/ErrorPages/Oops.aspx` ).</span><span class="sxs-lookup"><span data-stu-id="0f5c4-169">Note that the Address bar shows the URL of the custom error page (`/ErrorPages/Oops.aspx`).</span></span> <span data-ttu-id="0f5c4-170">Na obrázcích 1 a 2 se žluté obrazovky smrti zobrazují na stejné stránce, na které chyba vznikla ( `Genre.aspx` ).</span><span class="sxs-lookup"><span data-stu-id="0f5c4-170">In Figures 1 and 2 the Yellow Screens of Death are shown in the same page that the error originated from (`Genre.aspx`).</span></span> <span data-ttu-id="0f5c4-171">Vlastní chybová stránka je předána adresa URL stránky, kde došlo k chybě prostřednictvím `aspxerrorpath` parametru QueryString.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-171">The custom error page is passed the URL of the page where the error occurred via the `aspxerrorpath` querystring parameter.</span></span>

## <a name="configuring-which-error-page-is-displayed"></a><span data-ttu-id="0f5c4-172">Konfigurace zobrazené chybové stránky</span><span class="sxs-lookup"><span data-stu-id="0f5c4-172">Configuring Which Error Page is Displayed</span></span>

<span data-ttu-id="0f5c4-173">To, jaké tři chybové stránky se zobrazí, je založené na dvou proměnných:</span><span class="sxs-lookup"><span data-stu-id="0f5c4-173">Which of the three possible error pages is displayed is based on two variables:</span></span>

- <span data-ttu-id="0f5c4-174">Informace o konfiguraci v `<customErrors>` části a</span><span class="sxs-lookup"><span data-stu-id="0f5c4-174">The configuration information in the `<customErrors>` section, and</span></span>
- <span data-ttu-id="0f5c4-175">Zda uživatel navštíví web místně nebo vzdáleně.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-175">Whether the user is visiting the site locally or remotely.</span></span>

<span data-ttu-id="0f5c4-176">[ `<customErrors>` Část](https://msdn.microsoft.com/library/h0hfz6fc.aspx) v `Web.config` má dva atributy, které mají vliv na zobrazenou chybovou stránku: `defaultRedirect` a `mode` .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-176">The [`<customErrors>` section](https://msdn.microsoft.com/library/h0hfz6fc.aspx) in `Web.config` has two attributes that affect what error page is shown: `defaultRedirect` and `mode`.</span></span> <span data-ttu-id="0f5c4-177">`defaultRedirect`Atribut je nepovinný.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-177">The `defaultRedirect` attribute is optional.</span></span> <span data-ttu-id="0f5c4-178">Pokud je tato stránka k dispozici, určuje adresu URL vlastní chybové stránky a označuje, že by se měla zobrazit vlastní chybová stránka namísto běhové chyby YSOD.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-178">If provided, it specifies the URL of the custom error page and indicates that the custom error page should be shown instead of the Runtime Error YSOD.</span></span> <span data-ttu-id="0f5c4-179">`mode`Atribut je povinný a přijímá jednu ze tří hodnot: `On` , `Off` , nebo `RemoteOnly` .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-179">The `mode` attribute is required and accepts one of three values: `On`, `Off`, or `RemoteOnly`.</span></span> <span data-ttu-id="0f5c4-180">Tyto hodnoty mají následující chování:</span><span class="sxs-lookup"><span data-stu-id="0f5c4-180">These values have the following behavior:</span></span>

- <span data-ttu-id="0f5c4-181">`On`– označuje, že vlastní chybová stránka nebo chyba modulu runtime YSOD se zobrazí všem návštěvníkům bez ohledu na to, jestli jsou místní nebo vzdálené.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-181">`On` - indicates that the custom error page or the Runtime Error YSOD is shown to all visitors, regardless of whether they are local or remote.</span></span>
- <span data-ttu-id="0f5c4-182">`Off`– Určuje, že podrobnosti o výjimce YSOD se zobrazí všem návštěvníkům bez ohledu na to, jestli jsou místní nebo vzdálené.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-182">`Off` - specifies that the Exception Details YSOD is displayed to all visitors, regardless of whether they are local or remote.</span></span>
- <span data-ttu-id="0f5c4-183">`RemoteOnly`– označuje, že vlastní chybová stránka nebo chyba modulu runtime YSOD se zobrazuje vzdáleným návštěvníkům, zatímco podrobnosti o výjimce YSOD se zobrazují místním návštěvníkům.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-183">`RemoteOnly` - indicates that the custom error page or the Runtime Error YSOD is shown to remote visitors, while the Exception Details YSOD is shown to local visitors.</span></span>

<span data-ttu-id="0f5c4-184">Pokud neurčíte jinak, ASP.NET funguje jako v případě, že jste nastavili atribut Mode na `RemoteOnly` hodnotu a nezadali jste `defaultRedirect` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-184">Unless you specify otherwise, ASP.NET acts as if you had set the mode attribute to `RemoteOnly` and had not specified a `defaultRedirect` value.</span></span> <span data-ttu-id="0f5c4-185">Jinými slovy, výchozím chováním je, že podrobnosti o výjimce YSOD se zobrazují místním návštěvníkům, zatímco Běhová chyba YSOD se zobrazuje vzdáleným návštěvníkům.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-185">In other words, the default behavior is that the Exception Details YSOD is displayed to local visitors while the Runtime Error YSOD is shown to remote visitors.</span></span> <span data-ttu-id="0f5c4-186">Toto výchozí chování můžete přepsat přidáním `<customErrors>` oddílu do webové aplikace.`Web.config file.`</span><span class="sxs-lookup"><span data-stu-id="0f5c4-186">You can override this default behavior by adding a `<customErrors>` section to your web application's `Web.config file.`</span></span>

## <a name="using-a-custom-error-page"></a><span data-ttu-id="0f5c4-187">Použití vlastní chybové stránky</span><span class="sxs-lookup"><span data-stu-id="0f5c4-187">Using a Custom Error Page</span></span>

<span data-ttu-id="0f5c4-188">Každá webová aplikace by měla mít vlastní chybovou stránku.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-188">Every web application should have a custom error page.</span></span> <span data-ttu-id="0f5c4-189">Nabízí pokročilejší alternativu k chybě za běhu YSOD, je snadné vytvořit a nakonfigurovat aplikaci, aby používala vlastní chybovou stránku, trvá jenom několik minut.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-189">It provides a more professional-looking alternative to the Runtime Error YSOD, it is easy to create, and configuring the application to use the custom error page takes only a few moments.</span></span> <span data-ttu-id="0f5c4-190">Prvním krokem je vytvoření vlastní chybové stránky.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-190">The first step is creating the custom error page.</span></span> <span data-ttu-id="0f5c4-191">Přidal (a) jsem novou složku do aplikace recenze `ErrorPages` a přidala do ní novou ASP.NET stránku s názvem `Oops.aspx` .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-191">I've added a new folder to the Book Reviews application named `ErrorPages` and added to that a new ASP.NET page named `Oops.aspx`.</span></span> <span data-ttu-id="0f5c4-192">Nechte stránku používat stejnou stránku předlohy jako zbytek stránek na webu tak, aby automaticky dědila stejný vzhled a chování.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-192">Have the page use the same master page as the rest of the pages on your site so that it automatically inherits the same look and feel.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image11.png)](displaying-a-custom-error-page-cs/_static/image10.png)

<span data-ttu-id="0f5c4-193">**Obrázek 4**: Vytvoření vlastní chybové stránky</span><span class="sxs-lookup"><span data-stu-id="0f5c4-193">**Figure 4**: Create a Custom Error Page</span></span>

<span data-ttu-id="0f5c4-194">Dále Věnujte několik minut vytváření obsahu pro chybovou stránku.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-194">Next, spend a few minutes creating the content for the error page.</span></span> <span data-ttu-id="0f5c4-195">Vytvořili jsem jednoduchou vlastní chybovou stránku se zprávou oznamující, že došlo k neočekávané chybě a odkaz zpátky na domovskou stránku webu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-195">I've created a rather simple custom error page with a message indicating that there was an unexpected error and a link back to the site's homepage.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image13.png)](displaying-a-custom-error-page-cs/_static/image12.png)

<span data-ttu-id="0f5c4-196">**Obrázek 5**: návrh vlastní chybové stránky</span><span class="sxs-lookup"><span data-stu-id="0f5c4-196">**Figure 5**: Design Your Custom Error Page</span></span>  
 <span data-ttu-id="0f5c4-197">([Kliknutím zobrazíte obrázek v plné velikosti.](displaying-a-custom-error-page-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="0f5c4-197">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image14.png))</span></span>

<span data-ttu-id="0f5c4-198">Po dokončení chybové stránky nakonfigurujte webovou aplikaci tak, aby používala vlastní chybovou stránku místo chyby modulu runtime YSOD.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-198">With the error page completed, configure the web application to use the custom error page in lieu of the Runtime Error YSOD.</span></span> <span data-ttu-id="0f5c4-199">To lze provést zadáním adresy URL chybové stránky v `<customErrors>` `defaultRedirect` atributu oddílu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-199">This is accomplished by specifying the URL of the error page in the `<customErrors>` section's `defaultRedirect` attribute.</span></span> <span data-ttu-id="0f5c4-200">Do souboru aplikace přidejte následující kód `Web.config` :</span><span class="sxs-lookup"><span data-stu-id="0f5c4-200">Add the following markup to your application's `Web.config` file:</span></span>

[!code-xml[Main](displaying-a-custom-error-page-cs/samples/sample1.xml)]

<span data-ttu-id="0f5c4-201">Výše uvedený kód nakonfiguruje aplikaci tak, aby zobrazovala podrobnosti o výjimce YSOD uživatelům, kteří se lokálně navštěvují, a při použití vlastní chybové stránky se na vzdálené návštěvě těchto uživatelů bohužel nezobrazuje. aspx.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-201">The above markup configures the application to show the Exception Details YSOD to users visiting locally, while using the custom error page Oops.aspx for those users visiting remotely.</span></span> <span data-ttu-id="0f5c4-202">Pokud to chcete vidět v akci, nasaďte svůj web do provozního prostředí a pak na živém webu navštivte stránku Žánr. aspx s neplatnou hodnotou QueryString.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-202">To see this in action, deploy your website to the production environment and then visit the Genre.aspx page on the live site with an invalid querystring value.</span></span> <span data-ttu-id="0f5c4-203">Měla by se zobrazit vlastní chybová stránka (odkaz zpět na **Obrázek 3**).</span><span class="sxs-lookup"><span data-stu-id="0f5c4-203">You should see the custom error page (refer back to **Figure 3**).</span></span>

<span data-ttu-id="0f5c4-204">Chcete-li ověřit, zda se vlastní chybová stránka zobrazuje pouze vzdáleným uživatelům, navštivte `Genre.aspx` stránku s neplatným řetězcem dotazu z vývojového prostředí.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-204">To verify that the custom error page is only shown to remote users, visit the `Genre.aspx` page with an invalid querystring from the development environment.</span></span> <span data-ttu-id="0f5c4-205">Stále byste měli vidět podrobnosti o výjimce YSOD (zpět na **Obrázek 1**).</span><span class="sxs-lookup"><span data-stu-id="0f5c4-205">You should still see the Exception Details YSOD (refer back to **Figure 1**).</span></span> <span data-ttu-id="0f5c4-206">`RemoteOnly`Nastavení zajišťuje, že uživatelé, kteří navštíví web v produkčním prostředí, uvidí vlastní chybovou stránku, zatímco vývojáři pracují místně i nadále, aby viděli podrobnosti o výjimce.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-206">The `RemoteOnly` setting ensures that users visiting the site on the production environment see the custom error page while developers working locally continue to see the details of the exception.</span></span>

## <a name="notifying-developers-and-logging-error-details"></a><span data-ttu-id="0f5c4-207">Oznamování vývojářů a protokolování podrobností o chybách</span><span class="sxs-lookup"><span data-stu-id="0f5c4-207">Notifying Developers and Logging Error Details</span></span>

<span data-ttu-id="0f5c4-208">Chyby, ke kterým došlo ve vývojovém prostředí, byly způsobeny vývojářem v jeho počítači.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-208">Errors that occur in the development environment were caused by the developer sitting at her computer.</span></span> <span data-ttu-id="0f5c4-209">Zobrazuje informace o výjimce v YSOD Details výjimky a ví, jaké kroky prováděly při výskytu chyby.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-209">She is shown the exception's information in the Exception Details YSOD, and she knows what steps she was performing when the error occurred.</span></span> <span data-ttu-id="0f5c4-210">Pokud ale dojde k chybě v produkčním prostředí, vývojář nemá žádné informace o tom, že došlo k chybě, pokud koncový uživatel, který navštívil web, nezíská čas k nahlášení chyby.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-210">But when an error occurs on production, the developer has no knowledge that an error occurred unless the end user visiting the site takes the time to report the error.</span></span> <span data-ttu-id="0f5c4-211">A dokonce i v případě, že se uživatel dostane k upozornění vývojového týmu, že došlo k chybě, bez znalosti typu výjimky, zprávy a trasování zásobníku může být obtížné diagnostikovat příčinu chyby, ať už ji opravit.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-211">And even if the user goes out of his way to alert the development team that an error occurred, without knowing the exception type, message, and stack trace it can be difficult to diagnose the cause of the error, let alone fix it.</span></span>

<span data-ttu-id="0f5c4-212">Z těchto důvodů je nejdůležitější, že všechny chyby v produkčním prostředí jsou protokolovány do některého trvalého úložiště (například databáze) a že se vývojářům zobrazí upozornění na tuto chybu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-212">For these reasons it is paramount that any error in the production environment is logged to some persistent store (such as a database) and that the developers are alerted of this error.</span></span> <span data-ttu-id="0f5c4-213">Vlastní chybová stránka může vypadat jako vhodné místo pro toto protokolování a oznámení.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-213">The custom error page may seem like a good place to do this logging and notification.</span></span> <span data-ttu-id="0f5c4-214">Vlastní chybová stránka bohužel nemá přístup k podrobnostem o chybě, a proto ji nelze použít k zaznamenání těchto informací.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-214">Unfortunately, the custom error page does not have access to the error details and therefore cannot be used to log this information.</span></span> <span data-ttu-id="0f5c4-215">Dobrá zpráva je, že existuje několik způsobů, jak zachytit podrobnosti o chybě a přihlásit se k nim, a další tři kurzy si podrobněji Prozkoumejte toto téma.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-215">The good news is that there are a number of ways to intercept the error details and to log them, and the next three tutorials explore this topic in more detail.</span></span>

## <a name="using-different-custom-error-pages-for-different-http-error-statuses"></a><span data-ttu-id="0f5c4-216">Používání různých vlastních chybových stránek pro různé stavy chyb protokolu HTTP</span><span class="sxs-lookup"><span data-stu-id="0f5c4-216">Using Different Custom Error Pages for Different HTTP Error Statuses</span></span>

<span data-ttu-id="0f5c4-217">Pokud je výjimka vyvolána stránkou ASP.NET a není zpracována, výjimka percolates až do běhového prostředí ASP.NET, které zobrazuje konfigurovanou chybovou stránku.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-217">When an exception is thrown by an ASP.NET page and is not handled, the exception percolates up to the ASP.NET runtime, which displays the configured error page.</span></span> <span data-ttu-id="0f5c4-218">Pokud přijde požadavek do modulu ASP.NET, ale nedá se z nějakého důvodu zpracovat, možná se nenašlo požadovaný soubor nebo pro něj jsou zakázaná oprávnění ke čtení, modul ASP.NET vyvolá `HttpException` .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-218">If a request comes into the ASP.NET engine but cannot be processed for some reason - perhaps the requested file is not found or Read permissions have been disabled for the file - then the ASP.NET engine raises an `HttpException`.</span></span> <span data-ttu-id="0f5c4-219">Tato výjimka, jako jsou výjimky vyvolané z ASP.NET stránek, bubliny až do modulu runtime, což způsobí zobrazení příslušné chybové stránky.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-219">This exception, like exceptions raised from ASP.NET pages, bubbles up to the runtime, causing the appropriate error page to be displayed.</span></span>

<span data-ttu-id="0f5c4-220">To znamená, že pokud uživatel požádá o nenalezenou stránku, zobrazí se jim vlastní chybová stránka, která je pro webovou aplikaci v provozu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-220">What this means for the web application in production is that if a user requests a page that is not found then they will see the custom error page.</span></span> <span data-ttu-id="0f5c4-221">**Obrázek 6** znázorňuje příklad.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-221">**Figure 6** shows such an example.</span></span> <span data-ttu-id="0f5c4-222">Vzhledem k tomu, že žádost je určena pro neexistující stránku ( `NoSuchPage.aspx` ), `HttpException` je vyvolána a zobrazí se vlastní chybová stránka (Všimněte si odkazu na `NoSuchPage.aspx` v `aspxerrorpath` parametru QueryString).</span><span class="sxs-lookup"><span data-stu-id="0f5c4-222">Because the request is for a non-existent page (`NoSuchPage.aspx`), an `HttpException` is thrown and the custom error page is displayed (note the reference to `NoSuchPage.aspx` in the `aspxerrorpath` querystring parameter).</span></span>

[![](displaying-a-custom-error-page-cs/_static/image16.png)](displaying-a-custom-error-page-cs/_static/image15.png)

<span data-ttu-id="0f5c4-223">**Obrázek 6**: modul runtime ASP.NET zobrazí nakonfigurovanou chybovou stránku v reakci na neplatnou žádost ([kliknutím zobrazíte obrázek v plné velikosti).](displaying-a-custom-error-page-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="0f5c4-223">**Figure 6**: The ASP.NET Runtime Displays the Configured Error Page In Response to an Invalid Request ([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image17.png))</span></span>

<span data-ttu-id="0f5c4-224">Ve výchozím nastavení všechny typy chyb způsobují zobrazení stejné vlastní chybové stránky.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-224">By default, all types of errors cause the same custom error page to be displayed.</span></span> <span data-ttu-id="0f5c4-225">Můžete však zadat jinou vlastní chybovou stránku pro určitý stavový kód HTTP pomocí `<error>` podřízených elementů v `<customErrors>` oddílu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-225">However, you can specify a different custom error page for a specific HTTP status code using `<error>` children elements within the `<customErrors>` section.</span></span> <span data-ttu-id="0f5c4-226">Například pokud chcete, aby se v případě chyby stránky, která nebyla nalezena, zobrazila jiná chybová stránka, která má stavový kód HTTP 404, aktualizujte `<customErrors>` oddíl tak, aby obsahoval následující kód:</span><span class="sxs-lookup"><span data-stu-id="0f5c4-226">For example, to have a different error page displayed in the event of a page not found error, which has an HTTP status code of 404, update the `<customErrors>` section to include the following markup:</span></span>

[!code-xml[Main](displaying-a-custom-error-page-cs/samples/sample2.xml)]

<span data-ttu-id="0f5c4-227">Pokud se tato změna provádí, kdykoli uživatel, který se vzdáleně navštíví, vyžádá prostředek ASP.NET, který neexistuje, bude přesměrován na `404.aspx` vlastní chybovou stránku, nikoli na `Oops.aspx` .</span><span class="sxs-lookup"><span data-stu-id="0f5c4-227">With this change in place, whenever a user visiting remotely requests an ASP.NET resource that does not exist, they will be redirected to the `404.aspx` custom error page instead of `Oops.aspx`.</span></span> <span data-ttu-id="0f5c4-228">Jak ukazuje **Obrázek 7** , `404.aspx` Stránka může obsahovat konkrétnější zprávu, než je obecná vlastní chybová stránka.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-228">As **Figure 7** illustrates, the `404.aspx` page can include a more specific message than the general custom error page.</span></span>

> [!NOTE]
> <span data-ttu-id="0f5c4-229">Další informace najdete na [stránce s chybovými stránkami 404, kde najdete](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/) pokyny k vytváření efektivních chybových stránek 404.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-229">Check out [404 Error Pages, One More Time](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/) for guidance on creating effective 404 error pages.</span></span>

[![](displaying-a-custom-error-page-cs/_static/image19.png)](displaying-a-custom-error-page-cs/_static/image18.png)

<span data-ttu-id="0f5c4-230">**Obrázek 7**: vlastní chybová stránka 404 zobrazuje více cílené zprávy, než`Oops.aspx`</span><span class="sxs-lookup"><span data-stu-id="0f5c4-230">**Figure 7**: The Custom 404 Error Page Displays a More Targeted Message Than `Oops.aspx`</span></span>  
<span data-ttu-id="0f5c4-231">([Kliknutím zobrazíte obrázek v plné velikosti.](displaying-a-custom-error-page-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="0f5c4-231">([Click to view full-size image](displaying-a-custom-error-page-cs/_static/image20.png))</span></span> 

<span data-ttu-id="0f5c4-232">Vzhledem k tomu, že víte, že `404.aspx` stránka je k dispozici pouze v případě, že uživatel provede požadavek na stránku, která nebyla nalezena, můžete tuto vlastní chybovou stránku rozšířit, aby zahrnovala funkce, aby uživatel mohl vyřešit tento konkrétní typ chyby.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-232">Because you know that the `404.aspx` page is only reached when the user makes a request for a page that was not found, you can enhance this custom error page to include functionality to help the user address this specific type of error.</span></span> <span data-ttu-id="0f5c4-233">Můžete například sestavit databázovou tabulku, která mapuje známé chybné adresy URL na dobré adresy URL a pak má `404.aspx` vlastní chybovou stránku spustit dotaz proti této tabulce a stránky navrhnout, se kterým se uživatel může pokusit spojit.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-233">For example, you could build a database table that maps known bad URLs to good URLs, and then have the `404.aspx` custom error page run a query against that table and suggest pages the user may be trying to reach.</span></span>

> [!NOTE]
> <span data-ttu-id="0f5c4-234">Vlastní chybová stránka se zobrazí pouze v případě, že je proveden požadavek na prostředek zpracovávaný modulem ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-234">The custom error page is only displayed when a request is made to a resource handled by the ASP.NET engine.</span></span> <span data-ttu-id="0f5c4-235">Jak jsme probrali v [základních rozdílech mezi službou IIS a vývojovým serverem ASP.NET](core-differences-between-iis-and-the-asp-net-development-server-cs.md) , může webový server zpracovávat určité požadavky samostatně.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-235">As we discussed in the [Core Differences Between IIS and the ASP.NET Development Server](core-differences-between-iis-and-the-asp-net-development-server-cs.md) tutorial, the web server may handle certain requests itself.</span></span> <span data-ttu-id="0f5c4-236">Webový server služby IIS ve výchozím nastavení zpracovává požadavky na statický obsah, jako jsou obrázky a soubory HTML bez vyvolání modulu ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-236">By default, the IIS web server processes requests for static content like images and HTML files without invoking the ASP.NET engine.</span></span> <span data-ttu-id="0f5c4-237">V důsledku toho, pokud si uživatel požádá o neexistující soubor bitové kopie, vrátí zpět výchozí 404 chybovou zprávu služby IIS, a ne ASP. Chybná stránka konfigurace sítě</span><span class="sxs-lookup"><span data-stu-id="0f5c4-237">Consequently, if the user requests a non-existent image file they will get back IIS's default 404 error message rather than ASP.NET's configured error page.</span></span>

## <a name="summary"></a><span data-ttu-id="0f5c4-238">Shrnutí</span><span class="sxs-lookup"><span data-stu-id="0f5c4-238">Summary</span></span>

<span data-ttu-id="0f5c4-239">Pokud dojde k neošetřené výjimce v aplikaci ASP.NET, zobrazí se na uživateli jedna ze tří chybových stránek: informace o výjimce žlutá obrazovka smrti; Chyba za běhu žlutá obrazovka smrti; nebo vlastní chybovou stránku.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-239">When an unhandled exception occurs in an ASP.NET application, the user is shown one of three error pages: the Exception Details Yellow Screen of Death; the Runtime Error Yellow Screen of Death; or a custom error page.</span></span> <span data-ttu-id="0f5c4-240">Která chybová stránka se zobrazí v závislosti na konfiguraci aplikace `<customErrors>` a na tom, jestli se uživatel místně nebo vzdáleně navštíví.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-240">Which error page is displayed depends on the application's `<customErrors>` configuration and whether the user is visiting locally or remotely.</span></span> <span data-ttu-id="0f5c4-241">Výchozím chováním je zobrazit podrobnosti o výjimce YSOD místním návštěvníkům a běhové chybě YSOD pro vzdálené návštěvníky.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-241">The default behavior is to show the Exception Details YSOD to local visitors and the Runtime Error YSOD to remote visitors.</span></span>

<span data-ttu-id="0f5c4-242">I když Běhová chyba YSOD skrývá potenciálně citlivé informace o chybách uživatele, který navštívil web, přeruší se vzhled a chování vaší lokality a aplikace bude ladit.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-242">While the Runtime Error YSOD hides potentially sensitive error information from the user visiting the site, it breaks from your site's look and feel and makes your application look buggy.</span></span> <span data-ttu-id="0f5c4-243">Lepším řešením je použití vlastní chybové stránky, která zahrnuje vytvoření a návrh vlastní chybové stránky a určení její adresy URL v `<customErrors>` `defaultRedirect` atributu oddílu.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-243">A better approach is to use a custom error page, which entails creating and designing the custom error page and specifying its URL in the `<customErrors>` section's `defaultRedirect` attribute.</span></span> <span data-ttu-id="0f5c4-244">Můžete mít i několik vlastních chybových stránek pro různé stavy chyb protokolu HTTP.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-244">You can even have multiple custom error pages for different HTTP error statuses.</span></span>

<span data-ttu-id="0f5c4-245">Vlastní chybová stránka je prvním krokem v komplexní strategii zpracování chyb pro web v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-245">The custom error page is the first step in a comprehensive error handling strategy for a website in production.</span></span> <span data-ttu-id="0f5c4-246">Důležité kroky jsou také upozorňující vývojáře na chybu a protokolování jeho podrobností.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-246">Alerting the developer of the error and logging its details are also important steps.</span></span> <span data-ttu-id="0f5c4-247">V následujících třech kurzech se seznámíte s postupy pro oznamování chyb a protokolování.</span><span class="sxs-lookup"><span data-stu-id="0f5c4-247">The next three tutorials explore techniques for error notification and logging.</span></span>

<span data-ttu-id="0f5c4-248">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="0f5c4-248">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="0f5c4-249">Další materiály</span><span class="sxs-lookup"><span data-stu-id="0f5c4-249">Further Reading</span></span>

<span data-ttu-id="0f5c4-250">Další informace o tématech popsaných v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="0f5c4-250">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="0f5c4-251">Chybové stránky, ještě jeden další čas</span><span class="sxs-lookup"><span data-stu-id="0f5c4-251">Error Pages, One More Time</span></span>](http://www.smashingmagazine.com/2009/01/29/404-error-pages-one-more-time/)
- [<span data-ttu-id="0f5c4-252">Pokyny k návrhu pro výjimky</span><span class="sxs-lookup"><span data-stu-id="0f5c4-252">Design Guidelines for Exceptions</span></span>](https://msdn.microsoft.com/library/ms229014.aspx)
- [<span data-ttu-id="0f5c4-253">Uživatelsky přívětivé chybové stránky</span><span class="sxs-lookup"><span data-stu-id="0f5c4-253">User-Friendly Error Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/090606-1.aspx)
- [<span data-ttu-id="0f5c4-254">Zpracování a vyvolávání výjimek</span><span class="sxs-lookup"><span data-stu-id="0f5c4-254">Handling and Throwing Exceptions</span></span>](https://msdn.microsoft.com/library/5b2yeyab.aspx)
- [<span data-ttu-id="0f5c4-255">Správné používání vlastní chybové stránky v ASP.NET</span><span class="sxs-lookup"><span data-stu-id="0f5c4-255">Properly Using Custom Error Pages in ASP.NET</span></span>](http://professionalaspnet.com/archive/2007/09/30/Properly-Using-Custom-Error-Pages-in-ASP.NET.aspx)
- <span data-ttu-id="0f5c4-256">[Přehled trasování ASP.NET](/previous-versions/aspnet/bb386420(v%3Dvs.100))</span><span class="sxs-lookup"><span data-stu-id="0f5c4-256">[ASP.NET Tracing Overview](/previous-versions/aspnet/bb386420(v%3Dvs.100))</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="0f5c4-257">[Předchozí](strategies-for-database-development-and-deployment-cs.md) 
>  [Další](processing-unhandled-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="0f5c4-257">[Previous](strategies-for-database-development-and-deployment-cs.md)
[Next](processing-unhandled-exceptions-cs.md)</span></span>
