---
uid: web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
title: Vnořené stránky předlohy (C#) | Microsoft Docs
author: rick-anderson
description: Ukazuje, jak vnořit jednu hlavní stránku do jiné.
ms.author: riande
ms.date: 07/28/2008
ms.assetid: 32b7fb6e-d74b-4048-91f8-70631b2523ee
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 67093266567a97cd22b353115616484fd9ef155e
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/28/2019
ms.locfileid: "74596442"
---
# <a name="nested-master-pages-c"></a><span data-ttu-id="0d428-103">Vložené hlavní stránky (C#)</span><span class="sxs-lookup"><span data-stu-id="0d428-103">Nested Master Pages (C#)</span></span>

<span data-ttu-id="0d428-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="0d428-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="0d428-105">[Stažení kódu](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) nebo [stažení PDF](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="0d428-105">[Download Code](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) or [Download PDF](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span></span>

> <span data-ttu-id="0d428-106">Ukazuje, jak vnořit jednu hlavní stránku do jiné.</span><span class="sxs-lookup"><span data-stu-id="0d428-106">Shows how to nest one master page within another.</span></span>

## <a name="introduction"></a><span data-ttu-id="0d428-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="0d428-107">Introduction</span></span>

<span data-ttu-id="0d428-108">V průběhu posledních devět kurzů jsme viděli, jak implementovat rozložení pro celé pracoviště pomocí stránek předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-108">Over the course of the past nine tutorials we have seen how to implement a site-wide layout with master pages.</span></span> <span data-ttu-id="0d428-109">Ve kostce stránky předlohy nám umožňují vývojářům stránek definovat společné značky na stránce předlohy spolu s konkrétními oblastmi, které je možné přizpůsobit na základě stránky obsahu stránky po obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-109">In a nutshell, master pages allow us, the page developer, to define common markup in the master page along with specific regions that can be customized on a content page-by-content page basis.</span></span> <span data-ttu-id="0d428-110">Ovládací prvky ContentPlaceHolder na stránce předlohy označují přizpůsobitelné oblasti. přizpůsobené značky pro ovládací prvky ContentPlaceHolder jsou definovány na stránce obsahu prostřednictvím ovládacích prvků obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-110">The ContentPlaceHolder controls in a master page indicate the customizable regions; the customized markup for the ContentPlaceHolder controls are defined in the content page via Content controls.</span></span>

<span data-ttu-id="0d428-111">Techniky hlavní stránky, které jsme prozkoumali, jsou proto Skvělé, pokud máte v celé lokalitě použito jedno rozložení.</span><span class="sxs-lookup"><span data-stu-id="0d428-111">The master page techniques we've explored thus far are great if you have a single layout used across the entire site.</span></span> <span data-ttu-id="0d428-112">Mnoho velkých webů ale má rozložení lokality, které je přizpůsobené v různých oddílech.</span><span class="sxs-lookup"><span data-stu-id="0d428-112">However, many large websites have a site layout that is customized across various sections.</span></span> <span data-ttu-id="0d428-113">Představte si například aplikaci zdravotní péče, kterou používá ústavní pracovníci, ke správě informací o pacientech, aktivit a fakturaci.</span><span class="sxs-lookup"><span data-stu-id="0d428-113">For example, consider a health care application used by hospital staff to manage patient information, activities, and billing.</span></span> <span data-ttu-id="0d428-114">V této aplikaci můžou být tři typy webových stránek:</span><span class="sxs-lookup"><span data-stu-id="0d428-114">There may be three types of web pages in this application:</span></span>

- <span data-ttu-id="0d428-115">Personální stránky pro konkrétní členy, kde zaměstnanci můžou aktualizovat dostupnost, zobrazit plány nebo si vyžádat dobu trvání dovolené.</span><span class="sxs-lookup"><span data-stu-id="0d428-115">Staff member-specific pages where staff members can update availability, view schedules, or request vacation time.</span></span>
- <span data-ttu-id="0d428-116">Stránky specifické pro pacienty, kde pedagogické členové zobrazují nebo upravují informace pro konkrétního pacienta.</span><span class="sxs-lookup"><span data-stu-id="0d428-116">Patient-specific pages where staff members view or edit information for a specific patient.</span></span>
- <span data-ttu-id="0d428-117">Stránky specifické pro fakturaci, kde účetníci kontrolují aktuální stavy deklarací identity a finanční sestavy.</span><span class="sxs-lookup"><span data-stu-id="0d428-117">Billing-specific pages where accountants review current claim statuses and financial reports.</span></span>

<span data-ttu-id="0d428-118">Každá stránka může sdílet společné rozložení, jako je například nabídka v horní části, a řada často používaných odkazů podél dolního okraje.</span><span class="sxs-lookup"><span data-stu-id="0d428-118">Every page might share a common layout, such as a menu across the top and a series of frequently used links along the bottom.</span></span> <span data-ttu-id="0d428-119">Ale stránky pro zaměstnance, pacienty a fakturaci budou muset přizpůsobit toto obecné rozložení.</span><span class="sxs-lookup"><span data-stu-id="0d428-119">But the staff-, patient-, and billing-specific pages may need to customize this generic layout.</span></span> <span data-ttu-id="0d428-120">Například všechny stránky specifické pro zaměstnance by měly obsahovat kalendář a seznam úkolů, které zobrazují aktuálně přihlášený účet dostupnosti a denní plán.</span><span class="sxs-lookup"><span data-stu-id="0d428-120">For example, perhaps all staff-specific pages should include a calendar and task list showing the currently logged on user's availability and daily schedule.</span></span> <span data-ttu-id="0d428-121">Některé stránky specifické pro pacient musí zobrazovat jméno, adresu a informace o pojištění pro pacienta, jejichž informace se upravují.</span><span class="sxs-lookup"><span data-stu-id="0d428-121">Perhaps all patient-specific pages need to show the name, address, and insurance information for the patient whose information is being edited.</span></span>

<span data-ttu-id="0d428-122">Taková přizpůsobená rozložení je možné vytvořit pomocí *vnořených stránek předlohy*.</span><span class="sxs-lookup"><span data-stu-id="0d428-122">It's possible to create such customized layouts by using *nested master pages*.</span></span> <span data-ttu-id="0d428-123">K implementaci výše uvedeného scénáře doporučujeme začít vytvořením hlavní stránky, která definovala rozložení v rámci lokality, obsah nabídky a zápatí s prvky ContentPlaceHolders definující přizpůsobitelné oblasti.</span><span class="sxs-lookup"><span data-stu-id="0d428-123">To implement the above scenario, we would start by creating a master page that defined the site-wide layout, the menu and footer content, with ContentPlaceHolders defining the customizable regions.</span></span> <span data-ttu-id="0d428-124">Vytvoříme tři vnořené stránky předlohy, jednu pro každý typ webové stránky.</span><span class="sxs-lookup"><span data-stu-id="0d428-124">We would then create three nested master pages, one for each type of web page.</span></span> <span data-ttu-id="0d428-125">Každá vnořená hlavní stránka by definovala obsah mezi typem stránek obsahu, které používají stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-125">Each nested master page would define the content among the type of content pages that use the master page.</span></span> <span data-ttu-id="0d428-126">Jinými slovy vnořená hlavní stránka pro stránky obsahu specifické pro pacienty by obsahovala značky a programovou logiku pro zobrazení informací o upravovaném pacienta.</span><span class="sxs-lookup"><span data-stu-id="0d428-126">In other words, the nested master page for patient-specific content pages would include markup and programmatic logic for displaying information about the patient being edited.</span></span> <span data-ttu-id="0d428-127">Když vytváříte novou stránku specifickou pro pacienty, navážeme ji na tuto vnořenou stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-127">When creating a new patient-specific page we would bind it to this nested master page.</span></span>

<span data-ttu-id="0d428-128">Tento kurz se spustí zvýrazněním výhod vnořených stránek předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-128">This tutorial starts by highlighting the benefits of nested master pages.</span></span> <span data-ttu-id="0d428-129">Pak ukazuje, jak vytvořit a používat vnořené stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-129">It then shows how to create and use nested master pages.</span></span>

> [!NOTE]
> <span data-ttu-id="0d428-130">Vnořené stránky předlohy byly možné od verze 2,0 .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="0d428-130">Nested master pages have been possible since version 2.0 of the .NET Framework.</span></span> <span data-ttu-id="0d428-131">Visual Studio 2005 ale nezahrnuje podporu pro vnořené stránky předloh v době návrhu.</span><span class="sxs-lookup"><span data-stu-id="0d428-131">However, Visual Studio 2005 did not include design-time support for nested master pages.</span></span> <span data-ttu-id="0d428-132">Dobrá zpráva je, že Visual Studio 2008 nabízí bohatě funkční prostředí pro vnořené stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-132">The good news is that Visual Studio 2008 offers a rich design-time experience for nested master pages.</span></span> <span data-ttu-id="0d428-133">Pokud vás zajímá použití vnořených stránek předlohy, ale stále používáte Visual Studio 2005, podívejte se na záznam blogu [Scott Guthrie](https://weblogs.asp.net/scottgu/), [tipy pro vnořené stránky předlohy v době návrhu vs 2005](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span><span class="sxs-lookup"><span data-stu-id="0d428-133">If you are interested in using nested master pages but are still using Visual Studio 2005, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog entry, [Tips for Nested Master Pages in VS 2005 Design-Time](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span></span>

## <a name="the-benefits-of-nested-master-pages"></a><span data-ttu-id="0d428-134">Výhody vnořených stránek předlohy</span><span class="sxs-lookup"><span data-stu-id="0d428-134">The Benefits of Nested Master Pages</span></span>

<span data-ttu-id="0d428-135">Mnoho webů má předaný návrh lokality a také přizpůsobené návrhy, které jsou specifické pro určité typy stránek.</span><span class="sxs-lookup"><span data-stu-id="0d428-135">Many websites have an overarching site design as well as more customized designs specific to certain types of pages.</span></span> <span data-ttu-id="0d428-136">Například v naší ukázkové webové aplikaci jsme vytvořili oddíl základní Administration (stránky ve složce `~/Admin`).</span><span class="sxs-lookup"><span data-stu-id="0d428-136">For instance, in our demo web application we have created a rudimentary Administration section (the pages in the `~/Admin` folder).</span></span> <span data-ttu-id="0d428-137">V současné době webové stránky ve složce `~/Admin` používají stejnou stránku předlohy jako tyto stránky, které nejsou v oddílu Správa (konkrétně `Site.master` nebo `Alternate.master`v závislosti na výběru uživatele).</span><span class="sxs-lookup"><span data-stu-id="0d428-137">Currently the web pages in the `~/Admin` folder use the same master page as those pages not in the administration section (namely, `Site.master` or `Alternate.master`, depending on the user's selection).</span></span>

> [!NOTE]
> <span data-ttu-id="0d428-138">Prozatím předstírat, že náš web má jenom jednu stránku předlohy, `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-138">For now, pretend that our site has just one master page, `Site.master`.</span></span> <span data-ttu-id="0d428-139">Budeme řešit použití vnořených stránek předlohy se dvěma (nebo více) stránkami předlohy počínaje "používáním vnořené stránky předlohy pro část pro správu" dále v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="0d428-139">We'll address using nested master pages with two (or more) master pages starting with "Using a Nested Master Page for the Administration Section" later in this tutorial.</span></span>

<span data-ttu-id="0d428-140">Představte si, že jsme byli požádáni o přizpůsobení rozložení stránek pro správu, aby obsahovalo Další informace nebo odkazy, které by jinak nebyly na jiných stránkách v lokalitě.</span><span class="sxs-lookup"><span data-stu-id="0d428-140">Imagine that we were asked to customize the layout of the Administration pages to include additional information or links that would not otherwise be present in other pages in the site.</span></span> <span data-ttu-id="0d428-141">Tento požadavek můžete implementovat čtyřmi způsoby:</span><span class="sxs-lookup"><span data-stu-id="0d428-141">There are four techniques to implement this requirement:</span></span>

1. <span data-ttu-id="0d428-142">Ručně přidejte informace specifické pro správu a odkazy na všechny stránky obsahu ve složce `~/Admin`.</span><span class="sxs-lookup"><span data-stu-id="0d428-142">Manually add the Administration-specific information and links to every content page in the `~/Admin` folder.</span></span>
2. <span data-ttu-id="0d428-143">Aktualizujte stránku předlohy `Site.master` tak, aby obsahovala informace specifické pro oddíl Správa a odkazy, a potom přidejte kód na stránku předlohy, kde tyto oddíly zobrazíte nebo skryjete na základě toho, jestli se jedna ze stránek pro správu právě navštíví.</span><span class="sxs-lookup"><span data-stu-id="0d428-143">Update the `Site.master` master page to include the Administration section-specific information and links, and then add code to the master page to show or hide these sections based on whether one of the Administration pages is being visited.</span></span>
3. <span data-ttu-id="0d428-144">Vytvořte novou stránku předlohy specifickou pro oddíl Správa a zkopírujte z `Site.master`značky, přidejte informace a odkazy specifické pro oddíl Správa a pak aktualizujte stránky obsahu ve `~/Admin` složce tak, aby používala tuto novou stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-144">Create a new master page specifically for the Administration section, copy over the markup from `Site.master`, add the Administration section-specific information and links, and then update the content pages in the `~/Admin` folder to use this new master page.</span></span>
4. <span data-ttu-id="0d428-145">Vytvořte vnořenou stránku předlohy, která se váže na `Site.master` a zda stránky obsahu ve `~/Admin` složce používají tuto novou vnořenou stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-145">Create a nested master page that binds to `Site.master` and have the content pages in the `~/Admin` folder use this new nested master page.</span></span> <span data-ttu-id="0d428-146">Tato vnořená hlavní stránka by obsahovala jenom další informace a odkazy, které jsou specifické pro stránky pro správu, a nemusí opakovat označení, které už je definované v `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-146">This nested master page would include just the additional information and links specific to the Administration pages and would not need to repeat the markup already defined in `Site.master`.</span></span>

<span data-ttu-id="0d428-147">První možnost je nejméně palatable.</span><span class="sxs-lookup"><span data-stu-id="0d428-147">The first option is the least palatable.</span></span> <span data-ttu-id="0d428-148">Celým bodem stránek předlohy je opuštění a ruční kopírování a vkládání běžných značek na nové stránky ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="0d428-148">The whole point of using master pages is to move away from having to manually copy and paste common markup to new ASP.NET pages.</span></span> <span data-ttu-id="0d428-149">Druhá možnost je přijatelná, ale aplikace je méně udržovatelná, protože hromadně udržuje hlavní stránky se značkami, které se zobrazují pouze občas, a vyžaduje, aby vývojáři, kteří upravují stránku předlohy, mohli tento kód obejít a museli si pamatovat, když, v případě, že je skrytá, zobrazí se přesně určité značky.</span><span class="sxs-lookup"><span data-stu-id="0d428-149">The second option is acceptable, but makes the application less maintainable as it bulks up the master pages with markup that is only occasionally displayed and requires developers editing the master page to work around this markup and to have to remember when, exactly, certain markup is displayed versus when it is hidden.</span></span> <span data-ttu-id="0d428-150">Tento přístup by byl méně Tenable jako přizpůsobení z více a více typů webových stránek, které je nutné přizpůsobit na této jediné stránce předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-150">This approach would be less tenable as customizations from more and more types of web pages needed to be accommodated by this single master page.</span></span>

<span data-ttu-id="0d428-151">Třetí možnost odstraní zbytečné a složitosti problémy, které jsou Surface druhé možnosti.</span><span class="sxs-lookup"><span data-stu-id="0d428-151">The third option removes the clutter and complexity issues the surfaced with the second option.</span></span> <span data-ttu-id="0d428-152">Možnost tři hlavní nevýhoda však znamená, že pro nás vyžaduje zkopírování a vložení společného rozložení z `Site.master` do nové hlavní stránky pro správu, která je specifická pro oddíl.</span><span class="sxs-lookup"><span data-stu-id="0d428-152">However, option three's main drawback is that it requires us to copy and paste the common layout from `Site.master` to the new Administration section-specific master page.</span></span> <span data-ttu-id="0d428-153">Pokud se později rozhodnete změnit rozložení v rámci lokality, je nutné si pamatovat na jeho změnu na dvou místech.</span><span class="sxs-lookup"><span data-stu-id="0d428-153">If we later decide to change the site-wide layout we have to remember to change it in two places.</span></span>

<span data-ttu-id="0d428-154">Čtvrtá možnost vnořené stránky předlohy vám poskytne nejlepší z druhé a třetí možnosti.</span><span class="sxs-lookup"><span data-stu-id="0d428-154">The fourth option, nested master pages, give us the best of the second and third options.</span></span> <span data-ttu-id="0d428-155">Informace o rozložení v rámci lokality jsou uchovávány v jednom souboru – hlavní stránka nejvyšší úrovně – zatímco obsah specifický pro konkrétní oblasti je rozdělen do různých souborů.</span><span class="sxs-lookup"><span data-stu-id="0d428-155">The site-wide layout information is maintained in one file - the top-level master page - while the content specific to particular regions is separated out into different files.</span></span>

<span data-ttu-id="0d428-156">Tento kurz začíná zobrazením vytváření a používání jednoduché vnořené stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-156">This tutorial starts with a look at creating and using a simple nested master page.</span></span> <span data-ttu-id="0d428-157">Vytvoříme značku nové hlavní stránky nejvyšší úrovně, dvě vnořené stránky předlohy a dvě stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-157">We create a brand new top-level master page, two nested master pages, and two content pages.</span></span> <span data-ttu-id="0d428-158">Počínaje "používáním vnořené stránky předlohy pro část pro správu" se podíváme na aktualizaci stávající architektury hlavní stránky, aby zahrnovala použití vnořených stránek předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-158">Starting with "Using a Nested Master Page for the Administration Section," we look at updating our existing master page architecture to include the use of nested master pages.</span></span> <span data-ttu-id="0d428-159">Konkrétně vytvoříme vnořenou hlavní stránku a použijeme ji k zahrnutí dalšího vlastního obsahu pro stránky obsahu do složky `~/Admin`.</span><span class="sxs-lookup"><span data-stu-id="0d428-159">Specifically, we create a nested master page and use it to include additional custom content for the content pages in the `~/Admin` folder.</span></span>

## <a name="step-1-creating-a-simple-top-level-master-page"></a><span data-ttu-id="0d428-160">Krok 1: Vytvoření jednoduché hlavní stránky nejvyšší úrovně</span><span class="sxs-lookup"><span data-stu-id="0d428-160">Step 1: Creating a Simple Top-Level Master Page</span></span>

<span data-ttu-id="0d428-161">Vytvoření vnořené hlavní stránky na základě jedné z existujících stránek předlohy a následná aktualizace stávající stránky obsahu, aby používala tuto novou vnořenou stránku předlohy namísto hlavní stránky nejvyšší úrovně, má za následek určitou složitost, protože stávající stránky obsahu již očekávají určité Ovládací prvky ContentPlaceHolder definované v hlavní stránce nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="0d428-161">Creating a nested master based on one of the existing master pages and then updating an existing content page to use this new nested master page instead of the top-level master page entails some complexity because the existing content pages already expect certain ContentPlaceHolder controls defined in the top-level master page.</span></span> <span data-ttu-id="0d428-162">Proto vnořená hlavní stránka musí obsahovat také stejné ovládací prvky ContentPlaceHolder se stejnými názvy.</span><span class="sxs-lookup"><span data-stu-id="0d428-162">Therefore, the nested master page must also include the same ContentPlaceHolder controls with the same names.</span></span> <span data-ttu-id="0d428-163">Kromě toho má naše konkrétní ukázková aplikace dvě stránky předlohy (`Site.master` a `Alternate.master`), které se dynamicky přiřazují na stránku obsahu založené na uživatelských preferencích, které další přidávají k této složitosti.</span><span class="sxs-lookup"><span data-stu-id="0d428-163">Furthermore, our particular demo application has two master pages (`Site.master` and `Alternate.master`) that are dynamically assigned to a content page based on a user's preferences, which further adds to this complexity.</span></span> <span data-ttu-id="0d428-164">V tomto kurzu se podíváme na aktualizaci existující aplikace, aby používala vnořené stránky předlohy, ale nejprve se zaměříme na jednoduchý vnořený příklad stránek na konci.</span><span class="sxs-lookup"><span data-stu-id="0d428-164">We will look at updating the existing application to use nested master pages later in this tutorial, but let's first focus on a simple nested master pages example.</span></span>

<span data-ttu-id="0d428-165">Vytvořte novou složku s názvem `NestedMasterPages` a přidejte do ní nový soubor hlavní stránky s názvem `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-165">Create a new folder named `NestedMasterPages` and then add a new master page file to that folder named `Simple.master`.</span></span> <span data-ttu-id="0d428-166">(Viz obrázek 1 pro snímek obrazovky Průzkumník řešení po přidání této složky a souboru.) Přetáhněte `AlternateStyles.css` soubor předlohy se styly z Průzkumník řešení na Návrhář.</span><span class="sxs-lookup"><span data-stu-id="0d428-166">(See Figure 1 for a screen shot of the Solution Explorer after this folder and file have been added.) Drag the `AlternateStyles.css` style sheet file from the Solution Explorer onto the Designer.</span></span> <span data-ttu-id="0d428-167">Tím přidáte `<link>` element do souboru šablony stylů v elementu `<head>`, po kterém by značky `<head>` elementu hlavní stránky měly vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="0d428-167">This adds a `<link>` element to the style sheet file in the `<head>` element, after which the master page's `<head>` element's markup should look like:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample1.aspx)]

<span data-ttu-id="0d428-168">Dále do webového formuláře `Simple.master`přidejte následující značky:</span><span class="sxs-lookup"><span data-stu-id="0d428-168">Next, add the following markup within the Web Form of `Simple.master`:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="0d428-169">Tento kód zobrazí odkaz s názvem "vnořené stránky předlohy (jednoduché)" v horní části stránky s velkým bílým písmem na pozadí námořnická modrá.</span><span class="sxs-lookup"><span data-stu-id="0d428-169">This markup displays a link titled "Nested Master Pages (Simple)" at the top of the page in a large white font on a navy background.</span></span> <span data-ttu-id="0d428-170">Níže je `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="0d428-170">Beneath that is the `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="0d428-171">Obrázek 1 ukazuje stránku předlohy `Simple.master`, když je načtena v návrháři aplikace Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0d428-171">Figure 1 shows the `Simple.master` master page when loaded in the Visual Studio Designer.</span></span>

<span data-ttu-id="0d428-172">[![vnořená hlavní stránka definuje obsah specifický pro stránky v oddílu Správa.](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-172">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span></span>

<span data-ttu-id="0d428-173">**Obrázek 01**: vnořená hlavní stránka definuje obsah specifický pro stránky v části Správa ([kliknutím zobrazíte obrázek v plné velikosti).](nested-master-pages-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-173">**Figure 01**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image3.png))</span></span>

## <a name="step-2-creating-a-simple-nested-master-page"></a><span data-ttu-id="0d428-174">Krok 2: Vytvoření jednoduché vnořené stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="0d428-174">Step 2: Creating a Simple Nested Master Page</span></span>

<span data-ttu-id="0d428-175">`Simple.master` obsahuje dva ovládací prvky ContentPlaceHolder: `MainContent` ContentPlaceHolder, které jsme přidali v rámci webového formuláře společně s `head` ContentPlaceHolder v elementu `<head>`.</span><span class="sxs-lookup"><span data-stu-id="0d428-175">`Simple.master` contains two ContentPlaceHolder controls: the `MainContent` ContentPlaceHolder we added within the Web Form along with the `head` ContentPlaceHolder in the `<head>` element.</span></span> <span data-ttu-id="0d428-176">Pokud bychom vytvořili stránku obsahu a navážeme ji na `Simple.master` stránka obsahu by měla dva ovládací prvky obsahu odkazující na tyto dva prvky ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="0d428-176">If we were to create a content page and bind it to `Simple.master` the content page would have two Content controls referencing the two ContentPlaceHolders.</span></span> <span data-ttu-id="0d428-177">Podobně pokud vytvoříme vnořenou hlavní stránku a navážeme ji na `Simple.master` pak bude mít vnořená hlavní stránka dva ovládací prvky obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-177">Similarly, if we create a nested master page and bind it to `Simple.master` then the nested master page will have two Content controls.</span></span>

<span data-ttu-id="0d428-178">Pojďme do složky `NestedMasterPages` s názvem `SimpleNested.master`přidat novou vnořenou stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-178">Let's add a new nested master page to the `NestedMasterPages` folder named `SimpleNested.master`.</span></span> <span data-ttu-id="0d428-179">Klikněte pravým tlačítkem na složku `NestedMasterPages` a vyberte možnost Přidat novou položku.</span><span class="sxs-lookup"><span data-stu-id="0d428-179">Right-click on the `NestedMasterPages` folder and choose Add New Item.</span></span> <span data-ttu-id="0d428-180">Tím se zobrazí dialogové okno Přidat novou položku zobrazenou na obrázku 2.</span><span class="sxs-lookup"><span data-stu-id="0d428-180">This brings up the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="0d428-181">Vyberte typ šablony stránky předlohy a zadejte název nové stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-181">Select the Master Page template type and type in the name of the new master page.</span></span> <span data-ttu-id="0d428-182">Chcete-li označit, že nová stránka předlohy by měla být vnořenou stránkou předlohy, zaškrtněte políčko vybrat hlavní stránku.</span><span class="sxs-lookup"><span data-stu-id="0d428-182">To indicate that the new master page should be a nested master page, check the "Select master page" checkbox.</span></span>

<span data-ttu-id="0d428-183">Potom klikněte na tlačítko Přidat.</span><span class="sxs-lookup"><span data-stu-id="0d428-183">Next, click the Add button.</span></span> <span data-ttu-id="0d428-184">Tím se zobrazí stejné dialogové okno vybrat hlavní stránku, které vidíte při vázání stránky obsahu na stránku předlohy (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="0d428-184">This will display the same Select a Master Page dialog box you see when binding a content page to a master page (see Figure 3).</span></span> <span data-ttu-id="0d428-185">Ve složce `NestedMasterPages` vyberte stránku předlohy `Simple.master` a klikněte na OK.</span><span class="sxs-lookup"><span data-stu-id="0d428-185">Choose the `Simple.master` master page in the `NestedMasterPages` folder and click OK.</span></span>

> [!NOTE]
> <span data-ttu-id="0d428-186">Pokud jste web ASP.NET vytvořili pomocí modelu projektu webové aplikace namísto modelu projektu webu, nezobrazí se v dialogovém okně Přidat novou položku na obrázku 2 zaškrtávací políčko vybrat hlavní stránku.</span><span class="sxs-lookup"><span data-stu-id="0d428-186">If you created your ASP.NET website using the Web Application Project model instead of the Web Site Project model you will not see the "Select master page" checkbox in the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="0d428-187">Chcete-li vytvořit vnořenou stránku předlohy při použití modelu projektu webové aplikace, musíte zvolit vnořenou šablonu hlavní stránky (místo šablony stránky předlohy).</span><span class="sxs-lookup"><span data-stu-id="0d428-187">To create a nested master page when using the Web Application Project model you must choose the Nested Master Page template (instead of the Master Page template).</span></span> <span data-ttu-id="0d428-188">Po výběru šablony vnořené stránky předlohy a kliknutí na tlačítko Přidat se zobrazí stejné dialogové okno vybrat hlavní stránku zobrazené na obrázku 3.</span><span class="sxs-lookup"><span data-stu-id="0d428-188">After selecting the Nested Master Page template and clicking Add, the same Select a Master Page dialog box shown in Figure 3 will appear.</span></span>

<span data-ttu-id="0d428-189">[![zaškrtnutím políčka &quot;vybrat vzorovou stránku&quot; přidáte vnořenou stránku předlohy.](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-189">[![Check the &quot;Select master page&quot; Checkbox to Add a Nested Master Page](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span></span>

<span data-ttu-id="0d428-190">**Obrázek 02**: Zaškrtnutím políčka vybrat vzorovou stránku přidáte vnořenou stránku předlohy ([kliknutím zobrazíte obrázek v plné velikosti).](nested-master-pages-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-190">**Figure 02**: Check the "Select master page" Checkbox to Add a Nested Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image6.png))</span></span>

<span data-ttu-id="0d428-191">[![vytvořit vazby na vnořenou stránku předlohy na jednoduchou hlavní stránku hlavního serveru.](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-191">[![Bind the Nested Master Page to the Simple.master Master Page](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span></span>

<span data-ttu-id="0d428-192">**Obrázek 03**: Svázání vnořené stránky předlohy s `Simple.master` stránkou předlohy ([kliknutím zobrazíte obrázek v plné velikosti](nested-master-pages-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="0d428-192">**Figure 03**: Bind the Nested Master Page to the `Simple.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image9.png))</span></span>

<span data-ttu-id="0d428-193">Deklarativní označení vnořené stránky předlohy zobrazené níže obsahuje dva ovládací prvky obsahu odkazující na dva ovládací prvky ContentPlaceHolder stránky hlavní úrovně.</span><span class="sxs-lookup"><span data-stu-id="0d428-193">The nested master page's declarative markup, shown below, contains two Content controls referencing the top-level master page's two ContentPlaceHolder controls.</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample3.aspx)]

<span data-ttu-id="0d428-194">S výjimkou direktivy `<%@ Master %>` je počáteční deklarativní značkovací kód vnořené stránky stejný jako kód, který je původně generován při vázání stránky obsahu na stejnou hlavní stránku nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="0d428-194">Except for the `<%@ Master %>` directive, the nested master page's initial declarative markup is identical to the markup that is initially generated when binding a content page to the same top-level master page.</span></span> <span data-ttu-id="0d428-195">Podobně jako direktiva `<%@ Page %>` stránky obsahu zahrnuje direktiva `<%@ Master %>`, která obsahuje atribut `MasterPageFile`, který určuje nadřazenou stránku předlohy nadřazené stránky.</span><span class="sxs-lookup"><span data-stu-id="0d428-195">Like a content page's `<%@ Page %>` directive, the `<%@ Master %>` directive here includes a `MasterPageFile` attribute that specifies the nested master page's parent master page.</span></span> <span data-ttu-id="0d428-196">Hlavní rozdíl mezi vnořenou stránkou předlohy a stránkou obsahu vázanými na stejnou hlavní stránku nejvyšší úrovně je, že vnořená hlavní stránka může obsahovat ovládací prvky ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="0d428-196">The main difference between the nested master page and a content page bound to the same top-level master page is that the nested master page can include ContentPlaceHolder controls.</span></span> <span data-ttu-id="0d428-197">Ovládací prvky ContentPlaceHolder vložené hlavní stránky definují oblasti, ve kterých mohou stránky obsahu přizpůsobit značky.</span><span class="sxs-lookup"><span data-stu-id="0d428-197">The nested master page's ContentPlaceHolder controls define the regions where the content pages can customize the markup.</span></span>

<span data-ttu-id="0d428-198">Umožňuje aktualizovat tuto vnořenou stránku předlohy tak, aby zobrazila text "Hello" z SimpleNested!</span><span class="sxs-lookup"><span data-stu-id="0d428-198">Update this nested master page so that it displays the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="0d428-199">v ovládacím prvku Content, který odpovídá ovládacímu prvku `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="0d428-199">in the Content control that corresponds to the `MainContent` ContentPlaceHolder control.</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample4.aspx)]

<span data-ttu-id="0d428-200">Po tomto přidání uložte vnořenou stránku předlohy a přidejte novou stránku obsahu do složky `NestedMasterPages` s názvem `Default.aspx`a vytvořte její vazby na `SimpleNested.master` hlavní stránku.</span><span class="sxs-lookup"><span data-stu-id="0d428-200">After making this addition, save the nested master page and then add a new content page to the `NestedMasterPages` folder named `Default.aspx`, and bind it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="0d428-201">Při přidávání této stránky můžete být překvapeni, abyste viděli, že neobsahuje žádné ovládací prvky obsahu (viz obrázek 4).</span><span class="sxs-lookup"><span data-stu-id="0d428-201">Upon adding this page you may be surprised to see that it contains no Content controls (see Figure 4)!</span></span> <span data-ttu-id="0d428-202">Stránka obsahu má přístup pouze k ovládacím prvkům s *nadřazenými* prvky hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="0d428-202">A content page can only access its *parent* master page's ContentPlaceHolders.</span></span> <span data-ttu-id="0d428-203">`SimpleNested.master` neobsahuje žádné ovládací prvky ContentPlaceHolder; Proto všechny stránky obsahu svázané s touto stránkou předlohy nemohou obsahovat žádné ovládací prvky obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-203">`SimpleNested.master` does not contain any ContentPlaceHolder controls; therefore, any content page bound to this master page cannot contain any Content controls.</span></span>

<span data-ttu-id="0d428-204">[![nová stránka obsahu neobsahuje žádné ovládací prvky obsahu.](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-204">[![The New Content Page Contains No Content Controls](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span></span>

<span data-ttu-id="0d428-205">**Obrázek 04**: stránka nový obsah neobsahuje žádné ovládací prvky obsahu ([kliknutím zobrazíte obrázek v plné velikosti).](nested-master-pages-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-205">**Figure 04**: The New Content Page Contains No Content Controls ([Click to view full-size image](nested-master-pages-cs/_static/image12.png))</span></span>

<span data-ttu-id="0d428-206">Co musíme udělat, je aktualizovat vnořenou hlavní stránku (`SimpleNested.master`) tak, aby zahrnovala ovládací prvky ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="0d428-206">What we need to do is update the nested master page (`SimpleNested.master`) to include ContentPlaceHolder controls.</span></span> <span data-ttu-id="0d428-207">Obvykle budete chtít, aby vnořené stránky předlohy zahrnovaly prvek ContentPlaceHolder pro každý prvek ContentPlaceHolder definovaný jeho nadřazenou stránkou předlohy, čímž bylo umožněno, aby jeho podřízená stránka předlohy nebo stránka obsahu pracovala s libovolným prvkem ContentPlaceHolder stránky hlavní stránky. ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="0d428-207">Typically you'll want your nested master pages to include a ContentPlaceHolder for each ContentPlaceHolder defined by its parent master page, thereby allowing its child master page or content page to work with any of the top-level master page's ContentPlaceHolder controls.</span></span>

<span data-ttu-id="0d428-208">Aktualizujte `SimpleNested.master` stránku předlohy tak, aby obsahovala prvek ContentPlaceHolder ve svých dvou ovládacích prvcích obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-208">Update the `SimpleNested.master` master page to include a ContentPlaceHolder in its two Content controls.</span></span> <span data-ttu-id="0d428-209">Udělte ovládací prvky ContentPlaceHolder stejný název jako ovládací prvek ContentPlaceHolder, na který se vztahuje ovládací prvek Content.</span><span class="sxs-lookup"><span data-stu-id="0d428-209">Give the ContentPlaceHolder controls the same name as the ContentPlaceHolder control their Content control refers to.</span></span> <span data-ttu-id="0d428-210">To znamená přidání ovládacího prvku ContentPlaceHolder s názvem `MainContent` k ovládacímu prvku obsahu v `SimpleNested.master`, který odkazuje na `MainContent` ContentPlaceHolder v `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-210">That is, add a ContentPlaceHolder control named `MainContent` to the Content control in `SimpleNested.master` that references the `MainContent` ContentPlaceHolder in `Simple.master`.</span></span> <span data-ttu-id="0d428-211">Proveďte stejnou věc v ovládacím prvku obsahu, která odkazuje na `head` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="0d428-211">Do the same thing in the Content control that references the `head` ContentPlaceHolder.</span></span>

> [!NOTE]
> <span data-ttu-id="0d428-212">I když doporučujeme pojmenovat ovládací prvky ContentPlaceHolder ve vnořené stránce předlohy stejně jako prvky ContentPlaceHolder na stránce předlohy nejvyšší úrovně, toto pojmenovávání se nevyžaduje.</span><span class="sxs-lookup"><span data-stu-id="0d428-212">While I recommend naming the ContentPlaceHolder controls in the nested master page the same as the ContentPlaceHolders in the top-level master page, this naming symmetry is not required.</span></span> <span data-ttu-id="0d428-213">Můžete dát ovládacím prvkům ContentPlaceHolder na své vnořené stránce předlohy libovolný název, který chcete.</span><span class="sxs-lookup"><span data-stu-id="0d428-213">You can give the ContentPlaceHolder controls in your nested master page any name you like.</span></span> <span data-ttu-id="0d428-214">Je však snazší si uvědomit, jaké prvky ContentPlaceHolder odpovídají v jaké oblasti stránky, pokud má hlavní stránka nejvyšší úrovně a vnořené stránky předlohy stejné názvy.</span><span class="sxs-lookup"><span data-stu-id="0d428-214">However, I find it easier to remember what ContentPlaceHolders correspond with what regions of the page if my top-level master page and nested master pages use the same names.</span></span>

<span data-ttu-id="0d428-215">Po provedení těchto přidání by deklarativní označení stránky hlavní stránky `SimpleNested.master` mělo vypadat podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="0d428-215">After making these additions your `SimpleNested.master` master page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="0d428-216">Odstraňte `Default.aspx` stránku obsahu, kterou jsme právě vytvořili, a pak ji znovu přidejte a navážeme ji na `SimpleNested.master` stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-216">Delete the `Default.aspx` content page we just created and then re-add it, binding it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="0d428-217">Tentokrát aplikace Visual Studio přidá do `Default.aspx`dva ovládací prvky obsahu odkazující na prvky ContentPlaceHolders nyní definované v `SimpleNested.master` (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="0d428-217">This time Visual Studio adds two Content controls to the `Default.aspx`, referencing the ContentPlaceHolders now defined in `SimpleNested.master` (see Figure 6).</span></span> <span data-ttu-id="0d428-218">Přidejte text "Hello" z default. aspx! "</span><span class="sxs-lookup"><span data-stu-id="0d428-218">Add the text, "Hello, from Default.aspx!"</span></span> <span data-ttu-id="0d428-219">v ovládacím prvku Content, na který se odkazuje `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="0d428-219">in the Content control that referenced `MainContent`.</span></span>

<span data-ttu-id="0d428-220">Na obrázku 5 jsou uvedené tři entity – `Simple.master`, `SimpleNested.master`a `Default.aspx` – a jak se vzájemně vztahují.</span><span class="sxs-lookup"><span data-stu-id="0d428-220">Figure 5 shows the three entities involved here - `Simple.master`, `SimpleNested.master`, and `Default.aspx` - and how they relate to one another.</span></span> <span data-ttu-id="0d428-221">Jak znázorňuje diagram, vnořená hlavní stránka implementuje ovládací prvky obsahu pro své nadřazené prvky ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="0d428-221">As the diagram shows, the nested master page implements Content controls for its parent's ContentPlaceHolder.</span></span> <span data-ttu-id="0d428-222">Pokud tyto oblasti potřebují být dostupné pro stránku obsahu, vnořená hlavní stránka musí přidat své vlastní prvky ContentPlaceHolder do ovládacích prvků obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-222">If these regions need to be accessible to the content page, the nested master page must add its own ContentPlaceHolders to the Content controls.</span></span>

<span data-ttu-id="0d428-223">[![rozložení stránky obsahu v zobrazení stránky nejvyšší úrovně a vnořených hlavních stránek](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-223">[![The Top-Level and Nested Master Pages Dictate the Content Page's Layout](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span></span>

<span data-ttu-id="0d428-224">**Obrázek 05**: stránky nejvyšší úrovně a vnořené hlavní stránky určují rozložení stránky obsahu ([kliknutím zobrazíte obrázek v plné velikosti).](nested-master-pages-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-224">**Figure 05**: The Top-Level and Nested Master Pages Dictate the Content Page's Layout ([Click to view full-size image](nested-master-pages-cs/_static/image15.png))</span></span>

<span data-ttu-id="0d428-225">Toto chování ilustruje, jak se stránka obsahu nebo stránka předlohy společnost Cognizant jenom na svou nadřazenou stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-225">This behavior illustrates how a content page or master page is only cognizant of its parent master page.</span></span> <span data-ttu-id="0d428-226">Toto chování je také uvedeno v návrháři aplikace Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0d428-226">This behavior is also indicated by the Visual Studio Designer.</span></span> <span data-ttu-id="0d428-227">Obrázek 6 ukazuje návrháře `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="0d428-227">Figure 6 shows the Designer for `Default.aspx`.</span></span> <span data-ttu-id="0d428-228">Návrhář sice jasně ukazuje, které oblasti jsou editovatelné na stránce obsahu a které části nejsou. neumožňuje určit, které neupravitelné oblasti jsou z vnořené stránky předlohy a jaké oblasti se nacházejí na hlavní stránce nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="0d428-228">While the Designer clearly shows what regions are editable from the content page and what portions aren't, it doesn't disambiguate what non-editable regions are from the nested master page and what regions are from the top-level master page.</span></span>

<span data-ttu-id="0d428-229">[![stránka obsahu teď obsahuje ovládací prvky obsahu pro vnořené prvky ContentPlaceHolder stránky předlohy.](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-229">[![The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span></span>

<span data-ttu-id="0d428-230">**Obrázek 6**: stránka obsahu teď obsahuje ovládací prvky obsahu pro vnořené prvky ContentPlaceHolder stránky předlohy ([kliknutím zobrazíte obrázek v plné velikosti).](nested-master-pages-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-230">**Figure 06**: The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders ([Click to view full-size image](nested-master-pages-cs/_static/image18.png))</span></span>

## <a name="step-3-adding-a-second-simple-nested-master-page"></a><span data-ttu-id="0d428-231">Krok 3: Přidání druhé jednoduché vnořené stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="0d428-231">Step 3: Adding a Second Simple Nested Master Page</span></span>

<span data-ttu-id="0d428-232">Výhoda vnořených stránek předlohy je zřejmější, pokud existuje více vnořených stránek předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-232">The benefit of nested master pages is more evident when there are multiple nested master pages.</span></span> <span data-ttu-id="0d428-233">Pro ilustraci této výhody vytvořte další vnořenou stránku předlohy ve složce `NestedMasterPages`. Pojmenujte tuto novou vnořenou stránku předlohy `SimpleNestedAlternate.master` a navažte ji na `Simple.master` stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-233">To illustrate this benefit, create another nested master page in the `NestedMasterPages` folder; name this new nested master page `SimpleNestedAlternate.master` and bind it to the `Simple.master` master page.</span></span> <span data-ttu-id="0d428-234">Přidejte ovládací prvky ContentPlaceHolder do dvou ovládacích prvků obsahu vnořené stránky předlohy, jako jsme to provedli v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="0d428-234">Add ContentPlaceHolder controls in the nested master page's two Content controls like we did in Step 2.</span></span> <span data-ttu-id="0d428-235">Přidejte také text "Hello" z SimpleNestedAlternate!</span><span class="sxs-lookup"><span data-stu-id="0d428-235">Also add the text, "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="0d428-236">v ovládacím prvku Content, který odpovídá `MainContent` ContentPlaceHolder stránky hlavní stránky nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="0d428-236">in the Content control that corresponds to the top-level master page's `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="0d428-237">Po provedení těchto změn by deklarativní označení nové vnořené stránky předlohy měla vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="0d428-237">After making these changes your new nested master page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample6.aspx)]

<span data-ttu-id="0d428-238">Vytvořte stránku obsahu s názvem `Alternate.aspx` ve složce `NestedMasterPages` a navažte ji na `SimpleNestedAlternate.master` vnořenou hlavní stránkou.</span><span class="sxs-lookup"><span data-stu-id="0d428-238">Create a content page named `Alternate.aspx` in the `NestedMasterPages` folder and bind it to the `SimpleNestedAlternate.master` nested master page.</span></span> <span data-ttu-id="0d428-239">Přidejte text "Hello" z alternativního! "</span><span class="sxs-lookup"><span data-stu-id="0d428-239">Add the text, "Hello, from Alternate!"</span></span> <span data-ttu-id="0d428-240">v ovládacím prvku Content, který odpovídá `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="0d428-240">in the Content control that corresponds to `MainContent`.</span></span> <span data-ttu-id="0d428-241">Obrázek 7 zobrazuje `Alternate.aspx` při prohlížení pomocí návrháře sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0d428-241">Figure 7 shows `Alternate.aspx` when viewed through the Visual Studio Designer.</span></span>

<span data-ttu-id="0d428-242">[![alternativní přípona. aspx je svázána s hlavní stránkou SimpleNestedAlternate. Master.](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-242">[![Alternate.aspx is Bound to the SimpleNestedAlternate.master Master Page](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span></span>

<span data-ttu-id="0d428-243">**Obrázek 07**: `Alternate.aspx` je svázána se stránkou předlohy `SimpleNestedAlternate.master` ([kliknutím zobrazíte obrázek v plné velikosti).](nested-master-pages-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-243">**Figure 07**: `Alternate.aspx` is Bound to the `SimpleNestedAlternate.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image21.png))</span></span>

<span data-ttu-id="0d428-244">Porovnejte návrháře na obrázku 7 s návrhářem na obrázku 6.</span><span class="sxs-lookup"><span data-stu-id="0d428-244">Compare the Designer in Figure 7 to the Designer in Figure 6.</span></span> <span data-ttu-id="0d428-245">Obě stránky obsahu sdílejí stejné rozložení definované na hlavní stránce nejvyšší úrovně (`Simple.master`), konkrétně v tématu kurz "vnořené stránky předlohy (jednoduché)".</span><span class="sxs-lookup"><span data-stu-id="0d428-245">Both content pages share the same layout defined in the top-level master page (`Simple.master`), namely the "Nested Master Pages Tutorial (Simple)" title.</span></span> <span data-ttu-id="0d428-246">Ve svých nadřazených stránkách předlohy ale zároveň má stejný obsah definovaný jako text "Hello" z SimpleNested! "</span><span class="sxs-lookup"><span data-stu-id="0d428-246">Yet both have distinct content defined in their parent master pages - the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="0d428-247">na obrázku 6 a "Hello" z SimpleNestedAlternate! "</span><span class="sxs-lookup"><span data-stu-id="0d428-247">in Figure 6 and "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="0d428-248">na obrázku 7.</span><span class="sxs-lookup"><span data-stu-id="0d428-248">in Figure 7.</span></span> <span data-ttu-id="0d428-249">Tyto rozdíly jsou v tomto případě triviální, ale můžete tento příklad zvětšit tak, aby zahrnoval smysluplnější rozdíly.</span><span class="sxs-lookup"><span data-stu-id="0d428-249">Granted, these differences here are trivial, but you could extend this example to include more meaningful differences.</span></span> <span data-ttu-id="0d428-250">Například stránka `SimpleNested.master` může obsahovat nabídku s možnostmi specifickými pro její stránky obsahu, zatímco `SimpleNestedAlternate.master` mohou mít informace, které se vztahují na stránky obsahu, které se na ni vážou.</span><span class="sxs-lookup"><span data-stu-id="0d428-250">For instance, the `SimpleNested.master` page might include a menu with options specific to its content pages, whereas `SimpleNestedAlternate.master` might have information pertinent to the content pages that bind to it.</span></span>

<span data-ttu-id="0d428-251">Nyní si představte, že jsme potřebovali udělat změnu rozložení lokality.</span><span class="sxs-lookup"><span data-stu-id="0d428-251">Now, imagine that we needed to make a change to the overarching site layout.</span></span> <span data-ttu-id="0d428-252">Představte si například, že jsme chtěli přidat seznam běžných odkazů na všechny stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-252">For example, imagine that we wanted to add a list of common links to all content pages.</span></span> <span data-ttu-id="0d428-253">K tomu je potřeba aktualizovat hlavní stránku nejvyšší úrovně `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-253">To accomplish this we update the top-level master page, `Simple.master`.</span></span> <span data-ttu-id="0d428-254">Všechny změny, které se okamžitě projeví ve vnořených stránkách předlohy a na základě přípon, jejich stránek obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-254">Any changes there are immediately reflected in its nested master pages and, by extension, their content pages.</span></span>

<span data-ttu-id="0d428-255">K demonstraci snadného, které můžeme změnit rozložení lokality, otevřete stránku předloha `Simple.master` a přidejte následující značku mezi `topContent` a prvky `mainContent` `<div>`:</span><span class="sxs-lookup"><span data-stu-id="0d428-255">To demonstrate the ease with which we can change the overarching site layout, open the `Simple.master` master page and add the following markup between the `topContent` and `mainContent` `<div>` elements:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample7.aspx)]

<span data-ttu-id="0d428-256">Tím přidáte dvě odkazy na horní stranu každé stránky, která se váže k `Simple.master`, `SimpleNested.master`nebo `SimpleNestedAlternate.master`. Tyto změny platí pro všechny vnořené stránky předlohy a jejich stránky obsahu okamžitě.</span><span class="sxs-lookup"><span data-stu-id="0d428-256">This adds two links to the top of every page that binds to `Simple.master`, `SimpleNested.master`, or `SimpleNestedAlternate.master`; these changes apply to all nested master pages and their content pages immediately.</span></span> <span data-ttu-id="0d428-257">Obrázek 8 zobrazuje `Alternate.aspx` při prohlížení v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="0d428-257">Figure 8 shows `Alternate.aspx` when viewed through a browser.</span></span> <span data-ttu-id="0d428-258">Všimněte si přidání odkazů v horní části stránky (ve srovnání s obrázkem 7).</span><span class="sxs-lookup"><span data-stu-id="0d428-258">Note the addition of the links at the top of the page (compared to Figure 7).</span></span>

<span data-ttu-id="0d428-259">[![změněné na hlavní stránku nejvyšší úrovně se okamžitě projeví ve vnořených stránkách předlohy a jejich stránkách obsahu.](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-259">[![Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span></span>

<span data-ttu-id="0d428-260">**Obrázek 08**: Změna na hlavní stránku nejvyšší úrovně se okamžitě projeví ve svých vnořených stránkách předlohy a jejich stránkách obsahu ([kliknutím zobrazíte obrázek v plné velikosti).](nested-master-pages-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-260">**Figure 08**: Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages ([Click to view full-size image](nested-master-pages-cs/_static/image24.png))</span></span>

## <a name="using-a-nested-master-page-for-the-administration-section"></a><span data-ttu-id="0d428-261">Použití vnořené stránky předlohy pro oddíl Administration</span><span class="sxs-lookup"><span data-stu-id="0d428-261">Using a Nested Master Page for the Administration Section</span></span>

<span data-ttu-id="0d428-262">V tuto chvíli jsme si prohlédli výhody vnořených hlavních stránek a viděli, jak je vytvořit a používat v aplikaci ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="0d428-262">At this point we have looked at the advantages of nested master pages and have seen how to create and use them in an ASP.NET application.</span></span> <span data-ttu-id="0d428-263">Příklady v krocích 1, 2 a 3 však zahrnovaly vytvoření nové hlavní stránky nejvyšší úrovně, nové vnořené stránky předlohy a nové stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-263">The examples in Steps 1, 2, and 3, however, involved creating a new top-level master page, new nested master pages, and new content pages.</span></span> <span data-ttu-id="0d428-264">Jak přidat novou vnořenou stránku předlohy na web se stávajícími stránkami předloh a obsahu nejvyšší úrovně?</span><span class="sxs-lookup"><span data-stu-id="0d428-264">What about adding a new nested master page to a website with an existing top-level master page and content pages?</span></span>

<span data-ttu-id="0d428-265">Integrace vnořené stránky předlohy do existující webové stránky a její přidružení k existujícím stránkám obsahu vyžaduje trochu větší úsilí než od začátku.</span><span class="sxs-lookup"><span data-stu-id="0d428-265">Integrating a nested master page into an existing website and associating it with existing content pages requires a bit more effort than starting from scratch.</span></span> <span data-ttu-id="0d428-266">Kroky 4, 5, 6 a 7 Prozkoumejte tyto problémy, jako jsme nastavili naši ukázkovou aplikaci tak, aby zahrnovala novou vnořenou stránku předlohy s názvem `AdminNested.master`, která obsahuje pokyny pro správce a které používají stránky ASP.NET ve `~/Admin` složce.</span><span class="sxs-lookup"><span data-stu-id="0d428-266">Steps 4, 5, 6, and 7 explore these challenges as we augment our demo application to include a new nested master page named `AdminNested.master` that contains instructions for the administrator and is used by the ASP.NET pages in the `~/Admin` folder.</span></span>

<span data-ttu-id="0d428-267">Integrace vnořené stránky předlohy do naší ukázkové aplikace zavádí následující mezní hodnoty:</span><span class="sxs-lookup"><span data-stu-id="0d428-267">Integrating a nested master page into our demo application introduces the following hurdles:</span></span>

- <span data-ttu-id="0d428-268">Stávající stránky obsahu ve složce `~/Admin` mají určitá očekávání ze své hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="0d428-268">The existing content pages in the `~/Admin` folder have certain expectations from their master page.</span></span> <span data-ttu-id="0d428-269">Pro Start očekávají, že jsou k dispozici určité ovládací prvky ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="0d428-269">For starters, they expect certain ContentPlaceHolder controls to be present.</span></span> <span data-ttu-id="0d428-270">Kromě toho stránky `~/Admin/AddProduct.aspx` a `~/Admin/Products.aspx` volají metodu public `RefreshRecentProductsGrid` hlavní stránky, nastavit její vlastnost `GridMessageText` nebo mít pro událost `PricesDoubled` obslužnou rutinu události.</span><span class="sxs-lookup"><span data-stu-id="0d428-270">Furthermore, the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages call the master page's public `RefreshRecentProductsGrid` method, set its `GridMessageText` property, or have an event handler for its `PricesDoubled` event.</span></span> <span data-ttu-id="0d428-271">V důsledku toho musí vnořená stránka předlohy poskytovat stejné prvky ContentPlaceHolder a veřejné členy.</span><span class="sxs-lookup"><span data-stu-id="0d428-271">Consequently, our nested master page must provide the same ContentPlaceHolders and public members.</span></span>
- <span data-ttu-id="0d428-272">V předchozím kurzu jsme rozšířili třídu `BasePage`, aby dynamicky nastavila vlastnost `MasterPageFile` objektu `Page` na základě proměnné relace.</span><span class="sxs-lookup"><span data-stu-id="0d428-272">In the preceding tutorial we enhanced the `BasePage` class to dynamically set the `Page` object's `MasterPageFile` property based on a Session variable.</span></span> <span data-ttu-id="0d428-273">Jak podporujeme dynamické stránky předloh při použití vnořených stránek předlohy?</span><span class="sxs-lookup"><span data-stu-id="0d428-273">How to we support dynamic master pages when using nested master pages?</span></span>

<span data-ttu-id="0d428-274">Tyto dvě problémy se budou nacházet při sestavování vnořené hlavní stránky a jejich použití z našich stávajících stránek obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-274">These two challenges will surface as we build the nested master page and use it from our existing content pages.</span></span> <span data-ttu-id="0d428-275">Prozkoumáme a surmountme tyto problémy, jak nastanou.</span><span class="sxs-lookup"><span data-stu-id="0d428-275">We'll investigate and surmount these issues as they arise.</span></span>

## <a name="step-4-creating-the-nested-master-page"></a><span data-ttu-id="0d428-276">Krok 4: vytvoření vnořené stránky předlohy</span><span class="sxs-lookup"><span data-stu-id="0d428-276">Step 4: Creating the Nested Master Page</span></span>

<span data-ttu-id="0d428-277">Naším prvním úkolem je vytvořit vnořenou stránku předlohy, kterou budou používat stránky v části Správa.</span><span class="sxs-lookup"><span data-stu-id="0d428-277">Our first task is to create the nested master page to be used by the pages in the Administration section.</span></span> <span data-ttu-id="0d428-278">Jak jsme viděli v kroku 2, při přidávání nové vnořené stránky předlohy je potřeba zadat nadřazenou stránku nadřazené hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="0d428-278">As we saw in Step 2, when adding a new nested master page we need to specify the nested master page's parent master page.</span></span> <span data-ttu-id="0d428-279">Máme ale dvě hlavní stránky nejvyšší úrovně: `Site.master` a `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-279">But we have two top-level master pages: `Site.master` and `Alternate.master`.</span></span> <span data-ttu-id="0d428-280">Odvoláme, že jsme vytvořili `Alternate.master` v předchozím kurzu a napsali jste kód ve třídě `BasePage`, která nastaví vlastnost `MasterPageFile` objektu stránky za běhu na buď `Site.master`, nebo `Alternate.master` v závislosti na hodnotě proměnné relace `MyMasterPage`.</span><span class="sxs-lookup"><span data-stu-id="0d428-280">Recall that we created `Alternate.master` in the preceding tutorial and wrote code in the `BasePage` class that set the Page object's `MasterPageFile` property at runtime to either `Site.master` or `Alternate.master` depending on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="0d428-281">Jak nakonfigurujeme naši vnořenou stránku předlohy tak, aby používala příslušnou hlavní stránku nejvyšší úrovně?</span><span class="sxs-lookup"><span data-stu-id="0d428-281">How do we configure our nested master page so that it uses the appropriate top-level master page?</span></span> <span data-ttu-id="0d428-282">Máme dvě možnosti:</span><span class="sxs-lookup"><span data-stu-id="0d428-282">We have two options:</span></span>

- <span data-ttu-id="0d428-283">Vytvořte dvě vnořené stránky předlohy, `AdminNestedSite.master` a `AdminNestedAlternate.master`a vytvořte jejich vazby na hlavní stránky nejvyšší úrovně `Site.master` a `Alternate.master`v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="0d428-283">Create two nested master pages, `AdminNestedSite.master` and `AdminNestedAlternate.master`, and bind them to the top-level master pages `Site.master` and `Alternate.master`, respectively.</span></span> <span data-ttu-id="0d428-284">V `BasePage`pak nastavíme `MasterPageFile` objektu `Page` na příslušnou vnořenou stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-284">In `BasePage`, then, we'd set the `Page` object's `MasterPageFile` to the appropriate nested master page.</span></span>
- <span data-ttu-id="0d428-285">Vytvoří jednu vnořenou hlavní stránku a bude mít stránky obsahu používat tuto konkrétní stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-285">Create a single nested master page and have the content pages use this particular master page.</span></span> <span data-ttu-id="0d428-286">Za běhu musíme za běhu nastavit vlastnost `MasterPageFile` vnořené hlavní stránky na příslušnou hlavní stránku nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="0d428-286">Then, at runtime, we'd need to set the nested master page's `MasterPageFile` property to the appropriate top-level master page at runtime.</span></span> <span data-ttu-id="0d428-287">(Jak jste teď možná nahlásili, stránky předlohy mají také vlastnost `MasterPageFile`.)</span><span class="sxs-lookup"><span data-stu-id="0d428-287">(As you might have figured out by now, master pages also have a `MasterPageFile` property.)</span></span>

<span data-ttu-id="0d428-288">Pojďme použít druhou možnost.</span><span class="sxs-lookup"><span data-stu-id="0d428-288">Let's use the second option.</span></span> <span data-ttu-id="0d428-289">Vytvořte jeden vnořený soubor hlavní stránky ve složce `~/Admin` s názvem `AdminNested.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-289">Create a single nested master page file in the `~/Admin` folder named `AdminNested.master`.</span></span> <span data-ttu-id="0d428-290">Vzhledem k tomu, že obě `Site.master` i `Alternate.master` mají stejnou sadu ovládacích prvků ContentPlaceHolder, nezáleží na tom, jakou stránku předlohy svážete s tím, i když doporučujeme, abyste ji navázali `Site.master` za účelem konzistence.</span><span class="sxs-lookup"><span data-stu-id="0d428-290">Because both `Site.master` and `Alternate.master` have the same set of ContentPlaceHolder controls, it doesn't matter what master page you bind it to, although I encourage you to bind it to `Site.master` for consistency's sake.</span></span>

<span data-ttu-id="0d428-291">[![přidat vnořenou stránku předlohy do složky ~/admin.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-291">[![Add a Nested Master Page to the ~/Admin Folder.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span></span>

<span data-ttu-id="0d428-292">**Obrázek 09**: přidejte do složky `~/Admin` vnořenou stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-292">**Figure 09**: Add a Nested Master Page to the `~/Admin` Folder.</span></span> <span data-ttu-id="0d428-293">([Kliknutím zobrazíte obrázek v plné velikosti.](nested-master-pages-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="0d428-293">([Click to view full-size image](nested-master-pages-cs/_static/image27.png))</span></span>

<span data-ttu-id="0d428-294">Vzhledem k tomu, že vnořená hlavní stránka je svázána se stránkou předlohy se čtyřmi ovládacími prvky ContentPlaceHolder, Visual Studio přidá čtyři ovládací prvky obsahu do počáteční značky vnořeného souboru hlavní stránky.</span><span class="sxs-lookup"><span data-stu-id="0d428-294">Because the nested master page is bound to a master page with four ContentPlaceHolder controls, Visual Studio adds four Content controls to the new nested master page file's initial markup.</span></span> <span data-ttu-id="0d428-295">Podobně jako u kroků 2 a 3 přidejte ovládací prvek ContentPlaceHolder do každého ovládacího prvku Content, který má stejný název jako ovládací prvek ContentPlaceHolder hlavní stránky nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="0d428-295">Like we did in Steps 2 and 3, add a ContentPlaceHolder control in each Content control, giving it the same name as the top-level master page's ContentPlaceHolder control.</span></span> <span data-ttu-id="0d428-296">Do ovládacího prvku Content, který odpovídá `MainContent` ContentPlaceHolder, přidejte také následující kód:</span><span class="sxs-lookup"><span data-stu-id="0d428-296">Also add the following markup to the Content control that corresponds to the `MainContent` ContentPlaceHolder:</span></span>

[!code-html[Main](nested-master-pages-cs/samples/sample8.html)]

<span data-ttu-id="0d428-297">Dále Definujte třídu `instructions` CSS v souborech `Styles.css` a `AlternateStyles.css` šablon stylů CSS.</span><span class="sxs-lookup"><span data-stu-id="0d428-297">Next, define the `instructions` CSS class in the `Styles.css` and `AlternateStyles.css` CSS files.</span></span> <span data-ttu-id="0d428-298">Následující pravidla šablony stylů CSS způsobí zobrazení prvků jazyka HTML s `instructions`ou třídou, která má být zobrazena se světle žlutou barvou pozadí a černým, plným ohraničením:</span><span class="sxs-lookup"><span data-stu-id="0d428-298">The following CSS rules cause HTML elements styled with the `instructions` class to be displayed with a light yellow background color and a black, solid border:</span></span>

[!code-css[Main](nested-master-pages-cs/samples/sample9.css)]

<span data-ttu-id="0d428-299">Vzhledem k tomu, že tento kód byl přidán na vnořenou stránku předlohy, bude se zobrazovat pouze na stránkách, které používají tuto vnořenou stránku předlohy (konkrétně stránky v části Správa).</span><span class="sxs-lookup"><span data-stu-id="0d428-299">Because this markup has been added to the nested master page, it will only appear in those pages that use this nested master page (namely, the pages in the Administration section).</span></span>

<span data-ttu-id="0d428-300">Po provedení těchto přidání na vnořenou hlavní stránku by jeho deklarativní označení mělo vypadat podobně jako následující:</span><span class="sxs-lookup"><span data-stu-id="0d428-300">After making these additions to your nested master page, its declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample10.aspx)]

<span data-ttu-id="0d428-301">Všimněte si, že každý ovládací prvek obsahu má ovládací prvek ContentPlaceHolder a že vlastnosti ContentPlaceHolder Controls `ID` jsou přiřazeny stejné hodnoty jako odpovídající ovládací prvky ContentPlaceHolder na stránce předlohy nejvyšší úrovně.</span><span class="sxs-lookup"><span data-stu-id="0d428-301">Note that each Content control has a ContentPlaceHolder control and that the ContentPlaceHolder controls' `ID` properties are assigned the same values as the corresponding ContentPlaceHolder controls in the top-level master page.</span></span> <span data-ttu-id="0d428-302">Kromě toho se značky specifické pro oddíl Správa zobrazí v `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="0d428-302">Moreover, the Administration section-specific markup appears in the `MainContent` ContentPlaceHolder.</span></span>

<span data-ttu-id="0d428-303">Obrázek 10 ukazuje `AdminNested.master` vnořenou stránku předlohy při zobrazení prostřednictvím návrháře aplikace Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0d428-303">Figure 10 shows the `AdminNested.master` nested master page when viewed through Visual Studio's Designer.</span></span> <span data-ttu-id="0d428-304">Pokyny najdete ve žlutém poli v horní části ovládacího prvku obsahu `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="0d428-304">You can see the instructions in the yellow box at the top of the `MainContent` Content control.</span></span>

<span data-ttu-id="0d428-305">[![vnořená hlavní stránka rozšiřuje hlavní stránku nejvyšší úrovně tak, aby obsahovala pokyny pro správce.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-305">[![The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span></span>

<span data-ttu-id="0d428-306">**Obrázek 10**: vnořená stránka předlohy rozšiřuje hlavní stránku nejvyšší úrovně, která obsahuje pokyny pro správce.</span><span class="sxs-lookup"><span data-stu-id="0d428-306">**Figure 10**: The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.</span></span> <span data-ttu-id="0d428-307">([Kliknutím zobrazíte obrázek v plné velikosti.](nested-master-pages-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="0d428-307">([Click to view full-size image](nested-master-pages-cs/_static/image30.png))</span></span>

## <a name="step-5-updating-the-existing-content-pages-to-use-the-new-nested-master-page"></a><span data-ttu-id="0d428-308">Krok 5: aktualizace stávajících stránek obsahu tak, aby používaly novou vnořenou stránku předlohy</span><span class="sxs-lookup"><span data-stu-id="0d428-308">Step 5: Updating the Existing Content Pages to Use the New Nested Master Page</span></span>

<span data-ttu-id="0d428-309">Kdykoli přidáme novou stránku obsahu do oddílu pro správu, musíme ji navazovat na `AdminNested.master` hlavní stránku, kterou jsme právě vytvořili.</span><span class="sxs-lookup"><span data-stu-id="0d428-309">Anytime we add a new content page to the Administration section we need to bind it to the `AdminNested.master` master page we just created.</span></span> <span data-ttu-id="0d428-310">Ale co o stávajících stránkách obsahu?</span><span class="sxs-lookup"><span data-stu-id="0d428-310">But what about the existing content pages?</span></span> <span data-ttu-id="0d428-311">V současné době jsou všechny stránky obsahu v lokalitě odvozeny od třídy `BasePage`, která programově nastavuje stránku předlohy stránky obsahu za běhu.</span><span class="sxs-lookup"><span data-stu-id="0d428-311">Currently, all content pages in the site derive from the `BasePage` class, which programmatically sets the content page's master page at runtime.</span></span> <span data-ttu-id="0d428-312">Nejedná se o chování, které chceme pro stránky obsahu v části Správa.</span><span class="sxs-lookup"><span data-stu-id="0d428-312">This is not the behavior we want for the content pages in the Administration section.</span></span> <span data-ttu-id="0d428-313">Místo toho chceme, aby tyto stránky obsahu vždy používaly stránku `AdminNested.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-313">Instead, we want these content pages to always use the `AdminNested.master` page.</span></span> <span data-ttu-id="0d428-314">Bude odpovědností na vnořenou stránku předlohy pro výběr obsahu stránky obsahu nejvyšší úrovně za běhu.</span><span class="sxs-lookup"><span data-stu-id="0d428-314">It will be the responsibility of the nested master page to choose the right top-level content page at runtime.</span></span>

<span data-ttu-id="0d428-315">Nejlepším způsobem, jak dosáhnout tohoto požadovaného chování, je vytvořit novou vlastní třídu základní stránky s názvem `AdminBasePage`, která rozšiřuje třídu `BasePage`.</span><span class="sxs-lookup"><span data-stu-id="0d428-315">To best way to achieve this desired behavior is to create a new custom base page class named `AdminBasePage` that extends the `BasePage` class.</span></span> <span data-ttu-id="0d428-316">`AdminBasePage` pak může přepsat `SetMasterPageFile` a nastavit `MasterPageFile` objektu `Page` na pevně zakódované hodnoty "~/Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="0d428-316">`AdminBasePage` can then override the `SetMasterPageFile` and set the `Page` object's `MasterPageFile` to the hard-coded value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="0d428-317">Tímto způsobem budou všechny stránky, které jsou odvozeny od `AdminBasePage`, používat `AdminNested.master`, zatímco každá stránka, která je odvozena z `BasePage`, bude mít vlastnost `MasterPageFile` nastavenou dynamicky na hodnotu "~/site.Master" nebo "~/Alternate.Master" na základě hodnoty proměnné relace `MyMasterPage`.</span><span class="sxs-lookup"><span data-stu-id="0d428-317">In this way, any page that derives from `AdminBasePage` will use `AdminNested.master`, whereas any page that derives from `BasePage` will have its `MasterPageFile` property set dynamically to either "~/Site.master" or "~/Alternate.master" based on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="0d428-318">Začněte přidáním nového souboru třídy do složky `App_Code` s názvem `AdminBasePage.cs`.</span><span class="sxs-lookup"><span data-stu-id="0d428-318">Start by adding a new class file to the `App_Code` folder named `AdminBasePage.cs`.</span></span> <span data-ttu-id="0d428-319">Nastavte `AdminBasePage` `BasePage` a pak přepište metodu `SetMasterPageFile`.</span><span class="sxs-lookup"><span data-stu-id="0d428-319">Have `AdminBasePage` extend `BasePage` and then override the `SetMasterPageFile` method.</span></span> <span data-ttu-id="0d428-320">V této metodě přiřaďte `MasterPageFile` hodnotu ~/Admin/AdminNested.master.</span><span class="sxs-lookup"><span data-stu-id="0d428-320">In that method assign the `MasterPageFile` the value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="0d428-321">Po provedení těchto změn by soubor vaší třídy měl vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="0d428-321">After making these changes your class file should look similar to the following:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample11.cs)]

<span data-ttu-id="0d428-322">Teď je potřeba mít existující stránky obsahu v oddílu pro správu, ale musí být odvozené z `AdminBasePage` místo `BasePage`.</span><span class="sxs-lookup"><span data-stu-id="0d428-322">We now need to have the existing content pages in the Administration section derive from `AdminBasePage` instead of `BasePage`.</span></span> <span data-ttu-id="0d428-323">Pro každou stránku obsahu ve složce `~/Admin` přejděte na soubor třídy kódu na pozadí a proveďte tuto změnu.</span><span class="sxs-lookup"><span data-stu-id="0d428-323">Go to the code-behind class file for each content page in the `~/Admin` folder and make this change.</span></span> <span data-ttu-id="0d428-324">Například v `~/Admin/Default.aspx` byste změnili deklaraci třídy kódu na pozadí z:</span><span class="sxs-lookup"><span data-stu-id="0d428-324">For example, in `~/Admin/Default.aspx` you'd change the code-behind class declaration from:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample12.cs)]

<span data-ttu-id="0d428-325">Na:</span><span class="sxs-lookup"><span data-stu-id="0d428-325">To:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample13.cs)]

<span data-ttu-id="0d428-326">Obrázek 11 znázorňuje, jak je hlavní stránka nejvyšší úrovně (`Site.master` nebo `Alternate.master`), vnořená hlavní stránka (`AdminNested.master`) a stránky obsahu oddílu správy vzájemně propojeny.</span><span class="sxs-lookup"><span data-stu-id="0d428-326">Figure 11 depicts how the top-level master page (`Site.master` or `Alternate.master`), the nested master page (`AdminNested.master`), and the Administration section content pages relate to one another.</span></span>

<span data-ttu-id="0d428-327">[![vnořená hlavní stránka definuje obsah specifický pro stránky v oddílu Správa.](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-327">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span></span>

<span data-ttu-id="0d428-328">**Obrázek 11**: vnořená hlavní stránka definuje obsah specifický pro stránky v části Správa ([kliknutím zobrazíte obrázek v plné velikosti).](nested-master-pages-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-328">**Figure 11**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image33.png))</span></span>

## <a name="step-6-mirroring-the-master-pages-public-methods-and-properties"></a><span data-ttu-id="0d428-329">Krok 6: zrcadlení veřejných metod a vlastností hlavní stránky</span><span class="sxs-lookup"><span data-stu-id="0d428-329">Step 6: Mirroring the Master Page's Public Methods and Properties</span></span>

<span data-ttu-id="0d428-330">Odvolání, že stránky `~/Admin/AddProduct.aspx` a `~/Admin/Products.aspx` komunikují programově s hlavní stránkou: `~/Admin/AddProduct.aspx` volá metodu public `RefreshRecentProductsGrid` hlavní stránky a nastaví její vlastnost `GridMessageText`; `~/Admin/Products.aspx` má pro událost `PricesDoubled` obslužnou rutinu události.</span><span class="sxs-lookup"><span data-stu-id="0d428-330">Recall that the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages interact programmatically with the master page: `~/Admin/AddProduct.aspx` calls the master page's public `RefreshRecentProductsGrid` method and sets its `GridMessageText` property; `~/Admin/Products.aspx` has an event handler for the `PricesDoubled` event.</span></span> <span data-ttu-id="0d428-331">V předchozím kurzu jsme vytvořili abstraktní třídu `BaseMasterPage`, která definovala tyto veřejné členy.</span><span class="sxs-lookup"><span data-stu-id="0d428-331">In the preceding tutorial we created an abstract `BaseMasterPage` class that defined these public members.</span></span>

<span data-ttu-id="0d428-332">Stránky `~/Admin/AddProduct.aspx` a `~/Admin/Products.aspx` předpokládají, že jejich hlavní stránka je odvozena z třídy `BaseMasterPage`.</span><span class="sxs-lookup"><span data-stu-id="0d428-332">The `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages assume that their master page derives from the `BaseMasterPage` class.</span></span> <span data-ttu-id="0d428-333">Stránka `AdminNested.master` však v současné době rozšiřuje třídu `System.Web.UI.MasterPage`.</span><span class="sxs-lookup"><span data-stu-id="0d428-333">The `AdminNested.master` page, however, currently extends the `System.Web.UI.MasterPage` class.</span></span> <span data-ttu-id="0d428-334">V důsledku toho je při návštěvě `~/Admin/Products.aspx` vyvolána `InvalidCastException` zpráva: "" nelze přetypovat objekt typu ' ASP. admin\_adminnested\_Master ' na typ ' BaseMasterPage '.</span><span class="sxs-lookup"><span data-stu-id="0d428-334">As a result, when visiting `~/Admin/Products.aspx` an `InvalidCastException` is thrown with the message: "Unable to cast object of type 'ASP.admin\_adminnested\_master' to type 'BaseMasterPage'."</span></span>

<span data-ttu-id="0d428-335">Aby bylo možné tuto chybu opravit, potřebujeme, aby třída `AdminNested.master` kódu na pozadí rozšířila `BaseMasterPage`.</span><span class="sxs-lookup"><span data-stu-id="0d428-335">To fix this we need to have the `AdminNested.master` code-behind class extend `BaseMasterPage`.</span></span> <span data-ttu-id="0d428-336">Aktualizovat deklaraci třídy u vnořené stránky s kódem na pozadí z:</span><span class="sxs-lookup"><span data-stu-id="0d428-336">Update the nested master page's code-behind class declaration from:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample14.cs)]

<span data-ttu-id="0d428-337">Na:</span><span class="sxs-lookup"><span data-stu-id="0d428-337">To:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample15.cs)]

<span data-ttu-id="0d428-338">Ještě to neudělalo.</span><span class="sxs-lookup"><span data-stu-id="0d428-338">We're not done yet.</span></span> <span data-ttu-id="0d428-339">Vzhledem k tomu, že třída `BaseMasterPage` je abstraktní, musíme přepsat členy `abstract`, `RefreshRecentProductsGrid` a `GridMessageText`.</span><span class="sxs-lookup"><span data-stu-id="0d428-339">Because the `BaseMasterPage` class is abstract, we need to override the `abstract` members, `RefreshRecentProductsGrid` and `GridMessageText`.</span></span> <span data-ttu-id="0d428-340">Tyto členy jsou používány hlavními stránkami nejvyšší úrovně k aktualizaci jejich uživatelských rozhraní.</span><span class="sxs-lookup"><span data-stu-id="0d428-340">These members are used by the top-level master pages to update their user interfaces.</span></span> <span data-ttu-id="0d428-341">(Ve skutečnosti tyto metody používají pouze hlavní stránku `Site.master`, i když hlavní stránky nejvyšší úrovně implementují tyto metody, protože obě rozšiřuje `BaseMasterPage`.)</span><span class="sxs-lookup"><span data-stu-id="0d428-341">(Actually, only the `Site.master` master page uses these methods, although both top-level master pages implement these methods, since both extend `BaseMasterPage`.)</span></span>

<span data-ttu-id="0d428-342">I když musíme tyto členy implementovat v `AdminNested.master`, je nutné, aby všechny tyto implementace byly jednoduše volány stejným členem na hlavní stránce nejvyšší úrovně používané vnořenou stránkou předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-342">While we need to implement these members in `AdminNested.master`, all these implementations need to do is simply call the same member in the top-level master page used by the nested master page.</span></span> <span data-ttu-id="0d428-343">Například když stránka obsahu v oddílu pro správu volá metodu `RefreshRecentProductsGrid` vnořené hlavní stránky, je nutné, aby všechny vnořené hlavní stránky navolaly `RefreshRecentProductsGrid` metodu `Site.master` nebo `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-343">For instance, when a content page in the Administration section calls the nested master page's `RefreshRecentProductsGrid` method, all the nested master page needs to do is, in turn, call `Site.master` or `Alternate.master`'s `RefreshRecentProductsGrid` method.</span></span>

<span data-ttu-id="0d428-344">Chcete-li to dosáhnout, Začněte přidáním následující direktivy `@MasterType` do horní části `AdminNested.master`:</span><span class="sxs-lookup"><span data-stu-id="0d428-344">To achieve this, start by adding the following `@MasterType` directive to the top of `AdminNested.master`:</span></span>

[!code-aspx[Main](nested-master-pages-cs/samples/sample16.aspx)]

<span data-ttu-id="0d428-345">Odvolání, že direktiva `@MasterType` přidá vlastnost silného typu do třídy kódu na pozadí s názvem `Master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-345">Recall that the `@MasterType` directive adds a strongly-typed property to the code-behind class named `Master`.</span></span> <span data-ttu-id="0d428-346">Pak přepište `RefreshRecentProductsGrid` a `GridMessageText` členů a jednoduše delegovat volání odpovídající metodě `Master`:</span><span class="sxs-lookup"><span data-stu-id="0d428-346">Then override the `RefreshRecentProductsGrid` and `GridMessageText` members and simply delegate the call to the `Master`'s corresponding method:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample17.cs)]

<span data-ttu-id="0d428-347">S tímto kódem byste měli být schopni navštívit a používat stránky obsahu v části Správa.</span><span class="sxs-lookup"><span data-stu-id="0d428-347">With this code in place, you should be able to visit and use the content pages in the Administration section.</span></span> <span data-ttu-id="0d428-348">Obrázek 12 zobrazuje stránku `~/Admin/Products.aspx` při prohlížení v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="0d428-348">Figure 12 shows the `~/Admin/Products.aspx` page when viewed through a browser.</span></span> <span data-ttu-id="0d428-349">Jak vidíte, stránka obsahuje dialogové okno pokyny pro správu, které je definováno na vnořené stránce předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-349">As you can see, the page includes the Administration Instructions box, which is defined in the nested master page.</span></span>

<span data-ttu-id="0d428-350">[![stránky obsahu v části Správa zahrnuje pokyny v horní části každé stránky.](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-350">[![The Content Pages in the Administration Section Include Instructions at the Top of Each Page](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span></span>

<span data-ttu-id="0d428-351">**Obrázek 12**: stránky obsahu v části Správa obsahují pokyny v horní části každé stránky ([kliknutím zobrazíte obrázek v plné velikosti).](nested-master-pages-cs/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-351">**Figure 12**: The Content Pages in the Administration Section Include Instructions at the Top of Each Page ([Click to view full-size image](nested-master-pages-cs/_static/image36.png))</span></span>

## <a name="step-7-using-the-appropriate-top-level-master-page-at-runtime"></a><span data-ttu-id="0d428-352">Krok 7: použití příslušné hlavní stránky nejvyšší úrovně za běhu</span><span class="sxs-lookup"><span data-stu-id="0d428-352">Step 7: Using the Appropriate Top-Level Master Page at Runtime</span></span>

<span data-ttu-id="0d428-353">I když jsou všechny stránky obsahu v části Správa plně funkční, všichni používají stejnou hlavní stránku nejvyšší úrovně a ignorují stránku předlohy vybranou uživatelem na `ChooseMasterPage.aspx`.</span><span class="sxs-lookup"><span data-stu-id="0d428-353">While all the content pages in the Administration section are fully functional, they all use the same top-level master page and ignore the master page selected by the user at `ChooseMasterPage.aspx`.</span></span> <span data-ttu-id="0d428-354">Důvodem tohoto chování je skutečnost, že vnořená stránka předlohy má svou `MasterPageFile` vlastnost staticky nastavenou na `Site.master` ve své `<%@ Master %>` direktivě.</span><span class="sxs-lookup"><span data-stu-id="0d428-354">This behavior is due to the fact that the nested master page has its `MasterPageFile` property statically set to `Site.master` in its `<%@ Master %>` directive.</span></span>

<span data-ttu-id="0d428-355">Chcete-li použít hlavní stránku nejvyšší úrovně vybranou koncovým uživatelem, musíme nastavit vlastnost `MasterPageFile` `AdminNested.master`na hodnotu v proměnné relace `MyMasterPage`.</span><span class="sxs-lookup"><span data-stu-id="0d428-355">To use the top-level master page selected by the end user we need to set the `AdminNested.master`'s `MasterPageFile` property to the value in the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="0d428-356">Vzhledem k tomu, že jsme nastavili `MasterPageFile` vlastnosti stránek obsahu v `BasePage`, možná si myslíte, že by se vlastnost `MasterPageFile` vnořené stránky předlohy nastavila v `BaseMasterPage` nebo ve třídě kódu na pozadí `AdminNested.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-356">Because we set the content pages' `MasterPageFile` properties in `BasePage`, you may think that we would set the nested master page's `MasterPageFile` property in `BaseMasterPage` or in the `AdminNested.master`'s code-behind class.</span></span> <span data-ttu-id="0d428-357">To ale nebude fungovat, protože potřebujeme nastavit vlastnost `MasterPageFile` na konci předinicializační fáze.</span><span class="sxs-lookup"><span data-stu-id="0d428-357">This won't work, however, because we need to have set the `MasterPageFile` property by the end of the PreInit stage.</span></span> <span data-ttu-id="0d428-358">Nejdřívější čas, který můžeme programově rozvolat do životního cyklu stránky ze stránky předlohy, je fáze init (která nastane po fázi předinicializace).</span><span class="sxs-lookup"><span data-stu-id="0d428-358">The earliest time that we can programmatically tap into the page lifecycle from a master page is the Init stage (which occurs after the PreInit stage).</span></span>

<span data-ttu-id="0d428-359">Proto je potřeba nastavit vlastnost `MasterPageFile` vnořené hlavní stránky ze stránek obsahu.</span><span class="sxs-lookup"><span data-stu-id="0d428-359">Therefore, we need to set the nested master page's `MasterPageFile` property from the content pages.</span></span> <span data-ttu-id="0d428-360">Jediné stránky obsahu, které používají `AdminNested.master` hlavní stránku, jsou odvozeny z `AdminBasePage`.</span><span class="sxs-lookup"><span data-stu-id="0d428-360">The only content pages that use the `AdminNested.master` master page derive from `AdminBasePage`.</span></span> <span data-ttu-id="0d428-361">Proto můžeme tuto logiku vložit do tohoto umístění.</span><span class="sxs-lookup"><span data-stu-id="0d428-361">Therefore, we can put this logic there.</span></span> <span data-ttu-id="0d428-362">V kroku 5 jsme overrode metodu `SetMasterPageFile` a nastavením vlastnosti `MasterPageFile` objektu `Page` na ~/Admin/AdminNested.master.</span><span class="sxs-lookup"><span data-stu-id="0d428-362">In Step 5 we overrode the `SetMasterPageFile` method, setting the `Page` object's `MasterPageFile` property to "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="0d428-363">Aktualizujte `SetMasterPageFile` a nastavte také vlastnost `MasterPageFile` stránky předlohy na výsledek uložený v relaci:</span><span class="sxs-lookup"><span data-stu-id="0d428-363">Update `SetMasterPageFile` to also set the master page's `MasterPageFile` property to the result stored in Session:</span></span>

[!code-csharp[Main](nested-master-pages-cs/samples/sample18.cs)]

<span data-ttu-id="0d428-364">Metoda `GetMasterPageFileFromSession`, kterou jsme přidali do `BasePage` třídy v předchozím kurzu, vrátí odpovídající cestu k souboru hlavní stránky na základě hodnoty proměnné relace.</span><span class="sxs-lookup"><span data-stu-id="0d428-364">The `GetMasterPageFileFromSession` method, which we added to the `BasePage` class in the preceding tutorial, returns the appropriate master page file path based on the Session variable value.</span></span>

<span data-ttu-id="0d428-365">Při této změně se výběr hlavní stránky uživatele přenese do oddílu Správa.</span><span class="sxs-lookup"><span data-stu-id="0d428-365">With this change in place, the user's master page selection carries over to the Administration section.</span></span> <span data-ttu-id="0d428-366">Obrázek 13 znázorňuje stejnou stránku jako obrázek 12, ale poté, co uživatel změnil výběr své hlavní stránky na `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="0d428-366">Figure 13 shows the same page as Figure 12, but after the user has changed their master page selection to `Alternate.master`.</span></span>

<span data-ttu-id="0d428-367">[![stránka vnořené správy používá hlavní stránku nejvyšší úrovně vybranou uživatelem.](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-367">[![The Nested Administration Page Uses the Top-Level Master Page Selected by the User](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span></span>

<span data-ttu-id="0d428-368">**Obrázek 13**: stránka vnořené správy používá hlavní stránku nejvyšší úrovně vybranou uživatelem ([kliknutím zobrazíte obrázek v plné velikosti).](nested-master-pages-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="0d428-368">**Figure 13**: The Nested Administration Page Uses the Top-Level Master Page Selected by the User ([Click to view full-size image](nested-master-pages-cs/_static/image39.png))</span></span>

## <a name="summary"></a><span data-ttu-id="0d428-369">Přehled</span><span class="sxs-lookup"><span data-stu-id="0d428-369">Summary</span></span>

<span data-ttu-id="0d428-370">Vzhledem k tomu, jak můžou stránky obsahu navazovat vazby na stránku předlohy, je možné vytvořit vnořené stránky předlohy s vazbou podřízené stránky předlohy na nadřazenou stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="0d428-370">Much like how content pages can bind to a master page, it is possible to create nested master pages by having a child master page bind to a parent master page.</span></span> <span data-ttu-id="0d428-371">Podřízená stránka předlohy může definovat ovládací prvky obsahu pro každé z jejích nadřazených elementů ContentPlaceHolder; pak může do těchto ovládacích prvků obsahu přidat vlastní ovládací prvky ContentPlaceHolder (stejně jako jiné značky).</span><span class="sxs-lookup"><span data-stu-id="0d428-371">The child master page may define Content controls for each of its parent's ContentPlaceHolders; it can then add its own ContentPlaceHolder controls (as well as other markup) to these Content controls.</span></span> <span data-ttu-id="0d428-372">Vnořené stránky předlohy jsou poměrně užitečné ve velkých webových aplikacích, kde všechny stránky sdílí vzhled a atmosféru, ale některé oddíly lokality vyžadují jedinečné vlastní nastavení.</span><span class="sxs-lookup"><span data-stu-id="0d428-372">Nested master pages are quite useful in large web applications where all pages share an overarching look and feel, yet certain sections of the site require unique customizations.</span></span>

<span data-ttu-id="0d428-373">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="0d428-373">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="0d428-374">Další čtení</span><span class="sxs-lookup"><span data-stu-id="0d428-374">Further Reading</span></span>

<span data-ttu-id="0d428-375">Další informace o tématech popsaných v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="0d428-375">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="0d428-376">Vnořené stránky předloh ASP.NET</span><span class="sxs-lookup"><span data-stu-id="0d428-376">Nested ASP.NET Master Pages</span></span>](https://msdn.microsoft.com/library/x2b3ktt7.aspx)
- [<span data-ttu-id="0d428-377">Tipy pro vnořené stránky předloh a dobu návrhu VS 2005</span><span class="sxs-lookup"><span data-stu-id="0d428-377">Tips for Nested Master Pages and VS 2005 Design-Time</span></span>](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx)
- [<span data-ttu-id="0d428-378">A podpora vnořené stránky předlohy VS 2008</span><span class="sxs-lookup"><span data-stu-id="0d428-378">VS 2008 Nested Master Page Support</span></span>](https://weblogs.asp.net/scottgu/archive/2007/07/09/vs-2008-nested-master-page-support.aspx)

### <a name="about-the-author"></a><span data-ttu-id="0d428-379">O autorovi</span><span class="sxs-lookup"><span data-stu-id="0d428-379">About the Author</span></span>

<span data-ttu-id="0d428-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor několika stránek ASP/ASP. NET Books a zakladatel of 4GuysFromRolla.com, pracoval s webovými technologiemi microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="0d428-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="0d428-381">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="0d428-381">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="0d428-382">Nejnovější kniha je [*Sams naučit se ASP.NET 3,5 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="0d428-382">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="0d428-383">Scott se dá kontaktovat [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu na [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="0d428-383">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="0d428-384">Zvláštní díky</span><span class="sxs-lookup"><span data-stu-id="0d428-384">Special Thanks To</span></span>

<span data-ttu-id="0d428-385">Tato řada kurzů byla přezkoumána mnoha užitečnými kontrolory.</span><span class="sxs-lookup"><span data-stu-id="0d428-385">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="0d428-386">Uvažujete o přezkoumání mých nadcházejících článků na webu MSDN?</span><span class="sxs-lookup"><span data-stu-id="0d428-386">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="0d428-387">Pokud ano, vyřaďte mi řádek na [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="0d428-387">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="0d428-388">[Předchozí](specifying-the-master-page-programmatically-cs.md)
> [Další](creating-a-site-wide-layout-using-master-pages-vb.md)</span><span class="sxs-lookup"><span data-stu-id="0d428-388">[Previous](specifying-the-master-page-programmatically-cs.md)
[Next](creating-a-site-wide-layout-using-master-pages-vb.md)</span></span>
