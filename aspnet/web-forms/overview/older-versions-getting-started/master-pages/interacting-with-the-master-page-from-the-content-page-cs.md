---
uid: web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-master-page-from-the-content-page-cs
title: Interakce se stránkou předlohy ze stránky obsahu (C#) | Microsoft Docs
author: rick-anderson
description: Prověřuje způsob volání metod, nastavení vlastností atd. hlavní stránky z kódu na stránce obsahu.
ms.author: riande
ms.date: 07/11/2008
ms.assetid: 32d54638-71b2-491d-81f4-f7417a13a62f
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-master-page-from-the-content-page-cs
msc.type: authoredcontent
ms.openlocfilehash: 5ef030d3bed117e98fdd090f7c63643354b47f76
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78565637"
---
# <a name="interacting-with-the-master-page-from-the-content-page-c"></a><span data-ttu-id="3b5aa-103">Interakce stránky předlohy se stránkou obsahu (C#)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-103">Interacting with the Master Page from the Content Page (C#)</span></span>

<span data-ttu-id="3b5aa-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="3b5aa-105">[Stažení kódu](https://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_06_CS.zip) nebo [stažení PDF](https://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_06_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-105">[Download Code](https://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_06_CS.zip) or [Download PDF](https://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_06_CS.pdf)</span></span>

> <span data-ttu-id="3b5aa-106">Prověřuje způsob volání metod, nastavení vlastností atd. hlavní stránky z kódu na stránce obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-106">Examines how to call methods, set properties, etc. of the Master Page from code in the Content Page.</span></span>

## <a name="introduction"></a><span data-ttu-id="3b5aa-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="3b5aa-107">Introduction</span></span>

<span data-ttu-id="3b5aa-108">V průběhu posledních pěti kurzů jsme si vyhledali, jak vytvořit hlavní stránku, definovat oblasti obsahu, navazovat ASP.NET stránky na hlavní stránku a definovat obsah specifický pro stránku.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-108">Over the course of the past five tutorials we have looked at how to create a master page, define content regions, bind ASP.NET pages to a master page, and define page-specific content.</span></span> <span data-ttu-id="3b5aa-109">Když návštěvník požádá o konkrétní stránku obsahu, značky obsahu a stránek předlohy se ponechají za běhu a výsledkem je vykreslování sjednocené hierarchie ovládacích prvků.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-109">When a visitor requests a particular content page, the content and master pages' markup are fused at runtime, resulting in the rendering of a unified control hierarchy.</span></span> <span data-ttu-id="3b5aa-110">Proto jsme již viděli jeden ze způsobů, ve kterém může stránka předlohy a jedna z jeho stránek obsahu interagovat: stránka obsahu vypíše kód, který se má převést na ovládací prvky ContentPlaceHolder stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-110">Therefore, we have already seen one way in which the master page and one of its content pages can interact: the content page spells out the markup to transfuse into the master page's ContentPlaceHolder controls.</span></span>

<span data-ttu-id="3b5aa-111">Ještě jsme prozkoumali, jakým způsobem může stránka předlohy a stránka obsahu interagovat programově.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-111">What we have yet to examine is how the master page and content page can interact programmatically.</span></span> <span data-ttu-id="3b5aa-112">Kromě definování značek pro ovládací prvky ContentPlaceHolder stránky předlohy může stránka obsahu také přiřadit hodnoty k veřejným vlastnostem hlavní stránky a vyvolat její veřejné metody.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-112">In addition to defining the markup for the master page's ContentPlaceHolder controls, a content page can also assign values to its master page's public properties and invoke its public methods.</span></span> <span data-ttu-id="3b5aa-113">Podobně může stránka předlohy komunikovat se stránkami obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-113">Similarly, a master page may interact with its content pages.</span></span> <span data-ttu-id="3b5aa-114">I když je programová interakce mezi hlavní stránkou a stránkou obsahu méně společná než interakce mezi jejich deklarativními označeními, existuje mnoho scénářů, ve kterých je třeba takovou programovou interakci potřebovat.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-114">While programmatic interaction between a master and content page is less common than the interaction between their declarative markups, there are many scenarios where such programmatic interaction is needed.</span></span>

<span data-ttu-id="3b5aa-115">V tomto kurzu prověříme, jak může stránka s obsahem programově interagovat s hlavní stránkou. v dalším kurzu se podíváme na to, jak může stránka předlohy podobně pracovat se stránkami obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-115">In this tutorial we examine how a content page can programmatically interact with its master page; in the next tutorial we will look at how the master page can similarly interact with its content pages.</span></span>

## <a name="examples-of-programmatic-interaction-between-a-content-page-and-its-master-page"></a><span data-ttu-id="3b5aa-116">Příklady programové interakce mezi stránkou obsahu a její stránkou předlohy</span><span class="sxs-lookup"><span data-stu-id="3b5aa-116">Examples of Programmatic Interaction Between a Content Page and its Master Page</span></span>

<span data-ttu-id="3b5aa-117">V případě, že je nutné nakonfigurovat určitou oblast stránky na základě stránky, používáme ovládací prvek ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-117">When a particular region of a page needs to be configured on a page-by-page basis, we use a ContentPlaceHolder control.</span></span> <span data-ttu-id="3b5aa-118">Ale v čem se situace, kdy většina stránek potřebuje vygenerovat určitý výstup, ale malý počet stránek je potřeba přizpůsobit, aby se zobrazil něco jiného?</span><span class="sxs-lookup"><span data-stu-id="3b5aa-118">But what about situations where the majority of pages need to emit a certain output, but a small number of pages need to customize it to show something else?</span></span> <span data-ttu-id="3b5aa-119">Jeden takový příklad, který jsme prozkoumali v kurzu [*vícenásobné prvky ContentPlaceHolder a výchozí obsah*](multiple-contentplaceholders-and-default-content-cs.md) , zahrnuje zobrazení přihlašovacího rozhraní na každé stránce.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-119">One such example, which we examined in the [*Multiple ContentPlaceHolders and Default Content*](multiple-contentplaceholders-and-default-content-cs.md) tutorial, involves displaying a login interface on each page.</span></span> <span data-ttu-id="3b5aa-120">I když by většina stránek obsahovala přihlašovací rozhraní, měla by se potlačit pro několik stránky, například: hlavní přihlašovací stránka (`Login.aspx`); Stránka vytvořit účet; a další stránky, které jsou přístupné jenom pro ověřené uživatele.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-120">While most pages should include a login interface, it should be suppressed for a handful of pages, such as: the main login page (`Login.aspx`); the Create Account page; and other pages that are only accessible to authenticated users.</span></span> <span data-ttu-id="3b5aa-121">Kurz [*vícenásobné prvky ContentPlaceHolder a výchozí obsah*](multiple-contentplaceholders-and-default-content-cs.md) ukázal, jak definovat výchozí obsah pro ovládací prvek ContentPlaceHolder na stránce předlohy a jak ho přepsat na těchto stránkách, kde nebyl výchozí obsah požadovaný.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-121">The [*Multiple ContentPlaceHolders and Default Content*](multiple-contentplaceholders-and-default-content-cs.md) tutorial showed how to define the default content for a ContentPlaceHolder in the master page and then how to override it in those pages where the default content was not wanted.</span></span>

<span data-ttu-id="3b5aa-122">Další možností je vytvořit veřejnou vlastnost nebo metodu v rámci stránky předlohy, která označuje, jestli se má zobrazit nebo skrýt přihlašovací rozhraní.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-122">Another option is to create a public property or method within the master page that indicates whether to show or hide the login interface.</span></span> <span data-ttu-id="3b5aa-123">Například stránka předlohy může obsahovat veřejnou vlastnost s názvem `ShowLoginUI`, jejíž hodnota byla použita k nastavení vlastnosti `Visible` ovládacího prvku pro přihlášení na stránce předlohy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-123">For example, the master page might include a public property named `ShowLoginUI` whose value was used to set the `Visible` property of the Login control in the master page.</span></span> <span data-ttu-id="3b5aa-124">Tyto stránky obsahu, kde by mělo být potlačeno uživatelské rozhraní přihlášení, by mohlo následně programově nastavit vlastnost `ShowLoginUI` na hodnotu `false`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-124">Those content pages where the login user interface should be suppressed could then programmatically set the `ShowLoginUI` property to `false`.</span></span>

<span data-ttu-id="3b5aa-125">Nejběžnější příklad interakce obsahu a stránky předlohy se zobrazí, když se data zobrazená na stránce předlohy musí aktualizovat po zobrazení některé akce na stránce obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-125">Perhaps the most common example of content and master page interaction occurs when data displayed in the master page needs to be refreshed after some action has transpired in the content page.</span></span> <span data-ttu-id="3b5aa-126">Zvažte hlavní stránku, která obsahuje prvek GridView, který zobrazuje pět naposledy přidaných záznamů z konkrétní databázové tabulky a že jedna z jejích stránek obsahu obsahuje rozhraní pro přidávání nových záznamů do stejné tabulky.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-126">Consider a master page that includes a GridView that displays the five most recently added records from a particular database table, and that one of its content pages includes an interface for adding new records to that same table.</span></span>

<span data-ttu-id="3b5aa-127">Když uživatel navštíví stránku, aby přidal nový záznam, uvidí pět naposledy přidaných záznamů zobrazených na stránce předlohy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-127">When a user visits the page to add a new record, she sees the five most recently added records displayed in the master page.</span></span> <span data-ttu-id="3b5aa-128">Po vyplnění hodnot pro sloupce nového záznamu odešle formulář.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-128">After filling in the values for the new record's columns, she submits the form.</span></span> <span data-ttu-id="3b5aa-129">Za předpokladu, že prvek GridView na stránce předlohy má svou vlastnost `EnableViewState` nastavenou na hodnotu true (výchozí), je jeho obsah znovu načten ze stavu zobrazení a v důsledku toho se zobrazí pět stejných záznamů i v případě, že se do databáze právě přidal novější záznam.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-129">Assuming that the GridView in the master page has its `EnableViewState` property set to true (the default), its content is reloaded from view state and, consequently, the five same records are displayed even though a newer record was just added to the database.</span></span> <span data-ttu-id="3b5aa-130">To může Zaměňujte uživatele.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-130">This may confuse the user.</span></span>

> [!NOTE]
> <span data-ttu-id="3b5aa-131">I když je stav zobrazení prvku GridView zakázán tak, aby se po každém postbacku znovu váže na jeho podkladový zdroj dat, stále nezobrazuje právě přidaný záznam, protože data jsou svázána s podřízeným komponentou v životním cyklu stránky, než když je nový záznam přidán do datab ASE.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-131">Even if you disable the GridView's view state so that it rebinds to its underlying data source on every postback, it still won't show the just-added record because the data is bound to the GridView earlier in the page lifecycle than when the new record is added to the database.</span></span>

<span data-ttu-id="3b5aa-132">Chcete-li tento problém napravit, aby byl právě přidaný záznam zobrazen v prvku GridView stránky předlohy při zpětném volání, je nutné pokyn prvku GridView, aby *po* přidání nového záznamu do databáze znovu navázala jeho zdroj dat.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-132">To remedy this so that the just-added record is displayed in the master page's GridView on postback we need to instruct the GridView to rebind to its data source *after* the new record has been added to the database.</span></span> <span data-ttu-id="3b5aa-133">To vyžaduje interakci mezi stránkami obsahu a předlohou, protože rozhraní pro přidání nového záznamu (a jeho obslužných rutin událostí) jsou na stránce obsahu, ale ovládací prvek GridView, který je třeba aktualizovat, je na stránce předlohy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-133">This requires interaction between the content and master pages because the interface for adding the new record (and its event handlers) are in the content page but the GridView that needs to be refreshed is in the master page.</span></span>

<span data-ttu-id="3b5aa-134">Vzhledem k tomu, že aktualizace zobrazení hlavní stránky z obslužné rutiny události na stránce obsahu je jedním z nejběžnějších potřeb pro interakci obsahu a stránky předlohy, Podívejme se na toto téma podrobněji.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-134">Because refreshing the master page's display from an event handler in the content page is one of the most common needs for content and master page interaction, let's explore this topic in more detail.</span></span> <span data-ttu-id="3b5aa-135">Stažení pro tento kurz obsahuje databázi edice Microsoft SQL Server 2005 Express s názvem `NORTHWIND.MDF` ve složce `App_Data` webu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-135">The download for this tutorial includes a Microsoft SQL Server 2005 Express Edition database named `NORTHWIND.MDF` in the website's `App_Data` folder.</span></span> <span data-ttu-id="3b5aa-136">Databáze Northwind uchovává informace o produktech, zaměstnancích a prodejích pro fiktivní firmu, která je Northwind Traders.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-136">The Northwind database stores product, employee, and sales information for a fictitious company, Northwind Traders.</span></span>

<span data-ttu-id="3b5aa-137">Krok 1 projde zobrazením pěti naposledy přidaných produktů v prvku GridView na stránce předlohy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-137">Step 1 walks through displaying the five most recently added products in a GridView in the master page.</span></span> <span data-ttu-id="3b5aa-138">Krok 2 vytvoří stránku obsahu pro přidávání nových produktů.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-138">Step 2 creates a content page for adding new products.</span></span> <span data-ttu-id="3b5aa-139">Krok 3 se zabývá vytvořením veřejných vlastností a metod na stránce předlohy a krok 4 ukazuje, jak programově rozhraní s těmito vlastnostmi a metodami ze stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-139">Step 3 looks at how to create public properties and methods in the master page, and Step 4 illustrates how to programmatically interface with these properties and methods from the content page.</span></span>

> [!NOTE]
> <span data-ttu-id="3b5aa-140">Tento kurz se netýká konkrétních údajů o práci s daty v ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-140">This tutorial does not delve into the specifics of working with data in ASP.NET.</span></span> <span data-ttu-id="3b5aa-141">Postup pro nastavení stránky předlohy pro zobrazení dat a stránku obsahu pro vkládání dat je hotový, ale Breezy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-141">The steps for setting up the master page to display data and the content page for inserting data are complete, yet breezy.</span></span> <span data-ttu-id="3b5aa-142">Podrobnější pohled na zobrazování a vkládání dat a použití ovládacích prvků SqlDataSource a GridView najdete v části zdroje informací v části Další informace na konci tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-142">For a more in-depth look at displaying and inserting data and using the SqlDataSource and GridView controls, consult the resources in the Further Readings section at the end of this tutorial.</span></span>

## <a name="step-1-displaying-the-five-most-recently-added-products-in-the-master-page"></a><span data-ttu-id="3b5aa-143">Krok 1: zobrazení pěti naposledy přidaných produktů na stránce předlohy</span><span class="sxs-lookup"><span data-stu-id="3b5aa-143">Step 1: Displaying the Five Most Recently Added Products in the Master Page</span></span>

<span data-ttu-id="3b5aa-144">Otevřete stránku předlohy `Site.master` a přidejte popisek a ovládací prvek GridView do `leftContent` `<div>`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-144">Open the `Site.master` master page and add a Label and a GridView control to the `leftContent` `<div>`.</span></span> <span data-ttu-id="3b5aa-145">Vymažte vlastnost `Text` popisku, nastavte její vlastnost `EnableViewState` na false a vlastnost `ID` na `GridMessage`; Nastavte vlastnost `ID` prvku GridView na hodnotu `RecentProducts`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-145">Clear out the Label's `Text` property, set its `EnableViewState` property to false, and its `ID` property to `GridMessage`; set the GridView's `ID` property to `RecentProducts`.</span></span> <span data-ttu-id="3b5aa-146">Dále v Návrháři rozbalte inteligentní značku GridView a vyberte, aby se naváže k novému zdroji dat.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-146">Next, from the Designer, expand the GridView's smart tag and choose to bind it to a new data source.</span></span> <span data-ttu-id="3b5aa-147">Spustí se Průvodce konfigurací zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-147">This launches the Data Source Configuration wizard.</span></span> <span data-ttu-id="3b5aa-148">Vzhledem k tomu, že databáze Northwind ve složce `App_Data` je databáze Microsoft SQL Server, zvolte možnost vytvořit SqlDataSource výběrem (viz obrázek 1); Pojmenujte `RecentProductsDataSource`SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-148">Because the Northwind database in the `App_Data` folder is a Microsoft SQL Server database, choose to create a SqlDataSource by selecting (see Figure 1); name the SqlDataSource `RecentProductsDataSource`.</span></span>

<span data-ttu-id="3b5aa-149">[![vazby prvku GridView k ovládacímu prvku SqlDataSource s názvem RecentProductsDataSource](interacting-with-the-master-page-from-the-content-page-cs/_static/image2.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-149">[![Bind the GridView to a SqlDataSource Control Named RecentProductsDataSource](interacting-with-the-master-page-from-the-content-page-cs/_static/image2.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image1.png)</span></span>

<span data-ttu-id="3b5aa-150">**Obrázek 01**: Svázání prvku GridView s ovládacím prvkem SqlDataSource s názvem `RecentProductsDataSource` ([kliknutím zobrazíte obrázek v plné velikosti](interacting-with-the-master-page-from-the-content-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="3b5aa-150">**Figure 01**: Bind the GridView to a SqlDataSource Control Named `RecentProductsDataSource` ([Click to view full-size image](interacting-with-the-master-page-from-the-content-page-cs/_static/image3.png))</span></span>

<span data-ttu-id="3b5aa-151">V dalším kroku se požádáme o určení databáze, ke které se chcete připojit.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-151">The next step asks us to specify what database to connect to.</span></span> <span data-ttu-id="3b5aa-152">V rozevíracím seznamu vyberte soubor databáze `NORTHWIND.MDF` a klikněte na další.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-152">Choose the `NORTHWIND.MDF` database file from the drop-down list and click Next.</span></span> <span data-ttu-id="3b5aa-153">Vzhledem k tomu, že se jedná o první použití této databáze, průvodce nabídne uložení připojovacího řetězce v `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-153">Because this is the first time we've used this database, the wizard will offer to store the connection string in `Web.config`.</span></span> <span data-ttu-id="3b5aa-154">Je potřeba, aby byl připojovací řetězec uložený pomocí názvu `NorthwindConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-154">Have it store the connection string using the name `NorthwindConnectionString`.</span></span>

<span data-ttu-id="3b5aa-155">[![připojení k databázi Northwind](interacting-with-the-master-page-from-the-content-page-cs/_static/image5.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-155">[![Connect to the Northwind Database](interacting-with-the-master-page-from-the-content-page-cs/_static/image5.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image4.png)</span></span>

<span data-ttu-id="3b5aa-156">**Obrázek 02**: připojení k databázi Northwind ([kliknutím zobrazíte obrázek v plné velikosti](interacting-with-the-master-page-from-the-content-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="3b5aa-156">**Figure 02**: Connect to the Northwind Database  ([Click to view full-size image](interacting-with-the-master-page-from-the-content-page-cs/_static/image6.png))</span></span>

<span data-ttu-id="3b5aa-157">Průvodce konfigurací zdroje dat poskytuje dva způsoby, kterými můžeme zadat dotaz použitý k načtení dat:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-157">The Configure Data Source wizard provides two means by which we can specify the query used to retrieve data:</span></span>

- <span data-ttu-id="3b5aa-158">Zadáním vlastního příkazu SQL nebo uložené procedury nebo</span><span class="sxs-lookup"><span data-stu-id="3b5aa-158">By specifying a custom SQL statement or stored procedure, or</span></span>
- <span data-ttu-id="3b5aa-159">Vyzvednutím tabulky nebo zobrazení a zadáním sloupců, které se mají vrátit</span><span class="sxs-lookup"><span data-stu-id="3b5aa-159">By picking a table or view and then specifying the columns to return</span></span>

<span data-ttu-id="3b5aa-160">Vzhledem k tomu, že chceme vracet jenom pět naposledy přidaných produktů, musíme zadat vlastní příkaz SQL.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-160">Because we want to return just the five most recently added products, we need to specify a custom SQL statement.</span></span> <span data-ttu-id="3b5aa-161">Použijte následující dotaz SELECT:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-161">Use the following SELECT query:</span></span>

[!code-sql[Main](interacting-with-the-master-page-from-the-content-page-cs/samples/sample1.sql)]

<span data-ttu-id="3b5aa-162">Klíčové slovo `TOP 5` vrátí pouze prvních pět záznamů z dotazu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-162">The `TOP 5` keyword returns only the first five records from the query.</span></span> <span data-ttu-id="3b5aa-163">Primární klíč `Products` tabulky `ProductID`je `IDENTITY` sloupec, který nám zaručuje, že každý nový produkt přidaný do tabulky bude mít větší hodnotu než předchozí položka.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-163">The `Products` table's primary key, `ProductID`, is an `IDENTITY` column, which assures us that each new product added to the table will have a larger value than the previous entry.</span></span> <span data-ttu-id="3b5aa-164">Proto řazení výsledků podle `ProductID` v sestupném pořadí vrátí produkty počínaje naposledy vytvořenými.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-164">Therefore, sorting the results by `ProductID` in descending order returns the products starting with the most recently created ones.</span></span>

<span data-ttu-id="3b5aa-165">[![vrátí pět naposledy přidaných produktů.](interacting-with-the-master-page-from-the-content-page-cs/_static/image8.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-165">[![Return the Five Most Recently Added Products](interacting-with-the-master-page-from-the-content-page-cs/_static/image8.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image7.png)</span></span>

<span data-ttu-id="3b5aa-166">**Obrázek 03**: vrátí pět naposledy přidaných produktů ([kliknutím zobrazíte obrázek v plné velikosti](interacting-with-the-master-page-from-the-content-page-cs/_static/image9.png)).</span><span class="sxs-lookup"><span data-stu-id="3b5aa-166">**Figure 03**: Return the Five Most Recently Added Products  ([Click to view full-size image](interacting-with-the-master-page-from-the-content-page-cs/_static/image9.png))</span></span>

<span data-ttu-id="3b5aa-167">Po dokončení Průvodce aplikace Visual Studio vygeneruje dvě BoundFields pro prvek GridView pro zobrazení `ProductName` a `UnitPrice` polí vrácených z databáze.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-167">After completing the wizard, Visual Studio generates two BoundFields for the GridView to display the `ProductName` and `UnitPrice` fields returned from the database.</span></span> <span data-ttu-id="3b5aa-168">V tuto chvíli by deklarativní označení stránky předlohy mělo zahrnovat označení podobné následujícímu:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-168">At this point your master page's declarative markup should include markup similar to the following:</span></span>

[!code-aspx[Main](interacting-with-the-master-page-from-the-content-page-cs/samples/sample2.aspx)]

<span data-ttu-id="3b5aa-169">Jak vidíte, značka obsahuje: ovládací prvek web popisku (`GridMessage`); Prvek GridView `RecentProducts`se dvěma BoundFieldsmi; a ovládací prvek SqlDataSource, který vrátí pět naposledy přidaných produktů.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-169">As you can see, the markup contains: the Label Web control (`GridMessage`); the GridView `RecentProducts`, with two BoundFields; and a SqlDataSource control that returns the five most recently added products.</span></span>

<span data-ttu-id="3b5aa-170">Pomocí tohoto prvku GridView vytvořeného s nakonfigurovaným ovládacím prvkem SqlDataSource navštivte web prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-170">With this GridView created and its SqlDataSource control configured, visit the website through a browser.</span></span> <span data-ttu-id="3b5aa-171">Jak ukazuje obrázek 4, v levém dolním rohu se zobrazí mřížka se seznamem pěti naposledy přidaných produktů.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-171">As Figure 4 shows, you will see a grid in the lower left corner that lists the five most recently added products.</span></span>

<span data-ttu-id="3b5aa-172">[![zobrazí prvek GridView pět naposledy přidaných produktů.](interacting-with-the-master-page-from-the-content-page-cs/_static/image11.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-172">[![The GridView Displays the Five Most Recently Added Products](interacting-with-the-master-page-from-the-content-page-cs/_static/image11.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image10.png)</span></span>

<span data-ttu-id="3b5aa-173">**Obrázek 04**: v prvku GridView se zobrazí pět naposledy přidaných produktů ([kliknutím zobrazíte obrázek v plné velikosti).](interacting-with-the-master-page-from-the-content-page-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-173">**Figure 04**: The GridView Displays the Five Most Recently Added Products ([Click to view full-size image](interacting-with-the-master-page-from-the-content-page-cs/_static/image12.png))</span></span>

> [!NOTE]
> <span data-ttu-id="3b5aa-174">Klidně můžete vyčistit vzhled prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-174">Feel free to clean up the appearance of the GridView.</span></span> <span data-ttu-id="3b5aa-175">Mezi návrhy patří formátování zobrazené `UnitPrice` hodnoty jako měny a použití barev a písem pozadí ke zlepšení vzhledu mřížky.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-175">Some suggestions include formatting the displayed `UnitPrice` value as a currency and using background colors and fonts to improve the grid's appearance.</span></span>

## <a name="step-2-creating-a-content-page-to-add-new-products"></a><span data-ttu-id="3b5aa-176">Krok 2: Vytvoření stránky obsahu pro přidání nových produktů</span><span class="sxs-lookup"><span data-stu-id="3b5aa-176">Step 2: Creating a Content Page to Add New Products</span></span>

<span data-ttu-id="3b5aa-177">Naším dalším úkolem je vytvořit stránku obsahu, ze které může uživatel přidat nový produkt do tabulky `Products`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-177">Our next task is to create a content page from which a user can add a new product to the `Products` table.</span></span> <span data-ttu-id="3b5aa-178">Přidejte novou stránku obsahu do složky `Admin` s názvem `AddProduct.aspx`a ujistěte se, že ji svážete se stránkou předlohy `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-178">Add a new content page to the `Admin` folder named `AddProduct.aspx`, making sure to bind it to the `Site.master` master page.</span></span> <span data-ttu-id="3b5aa-179">Obrázek 5 ukazuje Průzkumník řešení po přidání této stránky na web.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-179">Figure 5 shows the Solution Explorer after this page has been added to the website.</span></span>

<span data-ttu-id="3b5aa-180">[![přidat novou stránku ASP.NET do složky pro správu](interacting-with-the-master-page-from-the-content-page-cs/_static/image14.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-180">[![Add a New ASP.NET Page to the Admin Folder](interacting-with-the-master-page-from-the-content-page-cs/_static/image14.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image13.png)</span></span>

<span data-ttu-id="3b5aa-181">**Obrázek 05**: Přidání nové stránky ASP.NET do složky `Admin` ([kliknutím zobrazíte obrázek v plné velikosti](interacting-with-the-master-page-from-the-content-page-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="3b5aa-181">**Figure 05**: Add a New ASP.NET Page to the `Admin` Folder([Click to view full-size image](interacting-with-the-master-page-from-the-content-page-cs/_static/image15.png))</span></span>

<span data-ttu-id="3b5aa-182">Nahlaste se v kurzu [*zadání nadpisu, meta značek a dalších záhlaví HTML v kurzu hlavní stránky*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) jsme vytvořili vlastní třídu základní stránky s názvem `BasePage`, která vygenerovala název stránky, pokud nebyla explicitně nastavena.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-182">Recall that in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial we created a custom base page class named `BasePage` that generated the page's title if it was not explicitly set.</span></span> <span data-ttu-id="3b5aa-183">Přejít na třídu kódu na pozadí `AddProduct.aspx` stránky a nechat ji odvozovat z `BasePage` (místo z `System.Web.UI.Page`).</span><span class="sxs-lookup"><span data-stu-id="3b5aa-183">Go to the `AddProduct.aspx` page's code-behind class and have it derive from `BasePage` (instead of from `System.Web.UI.Page`).</span></span>

<span data-ttu-id="3b5aa-184">Nakonec aktualizujte soubor `Web.sitemap` tak, aby obsahoval položku pro tuto lekci.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-184">Finally, update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="3b5aa-185">Přidejte následující kód pod `<siteMapNode>` v lekci pro pojmenování ID ovládacího prvku lekce:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-185">Add the following markup beneath the `<siteMapNode>` for the Control ID Naming Issues lesson:</span></span>

[!code-xml[Main](interacting-with-the-master-page-from-the-content-page-cs/samples/sample3.xml)]

<span data-ttu-id="3b5aa-186">Jak je znázorněno na obrázku 6, přidání tohoto `<siteMapNode>` elementu se projeví v seznamu lekcí.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-186">As shown in Figure 6, the addition of this `<siteMapNode>` element is reflected in the Lessons list.</span></span>

<span data-ttu-id="3b5aa-187">Vraťte se na `AddProduct.aspx`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-187">Return to `AddProduct.aspx`.</span></span> <span data-ttu-id="3b5aa-188">V ovládacím prvku Content for `MainContent` ContentPlaceHolder přidejte ovládací prvek DetailsView a pojmenujte ho `NewProduct`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-188">In the Content control for the `MainContent` ContentPlaceHolder, add a DetailsView control and name it `NewProduct`.</span></span> <span data-ttu-id="3b5aa-189">Připojte prvek DetailsView k novému ovládacímu prvku SqlDataSource s názvem `NewProductDataSource`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-189">Bind the DetailsView to a new SqlDataSource control named `NewProductDataSource`.</span></span> <span data-ttu-id="3b5aa-190">Podobně jako u SqlDataSource v kroku 1 nakonfigurujte Průvodce tak, aby používal databázi Northwind a zvolili možnost zadat vlastní příkaz SQL.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-190">Like with the SqlDataSource in Step 1, configure the wizard so that it uses the Northwind database and choose to specify a custom SQL statement.</span></span> <span data-ttu-id="3b5aa-191">Vzhledem k tomu, že ovládací prvek DetailsView bude použit k přidání položek do databáze, musíme zadat jak příkaz `SELECT`, tak příkaz `INSERT`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-191">Because the DetailsView will be used to add items to the database, we need to specify both a `SELECT` statement and an `INSERT` statement.</span></span> <span data-ttu-id="3b5aa-192">Použijte následující `SELECT` dotaz:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-192">Use the following `SELECT` query:</span></span>

[!code-sql[Main](interacting-with-the-master-page-from-the-content-page-cs/samples/sample4.sql)]

<span data-ttu-id="3b5aa-193">Pak na kartě Vložení přidejte následující příkaz `INSERT`:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-193">Then, from the INSERT tab, add the following `INSERT` statement:</span></span>

[!code-sql[Main](interacting-with-the-master-page-from-the-content-page-cs/samples/sample5.sql)]

<span data-ttu-id="3b5aa-194">Po dokončení průvodce přejít na inteligentní značku ovládacího prvku DetailsView a zaškrtněte políčko Povolit vkládání.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-194">After completing the wizard go to the DetailsView's smart tag and check the "Enable Inserting" checkbox.</span></span> <span data-ttu-id="3b5aa-195">Tím přidáte CommandField do prvku DetailsView s vlastností `ShowInsertButton` nastavenou na hodnotu true.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-195">This adds a CommandField to the DetailsView with its `ShowInsertButton` property set to true.</span></span> <span data-ttu-id="3b5aa-196">Vzhledem k tomu, že tento prvek DetailsView bude použit výhradně pro vkládání dat, nastavte vlastnost `DefaultMode` ovládacího prvku DetailsView na hodnotu `Insert`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-196">Because this DetailsView will be used solely for inserting data, set the DetailsView's `DefaultMode` property to `Insert`.</span></span>

<span data-ttu-id="3b5aa-197">A je to!</span><span class="sxs-lookup"><span data-stu-id="3b5aa-197">That's all there is to it!</span></span> <span data-ttu-id="3b5aa-198">Pojďme tuto stránku otestovat.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-198">Let's test this page.</span></span> <span data-ttu-id="3b5aa-199">Navštivte `AddProduct.aspx` v prohlížeči, zadejte název a cenu (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="3b5aa-199">Visit `AddProduct.aspx` through a browser, enter a name and price (see Figure 6).</span></span>

<span data-ttu-id="3b5aa-200">[![přidat do databáze nový produkt](interacting-with-the-master-page-from-the-content-page-cs/_static/image17.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-200">[![Add a New Product to the Database](interacting-with-the-master-page-from-the-content-page-cs/_static/image17.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image16.png)</span></span>

<span data-ttu-id="3b5aa-201">**Obrázek 6**: Přidání nového produktu do databáze ([kliknutím zobrazíte obrázek v plné velikosti](interacting-with-the-master-page-from-the-content-page-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="3b5aa-201">**Figure 06**: Add a New Product to the Database  ([Click to view full-size image](interacting-with-the-master-page-from-the-content-page-cs/_static/image18.png))</span></span>

<span data-ttu-id="3b5aa-202">Po zadání názvu a ceny nového produktu klikněte na tlačítko Vložit.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-202">After typing in the name and price for your new product, click the Insert button.</span></span> <span data-ttu-id="3b5aa-203">Způsobí to, že formulář bude převolán.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-203">This causes the form to postback.</span></span> <span data-ttu-id="3b5aa-204">Při zpětném volání je proveden příkaz `INSERT` ovládacího prvku SqlDataSource; jeho dva parametry jsou naplněny hodnotami zadanými uživatelem do dvou ovládacích prvků TextBox ovládacího prvku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-204">On postback, the SqlDataSource control's `INSERT` statement is executed; its two parameters are populated with the user-entered values in the DetailsView's two TextBox controls.</span></span> <span data-ttu-id="3b5aa-205">Bohužel není k dispozici žádná vizuální zpětná vazba, na kterou došlo k vložení.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-205">Unfortunately, there is no visual feedback that an insert has occurred.</span></span> <span data-ttu-id="3b5aa-206">Je vhodné, aby se zobrazila zpráva s potvrzením, že byl přidán nový záznam.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-206">It would be nice to have a message displayed, confirming that a new record has been added.</span></span> <span data-ttu-id="3b5aa-207">Tuto funkci mám jako cvičení pro čtenáře.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-207">I leave this as an exercise for the reader.</span></span> <span data-ttu-id="3b5aa-208">Po přidání nového záznamu z prvku DetailsView se navíc v prvku GridView na stránce předlohy stále zobrazuje stejný počet pěti záznamů jako předtím; nezahrnuje právě přidaný záznam.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-208">Also, after adding a new record from the DetailsView the GridView in the master page still shows the same five records as before; it does not include the just-added record.</span></span> <span data-ttu-id="3b5aa-209">Podíváme se, jak tento problém vyřešit v nadcházejících krocích.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-209">We'll examine how to remedy this in the upcoming steps.</span></span>

> [!NOTE]
> <span data-ttu-id="3b5aa-210">Kromě přidání nějaké formy vizuální zpětné vazby, že vložení bylo úspěšné, doporučujeme také aktualizovat rozhraní pro vložení ovládacího prvku DetailsView, aby zahrnovalo ověřování.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-210">In addition to adding some form of visual feedback that the insert has succeeded, I'd encourage you to also update the DetailsView's inserting interface to include validation.</span></span> <span data-ttu-id="3b5aa-211">V současné době neexistuje žádné ověření.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-211">Currently, there is no validation.</span></span> <span data-ttu-id="3b5aa-212">Pokud uživatel zadá v poli `UnitPrice` neplatnou hodnotu, například "moc nákladný", bude při zpětném volání vyvolána výjimka, když se systém pokusí tento řetězec převést na desetinné číslo.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-212">If a user enters an invalid value for the `UnitPrice` field, such as "Too expensive," an exception will be thrown on postback when the system attempts to convert that string into a decimal.</span></span> <span data-ttu-id="3b5aa-213">Další informace o přizpůsobení rozhraní pro vložení najdete v [kurzu *přizpůsobení rozhraní pro úpravu dat* ](../../data-access/editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) ze stránky [práce s datovou řadou kurzů](../../data-access/index.md).</span><span class="sxs-lookup"><span data-stu-id="3b5aa-213">For more information on customizing the inserting interface, refer to the [*Customizing the Data Modification Interface* tutorial](../../data-access/editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) from my [Working with Data tutorial series](../../data-access/index.md).</span></span>

## <a name="step-3-creating-public-properties-and-methods-in-the-master-page"></a><span data-ttu-id="3b5aa-214">Krok 3: vytvoření veřejných vlastností a metod na stránce předlohy</span><span class="sxs-lookup"><span data-stu-id="3b5aa-214">Step 3: Creating Public Properties and Methods in the Master Page</span></span>

<span data-ttu-id="3b5aa-215">V kroku 1 jsme přidali webové ovládací prvky popisek s názvem `GridMessage` nad prvek GridView na stránce předlohy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-215">In Step 1 we added a Label Web control named `GridMessage` above the GridView in the master page.</span></span> <span data-ttu-id="3b5aa-216">Tato jmenovka slouží k volitelnému zobrazení zprávy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-216">This Label is intended to optionally display a message.</span></span> <span data-ttu-id="3b5aa-217">Například po přidání nového záznamu do tabulky `Products` můžeme zobrazit zprávu, že se do databáze přidala zpráva "*ProductName* ".</span><span class="sxs-lookup"><span data-stu-id="3b5aa-217">For example, after adding a new record to the `Products` table, we might want to show a message that reads: "*ProductName* has been added to the database."</span></span> <span data-ttu-id="3b5aa-218">Místo pevného kódu textu pro tento popisek na stránce předlohy můžeme chtít, aby byla zpráva přizpůsobitelná na stránce obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-218">Rather than hard-code the text for this Label in the master page, we might want the message to be customizable by the content page.</span></span>

<span data-ttu-id="3b5aa-219">Vzhledem k tomu, že ovládací prvek popisek je implementován jako chráněná členská proměnná v rámci hlavní stránky, nelze k němu získat přímý pøístup ze stránek obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-219">Because the Label control is implemented as a protected member variable within the master page it cannot be accessed directly from content pages.</span></span> <span data-ttu-id="3b5aa-220">Aby bylo možné pracovat s popiskem na stránce předlohy na stránce obsahu (nebo v takovém případě libovolný webový ovládací prvek na stránce předlohy), musíme vytvořit veřejnou vlastnost na stránce předlohy, která zveřejňuje webový ovládací prvek nebo slouží jako proxy, pomocí kterého může být jedna z jeho vlastností.  souborům.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-220">In order to work with the Label within a master page from the content page (or, for that matter, any Web control in the master page) we need to create a public property in the master page that exposes the Web control or serves as a proxy by which one of its properties can be accessed.</span></span> <span data-ttu-id="3b5aa-221">Přidejte následující syntax do třídy kódu na pozadí hlavní stránky a zpřístupněte vlastnost `Text` popisku:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-221">Add the following syntax to the master page's code-behind class to expose the Label's `Text` property:</span></span>

[!code-csharp[Main](interacting-with-the-master-page-from-the-content-page-cs/samples/sample6.cs)]

<span data-ttu-id="3b5aa-222">Při přidání nového záznamu do tabulky `Products` ze stránky obsahu musí `RecentProducts` GridView na stránce předlohy znovu navazovat vazby na svůj podkladový zdroj dat.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-222">When a new record is added to the `Products` table from a content page the `RecentProducts` GridView in the master page needs to rebind to its underlying data source.</span></span> <span data-ttu-id="3b5aa-223">Chcete-li znovu navazovat vazby ovládacího prvku GridView, volejte metodu `DataBind`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-223">To rebind the GridView call its `DataBind` method.</span></span> <span data-ttu-id="3b5aa-224">Vzhledem k tomu, že prvek GridView na stránce předlohy není programově přístupný pro stránky obsahu, musíme na stránce předlohy vytvořit veřejnou metodu, která při volání znovu naváže data na prvek GridView.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-224">Because the GridView in the master page is not programmatically accessible to the content pages, we need to create a public method in the master page that, when called, rebinds the data to the GridView.</span></span> <span data-ttu-id="3b5aa-225">Přidejte následující metodu do třídy kódu na pozadí hlavní stránky:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-225">Add the following method to the master page's code-behind class:</span></span>

[!code-csharp[Main](interacting-with-the-master-page-from-the-content-page-cs/samples/sample7.cs)]

<span data-ttu-id="3b5aa-226">Pomocí vlastnosti `GridMessageText` a metody `RefreshRecentProductsGrid` na místě může kterákoli stránka obsahu programově nastavit nebo přečíst hodnotu vlastnosti `Text` popisku `GridMessage` nebo převážete data na `RecentProducts` GridView.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-226">With the `GridMessageText` property and `RefreshRecentProductsGrid` method in place, any content page can programmatically set or read the value of the `GridMessage` Label's `Text` property or rebind the data to the `RecentProducts` GridView.</span></span> <span data-ttu-id="3b5aa-227">Krok 4 kontroluje, jak přistupovat k veřejným vlastnostem a metodám hlavní stránky ze stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-227">Step 4 examines how to access the master page's public properties and methods from a content page.</span></span>

> [!NOTE]
> <span data-ttu-id="3b5aa-228">Nezapomeňte označit vlastnosti a metody hlavní stránky jako `public`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-228">Don't forget to mark the master page's properties and methods as `public`.</span></span> <span data-ttu-id="3b5aa-229">Pokud tyto vlastnosti a metody výslovně nepovažujete za `public`, nebudou dostupné ze stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-229">If you do not explicitly denote these properties and methods as `public`, they will not be accessible from the content page.</span></span>

## <a name="step-4-calling-the-master-pages-public-members-from-a-content-page"></a><span data-ttu-id="3b5aa-230">Krok 4: volání veřejných členů stránky předlohy ze stránky obsahu</span><span class="sxs-lookup"><span data-stu-id="3b5aa-230">Step 4: Calling the Master Page's Public Members from a Content Page</span></span>

<span data-ttu-id="3b5aa-231">Teď, když má hlavní stránka potřebné veřejné vlastnosti a metody, jsme připraveni tyto vlastnosti a metody vyvolat ze stránky `AddProduct.aspx` obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-231">Now that the master page has the necessary public properties and methods, we're ready to invoke these properties and methods from the `AddProduct.aspx` content page.</span></span> <span data-ttu-id="3b5aa-232">Konkrétně je potřeba nastavit vlastnost `GridMessageText` hlavní stránky a volat metodu `RefreshRecentProductsGrid` po přidání nového produktu do databáze.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-232">Specifically, we need to set the master page's `GridMessageText` property and call its `RefreshRecentProductsGrid` method after the new product has been added to the database.</span></span> <span data-ttu-id="3b5aa-233">Všechny webové ovládací prvky ASP.NET data vybírají události hned před a po dokončení různých úloh, což usnadňuje vývojářům stránky provést některé programové akce před nebo po úkolu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-233">All the ASP.NET data Web controls fire events immediately before and after completing various tasks, which make it easy for page developers to take some programmatic action either before or after the task.</span></span> <span data-ttu-id="3b5aa-234">Například když koncový uživatel klikne na tlačítko pro vložení ovládacího prvku DetailsView, vyvolá se při postbacku událost `ItemInserting` před začátkem vkládání pracovního postupu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-234">For example, when the end user clicks the DetailsView's Insert button, on postback the DetailsView raises its `ItemInserting` event before beginning the inserting workflow.</span></span> <span data-ttu-id="3b5aa-235">Pak vloží záznam do databáze.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-235">It then inserts the record into the database.</span></span> <span data-ttu-id="3b5aa-236">Po tom ovládací prvek DetailsView vyvolá událost `ItemInserted`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-236">Following that, the DetailsView raises its `ItemInserted` event.</span></span> <span data-ttu-id="3b5aa-237">Proto aby bylo možné pracovat se stránkou předlohy po přidání nového produktu, vytvořte obslužnou rutinu události pro událost `ItemInserted` ovládacího prvku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-237">Therefore, in order to work with the master page after the new product has been added, create an event handler for the DetailsView's `ItemInserted` event.</span></span>

<span data-ttu-id="3b5aa-238">Existují dva způsoby, jak může stránka obsahu programově přizpůsobovat pomocí své hlavní stránky:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-238">There are two ways that a content page can programmatically interface with its master page:</span></span>

- <span data-ttu-id="3b5aa-239">Pomocí vlastnosti `Page.Master`, která vrátí odkaz na stránku předlohy, který bude mít volný typ, nebo</span><span class="sxs-lookup"><span data-stu-id="3b5aa-239">Using the `Page.Master` property, which returns a loosely-typed reference to the master page, or</span></span>
- <span data-ttu-id="3b5aa-240">Zadejte typ stránky předlohy nebo cestu k souboru pomocí direktivy `@MasterType`. Tím se automaticky přidá vlastnost silného typu na stránku s názvem `Master`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-240">Specify the page's master page type or file path via a `@MasterType` directive; this automatically adds a strongly-typed property to the page named `Master`.</span></span>

<span data-ttu-id="3b5aa-241">Pojďme se podívat na oba přístupy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-241">Let's examine both approaches.</span></span>

### <a name="using-the-loosely-typedpagemasterproperty"></a><span data-ttu-id="3b5aa-242">Použití vlastnosti`Page.Master`volného typu</span><span class="sxs-lookup"><span data-stu-id="3b5aa-242">Using the Loosely-Typed`Page.Master`Property</span></span>

<span data-ttu-id="3b5aa-243">Všechny webové stránky ASP.NET musí být odvozeny od třídy `Page`, která je umístěna v oboru názvů `System.Web.UI`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-243">All ASP.NET web pages must derive from the `Page` class, which is located in the `System.Web.UI` namespace.</span></span> <span data-ttu-id="3b5aa-244">Třída `Page` obsahuje [vlastnost`Master`](https://msdn.microsoft.com/library/system.web.ui.page.master.aspx) , která vrací odkaz na stránku předlohy stránky.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-244">The `Page` class includes a [`Master` property](https://msdn.microsoft.com/library/system.web.ui.page.master.aspx) that returns a reference to the page's master page.</span></span> <span data-ttu-id="3b5aa-245">Pokud stránka nemá stránku předlohy `Master` vrátí `null`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-245">If the page does not have a master page `Master` returns `null`.</span></span>

<span data-ttu-id="3b5aa-246">Vlastnost `Master` vrací objekt typu [`MasterPage`](https://msdn.microsoft.com/library/system.web.ui.masterpage.aspx) (také umístěný v `System.Web.UI`m oboru názvů), což je základní typ, ze kterého jsou odvozeny všechny stránky předlohy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-246">The `Master` property returns an object of type [`MasterPage`](https://msdn.microsoft.com/library/system.web.ui.masterpage.aspx) (also located in the `System.Web.UI` namespace) which is the base type from which all master pages derive from.</span></span> <span data-ttu-id="3b5aa-247">Proto je nutné použít veřejné vlastnosti nebo metody definované na stránce předlohy našeho webu, je třeba přetypovat objekt `MasterPage` vrácený z vlastnosti `Master` na příslušný typ.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-247">Therefore, to use public properties or methods defined in our website's master page we must cast the `MasterPage` object returned from the `Master` property to the appropriate type.</span></span> <span data-ttu-id="3b5aa-248">Vzhledem k tomu, že jsme jmenovali náš soubor hlavní stránky `Site.master`, třída kódu na pozadí byla pojmenována `Site`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-248">Because we named our master page file `Site.master`, the code-behind class was named `Site`.</span></span> <span data-ttu-id="3b5aa-249">Proto následující kód přetypování vlastnost `Page.Master` do instance třídy site.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-249">Therefore, the following code casts the `Page.Master` property to an instance of the Site class.</span></span>

[!code-csharp[Main](interacting-with-the-master-page-from-the-content-page-cs/samples/sample8.cs)]

<span data-ttu-id="3b5aa-250">Teď, když jsme převedli `Page.Master` vlastnost s volným typem na `Site` typ, můžeme odkazovat na vlastnosti a metody specifické pro web.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-250">Now that we have casted the loosely-typed `Page.Master` property to the `Site` type we can reference the properties and methods specific to Site.</span></span> <span data-ttu-id="3b5aa-251">Jak ukazuje obrázek 7, `GridMessageText` veřejné vlastnosti se zobrazí v rozevíracím seznamu technologie IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-251">As Figure 7 shows, the public property `GridMessageText` appears in the IntelliSense drop-down.</span></span>

<span data-ttu-id="3b5aa-252">[![IntelliSense zobrazuje naše veřejné vlastnosti a metody hlavní stránky.](interacting-with-the-master-page-from-the-content-page-cs/_static/image20.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-252">[![IntelliSense Shows our Master Page's Public Properties and Methods](interacting-with-the-master-page-from-the-content-page-cs/_static/image20.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image19.png)</span></span>

<span data-ttu-id="3b5aa-253">**Obrázek 07**: IntelliSense zobrazuje naše veřejné vlastnosti a metody hlavní stránky ([kliknutím zobrazíte obrázek v plné velikosti).](interacting-with-the-master-page-from-the-content-page-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-253">**Figure 07**: IntelliSense Shows our Master Page's Public Properties and Methods  ([Click to view full-size image](interacting-with-the-master-page-from-the-content-page-cs/_static/image21.png))</span></span>

> [!NOTE]
> <span data-ttu-id="3b5aa-254">Pokud jste najmenovali soubor hlavní stránky `MasterPage.master` pak je název třídy kódu na pozadí hlavní stránky `MasterPage`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-254">If you named your master page file `MasterPage.master` then the master page's code-behind class name is `MasterPage`.</span></span> <span data-ttu-id="3b5aa-255">To může vést k dvojznačnému kódu při přetypování z typu `System.Web.UI.MasterPage` do vaší `MasterPage` třídy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-255">This can lead to ambiguous code when casting from the type `System.Web.UI.MasterPage` to your `MasterPage` class.</span></span> <span data-ttu-id="3b5aa-256">V krátkém případě je nutné plně kvalifikovat typ, na který předáváte, což může být trochu obtížné při použití modelu projektu webu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-256">In short, you need to fully qualify the type you are casting to, which can be a little tricky when using the Web Site Project model.</span></span> <span data-ttu-id="3b5aa-257">Můj návrh by buď měl být při vytváření hlavní stránky pojmenován na jinou hodnotu než `MasterPage.master` nebo ještě lepší, a to tak, že se na stránku předlohy vytvoří odkaz silně typovaného typu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-257">My suggestion would be to either make sure that when you create your master page you name it something other than `MasterPage.master` or, even better, create a strongly-typed reference to the master page.</span></span>

### <a name="creating-a-strongly-typed-reference-with-themastertypedirective"></a><span data-ttu-id="3b5aa-258">Vytvoření odkazu silného typu pomocí direktivy`@MasterType`</span><span class="sxs-lookup"><span data-stu-id="3b5aa-258">Creating a Strongly-Typed Reference with the`@MasterType`Directive</span></span>

<span data-ttu-id="3b5aa-259">Pokud se vám podíváte na pečlivě, vidíte, že třída kódu na pozadí stránky ASP.NET je částečná třída (Všimněte si klíčového slova `partial` v definici třídy).</span><span class="sxs-lookup"><span data-stu-id="3b5aa-259">If you look closely you can see that an ASP.NET page's code-behind class is a partial class (note the `partial` keyword in the class definition).</span></span> <span data-ttu-id="3b5aa-260">Částečné třídy byly představeny C# v a Visual Basic with.NET Framework 2,0 a v kostce umožňují definovat členy třídy v rámci více souborů.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-260">Partial classes were introduced in C# and Visual Basic with.NET Framework 2.0 and, in a nutshell, allow for a class's members to be defined across multiple files.</span></span> <span data-ttu-id="3b5aa-261">Soubor třídy kódu na pozadí – `AddProduct.aspx.cs`například obsahuje kód, který my, vývojář stránky vytvoří.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-261">The code-behind class file - `AddProduct.aspx.cs`, for example - contains the code that we, the page developer, create.</span></span> <span data-ttu-id="3b5aa-262">Kromě našeho kódu modul ASP.NET automaticky vytvoří samostatný soubor třídy s vlastnostmi a obslužnými rutinami událostí v, který přeloží deklarativní označení do hierarchie tříd stránky.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-262">In addition to our code, the ASP.NET engine automatically creates a separate class file with properties and event handlers in that translate the declarative markup into the page's class hierarchy.</span></span>

<span data-ttu-id="3b5aa-263">Automatické generování kódu, ke kterému dochází pokaždé, když je navštívená stránka ASP.NET PAVES způsobem pro některé místo zajímavé a užitečné možnosti.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-263">The automatic code generation that occurs whenever an ASP.NET page is visited paves the way for some rather interesting and useful possibilities.</span></span> <span data-ttu-id="3b5aa-264">Pokud v případě stránek předlohy říkáme modulu ASP.NET, kterou hlavní stránku používá naše stránka obsahu, vygeneruje pro nás vlastnost silně typovaného `Master`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-264">In the case of master pages, if we tell the ASP.NET engine what master page is being used by our content page it generates a strongly-typed `Master` property for us.</span></span>

<span data-ttu-id="3b5aa-265">Pomocí [direktivy`@MasterType`](https://msdn.microsoft.com/library/ms228274.aspx) informujte modul ASP.NET typu stránky předlohy stránky obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-265">Use the [`@MasterType` directive](https://msdn.microsoft.com/library/ms228274.aspx) to inform the ASP.NET engine of the content page's master page type.</span></span> <span data-ttu-id="3b5aa-266">Direktiva `@MasterType` může přijmout buď název typu stránky předlohy, nebo její cestu k souboru.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-266">The `@MasterType` directive can accept either the type name of the master page or its file path.</span></span> <span data-ttu-id="3b5aa-267">Chcete-li určit, že stránka `AddProduct.aspx` používá `Site.master` jako svou hlavní stránku, přidejte do horní části `AddProduct.aspx`následující direktivu:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-267">To specify that the `AddProduct.aspx` page uses `Site.master` as its master page, add the following directive to the top of `AddProduct.aspx`:</span></span>

[!code-aspx[Main](interacting-with-the-master-page-from-the-content-page-cs/samples/sample9.aspx)]

<span data-ttu-id="3b5aa-268">Tato direktiva instruuje modul ASP.NET, aby do hlavní stránky přidal odkaz silného typu pomocí vlastnosti s názvem `Master`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-268">This directive instructs the ASP.NET engine to add a strongly-typed reference to the master page through a property named `Master`.</span></span> <span data-ttu-id="3b5aa-269">Při použití direktivy `@MasterType` můžeme volat veřejné vlastnosti a metody `Site.master` hlavní stránky a přímo prostřednictvím vlastnosti `Master` bez přetypování.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-269">With the `@MasterType` directive in place, we can call the `Site.master` master page's public properties and methods directly through the `Master` property without any casts.</span></span>

> [!NOTE]
> <span data-ttu-id="3b5aa-270">Vynecháte-li direktivu `@MasterType`, `Page.Master` syntaxe a `Master` vrátí stejnou věc: objekt na stránce předlohy stránky s volným typem.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-270">If you omit the `@MasterType` directive, the syntax `Page.Master` and `Master` return the same thing: a loosely-typed object to the page's master page.</span></span> <span data-ttu-id="3b5aa-271">Pokud zadáte direktivu `@MasterType`, `Master` vrátí odkaz silně typované na určenou stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-271">If you include the `@MasterType` directive then `Master` returns a strongly-typed reference to the specified master page.</span></span> <span data-ttu-id="3b5aa-272">`Page.Master`však stále vrací odkaz na volně typovaného typu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-272">`Page.Master`, however, still returns a loosely-typed reference.</span></span> <span data-ttu-id="3b5aa-273">Podrobnější přehled o tom, proč se jedná o tento případ a jak je vlastnost `Master` vytvořená, když je zahrnutá direktiva `@MasterType`, najdete v tématu K`@MasterType` záznamu na blogu [Scott Allen](http://odetocode.com/blogs/scott/default.aspx) [v ASP.NET 2,0](http://odetocode.com/Blogs/scott/archive/2005/07/16/1944.aspx).</span><span class="sxs-lookup"><span data-stu-id="3b5aa-273">For a more thorough look at why this is the case and how the `Master` property is constructed when the `@MasterType` directive is included, see [K. Scott Allen](http://odetocode.com/blogs/scott/default.aspx)'s blog entry [`@MasterType` in ASP.NET 2.0](http://odetocode.com/Blogs/scott/archive/2005/07/16/1944.aspx).</span></span>

### <a name="updating-the-master-page-after-adding-a-new-product"></a><span data-ttu-id="3b5aa-274">Aktualizace stránky předlohy po přidání nového produktu</span><span class="sxs-lookup"><span data-stu-id="3b5aa-274">Updating the Master Page After Adding a New Product</span></span>

<span data-ttu-id="3b5aa-275">Teď, když víme, jak volat veřejné vlastnosti a metody hlavní stránky ze stránky obsahu, jsme připraveni aktualizovat stránku `AddProduct.aspx` tak, aby se stránka předlohy aktualizovala po přidání nového produktu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-275">Now that we know how to invoke a master page's public properties and methods from a content page, we're ready to update the `AddProduct.aspx` page so that the master page is refreshed after adding a new product.</span></span> <span data-ttu-id="3b5aa-276">Na začátku kroku 4 jsme vytvořili obslužnou rutinu události pro událost `ItemInserting` ovládacího prvku DetailsView, která se spustí hned po přidání nového produktu do databáze.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-276">At the beginning of Step 4 we created an event handler for the DetailsView control's `ItemInserting` event, which executes immediately after the new product has been added to the database.</span></span> <span data-ttu-id="3b5aa-277">Do této obslužné rutiny události přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-277">Add the following code to that event handler:</span></span>

[!code-csharp[Main](interacting-with-the-master-page-from-the-content-page-cs/samples/sample10.cs)]

<span data-ttu-id="3b5aa-278">Výše uvedený kód používá jak volně typované `Page.Master` vlastnost, tak vlastnost `Master` silného typu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-278">The above code uses both the loosely-typed `Page.Master` property and the strongly-typed `Master` property.</span></span> <span data-ttu-id="3b5aa-279">Všimněte si, že vlastnost `GridMessageText` je nastavena na hodnotu*NázevVýrobku* přidáno do mřížky... Hodnoty právě přidávaného produktu jsou přístupné prostřednictvím kolekce `e.Values`; Jak vidíte, přidaná hodnota `ProductName` je k dispozici prostřednictvím `e.Values["ProductName"]`.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-279">Note that the `GridMessageText` property is set to "*ProductName* added to grid..." The just-added product's values are accessible through the `e.Values` collection; as you can see, the just-added `ProductName` value is accessed via `e.Values["ProductName"]`.</span></span>

<span data-ttu-id="3b5aa-280">Obrázek 8 ukazuje stránku `AddProduct.aspx` hned po přidání nového produktu – Scott – soda – přidáno do databáze.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-280">Figure 8 shows the `AddProduct.aspx` page immediately after a new product - Scott's Soda - has been added to the database.</span></span> <span data-ttu-id="3b5aa-281">Všimněte si, že název právě přidávaného produktu je zaznamenán v popisku hlavní stránky a že prvek GridView byl aktualizován tak, aby zahrnoval produkt a jeho cenu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-281">Note that the just-added product name is noted in the master page's Label and that the GridView has been refreshed to include the product and its price.</span></span>

<span data-ttu-id="3b5aa-282">[![popisku hlavní stránky a prvku GridView zobrazit právě přidaný produkt](interacting-with-the-master-page-from-the-content-page-cs/_static/image23.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-282">[![The Master Page's Label and GridView Show the Just-Added Product](interacting-with-the-master-page-from-the-content-page-cs/_static/image23.png)](interacting-with-the-master-page-from-the-content-page-cs/_static/image22.png)</span></span>

<span data-ttu-id="3b5aa-283">**Obrázek 08**: popisek a GridView stránky předlohy zobrazují právě přidaný produkt ([kliknutím zobrazíte obrázek v plné velikosti](interacting-with-the-master-page-from-the-content-page-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="3b5aa-283">**Figure 08**: The Master Page's Label and GridView Show the Just-Added Product ([Click to view full-size image](interacting-with-the-master-page-from-the-content-page-cs/_static/image24.png))</span></span>

## <a name="summary"></a><span data-ttu-id="3b5aa-284">Souhrn</span><span class="sxs-lookup"><span data-stu-id="3b5aa-284">Summary</span></span>

<span data-ttu-id="3b5aa-285">V ideálním případě jsou hlavní stránka a její stránky obsahu zcela oddělené od sebe a nevyžadují žádnou úroveň interakce.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-285">Ideally, a master page and its content pages are completely separate from one another and require no level of interaction.</span></span> <span data-ttu-id="3b5aa-286">Zatímco stránky a stránky předlohy by měly být navržené s tímto cílem, existuje řada běžných scénářů, ve kterých se stránka obsahu musí nacházet se stránkou předlohy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-286">While master pages and content pages should be designed with that goal in mind, there are a number of common scenarios in which a content page must interface with its master page.</span></span> <span data-ttu-id="3b5aa-287">Jedním z nejběžnějších důvodů je aktualizovat určitou část zobrazení stránky předlohy na základě některé akce, která se zobrazila na stránce obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-287">One of the most common reasons centers around updating a particular portion of the master page display based on some action that transpired in the content page.</span></span>

<span data-ttu-id="3b5aa-288">Dobrá zpráva je, že je relativně jasné, že stránku obsahu programově komunikují s hlavní stránkou.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-288">The good news is that it's relatively straightforward to have a content page programmatically interact with its master page.</span></span> <span data-ttu-id="3b5aa-289">Začněte tím, že na stránce předlohy vytvoříte veřejné vlastnosti nebo metody, které zapouzdřují funkce, které je potřeba vyvolat na stránce obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-289">Start by creating public properties or methods in the master page that encapsulate the functionality that needs to be invoked by a content page.</span></span> <span data-ttu-id="3b5aa-290">Pak na stránce obsahu přejděte k vlastnostem a metodám hlavní stránky prostřednictvím `Page.Master`elné vlastnosti s volným typem nebo použijte direktivu `@MasterType` k vytvoření odkazu silného typu na stránku předlohy.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-290">Then, in the content page, access the master page's properties and methods through the loosely-typed `Page.Master` property or use the `@MasterType` directive to create a strongly-typed reference to the master page.</span></span>

<span data-ttu-id="3b5aa-291">V dalším kurzu zjistíte, jak má stránka předlohy programově pracovat s jednou z jeho stránek obsahu.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-291">In the next tutorial we examine how to have the master page programmatically interact with one of its content pages.</span></span>

<span data-ttu-id="3b5aa-292">Šťastné programování!</span><span class="sxs-lookup"><span data-stu-id="3b5aa-292">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="3b5aa-293">Další čtení</span><span class="sxs-lookup"><span data-stu-id="3b5aa-293">Further Reading</span></span>

<span data-ttu-id="3b5aa-294">Další informace o tématech popsaných v tomto kurzu najdete v následujících zdrojích informací:</span><span class="sxs-lookup"><span data-stu-id="3b5aa-294">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="3b5aa-295">Přístup k datům v ASP.NET a jejich aktualizace</span><span class="sxs-lookup"><span data-stu-id="3b5aa-295">Accessing and Updating Data in ASP.NET</span></span>](http://aspnet.4guysfromrolla.com/articles/011106-1.aspx)
- [<span data-ttu-id="3b5aa-296">Stránky předlohy ASP.NET: tipy, triky a depeše</span><span class="sxs-lookup"><span data-stu-id="3b5aa-296">ASP.NET Master Pages: Tips, Tricks, and Traps</span></span>](http://www.odetocode.com/articles/450.aspx)
- [<span data-ttu-id="3b5aa-297">`@MasterType` v ASP.NET 2,0</span><span class="sxs-lookup"><span data-stu-id="3b5aa-297">`@MasterType` in ASP.NET 2.0</span></span>](http://odetocode.com/Blogs/scott/archive/2005/07/16/1944.aspx)
- [<span data-ttu-id="3b5aa-298">Předávání informací mezi obsahem a stránkami předlohy</span><span class="sxs-lookup"><span data-stu-id="3b5aa-298">Passing Information Between Content and Master Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/013107-1.aspx)
- [<span data-ttu-id="3b5aa-299">Práce s daty v kurzech ASP.NET</span><span class="sxs-lookup"><span data-stu-id="3b5aa-299">Working with Data in ASP.NET Tutorials</span></span>](../../data-access/index.md)

### <a name="about-the-author"></a><span data-ttu-id="3b5aa-300">O autorovi</span><span class="sxs-lookup"><span data-stu-id="3b5aa-300">About the Author</span></span>

<span data-ttu-id="3b5aa-301">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor několika stránek ASP/ASP. NET Books a zakladatel of 4GuysFromRolla.com, pracoval s webovými technologiemi microsoftu od 1998.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-301">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="3b5aa-302">Scott funguje jako nezávislý konzultant, Trainer a zapisovač.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-302">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="3b5aa-303">Nejnovější kniha je [*Sams naučit se ASP.NET 3,5 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="3b5aa-303">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="3b5aa-304">Scott se dá kontaktovat [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu na [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="3b5aa-304">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="3b5aa-305">Zvláštní díky</span><span class="sxs-lookup"><span data-stu-id="3b5aa-305">Special Thanks To</span></span>

<span data-ttu-id="3b5aa-306">Tato řada kurzů byla přezkoumána mnoha užitečnými kontrolory.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-306">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="3b5aa-307">Kontrolor potenciálních zákazníků pro tento kurz byl Zack Novotný.</span><span class="sxs-lookup"><span data-stu-id="3b5aa-307">Lead reviewer for this tutorial was Zack Jones.</span></span> <span data-ttu-id="3b5aa-308">Uvažujete o přezkoumání mých nadcházejících článků na webu MSDN?</span><span class="sxs-lookup"><span data-stu-id="3b5aa-308">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="3b5aa-309">Pokud ano, vyřaďte mi řádek na [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-309">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3b5aa-310">[Předchozí](control-id-naming-in-content-pages-cs.md)
> [Další](interacting-with-the-content-page-from-the-master-page-cs.md)</span><span class="sxs-lookup"><span data-stu-id="3b5aa-310">[Previous](control-id-naming-in-content-pages-cs.md)
[Next](interacting-with-the-content-page-from-the-master-page-cs.md)</span></span>
