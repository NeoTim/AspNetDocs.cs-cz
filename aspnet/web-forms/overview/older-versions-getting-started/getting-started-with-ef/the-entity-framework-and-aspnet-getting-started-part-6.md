---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
title: Začínáme s Entity Framework 4,0 Database First a webovými formuláři ASP.NET 4 – část 6 | Microsoft Docs
author: tdykstra
description: Ukázková webová aplikace společnosti Contoso University ukazuje, jak pomocí Entity Framework vytvořit aplikace webových formulářů ASP.NET. Ukázková aplikace je...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: 994a5496-c648-4830-b03c-55bb43f325d2
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
msc.type: authoredcontent
ms.openlocfilehash: 8bfbe74f90eb03ea9aab7610842ef2578e80d113
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78564223"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-6"></a><span data-ttu-id="b92f9-104">Začínáme s Entity Framework 4,0 Database First a webovými formuláři ASP.NET 4 – část 6</span><span class="sxs-lookup"><span data-stu-id="b92f9-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 6</span></span>

<span data-ttu-id="b92f9-105">tím, že [Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="b92f9-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="b92f9-106">Ukázková webová aplikace společnosti Contoso University ukazuje, jak pomocí Entity Framework 4,0 a sady Visual Studio 2010 vytvářet aplikace webových formulářů ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b92f9-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="b92f9-107">Informace o řadě kurzů najdete v [prvním kurzu v řadě](the-entity-framework-and-aspnet-getting-started-part-1.md) .</span><span class="sxs-lookup"><span data-stu-id="b92f9-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="implementing-table-per-hierarchy-inheritance"></a><span data-ttu-id="b92f9-108">Implementace dědičnosti tabulek na hierarchii</span><span class="sxs-lookup"><span data-stu-id="b92f9-108">Implementing Table-per-Hierarchy Inheritance</span></span>

<span data-ttu-id="b92f9-109">V předchozím kurzu jste pracovali se souvisejícími daty přidáním a odstraněním relací a přidáním nové entity, která má relaci k existující entitě.</span><span class="sxs-lookup"><span data-stu-id="b92f9-109">In the previous tutorial you worked with related data by adding and deleting relationships and by adding a new entity that had a relationship to an existing entity.</span></span> <span data-ttu-id="b92f9-110">Tento kurz vám ukáže, jak implementovat dědičnost v datovém modelu.</span><span class="sxs-lookup"><span data-stu-id="b92f9-110">This tutorial will show you how to implement inheritance in the data model.</span></span>

<span data-ttu-id="b92f9-111">V objektově orientovaném programování můžete použít dědičnost, aby bylo snazší pracovat se souvisejícími třídami.</span><span class="sxs-lookup"><span data-stu-id="b92f9-111">In object-oriented programming, you can use inheritance to make it easier to work with related classes.</span></span> <span data-ttu-id="b92f9-112">Můžete například vytvořit `Instructor` a `Student` třídy, které jsou odvozeny ze `Person` základní třídy.</span><span class="sxs-lookup"><span data-stu-id="b92f9-112">For example, you could create `Instructor` and `Student` classes that derive from a `Person` base class.</span></span> <span data-ttu-id="b92f9-113">Můžete vytvořit stejné typy struktur dědičnosti mezi entitami v Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="b92f9-113">You can create the same kinds of inheritance structures among entities in the Entity Framework.</span></span>

<span data-ttu-id="b92f9-114">V této části kurzu nevytvoříte žádné nové webové stránky.</span><span class="sxs-lookup"><span data-stu-id="b92f9-114">In this part of the tutorial, you won't create any new web pages.</span></span> <span data-ttu-id="b92f9-115">Místo toho přidáte odvozenou entitu do datového modelu a upravíte stávající stránky pro použití nových entit.</span><span class="sxs-lookup"><span data-stu-id="b92f9-115">Instead, you'll add derived entities to the data model and modify existing pages to use the new entities.</span></span>

## <a name="table-per-hierarchy-versus-table-per-type-inheritance"></a><span data-ttu-id="b92f9-116">Dědičnost tabulek na základě hierarchie a typů</span><span class="sxs-lookup"><span data-stu-id="b92f9-116">Table-per-Hierarchy versus Table-per-Type Inheritance</span></span>

<span data-ttu-id="b92f9-117">Databáze může ukládat informace o souvisejících objektech v jedné tabulce nebo ve více tabulkách.</span><span class="sxs-lookup"><span data-stu-id="b92f9-117">A database can store information about related objects in one table or in multiple tables.</span></span> <span data-ttu-id="b92f9-118">Například v databázi `School` obsahuje `Person` tabulka informace o studentech i instruktorech v jedné tabulce.</span><span class="sxs-lookup"><span data-stu-id="b92f9-118">For example, in the `School` database, the `Person` table includes information about both students and instructors in a single table.</span></span> <span data-ttu-id="b92f9-119">Některé sloupce se vztahují jenom na instruktory (`HireDate`), některé jenom pro studenty (`EnrollmentDate`) a některé z obou (`LastName`, `FirstName`).</span><span class="sxs-lookup"><span data-stu-id="b92f9-119">Some of the columns apply only to instructors (`HireDate`), some only to students (`EnrollmentDate`), and some to both (`LastName`, `FirstName`).</span></span>

<span data-ttu-id="b92f9-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span></span>

<span data-ttu-id="b92f9-121">Entity Framework můžete nakonfigurovat tak, aby vytvářela `Instructor` a `Student` entity, které dědí od `Person` entity.</span><span class="sxs-lookup"><span data-stu-id="b92f9-121">You can configure the Entity Framework to create `Instructor` and `Student` entities that inherit from the `Person` entity.</span></span> <span data-ttu-id="b92f9-122">Tento model generování struktury dědičnosti entit z jedné databázové tabulky se nazývá dědičnost *typu tabulka-na hierarchii* (TPH).</span><span class="sxs-lookup"><span data-stu-id="b92f9-122">This pattern of generating an entity inheritance structure from a single database table is called *table-per-hierarchy* (TPH) inheritance.</span></span>

<span data-ttu-id="b92f9-123">Pro kurzy používá databáze `School` jiný vzor.</span><span class="sxs-lookup"><span data-stu-id="b92f9-123">For courses, the `School` database uses a different pattern.</span></span> <span data-ttu-id="b92f9-124">Online kurzy a kurzy na pracovišti jsou uloženy v samostatných tabulkách, z nichž každá má cizí klíč, který odkazuje na `Course` tabulku.</span><span class="sxs-lookup"><span data-stu-id="b92f9-124">Online courses and onsite courses are stored in separate tables, each of which has a foreign key that points to the `Course` table.</span></span> <span data-ttu-id="b92f9-125">Informace společné pro oba typy kurzů jsou uloženy pouze v `Course` tabulce.</span><span class="sxs-lookup"><span data-stu-id="b92f9-125">Information common to both course types is stored only in the `Course` table.</span></span>

<span data-ttu-id="b92f9-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span></span>

<span data-ttu-id="b92f9-127">Entity Framework datový model můžete nakonfigurovat tak, aby entity `OnlineCourse` a `OnsiteCourse` dědily z `Course` entity.</span><span class="sxs-lookup"><span data-stu-id="b92f9-127">You can configure the Entity Framework data model so that `OnlineCourse` and `OnsiteCourse` entities inherit from the `Course` entity.</span></span> <span data-ttu-id="b92f9-128">Tento model generování struktury dědičnosti entit z oddělených tabulek pro každý typ, přičemž každá samostatná tabulka odkazuje zpět na tabulku, která ukládá data společná pro všechny typy, se nazývá dědičnost *tabulky na typ* (TPT).</span><span class="sxs-lookup"><span data-stu-id="b92f9-128">This pattern of generating an entity inheritance structure from separate tables for each type, with each separate table referring back to a table that stores data common to all types, is called *table per type* (TPT) inheritance.</span></span>

<span data-ttu-id="b92f9-129">Vzory dědičnosti TPH obvykle poskytují lepší výkon v Entity Framework než TPT vzory dědičnosti, protože vzory TPT můžou mít za následek složité spojování dotazů.</span><span class="sxs-lookup"><span data-stu-id="b92f9-129">TPH inheritance patterns generally deliver better performance in the Entity Framework than TPT inheritance patterns, because TPT patterns can result in complex join queries.</span></span> <span data-ttu-id="b92f9-130">Tento návod ukazuje, jak implementovat dědičnost typu TPH.</span><span class="sxs-lookup"><span data-stu-id="b92f9-130">This walkthrough demonstrates how to implement TPH inheritance.</span></span> <span data-ttu-id="b92f9-131">Provedete to provedením následujících kroků:</span><span class="sxs-lookup"><span data-stu-id="b92f9-131">You'll do that by performing the following steps:</span></span>

- <span data-ttu-id="b92f9-132">Vytvoří `Instructor` a `Student` typy entit, které jsou odvozeny z `Person`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-132">Create `Instructor` and `Student` entity types that derive from `Person`.</span></span>
- <span data-ttu-id="b92f9-133">Přesuňte vlastnosti, které se vztahují k odvozeným entitám z `Person` entitě na odvozené entity.</span><span class="sxs-lookup"><span data-stu-id="b92f9-133">Move properties that pertain to the derived entities from the `Person` entity to the derived entities.</span></span>
- <span data-ttu-id="b92f9-134">Nastavte omezení vlastností v odvozených typech.</span><span class="sxs-lookup"><span data-stu-id="b92f9-134">Set constraints on properties in the derived types.</span></span>
- <span data-ttu-id="b92f9-135">Nastavit entitu `Person` jako abstraktní entitu</span><span class="sxs-lookup"><span data-stu-id="b92f9-135">Make the `Person` entity an abstract entity.</span></span>
- <span data-ttu-id="b92f9-136">Namapujte každou odvozenou entitu na `Person` tabulku s podmínkou, která určuje, zda `Person` řádek představuje tento odvozený typ.</span><span class="sxs-lookup"><span data-stu-id="b92f9-136">Map each derived entity to the `Person` table with a condition that specifies how to determine whether a `Person` row represents that derived type.</span></span>

## <a name="adding-instructor-and-student-entities"></a><span data-ttu-id="b92f9-137">Přidávání entit instruktor a student</span><span class="sxs-lookup"><span data-stu-id="b92f9-137">Adding Instructor and Student Entities</span></span>

<span data-ttu-id="b92f9-138">Otevřete soubor <em>SchoolModel. edmx</em> , klikněte pravým tlačítkem myši na neobsazenou oblast v návrháři, vyberte <strong>Přidat</strong>a pak vyberte <strong>entita</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="b92f9-138">Open the <em>SchoolModel.edmx</em> file, right-click an unoccupied area in the designer, select <strong>Add</strong>, then select <strong>Entity</strong><em>.</em></span></span>

<span data-ttu-id="b92f9-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span></span>

<span data-ttu-id="b92f9-140">V dialogovém okně **Přidat entitu** pojmenujte entitu `Instructor` a nastavte její **typ základního typu** na možnost `Person`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-140">In the **Add Entity** dialog box, name the entity `Instructor` and set its **Base type** option to `Person`.</span></span>

<span data-ttu-id="b92f9-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span></span>

<span data-ttu-id="b92f9-142">Klikněte na tlačítko **OK**.</span><span class="sxs-lookup"><span data-stu-id="b92f9-142">Click **OK**.</span></span> <span data-ttu-id="b92f9-143">Návrhář vytvoří entitu `Instructor`, která je odvozena od `Person` entity.</span><span class="sxs-lookup"><span data-stu-id="b92f9-143">The designer creates an `Instructor` entity that derives from the `Person` entity.</span></span> <span data-ttu-id="b92f9-144">Nová entita ještě nemá žádné vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="b92f9-144">The new entity does not yet have any properties.</span></span>

<span data-ttu-id="b92f9-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span></span>

<span data-ttu-id="b92f9-146">Zopakováním postupu vytvoříte entitu `Student`, která se také odvozuje od `Person`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-146">Repeat the procedure to create a `Student` entity that also derives from `Person`.</span></span>

<span data-ttu-id="b92f9-147">Pouze instruktoři mají data o přijetí, takže je nutné přesunout tuto vlastnost z entity `Person` do entity `Instructor`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-147">Only instructors have hire dates, so you need to move that property from the `Person` entity to the `Instructor` entity.</span></span> <span data-ttu-id="b92f9-148">V entitě `Person` klikněte pravým tlačítkem na vlastnost `HireDate` a klikněte na **Vyjmout**.</span><span class="sxs-lookup"><span data-stu-id="b92f9-148">In the `Person` entity, right-click the `HireDate` property and click **Cut**.</span></span> <span data-ttu-id="b92f9-149">Pak klikněte pravým tlačítkem na **vlastnosti** v entitě `Instructor` a klikněte na **Vložit**.</span><span class="sxs-lookup"><span data-stu-id="b92f9-149">Then right-click **Properties** in the `Instructor` entity and click **Paste**.</span></span>

<span data-ttu-id="b92f9-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span></span>

<span data-ttu-id="b92f9-151">Datum přijetí `Instructor` entitě nemůže být null.</span><span class="sxs-lookup"><span data-stu-id="b92f9-151">The hire date of an `Instructor` entity cannot be null.</span></span> <span data-ttu-id="b92f9-152">Klikněte pravým tlačítkem na vlastnost `HireDate`, klikněte na **vlastnosti**a potom v okně **vlastnosti** změňte `Nullable` na `False`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-152">Right-click the `HireDate` property, click **Properties**, and then in the **Properties** window change `Nullable` to `False`.</span></span>

<span data-ttu-id="b92f9-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span></span>

<span data-ttu-id="b92f9-154">Opakujte postup pro přesunutí vlastnosti `EnrollmentDate` z entity `Person` do entity `Student`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-154">Repeat the procedure to move the `EnrollmentDate` property from the `Person` entity to the `Student` entity.</span></span> <span data-ttu-id="b92f9-155">Ujistěte se, že jste také nastavili `Nullable` `False` pro vlastnost `EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-155">Make sure that you also set `Nullable` to `False` for the `EnrollmentDate` property.</span></span>

<span data-ttu-id="b92f9-156">Teď, když `Person` entita obsahuje jenom vlastnosti, které jsou společné pro `Instructor` a `Student` entit (kromě navigačních vlastností, které nepřesouváte), entitu jde ve struktuře dědičnosti použít jenom jako základní entitu.</span><span class="sxs-lookup"><span data-stu-id="b92f9-156">Now that a `Person` entity has only the properties that are common to `Instructor` and `Student` entities (aside from navigation properties, which you're not moving), the entity can only be used as a base entity in the inheritance structure.</span></span> <span data-ttu-id="b92f9-157">Proto je nutné se ujistit, že se nikdy nepovažuje za nezávislou entitu.</span><span class="sxs-lookup"><span data-stu-id="b92f9-157">Therefore, you need to ensure that it's never treated as an independent entity.</span></span> <span data-ttu-id="b92f9-158">Klikněte pravým tlačítkem na entitu `Person`, vyberte možnost **vlastnosti**a potom v okně **vlastnosti** změňte hodnotu vlastnosti **abstract** na hodnotu **true**.</span><span class="sxs-lookup"><span data-stu-id="b92f9-158">Right-click the `Person` entity, select **Properties**, and then in the **Properties** window change the value of the **Abstract** property to **True**.</span></span>

<span data-ttu-id="b92f9-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span></span>

## <a name="mapping-instructor-and-student-entities-to-the-person-table"></a><span data-ttu-id="b92f9-160">Mapování entit instruktor a student na tabulku Person</span><span class="sxs-lookup"><span data-stu-id="b92f9-160">Mapping Instructor and Student Entities to the Person Table</span></span>

<span data-ttu-id="b92f9-161">Nyní potřebujete sdělit Entity Framework, jak odlišit `Instructor` a `Student` entity v databázi.</span><span class="sxs-lookup"><span data-stu-id="b92f9-161">Now you need to tell the Entity Framework how to differentiate between `Instructor` and `Student` entities in the database.</span></span>

<span data-ttu-id="b92f9-162">Klikněte pravým tlačítkem na entitu `Instructor` a vyberte **mapování tabulky**.</span><span class="sxs-lookup"><span data-stu-id="b92f9-162">Right-click the `Instructor` entity and select **Table Mapping**.</span></span> <span data-ttu-id="b92f9-163">V okně **Podrobnosti mapování** klikněte na **Přidat tabulku nebo zobrazení** a vyberte **osoba**.</span><span class="sxs-lookup"><span data-stu-id="b92f9-163">In the **Mapping Details** window, click **Add a Table or View** and select **Person**.</span></span>

<span data-ttu-id="b92f9-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span></span>

<span data-ttu-id="b92f9-165">Klikněte na **Přidat podmínku**a pak vyberte **ZaměstnánOd**.</span><span class="sxs-lookup"><span data-stu-id="b92f9-165">Click **Add a Condition**, and then select **HireDate**.</span></span>

<span data-ttu-id="b92f9-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span></span>

<span data-ttu-id="b92f9-167">Změňte **operátor** na hodnotu a **hodnotu nebo vlastnost** na **NOT NULL**.</span><span class="sxs-lookup"><span data-stu-id="b92f9-167">Change **Operator** to **Is** and **Value / Property** to **Not Null**.</span></span>

<span data-ttu-id="b92f9-168">[![Image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span></span>

<span data-ttu-id="b92f9-169">Opakujte postup pro entitu `Students` a určete, že tato entita se mapuje na tabulku `Person`, pokud sloupec `EnrollmentDate` není null.</span><span class="sxs-lookup"><span data-stu-id="b92f9-169">Repeat the procedure for the `Students` entity, specifying that this entity maps to the `Person` table when the `EnrollmentDate` column is not null.</span></span> <span data-ttu-id="b92f9-170">Pak datový model uložte a zavřete.</span><span class="sxs-lookup"><span data-stu-id="b92f9-170">Then save and close the data model.</span></span>

<span data-ttu-id="b92f9-171">Sestavte projekt, aby se vytvořily nové entity jako třídy a aby byly dostupné v návrháři.</span><span class="sxs-lookup"><span data-stu-id="b92f9-171">Build the project in order to create the new entities as classes and make them available in the designer.</span></span>

## <a name="using-the-instructor-and-student-entities"></a><span data-ttu-id="b92f9-172">Použití entit instruktor a student</span><span class="sxs-lookup"><span data-stu-id="b92f9-172">Using the Instructor and Student Entities</span></span>

<span data-ttu-id="b92f9-173">Když jste vytvořili webové stránky, které pracují s daty student a instruktor, budete je mít k dispozici pro `Person` sadu entit a Vy jste filtrem `HireDate` nebo `EnrollmentDate` omezili vrácená data pro studenty nebo instruktory.</span><span class="sxs-lookup"><span data-stu-id="b92f9-173">When you created the web pages that work with student and instructor data, you databound them to the `Person` entity set, and you filtered on the `HireDate` or `EnrollmentDate` property to restrict the returned data to students or instructors.</span></span> <span data-ttu-id="b92f9-174">Když ale teď svážete jednotlivé ovládací prvky zdroje dat s `Person` sadou entit, můžete určit, že se mají vybrat jenom `Student` nebo `Instructor` typy entit.</span><span class="sxs-lookup"><span data-stu-id="b92f9-174">However, now when you bind each data source control to the `Person` entity set, you can specify that only `Student` or `Instructor` entity types should be selected.</span></span> <span data-ttu-id="b92f9-175">Vzhledem k tomu, že Entity Framework ví, jak rozlišit studenty a instruktory v sadě entit `Person`, můžete ručně zadaná nastavení vlastností `Where` odebrat.</span><span class="sxs-lookup"><span data-stu-id="b92f9-175">Because the Entity Framework knows how to differentiate students and instructors in the `Person` entity set, you can remove the `Where` property settings you entered manually to do that.</span></span>

<span data-ttu-id="b92f9-176">V návrháři aplikace Visual Studio můžete určit typ entity, který by měl ovládací prvek `EntityDataSource` vybrat v rozevíracím seznamu **EntityTypeFilter** Průvodce `Configure Data Source`, jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="b92f9-176">In the Visual Studio Designer, you can specify the entity type that an `EntityDataSource` control should select in the **EntityTypeFilter** drop-down box of the `Configure Data Source` wizard, as shown in the following example.</span></span>

<span data-ttu-id="b92f9-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span></span>

<span data-ttu-id="b92f9-178">A v okně **vlastnosti** můžete odebrat hodnoty `Where` klauzulí, které už nejsou potřeba, jak je znázorněno v následujícím příkladu.</span><span class="sxs-lookup"><span data-stu-id="b92f9-178">And in the **Properties** window you can remove `Where` clause values that are no longer needed, as shown in the following example.</span></span>

<span data-ttu-id="b92f9-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span></span>

<span data-ttu-id="b92f9-180">Vzhledem k tomu, že jste změnili kód pro `EntityDataSource` ovládací prvky pro použití atributu `ContextTypeName`, nemůžete spustit průvodce **konfigurací zdroje dat** na `EntityDataSource` ovládací prvky, které jste již vytvořili.</span><span class="sxs-lookup"><span data-stu-id="b92f9-180">However, because you've changed the markup for `EntityDataSource` controls to use the `ContextTypeName` attribute, you cannot run the **Configure Data Source** wizard on `EntityDataSource` controls that you've already created.</span></span> <span data-ttu-id="b92f9-181">Proto provedete požadované změny změnou kódu místo.</span><span class="sxs-lookup"><span data-stu-id="b92f9-181">Therefore, you'll make the required changes by changing markup instead.</span></span>

<span data-ttu-id="b92f9-182">Otevřete stránku *students. aspx* .</span><span class="sxs-lookup"><span data-stu-id="b92f9-182">Open the *Students.aspx* page.</span></span> <span data-ttu-id="b92f9-183">V ovládacím prvku `StudentsEntityDataSource` odeberte atribut `Where` a přidejte atribut `EntityTypeFilter="Student"`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-183">In the `StudentsEntityDataSource` control, remove the `Where` attribute and add an `EntityTypeFilter="Student"` attribute.</span></span> <span data-ttu-id="b92f9-184">Značky teď budou vypadat podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="b92f9-184">The markup will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample1.aspx)]

<span data-ttu-id="b92f9-185">Nastavením atributu `EntityTypeFilter` zajistíte, že ovládací prvek `EntityDataSource` vybere pouze zadaný typ entity.</span><span class="sxs-lookup"><span data-stu-id="b92f9-185">Setting the `EntityTypeFilter` attribute ensures that the `EntityDataSource` control will select only the specified entity type.</span></span> <span data-ttu-id="b92f9-186">Pokud jste chtěli načíst `Student` i `Instructor` typy entit, nemusíte tento atribut nastavit.</span><span class="sxs-lookup"><span data-stu-id="b92f9-186">If you wanted to retrieve both `Student` and `Instructor` entity types, you would not set this attribute.</span></span> <span data-ttu-id="b92f9-187">(Máte možnost načíst více typů entit s jedním `EntityDataSource` ovládacím prvkem pouze v případě, že ovládací prvek používáte pro přístup k datům jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="b92f9-187">(You have the option of retrieving multiple entity types with one `EntityDataSource` control only if you're using the control for read-only data access.</span></span> <span data-ttu-id="b92f9-188">Pokud k vložení, aktualizaci nebo odstranění entit používáte ovládací prvek `EntityDataSource` a pokud sada entit, na kterou je vázána, může obsahovat více typů, můžete pracovat pouze s jedním typem entity a Vy musíte nastavit tento atribut.)</span><span class="sxs-lookup"><span data-stu-id="b92f9-188">If you're using an `EntityDataSource` control to insert, update, or delete entities, and if the entity set it's bound to can contain multiple types, you can only work with one entity type, and you have to set this attribute.)</span></span>

<span data-ttu-id="b92f9-189">Opakujte postup pro ovládací prvek `SearchEntityDataSource`, s výjimkou odebrání pouze části atributu `Where`, který vybere `Student` entit namísto zcela odebrání vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="b92f9-189">Repeat the procedure for the `SearchEntityDataSource` control, except remove only the part of the `Where` attribute that selects `Student` entities instead of removing the property altogether.</span></span> <span data-ttu-id="b92f9-190">Otevírací značka ovládacího prvku bude nyní vypadat podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="b92f9-190">The opening tag of the control will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample2.aspx)]

<span data-ttu-id="b92f9-191">Spusťte stránku a ověřte, zda stále funguje stejně jako dříve.</span><span class="sxs-lookup"><span data-stu-id="b92f9-191">Run the page to verify that it still works as it did before.</span></span>

<span data-ttu-id="b92f9-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span></span>

<span data-ttu-id="b92f9-193">Aktualizujte následující stránky, které jste vytvořili v předchozích kurzech, aby místo `Person` entit používaly nové entity `Student` a `Instructor`, a pak je spouštějí, aby se ověřilo, že fungují stejně jako dříve:</span><span class="sxs-lookup"><span data-stu-id="b92f9-193">Update the following pages that you created in earlier tutorials so that they use the new `Student` and `Instructor` entities instead of `Person` entities, then run them to verify that they work as they did before:</span></span>

- <span data-ttu-id="b92f9-194">V *StudentsAdd. aspx*přidejte `EntityTypeFilter="Student"` k ovládacímu prvku `StudentsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-194">In *StudentsAdd.aspx*, add `EntityTypeFilter="Student"` to the `StudentsEntityDataSource` control.</span></span> <span data-ttu-id="b92f9-195">Značky teď budou vypadat podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="b92f9-195">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample3.aspx)]

    <span data-ttu-id="b92f9-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span></span>
- <span data-ttu-id="b92f9-197">V části *About. aspx*přidejte `EntityTypeFilter="Student"` do ovládacího prvku `StudentStatisticsEntityDataSource` a odstraňte `Where="it.EnrollmentDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-197">In *About.aspx*, add `EntityTypeFilter="Student"` to the `StudentStatisticsEntityDataSource` control and remove `Where="it.EnrollmentDate is not null"`.</span></span> <span data-ttu-id="b92f9-198">Značky teď budou vypadat podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="b92f9-198">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample4.aspx)]

    <span data-ttu-id="b92f9-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span></span>
- <span data-ttu-id="b92f9-200">V *instruktorech. aspx* a *InstructorsCourses. aspx*přidejte `EntityTypeFilter="Instructor"` do ovládacího prvku `InstructorsEntityDataSource` a odstraňte `Where="it.HireDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="b92f9-200">In *Instructors.aspx* and *InstructorsCourses.aspx*, add `EntityTypeFilter="Instructor"` to the `InstructorsEntityDataSource` control and remove `Where="it.HireDate is not null"`.</span></span> <span data-ttu-id="b92f9-201">Označení v *instruktorech. aspx* teď vypadá podobně jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="b92f9-201">The markup in *Instructors.aspx* now resembles the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample5.aspx)]

    <span data-ttu-id="b92f9-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span></span>

    <span data-ttu-id="b92f9-203">Označení v *InstructorsCourses. aspx* teď bude vypadat jako v následujícím příkladu:</span><span class="sxs-lookup"><span data-stu-id="b92f9-203">The markup in *InstructorsCourses.aspx* will now resemble the following example:</span></span>

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample6.aspx)]

    <span data-ttu-id="b92f9-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="b92f9-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span></span>

<span data-ttu-id="b92f9-205">V důsledku těchto změn jste vylepšili udržovatelnost aplikace Contoso University v několika ohledech.</span><span class="sxs-lookup"><span data-stu-id="b92f9-205">As a result of these changes, you've improved the Contoso University application's maintainability in several ways.</span></span> <span data-ttu-id="b92f9-206">Přesunuli jste výběr a logiku ověřování z vrstvy uživatelského rozhraní (kód*aspx* ) a vytvořili jste nedílnou součást vrstvy přístupu k datům.</span><span class="sxs-lookup"><span data-stu-id="b92f9-206">You've moved selection and validation logic out of the UI layer (*.aspx* markup) and made it an integral part of the data access layer.</span></span> <span data-ttu-id="b92f9-207">Díky tomu je možné izolovat kód aplikace od změn, které můžete v budoucnu udělat pro schéma databáze nebo datový model.</span><span class="sxs-lookup"><span data-stu-id="b92f9-207">This helps to isolate your application code from changes that you might make in the future to the database schema or the data model.</span></span> <span data-ttu-id="b92f9-208">Můžete se třeba rozhodnout, že studenti můžou být zařazeni jako učitelé, a proto by získali datum přijetí.</span><span class="sxs-lookup"><span data-stu-id="b92f9-208">For example, you could decide that students might be hired as teachers' aids and therefore would get a hire date.</span></span> <span data-ttu-id="b92f9-209">Pak můžete přidat novou vlastnost, která bude odlišit studenty od instruktorů a aktualizuje datový model.</span><span class="sxs-lookup"><span data-stu-id="b92f9-209">You could then add a new property to differentiate students from instructors and update the data model.</span></span> <span data-ttu-id="b92f9-210">Žádný kód webové aplikace by se neměl měnit s výjimkou případů, kdy jste chtěli zobrazit datum přijetí studentů.</span><span class="sxs-lookup"><span data-stu-id="b92f9-210">No code in the web application would need to change except where you wanted to show a hire date for students.</span></span> <span data-ttu-id="b92f9-211">Další výhodou přidání `Instructor` a `Student`ch entit je, že váš kód je snadněji srozumitelnější než při uvedení `Person` objektů, které byly ve skutečnosti studenty nebo instruktory.</span><span class="sxs-lookup"><span data-stu-id="b92f9-211">Another benefit of adding `Instructor` and `Student` entities is that your code is more readily understandable than when it referred to `Person` objects that were actually students or instructors.</span></span>

<span data-ttu-id="b92f9-212">Nyní jste viděli jeden ze způsobů implementace vzoru dědičnosti v Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="b92f9-212">You've now seen one way to implement an inheritance pattern in the Entity Framework.</span></span> <span data-ttu-id="b92f9-213">V následujícím kurzu se dozvíte, jak pomocí uložených procedur získat větší kontrolu nad tím, jak Entity Framework přistupuje k databázi.</span><span class="sxs-lookup"><span data-stu-id="b92f9-213">In the following tutorial, you'll learn how to use stored procedures in order to have more control over how the Entity Framework accesses the database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b92f9-214">[Předchozí](the-entity-framework-and-aspnet-getting-started-part-5.md)
> [Další](the-entity-framework-and-aspnet-getting-started-part-7.md)</span><span class="sxs-lookup"><span data-stu-id="b92f9-214">[Previous](the-entity-framework-and-aspnet-getting-started-part-5.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-7.md)</span></span>
