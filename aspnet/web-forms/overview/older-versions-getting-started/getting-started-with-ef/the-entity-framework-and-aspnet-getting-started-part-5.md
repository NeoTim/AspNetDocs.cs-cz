---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
title: Začínáme s Entity Framework 4,0 Database First a webovými formuláři ASP.NET 4 – část 5 | Microsoft Docs
author: tdykstra
description: Ukázková webová aplikace společnosti Contoso University ukazuje, jak pomocí Entity Framework vytvořit aplikace webových formulářů ASP.NET. Ukázková aplikace je...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: 24ad4379-3fb2-44dc-ba59-85fe0ffcb2ae
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
msc.type: authoredcontent
ms.openlocfilehash: 75328e67abb4295b619cac5423a9eb970942fff7
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78527998"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-5"></a><span data-ttu-id="a73bf-104">Začínáme s Entity Framework 4,0 Database First a webovými formuláři ASP.NET 4 – část 5</span><span class="sxs-lookup"><span data-stu-id="a73bf-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 5</span></span>

<span data-ttu-id="a73bf-105">tím, že [Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="a73bf-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="a73bf-106">Ukázková webová aplikace společnosti Contoso University ukazuje, jak pomocí Entity Framework 4,0 a sady Visual Studio 2010 vytvářet aplikace webových formulářů ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a73bf-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="a73bf-107">Informace o řadě kurzů najdete v [prvním kurzu v řadě](the-entity-framework-and-aspnet-getting-started-part-1.md) .</span><span class="sxs-lookup"><span data-stu-id="a73bf-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="working-with-related-data-continued"></a><span data-ttu-id="a73bf-108">Práce se souvisejícími daty – pokračování</span><span class="sxs-lookup"><span data-stu-id="a73bf-108">Working with Related Data, Continued</span></span>

<span data-ttu-id="a73bf-109">V předchozím kurzu jste začali používat ovládací prvek `EntityDataSource` pro práci se souvisejícími daty.</span><span class="sxs-lookup"><span data-stu-id="a73bf-109">In the previous tutorial you began to use the `EntityDataSource` control to work with related data.</span></span> <span data-ttu-id="a73bf-110">Zobrazili jste více úrovní hierarchie a upravili data ve vlastnostech navigace.</span><span class="sxs-lookup"><span data-stu-id="a73bf-110">You displayed multiple levels of hierarchy and edited data in navigation properties.</span></span> <span data-ttu-id="a73bf-111">V tomto kurzu budete dál pracovat se souvisejícími daty přidáním a odstraněním relací a přidáním nové entity, která má relaci k existující entitě.</span><span class="sxs-lookup"><span data-stu-id="a73bf-111">In this tutorial you'll continue to work with related data by adding and deleting relationships and by adding a new entity that has a relationship to an existing entity.</span></span>

<span data-ttu-id="a73bf-112">Vytvoříte stránku, která přidá kurzy přiřazené k oddělením.</span><span class="sxs-lookup"><span data-stu-id="a73bf-112">You'll create a page that adds courses that are assigned to departments.</span></span> <span data-ttu-id="a73bf-113">Tato oddělení už existují a při vytváření nového kurzu zároveň navážete vztah mezi ním a stávajícím oddělením.</span><span class="sxs-lookup"><span data-stu-id="a73bf-113">The departments already exist, and when you create a new course, at the same time you'll establish a relationship between it and an existing department.</span></span>

<span data-ttu-id="a73bf-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a73bf-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span></span>

<span data-ttu-id="a73bf-115">Vytvoříte také stránku, která pracuje s relací m:n, a to přiřazením instruktora k kurzu (přidáním vztahu mezi dvěma entitami, které vyberete) nebo odebráním instruktora z kurzu (odebráním relace mezi dvěma entitami, které jste Vyberte).</span><span class="sxs-lookup"><span data-stu-id="a73bf-115">You'll also create a page that works with a many-to-many relationship by assigning an instructor to a course (adding a relationship between two entities that you select) or removing an instructor from a course (removing a relationship between two entities that you select).</span></span> <span data-ttu-id="a73bf-116">V databázi se při přidání vztahu mezi instruktorem a kurzem přidá nový řádek, který se přidá do tabulky přidružení `CourseInstructor`. odebrání relace zahrnuje odstranění řádku z tabulky přidružení `CourseInstructor`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-116">In the database, adding a relationship between an instructor and a course results in a new row being added to the `CourseInstructor` association table; removing a relationship involves deleting a row from the `CourseInstructor` association table.</span></span> <span data-ttu-id="a73bf-117">Nicméně to provedete v Entity Framework nastavením vlastností navigace, aniž by bylo třeba explicitně odkazovat na tabulku `CourseInstructor`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-117">However, you do this in the Entity Framework by setting navigation properties, without referring to the `CourseInstructor` table explicitly.</span></span>

<span data-ttu-id="a73bf-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="a73bf-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span></span>

## <a name="adding-an-entity-with-a-relationship-to-an-existing-entity"></a><span data-ttu-id="a73bf-119">Přidání entity s relací s existující entitou</span><span class="sxs-lookup"><span data-stu-id="a73bf-119">Adding an Entity with a Relationship to an Existing Entity</span></span>

<span data-ttu-id="a73bf-120">Vytvořte novou webovou stránku s názvem *CoursesAdd. aspx* , která používá hlavní stránku *Web. Master* , a přidejte následující kód do ovládacího prvku `Content` s názvem `Content2`:</span><span class="sxs-lookup"><span data-stu-id="a73bf-120">Create a new web page named *CoursesAdd.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample1.aspx)]

<span data-ttu-id="a73bf-121">Tento kód vytvoří ovládací prvek `EntityDataSource`, který vybere kurzy, který umožňuje vkládání a určuje obslužnou rutinu pro událost `Inserting`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-121">This markup creates an `EntityDataSource` control that selects courses, that enables inserting, and that specifies a handler for the `Inserting` event.</span></span> <span data-ttu-id="a73bf-122">Obslužnou rutinu použijete k aktualizaci `Department` navigační vlastnosti při vytvoření nové entity `Course`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-122">You'll use the handler to update the `Department` navigation property when a new `Course` entity is created.</span></span>

<span data-ttu-id="a73bf-123">Značka také vytvoří ovládací prvek `DetailsView`, který se má použít pro přidání nových entit `Course`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-123">The markup also creates a `DetailsView` control to use for adding new `Course` entities.</span></span> <span data-ttu-id="a73bf-124">Označení používá vázaná pole pro `Course` vlastnosti entity.</span><span class="sxs-lookup"><span data-stu-id="a73bf-124">The markup uses bound fields for `Course` entity properties.</span></span> <span data-ttu-id="a73bf-125">Je nutné zadat hodnotu `CourseID`, protože se nejedná o pole vygenerované systémem.</span><span class="sxs-lookup"><span data-stu-id="a73bf-125">You have to enter the `CourseID` value because this is not a system-generated ID field.</span></span> <span data-ttu-id="a73bf-126">Místo toho je číslo kurzu, které se musí zadat ručně při vytvoření kurzu.</span><span class="sxs-lookup"><span data-stu-id="a73bf-126">Instead, it's a course number that must be specified manually when the course is created.</span></span>

<span data-ttu-id="a73bf-127">Použijete pole šablony pro `Department` navigační vlastnost, protože vlastnosti navigace nelze použít s ovládacími prvky `BoundField`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-127">You use a template field for the `Department` navigation property because navigation properties cannot be used with `BoundField` controls.</span></span> <span data-ttu-id="a73bf-128">Pole Šablona poskytuje rozevírací seznam pro výběr oddělení.</span><span class="sxs-lookup"><span data-stu-id="a73bf-128">The template field provides a drop-down list to select the department.</span></span> <span data-ttu-id="a73bf-129">Rozevírací seznam je vázán na `Departments` sadu entit pomocí `Eval` místo `Bind`, protože nelze přímo svázat navigační vlastnosti, aby je bylo možné aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="a73bf-129">The drop-down list is bound to the `Departments` entity set by using `Eval` rather than `Bind`, again because you cannot directly bind navigation properties in order to update them.</span></span> <span data-ttu-id="a73bf-130">Zadáte obslužnou rutinu pro událost `Init` ovládacího prvku `DropDownList`, abyste mohli uložit odkaz na ovládací prvek pro použití kódem, který aktualizuje `DepartmentID` cizí klíč.</span><span class="sxs-lookup"><span data-stu-id="a73bf-130">You specify a handler for the `DropDownList` control's `Init` event so that you can store a reference to the control for use by the code that updates the `DepartmentID` foreign key.</span></span>

<span data-ttu-id="a73bf-131">V *CoursesAdd.aspx.cs* hned po deklaraci částečné třídy přidejte pole třídy, které bude obsahovat odkaz na ovládací prvek `DepartmentsDropDownList`:</span><span class="sxs-lookup"><span data-stu-id="a73bf-131">In *CoursesAdd.aspx.cs* just after the partial-class declaration, add a class field to hold a reference to the `DepartmentsDropDownList` control:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample2.cs)]

<span data-ttu-id="a73bf-132">Přidejte obslužnou rutinu pro událost `Init` ovládacího prvku `DepartmentsDropDownList`, abyste mohli uložit odkaz na ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="a73bf-132">Add a handler for the `DepartmentsDropDownList` control's `Init` event so that you can store a reference to the control.</span></span> <span data-ttu-id="a73bf-133">To vám umožní získat hodnotu, kterou uživatel zadal, a použít ho k aktualizaci `DepartmentID` hodnoty `Course` entity.</span><span class="sxs-lookup"><span data-stu-id="a73bf-133">This lets you get the value the user has entered and use it to update the `DepartmentID` value of the `Course` entity.</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample3.cs)]

<span data-ttu-id="a73bf-134">Přidejte obslužnou rutinu pro událost `Inserting` ovládacího prvku `DetailsView`:</span><span class="sxs-lookup"><span data-stu-id="a73bf-134">Add a handler for the `DetailsView` control's `Inserting` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample4.cs)]

<span data-ttu-id="a73bf-135">Když uživatel klikne na `Insert`, vyvolá se událost `Inserting` před vložením nového záznamu.</span><span class="sxs-lookup"><span data-stu-id="a73bf-135">When the user clicks `Insert`, the `Inserting` event is raised before the new record is inserted.</span></span> <span data-ttu-id="a73bf-136">Kód v obslužné rutině získá `DepartmentID` z ovládacího prvku `DropDownList` a použije ho k nastavení hodnoty, která bude použita pro vlastnost `DepartmentID` entity `Course`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-136">The code in the handler gets the `DepartmentID` from the `DropDownList` control and uses it to set the value that will be used for the `DepartmentID` property of the `Course` entity.</span></span>

<span data-ttu-id="a73bf-137">Entity Framework se postará o přidání tohoto kurzu do navigační vlastnosti `Courses` přidružené entity `Department`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-137">The Entity Framework will take care of adding this course to the `Courses` navigation property of the associated `Department` entity.</span></span> <span data-ttu-id="a73bf-138">Přidá také oddělení do navigační vlastnosti `Department` entity `Course`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-138">It also adds the department to the `Department` navigation property of the `Course` entity.</span></span>

<span data-ttu-id="a73bf-139">Spusťte stránku.</span><span class="sxs-lookup"><span data-stu-id="a73bf-139">Run the page.</span></span>

<span data-ttu-id="a73bf-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a73bf-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span></span>

<span data-ttu-id="a73bf-141">Zadejte ID, název, počet kreditů a vyberte oddělení a pak klikněte na **Vložit**.</span><span class="sxs-lookup"><span data-stu-id="a73bf-141">Enter an ID, a title, a number of credits, and select a department, then click **Insert**.</span></span>

<span data-ttu-id="a73bf-142">Spusťte stránku *courses. aspx* a vyberte stejné oddělení, abyste viděli nový kurz.</span><span class="sxs-lookup"><span data-stu-id="a73bf-142">Run the *Courses.aspx* page, and select the same department to see the new course.</span></span>

<span data-ttu-id="a73bf-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a73bf-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span></span>

## <a name="working-with-many-to-many-relationships"></a><span data-ttu-id="a73bf-144">Práce s relacemi M:n</span><span class="sxs-lookup"><span data-stu-id="a73bf-144">Working with Many-to-Many Relationships</span></span>

<span data-ttu-id="a73bf-145">Vztah mezi `Courses` sadou entit a sadou entit `People` je relace m:n.</span><span class="sxs-lookup"><span data-stu-id="a73bf-145">The relationship between the `Courses` entity set and the `People` entity set is a many-to-many relationship.</span></span> <span data-ttu-id="a73bf-146">`Course` entita obsahuje navigační vlastnost s názvem `People`, která může obsahovat nula, jednu nebo více souvisejících entit `Person` entit (představujících instruktory přiřazené k učení tohoto kurzu).</span><span class="sxs-lookup"><span data-stu-id="a73bf-146">A `Course` entity has a navigation property named `People` that can contain zero, one, or more related `Person` entities (representing instructors assigned to teach that course).</span></span> <span data-ttu-id="a73bf-147">A `Person` entita má vlastnost navigace nazvanou `Courses`, která může obsahovat nula, jednu nebo více souvisejících entit `Course` entit (představujících kurzy, které instruktor má přiřazený k výuce).</span><span class="sxs-lookup"><span data-stu-id="a73bf-147">And a `Person` entity has a navigation property named `Courses` that can contain zero, one, or more related `Course` entities (representing courses that instructor is assigned to teach).</span></span> <span data-ttu-id="a73bf-148">Jeden instruktor může naučit několik kurzů a jeden kurz může být výukou více instruktorů.</span><span class="sxs-lookup"><span data-stu-id="a73bf-148">One instructor might teach multiple courses, and one course might be taught by multiple instructors.</span></span> <span data-ttu-id="a73bf-149">V této části návodu přidáte a odeberete relace mezi `Person` a `Course` entitou aktualizací vlastností navigace souvisejících entit.</span><span class="sxs-lookup"><span data-stu-id="a73bf-149">In this section of the walkthrough, you'll add and remove relationships between `Person` and `Course` entities by updating the navigation properties of the related entities.</span></span>

<span data-ttu-id="a73bf-150">Vytvořte novou webovou stránku s názvem *InstructorsCourses. aspx* , která používá hlavní stránku *Web. Master* , a přidejte následující kód do ovládacího prvku `Content` s názvem `Content2`:</span><span class="sxs-lookup"><span data-stu-id="a73bf-150">Create a new web page named *InstructorsCourses.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample5.aspx)]

<span data-ttu-id="a73bf-151">Tento kód vytvoří ovládací prvek `EntityDataSource`, který načte název a `PersonID` `Person` entit pro instruktory.</span><span class="sxs-lookup"><span data-stu-id="a73bf-151">This markup creates an `EntityDataSource` control that retrieves the name and `PersonID` of `Person` entities for instructors.</span></span> <span data-ttu-id="a73bf-152">Ovládací prvek `DropDrownList` je svázán s ovládacím prvkem `EntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-152">A `DropDrownList` control is bound to the `EntityDataSource` control.</span></span> <span data-ttu-id="a73bf-153">Ovládací prvek `DropDownList` určuje obslužnou rutinu pro událost `DataBound`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-153">The `DropDownList` control specifies a handler for the `DataBound` event.</span></span> <span data-ttu-id="a73bf-154">Pomocí této obslužné rutiny provedete vázání dvou rozevíracích seznamů, které zobrazují kurzy.</span><span class="sxs-lookup"><span data-stu-id="a73bf-154">You'll use this handler to databind the two drop-down lists that display courses.</span></span>

<span data-ttu-id="a73bf-155">Značka také vytvoří následující skupinu ovládacích prvků, které se použijí pro přiřazení kurzu k vybranému instruktorovi:</span><span class="sxs-lookup"><span data-stu-id="a73bf-155">The markup also creates the following group of controls to use for assigning a course to the selected instructor:</span></span>

- <span data-ttu-id="a73bf-156">`DropDownList` ovládací prvek pro výběr kurzu, který se má přiřadit</span><span class="sxs-lookup"><span data-stu-id="a73bf-156">A `DropDownList` control for selecting a course to assign.</span></span> <span data-ttu-id="a73bf-157">Tento ovládací prvek se naplní kurzy, které aktuálně nejsou přiřazené k vybranému instruktorovi.</span><span class="sxs-lookup"><span data-stu-id="a73bf-157">This control will be populated with courses that are currently not assigned to the selected instructor.</span></span>
- <span data-ttu-id="a73bf-158">`Button` ovládací prvek pro zahájení přiřazení.</span><span class="sxs-lookup"><span data-stu-id="a73bf-158">A `Button` control to initiate the assignment.</span></span>
- <span data-ttu-id="a73bf-159">`Label` ovládací prvek pro zobrazení chybové zprávy v případě, že přiřazení se nezdařilo.</span><span class="sxs-lookup"><span data-stu-id="a73bf-159">A `Label` control to display an error message if the assignment fails.</span></span>

<span data-ttu-id="a73bf-160">Nakonec značka vytvoří také skupinu ovládacích prvků, které se použijí pro odebrání kurzu od vybraného instruktora.</span><span class="sxs-lookup"><span data-stu-id="a73bf-160">Finally, the markup also creates a group of controls to use for removing a course from the selected instructor.</span></span>

<span data-ttu-id="a73bf-161">V *InstructorsCourses.aspx.cs*přidejte příkaz using:</span><span class="sxs-lookup"><span data-stu-id="a73bf-161">In *InstructorsCourses.aspx.cs*, add a using statement:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample6.cs)]

<span data-ttu-id="a73bf-162">Přidejte metodu pro vyplňování dvou rozevíracích seznamů, které zobrazují kurzy:</span><span class="sxs-lookup"><span data-stu-id="a73bf-162">Add a method for populating the two drop-down lists that display courses:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample7.cs)]

<span data-ttu-id="a73bf-163">Tento kód získá všechny kurzy ze sady entit `Courses` a získá kurzy z navigační vlastnosti `Courses` entity `Person` pro vybraného instruktora.</span><span class="sxs-lookup"><span data-stu-id="a73bf-163">This code gets all courses from the `Courses` entity set and gets the courses from the `Courses` navigation property of the `Person` entity for the selected instructor.</span></span> <span data-ttu-id="a73bf-164">Pak určuje, které kurzy jsou přiřazeny k tomuto instruktorovi a odpovídajícím způsobem naplní rozevírací seznamy.</span><span class="sxs-lookup"><span data-stu-id="a73bf-164">It then determines which courses are assigned to that instructor and populates the drop-down lists accordingly.</span></span>

<span data-ttu-id="a73bf-165">Přidejte obslužnou rutinu pro událost `Click` `Assign`ho tlačítka:</span><span class="sxs-lookup"><span data-stu-id="a73bf-165">Add a handler for the `Assign` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample8.cs)]

<span data-ttu-id="a73bf-166">Tento kód získá `Person` entitu pro vybraného instruktora, získá `Course` entitu pro vybraný kurz a přidá vybraný kurz do navigační vlastnosti `Courses` entity `Person` instruktoru.</span><span class="sxs-lookup"><span data-stu-id="a73bf-166">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and adds the selected course to the `Courses` navigation property of the instructor's `Person` entity.</span></span> <span data-ttu-id="a73bf-167">Poté uloží změny do databáze a znovu naplní rozevírací seznamy, takže výsledky lze zobrazit okamžitě.</span><span class="sxs-lookup"><span data-stu-id="a73bf-167">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="a73bf-168">Přidejte obslužnou rutinu pro událost `Click` `Remove`ho tlačítka:</span><span class="sxs-lookup"><span data-stu-id="a73bf-168">Add a handler for the `Remove` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample9.cs)]

<span data-ttu-id="a73bf-169">Tento kód získá `Person` entitu pro vybraného instruktora, získá `Course` entitu pro vybraný kurz a odebere vybraný kurz z `Courses` navigační vlastnosti entity `Person`.</span><span class="sxs-lookup"><span data-stu-id="a73bf-169">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and removes the selected course from the `Person` entity's `Courses` navigation property.</span></span> <span data-ttu-id="a73bf-170">Poté uloží změny do databáze a znovu naplní rozevírací seznamy, takže výsledky lze zobrazit okamžitě.</span><span class="sxs-lookup"><span data-stu-id="a73bf-170">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="a73bf-171">Přidejte kód do metody `Page_Load`, která zajistí, že chybové zprávy nejsou viditelné, pokud není k dispozici žádná chyba, a přidejte obslužné rutiny pro události `DataBound` a `SelectedIndexChanged` v rozevíracím seznamu instruktory k naplnění rozevíracích seznamů kurzů:</span><span class="sxs-lookup"><span data-stu-id="a73bf-171">Add code to the `Page_Load` method that makes sure the error messages are not visible when there's no error to report, and add handlers for the `DataBound` and `SelectedIndexChanged` events of the instructors drop-down list to populate the courses drop-down lists:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample10.cs)]

<span data-ttu-id="a73bf-172">Spusťte stránku.</span><span class="sxs-lookup"><span data-stu-id="a73bf-172">Run the page.</span></span>

<span data-ttu-id="a73bf-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a73bf-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span></span>

<span data-ttu-id="a73bf-174">Vyberte instruktora.</span><span class="sxs-lookup"><span data-stu-id="a73bf-174">Select an instructor.</span></span> <span data-ttu-id="a73bf-175">V rozevíracím seznamu <strong>přiřadit kurz</strong> se zobrazí kurzy, které instruktor neučí, a v rozevíracím seznamu <strong>Odebrat kurz</strong> se zobrazí kurzy, ke kterým je instruktor již přiřazen.</span><span class="sxs-lookup"><span data-stu-id="a73bf-175">The <strong>Assign a Course</strong> drop-down list displays the courses that the instructor doesn't teach, and the <strong>Remove a Course</strong> drop-down list displays the courses that the instructor is already assigned to.</span></span> <span data-ttu-id="a73bf-176">V části <strong>přiřadit kurz</strong> vyberte kurz a pak klikněte na <strong>přiřadit</strong>.</span><span class="sxs-lookup"><span data-stu-id="a73bf-176">In the <strong>Assign a Course</strong> section, select a course and then click <strong>Assign</strong>.</span></span> <span data-ttu-id="a73bf-177">Kurz se přesune do rozevíracího seznamu <strong>Odebrat kurz</strong> .</span><span class="sxs-lookup"><span data-stu-id="a73bf-177">The course moves to the <strong>Remove a Course</strong> drop-down list.</span></span> <span data-ttu-id="a73bf-178">V části <strong>Odebrat kurz</strong> vyberte kurz a klikněte na <strong>Odebrat</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="a73bf-178">Select a course in the <strong>Remove a Course</strong> section and click <strong>Remove</strong><em>.</em></span></span> <span data-ttu-id="a73bf-179">Kurz se přesune do rozevíracího seznamu <strong>přiřadit kurz</strong> .</span><span class="sxs-lookup"><span data-stu-id="a73bf-179">The course moves to the <strong>Assign a Course</strong> drop-down list.</span></span>

<span data-ttu-id="a73bf-180">Už jste viděli několik dalších způsobů, jak pracovat se souvisejícími daty.</span><span class="sxs-lookup"><span data-stu-id="a73bf-180">You have now seen some more ways to work with related data.</span></span> <span data-ttu-id="a73bf-181">V následujícím kurzu se dozvíte, jak pomocí dědičnosti v datovém modelu zlepšit udržovatelnost aplikace.</span><span class="sxs-lookup"><span data-stu-id="a73bf-181">In the following tutorial, you'll learn how to use inheritance in the data model to improve the maintainability of your application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a73bf-182">[Předchozí](the-entity-framework-and-aspnet-getting-started-part-4.md)
> [Další](the-entity-framework-and-aspnet-getting-started-part-6.md)</span><span class="sxs-lookup"><span data-stu-id="a73bf-182">[Previous](the-entity-framework-and-aspnet-getting-started-part-4.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-6.md)</span></span>
