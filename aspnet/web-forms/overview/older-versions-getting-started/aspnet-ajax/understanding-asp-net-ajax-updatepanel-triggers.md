---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: Porozumění aktivačním událostem ASP.NET AJAX prvku | Microsoft Docs
author: scottcate
description: Při práci v editoru značek v aplikaci Visual Studio si můžete všimnout (z IntelliSense), že existují dva podřízené prvky ovládacího prvku UpdatePanel. Jedna z Wh...
ms.author: riande
ms.date: 03/12/2008
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: b1cc869f373d4f8283b4d92af74707c3f11fef61
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/28/2019
ms.locfileid: "74588830"
---
# <a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="81006-104">Principy aktivačních událostí UpdatePanel technologie ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="81006-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>

<span data-ttu-id="81006-105">[Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="81006-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="81006-106">Stáhnout PDF</span><span class="sxs-lookup"><span data-stu-id="81006-106">Download PDF</span></span>](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="81006-107">Při práci v editoru značek v aplikaci Visual Studio si můžete všimnout (z IntelliSense), že existují dva podřízené prvky ovládacího prvku UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="81006-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="81006-108">Jedním z nich je prvek Triggers, který určuje ovládací prvky na stránce (nebo uživatelský ovládací prvek, pokud používáte), které aktivují částečné vykreslení ovládacího prvku UpdatePanel, ve kterém je element umístěn.</span><span class="sxs-lookup"><span data-stu-id="81006-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>

## <a name="introduction"></a><span data-ttu-id="81006-109">Úvod</span><span class="sxs-lookup"><span data-stu-id="81006-109">Introduction</span></span>

<span data-ttu-id="81006-110">Technologie Microsoftu pro ASP.NET přináší objektově orientovaný a řízený programovací model a podílí se na nich s výhodami zkompilovaného kódu.</span><span class="sxs-lookup"><span data-stu-id="81006-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="81006-111">Model zpracování na straně serveru má však několik nevýhod, které je součástí technologie, mnohé z nich lze řešit novými funkcemi obsaženými v rozšířeních Microsoft ASP.NET 3,5 AJAX.</span><span class="sxs-lookup"><span data-stu-id="81006-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="81006-112">Tato rozšíření umožňují mnoho nových bohatých funkcí klienta, včetně částečného vykreslování stránek bez nutnosti úplné aktualizace stránky, možnosti přístupu k webovým službám prostřednictvím klientského skriptu (včetně rozhraní API pro profilaci ASP.NET) a rozsáhlého rozhraní API na straně klienta. Navrženo pro zrcadlení mnoha řídicích schémat, které jsou vidět v ASP.NET sadě ovládacích prvků na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="81006-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="81006-113">Tento dokument White Paper prověřuje funkce triggerů XML rozhraní ASP.NET AJAX `UpdatePanel` komponenty.</span><span class="sxs-lookup"><span data-stu-id="81006-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="81006-114">Triggery XML poskytují podrobnou kontrolu nad komponentami, které mohou způsobit částečné vykreslení pro konkrétní ovládací prvky UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="81006-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="81006-115">Tento dokument White Paper vychází z verze beta 2 .NET Framework 3,5 a Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="81006-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="81006-116">Rozšíření ASP.NET AJAX, dříve jako sestavení, která cílí na ASP.NET 2,0, jsou nyní integrována do knihovny základních tříd .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="81006-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="81006-117">Tento dokument White Paper také předpokládá, že budete pracovat se sadou Visual Studio 2008, nikoli s nástrojem Visual Web Developer Express a bude poskytovat návody v závislosti na uživatelském rozhraní sady Visual Studio (i když budou výpisy kódu plně kompatibilní bez ohledu na vývojové prostředí).</span><span class="sxs-lookup"><span data-stu-id="81006-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## <a name="triggers"></a><span data-ttu-id="81006-118">*Triggery*</span><span class="sxs-lookup"><span data-stu-id="81006-118">*Triggers*</span></span>

<span data-ttu-id="81006-119">Aktivační události pro daný prvek UpdatePanel ve výchozím nastavení automaticky obsahují všechny podřízené ovládací prvky, které vyvolávají zpětné volání, včetně (například) ovládací prvky TextBox, které mají svou `AutoPostBack` vlastnost nastavenou na **hodnotu true**.</span><span class="sxs-lookup"><span data-stu-id="81006-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="81006-120">Triggery ale mohou být také zahrnuty deklarativně pomocí značek; To se provádí v sekci `<triggers>` deklarace ovládacího prvku UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="81006-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="81006-121">I když k aktivačním událostem lze získat přístup prostřednictvím vlastnosti kolekce `Triggers`, doporučuje se registrovat jakékoli částečné triggery vykreslení v době běhu (například pokud ovládací prvek není k dispozici v době návrhu) pomocí metody `RegisterAsyncPostBackControl(Control)` objektu ScriptManager pro vaši stránku v rámci události `Page_Load`.</span><span class="sxs-lookup"><span data-stu-id="81006-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="81006-122">Mějte na paměti, že stránky jsou bezstavové, a proto byste tyto ovládací prvky měli znovu zaregistrovat při každém jejich vytvoření.</span><span class="sxs-lookup"><span data-stu-id="81006-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="81006-123">Automatické zahrnutí podřízených triggerů může být také zakázáno (takže podřízené ovládací prvky, které vytvářejí postbacky, nejsou automaticky spouštěny pomocí částečného vykreslení) nastavením vlastnosti `ChildrenAsTriggers` na **hodnotu false (NEPRAVDA**).</span><span class="sxs-lookup"><span data-stu-id="81006-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="81006-124">To umožňuje největší flexibilitu při přiřazování, které konkrétní ovládací prvky mohou vyvolat vykreslování stránky, a je doporučeno, aby vývojář mohl na událost reagovat, nikoli v případě, že bude zpracovávat události, které mohou nastat.</span><span class="sxs-lookup"><span data-stu-id="81006-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="81006-125">Všimněte si, že když jsou ovládací prvky UpdatePanel vnořené, pokud je li UpdateMode nastavena nastaveno na **podmíněný**, pokud je podřízený prvek UpdatePanel aktivován, ale nadřazený objekt není, bude obnoven pouze podřízený prvek UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="81006-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="81006-126">Pokud je však nadřazený prvek UpdatePanel aktualizován, pak bude podřízený prvek UpdatePanel také aktualizován.</span><span class="sxs-lookup"><span data-stu-id="81006-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## <a name="the-lttriggersgt-element"></a><span data-ttu-id="81006-127">*&lt;Trigger&gt; elementu*</span><span class="sxs-lookup"><span data-stu-id="81006-127">*The &lt;Triggers&gt; Element*</span></span>

<span data-ttu-id="81006-128">Při práci v editoru značek v aplikaci Visual Studio si můžete všimnout (z IntelliSense), že existují dva podřízené prvky `UpdatePanel`ho ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="81006-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="81006-129">Nejčastěji používaný prvek je `<ContentTemplate>` prvek, který v podstatě zapouzdřuje obsah, který bude uložen na panelu aktualizace (obsah, pro který povolujeme částečné vykreslování).</span><span class="sxs-lookup"><span data-stu-id="81006-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="81006-130">Druhý prvek je prvek `<Triggers>`, který určuje ovládací prvky na stránce (nebo uživatelský ovládací prvek, pokud používáte), které aktivují částečné vykreslení ovládacího prvku UpdatePanel, ve kterém &lt;Trigger&gt; elementu.</span><span class="sxs-lookup"><span data-stu-id="81006-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="81006-131">Element `<Triggers>` může obsahovat libovolný počet všech dvou podřízených uzlů: `<asp:AsyncPostBackTrigger>` a `<asp:PostBackTrigger>`.</span><span class="sxs-lookup"><span data-stu-id="81006-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="81006-132">Oba přijmou dva atributy, `ControlID` a `EventName`a mohou určit kterýkoli ovládací prvek v rámci aktuální jednotky zapouzdření (například pokud se ovládací prvek UpdatePanel nachází v ovládacím prvku webového uživatele, neměli byste se pokoušet o odkaz na ovládací prvek na stránce, na které se uživatelský ovládací prvek nachází).</span><span class="sxs-lookup"><span data-stu-id="81006-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="81006-133">Element `<asp:AsyncPostBackTrigger>` je zvláště užitečný v tom, že může cílit na jakoukoli událost z ovládacího prvku, který existuje jako podřízený *objekt ovládacího prvku UpdatePanel v* jednotce zapouzdření, nikoli pouze ovládací prvek UpdatePanel, pod kterým je tato aktivační událost podřízená.</span><span class="sxs-lookup"><span data-stu-id="81006-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="81006-134">Proto může být proveden jakýkoli ovládací prvek pro aktivaci částečné aktualizace stránky.</span><span class="sxs-lookup"><span data-stu-id="81006-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="81006-135">Podobně element `<asp:PostBackTrigger>` lze použít k aktivaci částečného vykreslování stránky, ale ten, který vyžaduje úplnou zpáteční cestu k serveru.</span><span class="sxs-lookup"><span data-stu-id="81006-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="81006-136">Tento element Trigger lze také použít k vynucení zobrazení celé stránky, pokud by ovládací prvek jinak spouštěl částečnou vykreslování stránky (například, když ovládací prvek `Button` existuje v prvku `<ContentTemplate>` ovládacího prvku UpdatePanel).</span><span class="sxs-lookup"><span data-stu-id="81006-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="81006-137">Znovu element PostBackTrigger může určit jakýkoli ovládací prvek, který je podřízeným ovládacím prvkem ovládacího prvku UpdatePanel v aktuální jednotce zapouzdření.</span><span class="sxs-lookup"><span data-stu-id="81006-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## <a name="lttriggersgt-element-reference"></a><span data-ttu-id="81006-138">*&gt; odkaz na element &lt;triggery*</span><span class="sxs-lookup"><span data-stu-id="81006-138">*&lt;Triggers&gt; Element Reference*</span></span>

<span data-ttu-id="81006-139">*Následníky kódu:*</span><span class="sxs-lookup"><span data-stu-id="81006-139">*Markup Descendants:*</span></span>

| <span data-ttu-id="81006-140">**Inteligentní**</span><span class="sxs-lookup"><span data-stu-id="81006-140">**Tag**</span></span> | <span data-ttu-id="81006-141">**Popis**</span><span class="sxs-lookup"><span data-stu-id="81006-141">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="81006-142">&lt;ASP: AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="81006-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="81006-143">Určuje ovládací prvek a událost, které způsobí částečnou aktualizaci stránky ovládacího prvku UpdatePanel, který obsahuje tento odkaz triggeru.</span><span class="sxs-lookup"><span data-stu-id="81006-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="81006-144">&lt;ASP: PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="81006-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="81006-145">Určuje ovládací prvek a událost, které způsobí, že dojde k úplné aktualizaci stránky (úplná aktualizace stránky).</span><span class="sxs-lookup"><span data-stu-id="81006-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="81006-146">Tato značka se dá použít k vynucení plné aktualizace, když ovládací prvek jinak aktivuje částečné vykreslování.</span><span class="sxs-lookup"><span data-stu-id="81006-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## <a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="81006-147">*Návod: triggery mezi různými UpdatePanel*</span><span class="sxs-lookup"><span data-stu-id="81006-147">*Walkthrough: Cross-UpdatePanel Triggers*</span></span>

1. <span data-ttu-id="81006-148">Vytvořte novou stránku ASP.NET s nastaveným objektem ScriptManager pro povolení částečného vykreslování.</span><span class="sxs-lookup"><span data-stu-id="81006-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="81006-149">Přidat do této stránky dva prvky UpdatePanel – v prvním případě přidejte ovládací prvek popisek (Label1) a dva ovládací prvky tlačítka (Button1 a Button2).</span><span class="sxs-lookup"><span data-stu-id="81006-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="81006-150">Button1 by měl vyslovit kliknout pro aktualizaci obou a Button2 by se mělo jednat o to, že tuto možnost můžete aktualizovat nebo něco na těchto řádcích.</span><span class="sxs-lookup"><span data-stu-id="81006-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="81006-151">V druhém prvku UpdatePanel, zahrňte pouze ovládací prvek popisek (Label2), ale nastavte jeho vlastnost ForeColor na jinou hodnotu než výchozí, abyste ho rozlišili.</span><span class="sxs-lookup"><span data-stu-id="81006-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="81006-152">Nastavte vlastnost li UpdateMode nastavena obou značek UpdatePanel na **podmíněný**.</span><span class="sxs-lookup"><span data-stu-id="81006-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

<span data-ttu-id="81006-153">**Výpis 1: označení pro default. aspx:**</span><span class="sxs-lookup"><span data-stu-id="81006-153">**Listing 1: Markup for default.aspx:**</span></span> 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="81006-154">V obslužné rutině události Click pro Button1 nastavte Label1. text a Label2. text na něco závislého na čase (například DateTime. Now. ToLongTimeString ()).</span><span class="sxs-lookup"><span data-stu-id="81006-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="81006-155">Pro obslužnou rutinu události Click pro Button2 nastavte pouze Label1. text na hodnotu závislou na čase.</span><span class="sxs-lookup"><span data-stu-id="81006-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

<span data-ttu-id="81006-156">**Výpis 2: CodeBehind (oříznuto) v default.aspx.cs:**</span><span class="sxs-lookup"><span data-stu-id="81006-156">**Listing 2: Codebehind (trimmed) in default.aspx.cs:**</span></span> 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="81006-157">Stisknutím klávesy F5 Sestavte a spusťte projekt.</span><span class="sxs-lookup"><span data-stu-id="81006-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="81006-158">Všimněte si, že když kliknete na aktualizovat oba panely, oba popisky změní text; Když však kliknete na tlačítko Aktualizovat tento panel, pouze aktualizace Label1.</span><span class="sxs-lookup"><span data-stu-id="81006-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="81006-159">([Kliknutím zobrazíte obrázek v plné velikosti.](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="81006-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>

## <a name="under-the-hood"></a><span data-ttu-id="81006-160">*Pod kapotou*</span><span class="sxs-lookup"><span data-stu-id="81006-160">*Under the Hood*</span></span>

<span data-ttu-id="81006-161">S využitím příkladu, který jsme právě nastavili, můžeme pohlížet na to, co ASP.NET AJAX dělá a jak funguje naše více panelů UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="81006-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="81006-162">Abychom to mohli udělat, budeme pracovat s generovaným zdrojem HTML stránky a také s použitím rozšíření Mozilla Firefox s názvem FireBug – s ním můžeme snadno kontrolovat zpětná volání AJAX.</span><span class="sxs-lookup"><span data-stu-id="81006-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="81006-163">Také použijeme Nástroj pro odrážející rozhraní .NET Lutz roeder.</span><span class="sxs-lookup"><span data-stu-id="81006-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="81006-164">Oba tyto nástroje jsou volně dostupné online a dají se najít pomocí hledání v Internetu.</span><span class="sxs-lookup"><span data-stu-id="81006-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="81006-165">Zkoumání zdrojového kódu stránky ukazuje téměř nic z obyčejného. ovládací prvky UpdatePanel jsou vykresleny jako kontejnery `<div>` a je možné zobrazit prostředek skriptu, který je součástí `<asp:ScriptManager>`.</span><span class="sxs-lookup"><span data-stu-id="81006-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="81006-166">K dispozici jsou také některé nové volání jazyka PageRequestManager specifická pro AJAX, která jsou interní pro knihovnu klientských skriptů AJAX.</span><span class="sxs-lookup"><span data-stu-id="81006-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="81006-167">Nakonec uvidíme dva kontejnery UpdatePanel – jeden s vykreslenými `<input>` tlačítky s těmito dvěma ovládacími prvky `<asp:Label>` vykreslenými jako kontejnery `<span>`.</span><span class="sxs-lookup"><span data-stu-id="81006-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="81006-168">(Pokud zkontrolujete stromovou strukturu modelu DOM v FireBug, všimnete si, že popisky jsou ztlumené, aby označovaly, že nevytvářejí viditelný obsah).</span><span class="sxs-lookup"><span data-stu-id="81006-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="81006-169">Klikněte na tlačítko Aktualizovat tento panel a Všimněte si, že se hlavní UpdatePanel bude aktualizovat s aktuálním časem serveru.</span><span class="sxs-lookup"><span data-stu-id="81006-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="81006-170">V FireBug klikněte na kartu konzola, abyste mohli žádost kontrolovat.</span><span class="sxs-lookup"><span data-stu-id="81006-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="81006-171">Nejprve prověřte parametry žádosti POST:</span><span class="sxs-lookup"><span data-stu-id="81006-171">Examine the POST request parameters first:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="81006-172">([Kliknutím zobrazíte obrázek v plné velikosti.](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="81006-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>

<span data-ttu-id="81006-173">Všimněte si, že ovládací prvek UpdatePanel indikuje kód AJAX na straně serveru, který přesně vyvolal řídicí strom pomocí parametru ScriptManager1: `Button1` ovládacího prvku `UpdatePanel1`.</span><span class="sxs-lookup"><span data-stu-id="81006-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="81006-174">Nyní klikněte na tlačítko Aktualizovat oba panely.</span><span class="sxs-lookup"><span data-stu-id="81006-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="81006-175">Pak se podíváme na odpověď, v řetězci se zobrazí řada proměnných, které jsou odděleny kanálem. Konkrétně se zobrazí nejvyšší prvek UpdatePanel, `UpdatePanel1`, má celý kód HTML odeslaný do prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="81006-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="81006-176">Knihovna klientského skriptu AJAX nahrazuje původní obsah HTML pomocí nového obsahu prostřednictvím vlastnosti `.innerHTML`, a proto Server odesílá změněný obsah ze serveru jako kód HTML.</span><span class="sxs-lookup"><span data-stu-id="81006-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="81006-177">Nyní klikněte na tlačítko Aktualizovat oba panely a prověřte výsledky ze serveru.</span><span class="sxs-lookup"><span data-stu-id="81006-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="81006-178">Výsledky jsou velmi podobné – oba UpdatePanel dostávají ze serveru nový kód HTML.</span><span class="sxs-lookup"><span data-stu-id="81006-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="81006-179">Stejně jako u předchozího zpětného volání je odeslán další stav stránky.</span><span class="sxs-lookup"><span data-stu-id="81006-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="81006-180">Jak vidíte, protože není k provedení zpětného vyhledávání v AJAX k dispozici žádný speciální kód, knihovna skriptů klienta AJAX dokáže zachytit postbacky formuláře bez jakéhokoli dalšího kódu.</span><span class="sxs-lookup"><span data-stu-id="81006-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="81006-181">Serverové ovládací prvky automaticky využívají JavaScript, takže se automaticky neodesílají formuláře – ASP.NET automaticky vloží kód pro ověřování a stav formuláře, a to především pomocí automatického zahrnutí prostředků skriptu, třídy PostBackOptions a třídy ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="81006-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="81006-182">Například zvažte ovládací prvek CheckBox; Prověřte třídu zpětného překladu v rozhraní .NET reflektor.</span><span class="sxs-lookup"><span data-stu-id="81006-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="81006-183">Chcete-li to provést, zajistěte, aby bylo sestavení System. Web otevřeno, a přejděte na třídu `System.Web.UI.WebControls.CheckBox` a otevřete metodu `RenderInputTag`.</span><span class="sxs-lookup"><span data-stu-id="81006-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="81006-184">Vyhledejte podmíněný objekt, který kontroluje vlastnost `AutoPostBack`:</span><span class="sxs-lookup"><span data-stu-id="81006-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="81006-185">([Kliknutím zobrazíte obrázek v plné velikosti.](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="81006-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>

<span data-ttu-id="81006-186">Je-li na ovládacím prvku `CheckBox` povoleno automatické zpětné odeslání (prostřednictvím vlastnosti reASP.NET), výsledná `<input>` značka je proto vykreslena pomocí skriptu pro zpracování událostí ve svém atributu `onclick`.</span><span class="sxs-lookup"><span data-stu-id="81006-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="81006-187">Zachycení formuláře odesláním umožňuje, aby bylo ASP.NET AJAX vloženo na stránku nerušivé, což pomáhá zabránit jakýmkoli případným změnám, které by mohly nastat při použití pravděpodobně nepřesné náhrady řetězce.</span><span class="sxs-lookup"><span data-stu-id="81006-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="81006-188">Kromě toho umožňuje *jakémukoli* vlastnímu ovládacímu prvku ASP.NET využít sílu ASP.NET AJAX bez jakéhokoli dalšího kódu pro podporu jeho použití v kontejneru UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="81006-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="81006-189">Funkce `<triggers>` odpovídají hodnotám inicializovaným v volání PageRequestManager pro \_updateControls (Všimněte si, že knihovna skriptů klienta ASP.NET AJAX používá konvenci, že metody, události a názvy polí začínající podtržítkem jsou označeny jako interní a nejsou určeny pro použití vně samotné knihovny).</span><span class="sxs-lookup"><span data-stu-id="81006-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="81006-190">Díky tomu můžeme sledovat, které ovládací prvky jsou určeny k tomu, aby způsobily zpětná volání AJAX.</span><span class="sxs-lookup"><span data-stu-id="81006-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="81006-191">Řekněme například, že na stránku přidáte dva další ovládací prvky, které ponechají jeden ovládací prvek mimo prvky UpdatePanel a opouštíte ho v rámci prvku UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="81006-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="81006-192">Přidáme ovládací prvek CheckBox v horním prvku UpdatePanel a vyřaďte objekt DropDownList s řadou barev definovaných v seznamu.</span><span class="sxs-lookup"><span data-stu-id="81006-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="81006-193">Toto je nový kód:</span><span class="sxs-lookup"><span data-stu-id="81006-193">Here is the new markup:</span></span>

<span data-ttu-id="81006-194">**Výpis 3: nový kód**</span><span class="sxs-lookup"><span data-stu-id="81006-194">**Listing 3: New Markup**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="81006-195">A tady je nový kód na pozadí:</span><span class="sxs-lookup"><span data-stu-id="81006-195">And here is the new code-behind:</span></span>

<span data-ttu-id="81006-196">**Výpis 4: CodeBehind**</span><span class="sxs-lookup"><span data-stu-id="81006-196">**Listing 4: Codebehind**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="81006-197">Nápadem na této stránce je, že rozevírací seznam vybere jednu ze tří barev k zobrazení druhého popisku, zda zaškrtávací políčko určuje, zda je tučné a zda popisky zobrazují datum i čas.</span><span class="sxs-lookup"><span data-stu-id="81006-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="81006-198">Zaškrtávací políčko by nemělo způsobit aktualizaci AJAX, ale rozevírací seznam by měl, i když není v ovládacím prvku UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="81006-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="81006-199">([Kliknutím zobrazíte obrázek v plné velikosti.](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="81006-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>

<span data-ttu-id="81006-200">Jak je znázorněno na obrázku výše, bylo kliknutí na tlačítko poslední na pravé tlačítko Aktualizovat tento panel, což aktualizovalo horní čas nezávisle na nejnižším čase.</span><span class="sxs-lookup"><span data-stu-id="81006-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="81006-201">Datum bylo také přepnuto mezi kliknutím, protože datum je viditelné v dolním popisku.</span><span class="sxs-lookup"><span data-stu-id="81006-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="81006-202">Nakonec je barva dolního popisku: aktualizovala se z poslední doby, než je text popisku, který ukazuje, že je stav ovládacího prvku důležitý, a uživatelé očekávají, že budou zachovány prostřednictvím zpětného volání AJAX.</span><span class="sxs-lookup"><span data-stu-id="81006-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="81006-203">Čas se *ale*neaktualizoval.</span><span class="sxs-lookup"><span data-stu-id="81006-203">*However*, the time was not updated.</span></span> <span data-ttu-id="81006-204">Čas byl automaticky znovu vyplněný po trvalosti pole \_\_VIEWSTATE stránky, která je interpretována modulem runtime ASP.NET při opětovném vykreslování ovládacího prvku na serveru.</span><span class="sxs-lookup"><span data-stu-id="81006-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="81006-205">Kód serveru ASP.NET AJAX nerozpozná, v jakých metodách se mění stav ovládacích prvků. jednoduše se znovu naplní ze stavu zobrazení a pak spustí události, které jsou vhodné.</span><span class="sxs-lookup"><span data-stu-id="81006-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="81006-206">Mělo by být navázáno, ale čas, který byl inicializován během události\_načítání stránky, byl čas správně zvýšen.</span><span class="sxs-lookup"><span data-stu-id="81006-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="81006-207">V důsledku toho by vývojáři měli být přistupují opatrněi, že se během příslušných obslužných rutin událostí spouští příslušný kód, a vyhněte se použití stránky\_načíst, když bude obslužná rutina události ovládacího prvku vhodná.</span><span class="sxs-lookup"><span data-stu-id="81006-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="81006-208">Přehled</span><span class="sxs-lookup"><span data-stu-id="81006-208">Summary</span></span>

<span data-ttu-id="81006-209">Ovládací prvek UpdatePanel rozšíření ASP.NET AJAX je univerzální a může využít řadu metod pro identifikaci řídicích událostí, které by měly způsobit aktualizaci.</span><span class="sxs-lookup"><span data-stu-id="81006-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="81006-210">Podporuje automatické aktualizace svými podřízenými ovládacími prvky, ale může také reagovat na události řízení jinde na stránce.</span><span class="sxs-lookup"><span data-stu-id="81006-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="81006-211">Chcete-li snížit potenciál pro zatížení serveru, je doporučeno, aby vlastnost `ChildrenAsTriggers` ovládacího prvku UpdatePanel byla nastavena na hodnotu `false`a aby byly události místo zahrnuty ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="81006-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="81006-212">To také brání jakýmkoli nepotřebným událostem v tom, že způsobují potenciálně nežádoucí účinky, včetně ověření a změny vstupních polí.</span><span class="sxs-lookup"><span data-stu-id="81006-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="81006-213">Tyto typy chyb může být obtížné izolovat, protože se stránka aktualizuje transparentně na uživatele a příčina může být proto okamžitě zřejmá.</span><span class="sxs-lookup"><span data-stu-id="81006-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="81006-214">Prozkoumáním vnitřních pracovních segmentů modelu zachycení formuláře ASP.NET AJAX jsme dokázali určit, že používá rozhraní, které už poskytuje ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="81006-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="81006-215">V takovém případě zachovává maximální kompatibilitu s ovládacími prvky navrženými pomocí stejné architektury a intrudes na všech dalších JavaScriptu napsaných pro stránku.</span><span class="sxs-lookup"><span data-stu-id="81006-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="81006-216">Dostupnost</span><span class="sxs-lookup"><span data-stu-id="81006-216">Bio</span></span>

<span data-ttu-id="81006-217">Rob Paveza je zkušeným vývojářem aplikací .NET na Terralever ([www.Terralever.com](http://www.terralever.com)), což je přední interaktivní podnik pro prodej v Tempe, AZ.</span><span class="sxs-lookup"><span data-stu-id="81006-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="81006-218">Dá se získat na [robpaveza@gmail.com](mailto:robpaveza@gmail.com)a jeho blog se nachází na [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span><span class="sxs-lookup"><span data-stu-id="81006-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="81006-219">Scott Cate spolupracuje s webovými technologiemi Microsoftu od 1997 a je prezidentem myKB.com ([www.myKB.com](http://www.myKB.com)), kde se specializuje při psaní aplikací založených na ASP.NET zaměřené na softwarová řešení ve znalostní bázi Knowledge Base.</span><span class="sxs-lookup"><span data-stu-id="81006-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="81006-220">Scott se dá kontaktovat e-mailem na [scott.cate@myKB.com](mailto:scott.cate@myKB.com) nebo jeho blogu na [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="81006-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="81006-221">[Předchozí](understanding-partial-page-updates-with-asp-net-ajax.md)
> [Další](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="81006-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>
