---
uid: web-pages/overview/data/working-with-files
title: Práce se soubory na webu ASP.NET Web Pages (Razor) | Microsoft Docs
author: Rick-Anderson
description: Tato kapitola vysvětluje, jak číst, zapisovat, přidávat, odstraňovat a nahrávat soubory.
ms.author: riande
ms.date: 02/20/2014
ms.assetid: eee916e4-ba4c-439a-a24e-68df7d45a569
msc.legacyurl: /web-pages/overview/data/working-with-files
msc.type: authoredcontent
ms.openlocfilehash: 684c47a8a8480dc040e5144144577c94c35d39e5
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/06/2020
ms.locfileid: "78642364"
---
# <a name="working-with-files-in-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="1b862-103">Práce se soubory na webu ASP.NET Web Pages (Razor)</span><span class="sxs-lookup"><span data-stu-id="1b862-103">Working with Files in an ASP.NET Web Pages (Razor) Site</span></span>

<span data-ttu-id="1b862-104">tím, že [FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="1b862-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="1b862-105">Tento článek vysvětluje, jak číst, zapisovat, přidávat, odstraňovat a nahrávat soubory na webu ASP.NET Web Pages (Razor).</span><span class="sxs-lookup"><span data-stu-id="1b862-105">This article explains how to read, write, append, delete, and upload files in an ASP.NET Web Pages (Razor) site.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="1b862-106">Pokud chcete nahrát obrázky a manipulovat s nimi (například je překlopit nebo změnit jejich velikost), přečtěte si téma [práce s obrázky na webu ASP.NET Web Pages](/aspnet/web-pages/overview/ui-layouts-and-themes/9-working-with-images).</span><span class="sxs-lookup"><span data-stu-id="1b862-106">If you want to upload images and manipulate them (for example, flip or resize them), see [Working with Images in an ASP.NET Web Pages Site](/aspnet/web-pages/overview/ui-layouts-and-themes/9-working-with-images).</span></span>
> 
> 
> <span data-ttu-id="1b862-107">**Co se naučíte:**</span><span class="sxs-lookup"><span data-stu-id="1b862-107">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="1b862-108">Jak vytvořit textový soubor a zapsat do něj data.</span><span class="sxs-lookup"><span data-stu-id="1b862-108">How to create a text file and write data to it.</span></span>
> - <span data-ttu-id="1b862-109">Postup připojení dat k existujícímu souboru.</span><span class="sxs-lookup"><span data-stu-id="1b862-109">How to append data to an existing file.</span></span>
> - <span data-ttu-id="1b862-110">Jak číst soubor a zobrazit z něho</span><span class="sxs-lookup"><span data-stu-id="1b862-110">How to read a file and display from it.</span></span>
> - <span data-ttu-id="1b862-111">Odstranění souborů z webu.</span><span class="sxs-lookup"><span data-stu-id="1b862-111">How to delete files from a website.</span></span>
> - <span data-ttu-id="1b862-112">Jak umožnit uživatelům odeslat jeden soubor nebo více souborů.</span><span class="sxs-lookup"><span data-stu-id="1b862-112">How to let users upload one file or multiple files.</span></span>
> 
> <span data-ttu-id="1b862-113">Jedná se o funkce ASP.NET programování, které jsou představené v článku:</span><span class="sxs-lookup"><span data-stu-id="1b862-113">These are the ASP.NET programming features introduced in the article:</span></span>
> 
> - <span data-ttu-id="1b862-114">Objekt `File`, který poskytuje způsob správy souborů.</span><span class="sxs-lookup"><span data-stu-id="1b862-114">The `File` object, which provides a way to manage files.</span></span>
> - <span data-ttu-id="1b862-115">Pomocná rutina `FileUpload`</span><span class="sxs-lookup"><span data-stu-id="1b862-115">The `FileUpload` helper.</span></span>
> - <span data-ttu-id="1b862-116">Objekt `Path`, který poskytuje metody, které umožňují pracovat s cestami a názvy souborů.</span><span class="sxs-lookup"><span data-stu-id="1b862-116">The `Path` object, which provides methods that let you manipulate path and file names.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="1b862-117">Verze softwaru použité v tomto kurzu</span><span class="sxs-lookup"><span data-stu-id="1b862-117">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="1b862-118">Webové stránky ASP.NET (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="1b862-118">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="1b862-119">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="1b862-119">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="1b862-120">V tomto kurzu se používá také WebMatrix 3.</span><span class="sxs-lookup"><span data-stu-id="1b862-120">This tutorial also works with WebMatrix 3.</span></span>

<a id="Creating_a_Text_File"></a>
## <a name="creating-a-text-file-and-writing-data-to-it"></a><span data-ttu-id="1b862-121">Vytvoření textového souboru a zápis dat do něj</span><span class="sxs-lookup"><span data-stu-id="1b862-121">Creating a Text File and Writing Data to It</span></span>

<span data-ttu-id="1b862-122">Kromě používání databáze na webu může pracovat se soubory.</span><span class="sxs-lookup"><span data-stu-id="1b862-122">In addition to using a database in your website, you might work with files.</span></span> <span data-ttu-id="1b862-123">Můžete například použít textové soubory jako jednoduchý způsob, jak ukládat data webu.</span><span class="sxs-lookup"><span data-stu-id="1b862-123">For example, you might use text files as a simple way to store data for the site.</span></span> <span data-ttu-id="1b862-124">(Textový soubor, který se používá k ukládání dat, se někdy označuje jako *plochý soubor*.) Textové soubory mohou být v různých formátech, například *txt*, *. XML*nebo *. csv* (hodnoty oddělené čárkami).</span><span class="sxs-lookup"><span data-stu-id="1b862-124">(A text file that's used to store data is sometimes called a *flat file*.) Text files can be in different formats, like *.txt*, *.xml*, or *.csv* (comma-delimited values).</span></span>

<span data-ttu-id="1b862-125">Pokud chcete ukládat data do textového souboru, můžete použít metodu `File.WriteAllText` k určení souboru, který se má vytvořit, a dat, která se do něj zapisují.</span><span class="sxs-lookup"><span data-stu-id="1b862-125">If you want to store data in a text file, you can use the `File.WriteAllText` method to specify the file to create and the data to write to it.</span></span> <span data-ttu-id="1b862-126">V tomto postupu vytvoříte stránku, která obsahuje jednoduchý formulář se třemi `input` prvky (křestní jméno, příjmení a e-mailovou adresu) a tlačítko **Odeslat** .</span><span class="sxs-lookup"><span data-stu-id="1b862-126">In this procedure, you'll create a page that contains a simple form with three `input` elements (first name, last name, and email address) and a **Submit** button.</span></span> <span data-ttu-id="1b862-127">Když uživatel formulář odešle, uloží se vstup uživatele do textového souboru.</span><span class="sxs-lookup"><span data-stu-id="1b862-127">When the user submits the form, you'll store the user's input in a text file.</span></span>

1. <span data-ttu-id="1b862-128">Pokud ještě neexistuje, vytvořte novou složku s názvem *App\_data*.</span><span class="sxs-lookup"><span data-stu-id="1b862-128">Create a new folder named *App\_Data*, if it doesn't exist already.</span></span>
2. <span data-ttu-id="1b862-129">V kořenovém adresáři webu vytvořte nový soubor s názvem *UserData. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="1b862-129">At the root of your website, create a new file named *UserData.cshtml*.</span></span>
3. <span data-ttu-id="1b862-130">Existující obsah nahraďte následujícím:</span><span class="sxs-lookup"><span data-stu-id="1b862-130">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample1.cshtml)]

    <span data-ttu-id="1b862-131">Kód HTML vytvoří formulář se třemi textovými poli.</span><span class="sxs-lookup"><span data-stu-id="1b862-131">The HTML markup creates the form with the three text boxes.</span></span> <span data-ttu-id="1b862-132">V kódu pomocí vlastnosti `IsPost` určíte, zda byla stránka odeslána před zahájením zpracování.</span><span class="sxs-lookup"><span data-stu-id="1b862-132">In the code, you use the `IsPost` property to determine whether the page has been submitted before you start processing.</span></span>

    <span data-ttu-id="1b862-133">Prvním úkolem je získat vstup uživatele a přiřadit ho k proměnným.</span><span class="sxs-lookup"><span data-stu-id="1b862-133">The first task is to get the user input and assign it to variables.</span></span> <span data-ttu-id="1b862-134">Kód pak zřetězí hodnoty samostatných proměnných do jednoho řetězce s oddělovači, který je pak uložen v jiné proměnné.</span><span class="sxs-lookup"><span data-stu-id="1b862-134">The code then concatenates the values of the separate variables into one comma-delimited string, which is then stored in a different variable.</span></span> <span data-ttu-id="1b862-135">Všimněte si, že oddělovač čárky je řetězec obsažený v uvozovkách (","), protože do velkého řetězce, který vytváříte, nebudete dělit čárkami.</span><span class="sxs-lookup"><span data-stu-id="1b862-135">Notice that the comma separator is a string contained in quotation marks (","), because you're literally embedding a comma into the big string that you're creating.</span></span> <span data-ttu-id="1b862-136">Na konci dat, která zřetězete společně, přidáte `Environment.NewLine`.</span><span class="sxs-lookup"><span data-stu-id="1b862-136">At the end of the data that you concatenate together, you add `Environment.NewLine`.</span></span> <span data-ttu-id="1b862-137">Tím se přidá konec řádku (znak nového řádku).</span><span class="sxs-lookup"><span data-stu-id="1b862-137">This adds a line break (a newline character).</span></span> <span data-ttu-id="1b862-138">To, co vytváříte se všemi zřetězením, je řetězec, který vypadá takto:</span><span class="sxs-lookup"><span data-stu-id="1b862-138">What you're creating with all this concatenation is a string that looks like this:</span></span>

    [!code-css[Main](working-with-files/samples/sample2.css)]

    <span data-ttu-id="1b862-139">(Na konci neviditelného konce řádku.)</span><span class="sxs-lookup"><span data-stu-id="1b862-139">(With an invisible line break at the end.)</span></span>

    <span data-ttu-id="1b862-140">Pak vytvoříte proměnnou (`dataFile`), která obsahuje umístění a název souboru, do kterého se budou ukládat data.</span><span class="sxs-lookup"><span data-stu-id="1b862-140">You then create a variable (`dataFile`) that contains the location and name of the file to store the data in.</span></span> <span data-ttu-id="1b862-141">Nastavení umístění vyžaduje speciální zpracování.</span><span class="sxs-lookup"><span data-stu-id="1b862-141">Setting the location requires some special handling.</span></span> <span data-ttu-id="1b862-142">V rámci webů je to špatný postup, jak odkazovat v kódu na absolutní cesty, jako je *C:\Folder\File.txt* pro soubory na webovém serveru.</span><span class="sxs-lookup"><span data-stu-id="1b862-142">In websites, it's a bad practice to refer in code to absolute paths like *C:\Folder\File.txt* for files on the web server.</span></span> <span data-ttu-id="1b862-143">Pokud se web přesune, absolutní cesta bude špatná.</span><span class="sxs-lookup"><span data-stu-id="1b862-143">If a website is moved, an absolute path will be wrong.</span></span> <span data-ttu-id="1b862-144">Kromě toho pro hostovanou lokalitu (na rozdíl od na vašem počítači) obvykle neznáte, co je správná cesta při psaní kódu.</span><span class="sxs-lookup"><span data-stu-id="1b862-144">Moreover, for a hosted site (as opposed to on your own computer) you typically don't even know what the correct path is when you're writing the code.</span></span>

    <span data-ttu-id="1b862-145">Ale v některých případech (stejně jako při psaní souboru) potřebujete úplnou cestu.</span><span class="sxs-lookup"><span data-stu-id="1b862-145">But sometimes (like now, for writing a file) you do need a complete path.</span></span> <span data-ttu-id="1b862-146">Řešením je použití metody `MapPath` objektu `Server`.</span><span class="sxs-lookup"><span data-stu-id="1b862-146">The solution is to use the `MapPath` method of the `Server` object.</span></span> <span data-ttu-id="1b862-147">Tím se vrátí úplná cesta k vašemu webu.</span><span class="sxs-lookup"><span data-stu-id="1b862-147">This returns the complete path to your website.</span></span> <span data-ttu-id="1b862-148">Chcete-li získat cestu k kořenovému adresáři webu, uživatel `~` operátor (aby represen virtuální kořenový adresář webu) k `MapPath`.</span><span class="sxs-lookup"><span data-stu-id="1b862-148">To get the path for the website root, you user the `~` operator (to represen the site's virtual root) to `MapPath`.</span></span> <span data-ttu-id="1b862-149">(Do této podsložky můžete také předat název podsložky, například *~/App\_data/* , abyste získali cestu k této podsložce.) Pak můžete zřetězit Další informace do jakékoli metody, která se vrátí, aby bylo možné vytvořit úplnou cestu.</span><span class="sxs-lookup"><span data-stu-id="1b862-149">(You can also pass a subfolder name to it, like *~/App\_Data/*, to get the path for that subfolder.) You can then concatenate additional information onto whatever the method returns in order to create a complete path.</span></span> <span data-ttu-id="1b862-150">V tomto příkladu přidáte název souboru.</span><span class="sxs-lookup"><span data-stu-id="1b862-150">In this example, you add a file name.</span></span> <span data-ttu-id="1b862-151">(Další informace o tom, jak pracovat s cestami k souborům a složkám v tématu [Úvod k ASP.NET programování webových stránek pomocí syntaxe Razor](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths), si můžete přečíst.)</span><span class="sxs-lookup"><span data-stu-id="1b862-151">(You can read more about how to work with file and folder paths in [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span></span>

    <span data-ttu-id="1b862-152">Soubor se uloží do složky *Data\_aplikace* .</span><span class="sxs-lookup"><span data-stu-id="1b862-152">The file is saved in the *App\_Data* folder.</span></span> <span data-ttu-id="1b862-153">Tato složka je speciální složkou v ASP.NET, která se používá k ukládání datových souborů, jak je popsáno v tématu [Úvod k práci s databází na webech webových stránek ASP.NET](https://go.microsoft.com/fwlink/?LinkId=195209).</span><span class="sxs-lookup"><span data-stu-id="1b862-153">This folder is a special folder in ASP.NET that's used to store data files, as described in [Introduction to Working with a Database in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=195209).</span></span>

    <span data-ttu-id="1b862-154">Metoda `WriteAllText` objektu `File` zapisuje data do souboru.</span><span class="sxs-lookup"><span data-stu-id="1b862-154">The `WriteAllText` method of the `File` object writes the data to the file.</span></span> <span data-ttu-id="1b862-155">Tato metoda přijímá dva parametry: název (s cestou) souboru, do kterého se má zapisovat, a skutečná data, která mají být zapsána.</span><span class="sxs-lookup"><span data-stu-id="1b862-155">This method takes two parameters: the name (with path) of the file to write to, and the actual data to write.</span></span> <span data-ttu-id="1b862-156">Všimněte si, že název prvního parametru má `@` znak jako předponu.</span><span class="sxs-lookup"><span data-stu-id="1b862-156">Notice that the name of the first parameter has an `@` character as a prefix.</span></span> <span data-ttu-id="1b862-157">To oznamuje ASP.NET, že zadáváte doslovné řetězcový literál a že znaky jako "/" by neměly být interpretovány zvláštním způsobem.</span><span class="sxs-lookup"><span data-stu-id="1b862-157">This tells ASP.NET that you're providing a verbatim string literal, and that characters like "/" should not be interpreted in special ways.</span></span> <span data-ttu-id="1b862-158">(Další informace najdete v tématu [Úvod do webového programování ASP.NET pomocí syntaxe Razor](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="1b862-158">(For more information, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span></span>

    > [!NOTE]
    > <span data-ttu-id="1b862-159">Aby váš kód ukládal soubory do složky *\_dat aplikace* , potřebuje aplikace oprávnění ke čtení i zápisu pro tuto složku.</span><span class="sxs-lookup"><span data-stu-id="1b862-159">In order for your code to save files in the *App\_Data* folder, the application needs read-write permissions for that folder.</span></span> <span data-ttu-id="1b862-160">Ve vývojovém počítači to není obvykle problém.</span><span class="sxs-lookup"><span data-stu-id="1b862-160">On your development computer this is not typically an issue.</span></span> <span data-ttu-id="1b862-161">Když ale publikujete web na webový server poskytovatele hostingu, možná budete muset tato oprávnění výslovně nastavit.</span><span class="sxs-lookup"><span data-stu-id="1b862-161">However, when you publish your site to a hosting provider's web server, you might need to explicitly set those permissions.</span></span> <span data-ttu-id="1b862-162">Pokud spustíte tento kód na serveru poskytovatele hostingu a získáte chyby, obraťte se na poskytovatele hostingu a zjistěte, jak tato oprávnění nastavit.</span><span class="sxs-lookup"><span data-stu-id="1b862-162">If you run this code on a hosting provider's server and get errors, check with the hosting provider to find out how to set those permissions.</span></span>

- <span data-ttu-id="1b862-163">Spusťte stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="1b862-163">Run the page in a browser.</span></span> 

    ![](working-with-files/_static/image1.jpg)
- <span data-ttu-id="1b862-164">Do polí zadejte hodnoty a pak klikněte na **Odeslat**.</span><span class="sxs-lookup"><span data-stu-id="1b862-164">Enter values into the fields and then click **Submit**.</span></span>
- <span data-ttu-id="1b862-165">Zavřete prohlížeč.</span><span class="sxs-lookup"><span data-stu-id="1b862-165">Close the browser.</span></span>
- <span data-ttu-id="1b862-166">Vraťte se do projektu a aktualizujte zobrazení.</span><span class="sxs-lookup"><span data-stu-id="1b862-166">Return to the project and refresh the view.</span></span>
- <span data-ttu-id="1b862-167">Otevřete soubor *data. txt* .</span><span class="sxs-lookup"><span data-stu-id="1b862-167">Open the *data.txt* file.</span></span> <span data-ttu-id="1b862-168">Data, která jste odeslali ve formuláři, jsou v souboru.</span><span class="sxs-lookup"><span data-stu-id="1b862-168">The data you submitted in the form is in the file.</span></span> 

    ![obrazu](working-with-files/_static/image2.jpg)
- <span data-ttu-id="1b862-170">Zavřete soubor *data. txt* .</span><span class="sxs-lookup"><span data-stu-id="1b862-170">Close the *data.txt* file.</span></span>

<a id="Appending_Data"></a>
## <a name="appending-data-to-an-existing-file"></a><span data-ttu-id="1b862-171">Připojení dat k existujícímu souboru</span><span class="sxs-lookup"><span data-stu-id="1b862-171">Appending Data to an Existing File</span></span>

<span data-ttu-id="1b862-172">V předchozím příkladu jste pomocí `WriteAllText` vytvořili textový soubor, který je v něm jenom jedna část dat.</span><span class="sxs-lookup"><span data-stu-id="1b862-172">In the previous example, you used `WriteAllText` to create a text file that's got just one piece of data in it.</span></span> <span data-ttu-id="1b862-173">Pokud zavoláte metodu znovu a předáte stejný název souboru, existující soubor bude zcela přepsán.</span><span class="sxs-lookup"><span data-stu-id="1b862-173">If you call the method again and pass it the same file name, the existing file is completely overwritten.</span></span> <span data-ttu-id="1b862-174">Po vytvoření souboru však budete často chtít přidat nová data na konec souboru.</span><span class="sxs-lookup"><span data-stu-id="1b862-174">However, after you've created a file you often want to add new data to the end of the file.</span></span> <span data-ttu-id="1b862-175">To lze provést pomocí metody `AppendAllText` objektu `File`.</span><span class="sxs-lookup"><span data-stu-id="1b862-175">You can do that using the `AppendAllText` method of the `File` object.</span></span>

1. <span data-ttu-id="1b862-176">Na webu vytvořte kopii souboru *UserData. cshtml* a pojmenujte kopii *UserDataMultiple. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="1b862-176">In the website, make a copy of the *UserData.cshtml* file and name the copy *UserDataMultiple.cshtml*.</span></span>
2. <span data-ttu-id="1b862-177">Před otevírací `<!DOCTYPE html>`ovou značkou nahraďte blok kódu následujícím blokem kódu:</span><span class="sxs-lookup"><span data-stu-id="1b862-177">Replace the code block before the opening `<!DOCTYPE html>` tag with the following code block:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample3.cshtml)]

    <span data-ttu-id="1b862-178">Tento kód v předchozím příkladu obsahuje jednu změnu.</span><span class="sxs-lookup"><span data-stu-id="1b862-178">This code has one change in it from the previous example.</span></span> <span data-ttu-id="1b862-179">Místo použití `WriteAllText`používá metodu `the AppendAllText`.</span><span class="sxs-lookup"><span data-stu-id="1b862-179">Instead of using `WriteAllText`, it uses `the AppendAllText` method.</span></span> <span data-ttu-id="1b862-180">Metody jsou podobné, s tím rozdílem, že `AppendAllText` přidává data na konec souboru.</span><span class="sxs-lookup"><span data-stu-id="1b862-180">The methods are similar, except that `AppendAllText` adds the data to the end of the file.</span></span> <span data-ttu-id="1b862-181">Stejně jako u `WriteAllText``AppendAllText` vytvoří soubor, pokud ještě neexistuje.</span><span class="sxs-lookup"><span data-stu-id="1b862-181">As with `WriteAllText`, `AppendAllText` creates the file if it doesn't already exist.</span></span>
3. <span data-ttu-id="1b862-182">Spusťte stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="1b862-182">Run the page in a browser.</span></span>
4. <span data-ttu-id="1b862-183">Zadejte hodnoty pro pole a pak klikněte na **Odeslat**.</span><span class="sxs-lookup"><span data-stu-id="1b862-183">Enter values for the fields and then click **Submit**.</span></span>
5. <span data-ttu-id="1b862-184">Přidejte další data a odešlete formulář znovu.</span><span class="sxs-lookup"><span data-stu-id="1b862-184">Add more data and submit the form again.</span></span>
6. <span data-ttu-id="1b862-185">Vraťte se do projektu, klikněte pravým tlačítkem na složku projektu a pak klikněte na **aktualizovat**.</span><span class="sxs-lookup"><span data-stu-id="1b862-185">Return to your project, right-click the project folder, and then click **Refresh**.</span></span>
7. <span data-ttu-id="1b862-186">Otevřete soubor *data. txt* .</span><span class="sxs-lookup"><span data-stu-id="1b862-186">Open the *data.txt* file.</span></span> <span data-ttu-id="1b862-187">Nyní obsahuje nová data, která jste právě zadali.</span><span class="sxs-lookup"><span data-stu-id="1b862-187">It now contains the new data that you just entered.</span></span> 

    ![obrazu](working-with-files/_static/image3.jpg)

<a id="Reading_and_Displaying_Data"></a>
## <a name="reading-and-displaying-data-from-a-file"></a><span data-ttu-id="1b862-189">Čtení a zobrazování dat ze souboru</span><span class="sxs-lookup"><span data-stu-id="1b862-189">Reading and Displaying Data from a File</span></span>

<span data-ttu-id="1b862-190">I v případě, že nepotřebujete zapisovat data do textového souboru, pravděpodobně někdy budete potřebovat číst data z jedné.</span><span class="sxs-lookup"><span data-stu-id="1b862-190">Even if you don't need to write data to a text file, you'll probably sometimes need to read data from one.</span></span> <span data-ttu-id="1b862-191">K tomu můžete znovu použít objekt `File`.</span><span class="sxs-lookup"><span data-stu-id="1b862-191">To do this, you can again use the `File` object.</span></span> <span data-ttu-id="1b862-192">Objekt `File` můžete použít ke čtení každého řádku samostatně (odděleného zalomením řádku) nebo ke čtení jednotlivých položek bez ohledu na to, jak jsou oddělené.</span><span class="sxs-lookup"><span data-stu-id="1b862-192">You can use the `File` object to read each line individually (separated by line breaks) or to read individual item no matter how they're separated.</span></span>

<span data-ttu-id="1b862-193">Tento postup ukazuje, jak číst a zobrazit data, která jste vytvořili v předchozím příkladu.</span><span class="sxs-lookup"><span data-stu-id="1b862-193">This procedure shows you how to read and display the data that you created in the previous example.</span></span>

1. <span data-ttu-id="1b862-194">V kořenovém adresáři webu vytvořte nový soubor s názvem *úloha displayData. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="1b862-194">At the root of your website, create a new file named *DisplayData.cshtml*.</span></span>
2. <span data-ttu-id="1b862-195">Existující obsah nahraďte následujícím:</span><span class="sxs-lookup"><span data-stu-id="1b862-195">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample4.cshtml)]

    <span data-ttu-id="1b862-196">Kód začíná čtením souboru, který jste vytvořili v předchozím příkladu, do proměnné s názvem `userData`pomocí tohoto volání metody:</span><span class="sxs-lookup"><span data-stu-id="1b862-196">The code starts by reading the file that you created in the previous example into a variable named `userData`, using this method call:</span></span>

    [!code-css[Main](working-with-files/samples/sample5.css)]

    <span data-ttu-id="1b862-197">Kód, který se má provést, je uvnitř příkazu `if`.</span><span class="sxs-lookup"><span data-stu-id="1b862-197">The code to do this is inside an `if` statement.</span></span> <span data-ttu-id="1b862-198">Pokud chcete číst soubor, je vhodné použít metodu `File.Exists` k určení toho, zda je soubor k dispozici.</span><span class="sxs-lookup"><span data-stu-id="1b862-198">When you want to read a file, it's a good idea to use the `File.Exists` method to determine first whether the file is available.</span></span> <span data-ttu-id="1b862-199">Kód také kontroluje, zda je soubor prázdný.</span><span class="sxs-lookup"><span data-stu-id="1b862-199">The code also checks whether the file is empty.</span></span>

    <span data-ttu-id="1b862-200">Tělo stránky obsahuje dvě `foreach` smyčky, jedna vnořená uvnitř druhé.</span><span class="sxs-lookup"><span data-stu-id="1b862-200">The body of the page contains two `foreach` loops, one nested inside the other.</span></span> <span data-ttu-id="1b862-201">Vnější smyčka `foreach` získá z datového souboru vždy jeden řádek.</span><span class="sxs-lookup"><span data-stu-id="1b862-201">The outer `foreach` loop gets one line at a time from the data file.</span></span> <span data-ttu-id="1b862-202">V tomto případě jsou řádky definovány pomocí konců řádků v souboru &#8212; , kde je každá datová položka na vlastním řádku.</span><span class="sxs-lookup"><span data-stu-id="1b862-202">In this case, the lines are defined by line breaks in the file &#8212; that is, each data item is on its own line.</span></span> <span data-ttu-id="1b862-203">Vnější smyčka vytvoří novou položku (`<li>` element) uvnitř seřazeného seznamu (`<ol>` elementu).</span><span class="sxs-lookup"><span data-stu-id="1b862-203">The outer loop creates a new item (`<li>` element) inside an ordered list (`<ol>` element).</span></span>

    <span data-ttu-id="1b862-204">Vnitřní smyčka rozdělí jednotlivé datové řádky na položky (pole) pomocí čárky jako oddělovače.</span><span class="sxs-lookup"><span data-stu-id="1b862-204">The inner loop splits each data line into items (fields) using a comma as a delimiter.</span></span> <span data-ttu-id="1b862-205">(Na základě předchozího příkladu to znamená, že každý řádek obsahuje tři pole &#8212; jméno, příjmení a e-mailovou adresu, každou oddělenou čárkou.) Vnitřní smyčka také vytvoří seznam `<ul>` a zobrazí jednu položku seznamu pro každé pole v datovém řádku.</span><span class="sxs-lookup"><span data-stu-id="1b862-205">(Based on the previous example, this means that each line contains three fields &#8212; the first name, last name, and email address, each separated by a comma.) The inner loop also creates a `<ul>` list and displays one list item for each field in the data line.</span></span>

    <span data-ttu-id="1b862-206">Kód ukazuje, jak použít dva datové typy, pole a `char` datový typ.</span><span class="sxs-lookup"><span data-stu-id="1b862-206">The code illustrates how to use two data types, an array and the `char` data type.</span></span> <span data-ttu-id="1b862-207">Pole je povinné, protože metoda `File.ReadAllLines` vrací data jako pole.</span><span class="sxs-lookup"><span data-stu-id="1b862-207">The array is required because the `File.ReadAllLines` method returns data as an array.</span></span> <span data-ttu-id="1b862-208">`char` datový typ je vyžadován, protože metoda `Split` vrací `array`, ve kterém každý prvek je typu `char`.</span><span class="sxs-lookup"><span data-stu-id="1b862-208">The `char` data type is required because the `Split` method returns an `array` in which each element is of the type `char`.</span></span> <span data-ttu-id="1b862-209">(Informace o polích naleznete v tématu [Úvod do ASP.NET webového programování pomocí syntaxe Razor](https://go.microsoft.com/fwlink/?LinkId=202890#ID_CollectionsAndObjects).)</span><span class="sxs-lookup"><span data-stu-id="1b862-209">(For information about arrays, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#ID_CollectionsAndObjects).)</span></span>
3. <span data-ttu-id="1b862-210">Spusťte stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="1b862-210">Run the page in a browser.</span></span> <span data-ttu-id="1b862-211">Zobrazí se data, která jste zadali pro předchozí příklady.</span><span class="sxs-lookup"><span data-stu-id="1b862-211">The data you entered for the previous examples is displayed.</span></span> 

    ![obrazu](working-with-files/_static/image4.jpg)

> [!TIP] 
> 
> <span data-ttu-id="1b862-213">**Zobrazení dat z textového souboru s oddělovači v aplikaci Microsoft Excel**</span><span class="sxs-lookup"><span data-stu-id="1b862-213">**Displaying Data from a Microsoft Excel Comma-Delimited File**</span></span>
> 
> <span data-ttu-id="1b862-214">Pomocí aplikace Microsoft Excel můžete uložit data obsažená v tabulce jako textový soubor s oddělovači (soubor *. csv* ).</span><span class="sxs-lookup"><span data-stu-id="1b862-214">You can use Microsoft Excel to save the data contained in a spreadsheet as a comma-delimited file (*.csv* file).</span></span> <span data-ttu-id="1b862-215">Když to uděláte, soubor se uloží jako prostý text, ne ve formátu aplikace Excel.</span><span class="sxs-lookup"><span data-stu-id="1b862-215">When you do, the file is saved in plain text, not in Excel format.</span></span> <span data-ttu-id="1b862-216">Každý řádek v tabulce je oddělen zalomením řádku v textovém souboru a každá datová položka je oddělená čárkou.</span><span class="sxs-lookup"><span data-stu-id="1b862-216">Each row in the spreadsheet is separated by a line break in the text file, and each data item is separated by a comma.</span></span> <span data-ttu-id="1b862-217">Pomocí kódu zobrazeného v předchozím příkladu si můžete přečíst soubor s oddělovači v Excelu jenom změnou názvu datového souboru ve vašem kódu.</span><span class="sxs-lookup"><span data-stu-id="1b862-217">You can use the code shown in the previous example to read an Excel comma-delimited file just by changing the name of the data file in your code.</span></span>

<a id="Deleting_Files"></a>
## <a name="deleting-files"></a><span data-ttu-id="1b862-218">Odstraňování souborů</span><span class="sxs-lookup"><span data-stu-id="1b862-218">Deleting Files</span></span>

<span data-ttu-id="1b862-219">Chcete-li odstranit soubory z webu, můžete použít metodu `File.Delete`.</span><span class="sxs-lookup"><span data-stu-id="1b862-219">To delete files from your website, you can use the `File.Delete` method.</span></span> <span data-ttu-id="1b862-220">Tento postup ukazuje, jak umožnit uživatelům odstranit obrázek (soubor *. jpg* ) ze složky *imagí* , pokud znají název souboru.</span><span class="sxs-lookup"><span data-stu-id="1b862-220">This procedure shows how to let users delete an image (*.jpg* file) from an *images* folder if they know the name of the file.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="1b862-221">**Důležité** informace Na produkčním webu je obvykle možné omezit, kdo může provádět změny dat.</span><span class="sxs-lookup"><span data-stu-id="1b862-221">**Important** In a production website, you typically restrict who's allowed to make changes to the data.</span></span> <span data-ttu-id="1b862-222">Informace o tom, jak nastavit členství a způsoby, jak autorizovat uživatele k provádění úloh na webu, najdete v tématu věnovaném [Přidání zabezpečení a členství na web webových stránek ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202904).</span><span class="sxs-lookup"><span data-stu-id="1b862-222">For information about how to set up membership and about ways to authorize users to perform tasks on the site, see [Adding Security and Membership to an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202904).</span></span>

1. <span data-ttu-id="1b862-223">Na webu vytvořte podsložku s názvem *Image*.</span><span class="sxs-lookup"><span data-stu-id="1b862-223">In the website, create a subfolder named *images*.</span></span>
2. <span data-ttu-id="1b862-224">Zkopírujte jeden nebo více souborů *. jpg* do složky *imagí* .</span><span class="sxs-lookup"><span data-stu-id="1b862-224">Copy one or more *.jpg* files into the *images* folder.</span></span>
3. <span data-ttu-id="1b862-225">V kořenovém adresáři webu vytvořte nový soubor s názvem *. Delete. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="1b862-225">In the root of the website, create a new file named *FileDelete.cshtml*.</span></span>
4. <span data-ttu-id="1b862-226">Existující obsah nahraďte následujícím:</span><span class="sxs-lookup"><span data-stu-id="1b862-226">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample6.cshtml)]

    <span data-ttu-id="1b862-227">Tato stránka obsahuje formulář, kde mohou uživatelé zadat název souboru obrázku.</span><span class="sxs-lookup"><span data-stu-id="1b862-227">This page contains a form where users can enter the name of an image file.</span></span> <span data-ttu-id="1b862-228">Nevstupují do přípony názvu souboru *. jpg* ; tím, že omezíte název souboru tímto způsobem, pomůžete uživatelům zabránit ve odstraňování libovolných souborů na vašem webu.</span><span class="sxs-lookup"><span data-stu-id="1b862-228">They don't enter the *.jpg* file-name extension; by restricting the file name like this, you help prevents users from deleting arbitrary files on your site.</span></span>

    <span data-ttu-id="1b862-229">Kód přečte název souboru, který uživatel zadal, a pak vytvoří úplnou cestu.</span><span class="sxs-lookup"><span data-stu-id="1b862-229">The code reads the file name that the user has entered and then constructs a complete path.</span></span> <span data-ttu-id="1b862-230">Chcete-li vytvořit cestu, kód používá aktuální cestu k webu (vrácený metodou `Server.MapPath`), název složky *images* , název, který uživatel zadal, a ". jpg" jako řetězec literálu.</span><span class="sxs-lookup"><span data-stu-id="1b862-230">To create the path, the code uses the current website path (as returned by the `Server.MapPath` method), the *images* folder name, the name that the user has provided, and ".jpg" as a literal string.</span></span>

    <span data-ttu-id="1b862-231">Chcete-li odstranit soubor, kód volá metodu `File.Delete` a předá jí úplnou cestu, kterou jste právě nastavili.</span><span class="sxs-lookup"><span data-stu-id="1b862-231">To delete the file, the code calls the `File.Delete` method, passing it the full path that you just constructed.</span></span> <span data-ttu-id="1b862-232">Na konci značky zobrazí kód potvrzovací zprávu, že soubor byl odstraněn.</span><span class="sxs-lookup"><span data-stu-id="1b862-232">At the end of the markup, code displays a confirmation message that the file was deleted.</span></span>
5. <span data-ttu-id="1b862-233">Spusťte stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="1b862-233">Run the page in a browser.</span></span> 

    ![obrazu](working-with-files/_static/image5.jpg)
6. <span data-ttu-id="1b862-235">Zadejte název souboru, který se má odstranit, a klikněte na **Odeslat**.</span><span class="sxs-lookup"><span data-stu-id="1b862-235">Enter the name of the file to delete and then click **Submit**.</span></span> <span data-ttu-id="1b862-236">Pokud byl soubor odstraněn, zobrazí se v dolní části stránky název souboru.</span><span class="sxs-lookup"><span data-stu-id="1b862-236">If the file was deleted, the name of the file is displayed at the bottom of the page.</span></span>

<a id="Letting_Users_Upload_a_File"></a>
## <a name="letting-users-upload-a-file"></a><span data-ttu-id="1b862-237">Umožnění uživatelům odeslat soubor</span><span class="sxs-lookup"><span data-stu-id="1b862-237">Letting Users Upload a File</span></span>

<span data-ttu-id="1b862-238">Pomoc s `FileUpload` umožňuje uživatelům nahrávat soubory na web.</span><span class="sxs-lookup"><span data-stu-id="1b862-238">The `FileUpload` helper lets users upload files to your website.</span></span> <span data-ttu-id="1b862-239">Následující postup ukazuje, jak umožnit uživatelům odeslat jeden soubor.</span><span class="sxs-lookup"><span data-stu-id="1b862-239">The procedure below shows you how to let users upload a single file.</span></span>

1. <span data-ttu-id="1b862-240">Přidejte knihovnu webových pomocníků ASP.NET na web, jak je popsáno v [tématu Instalace pomocníků na webu ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=252372), pokud jste ho ještě nepřidali.</span><span class="sxs-lookup"><span data-stu-id="1b862-240">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you didn't add it previously.</span></span>
2. <span data-ttu-id="1b862-241">Ve složce *Data\_aplikace* vytvořte novou složku a pojmenujte ji *UploadedFiles*.</span><span class="sxs-lookup"><span data-stu-id="1b862-241">In the *App\_Data* folder, create a new a folder and name it *UploadedFiles*.</span></span>
3. <span data-ttu-id="1b862-242">V kořenovém adresáři vytvořte nový soubor s názvem *FileUpload. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="1b862-242">In the root, create a new file named *FileUpload.cshtml*.</span></span>
4. <span data-ttu-id="1b862-243">Stávající obsah stránky nahraďte následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="1b862-243">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample7.cshtml)]

    <span data-ttu-id="1b862-244">Tělo stránky používá pomocnou část `FileUpload` k vytvoření pole pro odeslání a tlačítek, které jste pravděpodobně obeznámeni s:</span><span class="sxs-lookup"><span data-stu-id="1b862-244">The body portion of the page uses the `FileUpload` helper to create the upload box and buttons that you're probably familiar with:</span></span>

    ![obrazu](working-with-files/_static/image6.jpg)

    <span data-ttu-id="1b862-246">Vlastnosti, které jste nastavili pro pomocnou pomůcku `FileUpload` určete, že chcete, aby se soubor nahrál, a že se má tlačítko Odeslat **načíst.**</span><span class="sxs-lookup"><span data-stu-id="1b862-246">The properties that you set for the `FileUpload` helper specify that you want a single box for the file to upload and that you want the submit button to read **Upload**.</span></span> <span data-ttu-id="1b862-247">(Další pole přidáte později v článku.)</span><span class="sxs-lookup"><span data-stu-id="1b862-247">(You'll add more boxes later in the article.)</span></span>

    <span data-ttu-id="1b862-248">Když uživatel klikne na **Odeslat**, kód v horní části stránky získá soubor a uloží ho.</span><span class="sxs-lookup"><span data-stu-id="1b862-248">When the user clicks **Upload**, the code at the top of the page gets the file and saves it.</span></span> <span data-ttu-id="1b862-249">Objekt `Request`, který obvykle používáte k získání hodnot z polí formuláře, má také pole `Files` obsahující soubor (nebo soubory), které byly odeslány.</span><span class="sxs-lookup"><span data-stu-id="1b862-249">The `Request` object that you normally use to get values from form fields also has a `Files` array that contains the file (or files) that have been uploaded.</span></span> <span data-ttu-id="1b862-250">Jednotlivé soubory můžete v poli &#8212; získat mimo konkrétní pozice, například k získání prvního nahraného souboru, získáte `Request.Files[0]`, abyste získali druhý soubor, získáte `Request.Files[1]`a tak dále.</span><span class="sxs-lookup"><span data-stu-id="1b862-250">You can get individual files out of specific positions in the array &#8212; for example, to get the first uploaded file, you get `Request.Files[0]`, to get the second file, you get `Request.Files[1]`, and so on.</span></span> <span data-ttu-id="1b862-251">(Nezapomeňte, že při programování se počítá obvykle od nuly.)</span><span class="sxs-lookup"><span data-stu-id="1b862-251">(Remember that in programming, counting usually starts at zero.)</span></span>

    <span data-ttu-id="1b862-252">Při načítání nahraného souboru jej umístíte do proměnné (`uploadedFile`), abyste se mohli manipulovat.</span><span class="sxs-lookup"><span data-stu-id="1b862-252">When you fetch an uploaded file, you put it in a variable (here, `uploadedFile`) so that you can manipulate it.</span></span> <span data-ttu-id="1b862-253">Chcete-li určit název nahraného souboru, stačí získat jeho vlastnost `FileName`.</span><span class="sxs-lookup"><span data-stu-id="1b862-253">To determine the name of the uploaded file, you just get its `FileName` property.</span></span> <span data-ttu-id="1b862-254">Když však uživatel nahraje soubor, `FileName` obsahuje původní název uživatele, který obsahuje celou cestu.</span><span class="sxs-lookup"><span data-stu-id="1b862-254">However, when the user uploads a file, `FileName` contains the user's original name, which includes the entire path.</span></span> <span data-ttu-id="1b862-255">Může to vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="1b862-255">It might look like this:</span></span>

    <span data-ttu-id="1b862-256">*C:\Users\Public\Sample.txt*</span><span class="sxs-lookup"><span data-stu-id="1b862-256">*C:\Users\Public\Sample.txt*</span></span>

    <span data-ttu-id="1b862-257">Nechcete všechny informace o této cestě, ale, protože to je cesta k počítači uživatele, ne pro váš server.</span><span class="sxs-lookup"><span data-stu-id="1b862-257">You don't want all that path information, though, because that's the path on the user's computer, not for your server.</span></span> <span data-ttu-id="1b862-258">Přejete si jenom skutečný název souboru (*Sample. txt*).</span><span class="sxs-lookup"><span data-stu-id="1b862-258">You just want the actual file name (*Sample.txt*).</span></span> <span data-ttu-id="1b862-259">Pomocí metody `Path.GetFileName` můžete prokládat pouze soubor z cesty, například takto:</span><span class="sxs-lookup"><span data-stu-id="1b862-259">You can strip out just the file from a path by using the `Path.GetFileName` method, like this:</span></span>

    [!code-csharp[Main](working-with-files/samples/sample8.cs)]

    <span data-ttu-id="1b862-260">Objekt `Path` je nástroj, který má několik metod, jako je to, které lze použít k rozložení cest, kombinování cest a tak dále.</span><span class="sxs-lookup"><span data-stu-id="1b862-260">The `Path` object is a utility that has a number of methods like this that you can use to strip paths, combine paths, and so on.</span></span>

    <span data-ttu-id="1b862-261">Až se vám zobrazí název nahraného souboru, můžete vytvořit novou cestu, kam chcete nahrát nahraný soubor na svůj web.</span><span class="sxs-lookup"><span data-stu-id="1b862-261">Once you've gotten the name of the uploaded file, you can build a new path for where you want to store the uploaded file in your website.</span></span> <span data-ttu-id="1b862-262">V tomto případě zkombinujete `Server.MapPath`, názvy složek (*App\_data/UploadedFiles*) a nově vytvořený název souboru pro vytvoření nové cesty.</span><span class="sxs-lookup"><span data-stu-id="1b862-262">In this case, you combine `Server.MapPath`, the folder names (*App\_Data/UploadedFiles*), and the newly stripped file name to create a new path.</span></span> <span data-ttu-id="1b862-263">Potom můžete zavolat metodu `SaveAs` nahraného souboru a soubor skutečně uložit.</span><span class="sxs-lookup"><span data-stu-id="1b862-263">You can then call the uploaded file's `SaveAs` method to actually save the file.</span></span>
5. <span data-ttu-id="1b862-264">Spusťte stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="1b862-264">Run the page in a browser.</span></span> 

    ![obrazu](working-with-files/_static/image7.jpg)
6. <span data-ttu-id="1b862-266">Klikněte na **Procházet** a vyberte soubor, který se má nahrát.</span><span class="sxs-lookup"><span data-stu-id="1b862-266">Click **Browse** and then select a file to upload.</span></span> 

    ![obrazu](working-with-files/_static/image8.jpg)

    <span data-ttu-id="1b862-268">Textové pole vedle tlačítka **Procházet** bude obsahovat cestu a umístění souboru.</span><span class="sxs-lookup"><span data-stu-id="1b862-268">The text box next to the **Browse** button will contain the path and file location.</span></span>

    ![obrazu](working-with-files/_static/image9.jpg)
7. <span data-ttu-id="1b862-270">Klikněte na **Odeslat**.</span><span class="sxs-lookup"><span data-stu-id="1b862-270">Click **Upload**.</span></span>
8. <span data-ttu-id="1b862-271">Na webu klikněte pravým tlačítkem na složku projektu a pak klikněte na **aktualizovat**.</span><span class="sxs-lookup"><span data-stu-id="1b862-271">In the website, right-click the project folder and then click **Refresh**.</span></span>
9. <span data-ttu-id="1b862-272">Otevřete složku *UploadedFiles* .</span><span class="sxs-lookup"><span data-stu-id="1b862-272">Open the *UploadedFiles* folder.</span></span> <span data-ttu-id="1b862-273">Soubor, který jste nahráli, je ve složce.</span><span class="sxs-lookup"><span data-stu-id="1b862-273">The file that you uploaded is in the folder.</span></span> 

    ![obrazu](working-with-files/_static/image10.jpg)

<a id="Letting_Users_Upload_Multiple_Files"></a>
## <a name="letting-users-upload-multiple-files"></a><span data-ttu-id="1b862-275">Umožnění uživatelům nahrávat více souborů</span><span class="sxs-lookup"><span data-stu-id="1b862-275">Letting Users Upload Multiple Files</span></span>

<span data-ttu-id="1b862-276">V předchozím příkladu umožníte uživatelům odeslat jeden soubor.</span><span class="sxs-lookup"><span data-stu-id="1b862-276">In the previous example, you let users upload one file.</span></span> <span data-ttu-id="1b862-277">Můžete ale použít pomocníka `FileUpload` k nahrání více souborů najednou.</span><span class="sxs-lookup"><span data-stu-id="1b862-277">But you can use the `FileUpload` helper to upload more than one file at a time.</span></span> <span data-ttu-id="1b862-278">To je užitečné pro scénáře, jako je nahrávání fotek, kde je nahrávání jednoho souboru v čase zdlouhavé.</span><span class="sxs-lookup"><span data-stu-id="1b862-278">This is handy for scenarios like uploading photos, where uploading one file at a time is tedious.</span></span> <span data-ttu-id="1b862-279">(Můžete si přečíst informace o nahrávání fotek při [práci s obrázky na webu ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202897).) Tento příklad ukazuje, jak umožnit uživatelům nahrávání dvou souborů najednou, i když můžete stejný postup použít k nahrání více než.</span><span class="sxs-lookup"><span data-stu-id="1b862-279">(You can read about uploading photos in [Working with Images in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202897).) This example shows how to let users upload two at a time, although you can use the same technique to upload more than that.</span></span>

1. <span data-ttu-id="1b862-280">Přidejte knihovnu webových pomocníků ASP.NET na web, jak je popsáno v [tématu Instalace pomocníků na webu ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=252372), pokud jste to ještě neudělali.</span><span class="sxs-lookup"><span data-stu-id="1b862-280">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you haven't already.</span></span>
2. <span data-ttu-id="1b862-281">Vytvořte novou stránku s názvem *FileUploadMultiple. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="1b862-281">Create a new page named *FileUploadMultiple.cshtml*.</span></span>
3. <span data-ttu-id="1b862-282">Stávající obsah stránky nahraďte následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="1b862-282">Replace the existing content in the page with the following:</span></span>  

    [!code-cshtml[Main](working-with-files/samples/sample9.cshtml)]

    <span data-ttu-id="1b862-283">V tomto příkladu je pomocná Nápověda `FileUpload` v těle stránky nakonfigurovaná tak, aby uživatelé mohli ve výchozím nastavení nahrávat dva soubory.</span><span class="sxs-lookup"><span data-stu-id="1b862-283">In this example, the `FileUpload` helper in the body of the page is configured to let users upload two files by default.</span></span> <span data-ttu-id="1b862-284">Vzhledem k tomu, že `allowMoreFilesToBeAdded` je nastavená na `true`, pomoc vykreslí odkaz, který uživateli umožňuje přidat další pole pro nahrávání:</span><span class="sxs-lookup"><span data-stu-id="1b862-284">Because `allowMoreFilesToBeAdded` is set to `true`, the helper renders a link that lets user add more upload boxes:</span></span>

    ![obrazu](working-with-files/_static/image11.jpg)

    <span data-ttu-id="1b862-286">Chcete-li zpracovat soubory, které uživatel nahraje, kód používá stejnou základní techniku, jakou jste použili v předchozím příkladu &#8212; , načte soubor z `Request.Files` a pak ho uloží.</span><span class="sxs-lookup"><span data-stu-id="1b862-286">To process the files that the user uploads, the code uses the same basic technique that you used in the previous example &#8212; get a file from `Request.Files` and then save it.</span></span> <span data-ttu-id="1b862-287">(Včetně různých věcí, které musíte udělat, abyste získali správný název a cestu k souboru.) Inovace tohoto času je v tom, že uživatel může nahrávat více souborů a vy neznáte mnoho.</span><span class="sxs-lookup"><span data-stu-id="1b862-287">(Including the various things you need to do to get the right file name and path.) The innovation this time is that the user might be uploading multiple files and you don't know many.</span></span> <span data-ttu-id="1b862-288">Chcete-li zjistit, můžete získat `Request.Files.Count`.</span><span class="sxs-lookup"><span data-stu-id="1b862-288">To find out, you can get `Request.Files.Count`.</span></span>

    <span data-ttu-id="1b862-289">S tímto číslem můžete cyklicky procházet `Request.Files`, načítat jednotlivé soubory a ukládat je.</span><span class="sxs-lookup"><span data-stu-id="1b862-289">With this number in hand, you can loop through `Request.Files`, fetch each file in turn, and save it.</span></span> <span data-ttu-id="1b862-290">Pokud chcete pomocí kolekce procyklovat známý počet opakování, můžete použít smyčku `for`, například:</span><span class="sxs-lookup"><span data-stu-id="1b862-290">When you want to loop a known number of times through a collection, you can use a `for` loop, like this:</span></span>

    [!code-csharp[Main](working-with-files/samples/sample10.cs)]

    <span data-ttu-id="1b862-291">Proměnná `i` je pouze dočasný čítač, který bude přecházet od nuly k libovolnému hornímu limitu, který jste nastavili.</span><span class="sxs-lookup"><span data-stu-id="1b862-291">The variable `i` is just a temporary counter that will go from zero to whatever upper limit you set.</span></span> <span data-ttu-id="1b862-292">V tomto případě je horní limit počet souborů.</span><span class="sxs-lookup"><span data-stu-id="1b862-292">In this case, the upper limit is the number of files.</span></span> <span data-ttu-id="1b862-293">Vzhledem k tomu, že čítač začíná nulou, protože je typický pro počítání scénářů v ASP.NET, je horní limit ve skutečnosti nižší než počet souborů.</span><span class="sxs-lookup"><span data-stu-id="1b862-293">But because the counter starts at zero, as is typical for counting scenarios in ASP.NET, the upper limit is actually one less than the file count.</span></span> <span data-ttu-id="1b862-294">(Pokud se nahrají tři soubory, je počet nula až 2.)</span><span class="sxs-lookup"><span data-stu-id="1b862-294">(If three files are uploaded, the count is zero to 2.)</span></span>

    <span data-ttu-id="1b862-295">Proměnná `uploadedCount` vyhodnotí všechny soubory, které se úspěšně nahrály a uložily.</span><span class="sxs-lookup"><span data-stu-id="1b862-295">The `uploadedCount` variable totals all the files that are successfully uploaded and saved.</span></span> <span data-ttu-id="1b862-296">Tyto účty kódu pro možnost, že očekávaný soubor nemusí být možné nahrát.</span><span class="sxs-lookup"><span data-stu-id="1b862-296">This code accounts for the possibility that an expected file may not be able to be uploaded.</span></span>
4. <span data-ttu-id="1b862-297">Spusťte stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="1b862-297">Run the page in a browser.</span></span> <span data-ttu-id="1b862-298">Prohlížeč zobrazí stránku a její dvě pole pro odeslání.</span><span class="sxs-lookup"><span data-stu-id="1b862-298">The browser displays the page and its two upload boxes.</span></span>
5. <span data-ttu-id="1b862-299">Vyberte dva soubory k nahrání.</span><span class="sxs-lookup"><span data-stu-id="1b862-299">Select two files to upload.</span></span>
6. <span data-ttu-id="1b862-300">Klikněte na **Přidat další soubor**.</span><span class="sxs-lookup"><span data-stu-id="1b862-300">Click **Add another file**.</span></span> <span data-ttu-id="1b862-301">Na stránce se zobrazí nové pole pro odeslání.</span><span class="sxs-lookup"><span data-stu-id="1b862-301">The page displays a new upload box.</span></span> 

    ![obrazu](working-with-files/_static/image12.jpg)
7. <span data-ttu-id="1b862-303">Klikněte na **Odeslat**.</span><span class="sxs-lookup"><span data-stu-id="1b862-303">Click **Upload**.</span></span>
8. <span data-ttu-id="1b862-304">Na webu klikněte pravým tlačítkem na složku projektu a pak klikněte na **aktualizovat**.</span><span class="sxs-lookup"><span data-stu-id="1b862-304">In the website, right-click the project folder and then click **Refresh**.</span></span>
9. <span data-ttu-id="1b862-305">Otevřete složku *UploadedFiles* , abyste viděli úspěšně nahrané soubory.</span><span class="sxs-lookup"><span data-stu-id="1b862-305">Open the *UploadedFiles* folder to see the successfully uploaded files.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="1b862-306">Další prostředky</span><span class="sxs-lookup"><span data-stu-id="1b862-306">Additional Resources</span></span>

[<span data-ttu-id="1b862-307">Práce s obrázky na webu ASP.NET Web Pages</span><span class="sxs-lookup"><span data-stu-id="1b862-307">Working with Images in an ASP.NET Web Pages Site</span></span>](https://go.microsoft.com/fwlink/?LinkId=202897)

[<span data-ttu-id="1b862-308">Export do souboru CSV</span><span class="sxs-lookup"><span data-stu-id="1b862-308">Exporting to a CSV File</span></span>](https://msdn.microsoft.com/library/ms155919.aspx)
